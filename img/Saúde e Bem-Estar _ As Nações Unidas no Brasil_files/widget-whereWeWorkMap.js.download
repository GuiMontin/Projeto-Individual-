var Ute=Object.defineProperty;var zte=(mp,kf,fA)=>kf in mp?Ute(mp,kf,{enumerable:!0,configurable:!0,writable:!0,value:fA}):mp[kf]=fA;var I0=(mp,kf,fA)=>(zte(mp,typeof kf!="symbol"?kf+"":kf,fA),fA);(function(){"use strict";var ww;var mp=document.createElement("style");mp.textContent=`.marker-cluster-small{background-color:#b5e28c99}.marker-cluster-small div{background-color:#6ecc3999}.marker-cluster-medium{background-color:#f1d35799}.marker-cluster-medium div{background-color:#f0c20c99}.marker-cluster-large{background-color:#fd9c7399}.marker-cluster-large div{background-color:#f1801799}.leaflet-oldie .marker-cluster-small{background-color:#b5e28c}.leaflet-oldie .marker-cluster-small div{background-color:#6ecc39}.leaflet-oldie .marker-cluster-medium{background-color:#f1d357}.leaflet-oldie .marker-cluster-medium div{background-color:#f0c20c}.leaflet-oldie .marker-cluster-large{background-color:#fd9c73}.leaflet-oldie .marker-cluster-large div{background-color:#f18017}.marker-cluster{background-clip:padding-box;border-radius:20px}.marker-cluster div{width:30px;height:30px;margin-left:5px;margin-top:5px;text-align:center;border-radius:15px;font:12px Helvetica Neue,Arial,Helvetica,sans-serif}.marker-cluster span{line-height:30px}.leaflet-cluster-anim .leaflet-marker-icon,.leaflet-cluster-anim .leaflet-marker-shadow{-webkit-transition:-webkit-transform .3s ease-out,opacity .3s ease-in;-moz-transition:-moz-transform .3s ease-out,opacity .3s ease-in;-o-transition:-o-transform .3s ease-out,opacity .3s ease-in;transition:transform .3s ease-out,opacity .3s ease-in}.leaflet-cluster-spider-leg{-webkit-transition:-webkit-stroke-dashoffset .3s ease-out,-webkit-stroke-opacity .3s ease-in;-moz-transition:-moz-stroke-dashoffset .3s ease-out,-moz-stroke-opacity .3s ease-in;-o-transition:-o-stroke-dashoffset .3s ease-out,-o-stroke-opacity .3s ease-in;transition:stroke-dashoffset .3s ease-out,stroke-opacity .3s ease-in}.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-width:none!important;max-height:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none!important;max-height:none!important;width:auto;padding:0}.leaflet-container img.leaflet-tile{mix-blend-mode:plus-lighter}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{border:2px dotted #38f;background:#ffffff80}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{box-shadow:0 1px 5px #000000a6;border-radius:4px}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover,.leaflet-bar a:focus{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px #0006;background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=)}.leaflet-container .leaflet-control-attribution{background:#fff;background:#fffc;margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333;line-height:1.4}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover,.leaflet-control-attribution a:focus{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;vertical-align:baseline!important;width:1em;height:.6669em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;white-space:nowrap;-moz-box-sizing:border-box;box-sizing:border-box;background:#fffc;text-shadow:1px 1px #fff}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 24px 13px 20px;line-height:1.3;font-size:13px;font-size:1.08333em;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-top:-1px;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;pointer-events:auto;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;color:#333;box-shadow:0 3px 14px #0006}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;border:none;text-align:center;width:24px;height:24px;font:16px/24px Tahoma,Verdana,sans-serif;color:#757575;text-decoration:none;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover,.leaflet-container a.leaflet-popup-close-button:focus{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=.70710678,M12=.70710678,M21=-.70710678,M22=.70710678)}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px #0006}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}
`,document.head.appendChild(mp);function kf(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const d in r)if(d!=="default"&&!(d in e)){const f=Object.getOwnPropertyDescriptor(r,d);f&&Object.defineProperty(e,d,f.get?f:{enumerable:!0,get:()=>r[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var fA,Cr,HE,Tm,VE,GE,qw,WE,wy={},KE=[],_z=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,M0=Array.isArray;function Pf(e,t){for(var i in t)e[i]=t[i];return e}function ZE(e){var t=e.parentNode;t&&t.removeChild(e)}function Dl(e,t,i){var r,d,f,v={};for(f in t)f=="key"?r=t[f]:f=="ref"?d=t[f]:v[f]=t[f];if(arguments.length>2&&(v.children=arguments.length>3?fA.call(arguments,2):i),typeof e=="function"&&e.defaultProps!=null)for(f in e.defaultProps)v[f]===void 0&&(v[f]=e.defaultProps[f]);return Cy(e,v,r,d,null)}function Cy(e,t,i,r,d){var f={type:e,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:d??++HE,__i:-1,__u:0};return d==null&&Cr.vnode!=null&&Cr.vnode(f),f}function Xw(){return{current:null}}function vs(e){return e.children}function pA(e,t){this.props=e,this.context=t}function jg(e,t){if(t==null)return e.__?jg(e.__,e.__i+1):null;for(var i;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null)return i.__e;return typeof e.type=="function"?jg(e):null}function qE(e){var t,i;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null){e.__e=e.__c.base=i.__e;break}return qE(e)}}function Yw(e){(!e.__d&&(e.__d=!0)&&Tm.push(e)&&!L0.__r++||VE!==Cr.debounceRendering)&&((VE=Cr.debounceRendering)||GE)(L0)}function L0(){var e,t,i,r,d,f,v,h,s;for(Tm.sort(qw);e=Tm.shift();)e.__d&&(t=Tm.length,r=void 0,f=(d=(i=e).__v).__e,h=[],s=[],(v=i.__P)&&((r=Pf({},d)).__v=d.__v+1,Cr.vnode&&Cr.vnode(r),Jw(v,r,d,i.__n,v.ownerSVGElement!==void 0,32&d.__u?[f]:null,h,f??jg(d),!!(32&d.__u),s),r.__.__k[r.__i]=r,nS(h,r,s),r.__e!=f&&qE(r)),Tm.length>t&&Tm.sort(qw));L0.__r=0}function XE(e,t,i,r,d,f,v,h,s,U,$){var V,q,te,he,Ae,De=r&&r.__k||KE,ke=t.length;for(i.__d=s,yz(i,t,De),s=i.__d,V=0;V<ke;V++)(te=i.__k[V])!=null&&typeof te!="boolean"&&typeof te!="function"&&(q=te.__i===-1?wy:De[te.__i]||wy,te.__i=V,Jw(e,te,q,d,f,v,h,s,U,$),he=te.__e,te.ref&&q.ref!=te.ref&&(q.ref&&e1(q.ref,null,te),$.push(te.ref,te.__c||he,te)),Ae==null&&he!=null&&(Ae=he),65536&te.__u||q.__k===te.__k?s=YE(te,s,e):typeof te.type=="function"&&te.__d!==void 0?s=te.__d:he&&(s=he.nextSibling),te.__d=void 0,te.__u&=-196609);i.__d=s,i.__e=Ae}function yz(e,t,i){var r,d,f,v,h,s=t.length,U=i.length,$=U,V=0;for(e.__k=[],r=0;r<s;r++)(d=e.__k[r]=(d=t[r])==null||typeof d=="boolean"||typeof d=="function"?null:typeof d=="string"||typeof d=="number"||typeof d=="bigint"||d.constructor==String?Cy(null,d,null,null,d):M0(d)?Cy(vs,{children:d},null,null,null):d.constructor===void 0&&d.__b>0?Cy(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d)!=null?(d.__=e,d.__b=e.__b+1,h=vz(d,i,v=r+V,$),d.__i=h,f=null,h!==-1&&($--,(f=i[h])&&(f.__u|=131072)),f==null||f.__v===null?(h==-1&&V--,typeof d.type!="function"&&(d.__u|=65536)):h!==v&&(h===v+1?V++:h>v?$>s-v?V+=h-v:V--:V=h<v&&h==v-1?h-v:0,h!==r+V&&(d.__u|=65536))):(f=i[r])&&f.key==null&&f.__e&&(f.__e==e.__d&&(e.__d=jg(f)),t1(f,f,!1),i[r]=null,$--);if($)for(r=0;r<U;r++)(f=i[r])!=null&&!(131072&f.__u)&&(f.__e==e.__d&&(e.__d=jg(f)),t1(f,f))}function YE(e,t,i){var r,d;if(typeof e.type=="function"){for(r=e.__k,d=0;r&&d<r.length;d++)r[d]&&(r[d].__=e,t=YE(r[d],t,i));return t}return e.__e!=t&&(i.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function Ff(e,t){return t=t||[],e==null||typeof e=="boolean"||(M0(e)?e.some(function(i){Ff(i,t)}):t.push(e)),t}function vz(e,t,i,r){var d=e.key,f=e.type,v=i-1,h=i+1,s=t[i];if(s===null||s&&d==s.key&&f===s.type)return i;if(r>(s!=null&&!(131072&s.__u)?1:0))for(;v>=0||h<t.length;){if(v>=0){if((s=t[v])&&!(131072&s.__u)&&d==s.key&&f===s.type)return v;v--}if(h<t.length){if((s=t[h])&&!(131072&s.__u)&&d==s.key&&f===s.type)return h;h++}}return-1}function JE(e,t,i){t[0]==="-"?e.setProperty(t,i??""):e[t]=i==null?"":typeof i!="number"||_z.test(t)?i:i+"px"}function k0(e,t,i,r,d){var f;e:if(t==="style")if(typeof i=="string")e.style.cssText=i;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)i&&t in i||JE(e.style,t,"");if(i)for(t in i)r&&i[t]===r[t]||JE(e.style,t,i[t])}else if(t[0]==="o"&&t[1]==="n")f=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+f]=i,i?r?i.u=r.u:(i.u=Date.now(),e.addEventListener(t,f?tS:eS,f)):e.removeEventListener(t,f?tS:eS,f);else{if(d)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,i))}}function eS(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(Cr.event?Cr.event(e):e)}function tS(e){return this.l[e.type+!0](Cr.event?Cr.event(e):e)}function Jw(e,t,i,r,d,f,v,h,s,U){var $,V,q,te,he,Ae,De,ke,xe,Te,Ee,Fe,Se,nt,xt,Bt=t.type;if(t.constructor!==void 0)return null;128&i.__u&&(s=!!(32&i.__u),f=[h=t.__e=i.__e]),($=Cr.__b)&&$(t);e:if(typeof Bt=="function")try{if(ke=t.props,xe=($=Bt.contextType)&&r[$.__c],Te=$?xe?xe.props.value:$.__:r,i.__c?De=(V=t.__c=i.__c).__=V.__E:("prototype"in Bt&&Bt.prototype.render?t.__c=V=new Bt(ke,Te):(t.__c=V=new pA(ke,Te),V.constructor=Bt,V.render=bz),xe&&xe.sub(V),V.props=ke,V.state||(V.state={}),V.context=Te,V.__n=r,q=V.__d=!0,V.__h=[],V._sb=[]),V.__s==null&&(V.__s=V.state),Bt.getDerivedStateFromProps!=null&&(V.__s==V.state&&(V.__s=Pf({},V.__s)),Pf(V.__s,Bt.getDerivedStateFromProps(ke,V.__s))),te=V.props,he=V.state,V.__v=t,q)Bt.getDerivedStateFromProps==null&&V.componentWillMount!=null&&V.componentWillMount(),V.componentDidMount!=null&&V.__h.push(V.componentDidMount);else{if(Bt.getDerivedStateFromProps==null&&ke!==te&&V.componentWillReceiveProps!=null&&V.componentWillReceiveProps(ke,Te),!V.__e&&(V.shouldComponentUpdate!=null&&V.shouldComponentUpdate(ke,V.__s,Te)===!1||t.__v===i.__v)){for(t.__v!==i.__v&&(V.props=ke,V.state=V.__s,V.__d=!1),t.__e=i.__e,t.__k=i.__k,t.__k.forEach(function(Xe){Xe&&(Xe.__=t)}),Ee=0;Ee<V._sb.length;Ee++)V.__h.push(V._sb[Ee]);V._sb=[],V.__h.length&&v.push(V);break e}V.componentWillUpdate!=null&&V.componentWillUpdate(ke,V.__s,Te),V.componentDidUpdate!=null&&V.__h.push(function(){V.componentDidUpdate(te,he,Ae)})}if(V.context=Te,V.props=ke,V.__P=e,V.__e=!1,Fe=Cr.__r,Se=0,"prototype"in Bt&&Bt.prototype.render){for(V.state=V.__s,V.__d=!1,Fe&&Fe(t),$=V.render(V.props,V.state,V.context),nt=0;nt<V._sb.length;nt++)V.__h.push(V._sb[nt]);V._sb=[]}else do V.__d=!1,Fe&&Fe(t),$=V.render(V.props,V.state,V.context),V.state=V.__s;while(V.__d&&++Se<25);V.state=V.__s,V.getChildContext!=null&&(r=Pf(Pf({},r),V.getChildContext())),q||V.getSnapshotBeforeUpdate==null||(Ae=V.getSnapshotBeforeUpdate(te,he)),XE(e,M0(xt=$!=null&&$.type===vs&&$.key==null?$.props.children:$)?xt:[xt],t,i,r,d,f,v,h,s,U),V.base=t.__e,t.__u&=-161,V.__h.length&&v.push(V),De&&(V.__E=V.__=null)}catch(Xe){t.__v=null,s||f!=null?(t.__e=h,t.__u|=s?160:32,f[f.indexOf(h)]=null):(t.__e=i.__e,t.__k=i.__k),Cr.__e(Xe,t,i)}else f==null&&t.__v===i.__v?(t.__k=i.__k,t.__e=i.__e):t.__e=xz(i.__e,t,i,r,d,f,v,s,U);($=Cr.diffed)&&$(t)}function nS(e,t,i){t.__d=void 0;for(var r=0;r<i.length;r++)e1(i[r],i[++r],i[++r]);Cr.__c&&Cr.__c(t,e),e.some(function(d){try{e=d.__h,d.__h=[],e.some(function(f){f.call(d)})}catch(f){Cr.__e(f,d.__v)}})}function xz(e,t,i,r,d,f,v,h,s){var U,$,V,q,te,he,Ae,De=i.props,ke=t.props,xe=t.type;if(xe==="svg"&&(d=!0),f!=null){for(U=0;U<f.length;U++)if((te=f[U])&&"setAttribute"in te==!!xe&&(xe?te.localName===xe:te.nodeType===3)){e=te,f[U]=null;break}}if(e==null){if(xe===null)return document.createTextNode(ke);e=d?document.createElementNS("http://www.w3.org/2000/svg",xe):document.createElement(xe,ke.is&&ke),f=null,h=!1}if(xe===null)De===ke||h&&e.data===ke||(e.data=ke);else{if(f=f&&fA.call(e.childNodes),De=i.props||wy,!h&&f!=null)for(De={},U=0;U<e.attributes.length;U++)De[(te=e.attributes[U]).name]=te.value;for(U in De)te=De[U],U=="children"||(U=="dangerouslySetInnerHTML"?V=te:U==="key"||U in ke||k0(e,U,null,te,d));for(U in ke)te=ke[U],U=="children"?q=te:U=="dangerouslySetInnerHTML"?$=te:U=="value"?he=te:U=="checked"?Ae=te:U==="key"||h&&typeof te!="function"||De[U]===te||k0(e,U,te,De[U],d);if($)h||V&&($.__html===V.__html||$.__html===e.innerHTML)||(e.innerHTML=$.__html),t.__k=[];else if(V&&(e.innerHTML=""),XE(e,M0(q)?q:[q],t,i,r,d&&xe!=="foreignObject",f,v,f?f[0]:i.__k&&jg(i,0),h,s),f!=null)for(U=f.length;U--;)f[U]!=null&&ZE(f[U]);h||(U="value",he!==void 0&&(he!==e[U]||xe==="progress"&&!he||xe==="option"&&he!==De[U])&&k0(e,U,he,De[U],!1),U="checked",Ae!==void 0&&Ae!==e[U]&&k0(e,U,Ae,De[U],!1))}return e}function e1(e,t,i){try{typeof e=="function"?e(t):e.current=t}catch(r){Cr.__e(r,i)}}function t1(e,t,i){var r,d;if(Cr.unmount&&Cr.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||e1(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(f){Cr.__e(f,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(d=0;d<r.length;d++)r[d]&&t1(r[d],t,i||typeof e.type!="function");i||e.__e==null||ZE(e.__e),e.__=e.__e=e.__d=void 0}function bz(e,t,i){return this.constructor(e,i)}function Hg(e,t,i){var r,d,f,v;Cr.__&&Cr.__(e,t),d=(r=typeof i=="function")?null:i&&i.__k||t.__k,f=[],v=[],Jw(t,e=(!r&&i||t).__k=Dl(vs,null,[e]),d||wy,wy,t.ownerSVGElement!==void 0,!r&&i?[i]:d?null:t.firstChild?fA.call(t.childNodes):null,f,!r&&i?i:d?d.__e:t.firstChild,r,v),nS(f,e,v)}function iS(e,t){Hg(e,t,iS)}function wz(e,t,i){var r,d,f,v,h=Pf({},e.props);for(f in e.type&&e.type.defaultProps&&(v=e.type.defaultProps),t)f=="key"?r=t[f]:f=="ref"?d=t[f]:h[f]=t[f]===void 0&&v!==void 0?v[f]:t[f];return arguments.length>2&&(h.children=arguments.length>3?fA.call(arguments,2):i),Cy(e.type,h,r||e.key,d||e.ref,null)}function Sh(e,t){var i={__c:t="__cC"+WE++,__:e,Consumer:function(r,d){return r.children(d)},Provider:function(r){var d,f;return this.getChildContext||(d=[],(f={})[t]=this,this.getChildContext=function(){return f},this.shouldComponentUpdate=function(v){this.props.value!==v.value&&d.some(function(h){h.__e=!0,Yw(h)})},this.sub=function(v){d.push(v);var h=v.componentWillUnmount;v.componentWillUnmount=function(){d.splice(d.indexOf(v),1),h&&h.call(v)}}),r.children}};return i.Provider.__=i.Consumer.contextType=i}fA=KE.slice,Cr={__e:function(e,t,i,r){for(var d,f,v;t=t.__;)if((d=t.__c)&&!d.__)try{if((f=d.constructor)&&f.getDerivedStateFromError!=null&&(d.setState(f.getDerivedStateFromError(e)),v=d.__d),d.componentDidCatch!=null&&(d.componentDidCatch(e,r||{}),v=d.__d),v)return d.__E=d}catch(h){e=h}throw e}},HE=0,pA.prototype.setState=function(e,t){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Pf({},this.state),typeof e=="function"&&(e=e(Pf({},i),this.props)),e&&Pf(i,e),e!=null&&this.__v&&(t&&this._sb.push(t),Yw(this))},pA.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Yw(this))},pA.prototype.render=vs,Tm=[],GE=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,qw=function(e,t){return e.__v.__b-t.__v.__b},L0.__r=0,WE=0;var Df,Ba,n1,rS,Vg=0,oS=[],P0=[],sS=Cr.__b,aS=Cr.__r,lS=Cr.diffed,cS=Cr.__c,uS=Cr.unmount;function Em(e,t){Cr.__h&&Cr.__h(Ba,e,Vg||t),Vg=0;var i=Ba.__H||(Ba.__H={__:[],__h:[]});return e>=i.__.length&&i.__.push({__V:P0}),i.__[e]}function ur(e){return Vg=1,i1(fS,e)}function i1(e,t,i){var r=Em(Df++,2);if(r.t=e,!r.__c&&(r.__=[i?i(t):fS(void 0,t),function(h){var s=r.__N?r.__N[0]:r.__[0],U=r.t(s,h);s!==U&&(r.__N=[U,r.__[1]],r.__c.setState({}))}],r.__c=Ba,!Ba.u)){var d=function(h,s,U){if(!r.__c.__H)return!0;var $=r.__c.__H.__.filter(function(q){return q.__c});if($.every(function(q){return!q.__N}))return!f||f.call(this,h,s,U);var V=!1;return $.forEach(function(q){if(q.__N){var te=q.__[0];q.__=q.__N,q.__N=void 0,te!==q.__[0]&&(V=!0)}}),!(!V&&r.__c.props===h)&&(!f||f.call(this,h,s,U))};Ba.u=!0;var f=Ba.shouldComponentUpdate,v=Ba.componentWillUpdate;Ba.componentWillUpdate=function(h,s,U){if(this.__e){var $=f;f=void 0,d(h,s,U),f=$}v&&v.call(this,h,s,U)},Ba.shouldComponentUpdate=d}return r.__N||r.__}function $i(e,t){var i=Em(Df++,3);!Cr.__s&&o1(i.__H,t)&&(i.__=e,i.i=t,Ba.__H.__h.push(i))}function gp(e,t){var i=Em(Df++,4);!Cr.__s&&o1(i.__H,t)&&(i.__=e,i.i=t,Ba.__h.push(i))}function Pi(e){return Vg=5,tl(function(){return{current:e}},[])}function Ih(e,t,i){Vg=6,gp(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},i==null?i:i.concat(e))}function tl(e,t){var i=Em(Df++,7);return o1(i.__H,t)?(i.__V=e(),i.i=t,i.__h=e,i.__V):i.__}function xs(e,t){return Vg=8,tl(function(){return e},t)}function nl(e){var t=Ba.context[e.__c],i=Em(Df++,9);return i.c=e,t?(i.__==null&&(i.__=!0,t.sub(Ba)),t.props.value):e.__}function hS(e,t){Cr.useDebugValue&&Cr.useDebugValue(t?t(e):e)}function Cz(e){var t=Em(Df++,10),i=ur();return t.__=e,Ba.componentDidCatch||(Ba.componentDidCatch=function(r,d){t.__&&t.__(r,d),i[1](r)}),[i[0],function(){i[1](void 0)}]}function dS(){var e=Em(Df++,11);if(!e.__){for(var t=Ba.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var i=t.__m||(t.__m=[0,0]);e.__="P"+i[0]+"-"+i[1]++}return e.__}function Bz(){for(var e;e=oS.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(F0),e.__H.__h.forEach(r1),e.__H.__h=[]}catch(t){e.__H.__h=[],Cr.__e(t,e.__v)}}Cr.__b=function(e){Ba=null,sS&&sS(e)},Cr.__r=function(e){aS&&aS(e),Df=0;var t=(Ba=e.__c).__H;t&&(n1===Ba?(t.__h=[],Ba.__h=[],t.__.forEach(function(i){i.__N&&(i.__=i.__N),i.__V=P0,i.__N=i.i=void 0})):(t.__h.forEach(F0),t.__h.forEach(r1),t.__h=[],Df=0)),n1=Ba},Cr.diffed=function(e){lS&&lS(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(oS.push(t)!==1&&rS===Cr.requestAnimationFrame||((rS=Cr.requestAnimationFrame)||Tz)(Bz)),t.__H.__.forEach(function(i){i.i&&(i.__H=i.i),i.__V!==P0&&(i.__=i.__V),i.i=void 0,i.__V=P0})),n1=Ba=null},Cr.__c=function(e,t){t.some(function(i){try{i.__h.forEach(F0),i.__h=i.__h.filter(function(r){return!r.__||r1(r)})}catch(r){t.some(function(d){d.__h&&(d.__h=[])}),t=[],Cr.__e(r,i.__v)}}),cS&&cS(e,t)},Cr.unmount=function(e){uS&&uS(e);var t,i=e.__c;i&&i.__H&&(i.__H.__.forEach(function(r){try{F0(r)}catch(d){t=d}}),i.__H=void 0,t&&Cr.__e(t,i.__v))};var AS=typeof requestAnimationFrame=="function";function Tz(e){var t,i=function(){clearTimeout(r),AS&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(i,100);AS&&(t=requestAnimationFrame(i))}function F0(e){var t=Ba,i=e.__c;typeof i=="function"&&(e.__c=void 0,i()),Ba=t}function r1(e){var t=Ba;e.__c=e.__(),Ba=t}function o1(e,t){return!e||e.length!==t.length||t.some(function(i,r){return i!==e[r]})}function fS(e,t){return typeof t=="function"?t(e):t}var hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var d=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,d.get?d:{enumerable:!0,get:function(){return e[r]}})}),i}var D0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */D0.exports,function(e,t){(function(){var i,r="4.17.21",d=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",v="Expected a function",h="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",U=500,$="__lodash_placeholder__",V=1,q=2,te=4,he=1,Ae=2,De=1,ke=2,xe=4,Te=8,Ee=16,Fe=32,Se=64,nt=128,xt=256,Bt=512,Xe=30,qt="...",rn=800,Ut=16,Kt=1,On=2,Gt=3,Rn=1/0,mn=9007199254740991,Cn=17976931348623157e292,Qt=NaN,Xn=4294967295,Wn=Xn-1,Bi=Xn>>>1,Bn=[["ary",nt],["bind",De],["bindKey",ke],["curry",Te],["curryRight",Ee],["flip",Bt],["partial",Fe],["partialRight",Se],["rearg",xt]],Hn="[object Arguments]",ei="[object Array]",tr="[object AsyncFunction]",ri="[object Boolean]",zi="[object Date]",Vr="[object DOMException]",sr="[object Error]",li="[object Function]",Qi="[object GeneratorFunction]",Ki="[object Map]",ji="[object Number]",di="[object Null]",Ir="[object Object]",nr="[object Promise]",Ri="[object Proxy]",hr="[object RegExp]",ir="[object Set]",Ur="[object String]",jr="[object Symbol]",pr="[object Undefined]",Zr="[object WeakMap]",Eo="[object WeakSet]",Ao="[object ArrayBuffer]",$t="[object DataView]",en="[object Float32Array]",Fr="[object Float64Array]",So="[object Int8Array]",er="[object Int16Array]",xi="[object Int32Array]",Xi="[object Uint8Array]",Un="[object Uint8ClampedArray]",Oi="[object Uint16Array]",bn="[object Uint32Array]",bi=/\b__p \+= '';/g,fi=/\b(__p \+=) '' \+/g,ot=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ie=/&(?:amp|lt|gt|quot|#39);/g,Ce=/[&<>"']/g,st=RegExp(Ie.source),ft=RegExp(Ce.source),kt=/<%-([\s\S]+?)%>/g,zt=/<%([\s\S]+?)%>/g,Rt=/<%=([\s\S]+?)%>/g,yt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xt=/^\w*$/,Tn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fn=/[\\^$.*+?()[\]{}|]/g,zn=RegExp(Fn.source),rr=/^\s+/,Zi=/\s/,Pe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pe=/\{\n\/\* \[wrapped with (.+)\] \*/,we=/,? & /,je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ke=/[()=,{}\[\]\/\s]/,_t=/\\(\\)?/g,qe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Oe=/\w*$/,Je=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,Jt=/^\[object .+?Constructor\]$/,Sn=/^0o[0-7]+$/i,an=/^(?:0|[1-9]\d*)$/,gn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,mi=/($^)/,yi=/['\n\r\u2028\u2029\\]/g,cr="\\ud800-\\udfff",xr="\\u0300-\\u036f",Gr="\\ufe20-\\ufe2f",mr="\\u20d0-\\u20ff",Hr=xr+Gr+mr,fo="\\u2700-\\u27bf",xo="a-z\\xdf-\\xf6\\xf8-\\xff",hs="\\xac\\xb1\\xd7\\xf7",Yo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hn="\\u2000-\\u206f",Wr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Dr="A-Z\\xc0-\\xd6\\xd8-\\xde",Mr="\\ufe0e\\ufe0f",xc=hs+Yo+hn+Wr,ca="['’]",sh="["+cr+"]",Jr="["+xc+"]",Wo="["+Hr+"]",gi="\\d+",zr="["+fo+"]",_r="["+xo+"]",Va="[^"+cr+xc+gi+fo+xo+Dr+"]",Ea="\\ud83c[\\udffb-\\udfff]",Lr="(?:"+Wo+"|"+Ea+")",Io="[^"+cr+"]",Sa="(?:\\ud83c[\\udde6-\\uddff]){2}",_a="[\\ud800-\\udbff][\\udc00-\\udfff]",Es="["+Dr+"]",Ho="\\u200d",Ol="(?:"+_r+"|"+Va+")",gl="(?:"+Es+"|"+Va+")",oc="(?:"+ca+"(?:d|ll|m|re|s|t|ve))?",_l="(?:"+ca+"(?:D|LL|M|RE|S|T|VE))?",Jo=Lr+"?",Qc="["+Mr+"]?",$c="(?:"+Ho+"(?:"+[Io,Sa,_a].join("|")+")"+Qc+Jo+")*",Uu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",bc=Qc+Jo+$c,br="(?:"+[zr,Sa,_a].join("|")+")"+bc,Ko="(?:"+[Io+Wo+"?",Wo,Sa,_a,sh].join("|")+")",ss=RegExp(ca,"g"),ah=RegExp(Wo,"g"),ia=RegExp(Ea+"(?="+Ea+")|"+Ko+bc,"g"),Da=RegExp([Es+"?"+_r+"+"+oc+"(?="+[Jr,Es,"$"].join("|")+")",gl+"+"+_l+"(?="+[Jr,Es+Ol,"$"].join("|")+")",Es+"?"+Ol+"+"+oc,Es+"+"+_l,fu,Uu,gi,br].join("|"),"g"),lh=RegExp("["+Ho+cr+Hr+Mr+"]"),eo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],jc=-1,Rr={};Rr[en]=Rr[Fr]=Rr[So]=Rr[er]=Rr[xi]=Rr[Xi]=Rr[Un]=Rr[Oi]=Rr[bn]=!0,Rr[Hn]=Rr[ei]=Rr[Ao]=Rr[ri]=Rr[$t]=Rr[zi]=Rr[sr]=Rr[li]=Rr[Ki]=Rr[ji]=Rr[Ir]=Rr[hr]=Rr[ir]=Rr[Ur]=Rr[Zr]=!1;var ao={};ao[Hn]=ao[ei]=ao[Ao]=ao[$t]=ao[ri]=ao[zi]=ao[en]=ao[Fr]=ao[So]=ao[er]=ao[xi]=ao[Ki]=ao[ji]=ao[Ir]=ao[hr]=ao[ir]=ao[Ur]=ao[jr]=ao[Xi]=ao[Un]=ao[Oi]=ao[bn]=!0,ao[sr]=ao[li]=ao[Zr]=!1;var ua={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ua={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Lh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},yl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vl=parseFloat,ch=parseInt,kh=typeof hu=="object"&&hu&&hu.Object===Object&&hu,Mo=typeof self=="object"&&self&&self.Object===Object&&self,Ss=kh||Mo||Function("return this")(),Is=t&&!t.nodeType&&t,za=Is&&!0&&e&&!e.nodeType&&e,wc=za&&za.exports===Is,Nl=wc&&kh.process,ks=function(){try{var jt=za&&za.require&&za.require("util").types;return jt||Nl&&Nl.binding&&Nl.binding("util")}catch{}}(),Cc=ks&&ks.isArrayBuffer,uh=ks&&ks.isDate,zu=ks&&ks.isMap,hh=ks&&ks.isRegExp,Ph=ks&&ks.isSet,Fh=ks&&ks.isTypedArray;function ps(jt,Dn,wn){switch(wn.length){case 0:return jt.call(Dn);case 1:return jt.call(Dn,wn[0]);case 2:return jt.call(Dn,wn[0],wn[1]);case 3:return jt.call(Dn,wn[0],wn[1],wn[2])}return jt.apply(Dn,wn)}function dh(jt,Dn,wn,Ui){for(var Br=-1,po=jt==null?0:jt.length;++Br<po;){var qs=jt[Br];Dn(Ui,qs,wn(qs),jt)}return Ui}function ra(jt,Dn){for(var wn=-1,Ui=jt==null?0:jt.length;++wn<Ui&&Dn(jt[wn],wn,jt)!==!1;);return jt}function to(jt,Dn){for(var wn=jt==null?0:jt.length;wn--&&Dn(jt[wn],wn,jt)!==!1;);return jt}function pu(jt,Dn){for(var wn=-1,Ui=jt==null?0:jt.length;++wn<Ui;)if(!Dn(jt[wn],wn,jt))return!1;return!0}function Ql(jt,Dn){for(var wn=-1,Ui=jt==null?0:jt.length,Br=0,po=[];++wn<Ui;){var qs=jt[wn];Dn(qs,wn,jt)&&(po[Br++]=qs)}return po}function mu(jt,Dn){var wn=jt==null?0:jt.length;return!!wn&&bl(jt,Dn,0)>-1}function gu(jt,Dn,wn){for(var Ui=-1,Br=jt==null?0:jt.length;++Ui<Br;)if(wn(Dn,jt[Ui]))return!0;return!1}function Vo(jt,Dn){for(var wn=-1,Ui=jt==null?0:jt.length,Br=Array(Ui);++wn<Ui;)Br[wn]=Dn(jt[wn],wn,jt);return Br}function $l(jt,Dn){for(var wn=-1,Ui=Dn.length,Br=jt.length;++wn<Ui;)jt[Br+wn]=Dn[wn];return jt}function xl(jt,Dn,wn,Ui){var Br=-1,po=jt==null?0:jt.length;for(Ui&&po&&(wn=jt[++Br]);++Br<po;)wn=Dn(wn,jt[Br],Br,jt);return wn}function rs(jt,Dn,wn,Ui){var Br=jt==null?0:jt.length;for(Ui&&Br&&(wn=jt[--Br]);Br--;)wn=Dn(wn,jt[Br],Br,jt);return wn}function sc(jt,Dn){for(var wn=-1,Ui=jt==null?0:jt.length;++wn<Ui;)if(Dn(jt[wn],wn,jt))return!0;return!1}var Or=Ah("length");function bo(jt){return jt.split("")}function Zo(jt){return jt.match(je)||[]}function es(jt,Dn,wn){var Ui;return wn(jt,function(Br,po,qs){if(Dn(Br,po,qs))return Ui=po,!1}),Ui}function ya(jt,Dn,wn,Ui){for(var Br=jt.length,po=wn+(Ui?1:-1);Ui?po--:++po<Br;)if(Dn(jt[po],po,jt))return po;return-1}function bl(jt,Dn,wn){return Dn===Dn?Tc(jt,Dn,wn):ya(jt,Ra,wn)}function Ru(jt,Dn,wn,Ui){for(var Br=wn-1,po=jt.length;++Br<po;)if(Ui(jt[Br],Dn))return Br;return-1}function Ra(jt){return jt!==jt}function Ou(jt,Dn){var wn=jt==null?0:jt.length;return wn?Hc(jt,Dn)/wn:Qt}function Ah(jt){return function(Dn){return Dn==null?i:Dn[jt]}}function lo(jt){return function(Dn){return jt==null?i:jt[Dn]}}function jl(jt,Dn,wn,Ui,Br){return Br(jt,function(po,qs,as){wn=Ui?(Ui=!1,po):Dn(wn,po,qs,as)}),wn}function _u(jt,Dn){var wn=jt.length;for(jt.sort(Dn);wn--;)jt[wn]=jt[wn].value;return jt}function Hc(jt,Dn){for(var wn,Ui=-1,Br=jt.length;++Ui<Br;){var po=Dn(jt[Ui]);po!==i&&(wn=wn===i?po:wn+po)}return wn}function fh(jt,Dn){for(var wn=-1,Ui=Array(jt);++wn<jt;)Ui[wn]=Dn(wn);return Ui}function Vc(jt,Dn){return Vo(Dn,function(wn){return[wn,jt[wn]]})}function Nu(jt){return jt&&jt.slice(0,gh(jt)+1).replace(rr,"")}function ms(jt){return function(Dn){return jt(Dn)}}function va(jt,Dn){return Vo(Dn,function(wn){return jt[wn]})}function ph(jt,Dn){return jt.has(Dn)}function sl(jt,Dn){for(var wn=-1,Ui=jt.length;++wn<Ui&&bl(Dn,jt[wn],0)>-1;);return wn}function Dh(jt,Dn){for(var wn=jt.length;wn--&&bl(Dn,jt[wn],0)>-1;);return wn}function al(jt,Dn){for(var wn=jt.length,Ui=0;wn--;)jt[wn]===Dn&&++Ui;return Ui}var yu=lo(ua),ac=lo(Ua);function gd(jt){return"\\"+yl[jt]}function Qu(jt,Dn){return jt==null?i:jt[Dn]}function lc(jt){return lh.test(jt)}function ll(jt){return eo.test(jt)}function Bc(jt){for(var Dn,wn=[];!(Dn=jt.next()).done;)wn.push(Dn.value);return wn}function Gc(jt){var Dn=-1,wn=Array(jt.size);return jt.forEach(function(Ui,Br){wn[++Dn]=[Br,Ui]}),wn}function Wc(jt,Dn){return function(wn){return jt(Dn(wn))}}function Zs(jt,Dn){for(var wn=-1,Ui=jt.length,Br=0,po=[];++wn<Ui;){var qs=jt[wn];(qs===Dn||qs===$)&&(jt[wn]=$,po[Br++]=wn)}return po}function oa(jt){var Dn=-1,wn=Array(jt.size);return jt.forEach(function(Ui){wn[++Dn]=Ui}),wn}function $u(jt){var Dn=-1,wn=Array(jt.size);return jt.forEach(function(Ui){wn[++Dn]=[Ui,Ui]}),wn}function Tc(jt,Dn,wn){for(var Ui=wn-1,Br=jt.length;++Ui<Br;)if(jt[Ui]===Dn)return Ui;return-1}function mh(jt,Dn,wn){for(var Ui=wn+1;Ui--;)if(jt[Ui]===Dn)return Ui;return Ui}function Ia(jt){return lc(jt)?Kc(jt):Or(jt)}function Ga(jt){return lc(jt)?vu(jt):bo(jt)}function gh(jt){for(var Dn=jt.length;Dn--&&Zi.test(jt.charAt(Dn)););return Dn}var cc=lo(Lh);function Kc(jt){for(var Dn=ia.lastIndex=0;ia.test(jt);)++Dn;return Dn}function vu(jt){return jt.match(ia)||[]}function Ec(jt){return jt.match(Da)||[]}var xa=function jt(Dn){Dn=Dn==null?Ss:Wa.defaults(Ss.Object(),Dn,Wa.pick(Ss,fs));var wn=Dn.Array,Ui=Dn.Date,Br=Dn.Error,po=Dn.Function,qs=Dn.Math,as=Dn.Object,_d=Dn.RegExp,wl=Dn.String,ha=Dn.TypeError,Cl=wn.prototype,Mi=po.prototype,Hl=as.prototype,Vl=Dn["__core-js_shared__"],Gl=Mi.toString,no=Hl.hasOwnProperty,wi=0,Xs=function(){var w=/[^.]+$/.exec(Vl&&Vl.keys&&Vl.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),Zc=Hl.toString,Uh=Gl.call(as),qc=Ss._,Ka=_d("^"+Gl.call(no).replace(Fn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xc=wc?Dn.Buffer:i,Wl=Dn.Symbol,qr=Dn.Uint8Array,xu=Xc?Xc.allocUnsafe:i,Sc=Wc(as.getPrototypeOf,as),uc=as.create,Ic=Hl.propertyIsEnumerable,da=Cl.splice,Kl=Wl?Wl.isConcatSpreadable:i,Za=Wl?Wl.iterator:i,cl=Wl?Wl.toStringTag:i,Mc=function(){try{var w=sA(as,"defineProperty");return w({},"",{}),w}catch{}}(),hc=Dn.clearTimeout!==Ss.clearTimeout&&Dn.clearTimeout,bu=Ui&&Ui.now!==Ss.Date.now&&Ui.now,ul=Dn.setTimeout!==Ss.setTimeout&&Dn.setTimeout,Oo=qs.ceil,Bl=qs.floor,Yc=as.getOwnPropertySymbols,_=Xc?Xc.isBuffer:i,E=Dn.isFinite,G=Cl.join,ne=Wc(as.keys,as),ge=qs.max,Ne=qs.min,at=Ui.now,Dt=Dn.parseInt,_n=qs.random,ni=Cl.reverse,Ti=sA(Dn,"DataView"),Hi=sA(Dn,"Map"),kr=sA(Dn,"Promise"),zo=sA(Dn,"Set"),ws=sA(Dn,"WeakMap"),Ps=sA(as,"create"),Lo=ws&&new ws,Uo={},zh=Ed(Ti),Jc=Ed(Hi),P=Ed(kr),u=Ed(zo),x=Ed(ws),I=Wl?Wl.prototype:i,F=I?I.valueOf:i,j=I?I.toString:i;function N(w){if(Ts(w)&&!wr(w)&&!(w instanceof ye)){if(w instanceof me)return w;if(no.call(w,"__wrapped__"))return xf(w)}return new me(w)}var oe=function(){function w(){}return function(M){if(!Go(M))return{};if(uc)return uc(M);w.prototype=M;var Z=new w;return w.prototype=i,Z}}();function ae(){}function me(w,M){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!M,this.__index__=0,this.__values__=i}N.templateSettings={escape:kt,evaluate:zt,interpolate:Rt,variable:"",imports:{_:N}},N.prototype=ae.prototype,N.prototype.constructor=N,me.prototype=oe(ae.prototype),me.prototype.constructor=me;function ye(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Xn,this.__views__=[]}function Re(){var w=new ye(this.__wrapped__);return w.__actions__=Qa(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=Qa(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=Qa(this.__views__),w}function He(){if(this.__filtered__){var w=new ye(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function gt(){var w=this.__wrapped__.value(),M=this.__dir__,Z=wr(w),ue=M<0,Ue=Z?w.length:0,it=sg(0,Ue,this.__views__),Et=it.start,Ot=it.end,sn=Ot-Et,ii=ue?Ot:Et-1,oi=this.__iteratees__,Ai=oi.length,Gi=0,Er=Ne(sn,this.__takeCount__);if(!Z||!ue&&Ue==sn&&Er==sn)return Qp(w,this.__actions__);var oo=[];e:for(;sn--&&Gi<Er;){ii+=M;for(var $o=-1,so=w[ii];++$o<Ai;){var is=oi[$o],ls=is.iteratee,Bh=is.type,ku=ls(so);if(Bh==On)so=ku;else if(!ku){if(Bh==Kt)continue e;break e}}oo[Gi++]=so}return oo}ye.prototype=oe(ae.prototype),ye.prototype.constructor=ye;function dt(w){var M=-1,Z=w==null?0:w.length;for(this.clear();++M<Z;){var ue=w[M];this.set(ue[0],ue[1])}}function pt(){this.__data__=Ps?Ps(null):{},this.size=0}function Ft(w){var M=this.has(w)&&delete this.__data__[w];return this.size-=M?1:0,M}function Wt(w){var M=this.__data__;if(Ps){var Z=M[w];return Z===s?i:Z}return no.call(M,w)?M[w]:i}function on(w){var M=this.__data__;return Ps?M[w]!==i:no.call(M,w)}function bt(w,M){var Z=this.__data__;return this.size+=this.has(w)?0:1,Z[w]=Ps&&M===i?s:M,this}dt.prototype.clear=pt,dt.prototype.delete=Ft,dt.prototype.get=Wt,dt.prototype.has=on,dt.prototype.set=bt;function un(w){var M=-1,Z=w==null?0:w.length;for(this.clear();++M<Z;){var ue=w[M];this.set(ue[0],ue[1])}}function tn(){this.__data__=[],this.size=0}function In(w){var M=this.__data__,Z=l(M,w);if(Z<0)return!1;var ue=M.length-1;return Z==ue?M.pop():da.call(M,Z,1),--this.size,!0}function kn(w){var M=this.__data__,Z=l(M,w);return Z<0?i:M[Z][1]}function Kn(w){return l(this.__data__,w)>-1}function xn(w,M){var Z=this.__data__,ue=l(Z,w);return ue<0?(++this.size,Z.push([w,M])):Z[ue][1]=M,this}un.prototype.clear=tn,un.prototype.delete=In,un.prototype.get=kn,un.prototype.has=Kn,un.prototype.set=xn;function pi(w){var M=-1,Z=w==null?0:w.length;for(this.clear();++M<Z;){var ue=w[M];this.set(ue[0],ue[1])}}function vi(){this.size=0,this.__data__={hash:new dt,map:new(Hi||un),string:new dt}}function yn(w){var M=PA(this,w).delete(w);return this.size-=M?1:0,M}function Nr(w){return PA(this,w).get(w)}function io(w){return PA(this,w).has(w)}function or(w,M){var Z=PA(this,w),ue=Z.size;return Z.set(w,M),this.size+=Z.size==ue?0:1,this}pi.prototype.clear=vi,pi.prototype.delete=yn,pi.prototype.get=Nr,pi.prototype.has=io,pi.prototype.set=or;function mo(w){var M=-1,Z=w==null?0:w.length;for(this.__data__=new pi;++M<Z;)this.add(w[M])}function qn(w){return this.__data__.set(w,s),this}function Po(w){return this.__data__.has(w)}mo.prototype.add=mo.prototype.push=qn,mo.prototype.has=Po;function Xr(w){var M=this.__data__=new un(w);this.size=M.size}function os(){this.__data__=new un,this.size=0}function ba(w){var M=this.__data__,Z=M.delete(w);return this.size=M.size,Z}function eu(w){return this.__data__.get(w)}function Lc(w){return this.__data__.has(w)}function wu(w,M){var Z=this.__data__;if(Z instanceof un){var ue=Z.__data__;if(!Hi||ue.length<d-1)return ue.push([w,M]),this.size=++Z.size,this;Z=this.__data__=new pi(ue)}return Z.set(w,M),this.size=Z.size,this}Xr.prototype.clear=os,Xr.prototype.delete=ba,Xr.prototype.get=eu,Xr.prototype.has=Lc,Xr.prototype.set=wu;function ju(w,M){var Z=wr(w),ue=!Z&&pa(w),Ue=!Z&&!ue&&Bs(w),it=!Z&&!ue&&!Ue&&Tf(w),Et=Z||ue||Ue||it,Ot=Et?fh(w.length,wl):[],sn=Ot.length;for(var ii in w)(M||no.call(w,ii))&&!(Et&&(ii=="length"||Ue&&(ii=="offset"||ii=="parent")||it&&(ii=="buffer"||ii=="byteLength"||ii=="byteOffset")||Eu(ii,sn)))&&Ot.push(ii);return Ot}function Tl(w){var M=w.length;return M?w[Bu(0,M-1)]:i}function hl(w,M){return Td(Qa(w),X(M,0,w.length))}function tu(w){return Td(Qa(w))}function nu(w,M,Z){(Z!==i&&!$s(w[M],Z)||Z===i&&!(M in w))&&R(w,M,Z)}function b(w,M,Z){var ue=w[M];(!(no.call(w,M)&&$s(ue,Z))||Z===i&&!(M in w))&&R(w,M,Z)}function l(w,M){for(var Z=w.length;Z--;)if($s(w[Z][0],M))return Z;return-1}function g(w,M,Z,ue){return We(w,function(Ue,it,Et){M(ue,Ue,Z(Ue),Et)}),ue}function T(w,M){return w&&dc(M,js(M),w)}function k(w,M){return w&&dc(M,Yu(M),w)}function R(w,M,Z){M=="__proto__"&&Mc?Mc(w,M,{configurable:!0,enumerable:!0,value:Z,writable:!0}):w[M]=Z}function K(w,M){for(var Z=-1,ue=M.length,Ue=wn(ue),it=w==null;++Z<ue;)Ue[Z]=it?i:s0(w,M[Z]);return Ue}function X(w,M,Z){return w===w&&(Z!==i&&(w=w<=Z?w:Z),M!==i&&(w=w>=M?w:M)),w}function ee(w,M,Z,ue,Ue,it){var Et,Ot=M&V,sn=M&q,ii=M&te;if(Z&&(Et=Ue?Z(w,ue,Ue,it):Z(w)),Et!==i)return Et;if(!Go(w))return w;var oi=wr(w);if(oi){if(Et=ag(w),!Ot)return Qa(w,Et)}else{var Ai=Yl(w),Gi=Ai==li||Ai==Qi;if(Bs(w))return tg(w,Ot);if(Ai==Ir||Ai==Hn||Gi&&!Ue){if(Et=sn||Gi?{}:FA(w),!Ot)return sn?jp(w,k(Et,w)):Tu(w,T(Et,w))}else{if(!ao[Ai])return Ue?w:{};Et=Ns(w,Ai,Ot)}}it||(it=new Xr);var Er=it.get(w);if(Er)return Er;it.set(w,Et),hp(w)?w.forEach(function(so){Et.add(ee(so,M,Z,so,w,it))}):$A(w)&&w.forEach(function(so,is){Et.set(is,ee(so,M,Z,is,w,it))});var oo=ii?sn?Wp:Gp:sn?Yu:js,$o=oi?i:oo(w);return ra($o||w,function(so,is){$o&&(is=so,so=w[is]),b(Et,is,ee(so,M,Z,is,w,it))}),Et}function ce(w){var M=js(w);return function(Z){return le(Z,w,M)}}function le(w,M,Z){var ue=Z.length;if(w==null)return!ue;for(w=as(w);ue--;){var Ue=Z[ue],it=M[Ue],Et=w[Ue];if(Et===i&&!(Ue in w)||!it(Et))return!1}return!0}function ve(w,M,Z){if(typeof w!="function")throw new ha(v);return $h(function(){w.apply(i,Z)},M)}function Qe(w,M,Z,ue){var Ue=-1,it=mu,Et=!0,Ot=w.length,sn=[],ii=M.length;if(!Ot)return sn;Z&&(M=Vo(M,ms(Z))),ue?(it=gu,Et=!1):M.length>=d&&(it=ph,Et=!1,M=new mo(M));e:for(;++Ue<Ot;){var oi=w[Ue],Ai=Z==null?oi:Z(oi);if(oi=ue||oi!==0?oi:0,Et&&Ai===Ai){for(var Gi=ii;Gi--;)if(M[Gi]===Ai)continue e;sn.push(oi)}else it(M,Ai,ue)||sn.push(oi)}return sn}var We=pf(Tt),et=pf(Mt,!0);function tt(w,M){var Z=!0;return We(w,function(ue,Ue,it){return Z=!!M(ue,Ue,it),Z}),Z}function rt(w,M,Z){for(var ue=-1,Ue=w.length;++ue<Ue;){var it=w[ue],Et=M(it);if(Et!=null&&(Ot===i?Et===Et&&!qu(Et):Z(Et,Ot)))var Ot=Et,sn=it}return sn}function Be(w,M,Z,ue){var Ue=w.length;for(Z=go(Z),Z<0&&(Z=-Z>Ue?0:Ue+Z),ue=ue===i||ue>Ue?Ue:go(ue),ue<0&&(ue+=Ue),ue=Z>ue?0:jA(ue);Z<ue;)w[Z++]=M;return w}function Ye(w,M){var Z=[];return We(w,function(ue,Ue,it){M(ue,Ue,it)&&Z.push(ue)}),Z}function lt(w,M,Z,ue,Ue){var it=-1,Et=w.length;for(Z||(Z=aA),Ue||(Ue=[]);++it<Et;){var Ot=w[it];M>0&&Z(Ot)?M>1?lt(Ot,M-1,Z,ue,Ue):$l(Ue,Ot):ue||(Ue[Ue.length]=Ot)}return Ue}var At=ed(),It=ed(!0);function Tt(w,M){return w&&At(w,M,js)}function Mt(w,M){return w&&It(w,M,js)}function Ht(w,M){return Ql(M,function(Z){return gc(w[Z])})}function Nt(w,M){M=dl(M,w);for(var Z=0,ue=M.length;w!=null&&Z<ue;)w=w[Su(M[Z++])];return Z&&Z==ue?w:i}function cn(w,M,Z){var ue=M(w);return wr(w)?ue:$l(ue,Z(w))}function Nn(w){return w==null?w===i?pr:di:cl&&cl in as(w)?og(w):Zp(w)}function Vt(w,M){return w>M}function Pn(w,M){return w!=null&&no.call(w,M)}function fn(w,M){return w!=null&&M in as(w)}function Zn(w,M,Z){return w>=Ne(M,Z)&&w<ge(M,Z)}function nn(w,M,Z){for(var ue=Z?gu:mu,Ue=w[0].length,it=w.length,Et=it,Ot=wn(it),sn=1/0,ii=[];Et--;){var oi=w[Et];Et&&M&&(oi=Vo(oi,ms(M))),sn=Ne(oi.length,sn),Ot[Et]=!Z&&(M||Ue>=120&&oi.length>=120)?new mo(Et&&oi):i}oi=w[0];var Ai=-1,Gi=Ot[0];e:for(;++Ai<Ue&&ii.length<sn;){var Er=oi[Ai],oo=M?M(Er):Er;if(Er=Z||Er!==0?Er:0,!(Gi?ph(Gi,oo):ue(ii,oo,Z))){for(Et=it;--Et;){var $o=Ot[Et];if(!($o?ph($o,oo):ue(w[Et],oo,Z)))continue e}Gi&&Gi.push(oo),ii.push(Er)}}return ii}function Mn(w,M,Z,ue){return Tt(w,function(Ue,it,Et){M(ue,Z(Ue),it,Et)}),ue}function Yn(w,M,Z){M=dl(M,w),w=UA(w,M);var ue=w==null?w:w[Su(kc(M))];return ue==null?i:ps(ue,w,Z)}function Vn(w){return Ts(w)&&Nn(w)==Hn}function si(w){return Ts(w)&&Nn(w)==Ao}function ar(w){return Ts(w)&&Nn(w)==zi}function Tr(w,M,Z,ue,Ue){return w===M?!0:w==null||M==null||!Ts(w)&&!Ts(M)?w!==w&&M!==M:Di(w,M,Z,ue,Tr,Ue)}function Di(w,M,Z,ue,Ue,it){var Et=wr(w),Ot=wr(M),sn=Et?ei:Yl(w),ii=Ot?ei:Yl(M);sn=sn==Hn?Ir:sn,ii=ii==Hn?Ir:ii;var oi=sn==Ir,Ai=ii==Ir,Gi=sn==ii;if(Gi&&Bs(w)){if(!Bs(M))return!1;Et=!0,oi=!1}if(Gi&&!oi)return it||(it=new Xr),Et||Tf(w)?_f(w,M,Z,ue,Ue,it):au(w,M,sn,Z,ue,Ue,it);if(!(Z&he)){var Er=oi&&no.call(w,"__wrapped__"),oo=Ai&&no.call(M,"__wrapped__");if(Er||oo){var $o=Er?w.value():w,so=oo?M.value():M;return it||(it=new Xr),Ue($o,so,Z,ue,it)}}return Gi?(it||(it=new Xr),W_(w,M,Z,ue,Ue,it)):!1}function yr(w){return Ts(w)&&Yl(w)==Ki}function ro(w,M,Z,ue){var Ue=Z.length,it=Ue,Et=!ue;if(w==null)return!it;for(w=as(w);Ue--;){var Ot=Z[Ue];if(Et&&Ot[2]?Ot[1]!==w[Ot[0]]:!(Ot[0]in w))return!1}for(;++Ue<it;){Ot=Z[Ue];var sn=Ot[0],ii=w[sn],oi=Ot[1];if(Et&&Ot[2]){if(ii===i&&!(sn in w))return!1}else{var Ai=new Xr;if(ue)var Gi=ue(ii,oi,sn,w,M,Ai);if(!(Gi===i?Tr(oi,ii,he|Ae,ue,Ai):Gi))return!1}}return!0}function co(w){if(!Go(w)||ug(w))return!1;var M=gc(w)?Ka:Jt;return M.test(Ed(w))}function Yi(w){return Ts(w)&&Nn(w)==hr}function Ro(w){return Ts(w)&&Yl(w)==ir}function gs(w){return Ts(w)&&Fc(w.length)&&!!Rr[Nn(w)]}function qo(w){return typeof w=="function"?w:w==null?Uc:typeof w=="object"?wr(w)?ko(w[0],w[1]):Os(w):_0(w)}function Xo(w){if(!yh(w))return ne(w);var M=[];for(var Z in as(w))no.call(w,Z)&&Z!="constructor"&&M.push(Z);return M}function qa(w){if(!Go(w))return Zv(w);var M=yh(w),Z=[];for(var ue in w)ue=="constructor"&&(M||!no.call(w,ue))||Z.push(ue);return Z}function Oa(w,M){return w<M}function iu(w,M){var Z=-1,ue=Fo(w)?wn(w.length):[];return We(w,function(Ue,it,Et){ue[++Z]=M(Ue,it,Et)}),ue}function Os(w){var M=rg(w);return M.length==1&&M[0][2]?lA(M[0][0],M[0][1]):function(Z){return Z===w||ro(Z,w,M)}}function ko(w,M){return Xa(w)&&vh(M)?lA(Su(w),M):function(Z){var ue=s0(Z,w);return ue===i&&ue===M?Lg(Z,w):Tr(M,ue,he|Ae)}}function ts(w,M,Z,ue,Ue){w!==M&&At(M,function(it,Et){if(Ue||(Ue=new Xr),Go(it))No(w,M,Et,Z,ts,ue,Ue);else{var Ot=ue?ue(zA(w,Et),it,Et+"",w,M,Ue):i;Ot===i&&(Ot=it),nu(w,Et,Ot)}},Yu)}function No(w,M,Z,ue,Ue,it,Et){var Ot=zA(w,Z),sn=zA(M,Z),ii=Et.get(sn);if(ii){nu(w,Z,ii);return}var oi=it?it(Ot,sn,Z+"",w,M,Et):i,Ai=oi===i;if(Ai){var Gi=wr(sn),Er=!Gi&&Bs(sn),oo=!Gi&&!Er&&Tf(sn);oi=sn,Gi||Er||oo?wr(Ot)?oi=Ot:Qo(Ot)?oi=Qa(Ot):Er?(Ai=!1,oi=tg(sn,!0)):oo?(Ai=!1,oi=Gu(sn,!0)):oi=[]:Ca(sn)||pa(sn)?(oi=Ot,pa(Ot)?oi=Dc(Ot):(!Go(Ot)||gc(Ot))&&(oi=FA(sn))):Ai=!1}Ai&&(Et.set(sn,oi),Ue(oi,sn,ue,it,Et),Et.delete(sn)),nu(w,Z,oi)}function Aa(w,M){var Z=w.length;if(Z)return M+=M<0?Z:0,Eu(M,Z)?w[M]:i}function Na(w,M,Z){M.length?M=Vo(M,function(it){return wr(it)?function(Et){return Nt(Et,it.length===1?it[0]:it)}:it}):M=[Uc];var ue=-1;M=Vo(M,ms(Qr()));var Ue=iu(w,function(it,Et,Ot){var sn=Vo(M,function(ii){return ii(it)});return{criteria:sn,index:++ue,value:it}});return _u(Ue,function(it,Et){return ig(it,Et,Z)})}function Fs(w,M){return Zl(w,M,function(Z,ue){return Lg(w,ue)})}function Zl(w,M,Z){for(var ue=-1,Ue=M.length,it={};++ue<Ue;){var Et=M[ue],Ot=Nt(w,Et);Z(Ot,Et)&&Jh(it,dl(Et,w),Ot)}return it}function EA(w){return function(M){return Nt(M,w)}}function Cu(w,M,Z,ue){var Ue=ue?Ru:bl,it=-1,Et=M.length,Ot=w;for(w===M&&(M=Qa(M)),Z&&(Ot=Vo(w,ms(Z)));++it<Et;)for(var sn=0,ii=M[it],oi=Z?Z(ii):ii;(sn=Ue(Ot,oi,sn,ue))>-1;)Ot!==w&&da.call(Ot,sn,1),da.call(w,sn,1);return w}function yd(w,M){for(var Z=w?M.length:0,ue=Z-1;Z--;){var Ue=M[Z];if(Z==ue||Ue!==it){var it=Ue;Eu(Ue)?da.call(w,Ue,1):eg(w,Ue)}}return w}function Bu(w,M){return w+Bl(_n()*(M-w+1))}function Rh(w,M,Z,ue){for(var Ue=-1,it=ge(Oo((M-w)/(Z||1)),0),Et=wn(it);it--;)Et[ue?it:++Ue]=w,w+=Z;return Et}function Oh(w,M){var Z="";if(!w||M<1||M>mn)return Z;do M%2&&(Z+=w),M=Bl(M/2),M&&(w+=w);while(M);return Z}function wo(w,M){return uA(qp(w,M,Uc),w+"")}function Xd(w){return Tl(fp(w))}function SA(w,M){var Z=fp(w);return Td(Z,X(M,0,Z.length))}function Jh(w,M,Z,ue){if(!Go(w))return w;M=dl(M,w);for(var Ue=-1,it=M.length,Et=it-1,Ot=w;Ot!=null&&++Ue<it;){var sn=Su(M[Ue]),ii=Z;if(sn==="__proto__"||sn==="constructor"||sn==="prototype")return w;if(Ue!=Et){var oi=Ot[sn];ii=ue?ue(oi,sn,Ot):i,ii===i&&(ii=Go(oi)?oi:Eu(M[Ue+1])?[]:{})}b(Ot,sn,ii),Ot=Ot[sn]}return w}var ru=Lo?function(w,M){return Lo.set(w,M),w}:Uc,Q_=Mc?function(w,M){return Mc(w,"toString",{configurable:!0,enumerable:!1,value:VA(M),writable:!0})}:Uc;function Jm(w){return Td(fp(w))}function ou(w,M,Z){var ue=-1,Ue=w.length;M<0&&(M=-M>Ue?0:Ue+M),Z=Z>Ue?Ue:Z,Z<0&&(Z+=Ue),Ue=M>Z?0:Z-M>>>0,M>>>=0;for(var it=wn(Ue);++ue<Ue;)it[ue]=w[ue+M];return it}function $_(w,M){var Z;return We(w,function(ue,Ue,it){return Z=M(ue,Ue,it),!Z}),!!Z}function vd(w,M,Z){var ue=0,Ue=w==null?ue:w.length;if(typeof M=="number"&&M===M&&Ue<=Bi){for(;ue<Ue;){var it=ue+Ue>>>1,Et=w[it];Et!==null&&!qu(Et)&&(Z?Et<=M:Et<M)?ue=it+1:Ue=it}return Ue}return xd(w,M,Uc,Z)}function xd(w,M,Z,ue){var Ue=0,it=w==null?0:w.length;if(it===0)return 0;M=Z(M);for(var Et=M!==M,Ot=M===null,sn=qu(M),ii=M===i;Ue<it;){var oi=Bl((Ue+it)/2),Ai=Z(w[oi]),Gi=Ai!==i,Er=Ai===null,oo=Ai===Ai,$o=qu(Ai);if(Et)var so=ue||oo;else ii?so=oo&&(ue||Gi):Ot?so=oo&&Gi&&(ue||!Er):sn?so=oo&&Gi&&!Er&&(ue||!$o):Er||$o?so=!1:so=ue?Ai<=M:Ai<M;so?Ue=oi+1:it=oi}return Ne(it,Wn)}function Nh(w,M){for(var Z=-1,ue=w.length,Ue=0,it=[];++Z<ue;){var Et=w[Z],Ot=M?M(Et):Et;if(!Z||!$s(Ot,sn)){var sn=Ot;it[Ue++]=Et===0?0:Et}}return it}function Qh(w){return typeof w=="number"?w:qu(w)?Qt:+w}function ql(w){if(typeof w=="string")return w;if(wr(w))return Vo(w,ql)+"";if(qu(w))return j?j.call(w):"";var M=w+"";return M=="0"&&1/w==-Rn?"-0":M}function bd(w,M,Z){var ue=-1,Ue=mu,it=w.length,Et=!0,Ot=[],sn=Ot;if(Z)Et=!1,Ue=gu;else if(it>=d){var ii=M?null:Xf(w);if(ii)return oa(ii);Et=!1,Ue=ph,sn=new mo}else sn=M?[]:Ot;e:for(;++ue<it;){var oi=w[ue],Ai=M?M(oi):oi;if(oi=Z||oi!==0?oi:0,Et&&Ai===Ai){for(var Gi=sn.length;Gi--;)if(sn[Gi]===Ai)continue e;M&&sn.push(Ai),Ot.push(oi)}else Ue(sn,Ai,Z)||(sn!==Ot&&sn.push(Ai),Ot.push(oi))}return Ot}function eg(w,M){return M=dl(M,w),w=UA(w,M),w==null||delete w[Su(kc(M))]}function j_(w,M,Z,ue){return Jh(w,M,Z(Nt(w,M)),ue)}function Np(w,M,Z,ue){for(var Ue=w.length,it=ue?Ue:-1;(ue?it--:++it<Ue)&&M(w[it],it,w););return Z?ou(w,ue?0:it,ue?it+1:Ue):ou(w,ue?it+1:0,ue?Ue:it)}function Qp(w,M){var Z=w;return Z instanceof ye&&(Z=Z.value()),xl(M,function(ue,Ue){return Ue.func.apply(Ue.thisArg,$l([ue],Ue.args))},Z)}function IA(w,M,Z){var ue=w.length;if(ue<2)return ue?bd(w[0]):[];for(var Ue=-1,it=wn(ue);++Ue<ue;)for(var Et=w[Ue],Ot=-1;++Ot<ue;)Ot!=Ue&&(it[Ue]=Qe(it[Ue]||Et,w[Ot],M,Z));return bd(lt(it,1),M,Z)}function MA(w,M,Z){for(var ue=-1,Ue=w.length,it=M.length,Et={};++ue<Ue;){var Ot=ue<it?M[ue]:i;Z(Et,w[ue],Ot)}return Et}function Hu(w){return Qo(w)?w:[]}function Vu(w){return typeof w=="function"?w:Uc}function dl(w,M){return wr(w)?w:Xa(w,M)?[w]:Yp(Ds(w))}var Yd=wo;function ns(w,M,Z){var ue=w.length;return Z=Z===i?ue:Z,!M&&Z>=ue?w:ou(w,M,Z)}var Kf=hc||function(w){return Ss.clearTimeout(w)};function tg(w,M){if(M)return w.slice();var Z=w.length,ue=xu?xu(Z):new w.constructor(Z);return w.copy(ue),ue}function df(w){var M=new w.constructor(w.byteLength);return new qr(M).set(new qr(w)),M}function $p(w,M){var Z=M?df(w.buffer):w.buffer;return new w.constructor(Z,w.byteOffset,w.byteLength)}function Af(w){var M=new w.constructor(w.source,Oe.exec(w));return M.lastIndex=w.lastIndex,M}function ng(w){return F?as(F.call(w)):{}}function Gu(w,M){var Z=M?df(w.buffer):w.buffer;return new w.constructor(Z,w.byteOffset,w.length)}function ff(w,M){if(w!==M){var Z=w!==i,ue=w===null,Ue=w===w,it=qu(w),Et=M!==i,Ot=M===null,sn=M===M,ii=qu(M);if(!Ot&&!ii&&!it&&w>M||it&&Et&&sn&&!Ot&&!ii||ue&&Et&&sn||!Z&&sn||!Ue)return 1;if(!ue&&!it&&!ii&&w<M||ii&&Z&&Ue&&!ue&&!it||Ot&&Z&&Ue||!Et&&Ue||!sn)return-1}return 0}function ig(w,M,Z){for(var ue=-1,Ue=w.criteria,it=M.criteria,Et=Ue.length,Ot=Z.length;++ue<Et;){var sn=ff(Ue[ue],it[ue]);if(sn){if(ue>=Ot)return sn;var ii=Z[ue];return sn*(ii=="desc"?-1:1)}}return w.index-M.index}function sa(w,M,Z,ue){for(var Ue=-1,it=w.length,Et=Z.length,Ot=-1,sn=M.length,ii=ge(it-Et,0),oi=wn(sn+ii),Ai=!ue;++Ot<sn;)oi[Ot]=M[Ot];for(;++Ue<Et;)(Ai||Ue<it)&&(oi[Z[Ue]]=w[Ue]);for(;ii--;)oi[Ot++]=w[Ue++];return oi}function Ar(w,M,Z,ue){for(var Ue=-1,it=w.length,Et=-1,Ot=Z.length,sn=-1,ii=M.length,oi=ge(it-Ot,0),Ai=wn(oi+ii),Gi=!ue;++Ue<oi;)Ai[Ue]=w[Ue];for(var Er=Ue;++sn<ii;)Ai[Er+sn]=M[sn];for(;++Et<Ot;)(Gi||Ue<it)&&(Ai[Er+Z[Et]]=w[Ue++]);return Ai}function Qa(w,M){var Z=-1,ue=w.length;for(M||(M=wn(ue));++Z<ue;)M[Z]=w[Z];return M}function dc(w,M,Z,ue){var Ue=!Z;Z||(Z={});for(var it=-1,Et=M.length;++it<Et;){var Ot=M[it],sn=ue?ue(Z[Ot],w[Ot],Ot,Z,w):i;sn===i&&(sn=w[Ot]),Ue?R(Z,Ot,sn):b(Z,Ot,sn)}return Z}function Tu(w,M){return dc(w,Jf(w),M)}function jp(w,M){return dc(w,yf(w),M)}function Zf(w,M){return function(Z,ue){var Ue=wr(Z)?dh:g,it=M?M():{};return Ue(Z,w,Qr(ue,2),it)}}function Xl(w){return wo(function(M,Z){var ue=-1,Ue=Z.length,it=Ue>1?Z[Ue-1]:i,Et=Ue>2?Z[2]:i;for(it=w.length>3&&typeof it=="function"?(Ue--,it):i,Et&&Pr(Z[0],Z[1],Et)&&(it=Ue<3?i:it,Ue=1),M=as(M);++ue<Ue;){var Ot=Z[ue];Ot&&w(M,Ot,ue,it)}return M})}function pf(w,M){return function(Z,ue){if(Z==null)return Z;if(!Fo(Z))return w(Z,ue);for(var Ue=Z.length,it=M?Ue:-1,Et=as(Z);(M?it--:++it<Ue)&&ue(Et[it],it,Et)!==!1;);return Z}}function ed(w){return function(M,Z,ue){for(var Ue=-1,it=as(M),Et=ue(M),Ot=Et.length;Ot--;){var sn=Et[w?Ot:++Ue];if(Z(it[sn],sn,it)===!1)break}return M}}function qf(w,M,Z){var ue=M&De,Ue=tA(w);function it(){var Et=this&&this!==Ss&&this instanceof it?Ue:w;return Et.apply(ue?Z:this,arguments)}return it}function Jd(w){return function(M){M=Ds(M);var Z=lc(M)?Ga(M):i,ue=Z?Z[0]:M.charAt(0),Ue=Z?ns(Z,1).join(""):M.slice(1);return ue[w]()+Ue}}function eA(w){return function(M){return xl(p0(h0(M).replace(ss,"")),w,"")}}function tA(w){return function(){var M=arguments;switch(M.length){case 0:return new w;case 1:return new w(M[0]);case 2:return new w(M[0],M[1]);case 3:return new w(M[0],M[1],M[2]);case 4:return new w(M[0],M[1],M[2],M[3]);case 5:return new w(M[0],M[1],M[2],M[3],M[4]);case 6:return new w(M[0],M[1],M[2],M[3],M[4],M[5]);case 7:return new w(M[0],M[1],M[2],M[3],M[4],M[5],M[6])}var Z=oe(w.prototype),ue=w.apply(Z,M);return Go(ue)?ue:Z}}function H_(w,M,Z){var ue=tA(w);function Ue(){for(var it=arguments.length,Et=wn(it),Ot=it,sn=kA(Ue);Ot--;)Et[Ot]=arguments[Ot];var ii=it<3&&Et[0]!==sn&&Et[it-1]!==sn?[]:Zs(Et,sn);if(it-=ii.length,it<Z)return mf(w,M,LA,Ue.placeholder,i,Et,ii,i,i,Z-it);var oi=this&&this!==Ss&&this instanceof Ue?ue:w;return ps(oi,this,Et)}return Ue}function td(w){return function(M,Z,ue){var Ue=as(M);if(!Fo(M)){var it=Qr(Z,3);M=js(M),Z=function(Ot){return it(Ue[Ot],Ot,Ue)}}var Et=w(M,Z,ue);return Et>-1?Ue[it?M[Et]:Et]:i}}function V_(w){return wd(function(M){var Z=M.length,ue=Z,Ue=me.prototype.thru;for(w&&M.reverse();ue--;){var it=M[ue];if(typeof it!="function")throw new ha(v);if(Ue&&!Et&&Yf(it)=="wrapper")var Et=new me([],!0)}for(ue=Et?ue:Z;++ue<Z;){it=M[ue];var Ot=Yf(it),sn=Ot=="wrapper"?Cd(it):i;sn&&DA(sn[0])&&sn[1]==(nt|Te|Fe|xt)&&!sn[4].length&&sn[9]==1?Et=Et[Yf(sn[0])].apply(Et,sn[3]):Et=it.length==1&&DA(it)?Et[Ot]():Et.thru(it)}return function(){var ii=arguments,oi=ii[0];if(Et&&ii.length==1&&wr(oi))return Et.plant(oi).value();for(var Ai=0,Gi=Z?M[Ai].apply(this,ii):oi;++Ai<Z;)Gi=M[Ai].call(this,Gi);return Gi}})}function LA(w,M,Z,ue,Ue,it,Et,Ot,sn,ii){var oi=M&nt,Ai=M&De,Gi=M&ke,Er=M&(Te|Ee),oo=M&Bt,$o=Gi?i:tA(w);function so(){for(var is=arguments.length,ls=wn(is),Bh=is;Bh--;)ls[Bh]=arguments[Bh];if(Er)var ku=kA(so),ec=al(ls,ku);if(ue&&(ls=sa(ls,ue,Ue,Er)),it&&(ls=Ar(ls,it,Et,Er)),is-=ec,Er&&is<ii){var fl=Zs(ls,ku);return mf(w,M,LA,so.placeholder,Z,ls,fl,Ot,sn,ii-is)}var Pd=Ai?Z:this,GA=Gi?Pd[w]:w;return is=ls.length,Ot?ls=vf(ls,Ot):oo&&is>1&&ls.reverse(),oi&&sn<is&&(ls.length=sn),this&&this!==Ss&&this instanceof so&&(GA=$o||tA(GA)),GA.apply(Pd,ls)}return so}function nA(w,M){return function(Z,ue){return Mn(Z,w,M(ue),{})}}function iA(w,M){return function(Z,ue){var Ue;if(Z===i&&ue===i)return M;if(Z!==i&&(Ue=Z),ue!==i){if(Ue===i)return ue;typeof Z=="string"||typeof ue=="string"?(Z=ql(Z),ue=ql(ue)):(Z=Qh(Z),ue=Qh(ue)),Ue=w(Z,ue)}return Ue}}function rA(w){return wd(function(M){return M=Vo(M,ms(Qr())),wo(function(Z){var ue=this;return w(M,function(Ue){return ps(Ue,ue,Z)})})})}function _h(w,M){M=M===i?" ":ql(M);var Z=M.length;if(Z<2)return Z?Oh(M,w):M;var ue=Oh(M,Oo(w/Ia(M)));return lc(M)?ns(Ga(ue),0,w).join(""):ue.slice(0,w)}function Hp(w,M,Z,ue){var Ue=M&De,it=tA(w);function Et(){for(var Ot=-1,sn=arguments.length,ii=-1,oi=ue.length,Ai=wn(oi+sn),Gi=this&&this!==Ss&&this instanceof Et?it:w;++ii<oi;)Ai[ii]=ue[ii];for(;sn--;)Ai[ii++]=arguments[++Ot];return ps(Gi,Ue?Z:this,Ai)}return Et}function Vp(w){return function(M,Z,ue){return ue&&typeof ue!="number"&&Pr(M,Z,ue)&&(Z=ue=i),M=uo(M),Z===i?(Z=M,M=0):Z=uo(Z),ue=ue===i?M<Z?1:-1:uo(ue),Rh(M,Z,ue,w)}}function oA(w){return function(M,Z){return typeof M=="string"&&typeof Z=="string"||(M=Lu(M),Z=Lu(Z)),w(M,Z)}}function mf(w,M,Z,ue,Ue,it,Et,Ot,sn,ii){var oi=M&Te,Ai=oi?Et:i,Gi=oi?i:Et,Er=oi?it:i,oo=oi?i:it;M|=oi?Fe:Se,M&=~(oi?Se:Fe),M&xe||(M&=~(De|ke));var $o=[w,M,Ue,Er,Ai,oo,Gi,Ot,sn,ii],so=Z.apply(i,$o);return DA(w)&&cA(so,$o),so.placeholder=ue,Xp(so,w,M)}function su(w){var M=qs[w];return function(Z,ue){if(Z=Lu(Z),ue=ue==null?0:Ne(go(ue),292),ue&&E(Z)){var Ue=(Ds(Z)+"e").split("e"),it=M(Ue[0]+"e"+(+Ue[1]+ue));return Ue=(Ds(it)+"e").split("e"),+(Ue[0]+"e"+(+Ue[1]-ue))}return M(Z)}}var Xf=zo&&1/oa(new zo([,-0]))[1]==Rn?function(w){return new zo(w)}:Cm;function El(w){return function(M){var Z=Yl(M);return Z==Ki?Gc(M):Z==ir?$u(M):Vc(M,w(M))}}function wa(w,M,Z,ue,Ue,it,Et,Ot){var sn=M&ke;if(!sn&&typeof w!="function")throw new ha(v);var ii=ue?ue.length:0;if(ii||(M&=~(Fe|Se),ue=Ue=i),Et=Et===i?Et:ge(go(Et),0),Ot=Ot===i?Ot:go(Ot),ii-=Ue?Ue.length:0,M&Se){var oi=ue,Ai=Ue;ue=Ue=i}var Gi=sn?i:Cd(w),Er=[w,M,Z,ue,Ue,oi,Ai,it,Et,Ot];if(Gi&&Z_(Er,Gi),w=Er[0],M=Er[1],Z=Er[2],ue=Er[3],Ue=Er[4],Ot=Er[9]=Er[9]===i?sn?0:w.length:ge(Er[9]-ii,0),!Ot&&M&(Te|Ee)&&(M&=~(Te|Ee)),!M||M==De)var oo=qf(w,M,Z);else M==Te||M==Ee?oo=H_(w,M,Ot):(M==Fe||M==(De|Fe))&&!Ue.length?oo=Hp(w,M,Z,ue):oo=LA.apply(i,Er);var $o=Gi?ru:cA;return Xp($o(oo,Er),w,M)}function gf(w,M,Z,ue){return w===i||$s(w,Hl[Z])&&!no.call(ue,Z)?M:w}function fa(w,M,Z,ue,Ue,it){return Go(w)&&Go(M)&&(it.set(M,w),ts(w,M,i,fa,it),it.delete(M)),w}function G_(w){return Ca(w)?i:w}function _f(w,M,Z,ue,Ue,it){var Et=Z&he,Ot=w.length,sn=M.length;if(Ot!=sn&&!(Et&&sn>Ot))return!1;var ii=it.get(w),oi=it.get(M);if(ii&&oi)return ii==M&&oi==w;var Ai=-1,Gi=!0,Er=Z&Ae?new mo:i;for(it.set(w,M),it.set(M,w);++Ai<Ot;){var oo=w[Ai],$o=M[Ai];if(ue)var so=Et?ue($o,oo,Ai,M,w,it):ue(oo,$o,Ai,w,M,it);if(so!==i){if(so)continue;Gi=!1;break}if(Er){if(!sc(M,function(is,ls){if(!ph(Er,ls)&&(oo===is||Ue(oo,is,Z,ue,it)))return Er.push(ls)})){Gi=!1;break}}else if(!(oo===$o||Ue(oo,$o,Z,ue,it))){Gi=!1;break}}return it.delete(w),it.delete(M),Gi}function au(w,M,Z,ue,Ue,it,Et){switch(Z){case $t:if(w.byteLength!=M.byteLength||w.byteOffset!=M.byteOffset)return!1;w=w.buffer,M=M.buffer;case Ao:return!(w.byteLength!=M.byteLength||!it(new qr(w),new qr(M)));case ri:case zi:case ji:return $s(+w,+M);case sr:return w.name==M.name&&w.message==M.message;case hr:case Ur:return w==M+"";case Ki:var Ot=Gc;case ir:var sn=ue&he;if(Ot||(Ot=oa),w.size!=M.size&&!sn)return!1;var ii=Et.get(w);if(ii)return ii==M;ue|=Ae,Et.set(w,M);var oi=_f(Ot(w),Ot(M),ue,Ue,it,Et);return Et.delete(w),oi;case jr:if(F)return F.call(w)==F.call(M)}return!1}function W_(w,M,Z,ue,Ue,it){var Et=Z&he,Ot=Gp(w),sn=Ot.length,ii=Gp(M),oi=ii.length;if(sn!=oi&&!Et)return!1;for(var Ai=sn;Ai--;){var Gi=Ot[Ai];if(!(Et?Gi in M:no.call(M,Gi)))return!1}var Er=it.get(w),oo=it.get(M);if(Er&&oo)return Er==M&&oo==w;var $o=!0;it.set(w,M),it.set(M,w);for(var so=Et;++Ai<sn;){Gi=Ot[Ai];var is=w[Gi],ls=M[Gi];if(ue)var Bh=Et?ue(ls,is,Gi,M,w,it):ue(is,ls,Gi,w,M,it);if(!(Bh===i?is===ls||Ue(is,ls,Z,ue,it):Bh)){$o=!1;break}so||(so=Gi=="constructor")}if($o&&!so){var ku=w.constructor,ec=M.constructor;ku!=ec&&"constructor"in w&&"constructor"in M&&!(typeof ku=="function"&&ku instanceof ku&&typeof ec=="function"&&ec instanceof ec)&&($o=!1)}return it.delete(w),it.delete(M),$o}function wd(w){return uA(qp(w,i,hA),w+"")}function Gp(w){return cn(w,js,Jf)}function Wp(w){return cn(w,Yu,yf)}var Cd=Lo?function(w){return Lo.get(w)}:Cm;function Yf(w){for(var M=w.name+"",Z=Uo[M],ue=no.call(Uo,M)?Z.length:0;ue--;){var Ue=Z[ue],it=Ue.func;if(it==null||it==w)return Ue.name}return M}function kA(w){var M=no.call(N,"placeholder")?N:w;return M.placeholder}function Qr(){var w=N.iteratee||pp;return w=w===pp?qo:w,arguments.length?w(arguments[0],arguments[1]):w}function PA(w,M){var Z=w.__data__;return cg(M)?Z[typeof M=="string"?"string":"hash"]:Z.map}function rg(w){for(var M=js(w),Z=M.length;Z--;){var ue=M[Z],Ue=w[ue];M[Z]=[ue,Ue,vh(Ue)]}return M}function sA(w,M){var Z=Qu(w,M);return co(Z)?Z:i}function og(w){var M=no.call(w,cl),Z=w[cl];try{w[cl]=i;var ue=!0}catch{}var Ue=Zc.call(w);return ue&&(M?w[cl]=Z:delete w[cl]),Ue}var Jf=Yc?function(w){return w==null?[]:(w=as(w),Ql(Yc(w),function(M){return Ic.call(w,M)}))}:my,yf=Yc?function(w){for(var M=[];w;)$l(M,Jf(w)),w=Sc(w);return M}:my,Yl=Nn;(Ti&&Yl(new Ti(new ArrayBuffer(1)))!=$t||Hi&&Yl(new Hi)!=Ki||kr&&Yl(kr.resolve())!=nr||zo&&Yl(new zo)!=ir||ws&&Yl(new ws)!=Zr)&&(Yl=function(w){var M=Nn(w),Z=M==Ir?w.constructor:i,ue=Z?Ed(Z):"";if(ue)switch(ue){case zh:return $t;case Jc:return Ki;case P:return nr;case u:return ir;case x:return Zr}return M});function sg(w,M,Z){for(var ue=-1,Ue=Z.length;++ue<Ue;){var it=Z[ue],Et=it.size;switch(it.type){case"drop":w+=Et;break;case"dropRight":M-=Et;break;case"take":M=Ne(M,w+Et);break;case"takeRight":w=ge(w,M-Et);break}}return{start:w,end:M}}function Kp(w){var M=w.match(pe);return M?M[1].split(we):[]}function Ac(w,M,Z){M=dl(M,w);for(var ue=-1,Ue=M.length,it=!1;++ue<Ue;){var Et=Su(M[ue]);if(!(it=w!=null&&Z(w,Et)))break;w=w[Et]}return it||++ue!=Ue?it:(Ue=w==null?0:w.length,!!Ue&&Fc(Ue)&&Eu(Et,Ue)&&(wr(w)||pa(w)))}function ag(w){var M=w.length,Z=new w.constructor(M);return M&&typeof w[0]=="string"&&no.call(w,"index")&&(Z.index=w.index,Z.input=w.input),Z}function FA(w){return typeof w.constructor=="function"&&!yh(w)?oe(Sc(w)):{}}function Ns(w,M,Z){var ue=w.constructor;switch(M){case Ao:return df(w);case ri:case zi:return new ue(+w);case $t:return $p(w,Z);case en:case Fr:case So:case er:case xi:case Xi:case Un:case Oi:case bn:return Gu(w,Z);case Ki:return new ue;case ji:case Ur:return new ue(w);case hr:return Af(w);case ir:return new ue;case jr:return ng(w)}}function lg(w,M){var Z=M.length;if(!Z)return w;var ue=Z-1;return M[ue]=(Z>1?"& ":"")+M[ue],M=M.join(Z>2?", ":" "),w.replace(Pe,`{
/* [wrapped with `+M+`] */
`)}function aA(w){return wr(w)||pa(w)||!!(Kl&&w&&w[Kl])}function Eu(w,M){var Z=typeof w;return M=M??mn,!!M&&(Z=="number"||Z!="symbol"&&an.test(w))&&w>-1&&w%1==0&&w<M}function Pr(w,M,Z){if(!Go(Z))return!1;var ue=typeof M;return(ue=="number"?Fo(Z)&&Eu(M,Z.length):ue=="string"&&M in Z)?$s(Z[M],w):!1}function Xa(w,M){if(wr(w))return!1;var Z=typeof w;return Z=="number"||Z=="symbol"||Z=="boolean"||w==null||qu(w)?!0:Xt.test(w)||!yt.test(w)||M!=null&&w in as(M)}function cg(w){var M=typeof w;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?w!=="__proto__":w===null}function DA(w){var M=Yf(w),Z=N[M];if(typeof Z!="function"||!(M in ye.prototype))return!1;if(w===Z)return!0;var ue=Cd(Z);return!!ue&&w===ue[0]}function ug(w){return!!Xs&&Xs in w}var Bd=Vl?gc:y0;function yh(w){var M=w&&w.constructor,Z=typeof M=="function"&&M.prototype||Hl;return w===Z}function vh(w){return w===w&&!Go(w)}function lA(w,M){return function(Z){return Z==null?!1:Z[w]===M&&(M!==i||w in as(Z))}}function K_(w){var M=Vi(w,function(ue){return Z.size===U&&Z.clear(),ue}),Z=M.cache;return M}function Z_(w,M){var Z=w[1],ue=M[1],Ue=Z|ue,it=Ue<(De|ke|nt),Et=ue==nt&&Z==Te||ue==nt&&Z==xt&&w[7].length<=M[8]||ue==(nt|xt)&&M[7].length<=M[8]&&Z==Te;if(!(it||Et))return w;ue&De&&(w[2]=M[2],Ue|=Z&De?0:xe);var Ot=M[3];if(Ot){var sn=w[3];w[3]=sn?sa(sn,Ot,M[4]):Ot,w[4]=sn?Zs(w[3],$):M[4]}return Ot=M[5],Ot&&(sn=w[5],w[5]=sn?Ar(sn,Ot,M[6]):Ot,w[6]=sn?Zs(w[5],$):M[6]),Ot=M[7],Ot&&(w[7]=Ot),ue&nt&&(w[8]=w[8]==null?M[8]:Ne(w[8],M[8])),w[9]==null&&(w[9]=M[9]),w[0]=M[0],w[1]=Ue,w}function Zv(w){var M=[];if(w!=null)for(var Z in as(w))M.push(Z);return M}function Zp(w){return Zc.call(w)}function qp(w,M,Z){return M=ge(M===i?w.length-1:M,0),function(){for(var ue=arguments,Ue=-1,it=ge(ue.length-M,0),Et=wn(it);++Ue<it;)Et[Ue]=ue[M+Ue];Ue=-1;for(var Ot=wn(M+1);++Ue<M;)Ot[Ue]=ue[Ue];return Ot[M]=Z(Et),ps(w,this,Ot)}}function UA(w,M){return M.length<2?w:Nt(w,ou(M,0,-1))}function vf(w,M){for(var Z=w.length,ue=Ne(M.length,Z),Ue=Qa(w);ue--;){var it=M[ue];w[ue]=Eu(it,Z)?Ue[it]:i}return w}function zA(w,M){if(!(M==="constructor"&&typeof w[M]=="function")&&M!="__proto__")return w[M]}var cA=hg(ru),$h=ul||function(w,M){return Ss.setTimeout(w,M)},uA=hg(Q_);function Xp(w,M,Z){var ue=M+"";return uA(w,lg(ue,Jp(Kp(ue),Z)))}function hg(w){var M=0,Z=0;return function(){var ue=at(),Ue=Ut-(ue-Z);if(Z=ue,Ue>0){if(++M>=rn)return arguments[0]}else M=0;return w.apply(i,arguments)}}function Td(w,M){var Z=-1,ue=w.length,Ue=ue-1;for(M=M===i?ue:M;++Z<M;){var it=Bu(Z,Ue),Et=w[it];w[it]=w[Z],w[Z]=Et}return w.length=M,w}var Yp=K_(function(w){var M=[];return w.charCodeAt(0)===46&&M.push(""),w.replace(Tn,function(Z,ue,Ue,it){M.push(Ue?it.replace(_t,"$1"):ue||Z)}),M});function Su(w){if(typeof w=="string"||qu(w))return w;var M=w+"";return M=="0"&&1/w==-Rn?"-0":M}function Ed(w){if(w!=null){try{return Gl.call(w)}catch{}try{return w+""}catch{}}return""}function Jp(w,M){return ra(Bn,function(Z){var ue="_."+Z[0];M&Z[1]&&!mu(w,ue)&&w.push(ue)}),w.sort()}function xf(w){if(w instanceof ye)return w.clone();var M=new me(w.__wrapped__,w.__chain__);return M.__actions__=Qa(w.__actions__),M.__index__=w.__index__,M.__values__=w.__values__,M}function nd(w,M,Z){(Z?Pr(w,M,Z):M===i)?M=1:M=ge(go(M),0);var ue=w==null?0:w.length;if(!ue||M<1)return[];for(var Ue=0,it=0,Et=wn(Oo(ue/M));Ue<ue;)Et[it++]=ou(w,Ue,Ue+=M);return Et}function ep(w){for(var M=-1,Z=w==null?0:w.length,ue=0,Ue=[];++M<Z;){var it=w[M];it&&(Ue[ue++]=it)}return Ue}function jh(){var w=arguments.length;if(!w)return[];for(var M=wn(w-1),Z=arguments[0],ue=w;ue--;)M[ue-1]=arguments[ue];return $l(wr(Z)?Qa(Z):[Z],lt(M,1))}var _s=wo(function(w,M){return Qo(w)?Qe(w,lt(M,1,Qo,!0)):[]}),em=wo(function(w,M){var Z=kc(M);return Qo(Z)&&(Z=i),Qo(w)?Qe(w,lt(M,1,Qo,!0),Qr(Z,2)):[]}),Hh=wo(function(w,M){var Z=kc(M);return Qo(Z)&&(Z=i),Qo(w)?Qe(w,lt(M,1,Qo,!0),i,Z):[]});function id(w,M,Z){var ue=w==null?0:w.length;return ue?(M=Z||M===i?1:go(M),ou(w,M<0?0:M,ue)):[]}function xh(w,M,Z){var ue=w==null?0:w.length;return ue?(M=Z||M===i?1:go(M),M=ue-M,ou(w,0,M<0?0:M)):[]}function Iu(w,M){return w&&w.length?Np(w,Qr(M,3),!0,!0):[]}function Al(w,M){return w&&w.length?Np(w,Qr(M,3),!0):[]}function tm(w,M,Z,ue){var Ue=w==null?0:w.length;return Ue?(Z&&typeof Z!="number"&&Pr(w,M,Z)&&(Z=0,ue=Ue),Be(w,M,Z,ue)):[]}function Sl(w,M,Z){var ue=w==null?0:w.length;if(!ue)return-1;var Ue=Z==null?0:go(Z);return Ue<0&&(Ue=ge(ue+Ue,0)),ya(w,Qr(M,3),Ue)}function dg(w,M,Z){var ue=w==null?0:w.length;if(!ue)return-1;var Ue=ue-1;return Z!==i&&(Ue=go(Z),Ue=Z<0?ge(ue+Ue,0):Ne(Ue,ue-1)),ya(w,Qr(M,3),Ue,!0)}function hA(w){var M=w==null?0:w.length;return M?lt(w,1):[]}function Vh(w){var M=w==null?0:w.length;return M?lt(w,Rn):[]}function Ag(w,M){var Z=w==null?0:w.length;return Z?(M=M===i?1:go(M),lt(w,M)):[]}function rd(w){for(var M=-1,Z=w==null?0:w.length,ue={};++M<Z;){var Ue=w[M];ue[Ue[0]]=Ue[1]}return ue}function fg(w){return w&&w.length?w[0]:i}function nm(w,M,Z){var ue=w==null?0:w.length;if(!ue)return-1;var Ue=Z==null?0:go(Z);return Ue<0&&(Ue=ge(ue+Ue,0)),bl(w,M,Ue)}function pg(w){var M=w==null?0:w.length;return M?ou(w,0,-1):[]}var q_=wo(function(w){var M=Vo(w,Hu);return M.length&&M[0]===w[0]?nn(M):[]}),Sd=wo(function(w){var M=kc(w),Z=Vo(w,Hu);return M===kc(Z)?M=i:Z.pop(),Z.length&&Z[0]===w[0]?nn(Z,Qr(M,2)):[]}),RA=wo(function(w){var M=kc(w),Z=Vo(w,Hu);return M=typeof M=="function"?M:i,M&&Z.pop(),Z.length&&Z[0]===w[0]?nn(Z,i,M):[]});function tp(w,M){return w==null?"":G.call(w,M)}function kc(w){var M=w==null?0:w.length;return M?w[M-1]:i}function im(w,M,Z){var ue=w==null?0:w.length;if(!ue)return-1;var Ue=ue;return Z!==i&&(Ue=go(Z),Ue=Ue<0?ge(ue+Ue,0):Ne(Ue,ue-1)),M===M?mh(w,M,Ue):ya(w,Ra,Ue,!0)}function np(w,M){return w&&w.length?Aa(w,go(M)):i}var X_=wo(bf);function bf(w,M){return w&&w.length&&M&&M.length?Cu(w,M):w}function rm(w,M,Z){return w&&w.length&&M&&M.length?Cu(w,M,Qr(Z,2)):w}function wf(w,M,Z){return w&&w.length&&M&&M.length?Cu(w,M,i,Z):w}var qv=wd(function(w,M){var Z=w==null?0:w.length,ue=K(w,M);return yd(w,Vo(M,function(Ue){return Eu(Ue,Z)?+Ue:Ue}).sort(ff)),ue});function mg(w,M){var Z=[];if(!(w&&w.length))return Z;var ue=-1,Ue=[],it=w.length;for(M=Qr(M,3);++ue<it;){var Et=w[ue];M(Et,ue,w)&&(Z.push(Et),Ue.push(ue))}return yd(w,Ue),Z}function om(w){return w==null?w:ni.call(w)}function Y_(w,M,Z){var ue=w==null?0:w.length;return ue?(Z&&typeof Z!="number"&&Pr(w,M,Z)?(M=0,Z=ue):(M=M==null?0:go(M),Z=Z===i?ue:go(Z)),ou(w,M,Z)):[]}function bh(w,M){return vd(w,M)}function sm(w,M,Z){return xd(w,M,Qr(Z,2))}function J_(w,M){var Z=w==null?0:w.length;if(Z){var ue=vd(w,M);if(ue<Z&&$s(w[ue],M))return ue}return-1}function dA(w,M){return vd(w,M,!0)}function am(w,M,Z){return xd(w,M,Qr(Z,2),!0)}function Id(w,M){var Z=w==null?0:w.length;if(Z){var ue=vd(w,M,!0)-1;if($s(w[ue],M))return ue}return-1}function gg(w){return w&&w.length?Nh(w):[]}function ey(w,M){return w&&w.length?Nh(w,Qr(M,2)):[]}function Xv(w){var M=w==null?0:w.length;return M?ou(w,1,M):[]}function ty(w,M,Z){return w&&w.length?(M=Z||M===i?1:go(M),ou(w,0,M<0?0:M)):[]}function Yv(w,M,Z){var ue=w==null?0:w.length;return ue?(M=Z||M===i?1:go(M),M=ue-M,ou(w,M<0?0:M,ue)):[]}function ip(w,M){return w&&w.length?Np(w,Qr(M,3),!1,!0):[]}function _g(w,M){return w&&w.length?Np(w,Qr(M,3)):[]}var Jv=wo(function(w){return bd(lt(w,1,Qo,!0))}),lm=wo(function(w){var M=kc(w);return Qo(M)&&(M=i),bd(lt(w,1,Qo,!0),Qr(M,2))}),cm=wo(function(w){var M=kc(w);return M=typeof M=="function"?M:i,bd(lt(w,1,Qo,!0),i,M)});function OA(w){return w&&w.length?bd(w):[]}function yg(w,M){return w&&w.length?bd(w,Qr(M,2)):[]}function Gh(w,M){return M=typeof M=="function"?M:i,w&&w.length?bd(w,i,M):[]}function fc(w){if(!(w&&w.length))return[];var M=0;return w=Ql(w,function(Z){if(Qo(Z))return M=ge(Z.length,M),!0}),fh(M,function(Z){return Vo(w,Ah(Z))})}function rp(w,M){if(!(w&&w.length))return[];var Z=fc(w);return M==null?Z:Vo(Z,function(ue){return ps(M,i,ue)})}var op=wo(function(w,M){return Qo(w)?Qe(w,M):[]}),e0=wo(function(w){return IA(Ql(w,Qo))}),t0=wo(function(w){var M=kc(w);return Qo(M)&&(M=i),IA(Ql(w,Qo),Qr(M,2))}),n0=wo(function(w){var M=kc(w);return M=typeof M=="function"?M:i,IA(Ql(w,Qo),i,M)}),vg=wo(fc);function um(w,M){return MA(w||[],M||[],b)}function xg(w,M){return MA(w||[],M||[],Jh)}var Ms=wo(function(w){var M=w.length,Z=M>1?w[M-1]:i;return Z=typeof Z=="function"?(w.pop(),Z):i,rp(w,Z)});function wh(w){var M=N(w);return M.__chain__=!0,M}function ny(w,M){return M(w),w}function sp(w,M){return M(w)}var iy=wd(function(w){var M=w.length,Z=M?w[0]:0,ue=this.__wrapped__,Ue=function(it){return K(it,w)};return M>1||this.__actions__.length||!(ue instanceof ye)||!Eu(Z)?this.thru(Ue):(ue=ue.slice(Z,+Z+(M?1:0)),ue.__actions__.push({func:sp,args:[Ue],thisArg:i}),new me(ue,this.__chain__).thru(function(it){return M&&!it.length&&it.push(i),it}))});function ry(){return wh(this)}function oy(){return new me(this.value(),this.__chain__)}function bg(){this.__values__===i&&(this.__values__=_c(this.value()));var w=this.__index__>=this.__values__.length,M=w?i:this.__values__[this.__index__++];return{done:w,value:M}}function hm(){return this}function dm(w){for(var M,Z=this;Z instanceof ae;){var ue=xf(Z);ue.__index__=0,ue.__values__=i,M?Ue.__wrapped__=ue:M=ue;var Ue=ue;Z=Z.__wrapped__}return Ue.__wrapped__=w,M}function wg(){var w=this.__wrapped__;if(w instanceof ye){var M=w;return this.__actions__.length&&(M=new ye(this)),M=M.reverse(),M.__actions__.push({func:sp,args:[om],thisArg:i}),new me(M,this.__chain__)}return this.thru(om)}function NA(){return Qp(this.__wrapped__,this.__actions__)}var Wu=Zf(function(w,M,Z){no.call(w,Z)?++w[Z]:R(w,Z,1)});function Ys(w,M,Z){var ue=wr(w)?pu:tt;return Z&&Pr(w,M,Z)&&(M=i),ue(w,Qr(M,3))}function ap(w,M){var Z=wr(w)?Ql:Ye;return Z(w,Qr(M,3))}var Cg=td(Sl),lp=td(dg);function cp(w,M){return lt(A(w,M),1)}function Cf(w,M){return lt(A(w,M),Rn)}function Bg(w,M,Z){return Z=Z===i?1:go(Z),lt(A(w,M),Z)}function Tg(w,M){var Z=wr(w)?ra:We;return Z(w,Qr(M,3))}function AA(w,M){var Z=wr(w)?to:et;return Z(w,Qr(M,3))}var Bf=Zf(function(w,M,Z){no.call(w,Z)?w[Z].push(M):R(w,Z,[M])});function QA(w,M,Z,ue){w=Fo(w)?w:fp(w),Z=Z&&!ue?go(Z):0;var Ue=w.length;return Z<0&&(Z=ge(Ue+Z,0)),Ld(w)?Z<=Ue&&w.indexOf(M,Z)>-1:!!Ue&&bl(w,M,Z)>-1}var up=wo(function(w,M,Z){var ue=-1,Ue=typeof M=="function",it=Fo(w)?wn(w.length):[];return We(w,function(Et){it[++ue]=Ue?ps(M,Et,Z):Yn(Et,M,Z)}),it}),i0=Zf(function(w,M,Z){R(w,Z,M)});function A(w,M){var Z=wr(w)?Vo:iu;return Z(w,Qr(M,3))}function c(w,M,Z,ue){return w==null?[]:(wr(M)||(M=M==null?[]:[M]),Z=ue?i:Z,wr(Z)||(Z=Z==null?[]:[Z]),Na(w,M,Z))}var m=Zf(function(w,M,Z){w[Z?0:1].push(M)},function(){return[[],[]]});function B(w,M,Z){var ue=wr(w)?xl:jl,Ue=arguments.length<3;return ue(w,Qr(M,4),Z,Ue,We)}function D(w,M,Z){var ue=wr(w)?rs:jl,Ue=arguments.length<3;return ue(w,Qr(M,4),Z,Ue,et)}function O(w,M){var Z=wr(w)?Ql:Ye;return Z(w,Li(Qr(M,3)))}function H(w){var M=wr(w)?Tl:Xd;return M(w)}function Y(w,M,Z){(Z?Pr(w,M,Z):M===i)?M=1:M=go(M);var ue=wr(w)?hl:SA;return ue(w,M)}function re(w){var M=wr(w)?tu:Jm;return M(w)}function de(w){if(w==null)return 0;if(Fo(w))return Ld(w)?Ia(w):w.length;var M=Yl(w);return M==Ki||M==ir?w.size:Xo(w).length}function be(w,M,Z){var ue=wr(w)?sc:$_;return Z&&Pr(w,M,Z)&&(M=i),ue(w,Qr(M,3))}var Le=wo(function(w,M){if(w==null)return[];var Z=M.length;return Z>1&&Pr(w,M[0],M[1])?M=[]:Z>2&&Pr(M[0],M[1],M[2])&&(M=[M[0]]),Na(w,lt(M,1),[])}),$e=bu||function(){return Ss.Date.now()};function Ge(w,M){if(typeof M!="function")throw new ha(v);return w=go(w),function(){if(--w<1)return M.apply(this,arguments)}}function Ze(w,M,Z){return M=Z?i:M,M=w&&M==null?w.length:M,wa(w,nt,i,i,i,i,M)}function St(w,M){var Z;if(typeof M!="function")throw new ha(v);return w=go(w),function(){return--w>0&&(Z=M.apply(this,arguments)),w<=1&&(M=i),Z}}var wt=wo(function(w,M,Z){var ue=De;if(Z.length){var Ue=Zs(Z,kA(wt));ue|=Fe}return wa(w,ue,M,Z,Ue)}),Yt=wo(function(w,M,Z){var ue=De|ke;if(Z.length){var Ue=Zs(Z,kA(Yt));ue|=Fe}return wa(M,ue,w,Z,Ue)});function pn(w,M,Z){M=Z?i:M;var ue=wa(w,Te,i,i,i,i,i,M);return ue.placeholder=pn.placeholder,ue}function Zt(w,M,Z){M=Z?i:M;var ue=wa(w,Ee,i,i,i,i,i,M);return ue.placeholder=Zt.placeholder,ue}function dn(w,M,Z){var ue,Ue,it,Et,Ot,sn,ii=0,oi=!1,Ai=!1,Gi=!0;if(typeof w!="function")throw new ha(v);M=Lu(M)||0,Go(Z)&&(oi=!!Z.leading,Ai="maxWait"in Z,it=Ai?ge(Lu(Z.maxWait)||0,M):it,Gi="trailing"in Z?!!Z.trailing:Gi);function Er(fl){var Pd=ue,GA=Ue;return ue=Ue=i,ii=fl,Et=w.apply(GA,Pd),Et}function oo(fl){return ii=fl,Ot=$h(is,M),oi?Er(fl):Et}function $o(fl){var Pd=fl-sn,GA=fl-ii,Og=M-Pd;return Ai?Ne(Og,it-GA):Og}function so(fl){var Pd=fl-sn,GA=fl-ii;return sn===i||Pd>=M||Pd<0||Ai&&GA>=it}function is(){var fl=$e();if(so(fl))return ls(fl);Ot=$h(is,$o(fl))}function ls(fl){return Ot=i,Gi&&ue?Er(fl):(ue=Ue=i,Et)}function Bh(){Ot!==i&&Kf(Ot),ii=0,ue=sn=Ue=Ot=i}function ku(){return Ot===i?Et:ls($e())}function ec(){var fl=$e(),Pd=so(fl);if(ue=arguments,Ue=this,sn=fl,Pd){if(Ot===i)return oo(sn);if(Ai)return Kf(Ot),Ot=$h(is,M),Er(sn)}return Ot===i&&(Ot=$h(is,M)),Et}return ec.cancel=Bh,ec.flush=ku,ec}var Gn=wo(function(w,M){return ve(w,1,M)}),Qn=wo(function(w,M,Z){return ve(w,Lu(M)||0,Z)});function Ni(w){return wa(w,Bt)}function Vi(w,M){if(typeof w!="function"||M!=null&&typeof M!="function")throw new ha(v);var Z=function(){var ue=arguments,Ue=M?M.apply(this,ue):ue[0],it=Z.cache;if(it.has(Ue))return it.get(Ue);var Et=w.apply(this,ue);return Z.cache=it.set(Ue,Et)||it,Et};return Z.cache=new(Vi.Cache||pi),Z}Vi.Cache=pi;function Li(w){if(typeof w!="function")throw new ha(v);return function(){var M=arguments;switch(M.length){case 0:return!w.call(this);case 1:return!w.call(this,M[0]);case 2:return!w.call(this,M[0],M[1]);case 3:return!w.call(this,M[0],M[1],M[2])}return!w.apply(this,M)}}function Ci(w){return St(2,w)}var _i=Yd(function(w,M){M=M.length==1&&wr(M[0])?Vo(M[0],ms(Qr())):Vo(lt(M,1),ms(Qr()));var Z=M.length;return wo(function(ue){for(var Ue=-1,it=Ne(ue.length,Z);++Ue<it;)ue[Ue]=M[Ue].call(this,ue[Ue]);return ps(w,this,ue)})}),Ei=wo(function(w,M){var Z=Zs(M,kA(Ei));return wa(w,Fe,i,M,Z)}),Ii=wo(function(w,M){var Z=Zs(M,kA(Ii));return wa(w,Se,i,M,Z)}),ci=wd(function(w,M){return wa(w,xt,i,i,i,M)});function dr(w,M){if(typeof w!="function")throw new ha(v);return M=M===i?M:go(M),wo(w,M)}function Ji(w,M){if(typeof w!="function")throw new ha(v);return M=M==null?0:ge(go(M),0),wo(function(Z){var ue=Z[M],Ue=ns(Z,0,M);return ue&&$l(Ue,ue),ps(w,this,Ue)})}function Co(w,M,Z){var ue=!0,Ue=!0;if(typeof w!="function")throw new ha(v);return Go(Z)&&(ue="leading"in Z?!!Z.leading:ue,Ue="trailing"in Z?!!Z.trailing:Ue),dn(w,M,{leading:ue,maxWait:M,trailing:Ue})}function ys(w){return Ze(w,1)}function Qs(w,M){return Ei(Vu(M),w)}function Ya(){if(!arguments.length)return[];var w=arguments[0];return wr(w)?w:[w]}function Mu(w){return ee(w,te)}function Il(w,M){return M=typeof M=="function"?M:i,ee(w,te,M)}function Ma(w){return ee(w,V|te)}function Ja(w,M){return M=typeof M=="function"?M:i,ee(w,V|te,M)}function Ml(w,M){return M==null||le(w,M,js(M))}function $s(w,M){return w===M||w!==w&&M!==M}var lu=oA(Vt),$a=oA(function(w,M){return w>=M}),pa=Vn(function(){return arguments}())?Vn:function(w){return Ts(w)&&no.call(w,"callee")&&!Ic.call(w,"callee")},wr=wn.isArray,pc=Cc?ms(Cc):si;function Fo(w){return w!=null&&Fc(w.length)&&!gc(w)}function Qo(w){return Ts(w)&&Fo(w)}function Cs(w){return w===!0||w===!1||Ts(w)&&Nn(w)==ri}var Bs=_||y0,Do=uh?ms(uh):ar;function cu(w){return Ts(w)&&w.nodeType===1&&!Ca(w)}function Jl(w){if(w==null)return!0;if(Fo(w)&&(wr(w)||typeof w=="string"||typeof w.splice=="function"||Bs(w)||Tf(w)||pa(w)))return!w.length;var M=Yl(w);if(M==Ki||M==ir)return!w.size;if(yh(w))return!Xo(w).length;for(var Z in w)if(no.call(w,Z))return!1;return!0}function mc(w,M){return Tr(w,M)}function Ch(w,M,Z){Z=typeof Z=="function"?Z:i;var ue=Z?Z(w,M):i;return ue===i?Tr(w,M,i,Z):!!ue}function Ku(w){if(!Ts(w))return!1;var M=Nn(w);return M==sr||M==Vr||typeof w.message=="string"&&typeof w.name=="string"&&!Ca(w)}function Wh(w){return typeof w=="number"&&E(w)}function gc(w){if(!Go(w))return!1;var M=Nn(w);return M==li||M==Qi||M==tr||M==Ri}function Pc(w){return typeof w=="number"&&w==go(w)}function Fc(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=mn}function Go(w){var M=typeof w;return w!=null&&(M=="object"||M=="function")}function Ts(w){return w!=null&&typeof w=="object"}var $A=zu?ms(zu):yr;function sy(w,M){return w===M||ro(w,M,rg(M))}function Eg(w,M,Z){return Z=typeof Z=="function"?Z:i,ro(w,M,rg(M),Z)}function Sg(w){return fm(w)&&w!=+w}function Md(w){if(Bd(w))throw new Br(f);return co(w)}function ay(w){return w===null}function Am(w){return w==null}function fm(w){return typeof w=="number"||Ts(w)&&Nn(w)==ji}function Ca(w){if(!Ts(w)||Nn(w)!=Ir)return!1;var M=Sc(w);if(M===null)return!0;var Z=no.call(M,"constructor")&&M.constructor;return typeof Z=="function"&&Z instanceof Z&&Gl.call(Z)==Uh}var Zu=hh?ms(hh):Yi;function Ig(w){return Pc(w)&&w>=-mn&&w<=mn}var hp=Ph?ms(Ph):Ro;function Ld(w){return typeof w=="string"||!wr(w)&&Ts(w)&&Nn(w)==Ur}function qu(w){return typeof w=="symbol"||Ts(w)&&Nn(w)==jr}var Tf=Fh?ms(Fh):gs;function dp(w){return w===i}function r0(w){return Ts(w)&&Yl(w)==Zr}function Kh(w){return Ts(w)&&Nn(w)==Eo}var Ap=oA(Oa),Mg=oA(function(w,M){return w<=M});function _c(w){if(!w)return[];if(Fo(w))return Ld(w)?Ga(w):Qa(w);if(Za&&w[Za])return Bc(w[Za]());var M=Yl(w),Z=M==Ki?Gc:M==ir?oa:fp;return Z(w)}function uo(w){if(!w)return w===0?w:0;if(w=Lu(w),w===Rn||w===-Rn){var M=w<0?-1:1;return M*Cn}return w===w?w:0}function go(w){var M=uo(w),Z=M%1;return M===M?Z?M-Z:M:0}function jA(w){return w?X(go(w),0,Xn):0}function Lu(w){if(typeof w=="number")return w;if(qu(w))return Qt;if(Go(w)){var M=typeof w.valueOf=="function"?w.valueOf():w;w=Go(M)?M+"":M}if(typeof w!="string")return w===0?w:+w;w=Nu(w);var Z=mt.test(w);return Z||Sn.test(w)?ch(w.slice(2),Z?2:8):Je.test(w)?Qt:+w}function Dc(w){return dc(w,Yu(w))}function pm(w){return w?X(go(w),-mn,mn):w===0?w:0}function Ds(w){return w==null?"":ql(w)}var GT=Xl(function(w,M){if(yh(M)||Fo(M)){dc(M,js(M),w);return}for(var Z in M)no.call(M,Z)&&b(w,Z,M[Z])}),Cw=Xl(function(w,M){dc(M,Yu(M),w)}),ly=Xl(function(w,M,Z,ue){dc(M,Yu(M),w,ue)}),WT=Xl(function(w,M,Z,ue){dc(M,js(M),w,ue)}),KT=wd(K);function ZT(w,M){var Z=oe(w);return M==null?Z:T(Z,M)}var qT=wo(function(w,M){w=as(w);var Z=-1,ue=M.length,Ue=ue>2?M[2]:i;for(Ue&&Pr(M[0],M[1],Ue)&&(ue=1);++Z<ue;)for(var it=M[Z],Et=Yu(it),Ot=-1,sn=Et.length;++Ot<sn;){var ii=Et[Ot],oi=w[ii];(oi===i||$s(oi,Hl[ii])&&!no.call(w,ii))&&(w[ii]=it[ii])}return w}),XT=wo(function(w){return w.push(i,fa),ps(Pg,i,w)});function YT(w,M){return es(w,Qr(M,3),Tt)}function cy(w,M){return es(w,Qr(M,3),Mt)}function mm(w,M){return w==null?w:At(w,Qr(M,3),Yu)}function Bw(w,M){return w==null?w:It(w,Qr(M,3),Yu)}function uy(w,M){return w&&Tt(w,Qr(M,3))}function o0(w,M){return w&&Mt(w,Qr(M,3))}function JT(w){return w==null?[]:Ht(w,js(w))}function eE(w){return w==null?[]:Ht(w,Yu(w))}function s0(w,M,Z){var ue=w==null?i:Nt(w,M);return ue===i?Z:ue}function Tw(w,M){return w!=null&&Ac(w,M,Pn)}function Lg(w,M){return w!=null&&Ac(w,M,fn)}var Xu=nA(function(w,M,Z){M!=null&&typeof M.toString!="function"&&(M=Zc.call(M)),w[M]=Z},VA(Uc)),a0=nA(function(w,M,Z){M!=null&&typeof M.toString!="function"&&(M=Zc.call(M)),no.call(w,M)?w[M].push(Z):w[M]=[Z]},Qr),Ew=wo(Yn);function js(w){return Fo(w)?ju(w):Xo(w)}function Yu(w){return Fo(w)?ju(w,!0):qa(w)}function kg(w,M){var Z={};return M=Qr(M,3),Tt(w,function(ue,Ue,it){R(Z,M(ue,Ue,it),ue)}),Z}function gm(w,M){var Z={};return M=Qr(M,3),Tt(w,function(ue,Ue,it){R(Z,Ue,M(ue,Ue,it))}),Z}var l0=Xl(function(w,M,Z){ts(w,M,Z)}),Pg=Xl(function(w,M,Z,ue){ts(w,M,Z,ue)}),tE=wd(function(w,M){var Z={};if(w==null)return Z;var ue=!1;M=Vo(M,function(it){return it=dl(it,w),ue||(ue=it.length>1),it}),dc(w,Wp(w),Z),ue&&(Z=ee(Z,V|q|te,G_));for(var Ue=M.length;Ue--;)eg(Z,M[Ue]);return Z});function Sw(w,M){return Mw(w,Li(Qr(M)))}var Iw=wd(function(w,M){return w==null?{}:Fs(w,M)});function Mw(w,M){if(w==null)return{};var Z=Vo(Wp(w),function(ue){return[ue]});return M=Qr(M),Zl(w,Z,function(ue,Ue){return M(ue,Ue[0])})}function Lw(w,M,Z){M=dl(M,w);var ue=-1,Ue=M.length;for(Ue||(Ue=1,w=i);++ue<Ue;){var it=w==null?i:w[Su(M[ue])];it===i&&(ue=Ue,it=Z),w=gc(it)?it.call(w):it}return w}function kw(w,M,Z){return w==null?w:Jh(w,M,Z)}function c0(w,M,Z,ue){return ue=typeof ue=="function"?ue:i,w==null?w:Jh(w,M,Z,ue)}var u0=El(js),Pw=El(Yu);function Fw(w,M,Z){var ue=wr(w),Ue=ue||Bs(w)||Tf(w);if(M=Qr(M,4),Z==null){var it=w&&w.constructor;Ue?Z=ue?new it:[]:Go(w)?Z=gc(it)?oe(Sc(w)):{}:Z={}}return(Ue?ra:Tt)(w,function(Et,Ot,sn){return M(Z,Et,Ot,sn)}),Z}function HA(w,M){return w==null?!0:eg(w,M)}function Dw(w,M,Z){return w==null?w:j_(w,M,Vu(Z))}function Uw(w,M,Z,ue){return ue=typeof ue=="function"?ue:i,w==null?w:j_(w,M,Vu(Z),ue)}function fp(w){return w==null?[]:va(w,js(w))}function zw(w){return w==null?[]:va(w,Yu(w))}function nE(w,M,Z){return Z===i&&(Z=M,M=i),Z!==i&&(Z=Lu(Z),Z=Z===Z?Z:0),M!==i&&(M=Lu(M),M=M===M?M:0),X(Lu(w),M,Z)}function iE(w,M,Z){return M=uo(M),Z===i?(Z=M,M=0):Z=uo(Z),w=Lu(w),Zn(w,M,Z)}function Rw(w,M,Z){if(Z&&typeof Z!="boolean"&&Pr(w,M,Z)&&(M=Z=i),Z===i&&(typeof M=="boolean"?(Z=M,M=i):typeof w=="boolean"&&(Z=w,w=i)),w===i&&M===i?(w=0,M=1):(w=uo(w),M===i?(M=w,w=0):M=uo(M)),w>M){var ue=w;w=M,M=ue}if(Z||w%1||M%1){var Ue=_n();return Ne(w+Ue*(M-w+vl("1e-"+((Ue+"").length-1))),M)}return Bu(w,M)}var Ow=eA(function(w,M,Z){return M=M.toLowerCase(),w+(Z?_m(M):M)});function _m(w){return fy(Ds(w).toLowerCase())}function h0(w){return w=Ds(w),w&&w.replace(gn,yu).replace(ah,"")}function Nw(w,M,Z){w=Ds(w),M=ql(M);var ue=w.length;Z=Z===i?ue:X(go(Z),0,ue);var Ue=Z;return Z-=M.length,Z>=0&&w.slice(Z,Ue)==M}function kd(w){return w=Ds(w),w&&ft.test(w)?w.replace(Ce,ac):w}function d0(w){return w=Ds(w),w&&zn.test(w)?w.replace(Fn,"\\$&"):w}var ym=eA(function(w,M,Z){return w+(Z?"-":"")+M.toLowerCase()}),vm=eA(function(w,M,Z){return w+(Z?" ":"")+M.toLowerCase()}),Qw=Jd("toLowerCase");function hy(w,M,Z){w=Ds(w),M=go(M);var ue=M?Ia(w):0;if(!M||ue>=M)return w;var Ue=(M-ue)/2;return _h(Bl(Ue),Z)+w+_h(Oo(Ue),Z)}function $w(w,M,Z){w=Ds(w),M=go(M);var ue=M?Ia(w):0;return M&&ue<M?w+_h(M-ue,Z):w}function dy(w,M,Z){w=Ds(w),M=go(M);var ue=M?Ia(w):0;return M&&ue<M?_h(M-ue,Z)+w:w}function Ay(w,M,Z){return Z||M==null?M=0:M&&(M=+M),Dt(Ds(w).replace(rr,""),M||0)}function rE(w,M,Z){return(Z?Pr(w,M,Z):M===i)?M=1:M=go(M),Oh(Ds(w),M)}function oE(){var w=arguments,M=Ds(w[0]);return w.length<3?M:M.replace(w[1],w[2])}var sE=eA(function(w,M,Z){return w+(Z?"_":"")+M.toLowerCase()});function aE(w,M,Z){return Z&&typeof Z!="number"&&Pr(w,M,Z)&&(M=Z=i),Z=Z===i?Xn:Z>>>0,Z?(w=Ds(w),w&&(typeof M=="string"||M!=null&&!Zu(M))&&(M=ql(M),!M&&lc(w))?ns(Ga(w),0,Z):w.split(M,Z)):[]}var lE=eA(function(w,M,Z){return w+(Z?" ":"")+fy(M)});function xm(w,M,Z){return w=Ds(w),Z=Z==null?0:X(go(Z),0,w.length),M=ql(M),w.slice(Z,Z+M.length)==M}function bm(w,M,Z){var ue=N.templateSettings;Z&&Pr(w,M,Z)&&(M=i),w=Ds(w),M=ly({},M,ue,gf);var Ue=ly({},M.imports,ue.imports,gf),it=js(Ue),Et=va(Ue,it),Ot,sn,ii=0,oi=M.interpolate||mi,Ai="__p += '",Gi=_d((M.escape||mi).source+"|"+oi.source+"|"+(oi===Rt?qe:mi).source+"|"+(M.evaluate||mi).source+"|$","g"),Er="//# sourceURL="+(no.call(M,"sourceURL")?(M.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++jc+"]")+`
`;w.replace(Gi,function(so,is,ls,Bh,ku,ec){return ls||(ls=Bh),Ai+=w.slice(ii,ec).replace(yi,gd),is&&(Ot=!0,Ai+=`' +
__e(`+is+`) +
'`),ku&&(sn=!0,Ai+=`';
`+ku+`;
__p += '`),ls&&(Ai+=`' +
((__t = (`+ls+`)) == null ? '' : __t) +
'`),ii=ec+so.length,so}),Ai+=`';
`;var oo=no.call(M,"variable")&&M.variable;if(!oo)Ai=`with (obj) {
`+Ai+`
}
`;else if(Ke.test(oo))throw new Br(h);Ai=(sn?Ai.replace(bi,""):Ai).replace(fi,"$1").replace(ot,"$1;"),Ai="function("+(oo||"obj")+`) {
`+(oo?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ot?", __e = _.escape":"")+(sn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ai+`return __p
}`;var $o=Dg(function(){return po(it,Er+"return "+Ai).apply(i,Et)});if($o.source=Ai,Ku($o))throw $o;return $o}function A0(w){return Ds(w).toLowerCase()}function cE(w){return Ds(w).toUpperCase()}function jw(w,M,Z){if(w=Ds(w),w&&(Z||M===i))return Nu(w);if(!w||!(M=ql(M)))return w;var ue=Ga(w),Ue=Ga(M),it=sl(ue,Ue),Et=Dh(ue,Ue)+1;return ns(ue,it,Et).join("")}function uE(w,M,Z){if(w=Ds(w),w&&(Z||M===i))return w.slice(0,gh(w)+1);if(!w||!(M=ql(M)))return w;var ue=Ga(w),Ue=Dh(ue,Ga(M))+1;return ns(ue,0,Ue).join("")}function f0(w,M,Z){if(w=Ds(w),w&&(Z||M===i))return w.replace(rr,"");if(!w||!(M=ql(M)))return w;var ue=Ga(w),Ue=sl(ue,Ga(M));return ns(ue,Ue).join("")}function hE(w,M){var Z=Xe,ue=qt;if(Go(M)){var Ue="separator"in M?M.separator:Ue;Z="length"in M?go(M.length):Z,ue="omission"in M?ql(M.omission):ue}w=Ds(w);var it=w.length;if(lc(w)){var Et=Ga(w);it=Et.length}if(Z>=it)return w;var Ot=Z-Ia(ue);if(Ot<1)return ue;var sn=Et?ns(Et,0,Ot).join(""):w.slice(0,Ot);if(Ue===i)return sn+ue;if(Et&&(Ot+=sn.length-Ot),Zu(Ue)){if(w.slice(Ot).search(Ue)){var ii,oi=sn;for(Ue.global||(Ue=_d(Ue.source,Ds(Oe.exec(Ue))+"g")),Ue.lastIndex=0;ii=Ue.exec(oi);)var Ai=ii.index;sn=sn.slice(0,Ai===i?Ot:Ai)}}else if(w.indexOf(ql(Ue),Ot)!=Ot){var Gi=sn.lastIndexOf(Ue);Gi>-1&&(sn=sn.slice(0,Gi))}return sn+ue}function Fg(w){return w=Ds(w),w&&st.test(w)?w.replace(Ie,cc):w}var Ef=eA(function(w,M,Z){return w+(Z?" ":"")+M.toUpperCase()}),fy=Jd("toUpperCase");function p0(w,M,Z){return w=Ds(w),M=Z?i:M,M===i?ll(w)?Ec(w):Zo(w):w.match(M)||[]}var Dg=wo(function(w,M){try{return ps(w,i,M)}catch(Z){return Ku(Z)?Z:new Br(Z)}}),m0=wd(function(w,M){return ra(M,function(Z){Z=Su(Z),R(w,Z,wt(w[Z],w))}),w});function dE(w){var M=w==null?0:w.length,Z=Qr();return w=M?Vo(w,function(ue){if(typeof ue[1]!="function")throw new ha(v);return[Z(ue[0]),ue[1]]}):[],wo(function(ue){for(var Ue=-1;++Ue<M;){var it=w[Ue];if(ps(it[0],this,ue))return ps(it[1],this,ue)}})}function Hw(w){return ce(ee(w,V))}function VA(w){return function(){return w}}function AE(w,M){return w==null||w!==w?M:w}var Sf=V_(),fE=V_(!0);function Uc(w){return w}function pp(w){return qo(typeof w=="function"?w:ee(w,V))}function Ug(w){return Os(ee(w,V))}function zg(w,M){return ko(w,ee(M,V))}var py=wo(function(w,M){return function(Z){return Yn(Z,w,M)}}),pE=wo(function(w,M){return function(Z){return Yn(w,Z,M)}});function g0(w,M,Z){var ue=js(M),Ue=Ht(M,ue);Z==null&&!(Go(M)&&(Ue.length||!ue.length))&&(Z=M,M=w,w=this,Ue=Ht(M,js(M)));var it=!(Go(Z)&&"chain"in Z)||!!Z.chain,Et=gc(w);return ra(Ue,function(Ot){var sn=M[Ot];w[Ot]=sn,Et&&(w.prototype[Ot]=function(){var ii=this.__chain__;if(it||ii){var oi=w(this.__wrapped__),Ai=oi.__actions__=Qa(this.__actions__);return Ai.push({func:sn,args:arguments,thisArg:w}),oi.__chain__=ii,oi}return sn.apply(w,$l([this.value()],arguments))})}),w}function wm(){return Ss._===this&&(Ss._=qc),this}function Cm(){}function mE(w){return w=go(w),wo(function(M){return Aa(M,w)})}var Vw=rA(Vo),Gw=rA(pu),gE=rA(sc);function _0(w){return Xa(w)?Ah(Su(w)):EA(w)}function _E(w){return function(M){return w==null?i:Nt(w,M)}}var Ww=Vp(),yE=Vp(!0);function my(){return[]}function y0(){return!1}function vE(){return{}}function gy(){return""}function _y(){return!0}function yy(w,M){if(w=go(w),w<1||w>mn)return[];var Z=Xn,ue=Ne(w,Xn);M=Qr(M),w-=Xn;for(var Ue=fh(ue,M);++Z<w;)M(Z);return Ue}function xE(w){return wr(w)?Vo(w,Su):qu(w)?[w]:Qa(Yp(Ds(w)))}function v0(w){var M=++wi;return Ds(w)+M}var x0=iA(function(w,M){return w+M},0),If=su("ceil"),bE=iA(function(w,M){return w/M},1),b0=su("floor");function Kw(w){return w&&w.length?rt(w,Uc,Vt):i}function vy(w,M){return w&&w.length?rt(w,Qr(M,2),Vt):i}function wE(w){return Ou(w,Uc)}function CE(w,M){return Ou(w,Qr(M,2))}function BE(w){return w&&w.length?rt(w,Uc,Oa):i}function TE(w,M){return w&&w.length?rt(w,Qr(M,2),Oa):i}var w0=iA(function(w,M){return w*M},1),EE=su("round"),Rg=iA(function(w,M){return w-M},0);function SE(w){return w&&w.length?Hc(w,Uc):0}function IE(w,M){return w&&w.length?Hc(w,Qr(M,2)):0}return N.after=Ge,N.ary=Ze,N.assign=GT,N.assignIn=Cw,N.assignInWith=ly,N.assignWith=WT,N.at=KT,N.before=St,N.bind=wt,N.bindAll=m0,N.bindKey=Yt,N.castArray=Ya,N.chain=wh,N.chunk=nd,N.compact=ep,N.concat=jh,N.cond=dE,N.conforms=Hw,N.constant=VA,N.countBy=Wu,N.create=ZT,N.curry=pn,N.curryRight=Zt,N.debounce=dn,N.defaults=qT,N.defaultsDeep=XT,N.defer=Gn,N.delay=Qn,N.difference=_s,N.differenceBy=em,N.differenceWith=Hh,N.drop=id,N.dropRight=xh,N.dropRightWhile=Iu,N.dropWhile=Al,N.fill=tm,N.filter=ap,N.flatMap=cp,N.flatMapDeep=Cf,N.flatMapDepth=Bg,N.flatten=hA,N.flattenDeep=Vh,N.flattenDepth=Ag,N.flip=Ni,N.flow=Sf,N.flowRight=fE,N.fromPairs=rd,N.functions=JT,N.functionsIn=eE,N.groupBy=Bf,N.initial=pg,N.intersection=q_,N.intersectionBy=Sd,N.intersectionWith=RA,N.invert=Xu,N.invertBy=a0,N.invokeMap=up,N.iteratee=pp,N.keyBy=i0,N.keys=js,N.keysIn=Yu,N.map=A,N.mapKeys=kg,N.mapValues=gm,N.matches=Ug,N.matchesProperty=zg,N.memoize=Vi,N.merge=l0,N.mergeWith=Pg,N.method=py,N.methodOf=pE,N.mixin=g0,N.negate=Li,N.nthArg=mE,N.omit=tE,N.omitBy=Sw,N.once=Ci,N.orderBy=c,N.over=Vw,N.overArgs=_i,N.overEvery=Gw,N.overSome=gE,N.partial=Ei,N.partialRight=Ii,N.partition=m,N.pick=Iw,N.pickBy=Mw,N.property=_0,N.propertyOf=_E,N.pull=X_,N.pullAll=bf,N.pullAllBy=rm,N.pullAllWith=wf,N.pullAt=qv,N.range=Ww,N.rangeRight=yE,N.rearg=ci,N.reject=O,N.remove=mg,N.rest=dr,N.reverse=om,N.sampleSize=Y,N.set=kw,N.setWith=c0,N.shuffle=re,N.slice=Y_,N.sortBy=Le,N.sortedUniq=gg,N.sortedUniqBy=ey,N.split=aE,N.spread=Ji,N.tail=Xv,N.take=ty,N.takeRight=Yv,N.takeRightWhile=ip,N.takeWhile=_g,N.tap=ny,N.throttle=Co,N.thru=sp,N.toArray=_c,N.toPairs=u0,N.toPairsIn=Pw,N.toPath=xE,N.toPlainObject=Dc,N.transform=Fw,N.unary=ys,N.union=Jv,N.unionBy=lm,N.unionWith=cm,N.uniq=OA,N.uniqBy=yg,N.uniqWith=Gh,N.unset=HA,N.unzip=fc,N.unzipWith=rp,N.update=Dw,N.updateWith=Uw,N.values=fp,N.valuesIn=zw,N.without=op,N.words=p0,N.wrap=Qs,N.xor=e0,N.xorBy=t0,N.xorWith=n0,N.zip=vg,N.zipObject=um,N.zipObjectDeep=xg,N.zipWith=Ms,N.entries=u0,N.entriesIn=Pw,N.extend=Cw,N.extendWith=ly,g0(N,N),N.add=x0,N.attempt=Dg,N.camelCase=Ow,N.capitalize=_m,N.ceil=If,N.clamp=nE,N.clone=Mu,N.cloneDeep=Ma,N.cloneDeepWith=Ja,N.cloneWith=Il,N.conformsTo=Ml,N.deburr=h0,N.defaultTo=AE,N.divide=bE,N.endsWith=Nw,N.eq=$s,N.escape=kd,N.escapeRegExp=d0,N.every=Ys,N.find=Cg,N.findIndex=Sl,N.findKey=YT,N.findLast=lp,N.findLastIndex=dg,N.findLastKey=cy,N.floor=b0,N.forEach=Tg,N.forEachRight=AA,N.forIn=mm,N.forInRight=Bw,N.forOwn=uy,N.forOwnRight=o0,N.get=s0,N.gt=lu,N.gte=$a,N.has=Tw,N.hasIn=Lg,N.head=fg,N.identity=Uc,N.includes=QA,N.indexOf=nm,N.inRange=iE,N.invoke=Ew,N.isArguments=pa,N.isArray=wr,N.isArrayBuffer=pc,N.isArrayLike=Fo,N.isArrayLikeObject=Qo,N.isBoolean=Cs,N.isBuffer=Bs,N.isDate=Do,N.isElement=cu,N.isEmpty=Jl,N.isEqual=mc,N.isEqualWith=Ch,N.isError=Ku,N.isFinite=Wh,N.isFunction=gc,N.isInteger=Pc,N.isLength=Fc,N.isMap=$A,N.isMatch=sy,N.isMatchWith=Eg,N.isNaN=Sg,N.isNative=Md,N.isNil=Am,N.isNull=ay,N.isNumber=fm,N.isObject=Go,N.isObjectLike=Ts,N.isPlainObject=Ca,N.isRegExp=Zu,N.isSafeInteger=Ig,N.isSet=hp,N.isString=Ld,N.isSymbol=qu,N.isTypedArray=Tf,N.isUndefined=dp,N.isWeakMap=r0,N.isWeakSet=Kh,N.join=tp,N.kebabCase=ym,N.last=kc,N.lastIndexOf=im,N.lowerCase=vm,N.lowerFirst=Qw,N.lt=Ap,N.lte=Mg,N.max=Kw,N.maxBy=vy,N.mean=wE,N.meanBy=CE,N.min=BE,N.minBy=TE,N.stubArray=my,N.stubFalse=y0,N.stubObject=vE,N.stubString=gy,N.stubTrue=_y,N.multiply=w0,N.nth=np,N.noConflict=wm,N.noop=Cm,N.now=$e,N.pad=hy,N.padEnd=$w,N.padStart=dy,N.parseInt=Ay,N.random=Rw,N.reduce=B,N.reduceRight=D,N.repeat=rE,N.replace=oE,N.result=Lw,N.round=EE,N.runInContext=jt,N.sample=H,N.size=de,N.snakeCase=sE,N.some=be,N.sortedIndex=bh,N.sortedIndexBy=sm,N.sortedIndexOf=J_,N.sortedLastIndex=dA,N.sortedLastIndexBy=am,N.sortedLastIndexOf=Id,N.startCase=lE,N.startsWith=xm,N.subtract=Rg,N.sum=SE,N.sumBy=IE,N.template=bm,N.times=yy,N.toFinite=uo,N.toInteger=go,N.toLength=jA,N.toLower=A0,N.toNumber=Lu,N.toSafeInteger=pm,N.toString=Ds,N.toUpper=cE,N.trim=jw,N.trimEnd=uE,N.trimStart=f0,N.truncate=hE,N.unescape=Fg,N.uniqueId=v0,N.upperCase=Ef,N.upperFirst=fy,N.each=Tg,N.eachRight=AA,N.first=fg,g0(N,function(){var w={};return Tt(N,function(M,Z){no.call(N.prototype,Z)||(w[Z]=M)}),w}(),{chain:!1}),N.VERSION=r,ra(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){N[w].placeholder=N}),ra(["drop","take"],function(w,M){ye.prototype[w]=function(Z){Z=Z===i?1:ge(go(Z),0);var ue=this.__filtered__&&!M?new ye(this):this.clone();return ue.__filtered__?ue.__takeCount__=Ne(Z,ue.__takeCount__):ue.__views__.push({size:Ne(Z,Xn),type:w+(ue.__dir__<0?"Right":"")}),ue},ye.prototype[w+"Right"]=function(Z){return this.reverse()[w](Z).reverse()}}),ra(["filter","map","takeWhile"],function(w,M){var Z=M+1,ue=Z==Kt||Z==Gt;ye.prototype[w]=function(Ue){var it=this.clone();return it.__iteratees__.push({iteratee:Qr(Ue,3),type:Z}),it.__filtered__=it.__filtered__||ue,it}}),ra(["head","last"],function(w,M){var Z="take"+(M?"Right":"");ye.prototype[w]=function(){return this[Z](1).value()[0]}}),ra(["initial","tail"],function(w,M){var Z="drop"+(M?"":"Right");ye.prototype[w]=function(){return this.__filtered__?new ye(this):this[Z](1)}}),ye.prototype.compact=function(){return this.filter(Uc)},ye.prototype.find=function(w){return this.filter(w).head()},ye.prototype.findLast=function(w){return this.reverse().find(w)},ye.prototype.invokeMap=wo(function(w,M){return typeof w=="function"?new ye(this):this.map(function(Z){return Yn(Z,w,M)})}),ye.prototype.reject=function(w){return this.filter(Li(Qr(w)))},ye.prototype.slice=function(w,M){w=go(w);var Z=this;return Z.__filtered__&&(w>0||M<0)?new ye(Z):(w<0?Z=Z.takeRight(-w):w&&(Z=Z.drop(w)),M!==i&&(M=go(M),Z=M<0?Z.dropRight(-M):Z.take(M-w)),Z)},ye.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},ye.prototype.toArray=function(){return this.take(Xn)},Tt(ye.prototype,function(w,M){var Z=/^(?:filter|find|map|reject)|While$/.test(M),ue=/^(?:head|last)$/.test(M),Ue=N[ue?"take"+(M=="last"?"Right":""):M],it=ue||/^find/.test(M);Ue&&(N.prototype[M]=function(){var Et=this.__wrapped__,Ot=ue?[1]:arguments,sn=Et instanceof ye,ii=Ot[0],oi=sn||wr(Et),Ai=function(is){var ls=Ue.apply(N,$l([is],Ot));return ue&&Gi?ls[0]:ls};oi&&Z&&typeof ii=="function"&&ii.length!=1&&(sn=oi=!1);var Gi=this.__chain__,Er=!!this.__actions__.length,oo=it&&!Gi,$o=sn&&!Er;if(!it&&oi){Et=$o?Et:new ye(this);var so=w.apply(Et,Ot);return so.__actions__.push({func:sp,args:[Ai],thisArg:i}),new me(so,Gi)}return oo&&$o?w.apply(this,Ot):(so=this.thru(Ai),oo?ue?so.value()[0]:so.value():so)})}),ra(["pop","push","shift","sort","splice","unshift"],function(w){var M=Cl[w],Z=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",ue=/^(?:pop|shift)$/.test(w);N.prototype[w]=function(){var Ue=arguments;if(ue&&!this.__chain__){var it=this.value();return M.apply(wr(it)?it:[],Ue)}return this[Z](function(Et){return M.apply(wr(Et)?Et:[],Ue)})}}),Tt(ye.prototype,function(w,M){var Z=N[M];if(Z){var ue=Z.name+"";no.call(Uo,ue)||(Uo[ue]=[]),Uo[ue].push({name:M,func:Z})}}),Uo[LA(i,ke).name]=[{name:"wrapper",func:i}],ye.prototype.clone=Re,ye.prototype.reverse=He,ye.prototype.value=gt,N.prototype.at=iy,N.prototype.chain=ry,N.prototype.commit=oy,N.prototype.next=bg,N.prototype.plant=dm,N.prototype.reverse=wg,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=NA,N.prototype.first=N.prototype.head,Za&&(N.prototype[Za]=hm),N},Wa=xa();za?((za.exports=Wa)._=Wa,Is._=Wa):Ss._=Wa}).call(hu)}(D0,D0.exports);var Kr=D0.exports,Ez=/["&<]/;function pS(e){if(e.length===0||Ez.test(e)===!1)return e;for(var t=0,i=0,r="",d="";i<e.length;i++){switch(e.charCodeAt(i)){case 34:d="&quot;";break;case 38:d="&amp;";break;case 60:d="&lt;";break;default:continue}i!==t&&(r+=e.slice(t,i)),r+=d,t=i+1}return i!==t&&(r+=e.slice(t,i)),r}var Sz=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Iz=0,Mz=Array.isArray;function ze(e,t,i,r,d,f){var v,h,s={};for(h in t)h=="ref"?v=t[h]:s[h]=t[h];var U={type:e,props:s,key:i,ref:v,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Iz,__i:-1,__u:0,__source:d,__self:f};if(typeof e=="function"&&(v=e.defaultProps))for(h in v)s[h]===void 0&&(s[h]=v[h]);return Cr.vnode&&Cr.vnode(U),U}function Lz(e){var t=ze(vs,{tpl:e,exprs:[].slice.call(arguments,1)});return t.key=t.__v,t}var mS={},kz=/[A-Z]/g;function Pz(e,t){if(Cr.attr){var i=Cr.attr(e,t);if(typeof i=="string")return i}if(e==="ref"||e==="key")return"";if(e==="style"&&typeof t=="object"){var r="";for(var d in t){var f=t[d];if(f!=null&&f!==""){var v=d[0]=="-"?d:mS[d]||(mS[d]=d.replace(kz,"-$&").toLowerCase()),h=";";typeof f!="number"||v.startsWith("--")||Sz.test(v)||(h="px;"),r=r+v+":"+f+h}}return e+'="'+r+'"'}return t==null||t===!1||typeof t=="function"||typeof t=="object"?"":t===!0?e:e+'="'+pS(t)+'"'}function gS(e){if(e==null||typeof e=="boolean"||typeof e=="function")return null;if(typeof e=="object"){if(e.constructor===void 0)return e;if(Mz(e)){for(var t=0;t<e.length;t++)e[t]=gS(e[t]);return e}}return pS(""+e)}const a1={year:void 0,years:[],workspaces:[],workspacesMap:void 0,user:void 0,allPlans:void 0,regions:[],documentTypes:[],planAccessLevel:"publicVersion",planOverrideId:"noValue"},l1="uninfoPortalState";localStorage.setItem(l1,JSON.stringify({...a1}));const Fz=()=>{localStorage.getItem(l1)||localStorage.setItem(l1,JSON.stringify({...a1}))},Dz=Sh({state:a1,dispatch:()=>null});Fz();const Uz=()=>{const{state:e,dispatch:t}=nl(Dz);return{state:e,dispatch:t}},_S=e=>{const t=localStorage.getItem("uninfoPortalState");return t?JSON.parse(t)[e]:""};function gr(e,t){if(e==null)return{};var i={},r=Object.keys(e),d,f;for(f=0;f<r.length;f++)d=r[f],!(t.indexOf(d)>=0)&&(i[d]=e[d]);return i}function yS(e,t){if(e==null)return{};var i=gr(e,t),r,d;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(d=0;d<f.length;d++)r=f[d],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function zz(e,t){if(Ju(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t||"default");if(Ju(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vS(e){var t=zz(e,"string");return Ju(t)=="symbol"?t:String(t)}function U0(e,t,i){return t=vS(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function xS(e,t){for(var i in t)e[i]=t[i];return e}function c1(e,t){for(var i in e)if(i!=="__source"&&!(i in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function z0(e){this.props=e}function ZA(e,t){function i(d){var f=this.props.ref,v=f==d.ref;return!v&&f&&(f.call?f(null):f.current=null),t?!t(this.props,d)||!v:c1(this.props,d)}function r(d){return this.shouldComponentUpdate=i,Dl(e,d)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(z0.prototype=new pA).isPureReactComponent=!0,z0.prototype.shouldComponentUpdate=function(e,t){return c1(this.props,e)||c1(this.state,t)};var bS=Cr.__b;Cr.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),bS&&bS(e)};var Rz=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Yr(e){function t(i){var r=xS({},i);return delete r.ref,e(r,i.ref||null)}return t.$$typeof=Rz,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var wS=function(e,t){return e==null?null:Ff(Ff(e).map(t))},mA={map:wS,forEach:wS,count:function(e){return e?Ff(e).length:0},only:function(e){var t=Ff(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:Ff},Oz=Cr.__e;Cr.__e=function(e,t,i,r){if(e.then){for(var d,f=t;f=f.__;)if((d=f.__c)&&d.__c)return t.__e==null&&(t.__e=i.__e,t.__k=i.__k),d.__c(e,t)}Oz(e,t,i,r)};var CS=Cr.unmount;function BS(e,t,i){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=xS({},e)).__c!=null&&(e.__c.__P===i&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return BS(r,t,i)})),e}function TS(e,t,i){return e&&i&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return TS(r,t,i)}),e.__c&&e.__c.__P===t&&(e.__e&&i.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=i)),e}function By(){this.__u=0,this.t=null,this.__b=null}function ES(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function SS(e){var t,i,r;function d(f){if(t||(t=e()).then(function(v){i=v.default||v},function(v){r=v}),r)throw r;if(!i)throw t;return Dl(i,f)}return d.displayName="Lazy",d.__f=!0,d}function Gg(){this.u=null,this.o=null}Cr.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),CS&&CS(e)},(By.prototype=new pA).__c=function(e,t){var i=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(i);var d=ES(r.__v),f=!1,v=function(){f||(f=!0,i.__R=null,d?d(h):h())};i.__R=v;var h=function(){if(!--r.__u){if(r.state.__a){var s=r.state.__a;r.__v.__k[0]=TS(s,s.__c.__P,s.__c.__O)}var U;for(r.setState({__a:r.__b=null});U=r.t.pop();)U.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(v,v)},By.prototype.componentWillUnmount=function(){this.t=[]},By.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var i=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=BS(this.__b,i,r.__O=r.__P)}this.__b=null}var d=t.__a&&Dl(vs,null,e.fallback);return d&&(d.__u&=-33),[Dl(vs,null,t.__a?null:e.children),d]};var IS=function(e,t,i){if(++i[1]===i[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(i=e.u;i;){for(;i.length>3;)i.pop()();if(i[1]<i[0])break;e.u=i=i[2]}};function Nz(e){return this.getChildContext=function(){return e.context},e.children}function Qz(e){var t=this,i=e.i;t.componentWillUnmount=function(){Hg(null,t.l),t.l=null,t.i=null},t.i&&t.i!==i&&t.componentWillUnmount(),t.l||(t.i=i,t.l={nodeType:1,parentNode:i,childNodes:[],appendChild:function(r){this.childNodes.push(r),t.i.appendChild(r)},insertBefore:function(r,d){this.childNodes.push(r),t.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.i.removeChild(r)}}),Hg(Dl(Nz,{context:t.context},e.__v),t.l)}function Wg(e,t){var i=Dl(Qz,{__v:e,i:t});return i.containerInfo=t,i}(Gg.prototype=new pA).__a=function(e){var t=this,i=ES(t.__v),r=t.o.get(e);return r[0]++,function(d){var f=function(){t.props.revealOrder?(r.push(d),IS(t,e,r)):d()};i?i(f):f()}},Gg.prototype.render=function(e){this.u=null,this.o=new Map;var t=Ff(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var i=t.length;i--;)this.o.set(t[i],this.u=[1,0,this.u]);return e.children},Gg.prototype.componentDidUpdate=Gg.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,i){IS(e,i,t)})};var MS=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,$z=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,jz=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Hz=/[A-Z0-9]/g,Vz=typeof document<"u",Gz=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function LS(e,t,i){return t.__k==null&&(t.textContent=""),Hg(e,t),typeof i=="function"&&i(),e?e.__c:null}function kS(e,t,i){return iS(e,t),typeof i=="function"&&i(),e?e.__c:null}pA.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(pA.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var PS=Cr.event;function Wz(){}function Kz(){return this.cancelBubble}function Zz(){return this.defaultPrevented}Cr.event=function(e){return PS&&(e=PS(e)),e.persist=Wz,e.isPropagationStopped=Kz,e.isDefaultPrevented=Zz,e.nativeEvent=e};var u1,qz={enumerable:!1,configurable:!0,get:function(){return this.class}},FS=Cr.vnode;Cr.vnode=function(e){typeof e.type=="string"&&function(t){var i=t.props,r=t.type,d={};for(var f in i){var v=i[f];if(!(f==="value"&&"defaultValue"in i&&v==null||Vz&&f==="children"&&r==="noscript"||f==="class"||f==="className")){var h=f.toLowerCase();f==="defaultValue"&&"value"in i&&i.value==null?f="value":f==="download"&&v===!0?v="":h==="ondoubleclick"?f="ondblclick":h!=="onchange"||r!=="input"&&r!=="textarea"||Gz(i.type)?h==="onfocus"?f="onfocusin":h==="onblur"?f="onfocusout":jz.test(f)?f=h:r.indexOf("-")===-1&&$z.test(f)?f=f.replace(Hz,"-$&").toLowerCase():v===null&&(v=void 0):h=f="oninput",h==="oninput"&&d[f=h]&&(f="oninputCapture"),d[f]=v}}r=="select"&&d.multiple&&Array.isArray(d.value)&&(d.value=Ff(i.children).forEach(function(s){s.props.selected=d.value.indexOf(s.props.value)!=-1})),r=="select"&&d.defaultValue!=null&&(d.value=Ff(i.children).forEach(function(s){s.props.selected=d.multiple?d.defaultValue.indexOf(s.props.value)!=-1:d.defaultValue==s.props.value})),i.class&&!i.className?(d.class=i.class,Object.defineProperty(d,"className",qz)):(i.className&&!i.class||i.class&&i.className)&&(d.class=d.className=i.className),t.props=d}(e),e.$$typeof=MS,FS&&FS(e)};var DS=Cr.__r;Cr.__r=function(e){DS&&DS(e),u1=e.__c};var US=Cr.diffed;Cr.diffed=function(e){US&&US(e);var t=e.props,i=e.__e;i!=null&&e.type==="textarea"&&"value"in t&&t.value!==i.value&&(i.value=t.value==null?"":t.value),u1=null};var zS={ReactCurrentDispatcher:{current:{readContext:function(e){return u1.__n[e.__c].props.value}}}},Xz="17.0.2";function RS(e){return Dl.bind(null,e)}function Ha(e){return!!e&&e.$$typeof===MS}function OS(e){return Ha(e)&&e.type===vs}function pl(e){return Ha(e)?wz.apply(null,arguments):e}function NS(e){return!!e.__k&&(Hg(null,e),!0)}function QS(e){return e&&(e.base||e.nodeType===1&&e)||null}var $S=function(e,t){return e(t)},h1=function(e,t){return e(t)},jS=vs;function d1(e){e()}function HS(e){return e}function VS(){return[!1,d1]}var GS=gp,WS=Ha;function KS(e,t){var i=t(),r=ur({h:{__:i,v:t}}),d=r[0].h,f=r[1];return gp(function(){d.__=i,d.v=t,A1(d)&&f({h:d})},[e,i,t]),$i(function(){return A1(d)&&f({h:d}),e(function(){A1(d)&&f({h:d})})},[e]),i}function A1(e){var t,i,r=e.v,d=e.__;try{var f=r();return!((t=d)===(i=f)&&(t!==0||1/t==1/i)||t!=t&&i!=i)}catch{return!0}}var ka={useState:ur,useId:dS,useReducer:i1,useEffect:$i,useLayoutEffect:gp,useInsertionEffect:GS,useTransition:VS,useDeferredValue:HS,useSyncExternalStore:KS,startTransition:d1,useRef:Pi,useImperativeHandle:Ih,useMemo:tl,useCallback:xs,useContext:nl,useDebugValue:hS,version:"17.0.2",Children:mA,render:LS,hydrate:kS,unmountComponentAtNode:NS,createPortal:Wg,createElement:Dl,createContext:Sh,createFactory:RS,cloneElement:pl,createRef:Xw,Fragment:vs,isValidElement:Ha,isElement:WS,isFragment:OS,findDOMNode:QS,Component:pA,PureComponent:z0,memo:ZA,forwardRef:Yr,flushSync:h1,unstable_batchedUpdates:$S,StrictMode:jS,Suspense:By,SuspenseList:Gg,lazy:SS,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:zS};const f1=Object.freeze(Object.defineProperty({__proto__:null,Children:mA,Component:pA,Fragment:vs,PureComponent:z0,StrictMode:jS,Suspense:By,SuspenseList:Gg,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:zS,cloneElement:pl,createContext:Sh,createElement:Dl,createFactory:RS,createPortal:Wg,createRef:Xw,default:ka,findDOMNode:QS,flushSync:h1,forwardRef:Yr,hydrate:kS,isElement:WS,isFragment:OS,isValidElement:Ha,lazy:SS,memo:ZA,render:LS,startTransition:d1,unmountComponentAtNode:NS,unstable_batchedUpdates:$S,useCallback:xs,useContext:nl,useDebugValue:hS,useDeferredValue:HS,useEffect:$i,useErrorBoundary:Cz,useId:dS,useImperativeHandle:Ih,useInsertionEffect:GS,useLayoutEffect:gp,useMemo:tl,useReducer:i1,useRef:Pi,useState:ur,useSyncExternalStore:KS,useTransition:VS,version:Xz},Symbol.toStringTag,{value:"Module"}));var Yz={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const Jz=Sm(Yz);var eR=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function ZS(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},i=e.match(/<\/?([^\s]+?)[/\s>]/);if(i&&(t.name=i[1],(Jz[i[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("-->");return{type:"comment",comment:r!==-1?e.slice(4,r):""}}for(var d=new RegExp(eR),f=null;(f=d.exec(e))!==null;)if(f[0].trim())if(f[1]){var v=f[1].trim(),h=[v,""];v.indexOf("=")>-1&&(h=v.split("=")),t.attrs[h[0]]=h[1],d.lastIndex--}else f[2]&&(t.attrs[f[2]]=f[3].trim().substring(1,f[3].length-1));return t}var tR=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,nR=/^\s*$/,iR=Object.create(null);function qS(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(i){var r=[];for(var d in i)r.push(d+'="'+i[d]+'"');return r.length?" "+r.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(qS,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var rR={parse:function(e,t){t||(t={}),t.components||(t.components=iR);var i,r=[],d=[],f=-1,v=!1;if(e.indexOf("<")!==0){var h=e.indexOf("<");r.push({type:"text",content:h===-1?e:e.substring(0,h)})}return e.replace(tR,function(s,U){if(v){if(s!=="</"+i.name+">")return;v=!1}var $,V=s.charAt(1)!=="/",q=s.startsWith("<!--"),te=U+s.length,he=e.charAt(te);if(q){var Ae=ZS(s);return f<0?(r.push(Ae),r):(($=d[f]).children.push(Ae),r)}if(V&&(f++,(i=ZS(s)).type==="tag"&&t.components[i.name]&&(i.type="component",v=!0),i.voidElement||v||!he||he==="<"||i.children.push({type:"text",content:e.slice(te,e.indexOf("<",te))}),f===0&&r.push(i),($=d[f-1])&&$.children.push(i),d[f]=i),(!V||i.voidElement)&&(f>-1&&(i.voidElement||i.name===s.slice(2,-1))&&(f--,i=f===-1?r:d[f]),!v&&he!=="<"&&he)){$=f===-1?r:d[f].children;var De=e.indexOf("<",te),ke=e.slice(te,De===-1?void 0:De);nR.test(ke)&&(ke=" "),(De>-1&&f+$.length>=0||ke!==" ")&&$.push({type:"text",content:ke})}}),r},stringify:function(e){return e.reduce(function(t,i){return t+qS("",i)},"")}};function qA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XS(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vS(r.key),r)}}function Fd(e,t,i){return t&&XS(e.prototype,t),i&&XS(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var oR=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,sR={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},aR=function(t){return sR[t]},lR=function(t){return t.replace(oR,aR)};function YS(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,r)}return i}function JS(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?YS(Object(i),!0).forEach(function(r){U0(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):YS(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var p1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:lR},eI,m1=Sh();function cR(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};p1=JS(JS({},p1),e)}function tI(){return p1}var uR=function(){function e(){qA(this,e),this.usedNamespaces={}}return Fd(e,[{key:"addUsedNamespaces",value:function(i){var r=this;i.forEach(function(d){r.usedNamespaces[d]||(r.usedNamespaces[d]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function hR(e){eI=e}function nI(){return eI}var dR={type:"3rdParty",init:function(t){cR(t.options.react),hR(t)}};function R0(){if(console&&console.warn){for(var e,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];typeof i[0]=="string"&&(i[0]="react-i18next:: ".concat(i[0])),(e=console).warn.apply(e,i)}}var iI={};function O0(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];typeof t[0]=="string"&&iI[t[0]]||(typeof t[0]=="string"&&(iI[t[0]]=new Date),R0.apply(void 0,t))}function rI(e,t,i){e.loadNamespaces(t,function(){if(e.isInitialized)i();else{var r=function d(){setTimeout(function(){e.off("initialized",d)},0),i()};e.on("initialized",r)}})}function AR(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=t.languages[0],d=t.options?t.options.fallbackLng:!1,f=t.languages[t.languages.length-1];if(r.toLowerCase()==="cimode")return!0;var v=function(s,U){var $=t.services.backendConnector.state["".concat(s,"|").concat(U)];return $===-1||$===2};return i.bindI18n&&i.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!v(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(r,e)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||v(r,e)&&(!d||v(f,e)))}function fR(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t.languages||!t.languages.length)return O0("i18n.languages were undefined or empty",t.languages),!0;var r=t.options.ignoreJSONStructure!==void 0;return r?t.hasLoadedNamespace(e,{precheck:function(f,v){if(i.bindI18n&&i.bindI18n.indexOf("languageChanging")>-1&&f.services.backendConnector.backend&&f.isLanguageChangingTo&&!v(f.isLanguageChangingTo,e))return!1}}):AR(e,t,i)}var pR=["format"],mR=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function oI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,r)}return i}function Oc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?oI(Object(i),!0).forEach(function(r){U0(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oI(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function g1(e,t){if(!e)return!1;var i=e.props?e.props.children:e.children;return t?i.length>0:!!i}function _1(e){return e?e.props?e.props.children:e.children:[]}function gR(e){return Object.prototype.toString.call(e)!=="[object Array]"?!1:e.every(function(t){return Ha(t)})}function Ty(e){return Array.isArray(e)?e:[e]}function _R(e,t){var i=Oc({},t);return i.props=Object.assign(e.props,t.props),i}function sI(e,t){if(!e)return"";var i="",r=Ty(e),d=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return r.forEach(function(f,v){if(typeof f=="string")i+="".concat(f);else if(Ha(f)){var h=Object.keys(f.props).length,s=d.indexOf(f.type)>-1,U=f.props.children;if(!U&&s&&h===0)i+="<".concat(f.type,"/>");else if(!U&&(!s||h!==0))i+="<".concat(v,"></").concat(v,">");else if(f.props.i18nIsDynamicList)i+="<".concat(v,"></").concat(v,">");else if(s&&h===1&&typeof U=="string")i+="<".concat(f.type,">").concat(U,"</").concat(f.type,">");else{var $=sI(U,t);i+="<".concat(v,">").concat($,"</").concat(v,">")}}else if(f===null)R0("Trans: the passed in value is invalid - seems you passed in a null child.");else if(Ju(f)==="object"){var V=f.format,q=yS(f,pR),te=Object.keys(q);if(te.length===1){var he=V?"".concat(te[0],", ").concat(V):te[0];i+="{{".concat(he,"}}")}else R0("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",f)}else R0("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",f)}),i}function yR(e,t,i,r,d,f){if(t==="")return[];var v=r.transKeepBasicHtmlNodesFor||[],h=t&&new RegExp(v.join("|")).test(t);if(!e&&!h)return[t];var s={};function U(De){var ke=Ty(De);ke.forEach(function(xe){typeof xe!="string"&&(g1(xe)?U(_1(xe)):Ju(xe)==="object"&&!Ha(xe)&&Object.assign(s,xe))})}U(e);var $=rR.parse("<0>".concat(t,"</0>")),V=Oc(Oc({},s),d);function q(De,ke,xe){var Te=_1(De),Ee=he(Te,ke.children,xe);return gR(Te)&&Ee.length===0?Te:Ee}function te(De,ke,xe,Te,Ee){De.dummy&&(De.children=ke),xe.push(pl(De,Oc(Oc({},De.props),{},{key:Te}),Ee?void 0:ke))}function he(De,ke,xe){var Te=Ty(De),Ee=Ty(ke);return Ee.reduce(function(Fe,Se,nt){var xt=Se.children&&Se.children[0]&&Se.children[0].content&&i.services.interpolator.interpolate(Se.children[0].content,V,i.language);if(Se.type==="tag"){var Bt=Te[parseInt(Se.name,10)];!Bt&&xe.length===1&&xe[0][Se.name]&&(Bt=xe[0][Se.name]),Bt||(Bt={});var Xe=Object.keys(Se.attrs).length!==0?_R({props:Se.attrs},Bt):Bt,qt=Ha(Xe),rn=qt&&g1(Se,!0)&&!Se.voidElement,Ut=h&&Ju(Xe)==="object"&&Xe.dummy&&!qt,Kt=Ju(e)==="object"&&e!==null&&Object.hasOwnProperty.call(e,Se.name);if(typeof Xe=="string"){var On=i.services.interpolator.interpolate(Xe,V,i.language);Fe.push(On)}else if(g1(Xe)||rn){var Gt=q(Xe,Se,xe);te(Xe,Gt,Fe,nt)}else if(Ut){var Rn=he(Te,Se.children,xe);Fe.push(pl(Xe,Oc(Oc({},Xe.props),{},{key:nt}),Rn))}else if(Number.isNaN(parseFloat(Se.name)))if(Kt){var mn=q(Xe,Se,xe);te(Xe,mn,Fe,nt,Se.voidElement)}else if(r.transSupportBasicHtmlNodes&&v.indexOf(Se.name)>-1)if(Se.voidElement)Fe.push(Dl(Se.name,{key:"".concat(Se.name,"-").concat(nt)}));else{var Cn=he(Te,Se.children,xe);Fe.push(Dl(Se.name,{key:"".concat(Se.name,"-").concat(nt)},Cn))}else if(Se.voidElement)Fe.push("<".concat(Se.name," />"));else{var Qt=he(Te,Se.children,xe);Fe.push("<".concat(Se.name,">").concat(Qt,"</").concat(Se.name,">"))}else if(Ju(Xe)==="object"&&!qt){var Xn=Se.children[0]?xt:null;Xn&&Fe.push(Xn)}else Se.children.length===1&&xt?Fe.push(pl(Xe,Oc(Oc({},Xe.props),{},{key:nt}),xt)):Fe.push(pl(Xe,Oc(Oc({},Xe.props),{},{key:nt})))}else if(Se.type==="text"){var Wn=r.transWrapTextNodes,Bi=f?r.unescape(i.services.interpolator.interpolate(Se.content,V,i.language)):i.services.interpolator.interpolate(Se.content,V,i.language);Wn?Fe.push(Dl(Wn,{key:"".concat(Se.name,"-").concat(nt)},Bi)):Fe.push(Bi)}return Fe},[])}var Ae=he([{dummy:!0,children:e||[]}],$,Ty(e||[]));return _1(Ae[0])}function aI(e){var t=e.children,i=e.count,r=e.parent,d=e.i18nKey,f=e.context,v=e.tOptions,h=v===void 0?{}:v,s=e.values,U=e.defaults,$=e.components,V=e.ns,q=e.i18n,te=e.t,he=e.shouldUnescape,Ae=yS(e,mR),De=nl(m1)||{},ke=De.i18n,xe=De.defaultNS,Te=q||ke||nI();if(!Te)return O0("You will need to pass in an i18next instance by using i18nextReactModule"),t;var Ee=te||Te.t.bind(Te)||function(On){return On};f&&(h.context=f);var Fe=Oc(Oc({},tI()),Te.options&&Te.options.react),Se=V||Ee.ns||xe||Te.options&&Te.options.defaultNS;Se=typeof Se=="string"?[Se]:Se||["translation"];var nt=U||sI(t,Fe)||Fe.transEmptyNodeValue||d,xt=Fe.hashTransKey,Bt=d||(xt?xt(nt):nt),Xe=s?h.interpolation:{interpolation:Oc(Oc({},h.interpolation),{},{prefix:"#$?",suffix:"?$#"})},qt=Oc(Oc(Oc(Oc({},h),{},{count:i},s),Xe),{},{defaultValue:nt,ns:Se}),rn=Bt?Ee(Bt,qt):nt,Ut=yR($||t,rn,Te,Fe,qt,he),Kt=r!==void 0?r:Fe.defaultTransParent;return Kt?Dl(Kt,Ae,Ut):Ut}function vR(e){if(Array.isArray(e))return e}function xR(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var r,d,f,v,h=[],s=!0,U=!1;try{if(f=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;s=!1}else for(;!(s=(r=f.call(i)).done)&&(h.push(r.value),h.length!==t);s=!0);}catch($){U=!0,d=$}finally{try{if(!s&&i.return!=null&&(v=i.return(),Object(v)!==v))return}finally{if(U)throw d}}return h}}function y1(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function lI(e,t){if(e){if(typeof e=="string")return y1(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return y1(e,t)}}function bR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wR(e,t){return vR(e)||xR(e,t)||lI(e,t)||bR()}function cI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,r)}return i}function v1(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?cI(Object(i),!0).forEach(function(r){U0(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):cI(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var CR=function(t,i){var r=Pi();return $i(function(){r.current=i?r.current:t},[t,i]),r.current};function ad(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.i18n,r=nl(m1)||{},d=r.i18n,f=r.defaultNS,v=i||d||nI();if(v&&!v.reportNamespaces&&(v.reportNamespaces=new uR),!v){O0("You will need to pass in an i18next instance by using initReactI18next");var h=function(Bt){return Array.isArray(Bt)?Bt[Bt.length-1]:Bt},s=[h,{},!1];return s.t=h,s.i18n={},s.ready=!1,s}v.options.react&&v.options.react.wait!==void 0&&O0("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var U=v1(v1(v1({},tI()),v.options.react),t),$=U.useSuspense,V=U.keyPrefix,q=e||f||v.options&&v.options.defaultNS;q=typeof q=="string"?[q]:q||["translation"],v.reportNamespaces.addUsedNamespaces&&v.reportNamespaces.addUsedNamespaces(q);var te=(v.isInitialized||v.initializedStoreOnce)&&q.every(function(xt){return fR(xt,v,U)});function he(){return v.getFixedT(null,U.nsMode==="fallback"?q:q[0],V)}var Ae=ur(he),De=wR(Ae,2),ke=De[0],xe=De[1],Te=q.join(),Ee=CR(Te),Fe=Pi(!0);$i(function(){var xt=U.bindI18n,Bt=U.bindI18nStore;Fe.current=!0,!te&&!$&&rI(v,q,function(){Fe.current&&xe(he)}),te&&Ee&&Ee!==Te&&Fe.current&&xe(he);function Xe(){Fe.current&&xe(he)}return xt&&v&&v.on(xt,Xe),Bt&&v&&v.store.on(Bt,Xe),function(){Fe.current=!1,xt&&v&&xt.split(" ").forEach(function(qt){return v.off(qt,Xe)}),Bt&&v&&Bt.split(" ").forEach(function(qt){return v.store.off(qt,Xe)})}},[v,Te]);var Se=Pi(!0);$i(function(){Fe.current&&!Se.current&&xe(he),Se.current=!1},[v,V]);var nt=[ke,v,te];if(nt.t=ke,nt.i18n=v,nt.ready=te,te||!te&&!$)return nt;throw new Promise(function(xt){rI(v,q,function(){xt()})})}function BR(e){var t=e.i18n,i=e.defaultNS,r=e.children,d=tl(function(){return{i18n:t,defaultNS:i}},[t,i]);return Dl(m1.Provider,{value:d},r)}const x1="MAPBOXGL",N0="MAPLIBREGL",uI="LEAFLET";function b1(e,t){const i=Pi(t);$i(function(){t!==i.current&&e.attributionControl!=null&&(i.current!=null&&e.attributionControl.removeAttribution(i.current),t!=null&&e.attributionControl.addAttribution(t)),i.current=t},[e,t])}function TR(e,t,i){t.center!==i.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==i.radius&&e.setRadius(t.radius)}const hI=1,w1=Sh(null),C1=w1.Provider;function Kg(){const e=nl(w1);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function B1(e){function t(i,r){const{instance:d,context:f}=e(i).current;return Ih(r,()=>d),i.children==null?null:ka.createElement(C1,{value:f},i.children)}return Yr(t)}function dI(e){function t(i,r){const[d,f]=ur(!1),{instance:v}=e(i,f).current;Ih(r,()=>v),$i(function(){d&&v.update()},[v,d,i.children]);const h=v._contentNode;return h?Wg(i.children,h):null}return Yr(t)}function T1(e){function t(i,r){const{instance:d}=e(i).current;return Ih(r,()=>d),null}return Yr(t)}function AI(e){return function(i){const r=Kg(),d=e(i,r),{instance:f}=d.current,v=Pi(i.position),{position:h}=i;return $i(function(){return f.addTo(r.map),function(){f.remove()}},[r.map,f]),$i(function(){h!=null&&h!==v.current&&(f.setPosition(h),v.current=h)},[f,h]),d}}function Q0(e,t){const i=Pi();$i(function(){return t!=null&&e.instance.on(t),i.current=t,function(){i.current!=null&&e.instance.off(i.current),i.current=null}},[e,t])}function Ey(e,t){const i=e.pane??t.pane;return i?{...e,pane:i}:e}function fI(e,t){return function(r,d){const f=Kg(),v=e(Ey(r,f),f);return b1(f.map,r.attribution),Q0(v.current,r.eventHandlers),t(v.current,f,r,d),v}}var E1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(i,r){r(t)})(hu,function(i){var r="1.9.4";function d(_){var E,G,ne,ge;for(G=1,ne=arguments.length;G<ne;G++){ge=arguments[G];for(E in ge)_[E]=ge[E]}return _}var f=Object.create||function(){function _(){}return function(E){return _.prototype=E,new _}}();function v(_,E){var G=Array.prototype.slice;if(_.bind)return _.bind.apply(_,G.call(arguments,1));var ne=G.call(arguments,2);return function(){return _.apply(E,ne.length?ne.concat(G.call(arguments)):arguments)}}var h=0;function s(_){return"_leaflet_id"in _||(_._leaflet_id=++h),_._leaflet_id}function U(_,E,G){var ne,ge,Ne,at;return at=function(){ne=!1,ge&&(Ne.apply(G,ge),ge=!1)},Ne=function(){ne?ge=arguments:(_.apply(G,arguments),setTimeout(at,E),ne=!0)},Ne}function $(_,E,G){var ne=E[1],ge=E[0],Ne=ne-ge;return _===ne&&G?_:((_-ge)%Ne+Ne)%Ne+ge}function V(){return!1}function q(_,E){if(E===!1)return _;var G=Math.pow(10,E===void 0?6:E);return Math.round(_*G)/G}function te(_){return _.trim?_.trim():_.replace(/^\s+|\s+$/g,"")}function he(_){return te(_).split(/\s+/)}function Ae(_,E){Object.prototype.hasOwnProperty.call(_,"options")||(_.options=_.options?f(_.options):{});for(var G in E)_.options[G]=E[G];return _.options}function De(_,E,G){var ne=[];for(var ge in _)ne.push(encodeURIComponent(G?ge.toUpperCase():ge)+"="+encodeURIComponent(_[ge]));return(!E||E.indexOf("?")===-1?"?":"&")+ne.join("&")}var ke=/\{ *([\w_ -]+) *\}/g;function xe(_,E){return _.replace(ke,function(G,ne){var ge=E[ne];if(ge===void 0)throw new Error("No value provided for variable "+G);return typeof ge=="function"&&(ge=ge(E)),ge})}var Te=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"};function Ee(_,E){for(var G=0;G<_.length;G++)if(_[G]===E)return G;return-1}var Fe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Se(_){return window["webkit"+_]||window["moz"+_]||window["ms"+_]}var nt=0;function xt(_){var E=+new Date,G=Math.max(0,16-(E-nt));return nt=E+G,window.setTimeout(_,G)}var Bt=window.requestAnimationFrame||Se("RequestAnimationFrame")||xt,Xe=window.cancelAnimationFrame||Se("CancelAnimationFrame")||Se("CancelRequestAnimationFrame")||function(_){window.clearTimeout(_)};function qt(_,E,G){if(G&&Bt===xt)_.call(E);else return Bt.call(window,v(_,E))}function rn(_){_&&Xe.call(window,_)}var Ut={__proto__:null,extend:d,create:f,bind:v,get lastId(){return h},stamp:s,throttle:U,wrapNum:$,falseFn:V,formatNum:q,trim:te,splitWords:he,setOptions:Ae,getParamString:De,template:xe,isArray:Te,indexOf:Ee,emptyImageUrl:Fe,requestFn:Bt,cancelFn:Xe,requestAnimFrame:qt,cancelAnimFrame:rn};function Kt(){}Kt.extend=function(_){var E=function(){Ae(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},G=E.__super__=this.prototype,ne=f(G);ne.constructor=E,E.prototype=ne;for(var ge in this)Object.prototype.hasOwnProperty.call(this,ge)&&ge!=="prototype"&&ge!=="__super__"&&(E[ge]=this[ge]);return _.statics&&d(E,_.statics),_.includes&&(On(_.includes),d.apply(null,[ne].concat(_.includes))),d(ne,_),delete ne.statics,delete ne.includes,ne.options&&(ne.options=G.options?f(G.options):{},d(ne.options,_.options)),ne._initHooks=[],ne.callInitHooks=function(){if(!this._initHooksCalled){G.callInitHooks&&G.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ne=0,at=ne._initHooks.length;Ne<at;Ne++)ne._initHooks[Ne].call(this)}},E},Kt.include=function(_){var E=this.prototype.options;return d(this.prototype,_),_.options&&(this.prototype.options=E,this.mergeOptions(_.options)),this},Kt.mergeOptions=function(_){return d(this.prototype.options,_),this},Kt.addInitHook=function(_){var E=Array.prototype.slice.call(arguments,1),G=typeof _=="function"?_:function(){this[_].apply(this,E)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(G),this};function On(_){if(!(typeof L>"u"||!L||!L.Mixin)){_=Te(_)?_:[_];for(var E=0;E<_.length;E++)_[E]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Gt={on:function(_,E,G){if(typeof _=="object")for(var ne in _)this._on(ne,_[ne],E);else{_=he(_);for(var ge=0,Ne=_.length;ge<Ne;ge++)this._on(_[ge],E,G)}return this},off:function(_,E,G){if(!arguments.length)delete this._events;else if(typeof _=="object")for(var ne in _)this._off(ne,_[ne],E);else{_=he(_);for(var ge=arguments.length===1,Ne=0,at=_.length;Ne<at;Ne++)ge?this._off(_[Ne]):this._off(_[Ne],E,G)}return this},_on:function(_,E,G,ne){if(typeof E!="function"){console.warn("wrong listener type: "+typeof E);return}if(this._listens(_,E,G)===!1){G===this&&(G=void 0);var ge={fn:E,ctx:G};ne&&(ge.once=!0),this._events=this._events||{},this._events[_]=this._events[_]||[],this._events[_].push(ge)}},_off:function(_,E,G){var ne,ge,Ne;if(this._events&&(ne=this._events[_],!!ne)){if(arguments.length===1){if(this._firingCount)for(ge=0,Ne=ne.length;ge<Ne;ge++)ne[ge].fn=V;delete this._events[_];return}if(typeof E!="function"){console.warn("wrong listener type: "+typeof E);return}var at=this._listens(_,E,G);if(at!==!1){var Dt=ne[at];this._firingCount&&(Dt.fn=V,this._events[_]=ne=ne.slice()),ne.splice(at,1)}}},fire:function(_,E,G){if(!this.listens(_,G))return this;var ne=d({},E,{type:_,target:this,sourceTarget:E&&E.sourceTarget||this});if(this._events){var ge=this._events[_];if(ge){this._firingCount=this._firingCount+1||1;for(var Ne=0,at=ge.length;Ne<at;Ne++){var Dt=ge[Ne],_n=Dt.fn;Dt.once&&this.off(_,_n,Dt.ctx),_n.call(Dt.ctx||this,ne)}this._firingCount--}}return G&&this._propagateEvent(ne),this},listens:function(_,E,G,ne){typeof _!="string"&&console.warn('"string" type argument expected');var ge=E;typeof E!="function"&&(ne=!!E,ge=void 0,G=void 0);var Ne=this._events&&this._events[_];if(Ne&&Ne.length&&this._listens(_,ge,G)!==!1)return!0;if(ne){for(var at in this._eventParents)if(this._eventParents[at].listens(_,E,G,ne))return!0}return!1},_listens:function(_,E,G){if(!this._events)return!1;var ne=this._events[_]||[];if(!E)return!!ne.length;G===this&&(G=void 0);for(var ge=0,Ne=ne.length;ge<Ne;ge++)if(ne[ge].fn===E&&ne[ge].ctx===G)return ge;return!1},once:function(_,E,G){if(typeof _=="object")for(var ne in _)this._on(ne,_[ne],E,!0);else{_=he(_);for(var ge=0,Ne=_.length;ge<Ne;ge++)this._on(_[ge],E,G,!0)}return this},addEventParent:function(_){return this._eventParents=this._eventParents||{},this._eventParents[s(_)]=_,this},removeEventParent:function(_){return this._eventParents&&delete this._eventParents[s(_)],this},_propagateEvent:function(_){for(var E in this._eventParents)this._eventParents[E].fire(_.type,d({layer:_.target,propagatedFrom:_.target},_),!0)}};Gt.addEventListener=Gt.on,Gt.removeEventListener=Gt.clearAllEventListeners=Gt.off,Gt.addOneTimeEventListener=Gt.once,Gt.fireEvent=Gt.fire,Gt.hasEventListeners=Gt.listens;var Rn=Kt.extend(Gt);function mn(_,E,G){this.x=G?Math.round(_):_,this.y=G?Math.round(E):E}var Cn=Math.trunc||function(_){return _>0?Math.floor(_):Math.ceil(_)};mn.prototype={clone:function(){return new mn(this.x,this.y)},add:function(_){return this.clone()._add(Qt(_))},_add:function(_){return this.x+=_.x,this.y+=_.y,this},subtract:function(_){return this.clone()._subtract(Qt(_))},_subtract:function(_){return this.x-=_.x,this.y-=_.y,this},divideBy:function(_){return this.clone()._divideBy(_)},_divideBy:function(_){return this.x/=_,this.y/=_,this},multiplyBy:function(_){return this.clone()._multiplyBy(_)},_multiplyBy:function(_){return this.x*=_,this.y*=_,this},scaleBy:function(_){return new mn(this.x*_.x,this.y*_.y)},unscaleBy:function(_){return new mn(this.x/_.x,this.y/_.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Cn(this.x),this.y=Cn(this.y),this},distanceTo:function(_){_=Qt(_);var E=_.x-this.x,G=_.y-this.y;return Math.sqrt(E*E+G*G)},equals:function(_){return _=Qt(_),_.x===this.x&&_.y===this.y},contains:function(_){return _=Qt(_),Math.abs(_.x)<=Math.abs(this.x)&&Math.abs(_.y)<=Math.abs(this.y)},toString:function(){return"Point("+q(this.x)+", "+q(this.y)+")"}};function Qt(_,E,G){return _ instanceof mn?_:Te(_)?new mn(_[0],_[1]):_==null?_:typeof _=="object"&&"x"in _&&"y"in _?new mn(_.x,_.y):new mn(_,E,G)}function Xn(_,E){if(_)for(var G=E?[_,E]:_,ne=0,ge=G.length;ne<ge;ne++)this.extend(G[ne])}Xn.prototype={extend:function(_){var E,G;if(!_)return this;if(_ instanceof mn||typeof _[0]=="number"||"x"in _)E=G=Qt(_);else if(_=Wn(_),E=_.min,G=_.max,!E||!G)return this;return!this.min&&!this.max?(this.min=E.clone(),this.max=G.clone()):(this.min.x=Math.min(E.x,this.min.x),this.max.x=Math.max(G.x,this.max.x),this.min.y=Math.min(E.y,this.min.y),this.max.y=Math.max(G.y,this.max.y)),this},getCenter:function(_){return Qt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,_)},getBottomLeft:function(){return Qt(this.min.x,this.max.y)},getTopRight:function(){return Qt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(_){var E,G;return typeof _[0]=="number"||_ instanceof mn?_=Qt(_):_=Wn(_),_ instanceof Xn?(E=_.min,G=_.max):E=G=_,E.x>=this.min.x&&G.x<=this.max.x&&E.y>=this.min.y&&G.y<=this.max.y},intersects:function(_){_=Wn(_);var E=this.min,G=this.max,ne=_.min,ge=_.max,Ne=ge.x>=E.x&&ne.x<=G.x,at=ge.y>=E.y&&ne.y<=G.y;return Ne&&at},overlaps:function(_){_=Wn(_);var E=this.min,G=this.max,ne=_.min,ge=_.max,Ne=ge.x>E.x&&ne.x<G.x,at=ge.y>E.y&&ne.y<G.y;return Ne&&at},isValid:function(){return!!(this.min&&this.max)},pad:function(_){var E=this.min,G=this.max,ne=Math.abs(E.x-G.x)*_,ge=Math.abs(E.y-G.y)*_;return Wn(Qt(E.x-ne,E.y-ge),Qt(G.x+ne,G.y+ge))},equals:function(_){return _?(_=Wn(_),this.min.equals(_.getTopLeft())&&this.max.equals(_.getBottomRight())):!1}};function Wn(_,E){return!_||_ instanceof Xn?_:new Xn(_,E)}function Bi(_,E){if(_)for(var G=E?[_,E]:_,ne=0,ge=G.length;ne<ge;ne++)this.extend(G[ne])}Bi.prototype={extend:function(_){var E=this._southWest,G=this._northEast,ne,ge;if(_ instanceof Hn)ne=_,ge=_;else if(_ instanceof Bi){if(ne=_._southWest,ge=_._northEast,!ne||!ge)return this}else return _?this.extend(ei(_)||Bn(_)):this;return!E&&!G?(this._southWest=new Hn(ne.lat,ne.lng),this._northEast=new Hn(ge.lat,ge.lng)):(E.lat=Math.min(ne.lat,E.lat),E.lng=Math.min(ne.lng,E.lng),G.lat=Math.max(ge.lat,G.lat),G.lng=Math.max(ge.lng,G.lng)),this},pad:function(_){var E=this._southWest,G=this._northEast,ne=Math.abs(E.lat-G.lat)*_,ge=Math.abs(E.lng-G.lng)*_;return new Bi(new Hn(E.lat-ne,E.lng-ge),new Hn(G.lat+ne,G.lng+ge))},getCenter:function(){return new Hn((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Hn(this.getNorth(),this.getWest())},getSouthEast:function(){return new Hn(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(_){typeof _[0]=="number"||_ instanceof Hn||"lat"in _?_=ei(_):_=Bn(_);var E=this._southWest,G=this._northEast,ne,ge;return _ instanceof Bi?(ne=_.getSouthWest(),ge=_.getNorthEast()):ne=ge=_,ne.lat>=E.lat&&ge.lat<=G.lat&&ne.lng>=E.lng&&ge.lng<=G.lng},intersects:function(_){_=Bn(_);var E=this._southWest,G=this._northEast,ne=_.getSouthWest(),ge=_.getNorthEast(),Ne=ge.lat>=E.lat&&ne.lat<=G.lat,at=ge.lng>=E.lng&&ne.lng<=G.lng;return Ne&&at},overlaps:function(_){_=Bn(_);var E=this._southWest,G=this._northEast,ne=_.getSouthWest(),ge=_.getNorthEast(),Ne=ge.lat>E.lat&&ne.lat<G.lat,at=ge.lng>E.lng&&ne.lng<G.lng;return Ne&&at},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(_,E){return _?(_=Bn(_),this._southWest.equals(_.getSouthWest(),E)&&this._northEast.equals(_.getNorthEast(),E)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Bn(_,E){return _ instanceof Bi?_:new Bi(_,E)}function Hn(_,E,G){if(isNaN(_)||isNaN(E))throw new Error("Invalid LatLng object: ("+_+", "+E+")");this.lat=+_,this.lng=+E,G!==void 0&&(this.alt=+G)}Hn.prototype={equals:function(_,E){if(!_)return!1;_=ei(_);var G=Math.max(Math.abs(this.lat-_.lat),Math.abs(this.lng-_.lng));return G<=(E===void 0?1e-9:E)},toString:function(_){return"LatLng("+q(this.lat,_)+", "+q(this.lng,_)+")"},distanceTo:function(_){return ri.distance(this,ei(_))},wrap:function(){return ri.wrapLatLng(this)},toBounds:function(_){var E=180*_/40075017,G=E/Math.cos(Math.PI/180*this.lat);return Bn([this.lat-E,this.lng-G],[this.lat+E,this.lng+G])},clone:function(){return new Hn(this.lat,this.lng,this.alt)}};function ei(_,E,G){return _ instanceof Hn?_:Te(_)&&typeof _[0]!="object"?_.length===3?new Hn(_[0],_[1],_[2]):_.length===2?new Hn(_[0],_[1]):null:_==null?_:typeof _=="object"&&"lat"in _?new Hn(_.lat,"lng"in _?_.lng:_.lon,_.alt):E===void 0?null:new Hn(_,E,G)}var tr={latLngToPoint:function(_,E){var G=this.projection.project(_),ne=this.scale(E);return this.transformation._transform(G,ne)},pointToLatLng:function(_,E){var G=this.scale(E),ne=this.transformation.untransform(_,G);return this.projection.unproject(ne)},project:function(_){return this.projection.project(_)},unproject:function(_){return this.projection.unproject(_)},scale:function(_){return 256*Math.pow(2,_)},zoom:function(_){return Math.log(_/256)/Math.LN2},getProjectedBounds:function(_){if(this.infinite)return null;var E=this.projection.bounds,G=this.scale(_),ne=this.transformation.transform(E.min,G),ge=this.transformation.transform(E.max,G);return new Xn(ne,ge)},infinite:!1,wrapLatLng:function(_){var E=this.wrapLng?$(_.lng,this.wrapLng,!0):_.lng,G=this.wrapLat?$(_.lat,this.wrapLat,!0):_.lat,ne=_.alt;return new Hn(G,E,ne)},wrapLatLngBounds:function(_){var E=_.getCenter(),G=this.wrapLatLng(E),ne=E.lat-G.lat,ge=E.lng-G.lng;if(ne===0&&ge===0)return _;var Ne=_.getSouthWest(),at=_.getNorthEast(),Dt=new Hn(Ne.lat-ne,Ne.lng-ge),_n=new Hn(at.lat-ne,at.lng-ge);return new Bi(Dt,_n)}},ri=d({},tr,{wrapLng:[-180,180],R:6371e3,distance:function(_,E){var G=Math.PI/180,ne=_.lat*G,ge=E.lat*G,Ne=Math.sin((E.lat-_.lat)*G/2),at=Math.sin((E.lng-_.lng)*G/2),Dt=Ne*Ne+Math.cos(ne)*Math.cos(ge)*at*at,_n=2*Math.atan2(Math.sqrt(Dt),Math.sqrt(1-Dt));return this.R*_n}}),zi=6378137,Vr={R:zi,MAX_LATITUDE:85.0511287798,project:function(_){var E=Math.PI/180,G=this.MAX_LATITUDE,ne=Math.max(Math.min(G,_.lat),-G),ge=Math.sin(ne*E);return new mn(this.R*_.lng*E,this.R*Math.log((1+ge)/(1-ge))/2)},unproject:function(_){var E=180/Math.PI;return new Hn((2*Math.atan(Math.exp(_.y/this.R))-Math.PI/2)*E,_.x*E/this.R)},bounds:function(){var _=zi*Math.PI;return new Xn([-_,-_],[_,_])}()};function sr(_,E,G,ne){if(Te(_)){this._a=_[0],this._b=_[1],this._c=_[2],this._d=_[3];return}this._a=_,this._b=E,this._c=G,this._d=ne}sr.prototype={transform:function(_,E){return this._transform(_.clone(),E)},_transform:function(_,E){return E=E||1,_.x=E*(this._a*_.x+this._b),_.y=E*(this._c*_.y+this._d),_},untransform:function(_,E){return E=E||1,new mn((_.x/E-this._b)/this._a,(_.y/E-this._d)/this._c)}};function li(_,E,G,ne){return new sr(_,E,G,ne)}var Qi=d({},ri,{code:"EPSG:3857",projection:Vr,transformation:function(){var _=.5/(Math.PI*Vr.R);return li(_,.5,-_,.5)}()}),Ki=d({},Qi,{code:"EPSG:900913"});function ji(_){return document.createElementNS("http://www.w3.org/2000/svg",_)}function di(_,E){var G="",ne,ge,Ne,at,Dt,_n;for(ne=0,Ne=_.length;ne<Ne;ne++){for(Dt=_[ne],ge=0,at=Dt.length;ge<at;ge++)_n=Dt[ge],G+=(ge?"L":"M")+_n.x+" "+_n.y;G+=E?Pe.svg?"z":"x":""}return G||"M0 0"}var Ir=document.documentElement.style,nr="ActiveXObject"in window,Ri=nr&&!document.addEventListener,hr="msLaunchUri"in navigator&&!("documentMode"in document),ir=Zi("webkit"),Ur=Zi("android"),jr=Zi("android 2")||Zi("android 3"),pr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Zr=Ur&&Zi("Google")&&pr<537&&!("AudioNode"in window),Eo=!!window.opera,Ao=!hr&&Zi("chrome"),$t=Zi("gecko")&&!ir&&!Eo&&!nr,en=!Ao&&Zi("safari"),Fr=Zi("phantom"),So="OTransition"in Ir,er=navigator.platform.indexOf("Win")===0,xi=nr&&"transition"in Ir,Xi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!jr,Un="MozPerspective"in Ir,Oi=!window.L_DISABLE_3D&&(xi||Xi||Un)&&!So&&!Fr,bn=typeof orientation<"u"||Zi("mobile"),bi=bn&&ir,fi=bn&&Xi,ot=!window.PointerEvent&&window.MSPointerEvent,Ie=!!(window.PointerEvent||ot),Ce="ontouchstart"in window||!!window.TouchEvent,st=!window.L_NO_TOUCH&&(Ce||Ie),ft=bn&&Eo,kt=bn&&$t,zt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Rt=function(){var _=!1;try{var E=Object.defineProperty({},"passive",{get:function(){_=!0}});window.addEventListener("testPassiveEventSupport",V,E),window.removeEventListener("testPassiveEventSupport",V,E)}catch{}return _}(),yt=function(){return!!document.createElement("canvas").getContext}(),Xt=!!(document.createElementNS&&ji("svg").createSVGRect),Tn=!!Xt&&function(){var _=document.createElement("div");return _.innerHTML="<svg/>",(_.firstChild&&_.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Fn=!Xt&&function(){try{var _=document.createElement("div");_.innerHTML='<v:shape adj="1"/>';var E=_.firstChild;return E.style.behavior="url(#default#VML)",E&&typeof E.adj=="object"}catch{return!1}}(),zn=navigator.platform.indexOf("Mac")===0,rr=navigator.platform.indexOf("Linux")===0;function Zi(_){return navigator.userAgent.toLowerCase().indexOf(_)>=0}var Pe={ie:nr,ielt9:Ri,edge:hr,webkit:ir,android:Ur,android23:jr,androidStock:Zr,opera:Eo,chrome:Ao,gecko:$t,safari:en,phantom:Fr,opera12:So,win:er,ie3d:xi,webkit3d:Xi,gecko3d:Un,any3d:Oi,mobile:bn,mobileWebkit:bi,mobileWebkit3d:fi,msPointer:ot,pointer:Ie,touch:st,touchNative:Ce,mobileOpera:ft,mobileGecko:kt,retina:zt,passiveEvents:Rt,canvas:yt,svg:Xt,vml:Fn,inlineSvg:Tn,mac:zn,linux:rr},pe=Pe.msPointer?"MSPointerDown":"pointerdown",we=Pe.msPointer?"MSPointerMove":"pointermove",je=Pe.msPointer?"MSPointerUp":"pointerup",Ke=Pe.msPointer?"MSPointerCancel":"pointercancel",_t={touchstart:pe,touchmove:we,touchend:je,touchcancel:Ke},qe={touchstart:cr,touchmove:yi,touchend:yi,touchcancel:yi},Oe={},Je=!1;function mt(_,E,G){return E==="touchstart"&&mi(),qe[E]?(G=qe[E].bind(this,G),_.addEventListener(_t[E],G,!1),G):(console.warn("wrong event specified:",E),V)}function Jt(_,E,G){if(!_t[E]){console.warn("wrong event specified:",E);return}_.removeEventListener(_t[E],G,!1)}function Sn(_){Oe[_.pointerId]=_}function an(_){Oe[_.pointerId]&&(Oe[_.pointerId]=_)}function gn(_){delete Oe[_.pointerId]}function mi(){Je||(document.addEventListener(pe,Sn,!0),document.addEventListener(we,an,!0),document.addEventListener(je,gn,!0),document.addEventListener(Ke,gn,!0),Je=!0)}function yi(_,E){if(E.pointerType!==(E.MSPOINTER_TYPE_MOUSE||"mouse")){E.touches=[];for(var G in Oe)E.touches.push(Oe[G]);E.changedTouches=[E],_(E)}}function cr(_,E){E.MSPOINTER_TYPE_TOUCH&&E.pointerType===E.MSPOINTER_TYPE_TOUCH&&Rr(E),yi(_,E)}function xr(_){var E={},G,ne;for(ne in _)G=_[ne],E[ne]=G&&G.bind?G.bind(_):G;return _=E,E.type="dblclick",E.detail=2,E.isTrusted=!1,E._simulated=!0,E}var Gr=200;function mr(_,E){_.addEventListener("dblclick",E);var G=0,ne;function ge(Ne){if(Ne.detail!==1){ne=Ne.detail;return}if(!(Ne.pointerType==="mouse"||Ne.sourceCapabilities&&!Ne.sourceCapabilities.firesTouchEvents)){var at=ua(Ne);if(!(at.some(function(_n){return _n instanceof HTMLLabelElement&&_n.attributes.for})&&!at.some(function(_n){return _n instanceof HTMLInputElement||_n instanceof HTMLSelectElement}))){var Dt=Date.now();Dt-G<=Gr?(ne++,ne===2&&E(xr(Ne))):ne=1,G=Dt}}}return _.addEventListener("click",ge),{dblclick:E,simDblclick:ge}}function Hr(_,E){_.removeEventListener("dblclick",E.dblclick),_.removeEventListener("click",E.simDblclick)}var fo=Ea(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),xo=Ea(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),hs=xo==="webkitTransition"||xo==="OTransition"?xo+"End":"transitionend";function Yo(_){return typeof _=="string"?document.getElementById(_):_}function hn(_,E){var G=_.style[E]||_.currentStyle&&_.currentStyle[E];if((!G||G==="auto")&&document.defaultView){var ne=document.defaultView.getComputedStyle(_,null);G=ne?ne[E]:null}return G==="auto"?null:G}function Wr(_,E,G){var ne=document.createElement(_);return ne.className=E||"",G&&G.appendChild(ne),ne}function Dr(_){var E=_.parentNode;E&&E.removeChild(_)}function Mr(_){for(;_.firstChild;)_.removeChild(_.firstChild)}function xc(_){var E=_.parentNode;E&&E.lastChild!==_&&E.appendChild(_)}function ca(_){var E=_.parentNode;E&&E.firstChild!==_&&E.insertBefore(_,E.firstChild)}function sh(_,E){if(_.classList!==void 0)return _.classList.contains(E);var G=zr(_);return G.length>0&&new RegExp("(^|\\s)"+E+"(\\s|$)").test(G)}function Jr(_,E){if(_.classList!==void 0)for(var G=he(E),ne=0,ge=G.length;ne<ge;ne++)_.classList.add(G[ne]);else if(!sh(_,E)){var Ne=zr(_);gi(_,(Ne?Ne+" ":"")+E)}}function Wo(_,E){_.classList!==void 0?_.classList.remove(E):gi(_,te((" "+zr(_)+" ").replace(" "+E+" "," ")))}function gi(_,E){_.className.baseVal===void 0?_.className=E:_.className.baseVal=E}function zr(_){return _.correspondingElement&&(_=_.correspondingElement),_.className.baseVal===void 0?_.className:_.className.baseVal}function _r(_,E){"opacity"in _.style?_.style.opacity=E:"filter"in _.style&&Va(_,E)}function Va(_,E){var G=!1,ne="DXImageTransform.Microsoft.Alpha";try{G=_.filters.item(ne)}catch{if(E===1)return}E=Math.round(E*100),G?(G.Enabled=E!==100,G.Opacity=E):_.style.filter+=" progid:"+ne+"(opacity="+E+")"}function Ea(_){for(var E=document.documentElement.style,G=0;G<_.length;G++)if(_[G]in E)return _[G];return!1}function Lr(_,E,G){var ne=E||new mn(0,0);_.style[fo]=(Pe.ie3d?"translate("+ne.x+"px,"+ne.y+"px)":"translate3d("+ne.x+"px,"+ne.y+"px,0)")+(G?" scale("+G+")":"")}function Io(_,E){_._leaflet_pos=E,Pe.any3d?Lr(_,E):(_.style.left=E.x+"px",_.style.top=E.y+"px")}function Sa(_){return _._leaflet_pos||new mn(0,0)}var _a,Es,Ho;if("onselectstart"in document)_a=function(){br(window,"selectstart",Rr)},Es=function(){ss(window,"selectstart",Rr)};else{var Ol=Ea(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);_a=function(){if(Ol){var _=document.documentElement.style;Ho=_[Ol],_[Ol]="none"}},Es=function(){Ol&&(document.documentElement.style[Ol]=Ho,Ho=void 0)}}function gl(){br(window,"dragstart",Rr)}function oc(){ss(window,"dragstart",Rr)}var _l,Jo;function Qc(_){for(;_.tabIndex===-1;)_=_.parentNode;_.style&&($c(),_l=_,Jo=_.style.outlineStyle,_.style.outlineStyle="none",br(window,"keydown",$c))}function $c(){_l&&(_l.style.outlineStyle=Jo,_l=void 0,Jo=void 0,ss(window,"keydown",$c))}function Uu(_){do _=_.parentNode;while((!_.offsetWidth||!_.offsetHeight)&&_!==document.body);return _}function fu(_){var E=_.getBoundingClientRect();return{x:E.width/_.offsetWidth||1,y:E.height/_.offsetHeight||1,boundingClientRect:E}}var bc={__proto__:null,TRANSFORM:fo,TRANSITION:xo,TRANSITION_END:hs,get:Yo,getStyle:hn,create:Wr,remove:Dr,empty:Mr,toFront:xc,toBack:ca,hasClass:sh,addClass:Jr,removeClass:Wo,setClass:gi,getClass:zr,setOpacity:_r,testProp:Ea,setTransform:Lr,setPosition:Io,getPosition:Sa,get disableTextSelection(){return _a},get enableTextSelection(){return Es},disableImageDrag:gl,enableImageDrag:oc,preventOutline:Qc,restoreOutline:$c,getSizedParentNode:Uu,getScale:fu};function br(_,E,G,ne){if(E&&typeof E=="object")for(var ge in E)Da(_,ge,E[ge],G);else{E=he(E);for(var Ne=0,at=E.length;Ne<at;Ne++)Da(_,E[Ne],G,ne)}return this}var Ko="_leaflet_events";function ss(_,E,G,ne){if(arguments.length===1)ah(_),delete _[Ko];else if(E&&typeof E=="object")for(var ge in E)lh(_,ge,E[ge],G);else if(E=he(E),arguments.length===2)ah(_,function(Dt){return Ee(E,Dt)!==-1});else for(var Ne=0,at=E.length;Ne<at;Ne++)lh(_,E[Ne],G,ne);return this}function ah(_,E){for(var G in _[Ko]){var ne=G.split(/\d/)[0];(!E||E(ne))&&lh(_,ne,null,null,G)}}var ia={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Da(_,E,G,ne){var ge=E+s(G)+(ne?"_"+s(ne):"");if(_[Ko]&&_[Ko][ge])return this;var Ne=function(Dt){return G.call(ne||_,Dt||window.event)},at=Ne;!Pe.touchNative&&Pe.pointer&&E.indexOf("touch")===0?Ne=mt(_,E,Ne):Pe.touch&&E==="dblclick"?Ne=mr(_,Ne):"addEventListener"in _?E==="touchstart"||E==="touchmove"||E==="wheel"||E==="mousewheel"?_.addEventListener(ia[E]||E,Ne,Pe.passiveEvents?{passive:!1}:!1):E==="mouseenter"||E==="mouseleave"?(Ne=function(Dt){Dt=Dt||window.event,vl(_,Dt)&&at(Dt)},_.addEventListener(ia[E],Ne,!1)):_.addEventListener(E,at,!1):_.attachEvent("on"+E,Ne),_[Ko]=_[Ko]||{},_[Ko][ge]=Ne}function lh(_,E,G,ne,ge){ge=ge||E+s(G)+(ne?"_"+s(ne):"");var Ne=_[Ko]&&_[Ko][ge];if(!Ne)return this;!Pe.touchNative&&Pe.pointer&&E.indexOf("touch")===0?Jt(_,E,Ne):Pe.touch&&E==="dblclick"?Hr(_,Ne):"removeEventListener"in _?_.removeEventListener(ia[E]||E,Ne,!1):_.detachEvent("on"+E,Ne),_[Ko][ge]=null}function eo(_){return _.stopPropagation?_.stopPropagation():_.originalEvent?_.originalEvent._stopped=!0:_.cancelBubble=!0,this}function fs(_){return Da(_,"wheel",eo),this}function jc(_){return br(_,"mousedown touchstart dblclick contextmenu",eo),_._leaflet_disable_click=!0,this}function Rr(_){return _.preventDefault?_.preventDefault():_.returnValue=!1,this}function ao(_){return Rr(_),eo(_),this}function ua(_){if(_.composedPath)return _.composedPath();for(var E=[],G=_.target;G;)E.push(G),G=G.parentNode;return E}function Ua(_,E){if(!E)return new mn(_.clientX,_.clientY);var G=fu(E),ne=G.boundingClientRect;return new mn((_.clientX-ne.left)/G.x-E.clientLeft,(_.clientY-ne.top)/G.y-E.clientTop)}var Lh=Pe.linux&&Pe.chrome?window.devicePixelRatio:Pe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function yl(_){return Pe.edge?_.wheelDeltaY/2:_.deltaY&&_.deltaMode===0?-_.deltaY/Lh:_.deltaY&&_.deltaMode===1?-_.deltaY*20:_.deltaY&&_.deltaMode===2?-_.deltaY*60:_.deltaX||_.deltaZ?0:_.wheelDelta?(_.wheelDeltaY||_.wheelDelta)/2:_.detail&&Math.abs(_.detail)<32765?-_.detail*20:_.detail?_.detail/-32765*60:0}function vl(_,E){var G=E.relatedTarget;if(!G)return!0;try{for(;G&&G!==_;)G=G.parentNode}catch{return!1}return G!==_}var ch={__proto__:null,on:br,off:ss,stopPropagation:eo,disableScrollPropagation:fs,disableClickPropagation:jc,preventDefault:Rr,stop:ao,getPropagationPath:ua,getMousePosition:Ua,getWheelDelta:yl,isExternalTarget:vl,addListener:br,removeListener:ss},kh=Rn.extend({run:function(_,E,G,ne){this.stop(),this._el=_,this._inProgress=!0,this._duration=G||.25,this._easeOutPower=1/Math.max(ne||.5,.2),this._startPos=Sa(_),this._offset=E.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=qt(this._animate,this),this._step()},_step:function(_){var E=+new Date-this._startTime,G=this._duration*1e3;E<G?this._runFrame(this._easeOut(E/G),_):(this._runFrame(1),this._complete())},_runFrame:function(_,E){var G=this._startPos.add(this._offset.multiplyBy(_));E&&G._round(),Io(this._el,G),this.fire("step")},_complete:function(){rn(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(_){return 1-Math.pow(1-_,this._easeOutPower)}}),Mo=Rn.extend({options:{crs:Qi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(_,E){E=Ae(this,E),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(_),this._initLayout(),this._onResize=v(this._onResize,this),this._initEvents(),E.maxBounds&&this.setMaxBounds(E.maxBounds),E.zoom!==void 0&&(this._zoom=this._limitZoom(E.zoom)),E.center&&E.zoom!==void 0&&this.setView(ei(E.center),E.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=xo&&Pe.any3d&&!Pe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),br(this._proxy,hs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(_,E,G){if(E=E===void 0?this._zoom:this._limitZoom(E),_=this._limitCenter(ei(_),E,this.options.maxBounds),G=G||{},this._stop(),this._loaded&&!G.reset&&G!==!0){G.animate!==void 0&&(G.zoom=d({animate:G.animate},G.zoom),G.pan=d({animate:G.animate,duration:G.duration},G.pan));var ne=this._zoom!==E?this._tryAnimatedZoom&&this._tryAnimatedZoom(_,E,G.zoom):this._tryAnimatedPan(_,G.pan);if(ne)return clearTimeout(this._sizeTimer),this}return this._resetView(_,E,G.pan&&G.pan.noMoveStart),this},setZoom:function(_,E){return this._loaded?this.setView(this.getCenter(),_,{zoom:E}):(this._zoom=_,this)},zoomIn:function(_,E){return _=_||(Pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+_,E)},zoomOut:function(_,E){return _=_||(Pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-_,E)},setZoomAround:function(_,E,G){var ne=this.getZoomScale(E),ge=this.getSize().divideBy(2),Ne=_ instanceof mn?_:this.latLngToContainerPoint(_),at=Ne.subtract(ge).multiplyBy(1-1/ne),Dt=this.containerPointToLatLng(ge.add(at));return this.setView(Dt,E,{zoom:G})},_getBoundsCenterZoom:function(_,E){E=E||{},_=_.getBounds?_.getBounds():Bn(_);var G=Qt(E.paddingTopLeft||E.padding||[0,0]),ne=Qt(E.paddingBottomRight||E.padding||[0,0]),ge=this.getBoundsZoom(_,!1,G.add(ne));if(ge=typeof E.maxZoom=="number"?Math.min(E.maxZoom,ge):ge,ge===1/0)return{center:_.getCenter(),zoom:ge};var Ne=ne.subtract(G).divideBy(2),at=this.project(_.getSouthWest(),ge),Dt=this.project(_.getNorthEast(),ge),_n=this.unproject(at.add(Dt).divideBy(2).add(Ne),ge);return{center:_n,zoom:ge}},fitBounds:function(_,E){if(_=Bn(_),!_.isValid())throw new Error("Bounds are not valid.");var G=this._getBoundsCenterZoom(_,E);return this.setView(G.center,G.zoom,E)},fitWorld:function(_){return this.fitBounds([[-90,-180],[90,180]],_)},panTo:function(_,E){return this.setView(_,this._zoom,{pan:E})},panBy:function(_,E){if(_=Qt(_).round(),E=E||{},!_.x&&!_.y)return this.fire("moveend");if(E.animate!==!0&&!this.getSize().contains(_))return this._resetView(this.unproject(this.project(this.getCenter()).add(_)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new kh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),E.noMoveStart||this.fire("movestart"),E.animate!==!1){Jr(this._mapPane,"leaflet-pan-anim");var G=this._getMapPanePos().subtract(_).round();this._panAnim.run(this._mapPane,G,E.duration||.25,E.easeLinearity)}else this._rawPanBy(_),this.fire("move").fire("moveend");return this},flyTo:function(_,E,G){if(G=G||{},G.animate===!1||!Pe.any3d)return this.setView(_,E,G);this._stop();var ne=this.project(this.getCenter()),ge=this.project(_),Ne=this.getSize(),at=this._zoom;_=ei(_),E=E===void 0?at:E;var Dt=Math.max(Ne.x,Ne.y),_n=Dt*this.getZoomScale(at,E),ni=ge.distanceTo(ne)||1,Ti=1.42,Hi=Ti*Ti;function kr(F){var j=F?-1:1,N=F?_n:Dt,oe=_n*_n-Dt*Dt+j*Hi*Hi*ni*ni,ae=2*N*Hi*ni,me=oe/ae,ye=Math.sqrt(me*me+1)-me,Re=ye<1e-9?-18:Math.log(ye);return Re}function zo(F){return(Math.exp(F)-Math.exp(-F))/2}function ws(F){return(Math.exp(F)+Math.exp(-F))/2}function Ps(F){return zo(F)/ws(F)}var Lo=kr(0);function Uo(F){return Dt*(ws(Lo)/ws(Lo+Ti*F))}function zh(F){return Dt*(ws(Lo)*Ps(Lo+Ti*F)-zo(Lo))/Hi}function Jc(F){return 1-Math.pow(1-F,1.5)}var P=Date.now(),u=(kr(1)-Lo)/Ti,x=G.duration?1e3*G.duration:1e3*u*.8;function I(){var F=(Date.now()-P)/x,j=Jc(F)*u;F<=1?(this._flyToFrame=qt(I,this),this._move(this.unproject(ne.add(ge.subtract(ne).multiplyBy(zh(j)/ni)),at),this.getScaleZoom(Dt/Uo(j),at),{flyTo:!0})):this._move(_,E)._moveEnd(!0)}return this._moveStart(!0,G.noMoveStart),I.call(this),this},flyToBounds:function(_,E){var G=this._getBoundsCenterZoom(_,E);return this.flyTo(G.center,G.zoom,E)},setMaxBounds:function(_){return _=Bn(_),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),_.isValid()?(this.options.maxBounds=_,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(_){var E=this.options.minZoom;return this.options.minZoom=_,this._loaded&&E!==_&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(_):this},setMaxZoom:function(_){var E=this.options.maxZoom;return this.options.maxZoom=_,this._loaded&&E!==_&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(_):this},panInsideBounds:function(_,E){this._enforcingBounds=!0;var G=this.getCenter(),ne=this._limitCenter(G,this._zoom,Bn(_));return G.equals(ne)||this.panTo(ne,E),this._enforcingBounds=!1,this},panInside:function(_,E){E=E||{};var G=Qt(E.paddingTopLeft||E.padding||[0,0]),ne=Qt(E.paddingBottomRight||E.padding||[0,0]),ge=this.project(this.getCenter()),Ne=this.project(_),at=this.getPixelBounds(),Dt=Wn([at.min.add(G),at.max.subtract(ne)]),_n=Dt.getSize();if(!Dt.contains(Ne)){this._enforcingBounds=!0;var ni=Ne.subtract(Dt.getCenter()),Ti=Dt.extend(Ne).getSize().subtract(_n);ge.x+=ni.x<0?-Ti.x:Ti.x,ge.y+=ni.y<0?-Ti.y:Ti.y,this.panTo(this.unproject(ge),E),this._enforcingBounds=!1}return this},invalidateSize:function(_){if(!this._loaded)return this;_=d({animate:!1,pan:!0},_===!0?{animate:!0}:_);var E=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var G=this.getSize(),ne=E.divideBy(2).round(),ge=G.divideBy(2).round(),Ne=ne.subtract(ge);return!Ne.x&&!Ne.y?this:(_.animate&&_.pan?this.panBy(Ne):(_.pan&&this._rawPanBy(Ne),this.fire("move"),_.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(v(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:E,newSize:G}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(_){if(_=this._locateOptions=d({timeout:1e4,watch:!1},_),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var E=v(this._handleGeolocationResponse,this),G=v(this._handleGeolocationError,this);return _.watch?this._locationWatchId=navigator.geolocation.watchPosition(E,G,_):navigator.geolocation.getCurrentPosition(E,G,_),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(_){if(this._container._leaflet_id){var E=_.code,G=_.message||(E===1?"permission denied":E===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:E,message:"Geolocation error: "+G+"."})}},_handleGeolocationResponse:function(_){if(this._container._leaflet_id){var E=_.coords.latitude,G=_.coords.longitude,ne=new Hn(E,G),ge=ne.toBounds(_.coords.accuracy*2),Ne=this._locateOptions;if(Ne.setView){var at=this.getBoundsZoom(ge);this.setView(ne,Ne.maxZoom?Math.min(at,Ne.maxZoom):at)}var Dt={latlng:ne,bounds:ge,timestamp:_.timestamp};for(var _n in _.coords)typeof _.coords[_n]=="number"&&(Dt[_n]=_.coords[_n]);this.fire("locationfound",Dt)}},addHandler:function(_,E){if(!E)return this;var G=this[_]=new E(this);return this._handlers.push(G),this.options[_]&&G.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Dr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(rn(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var _;for(_ in this._layers)this._layers[_].remove();for(_ in this._panes)Dr(this._panes[_]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(_,E){var G="leaflet-pane"+(_?" leaflet-"+_.replace("Pane","")+"-pane":""),ne=Wr("div",G,E||this._mapPane);return _&&(this._panes[_]=ne),ne},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var _=this.getPixelBounds(),E=this.unproject(_.getBottomLeft()),G=this.unproject(_.getTopRight());return new Bi(E,G)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(_,E,G){_=Bn(_),G=Qt(G||[0,0]);var ne=this.getZoom()||0,ge=this.getMinZoom(),Ne=this.getMaxZoom(),at=_.getNorthWest(),Dt=_.getSouthEast(),_n=this.getSize().subtract(G),ni=Wn(this.project(Dt,ne),this.project(at,ne)).getSize(),Ti=Pe.any3d?this.options.zoomSnap:1,Hi=_n.x/ni.x,kr=_n.y/ni.y,zo=E?Math.max(Hi,kr):Math.min(Hi,kr);return ne=this.getScaleZoom(zo,ne),Ti&&(ne=Math.round(ne/(Ti/100))*(Ti/100),ne=E?Math.ceil(ne/Ti)*Ti:Math.floor(ne/Ti)*Ti),Math.max(ge,Math.min(Ne,ne))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new mn(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(_,E){var G=this._getTopLeftPoint(_,E);return new Xn(G,G.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(_){return this.options.crs.getProjectedBounds(_===void 0?this.getZoom():_)},getPane:function(_){return typeof _=="string"?this._panes[_]:_},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(_,E){var G=this.options.crs;return E=E===void 0?this._zoom:E,G.scale(_)/G.scale(E)},getScaleZoom:function(_,E){var G=this.options.crs;E=E===void 0?this._zoom:E;var ne=G.zoom(_*G.scale(E));return isNaN(ne)?1/0:ne},project:function(_,E){return E=E===void 0?this._zoom:E,this.options.crs.latLngToPoint(ei(_),E)},unproject:function(_,E){return E=E===void 0?this._zoom:E,this.options.crs.pointToLatLng(Qt(_),E)},layerPointToLatLng:function(_){var E=Qt(_).add(this.getPixelOrigin());return this.unproject(E)},latLngToLayerPoint:function(_){var E=this.project(ei(_))._round();return E._subtract(this.getPixelOrigin())},wrapLatLng:function(_){return this.options.crs.wrapLatLng(ei(_))},wrapLatLngBounds:function(_){return this.options.crs.wrapLatLngBounds(Bn(_))},distance:function(_,E){return this.options.crs.distance(ei(_),ei(E))},containerPointToLayerPoint:function(_){return Qt(_).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(_){return Qt(_).add(this._getMapPanePos())},containerPointToLatLng:function(_){var E=this.containerPointToLayerPoint(Qt(_));return this.layerPointToLatLng(E)},latLngToContainerPoint:function(_){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ei(_)))},mouseEventToContainerPoint:function(_){return Ua(_,this._container)},mouseEventToLayerPoint:function(_){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(_))},mouseEventToLatLng:function(_){return this.layerPointToLatLng(this.mouseEventToLayerPoint(_))},_initContainer:function(_){var E=this._container=Yo(_);if(E){if(E._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");br(E,"scroll",this._onScroll,this),this._containerId=s(E)},_initLayout:function(){var _=this._container;this._fadeAnimated=this.options.fadeAnimation&&Pe.any3d,Jr(_,"leaflet-container"+(Pe.touch?" leaflet-touch":"")+(Pe.retina?" leaflet-retina":"")+(Pe.ielt9?" leaflet-oldie":"")+(Pe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var E=hn(_,"position");E!=="absolute"&&E!=="relative"&&E!=="fixed"&&E!=="sticky"&&(_.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var _=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Io(this._mapPane,new mn(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Jr(_.markerPane,"leaflet-zoom-hide"),Jr(_.shadowPane,"leaflet-zoom-hide"))},_resetView:function(_,E,G){Io(this._mapPane,new mn(0,0));var ne=!this._loaded;this._loaded=!0,E=this._limitZoom(E),this.fire("viewprereset");var ge=this._zoom!==E;this._moveStart(ge,G)._move(_,E)._moveEnd(ge),this.fire("viewreset"),ne&&this.fire("load")},_moveStart:function(_,E){return _&&this.fire("zoomstart"),E||this.fire("movestart"),this},_move:function(_,E,G,ne){E===void 0&&(E=this._zoom);var ge=this._zoom!==E;return this._zoom=E,this._lastCenter=_,this._pixelOrigin=this._getNewPixelOrigin(_),ne?G&&G.pinch&&this.fire("zoom",G):((ge||G&&G.pinch)&&this.fire("zoom",G),this.fire("move",G)),this},_moveEnd:function(_){return _&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return rn(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(_){Io(this._mapPane,this._getMapPanePos().subtract(_))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(_){this._targets={},this._targets[s(this._container)]=this;var E=_?ss:br;E(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&E(window,"resize",this._onResize,this),Pe.any3d&&this.options.transform3DLimit&&(_?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){rn(this._resizeRequest),this._resizeRequest=qt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var _=this._getMapPanePos();Math.max(Math.abs(_.x),Math.abs(_.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(_,E){for(var G=[],ne,ge=E==="mouseout"||E==="mouseover",Ne=_.target||_.srcElement,at=!1;Ne;){if(ne=this._targets[s(Ne)],ne&&(E==="click"||E==="preclick")&&this._draggableMoved(ne)){at=!0;break}if(ne&&ne.listens(E,!0)&&(ge&&!vl(Ne,_)||(G.push(ne),ge))||Ne===this._container)break;Ne=Ne.parentNode}return!G.length&&!at&&!ge&&this.listens(E,!0)&&(G=[this]),G},_isClickDisabled:function(_){for(;_&&_!==this._container;){if(_._leaflet_disable_click)return!0;_=_.parentNode}},_handleDOMEvent:function(_){var E=_.target||_.srcElement;if(!(!this._loaded||E._leaflet_disable_events||_.type==="click"&&this._isClickDisabled(E))){var G=_.type;G==="mousedown"&&Qc(E),this._fireDOMEvent(_,G)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(_,E,G){if(_.type==="click"){var ne=d({},_);ne.type="preclick",this._fireDOMEvent(ne,ne.type,G)}var ge=this._findEventTargets(_,E);if(G){for(var Ne=[],at=0;at<G.length;at++)G[at].listens(E,!0)&&Ne.push(G[at]);ge=Ne.concat(ge)}if(ge.length){E==="contextmenu"&&Rr(_);var Dt=ge[0],_n={originalEvent:_};if(_.type!=="keypress"&&_.type!=="keydown"&&_.type!=="keyup"){var ni=Dt.getLatLng&&(!Dt._radius||Dt._radius<=10);_n.containerPoint=ni?this.latLngToContainerPoint(Dt.getLatLng()):this.mouseEventToContainerPoint(_),_n.layerPoint=this.containerPointToLayerPoint(_n.containerPoint),_n.latlng=ni?Dt.getLatLng():this.layerPointToLatLng(_n.layerPoint)}for(at=0;at<ge.length;at++)if(ge[at].fire(E,_n,!0),_n.originalEvent._stopped||ge[at].options.bubblingMouseEvents===!1&&Ee(this._mouseEvents,E)!==-1)return}},_draggableMoved:function(_){return _=_.dragging&&_.dragging.enabled()?_:this,_.dragging&&_.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var _=0,E=this._handlers.length;_<E;_++)this._handlers[_].disable()},whenReady:function(_,E){return this._loaded?_.call(E||this,{target:this}):this.on("load",_,E),this},_getMapPanePos:function(){return Sa(this._mapPane)||new mn(0,0)},_moved:function(){var _=this._getMapPanePos();return _&&!_.equals([0,0])},_getTopLeftPoint:function(_,E){var G=_&&E!==void 0?this._getNewPixelOrigin(_,E):this.getPixelOrigin();return G.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(_,E){var G=this.getSize()._divideBy(2);return this.project(_,E)._subtract(G)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(_,E,G){var ne=this._getNewPixelOrigin(G,E);return this.project(_,E)._subtract(ne)},_latLngBoundsToNewLayerBounds:function(_,E,G){var ne=this._getNewPixelOrigin(G,E);return Wn([this.project(_.getSouthWest(),E)._subtract(ne),this.project(_.getNorthWest(),E)._subtract(ne),this.project(_.getSouthEast(),E)._subtract(ne),this.project(_.getNorthEast(),E)._subtract(ne)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(_){return this.latLngToLayerPoint(_).subtract(this._getCenterLayerPoint())},_limitCenter:function(_,E,G){if(!G)return _;var ne=this.project(_,E),ge=this.getSize().divideBy(2),Ne=new Xn(ne.subtract(ge),ne.add(ge)),at=this._getBoundsOffset(Ne,G,E);return Math.abs(at.x)<=1&&Math.abs(at.y)<=1?_:this.unproject(ne.add(at),E)},_limitOffset:function(_,E){if(!E)return _;var G=this.getPixelBounds(),ne=new Xn(G.min.add(_),G.max.add(_));return _.add(this._getBoundsOffset(ne,E))},_getBoundsOffset:function(_,E,G){var ne=Wn(this.project(E.getNorthEast(),G),this.project(E.getSouthWest(),G)),ge=ne.min.subtract(_.min),Ne=ne.max.subtract(_.max),at=this._rebound(ge.x,-Ne.x),Dt=this._rebound(ge.y,-Ne.y);return new mn(at,Dt)},_rebound:function(_,E){return _+E>0?Math.round(_-E)/2:Math.max(0,Math.ceil(_))-Math.max(0,Math.floor(E))},_limitZoom:function(_){var E=this.getMinZoom(),G=this.getMaxZoom(),ne=Pe.any3d?this.options.zoomSnap:1;return ne&&(_=Math.round(_/ne)*ne),Math.max(E,Math.min(G,_))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Wo(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(_,E){var G=this._getCenterOffset(_)._trunc();return(E&&E.animate)!==!0&&!this.getSize().contains(G)?!1:(this.panBy(G,E),!0)},_createAnimProxy:function(){var _=this._proxy=Wr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(_),this.on("zoomanim",function(E){var G=fo,ne=this._proxy.style[G];Lr(this._proxy,this.project(E.center,E.zoom),this.getZoomScale(E.zoom,1)),ne===this._proxy.style[G]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Dr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var _=this.getCenter(),E=this.getZoom();Lr(this._proxy,this.project(_,E),this.getZoomScale(E,1))},_catchTransitionEnd:function(_){this._animatingZoom&&_.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(_,E,G){if(this._animatingZoom)return!0;if(G=G||{},!this._zoomAnimated||G.animate===!1||this._nothingToAnimate()||Math.abs(E-this._zoom)>this.options.zoomAnimationThreshold)return!1;var ne=this.getZoomScale(E),ge=this._getCenterOffset(_)._divideBy(1-1/ne);return G.animate!==!0&&!this.getSize().contains(ge)?!1:(qt(function(){this._moveStart(!0,G.noMoveStart||!1)._animateZoom(_,E,!0)},this),!0)},_animateZoom:function(_,E,G,ne){this._mapPane&&(G&&(this._animatingZoom=!0,this._animateToCenter=_,this._animateToZoom=E,Jr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:_,zoom:E,noUpdate:ne}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(v(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Wo(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ss(_,E){return new Mo(_,E)}var Is=Kt.extend({options:{position:"topright"},initialize:function(_){Ae(this,_)},getPosition:function(){return this.options.position},setPosition:function(_){var E=this._map;return E&&E.removeControl(this),this.options.position=_,E&&E.addControl(this),this},getContainer:function(){return this._container},addTo:function(_){this.remove(),this._map=_;var E=this._container=this.onAdd(_),G=this.getPosition(),ne=_._controlCorners[G];return Jr(E,"leaflet-control"),G.indexOf("bottom")!==-1?ne.insertBefore(E,ne.firstChild):ne.appendChild(E),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Dr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(_){this._map&&_&&_.screenX>0&&_.screenY>0&&this._map.getContainer().focus()}}),za=function(_){return new Is(_)};Mo.include({addControl:function(_){return _.addTo(this),this},removeControl:function(_){return _.remove(),this},_initControlPos:function(){var _=this._controlCorners={},E="leaflet-",G=this._controlContainer=Wr("div",E+"control-container",this._container);function ne(ge,Ne){var at=E+ge+" "+E+Ne;_[ge+Ne]=Wr("div",at,G)}ne("top","left"),ne("top","right"),ne("bottom","left"),ne("bottom","right")},_clearControlPos:function(){for(var _ in this._controlCorners)Dr(this._controlCorners[_]);Dr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var wc=Is.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(_,E,G,ne){return G<ne?-1:ne<G?1:0}},initialize:function(_,E,G){Ae(this,G),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var ne in _)this._addLayer(_[ne],ne);for(ne in E)this._addLayer(E[ne],ne,!0)},onAdd:function(_){this._initLayout(),this._update(),this._map=_,_.on("zoomend",this._checkDisabledLayers,this);for(var E=0;E<this._layers.length;E++)this._layers[E].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(_){return Is.prototype.addTo.call(this,_),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var _=0;_<this._layers.length;_++)this._layers[_].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(_,E){return this._addLayer(_,E),this._map?this._update():this},addOverlay:function(_,E){return this._addLayer(_,E,!0),this._map?this._update():this},removeLayer:function(_){_.off("add remove",this._onLayerChange,this);var E=this._getLayer(s(_));return E&&this._layers.splice(this._layers.indexOf(E),1),this._map?this._update():this},expand:function(){Jr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var _=this._map.getSize().y-(this._container.offsetTop+50);return _<this._section.clientHeight?(Jr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=_+"px"):Wo(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Wo(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var _="leaflet-control-layers",E=this._container=Wr("div",_),G=this.options.collapsed;E.setAttribute("aria-haspopup",!0),jc(E),fs(E);var ne=this._section=Wr("section",_+"-list");G&&(this._map.on("click",this.collapse,this),br(E,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ge=this._layersLink=Wr("a",_+"-toggle",E);ge.href="#",ge.title="Layers",ge.setAttribute("role","button"),br(ge,{keydown:function(Ne){Ne.keyCode===13&&this._expandSafely()},click:function(Ne){Rr(Ne),this._expandSafely()}},this),G||this.expand(),this._baseLayersList=Wr("div",_+"-base",ne),this._separator=Wr("div",_+"-separator",ne),this._overlaysList=Wr("div",_+"-overlays",ne),E.appendChild(ne)},_getLayer:function(_){for(var E=0;E<this._layers.length;E++)if(this._layers[E]&&s(this._layers[E].layer)===_)return this._layers[E]},_addLayer:function(_,E,G){this._map&&_.on("add remove",this._onLayerChange,this),this._layers.push({layer:_,name:E,overlay:G}),this.options.sortLayers&&this._layers.sort(v(function(ne,ge){return this.options.sortFunction(ne.layer,ge.layer,ne.name,ge.name)},this)),this.options.autoZIndex&&_.setZIndex&&(this._lastZIndex++,_.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Mr(this._baseLayersList),Mr(this._overlaysList),this._layerControlInputs=[];var _,E,G,ne,ge=0;for(G=0;G<this._layers.length;G++)ne=this._layers[G],this._addItem(ne),E=E||ne.overlay,_=_||!ne.overlay,ge+=ne.overlay?0:1;return this.options.hideSingleBase&&(_=_&&ge>1,this._baseLayersList.style.display=_?"":"none"),this._separator.style.display=E&&_?"":"none",this},_onLayerChange:function(_){this._handlingClick||this._update();var E=this._getLayer(s(_.target)),G=E.overlay?_.type==="add"?"overlayadd":"overlayremove":_.type==="add"?"baselayerchange":null;G&&this._map.fire(G,E)},_createRadioElement:function(_,E){var G='<input type="radio" class="leaflet-control-layers-selector" name="'+_+'"'+(E?' checked="checked"':"")+"/>",ne=document.createElement("div");return ne.innerHTML=G,ne.firstChild},_addItem:function(_){var E=document.createElement("label"),G=this._map.hasLayer(_.layer),ne;_.overlay?(ne=document.createElement("input"),ne.type="checkbox",ne.className="leaflet-control-layers-selector",ne.defaultChecked=G):ne=this._createRadioElement("leaflet-base-layers_"+s(this),G),this._layerControlInputs.push(ne),ne.layerId=s(_.layer),br(ne,"click",this._onInputClick,this);var ge=document.createElement("span");ge.innerHTML=" "+_.name;var Ne=document.createElement("span");E.appendChild(Ne),Ne.appendChild(ne),Ne.appendChild(ge);var at=_.overlay?this._overlaysList:this._baseLayersList;return at.appendChild(E),this._checkDisabledLayers(),E},_onInputClick:function(){if(!this._preventClick){var _=this._layerControlInputs,E,G,ne=[],ge=[];this._handlingClick=!0;for(var Ne=_.length-1;Ne>=0;Ne--)E=_[Ne],G=this._getLayer(E.layerId).layer,E.checked?ne.push(G):E.checked||ge.push(G);for(Ne=0;Ne<ge.length;Ne++)this._map.hasLayer(ge[Ne])&&this._map.removeLayer(ge[Ne]);for(Ne=0;Ne<ne.length;Ne++)this._map.hasLayer(ne[Ne])||this._map.addLayer(ne[Ne]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var _=this._layerControlInputs,E,G,ne=this._map.getZoom(),ge=_.length-1;ge>=0;ge--)E=_[ge],G=this._getLayer(E.layerId).layer,E.disabled=G.options.minZoom!==void 0&&ne<G.options.minZoom||G.options.maxZoom!==void 0&&ne>G.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var _=this._section;this._preventClick=!0,br(_,"click",Rr),this.expand();var E=this;setTimeout(function(){ss(_,"click",Rr),E._preventClick=!1})}}),Nl=function(_,E,G){return new wc(_,E,G)},ks=Is.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(_){var E="leaflet-control-zoom",G=Wr("div",E+" leaflet-bar"),ne=this.options;return this._zoomInButton=this._createButton(ne.zoomInText,ne.zoomInTitle,E+"-in",G,this._zoomIn),this._zoomOutButton=this._createButton(ne.zoomOutText,ne.zoomOutTitle,E+"-out",G,this._zoomOut),this._updateDisabled(),_.on("zoomend zoomlevelschange",this._updateDisabled,this),G},onRemove:function(_){_.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(_){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(_.shiftKey?3:1))},_zoomOut:function(_){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(_.shiftKey?3:1))},_createButton:function(_,E,G,ne,ge){var Ne=Wr("a",G,ne);return Ne.innerHTML=_,Ne.href="#",Ne.title=E,Ne.setAttribute("role","button"),Ne.setAttribute("aria-label",E),jc(Ne),br(Ne,"click",ao),br(Ne,"click",ge,this),br(Ne,"click",this._refocusOnMap,this),Ne},_updateDisabled:function(){var _=this._map,E="leaflet-disabled";Wo(this._zoomInButton,E),Wo(this._zoomOutButton,E),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||_._zoom===_.getMinZoom())&&(Jr(this._zoomOutButton,E),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||_._zoom===_.getMaxZoom())&&(Jr(this._zoomInButton,E),this._zoomInButton.setAttribute("aria-disabled","true"))}});Mo.mergeOptions({zoomControl:!0}),Mo.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ks,this.addControl(this.zoomControl))});var Cc=function(_){return new ks(_)},uh=Is.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(_){var E="leaflet-control-scale",G=Wr("div",E),ne=this.options;return this._addScales(ne,E+"-line",G),_.on(ne.updateWhenIdle?"moveend":"move",this._update,this),_.whenReady(this._update,this),G},onRemove:function(_){_.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(_,E,G){_.metric&&(this._mScale=Wr("div",E,G)),_.imperial&&(this._iScale=Wr("div",E,G))},_update:function(){var _=this._map,E=_.getSize().y/2,G=_.distance(_.containerPointToLatLng([0,E]),_.containerPointToLatLng([this.options.maxWidth,E]));this._updateScales(G)},_updateScales:function(_){this.options.metric&&_&&this._updateMetric(_),this.options.imperial&&_&&this._updateImperial(_)},_updateMetric:function(_){var E=this._getRoundNum(_),G=E<1e3?E+" m":E/1e3+" km";this._updateScale(this._mScale,G,E/_)},_updateImperial:function(_){var E=_*3.2808399,G,ne,ge;E>5280?(G=E/5280,ne=this._getRoundNum(G),this._updateScale(this._iScale,ne+" mi",ne/G)):(ge=this._getRoundNum(E),this._updateScale(this._iScale,ge+" ft",ge/E))},_updateScale:function(_,E,G){_.style.width=Math.round(this.options.maxWidth*G)+"px",_.innerHTML=E},_getRoundNum:function(_){var E=Math.pow(10,(Math.floor(_)+"").length-1),G=_/E;return G=G>=10?10:G>=5?5:G>=3?3:G>=2?2:1,E*G}}),zu=function(_){return new uh(_)},hh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ph=Is.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Pe.inlineSvg?hh+" ":"")+"Leaflet</a>"},initialize:function(_){Ae(this,_),this._attributions={}},onAdd:function(_){_.attributionControl=this,this._container=Wr("div","leaflet-control-attribution"),jc(this._container);for(var E in _._layers)_._layers[E].getAttribution&&this.addAttribution(_._layers[E].getAttribution());return this._update(),_.on("layeradd",this._addAttribution,this),this._container},onRemove:function(_){_.off("layeradd",this._addAttribution,this)},_addAttribution:function(_){_.layer.getAttribution&&(this.addAttribution(_.layer.getAttribution()),_.layer.once("remove",function(){this.removeAttribution(_.layer.getAttribution())},this))},setPrefix:function(_){return this.options.prefix=_,this._update(),this},addAttribution:function(_){return _?(this._attributions[_]||(this._attributions[_]=0),this._attributions[_]++,this._update(),this):this},removeAttribution:function(_){return _?(this._attributions[_]&&(this._attributions[_]--,this._update()),this):this},_update:function(){if(this._map){var _=[];for(var E in this._attributions)this._attributions[E]&&_.push(E);var G=[];this.options.prefix&&G.push(this.options.prefix),_.length&&G.push(_.join(", ")),this._container.innerHTML=G.join(' <span aria-hidden="true">|</span> ')}}});Mo.mergeOptions({attributionControl:!0}),Mo.addInitHook(function(){this.options.attributionControl&&new Ph().addTo(this)});var Fh=function(_){return new Ph(_)};Is.Layers=wc,Is.Zoom=ks,Is.Scale=uh,Is.Attribution=Ph,za.layers=Nl,za.zoom=Cc,za.scale=zu,za.attribution=Fh;var ps=Kt.extend({initialize:function(_){this._map=_},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ps.addTo=function(_,E){return _.addHandler(E,this),this};var dh={Events:Gt},ra=Pe.touch?"touchstart mousedown":"mousedown",to=Rn.extend({options:{clickTolerance:3},initialize:function(_,E,G,ne){Ae(this,ne),this._element=_,this._dragStartTarget=E||_,this._preventOutline=G},enable:function(){this._enabled||(br(this._dragStartTarget,ra,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(to._dragging===this&&this.finishDrag(!0),ss(this._dragStartTarget,ra,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(_){if(this._enabled&&(this._moved=!1,!sh(this._element,"leaflet-zoom-anim"))){if(_.touches&&_.touches.length!==1){to._dragging===this&&this.finishDrag();return}if(!(to._dragging||_.shiftKey||_.which!==1&&_.button!==1&&!_.touches)&&(to._dragging=this,this._preventOutline&&Qc(this._element),gl(),_a(),!this._moving)){this.fire("down");var E=_.touches?_.touches[0]:_,G=Uu(this._element);this._startPoint=new mn(E.clientX,E.clientY),this._startPos=Sa(this._element),this._parentScale=fu(G);var ne=_.type==="mousedown";br(document,ne?"mousemove":"touchmove",this._onMove,this),br(document,ne?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(_){if(this._enabled){if(_.touches&&_.touches.length>1){this._moved=!0;return}var E=_.touches&&_.touches.length===1?_.touches[0]:_,G=new mn(E.clientX,E.clientY)._subtract(this._startPoint);!G.x&&!G.y||Math.abs(G.x)+Math.abs(G.y)<this.options.clickTolerance||(G.x/=this._parentScale.x,G.y/=this._parentScale.y,Rr(_),this._moved||(this.fire("dragstart"),this._moved=!0,Jr(document.body,"leaflet-dragging"),this._lastTarget=_.target||_.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Jr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(G),this._moving=!0,this._lastEvent=_,this._updatePosition())}},_updatePosition:function(){var _={originalEvent:this._lastEvent};this.fire("predrag",_),Io(this._element,this._newPos),this.fire("drag",_)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(_){Wo(document.body,"leaflet-dragging"),this._lastTarget&&(Wo(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ss(document,"mousemove touchmove",this._onMove,this),ss(document,"mouseup touchend touchcancel",this._onUp,this),oc(),Es();var E=this._moved&&this._moving;this._moving=!1,to._dragging=!1,E&&this.fire("dragend",{noInertia:_,distance:this._newPos.distanceTo(this._startPos)})}});function pu(_,E,G){var ne,ge=[1,4,2,8],Ne,at,Dt,_n,ni,Ti,Hi,kr;for(Ne=0,Ti=_.length;Ne<Ti;Ne++)_[Ne]._code=ya(_[Ne],E);for(Dt=0;Dt<4;Dt++){for(Hi=ge[Dt],ne=[],Ne=0,Ti=_.length,at=Ti-1;Ne<Ti;at=Ne++)_n=_[Ne],ni=_[at],_n._code&Hi?ni._code&Hi||(kr=es(ni,_n,Hi,E,G),kr._code=ya(kr,E),ne.push(kr)):(ni._code&Hi&&(kr=es(ni,_n,Hi,E,G),kr._code=ya(kr,E),ne.push(kr)),ne.push(_n));_=ne}return _}function Ql(_,E){var G,ne,ge,Ne,at,Dt,_n,ni,Ti;if(!_||_.length===0)throw new Error("latlngs not passed");Ra(_)||(console.warn("latlngs are not flat! Only the first ring will be used"),_=_[0]);var Hi=ei([0,0]),kr=Bn(_),zo=kr.getNorthWest().distanceTo(kr.getSouthWest())*kr.getNorthEast().distanceTo(kr.getNorthWest());zo<1700&&(Hi=mu(_));var ws=_.length,Ps=[];for(G=0;G<ws;G++){var Lo=ei(_[G]);Ps.push(E.project(ei([Lo.lat-Hi.lat,Lo.lng-Hi.lng])))}for(Dt=_n=ni=0,G=0,ne=ws-1;G<ws;ne=G++)ge=Ps[G],Ne=Ps[ne],at=ge.y*Ne.x-Ne.y*ge.x,_n+=(ge.x+Ne.x)*at,ni+=(ge.y+Ne.y)*at,Dt+=at*3;Dt===0?Ti=Ps[0]:Ti=[_n/Dt,ni/Dt];var Uo=E.unproject(Qt(Ti));return ei([Uo.lat+Hi.lat,Uo.lng+Hi.lng])}function mu(_){for(var E=0,G=0,ne=0,ge=0;ge<_.length;ge++){var Ne=ei(_[ge]);E+=Ne.lat,G+=Ne.lng,ne++}return ei([E/ne,G/ne])}var gu={__proto__:null,clipPolygon:pu,polygonCenter:Ql,centroid:mu};function Vo(_,E){if(!E||!_.length)return _.slice();var G=E*E;return _=Or(_,G),_=rs(_,G),_}function $l(_,E,G){return Math.sqrt(Ru(_,E,G,!0))}function xl(_,E,G){return Ru(_,E,G)}function rs(_,E){var G=_.length,ne=typeof Uint8Array<"u"?Uint8Array:Array,ge=new ne(G);ge[0]=ge[G-1]=1,sc(_,ge,E,0,G-1);var Ne,at=[];for(Ne=0;Ne<G;Ne++)ge[Ne]&&at.push(_[Ne]);return at}function sc(_,E,G,ne,ge){var Ne=0,at,Dt,_n;for(Dt=ne+1;Dt<=ge-1;Dt++)_n=Ru(_[Dt],_[ne],_[ge],!0),_n>Ne&&(at=Dt,Ne=_n);Ne>G&&(E[at]=1,sc(_,E,G,ne,at),sc(_,E,G,at,ge))}function Or(_,E){for(var G=[_[0]],ne=1,ge=0,Ne=_.length;ne<Ne;ne++)bl(_[ne],_[ge])>E&&(G.push(_[ne]),ge=ne);return ge<Ne-1&&G.push(_[Ne-1]),G}var bo;function Zo(_,E,G,ne,ge){var Ne=ne?bo:ya(_,G),at=ya(E,G),Dt,_n,ni;for(bo=at;;){if(!(Ne|at))return[_,E];if(Ne&at)return!1;Dt=Ne||at,_n=es(_,E,Dt,G,ge),ni=ya(_n,G),Dt===Ne?(_=_n,Ne=ni):(E=_n,at=ni)}}function es(_,E,G,ne,ge){var Ne=E.x-_.x,at=E.y-_.y,Dt=ne.min,_n=ne.max,ni,Ti;return G&8?(ni=_.x+Ne*(_n.y-_.y)/at,Ti=_n.y):G&4?(ni=_.x+Ne*(Dt.y-_.y)/at,Ti=Dt.y):G&2?(ni=_n.x,Ti=_.y+at*(_n.x-_.x)/Ne):G&1&&(ni=Dt.x,Ti=_.y+at*(Dt.x-_.x)/Ne),new mn(ni,Ti,ge)}function ya(_,E){var G=0;return _.x<E.min.x?G|=1:_.x>E.max.x&&(G|=2),_.y<E.min.y?G|=4:_.y>E.max.y&&(G|=8),G}function bl(_,E){var G=E.x-_.x,ne=E.y-_.y;return G*G+ne*ne}function Ru(_,E,G,ne){var ge=E.x,Ne=E.y,at=G.x-ge,Dt=G.y-Ne,_n=at*at+Dt*Dt,ni;return _n>0&&(ni=((_.x-ge)*at+(_.y-Ne)*Dt)/_n,ni>1?(ge=G.x,Ne=G.y):ni>0&&(ge+=at*ni,Ne+=Dt*ni)),at=_.x-ge,Dt=_.y-Ne,ne?at*at+Dt*Dt:new mn(ge,Ne)}function Ra(_){return!Te(_[0])||typeof _[0][0]!="object"&&typeof _[0][0]<"u"}function Ou(_){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ra(_)}function Ah(_,E){var G,ne,ge,Ne,at,Dt,_n,ni;if(!_||_.length===0)throw new Error("latlngs not passed");Ra(_)||(console.warn("latlngs are not flat! Only the first ring will be used"),_=_[0]);var Ti=ei([0,0]),Hi=Bn(_),kr=Hi.getNorthWest().distanceTo(Hi.getSouthWest())*Hi.getNorthEast().distanceTo(Hi.getNorthWest());kr<1700&&(Ti=mu(_));var zo=_.length,ws=[];for(G=0;G<zo;G++){var Ps=ei(_[G]);ws.push(E.project(ei([Ps.lat-Ti.lat,Ps.lng-Ti.lng])))}for(G=0,ne=0;G<zo-1;G++)ne+=ws[G].distanceTo(ws[G+1])/2;if(ne===0)ni=ws[0];else for(G=0,Ne=0;G<zo-1;G++)if(at=ws[G],Dt=ws[G+1],ge=at.distanceTo(Dt),Ne+=ge,Ne>ne){_n=(Ne-ne)/ge,ni=[Dt.x-_n*(Dt.x-at.x),Dt.y-_n*(Dt.y-at.y)];break}var Lo=E.unproject(Qt(ni));return ei([Lo.lat+Ti.lat,Lo.lng+Ti.lng])}var lo={__proto__:null,simplify:Vo,pointToSegmentDistance:$l,closestPointOnSegment:xl,clipSegment:Zo,_getEdgeIntersection:es,_getBitCode:ya,_sqClosestPointOnSegment:Ru,isFlat:Ra,_flat:Ou,polylineCenter:Ah},jl={project:function(_){return new mn(_.lng,_.lat)},unproject:function(_){return new Hn(_.y,_.x)},bounds:new Xn([-180,-90],[180,90])},_u={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Xn([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(_){var E=Math.PI/180,G=this.R,ne=_.lat*E,ge=this.R_MINOR/G,Ne=Math.sqrt(1-ge*ge),at=Ne*Math.sin(ne),Dt=Math.tan(Math.PI/4-ne/2)/Math.pow((1-at)/(1+at),Ne/2);return ne=-G*Math.log(Math.max(Dt,1e-10)),new mn(_.lng*E*G,ne)},unproject:function(_){for(var E=180/Math.PI,G=this.R,ne=this.R_MINOR/G,ge=Math.sqrt(1-ne*ne),Ne=Math.exp(-_.y/G),at=Math.PI/2-2*Math.atan(Ne),Dt=0,_n=.1,ni;Dt<15&&Math.abs(_n)>1e-7;Dt++)ni=ge*Math.sin(at),ni=Math.pow((1-ni)/(1+ni),ge/2),_n=Math.PI/2-2*Math.atan(Ne*ni)-at,at+=_n;return new Hn(at*E,_.x*E/G)}},Hc={__proto__:null,LonLat:jl,Mercator:_u,SphericalMercator:Vr},fh=d({},ri,{code:"EPSG:3395",projection:_u,transformation:function(){var _=.5/(Math.PI*_u.R);return li(_,.5,-_,.5)}()}),Vc=d({},ri,{code:"EPSG:4326",projection:jl,transformation:li(1/180,1,-1/180,.5)}),Nu=d({},tr,{projection:jl,transformation:li(1,0,-1,0),scale:function(_){return Math.pow(2,_)},zoom:function(_){return Math.log(_)/Math.LN2},distance:function(_,E){var G=E.lng-_.lng,ne=E.lat-_.lat;return Math.sqrt(G*G+ne*ne)},infinite:!0});tr.Earth=ri,tr.EPSG3395=fh,tr.EPSG3857=Qi,tr.EPSG900913=Ki,tr.EPSG4326=Vc,tr.Simple=Nu;var ms=Rn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(_){return _.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(_){return _&&_.removeLayer(this),this},getPane:function(_){return this._map.getPane(_?this.options[_]||_:this.options.pane)},addInteractiveTarget:function(_){return this._map._targets[s(_)]=this,this},removeInteractiveTarget:function(_){return delete this._map._targets[s(_)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(_){var E=_.target;if(E.hasLayer(this)){if(this._map=E,this._zoomAnimated=E._zoomAnimated,this.getEvents){var G=this.getEvents();E.on(G,this),this.once("remove",function(){E.off(G,this)},this)}this.onAdd(E),this.fire("add"),E.fire("layeradd",{layer:this})}}});Mo.include({addLayer:function(_){if(!_._layerAdd)throw new Error("The provided object is not a Layer.");var E=s(_);return this._layers[E]?this:(this._layers[E]=_,_._mapToAdd=this,_.beforeAdd&&_.beforeAdd(this),this.whenReady(_._layerAdd,_),this)},removeLayer:function(_){var E=s(_);return this._layers[E]?(this._loaded&&_.onRemove(this),delete this._layers[E],this._loaded&&(this.fire("layerremove",{layer:_}),_.fire("remove")),_._map=_._mapToAdd=null,this):this},hasLayer:function(_){return s(_)in this._layers},eachLayer:function(_,E){for(var G in this._layers)_.call(E,this._layers[G]);return this},_addLayers:function(_){_=_?Te(_)?_:[_]:[];for(var E=0,G=_.length;E<G;E++)this.addLayer(_[E])},_addZoomLimit:function(_){(!isNaN(_.options.maxZoom)||!isNaN(_.options.minZoom))&&(this._zoomBoundLayers[s(_)]=_,this._updateZoomLevels())},_removeZoomLimit:function(_){var E=s(_);this._zoomBoundLayers[E]&&(delete this._zoomBoundLayers[E],this._updateZoomLevels())},_updateZoomLevels:function(){var _=1/0,E=-1/0,G=this._getZoomSpan();for(var ne in this._zoomBoundLayers){var ge=this._zoomBoundLayers[ne].options;_=ge.minZoom===void 0?_:Math.min(_,ge.minZoom),E=ge.maxZoom===void 0?E:Math.max(E,ge.maxZoom)}this._layersMaxZoom=E===-1/0?void 0:E,this._layersMinZoom=_===1/0?void 0:_,G!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var va=ms.extend({initialize:function(_,E){Ae(this,E),this._layers={};var G,ne;if(_)for(G=0,ne=_.length;G<ne;G++)this.addLayer(_[G])},addLayer:function(_){var E=this.getLayerId(_);return this._layers[E]=_,this._map&&this._map.addLayer(_),this},removeLayer:function(_){var E=_ in this._layers?_:this.getLayerId(_);return this._map&&this._layers[E]&&this._map.removeLayer(this._layers[E]),delete this._layers[E],this},hasLayer:function(_){var E=typeof _=="number"?_:this.getLayerId(_);return E in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(_){var E=Array.prototype.slice.call(arguments,1),G,ne;for(G in this._layers)ne=this._layers[G],ne[_]&&ne[_].apply(ne,E);return this},onAdd:function(_){this.eachLayer(_.addLayer,_)},onRemove:function(_){this.eachLayer(_.removeLayer,_)},eachLayer:function(_,E){for(var G in this._layers)_.call(E,this._layers[G]);return this},getLayer:function(_){return this._layers[_]},getLayers:function(){var _=[];return this.eachLayer(_.push,_),_},setZIndex:function(_){return this.invoke("setZIndex",_)},getLayerId:function(_){return s(_)}}),ph=function(_,E){return new va(_,E)},sl=va.extend({addLayer:function(_){return this.hasLayer(_)?this:(_.addEventParent(this),va.prototype.addLayer.call(this,_),this.fire("layeradd",{layer:_}))},removeLayer:function(_){return this.hasLayer(_)?(_ in this._layers&&(_=this._layers[_]),_.removeEventParent(this),va.prototype.removeLayer.call(this,_),this.fire("layerremove",{layer:_})):this},setStyle:function(_){return this.invoke("setStyle",_)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var _=new Bi;for(var E in this._layers){var G=this._layers[E];_.extend(G.getBounds?G.getBounds():G.getLatLng())}return _}}),Dh=function(_,E){return new sl(_,E)},al=Kt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(_){Ae(this,_)},createIcon:function(_){return this._createIcon("icon",_)},createShadow:function(_){return this._createIcon("shadow",_)},_createIcon:function(_,E){var G=this._getIconUrl(_);if(!G){if(_==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var ne=this._createImg(G,E&&E.tagName==="IMG"?E:null);return this._setIconStyles(ne,_),(this.options.crossOrigin||this.options.crossOrigin==="")&&(ne.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),ne},_setIconStyles:function(_,E){var G=this.options,ne=G[E+"Size"];typeof ne=="number"&&(ne=[ne,ne]);var ge=Qt(ne),Ne=Qt(E==="shadow"&&G.shadowAnchor||G.iconAnchor||ge&&ge.divideBy(2,!0));_.className="leaflet-marker-"+E+" "+(G.className||""),Ne&&(_.style.marginLeft=-Ne.x+"px",_.style.marginTop=-Ne.y+"px"),ge&&(_.style.width=ge.x+"px",_.style.height=ge.y+"px")},_createImg:function(_,E){return E=E||document.createElement("img"),E.src=_,E},_getIconUrl:function(_){return Pe.retina&&this.options[_+"RetinaUrl"]||this.options[_+"Url"]}});function yu(_){return new al(_)}var ac=al.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(_){return typeof ac.imagePath!="string"&&(ac.imagePath=this._detectIconPath()),(this.options.imagePath||ac.imagePath)+al.prototype._getIconUrl.call(this,_)},_stripUrl:function(_){var E=function(G,ne,ge){var Ne=ne.exec(G);return Ne&&Ne[ge]};return _=E(_,/^url\((['"])?(.+)\1\)$/,2),_&&E(_,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var _=Wr("div","leaflet-default-icon-path",document.body),E=hn(_,"background-image")||hn(_,"backgroundImage");if(document.body.removeChild(_),E=this._stripUrl(E),E)return E;var G=document.querySelector('link[href$="leaflet.css"]');return G?G.href.substring(0,G.href.length-11-1):""}}),gd=ps.extend({initialize:function(_){this._marker=_},addHooks:function(){var _=this._marker._icon;this._draggable||(this._draggable=new to(_,_,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Jr(_,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Wo(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(_){var E=this._marker,G=E._map,ne=this._marker.options.autoPanSpeed,ge=this._marker.options.autoPanPadding,Ne=Sa(E._icon),at=G.getPixelBounds(),Dt=G.getPixelOrigin(),_n=Wn(at.min._subtract(Dt).add(ge),at.max._subtract(Dt).subtract(ge));if(!_n.contains(Ne)){var ni=Qt((Math.max(_n.max.x,Ne.x)-_n.max.x)/(at.max.x-_n.max.x)-(Math.min(_n.min.x,Ne.x)-_n.min.x)/(at.min.x-_n.min.x),(Math.max(_n.max.y,Ne.y)-_n.max.y)/(at.max.y-_n.max.y)-(Math.min(_n.min.y,Ne.y)-_n.min.y)/(at.min.y-_n.min.y)).multiplyBy(ne);G.panBy(ni,{animate:!1}),this._draggable._newPos._add(ni),this._draggable._startPos._add(ni),Io(E._icon,this._draggable._newPos),this._onDrag(_),this._panRequest=qt(this._adjustPan.bind(this,_))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(_){this._marker.options.autoPan&&(rn(this._panRequest),this._panRequest=qt(this._adjustPan.bind(this,_)))},_onDrag:function(_){var E=this._marker,G=E._shadow,ne=Sa(E._icon),ge=E._map.layerPointToLatLng(ne);G&&Io(G,ne),E._latlng=ge,_.latlng=ge,_.oldLatLng=this._oldLatLng,E.fire("move",_).fire("drag",_)},_onDragEnd:function(_){rn(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",_)}}),Qu=ms.extend({options:{icon:new ac,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(_,E){Ae(this,E),this._latlng=ei(_)},onAdd:function(_){this._zoomAnimated=this._zoomAnimated&&_.options.markerZoomAnimation,this._zoomAnimated&&_.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(_){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&_.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(_){var E=this._latlng;return this._latlng=ei(_),this.update(),this.fire("move",{oldLatLng:E,latlng:this._latlng})},setZIndexOffset:function(_){return this.options.zIndexOffset=_,this.update()},getIcon:function(){return this.options.icon},setIcon:function(_){return this.options.icon=_,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var _=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(_)}return this},_initIcon:function(){var _=this.options,E="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),G=_.icon.createIcon(this._icon),ne=!1;G!==this._icon&&(this._icon&&this._removeIcon(),ne=!0,_.title&&(G.title=_.title),G.tagName==="IMG"&&(G.alt=_.alt||"")),Jr(G,E),_.keyboard&&(G.tabIndex="0",G.setAttribute("role","button")),this._icon=G,_.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&br(G,"focus",this._panOnFocus,this);var ge=_.icon.createShadow(this._shadow),Ne=!1;ge!==this._shadow&&(this._removeShadow(),Ne=!0),ge&&(Jr(ge,E),ge.alt=""),this._shadow=ge,_.opacity<1&&this._updateOpacity(),ne&&this.getPane().appendChild(this._icon),this._initInteraction(),ge&&Ne&&this.getPane(_.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ss(this._icon,"focus",this._panOnFocus,this),Dr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Dr(this._shadow),this._shadow=null},_setPos:function(_){this._icon&&Io(this._icon,_),this._shadow&&Io(this._shadow,_),this._zIndex=_.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(_){this._icon&&(this._icon.style.zIndex=this._zIndex+_)},_animateZoom:function(_){var E=this._map._latLngToNewLayerPoint(this._latlng,_.zoom,_.center).round();this._setPos(E)},_initInteraction:function(){if(this.options.interactive&&(Jr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),gd)){var _=this.options.draggable;this.dragging&&(_=this.dragging.enabled(),this.dragging.disable()),this.dragging=new gd(this),_&&this.dragging.enable()}},setOpacity:function(_){return this.options.opacity=_,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var _=this.options.opacity;this._icon&&_r(this._icon,_),this._shadow&&_r(this._shadow,_)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var _=this._map;if(_){var E=this.options.icon.options,G=E.iconSize?Qt(E.iconSize):Qt(0,0),ne=E.iconAnchor?Qt(E.iconAnchor):Qt(0,0);_.panInside(this._latlng,{paddingTopLeft:ne,paddingBottomRight:G.subtract(ne)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function lc(_,E){return new Qu(_,E)}var ll=ms.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(_){this._renderer=_.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(_){return Ae(this,_),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&_&&Object.prototype.hasOwnProperty.call(_,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Bc=ll.extend({options:{fill:!0,radius:10},initialize:function(_,E){Ae(this,E),this._latlng=ei(_),this._radius=this.options.radius},setLatLng:function(_){var E=this._latlng;return this._latlng=ei(_),this.redraw(),this.fire("move",{oldLatLng:E,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(_){return this.options.radius=this._radius=_,this.redraw()},getRadius:function(){return this._radius},setStyle:function(_){var E=_&&_.radius||this._radius;return ll.prototype.setStyle.call(this,_),this.setRadius(E),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var _=this._radius,E=this._radiusY||_,G=this._clickTolerance(),ne=[_+G,E+G];this._pxBounds=new Xn(this._point.subtract(ne),this._point.add(ne))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(_){return _.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Gc(_,E){return new Bc(_,E)}var Wc=Bc.extend({initialize:function(_,E,G){if(typeof E=="number"&&(E=d({},G,{radius:E})),Ae(this,E),this._latlng=ei(_),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(_){return this._mRadius=_,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var _=[this._radius,this._radiusY||this._radius];return new Bi(this._map.layerPointToLatLng(this._point.subtract(_)),this._map.layerPointToLatLng(this._point.add(_)))},setStyle:ll.prototype.setStyle,_project:function(){var _=this._latlng.lng,E=this._latlng.lat,G=this._map,ne=G.options.crs;if(ne.distance===ri.distance){var ge=Math.PI/180,Ne=this._mRadius/ri.R/ge,at=G.project([E+Ne,_]),Dt=G.project([E-Ne,_]),_n=at.add(Dt).divideBy(2),ni=G.unproject(_n).lat,Ti=Math.acos((Math.cos(Ne*ge)-Math.sin(E*ge)*Math.sin(ni*ge))/(Math.cos(E*ge)*Math.cos(ni*ge)))/ge;(isNaN(Ti)||Ti===0)&&(Ti=Ne/Math.cos(Math.PI/180*E)),this._point=_n.subtract(G.getPixelOrigin()),this._radius=isNaN(Ti)?0:_n.x-G.project([ni,_-Ti]).x,this._radiusY=_n.y-at.y}else{var Hi=ne.unproject(ne.project(this._latlng).subtract([this._mRadius,0]));this._point=G.latLngToLayerPoint(this._latlng),this._radius=this._point.x-G.latLngToLayerPoint(Hi).x}this._updateBounds()}});function Zs(_,E,G){return new Wc(_,E,G)}var oa=ll.extend({options:{smoothFactor:1,noClip:!1},initialize:function(_,E){Ae(this,E),this._setLatLngs(_)},getLatLngs:function(){return this._latlngs},setLatLngs:function(_){return this._setLatLngs(_),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(_){for(var E=1/0,G=null,ne=Ru,ge,Ne,at=0,Dt=this._parts.length;at<Dt;at++)for(var _n=this._parts[at],ni=1,Ti=_n.length;ni<Ti;ni++){ge=_n[ni-1],Ne=_n[ni];var Hi=ne(_,ge,Ne,!0);Hi<E&&(E=Hi,G=ne(_,ge,Ne))}return G&&(G.distance=Math.sqrt(E)),G},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ah(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(_,E){return E=E||this._defaultShape(),_=ei(_),E.push(_),this._bounds.extend(_),this.redraw()},_setLatLngs:function(_){this._bounds=new Bi,this._latlngs=this._convertLatLngs(_)},_defaultShape:function(){return Ra(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(_){for(var E=[],G=Ra(_),ne=0,ge=_.length;ne<ge;ne++)G?(E[ne]=ei(_[ne]),this._bounds.extend(E[ne])):E[ne]=this._convertLatLngs(_[ne]);return E},_project:function(){var _=new Xn;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,_),this._bounds.isValid()&&_.isValid()&&(this._rawPxBounds=_,this._updateBounds())},_updateBounds:function(){var _=this._clickTolerance(),E=new mn(_,_);this._rawPxBounds&&(this._pxBounds=new Xn([this._rawPxBounds.min.subtract(E),this._rawPxBounds.max.add(E)]))},_projectLatlngs:function(_,E,G){var ne=_[0]instanceof Hn,ge=_.length,Ne,at;if(ne){for(at=[],Ne=0;Ne<ge;Ne++)at[Ne]=this._map.latLngToLayerPoint(_[Ne]),G.extend(at[Ne]);E.push(at)}else for(Ne=0;Ne<ge;Ne++)this._projectLatlngs(_[Ne],E,G)},_clipPoints:function(){var _=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(_))){if(this.options.noClip){this._parts=this._rings;return}var E=this._parts,G,ne,ge,Ne,at,Dt,_n;for(G=0,ge=0,Ne=this._rings.length;G<Ne;G++)for(_n=this._rings[G],ne=0,at=_n.length;ne<at-1;ne++)Dt=Zo(_n[ne],_n[ne+1],_,ne,!0),Dt&&(E[ge]=E[ge]||[],E[ge].push(Dt[0]),(Dt[1]!==_n[ne+1]||ne===at-2)&&(E[ge].push(Dt[1]),ge++))}},_simplifyPoints:function(){for(var _=this._parts,E=this.options.smoothFactor,G=0,ne=_.length;G<ne;G++)_[G]=Vo(_[G],E)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(_,E){var G,ne,ge,Ne,at,Dt,_n=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(_))return!1;for(G=0,Ne=this._parts.length;G<Ne;G++)for(Dt=this._parts[G],ne=0,at=Dt.length,ge=at-1;ne<at;ge=ne++)if(!(!E&&ne===0)&&$l(_,Dt[ge],Dt[ne])<=_n)return!0;return!1}});function $u(_,E){return new oa(_,E)}oa._flat=Ou;var Tc=oa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ql(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(_){var E=oa.prototype._convertLatLngs.call(this,_),G=E.length;return G>=2&&E[0]instanceof Hn&&E[0].equals(E[G-1])&&E.pop(),E},_setLatLngs:function(_){oa.prototype._setLatLngs.call(this,_),Ra(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ra(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var _=this._renderer._bounds,E=this.options.weight,G=new mn(E,E);if(_=new Xn(_.min.subtract(G),_.max.add(G)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(_))){if(this.options.noClip){this._parts=this._rings;return}for(var ne=0,ge=this._rings.length,Ne;ne<ge;ne++)Ne=pu(this._rings[ne],_,!0),Ne.length&&this._parts.push(Ne)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(_){var E=!1,G,ne,ge,Ne,at,Dt,_n,ni;if(!this._pxBounds||!this._pxBounds.contains(_))return!1;for(Ne=0,_n=this._parts.length;Ne<_n;Ne++)for(G=this._parts[Ne],at=0,ni=G.length,Dt=ni-1;at<ni;Dt=at++)ne=G[at],ge=G[Dt],ne.y>_.y!=ge.y>_.y&&_.x<(ge.x-ne.x)*(_.y-ne.y)/(ge.y-ne.y)+ne.x&&(E=!E);return E||oa.prototype._containsPoint.call(this,_,!0)}});function mh(_,E){return new Tc(_,E)}var Ia=sl.extend({initialize:function(_,E){Ae(this,E),this._layers={},_&&this.addData(_)},addData:function(_){var E=Te(_)?_:_.features,G,ne,ge;if(E){for(G=0,ne=E.length;G<ne;G++)ge=E[G],(ge.geometries||ge.geometry||ge.features||ge.coordinates)&&this.addData(ge);return this}var Ne=this.options;if(Ne.filter&&!Ne.filter(_))return this;var at=Ga(_,Ne);return at?(at.feature=Wa(_),at.defaultOptions=at.options,this.resetStyle(at),Ne.onEachFeature&&Ne.onEachFeature(_,at),this.addLayer(at)):this},resetStyle:function(_){return _===void 0?this.eachLayer(this.resetStyle,this):(_.options=d({},_.defaultOptions),this._setLayerStyle(_,this.options.style),this)},setStyle:function(_){return this.eachLayer(function(E){this._setLayerStyle(E,_)},this)},_setLayerStyle:function(_,E){_.setStyle&&(typeof E=="function"&&(E=E(_.feature)),_.setStyle(E))}});function Ga(_,E){var G=_.type==="Feature"?_.geometry:_,ne=G?G.coordinates:null,ge=[],Ne=E&&E.pointToLayer,at=E&&E.coordsToLatLng||cc,Dt,_n,ni,Ti;if(!ne&&!G)return null;switch(G.type){case"Point":return Dt=at(ne),gh(Ne,_,Dt,E);case"MultiPoint":for(ni=0,Ti=ne.length;ni<Ti;ni++)Dt=at(ne[ni]),ge.push(gh(Ne,_,Dt,E));return new sl(ge);case"LineString":case"MultiLineString":return _n=Kc(ne,G.type==="LineString"?0:1,at),new oa(_n,E);case"Polygon":case"MultiPolygon":return _n=Kc(ne,G.type==="Polygon"?1:2,at),new Tc(_n,E);case"GeometryCollection":for(ni=0,Ti=G.geometries.length;ni<Ti;ni++){var Hi=Ga({geometry:G.geometries[ni],type:"Feature",properties:_.properties},E);Hi&&ge.push(Hi)}return new sl(ge);case"FeatureCollection":for(ni=0,Ti=G.features.length;ni<Ti;ni++){var kr=Ga(G.features[ni],E);kr&&ge.push(kr)}return new sl(ge);default:throw new Error("Invalid GeoJSON object.")}}function gh(_,E,G,ne){return _?_(E,G):new Qu(G,ne&&ne.markersInheritOptions&&ne)}function cc(_){return new Hn(_[1],_[0],_[2])}function Kc(_,E,G){for(var ne=[],ge=0,Ne=_.length,at;ge<Ne;ge++)at=E?Kc(_[ge],E-1,G):(G||cc)(_[ge]),ne.push(at);return ne}function vu(_,E){return _=ei(_),_.alt!==void 0?[q(_.lng,E),q(_.lat,E),q(_.alt,E)]:[q(_.lng,E),q(_.lat,E)]}function Ec(_,E,G,ne){for(var ge=[],Ne=0,at=_.length;Ne<at;Ne++)ge.push(E?Ec(_[Ne],Ra(_[Ne])?0:E-1,G,ne):vu(_[Ne],ne));return!E&&G&&ge.length>0&&ge.push(ge[0].slice()),ge}function xa(_,E){return _.feature?d({},_.feature,{geometry:E}):Wa(E)}function Wa(_){return _.type==="Feature"||_.type==="FeatureCollection"?_:{type:"Feature",properties:{},geometry:_}}var jt={toGeoJSON:function(_){return xa(this,{type:"Point",coordinates:vu(this.getLatLng(),_)})}};Qu.include(jt),Wc.include(jt),Bc.include(jt),oa.include({toGeoJSON:function(_){var E=!Ra(this._latlngs),G=Ec(this._latlngs,E?1:0,!1,_);return xa(this,{type:(E?"Multi":"")+"LineString",coordinates:G})}}),Tc.include({toGeoJSON:function(_){var E=!Ra(this._latlngs),G=E&&!Ra(this._latlngs[0]),ne=Ec(this._latlngs,G?2:E?1:0,!0,_);return E||(ne=[ne]),xa(this,{type:(G?"Multi":"")+"Polygon",coordinates:ne})}}),va.include({toMultiPoint:function(_){var E=[];return this.eachLayer(function(G){E.push(G.toGeoJSON(_).geometry.coordinates)}),xa(this,{type:"MultiPoint",coordinates:E})},toGeoJSON:function(_){var E=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(E==="MultiPoint")return this.toMultiPoint(_);var G=E==="GeometryCollection",ne=[];return this.eachLayer(function(ge){if(ge.toGeoJSON){var Ne=ge.toGeoJSON(_);if(G)ne.push(Ne.geometry);else{var at=Wa(Ne);at.type==="FeatureCollection"?ne.push.apply(ne,at.features):ne.push(at)}}}),G?xa(this,{geometries:ne,type:"GeometryCollection"}):{type:"FeatureCollection",features:ne}}});function Dn(_,E){return new Ia(_,E)}var wn=Dn,Ui=ms.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(_,E,G){this._url=_,this._bounds=Bn(E),Ae(this,G)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Jr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Dr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(_){return this.options.opacity=_,this._image&&this._updateOpacity(),this},setStyle:function(_){return _.opacity&&this.setOpacity(_.opacity),this},bringToFront:function(){return this._map&&xc(this._image),this},bringToBack:function(){return this._map&&ca(this._image),this},setUrl:function(_){return this._url=_,this._image&&(this._image.src=_),this},setBounds:function(_){return this._bounds=Bn(_),this._map&&this._reset(),this},getEvents:function(){var _={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(_.zoomanim=this._animateZoom),_},setZIndex:function(_){return this.options.zIndex=_,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var _=this._url.tagName==="IMG",E=this._image=_?this._url:Wr("img");if(Jr(E,"leaflet-image-layer"),this._zoomAnimated&&Jr(E,"leaflet-zoom-animated"),this.options.className&&Jr(E,this.options.className),E.onselectstart=V,E.onmousemove=V,E.onload=v(this.fire,this,"load"),E.onerror=v(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),_){this._url=E.src;return}E.src=this._url,E.alt=this.options.alt},_animateZoom:function(_){var E=this._map.getZoomScale(_.zoom),G=this._map._latLngBoundsToNewLayerBounds(this._bounds,_.zoom,_.center).min;Lr(this._image,G,E)},_reset:function(){var _=this._image,E=new Xn(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),G=E.getSize();Io(_,E.min),_.style.width=G.x+"px",_.style.height=G.y+"px"},_updateOpacity:function(){_r(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var _=this.options.errorOverlayUrl;_&&this._url!==_&&(this._url=_,this._image.src=_)},getCenter:function(){return this._bounds.getCenter()}}),Br=function(_,E,G){return new Ui(_,E,G)},po=Ui.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var _=this._url.tagName==="VIDEO",E=this._image=_?this._url:Wr("video");if(Jr(E,"leaflet-image-layer"),this._zoomAnimated&&Jr(E,"leaflet-zoom-animated"),this.options.className&&Jr(E,this.options.className),E.onselectstart=V,E.onmousemove=V,E.onloadeddata=v(this.fire,this,"load"),_){for(var G=E.getElementsByTagName("source"),ne=[],ge=0;ge<G.length;ge++)ne.push(G[ge].src);this._url=G.length>0?ne:[E.src];return}Te(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(E.style,"objectFit")&&(E.style.objectFit="fill"),E.autoplay=!!this.options.autoplay,E.loop=!!this.options.loop,E.muted=!!this.options.muted,E.playsInline=!!this.options.playsInline;for(var Ne=0;Ne<this._url.length;Ne++){var at=Wr("source");at.src=this._url[Ne],E.appendChild(at)}}});function qs(_,E,G){return new po(_,E,G)}var as=Ui.extend({_initImage:function(){var _=this._image=this._url;Jr(_,"leaflet-image-layer"),this._zoomAnimated&&Jr(_,"leaflet-zoom-animated"),this.options.className&&Jr(_,this.options.className),_.onselectstart=V,_.onmousemove=V}});function _d(_,E,G){return new as(_,E,G)}var wl=ms.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(_,E){_&&(_ instanceof Hn||Te(_))?(this._latlng=ei(_),Ae(this,E)):(Ae(this,_),this._source=E),this.options.content&&(this._content=this.options.content)},openOn:function(_){return _=arguments.length?_:this._source._map,_.hasLayer(this)||_.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(_){return this._map?this.close():(arguments.length?this._source=_:_=this._source,this._prepareOpen(),this.openOn(_._map)),this},onAdd:function(_){this._zoomAnimated=_._zoomAnimated,this._container||this._initLayout(),_._fadeAnimated&&_r(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),_._fadeAnimated&&_r(this._container,1),this.bringToFront(),this.options.interactive&&(Jr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(_){_._fadeAnimated?(_r(this._container,0),this._removeTimeout=setTimeout(v(Dr,void 0,this._container),200)):Dr(this._container),this.options.interactive&&(Wo(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(_){return this._latlng=ei(_),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(_){return this._content=_,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var _={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(_.zoomanim=this._animateZoom),_},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&xc(this._container),this},bringToBack:function(){return this._map&&ca(this._container),this},_prepareOpen:function(_){var E=this._source;if(!E._map)return!1;if(E instanceof sl){E=null;var G=this._source._layers;for(var ne in G)if(G[ne]._map){E=G[ne];break}if(!E)return!1;this._source=E}if(!_)if(E.getCenter)_=E.getCenter();else if(E.getLatLng)_=E.getLatLng();else if(E.getBounds)_=E.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(_),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var _=this._contentNode,E=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof E=="string")_.innerHTML=E;else{for(;_.hasChildNodes();)_.removeChild(_.firstChild);_.appendChild(E)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var _=this._map.latLngToLayerPoint(this._latlng),E=Qt(this.options.offset),G=this._getAnchor();this._zoomAnimated?Io(this._container,_.add(G)):E=E.add(_).add(G);var ne=this._containerBottom=-E.y,ge=this._containerLeft=-Math.round(this._containerWidth/2)+E.x;this._container.style.bottom=ne+"px",this._container.style.left=ge+"px"}},_getAnchor:function(){return[0,0]}});Mo.include({_initOverlay:function(_,E,G,ne){var ge=E;return ge instanceof _||(ge=new _(ne).setContent(E)),G&&ge.setLatLng(G),ge}}),ms.include({_initOverlay:function(_,E,G,ne){var ge=G;return ge instanceof _?(Ae(ge,ne),ge._source=this):(ge=E&&!ne?E:new _(ne,this),ge.setContent(G)),ge}});var ha=wl.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(_){return _=arguments.length?_:this._source._map,!_.hasLayer(this)&&_._popup&&_._popup.options.autoClose&&_.removeLayer(_._popup),_._popup=this,wl.prototype.openOn.call(this,_)},onAdd:function(_){wl.prototype.onAdd.call(this,_),_.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ll||this._source.on("preclick",eo))},onRemove:function(_){wl.prototype.onRemove.call(this,_),_.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ll||this._source.off("preclick",eo))},getEvents:function(){var _=wl.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(_.preclick=this.close),this.options.keepInView&&(_.moveend=this._adjustPan),_},_initLayout:function(){var _="leaflet-popup",E=this._container=Wr("div",_+" "+(this.options.className||"")+" leaflet-zoom-animated"),G=this._wrapper=Wr("div",_+"-content-wrapper",E);if(this._contentNode=Wr("div",_+"-content",G),jc(E),fs(this._contentNode),br(E,"contextmenu",eo),this._tipContainer=Wr("div",_+"-tip-container",E),this._tip=Wr("div",_+"-tip",this._tipContainer),this.options.closeButton){var ne=this._closeButton=Wr("a",_+"-close-button",E);ne.setAttribute("role","button"),ne.setAttribute("aria-label","Close popup"),ne.href="#close",ne.innerHTML='<span aria-hidden="true">&#215;</span>',br(ne,"click",function(ge){Rr(ge),this.close()},this)}},_updateLayout:function(){var _=this._contentNode,E=_.style;E.width="",E.whiteSpace="nowrap";var G=_.offsetWidth;G=Math.min(G,this.options.maxWidth),G=Math.max(G,this.options.minWidth),E.width=G+1+"px",E.whiteSpace="",E.height="";var ne=_.offsetHeight,ge=this.options.maxHeight,Ne="leaflet-popup-scrolled";ge&&ne>ge?(E.height=ge+"px",Jr(_,Ne)):Wo(_,Ne),this._containerWidth=this._container.offsetWidth},_animateZoom:function(_){var E=this._map._latLngToNewLayerPoint(this._latlng,_.zoom,_.center),G=this._getAnchor();Io(this._container,E.add(G))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var _=this._map,E=parseInt(hn(this._container,"marginBottom"),10)||0,G=this._container.offsetHeight+E,ne=this._containerWidth,ge=new mn(this._containerLeft,-G-this._containerBottom);ge._add(Sa(this._container));var Ne=_.layerPointToContainerPoint(ge),at=Qt(this.options.autoPanPadding),Dt=Qt(this.options.autoPanPaddingTopLeft||at),_n=Qt(this.options.autoPanPaddingBottomRight||at),ni=_.getSize(),Ti=0,Hi=0;Ne.x+ne+_n.x>ni.x&&(Ti=Ne.x+ne-ni.x+_n.x),Ne.x-Ti-Dt.x<0&&(Ti=Ne.x-Dt.x),Ne.y+G+_n.y>ni.y&&(Hi=Ne.y+G-ni.y+_n.y),Ne.y-Hi-Dt.y<0&&(Hi=Ne.y-Dt.y),(Ti||Hi)&&(this.options.keepInView&&(this._autopanning=!0),_.fire("autopanstart").panBy([Ti,Hi]))}},_getAnchor:function(){return Qt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Cl=function(_,E){return new ha(_,E)};Mo.mergeOptions({closePopupOnClick:!0}),Mo.include({openPopup:function(_,E,G){return this._initOverlay(ha,_,E,G).openOn(this),this},closePopup:function(_){return _=arguments.length?_:this._popup,_&&_.close(),this}}),ms.include({bindPopup:function(_,E){return this._popup=this._initOverlay(ha,this._popup,_,E),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(_){return this._popup&&(this instanceof sl||(this._popup._source=this),this._popup._prepareOpen(_||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(_){return this._popup&&this._popup.setContent(_),this},getPopup:function(){return this._popup},_openPopup:function(_){if(!(!this._popup||!this._map)){ao(_);var E=_.layer||_.target;if(this._popup._source===E&&!(E instanceof ll)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(_.latlng);return}this._popup._source=E,this.openPopup(_.latlng)}},_movePopup:function(_){this._popup.setLatLng(_.latlng)},_onKeyPress:function(_){_.originalEvent.keyCode===13&&this._openPopup(_)}});var Mi=wl.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(_){wl.prototype.onAdd.call(this,_),this.setOpacity(this.options.opacity),_.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(_){wl.prototype.onRemove.call(this,_),_.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var _=wl.prototype.getEvents.call(this);return this.options.permanent||(_.preclick=this.close),_},_initLayout:function(){var _="leaflet-tooltip",E=_+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Wr("div",E),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(_){var E,G,ne=this._map,ge=this._container,Ne=ne.latLngToContainerPoint(ne.getCenter()),at=ne.layerPointToContainerPoint(_),Dt=this.options.direction,_n=ge.offsetWidth,ni=ge.offsetHeight,Ti=Qt(this.options.offset),Hi=this._getAnchor();Dt==="top"?(E=_n/2,G=ni):Dt==="bottom"?(E=_n/2,G=0):Dt==="center"?(E=_n/2,G=ni/2):Dt==="right"?(E=0,G=ni/2):Dt==="left"?(E=_n,G=ni/2):at.x<Ne.x?(Dt="right",E=0,G=ni/2):(Dt="left",E=_n+(Ti.x+Hi.x)*2,G=ni/2),_=_.subtract(Qt(E,G,!0)).add(Ti).add(Hi),Wo(ge,"leaflet-tooltip-right"),Wo(ge,"leaflet-tooltip-left"),Wo(ge,"leaflet-tooltip-top"),Wo(ge,"leaflet-tooltip-bottom"),Jr(ge,"leaflet-tooltip-"+Dt),Io(ge,_)},_updatePosition:function(){var _=this._map.latLngToLayerPoint(this._latlng);this._setPosition(_)},setOpacity:function(_){this.options.opacity=_,this._container&&_r(this._container,_)},_animateZoom:function(_){var E=this._map._latLngToNewLayerPoint(this._latlng,_.zoom,_.center);this._setPosition(E)},_getAnchor:function(){return Qt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Hl=function(_,E){return new Mi(_,E)};Mo.include({openTooltip:function(_,E,G){return this._initOverlay(Mi,_,E,G).openOn(this),this},closeTooltip:function(_){return _.close(),this}}),ms.include({bindTooltip:function(_,E){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Mi,this._tooltip,_,E),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(_){if(!(!_&&this._tooltipHandlersAdded)){var E=_?"off":"on",G={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?G.add=this._openTooltip:(G.mouseover=this._openTooltip,G.mouseout=this.closeTooltip,G.click=this._openTooltip,this._map?this._addFocusListeners():G.add=this._addFocusListeners),this._tooltip.options.sticky&&(G.mousemove=this._moveTooltip),this[E](G),this._tooltipHandlersAdded=!_}},openTooltip:function(_){return this._tooltip&&(this instanceof sl||(this._tooltip._source=this),this._tooltip._prepareOpen(_)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(_){return this._tooltip&&this._tooltip.setContent(_),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(_){var E=typeof _.getElement=="function"&&_.getElement();E&&(br(E,"focus",function(){this._tooltip._source=_,this.openTooltip()},this),br(E,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(_){var E=typeof _.getElement=="function"&&_.getElement();E&&E.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(_){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var E=this;this._map.once("moveend",function(){E._openOnceFlag=!1,E._openTooltip(_)});return}this._tooltip._source=_.layer||_.target,this.openTooltip(this._tooltip.options.sticky?_.latlng:void 0)}},_moveTooltip:function(_){var E=_.latlng,G,ne;this._tooltip.options.sticky&&_.originalEvent&&(G=this._map.mouseEventToContainerPoint(_.originalEvent),ne=this._map.containerPointToLayerPoint(G),E=this._map.layerPointToLatLng(ne)),this._tooltip.setLatLng(E)}});var Vl=al.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(_){var E=_&&_.tagName==="DIV"?_:document.createElement("div"),G=this.options;if(G.html instanceof Element?(Mr(E),E.appendChild(G.html)):E.innerHTML=G.html!==!1?G.html:"",G.bgPos){var ne=Qt(G.bgPos);E.style.backgroundPosition=-ne.x+"px "+-ne.y+"px"}return this._setIconStyles(E,"icon"),E},createShadow:function(){return null}});function Gl(_){return new Vl(_)}al.Default=ac;var no=ms.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Pe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(_){Ae(this,_)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(_){_._addZoomLimit(this)},onRemove:function(_){this._removeAllTiles(),Dr(this._container),_._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(xc(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ca(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(_){return this.options.opacity=_,this._updateOpacity(),this},setZIndex:function(_){return this.options.zIndex=_,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var _=this._clampZoom(this._map.getZoom());_!==this._tileZoom&&(this._tileZoom=_,this._updateLevels()),this._update()}return this},getEvents:function(){var _={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=U(this._onMoveEnd,this.options.updateInterval,this)),_.move=this._onMove),this._zoomAnimated&&(_.zoomanim=this._animateZoom),_},createTile:function(){return document.createElement("div")},getTileSize:function(){var _=this.options.tileSize;return _ instanceof mn?_:new mn(_,_)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(_){for(var E=this.getPane().children,G=-_(-1/0,1/0),ne=0,ge=E.length,Ne;ne<ge;ne++)Ne=E[ne].style.zIndex,E[ne]!==this._container&&Ne&&(G=_(G,+Ne));isFinite(G)&&(this.options.zIndex=G+_(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Pe.ielt9){_r(this._container,this.options.opacity);var _=+new Date,E=!1,G=!1;for(var ne in this._tiles){var ge=this._tiles[ne];if(!(!ge.current||!ge.loaded)){var Ne=Math.min(1,(_-ge.loaded)/200);_r(ge.el,Ne),Ne<1?E=!0:(ge.active?G=!0:this._onOpaqueTile(ge),ge.active=!0)}}G&&!this._noPrune&&this._pruneTiles(),E&&(rn(this._fadeFrame),this._fadeFrame=qt(this._updateOpacity,this))}},_onOpaqueTile:V,_initContainer:function(){this._container||(this._container=Wr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var _=this._tileZoom,E=this.options.maxZoom;if(_!==void 0){for(var G in this._levels)G=Number(G),this._levels[G].el.children.length||G===_?(this._levels[G].el.style.zIndex=E-Math.abs(_-G),this._onUpdateLevel(G)):(Dr(this._levels[G].el),this._removeTilesAtZoom(G),this._onRemoveLevel(G),delete this._levels[G]);var ne=this._levels[_],ge=this._map;return ne||(ne=this._levels[_]={},ne.el=Wr("div","leaflet-tile-container leaflet-zoom-animated",this._container),ne.el.style.zIndex=E,ne.origin=ge.project(ge.unproject(ge.getPixelOrigin()),_).round(),ne.zoom=_,this._setZoomTransform(ne,ge.getCenter(),ge.getZoom()),V(ne.el.offsetWidth),this._onCreateLevel(ne)),this._level=ne,ne}},_onUpdateLevel:V,_onRemoveLevel:V,_onCreateLevel:V,_pruneTiles:function(){if(this._map){var _,E,G=this._map.getZoom();if(G>this.options.maxZoom||G<this.options.minZoom){this._removeAllTiles();return}for(_ in this._tiles)E=this._tiles[_],E.retain=E.current;for(_ in this._tiles)if(E=this._tiles[_],E.current&&!E.active){var ne=E.coords;this._retainParent(ne.x,ne.y,ne.z,ne.z-5)||this._retainChildren(ne.x,ne.y,ne.z,ne.z+2)}for(_ in this._tiles)this._tiles[_].retain||this._removeTile(_)}},_removeTilesAtZoom:function(_){for(var E in this._tiles)this._tiles[E].coords.z===_&&this._removeTile(E)},_removeAllTiles:function(){for(var _ in this._tiles)this._removeTile(_)},_invalidateAll:function(){for(var _ in this._levels)Dr(this._levels[_].el),this._onRemoveLevel(Number(_)),delete this._levels[_];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(_,E,G,ne){var ge=Math.floor(_/2),Ne=Math.floor(E/2),at=G-1,Dt=new mn(+ge,+Ne);Dt.z=+at;var _n=this._tileCoordsToKey(Dt),ni=this._tiles[_n];return ni&&ni.active?(ni.retain=!0,!0):(ni&&ni.loaded&&(ni.retain=!0),at>ne?this._retainParent(ge,Ne,at,ne):!1)},_retainChildren:function(_,E,G,ne){for(var ge=2*_;ge<2*_+2;ge++)for(var Ne=2*E;Ne<2*E+2;Ne++){var at=new mn(ge,Ne);at.z=G+1;var Dt=this._tileCoordsToKey(at),_n=this._tiles[Dt];if(_n&&_n.active){_n.retain=!0;continue}else _n&&_n.loaded&&(_n.retain=!0);G+1<ne&&this._retainChildren(ge,Ne,G+1,ne)}},_resetView:function(_){var E=_&&(_.pinch||_.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),E,E)},_animateZoom:function(_){this._setView(_.center,_.zoom,!0,_.noUpdate)},_clampZoom:function(_){var E=this.options;return E.minNativeZoom!==void 0&&_<E.minNativeZoom?E.minNativeZoom:E.maxNativeZoom!==void 0&&E.maxNativeZoom<_?E.maxNativeZoom:_},_setView:function(_,E,G,ne){var ge=Math.round(E);this.options.maxZoom!==void 0&&ge>this.options.maxZoom||this.options.minZoom!==void 0&&ge<this.options.minZoom?ge=void 0:ge=this._clampZoom(ge);var Ne=this.options.updateWhenZooming&&ge!==this._tileZoom;(!ne||Ne)&&(this._tileZoom=ge,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ge!==void 0&&this._update(_),G||this._pruneTiles(),this._noPrune=!!G),this._setZoomTransforms(_,E)},_setZoomTransforms:function(_,E){for(var G in this._levels)this._setZoomTransform(this._levels[G],_,E)},_setZoomTransform:function(_,E,G){var ne=this._map.getZoomScale(G,_.zoom),ge=_.origin.multiplyBy(ne).subtract(this._map._getNewPixelOrigin(E,G)).round();Pe.any3d?Lr(_.el,ge,ne):Io(_.el,ge)},_resetGrid:function(){var _=this._map,E=_.options.crs,G=this._tileSize=this.getTileSize(),ne=this._tileZoom,ge=this._map.getPixelWorldBounds(this._tileZoom);ge&&(this._globalTileRange=this._pxBoundsToTileRange(ge)),this._wrapX=E.wrapLng&&!this.options.noWrap&&[Math.floor(_.project([0,E.wrapLng[0]],ne).x/G.x),Math.ceil(_.project([0,E.wrapLng[1]],ne).x/G.y)],this._wrapY=E.wrapLat&&!this.options.noWrap&&[Math.floor(_.project([E.wrapLat[0],0],ne).y/G.x),Math.ceil(_.project([E.wrapLat[1],0],ne).y/G.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(_){var E=this._map,G=E._animatingZoom?Math.max(E._animateToZoom,E.getZoom()):E.getZoom(),ne=E.getZoomScale(G,this._tileZoom),ge=E.project(_,this._tileZoom).floor(),Ne=E.getSize().divideBy(ne*2);return new Xn(ge.subtract(Ne),ge.add(Ne))},_update:function(_){var E=this._map;if(E){var G=this._clampZoom(E.getZoom());if(_===void 0&&(_=E.getCenter()),this._tileZoom!==void 0){var ne=this._getTiledPixelBounds(_),ge=this._pxBoundsToTileRange(ne),Ne=ge.getCenter(),at=[],Dt=this.options.keepBuffer,_n=new Xn(ge.getBottomLeft().subtract([Dt,-Dt]),ge.getTopRight().add([Dt,-Dt]));if(!(isFinite(ge.min.x)&&isFinite(ge.min.y)&&isFinite(ge.max.x)&&isFinite(ge.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ni in this._tiles){var Ti=this._tiles[ni].coords;(Ti.z!==this._tileZoom||!_n.contains(new mn(Ti.x,Ti.y)))&&(this._tiles[ni].current=!1)}if(Math.abs(G-this._tileZoom)>1){this._setView(_,G);return}for(var Hi=ge.min.y;Hi<=ge.max.y;Hi++)for(var kr=ge.min.x;kr<=ge.max.x;kr++){var zo=new mn(kr,Hi);if(zo.z=this._tileZoom,!!this._isValidTile(zo)){var ws=this._tiles[this._tileCoordsToKey(zo)];ws?ws.current=!0:at.push(zo)}}if(at.sort(function(Lo,Uo){return Lo.distanceTo(Ne)-Uo.distanceTo(Ne)}),at.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ps=document.createDocumentFragment();for(kr=0;kr<at.length;kr++)this._addTile(at[kr],Ps);this._level.el.appendChild(Ps)}}}},_isValidTile:function(_){var E=this._map.options.crs;if(!E.infinite){var G=this._globalTileRange;if(!E.wrapLng&&(_.x<G.min.x||_.x>G.max.x)||!E.wrapLat&&(_.y<G.min.y||_.y>G.max.y))return!1}if(!this.options.bounds)return!0;var ne=this._tileCoordsToBounds(_);return Bn(this.options.bounds).overlaps(ne)},_keyToBounds:function(_){return this._tileCoordsToBounds(this._keyToTileCoords(_))},_tileCoordsToNwSe:function(_){var E=this._map,G=this.getTileSize(),ne=_.scaleBy(G),ge=ne.add(G),Ne=E.unproject(ne,_.z),at=E.unproject(ge,_.z);return[Ne,at]},_tileCoordsToBounds:function(_){var E=this._tileCoordsToNwSe(_),G=new Bi(E[0],E[1]);return this.options.noWrap||(G=this._map.wrapLatLngBounds(G)),G},_tileCoordsToKey:function(_){return _.x+":"+_.y+":"+_.z},_keyToTileCoords:function(_){var E=_.split(":"),G=new mn(+E[0],+E[1]);return G.z=+E[2],G},_removeTile:function(_){var E=this._tiles[_];E&&(Dr(E.el),delete this._tiles[_],this.fire("tileunload",{tile:E.el,coords:this._keyToTileCoords(_)}))},_initTile:function(_){Jr(_,"leaflet-tile");var E=this.getTileSize();_.style.width=E.x+"px",_.style.height=E.y+"px",_.onselectstart=V,_.onmousemove=V,Pe.ielt9&&this.options.opacity<1&&_r(_,this.options.opacity)},_addTile:function(_,E){var G=this._getTilePos(_),ne=this._tileCoordsToKey(_),ge=this.createTile(this._wrapCoords(_),v(this._tileReady,this,_));this._initTile(ge),this.createTile.length<2&&qt(v(this._tileReady,this,_,null,ge)),Io(ge,G),this._tiles[ne]={el:ge,coords:_,current:!0},E.appendChild(ge),this.fire("tileloadstart",{tile:ge,coords:_})},_tileReady:function(_,E,G){E&&this.fire("tileerror",{error:E,tile:G,coords:_});var ne=this._tileCoordsToKey(_);G=this._tiles[ne],G&&(G.loaded=+new Date,this._map._fadeAnimated?(_r(G.el,0),rn(this._fadeFrame),this._fadeFrame=qt(this._updateOpacity,this)):(G.active=!0,this._pruneTiles()),E||(Jr(G.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:G.el,coords:_})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Pe.ielt9||!this._map._fadeAnimated?qt(this._pruneTiles,this):setTimeout(v(this._pruneTiles,this),250)))},_getTilePos:function(_){return _.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(_){var E=new mn(this._wrapX?$(_.x,this._wrapX):_.x,this._wrapY?$(_.y,this._wrapY):_.y);return E.z=_.z,E},_pxBoundsToTileRange:function(_){var E=this.getTileSize();return new Xn(_.min.unscaleBy(E).floor(),_.max.unscaleBy(E).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var _ in this._tiles)if(!this._tiles[_].loaded)return!1;return!0}});function wi(_){return new no(_)}var Xs=no.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(_,E){this._url=_,E=Ae(this,E),E.detectRetina&&Pe.retina&&E.maxZoom>0?(E.tileSize=Math.floor(E.tileSize/2),E.zoomReverse?(E.zoomOffset--,E.minZoom=Math.min(E.maxZoom,E.minZoom+1)):(E.zoomOffset++,E.maxZoom=Math.max(E.minZoom,E.maxZoom-1)),E.minZoom=Math.max(0,E.minZoom)):E.zoomReverse?E.minZoom=Math.min(E.maxZoom,E.minZoom):E.maxZoom=Math.max(E.minZoom,E.maxZoom),typeof E.subdomains=="string"&&(E.subdomains=E.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(_,E){return this._url===_&&E===void 0&&(E=!0),this._url=_,E||this.redraw(),this},createTile:function(_,E){var G=document.createElement("img");return br(G,"load",v(this._tileOnLoad,this,E,G)),br(G,"error",v(this._tileOnError,this,E,G)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(G.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(G.referrerPolicy=this.options.referrerPolicy),G.alt="",G.src=this.getTileUrl(_),G},getTileUrl:function(_){var E={r:Pe.retina?"@2x":"",s:this._getSubdomain(_),x:_.x,y:_.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var G=this._globalTileRange.max.y-_.y;this.options.tms&&(E.y=G),E["-y"]=G}return xe(this._url,d(E,this.options))},_tileOnLoad:function(_,E){Pe.ielt9?setTimeout(v(_,this,null,E),0):_(null,E)},_tileOnError:function(_,E,G){var ne=this.options.errorTileUrl;ne&&E.getAttribute("src")!==ne&&(E.src=ne),_(G,E)},_onTileRemove:function(_){_.tile.onload=null},_getZoomForUrl:function(){var _=this._tileZoom,E=this.options.maxZoom,G=this.options.zoomReverse,ne=this.options.zoomOffset;return G&&(_=E-_),_+ne},_getSubdomain:function(_){var E=Math.abs(_.x+_.y)%this.options.subdomains.length;return this.options.subdomains[E]},_abortLoading:function(){var _,E;for(_ in this._tiles)if(this._tiles[_].coords.z!==this._tileZoom&&(E=this._tiles[_].el,E.onload=V,E.onerror=V,!E.complete)){E.src=Fe;var G=this._tiles[_].coords;Dr(E),delete this._tiles[_],this.fire("tileabort",{tile:E,coords:G})}},_removeTile:function(_){var E=this._tiles[_];if(E)return E.el.setAttribute("src",Fe),no.prototype._removeTile.call(this,_)},_tileReady:function(_,E,G){if(!(!this._map||G&&G.getAttribute("src")===Fe))return no.prototype._tileReady.call(this,_,E,G)}});function Zc(_,E){return new Xs(_,E)}var Uh=Xs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(_,E){this._url=_;var G=d({},this.defaultWmsParams);for(var ne in E)ne in this.options||(G[ne]=E[ne]);E=Ae(this,E);var ge=E.detectRetina&&Pe.retina?2:1,Ne=this.getTileSize();G.width=Ne.x*ge,G.height=Ne.y*ge,this.wmsParams=G},onAdd:function(_){this._crs=this.options.crs||_.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var E=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[E]=this._crs.code,Xs.prototype.onAdd.call(this,_)},getTileUrl:function(_){var E=this._tileCoordsToNwSe(_),G=this._crs,ne=Wn(G.project(E[0]),G.project(E[1])),ge=ne.min,Ne=ne.max,at=(this._wmsVersion>=1.3&&this._crs===Vc?[ge.y,ge.x,Ne.y,Ne.x]:[ge.x,ge.y,Ne.x,Ne.y]).join(","),Dt=Xs.prototype.getTileUrl.call(this,_);return Dt+De(this.wmsParams,Dt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+at},setParams:function(_,E){return d(this.wmsParams,_),E||this.redraw(),this}});function qc(_,E){return new Uh(_,E)}Xs.WMS=Uh,Zc.wms=qc;var Ka=ms.extend({options:{padding:.1},initialize:function(_){Ae(this,_),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Jr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var _={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(_.zoomanim=this._onAnimZoom),_},_onAnimZoom:function(_){this._updateTransform(_.center,_.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(_,E){var G=this._map.getZoomScale(E,this._zoom),ne=this._map.getSize().multiplyBy(.5+this.options.padding),ge=this._map.project(this._center,E),Ne=ne.multiplyBy(-G).add(ge).subtract(this._map._getNewPixelOrigin(_,E));Pe.any3d?Lr(this._container,Ne,G):Io(this._container,Ne)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var _ in this._layers)this._layers[_]._reset()},_onZoomEnd:function(){for(var _ in this._layers)this._layers[_]._project()},_updatePaths:function(){for(var _ in this._layers)this._layers[_]._update()},_update:function(){var _=this.options.padding,E=this._map.getSize(),G=this._map.containerPointToLayerPoint(E.multiplyBy(-_)).round();this._bounds=new Xn(G,G.add(E.multiplyBy(1+_*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Xc=Ka.extend({options:{tolerance:0},getEvents:function(){var _=Ka.prototype.getEvents.call(this);return _.viewprereset=this._onViewPreReset,_},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ka.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var _=this._container=document.createElement("canvas");br(_,"mousemove",this._onMouseMove,this),br(_,"click dblclick mousedown mouseup contextmenu",this._onClick,this),br(_,"mouseout",this._handleMouseOut,this),_._leaflet_disable_events=!0,this._ctx=_.getContext("2d")},_destroyContainer:function(){rn(this._redrawRequest),delete this._ctx,Dr(this._container),ss(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var _;this._redrawBounds=null;for(var E in this._layers)_=this._layers[E],_._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ka.prototype._update.call(this);var _=this._bounds,E=this._container,G=_.getSize(),ne=Pe.retina?2:1;Io(E,_.min),E.width=ne*G.x,E.height=ne*G.y,E.style.width=G.x+"px",E.style.height=G.y+"px",Pe.retina&&this._ctx.scale(2,2),this._ctx.translate(-_.min.x,-_.min.y),this.fire("update")}},_reset:function(){Ka.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(_){this._updateDashArray(_),this._layers[s(_)]=_;var E=_._order={layer:_,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=E),this._drawLast=E,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(_){this._requestRedraw(_)},_removePath:function(_){var E=_._order,G=E.next,ne=E.prev;G?G.prev=ne:this._drawLast=ne,ne?ne.next=G:this._drawFirst=G,delete _._order,delete this._layers[s(_)],this._requestRedraw(_)},_updatePath:function(_){this._extendRedrawBounds(_),_._project(),_._update(),this._requestRedraw(_)},_updateStyle:function(_){this._updateDashArray(_),this._requestRedraw(_)},_updateDashArray:function(_){if(typeof _.options.dashArray=="string"){var E=_.options.dashArray.split(/[, ]+/),G=[],ne,ge;for(ge=0;ge<E.length;ge++){if(ne=Number(E[ge]),isNaN(ne))return;G.push(ne)}_.options._dashArray=G}else _.options._dashArray=_.options.dashArray},_requestRedraw:function(_){this._map&&(this._extendRedrawBounds(_),this._redrawRequest=this._redrawRequest||qt(this._redraw,this))},_extendRedrawBounds:function(_){if(_._pxBounds){var E=(_.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Xn,this._redrawBounds.extend(_._pxBounds.min.subtract([E,E])),this._redrawBounds.extend(_._pxBounds.max.add([E,E]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var _=this._redrawBounds;if(_){var E=_.getSize();this._ctx.clearRect(_.min.x,_.min.y,E.x,E.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var _,E=this._redrawBounds;if(this._ctx.save(),E){var G=E.getSize();this._ctx.beginPath(),this._ctx.rect(E.min.x,E.min.y,G.x,G.y),this._ctx.clip()}this._drawing=!0;for(var ne=this._drawFirst;ne;ne=ne.next)_=ne.layer,(!E||_._pxBounds&&_._pxBounds.intersects(E))&&_._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(_,E){if(this._drawing){var G,ne,ge,Ne,at=_._parts,Dt=at.length,_n=this._ctx;if(Dt){for(_n.beginPath(),G=0;G<Dt;G++){for(ne=0,ge=at[G].length;ne<ge;ne++)Ne=at[G][ne],_n[ne?"lineTo":"moveTo"](Ne.x,Ne.y);E&&_n.closePath()}this._fillStroke(_n,_)}}},_updateCircle:function(_){if(!(!this._drawing||_._empty())){var E=_._point,G=this._ctx,ne=Math.max(Math.round(_._radius),1),ge=(Math.max(Math.round(_._radiusY),1)||ne)/ne;ge!==1&&(G.save(),G.scale(1,ge)),G.beginPath(),G.arc(E.x,E.y/ge,ne,0,Math.PI*2,!1),ge!==1&&G.restore(),this._fillStroke(G,_)}},_fillStroke:function(_,E){var G=E.options;G.fill&&(_.globalAlpha=G.fillOpacity,_.fillStyle=G.fillColor||G.color,_.fill(G.fillRule||"evenodd")),G.stroke&&G.weight!==0&&(_.setLineDash&&_.setLineDash(E.options&&E.options._dashArray||[]),_.globalAlpha=G.opacity,_.lineWidth=G.weight,_.strokeStyle=G.color,_.lineCap=G.lineCap,_.lineJoin=G.lineJoin,_.stroke())},_onClick:function(_){for(var E=this._map.mouseEventToLayerPoint(_),G,ne,ge=this._drawFirst;ge;ge=ge.next)G=ge.layer,G.options.interactive&&G._containsPoint(E)&&(!(_.type==="click"||_.type==="preclick")||!this._map._draggableMoved(G))&&(ne=G);this._fireEvent(ne?[ne]:!1,_)},_onMouseMove:function(_){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var E=this._map.mouseEventToLayerPoint(_);this._handleMouseHover(_,E)}},_handleMouseOut:function(_){var E=this._hoveredLayer;E&&(Wo(this._container,"leaflet-interactive"),this._fireEvent([E],_,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(_,E){if(!this._mouseHoverThrottled){for(var G,ne,ge=this._drawFirst;ge;ge=ge.next)G=ge.layer,G.options.interactive&&G._containsPoint(E)&&(ne=G);ne!==this._hoveredLayer&&(this._handleMouseOut(_),ne&&(Jr(this._container,"leaflet-interactive"),this._fireEvent([ne],_,"mouseover"),this._hoveredLayer=ne)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,_),this._mouseHoverThrottled=!0,setTimeout(v(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(_,E,G){this._map._fireDOMEvent(E,G||E.type,_)},_bringToFront:function(_){var E=_._order;if(E){var G=E.next,ne=E.prev;if(G)G.prev=ne;else return;ne?ne.next=G:G&&(this._drawFirst=G),E.prev=this._drawLast,this._drawLast.next=E,E.next=null,this._drawLast=E,this._requestRedraw(_)}},_bringToBack:function(_){var E=_._order;if(E){var G=E.next,ne=E.prev;if(ne)ne.next=G;else return;G?G.prev=ne:ne&&(this._drawLast=ne),E.prev=null,E.next=this._drawFirst,this._drawFirst.prev=E,this._drawFirst=E,this._requestRedraw(_)}}});function Wl(_){return Pe.canvas?new Xc(_):null}var qr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(_){return document.createElement("<lvml:"+_+' class="lvml">')}}catch{}return function(_){return document.createElement("<"+_+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),xu={_initContainer:function(){this._container=Wr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ka.prototype._update.call(this),this.fire("update"))},_initPath:function(_){var E=_._container=qr("shape");Jr(E,"leaflet-vml-shape "+(this.options.className||"")),E.coordsize="1 1",_._path=qr("path"),E.appendChild(_._path),this._updateStyle(_),this._layers[s(_)]=_},_addPath:function(_){var E=_._container;this._container.appendChild(E),_.options.interactive&&_.addInteractiveTarget(E)},_removePath:function(_){var E=_._container;Dr(E),_.removeInteractiveTarget(E),delete this._layers[s(_)]},_updateStyle:function(_){var E=_._stroke,G=_._fill,ne=_.options,ge=_._container;ge.stroked=!!ne.stroke,ge.filled=!!ne.fill,ne.stroke?(E||(E=_._stroke=qr("stroke")),ge.appendChild(E),E.weight=ne.weight+"px",E.color=ne.color,E.opacity=ne.opacity,ne.dashArray?E.dashStyle=Te(ne.dashArray)?ne.dashArray.join(" "):ne.dashArray.replace(/( *, *)/g," "):E.dashStyle="",E.endcap=ne.lineCap.replace("butt","flat"),E.joinstyle=ne.lineJoin):E&&(ge.removeChild(E),_._stroke=null),ne.fill?(G||(G=_._fill=qr("fill")),ge.appendChild(G),G.color=ne.fillColor||ne.color,G.opacity=ne.fillOpacity):G&&(ge.removeChild(G),_._fill=null)},_updateCircle:function(_){var E=_._point.round(),G=Math.round(_._radius),ne=Math.round(_._radiusY||G);this._setPath(_,_._empty()?"M0 0":"AL "+E.x+","+E.y+" "+G+","+ne+" 0,"+65535*360)},_setPath:function(_,E){_._path.v=E},_bringToFront:function(_){xc(_._container)},_bringToBack:function(_){ca(_._container)}},Sc=Pe.vml?qr:ji,uc=Ka.extend({_initContainer:function(){this._container=Sc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Sc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Dr(this._container),ss(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ka.prototype._update.call(this);var _=this._bounds,E=_.getSize(),G=this._container;(!this._svgSize||!this._svgSize.equals(E))&&(this._svgSize=E,G.setAttribute("width",E.x),G.setAttribute("height",E.y)),Io(G,_.min),G.setAttribute("viewBox",[_.min.x,_.min.y,E.x,E.y].join(" ")),this.fire("update")}},_initPath:function(_){var E=_._path=Sc("path");_.options.className&&Jr(E,_.options.className),_.options.interactive&&Jr(E,"leaflet-interactive"),this._updateStyle(_),this._layers[s(_)]=_},_addPath:function(_){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(_._path),_.addInteractiveTarget(_._path)},_removePath:function(_){Dr(_._path),_.removeInteractiveTarget(_._path),delete this._layers[s(_)]},_updatePath:function(_){_._project(),_._update()},_updateStyle:function(_){var E=_._path,G=_.options;E&&(G.stroke?(E.setAttribute("stroke",G.color),E.setAttribute("stroke-opacity",G.opacity),E.setAttribute("stroke-width",G.weight),E.setAttribute("stroke-linecap",G.lineCap),E.setAttribute("stroke-linejoin",G.lineJoin),G.dashArray?E.setAttribute("stroke-dasharray",G.dashArray):E.removeAttribute("stroke-dasharray"),G.dashOffset?E.setAttribute("stroke-dashoffset",G.dashOffset):E.removeAttribute("stroke-dashoffset")):E.setAttribute("stroke","none"),G.fill?(E.setAttribute("fill",G.fillColor||G.color),E.setAttribute("fill-opacity",G.fillOpacity),E.setAttribute("fill-rule",G.fillRule||"evenodd")):E.setAttribute("fill","none"))},_updatePoly:function(_,E){this._setPath(_,di(_._parts,E))},_updateCircle:function(_){var E=_._point,G=Math.max(Math.round(_._radius),1),ne=Math.max(Math.round(_._radiusY),1)||G,ge="a"+G+","+ne+" 0 1,0 ",Ne=_._empty()?"M0 0":"M"+(E.x-G)+","+E.y+ge+G*2+",0 "+ge+-G*2+",0 ";this._setPath(_,Ne)},_setPath:function(_,E){_._path.setAttribute("d",E)},_bringToFront:function(_){xc(_._path)},_bringToBack:function(_){ca(_._path)}});Pe.vml&&uc.include(xu);function Ic(_){return Pe.svg||Pe.vml?new uc(_):null}Mo.include({getRenderer:function(_){var E=_.options.renderer||this._getPaneRenderer(_.options.pane)||this.options.renderer||this._renderer;return E||(E=this._renderer=this._createRenderer()),this.hasLayer(E)||this.addLayer(E),E},_getPaneRenderer:function(_){if(_==="overlayPane"||_===void 0)return!1;var E=this._paneRenderers[_];return E===void 0&&(E=this._createRenderer({pane:_}),this._paneRenderers[_]=E),E},_createRenderer:function(_){return this.options.preferCanvas&&Wl(_)||Ic(_)}});var da=Tc.extend({initialize:function(_,E){Tc.prototype.initialize.call(this,this._boundsToLatLngs(_),E)},setBounds:function(_){return this.setLatLngs(this._boundsToLatLngs(_))},_boundsToLatLngs:function(_){return _=Bn(_),[_.getSouthWest(),_.getNorthWest(),_.getNorthEast(),_.getSouthEast()]}});function Kl(_,E){return new da(_,E)}uc.create=Sc,uc.pointsToPath=di,Ia.geometryToLayer=Ga,Ia.coordsToLatLng=cc,Ia.coordsToLatLngs=Kc,Ia.latLngToCoords=vu,Ia.latLngsToCoords=Ec,Ia.getFeature=xa,Ia.asFeature=Wa,Mo.mergeOptions({boxZoom:!0});var Za=ps.extend({initialize:function(_){this._map=_,this._container=_._container,this._pane=_._panes.overlayPane,this._resetStateTimeout=0,_.on("unload",this._destroy,this)},addHooks:function(){br(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ss(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Dr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(_){if(!_.shiftKey||_.which!==1&&_.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),_a(),gl(),this._startPoint=this._map.mouseEventToContainerPoint(_),br(document,{contextmenu:ao,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(_){this._moved||(this._moved=!0,this._box=Wr("div","leaflet-zoom-box",this._container),Jr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(_);var E=new Xn(this._point,this._startPoint),G=E.getSize();Io(this._box,E.min),this._box.style.width=G.x+"px",this._box.style.height=G.y+"px"},_finish:function(){this._moved&&(Dr(this._box),Wo(this._container,"leaflet-crosshair")),Es(),oc(),ss(document,{contextmenu:ao,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(_){if(!(_.which!==1&&_.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(v(this._resetState,this),0);var E=new Bi(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(E).fire("boxzoomend",{boxZoomBounds:E})}},_onKeyDown:function(_){_.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Mo.addInitHook("addHandler","boxZoom",Za),Mo.mergeOptions({doubleClickZoom:!0});var cl=ps.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(_){var E=this._map,G=E.getZoom(),ne=E.options.zoomDelta,ge=_.originalEvent.shiftKey?G-ne:G+ne;E.options.doubleClickZoom==="center"?E.setZoom(ge):E.setZoomAround(_.containerPoint,ge)}});Mo.addInitHook("addHandler","doubleClickZoom",cl),Mo.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Mc=ps.extend({addHooks:function(){if(!this._draggable){var _=this._map;this._draggable=new to(_._mapPane,_._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),_.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),_.on("zoomend",this._onZoomEnd,this),_.whenReady(this._onZoomEnd,this))}Jr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Wo(this._map._container,"leaflet-grab"),Wo(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var _=this._map;if(_._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var E=Bn(this._map.options.maxBounds);this._offsetLimit=Wn(this._map.latLngToContainerPoint(E.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(E.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;_.fire("movestart").fire("dragstart"),_.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(_){if(this._map.options.inertia){var E=this._lastTime=+new Date,G=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(G),this._times.push(E),this._prunePositions(E)}this._map.fire("move",_).fire("drag",_)},_prunePositions:function(_){for(;this._positions.length>1&&_-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var _=this._map.getSize().divideBy(2),E=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=E.subtract(_).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(_,E){return _-(_-E)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var _=this._draggable._newPos.subtract(this._draggable._startPos),E=this._offsetLimit;_.x<E.min.x&&(_.x=this._viscousLimit(_.x,E.min.x)),_.y<E.min.y&&(_.y=this._viscousLimit(_.y,E.min.y)),_.x>E.max.x&&(_.x=this._viscousLimit(_.x,E.max.x)),_.y>E.max.y&&(_.y=this._viscousLimit(_.y,E.max.y)),this._draggable._newPos=this._draggable._startPos.add(_)}},_onPreDragWrap:function(){var _=this._worldWidth,E=Math.round(_/2),G=this._initialWorldOffset,ne=this._draggable._newPos.x,ge=(ne-E+G)%_+E-G,Ne=(ne+E+G)%_-E-G,at=Math.abs(ge+G)<Math.abs(Ne+G)?ge:Ne;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=at},_onDragEnd:function(_){var E=this._map,G=E.options,ne=!G.inertia||_.noInertia||this._times.length<2;if(E.fire("dragend",_),ne)E.fire("moveend");else{this._prunePositions(+new Date);var ge=this._lastPos.subtract(this._positions[0]),Ne=(this._lastTime-this._times[0])/1e3,at=G.easeLinearity,Dt=ge.multiplyBy(at/Ne),_n=Dt.distanceTo([0,0]),ni=Math.min(G.inertiaMaxSpeed,_n),Ti=Dt.multiplyBy(ni/_n),Hi=ni/(G.inertiaDeceleration*at),kr=Ti.multiplyBy(-Hi/2).round();!kr.x&&!kr.y?E.fire("moveend"):(kr=E._limitOffset(kr,E.options.maxBounds),qt(function(){E.panBy(kr,{duration:Hi,easeLinearity:at,noMoveStart:!0,animate:!0})}))}}});Mo.addInitHook("addHandler","dragging",Mc),Mo.mergeOptions({keyboard:!0,keyboardPanDelta:80});var hc=ps.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(_){this._map=_,this._setPanDelta(_.options.keyboardPanDelta),this._setZoomDelta(_.options.zoomDelta)},addHooks:function(){var _=this._map._container;_.tabIndex<=0&&(_.tabIndex="0"),br(_,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ss(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var _=document.body,E=document.documentElement,G=_.scrollTop||E.scrollTop,ne=_.scrollLeft||E.scrollLeft;this._map._container.focus(),window.scrollTo(ne,G)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(_){var E=this._panKeys={},G=this.keyCodes,ne,ge;for(ne=0,ge=G.left.length;ne<ge;ne++)E[G.left[ne]]=[-1*_,0];for(ne=0,ge=G.right.length;ne<ge;ne++)E[G.right[ne]]=[_,0];for(ne=0,ge=G.down.length;ne<ge;ne++)E[G.down[ne]]=[0,_];for(ne=0,ge=G.up.length;ne<ge;ne++)E[G.up[ne]]=[0,-1*_]},_setZoomDelta:function(_){var E=this._zoomKeys={},G=this.keyCodes,ne,ge;for(ne=0,ge=G.zoomIn.length;ne<ge;ne++)E[G.zoomIn[ne]]=_;for(ne=0,ge=G.zoomOut.length;ne<ge;ne++)E[G.zoomOut[ne]]=-_},_addHooks:function(){br(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ss(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(_){if(!(_.altKey||_.ctrlKey||_.metaKey)){var E=_.keyCode,G=this._map,ne;if(E in this._panKeys){if(!G._panAnim||!G._panAnim._inProgress)if(ne=this._panKeys[E],_.shiftKey&&(ne=Qt(ne).multiplyBy(3)),G.options.maxBounds&&(ne=G._limitOffset(Qt(ne),G.options.maxBounds)),G.options.worldCopyJump){var ge=G.wrapLatLng(G.unproject(G.project(G.getCenter()).add(ne)));G.panTo(ge)}else G.panBy(ne)}else if(E in this._zoomKeys)G.setZoom(G.getZoom()+(_.shiftKey?3:1)*this._zoomKeys[E]);else if(E===27&&G._popup&&G._popup.options.closeOnEscapeKey)G.closePopup();else return;ao(_)}}});Mo.addInitHook("addHandler","keyboard",hc),Mo.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bu=ps.extend({addHooks:function(){br(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ss(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(_){var E=yl(_),G=this._map.options.wheelDebounceTime;this._delta+=E,this._lastMousePos=this._map.mouseEventToContainerPoint(_),this._startTime||(this._startTime=+new Date);var ne=Math.max(G-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(v(this._performZoom,this),ne),ao(_)},_performZoom:function(){var _=this._map,E=_.getZoom(),G=this._map.options.zoomSnap||0;_._stop();var ne=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ge=4*Math.log(2/(1+Math.exp(-Math.abs(ne))))/Math.LN2,Ne=G?Math.ceil(ge/G)*G:ge,at=_._limitZoom(E+(this._delta>0?Ne:-Ne))-E;this._delta=0,this._startTime=null,at&&(_.options.scrollWheelZoom==="center"?_.setZoom(E+at):_.setZoomAround(this._lastMousePos,E+at))}});Mo.addInitHook("addHandler","scrollWheelZoom",bu);var ul=600;Mo.mergeOptions({tapHold:Pe.touchNative&&Pe.safari&&Pe.mobile,tapTolerance:15});var Oo=ps.extend({addHooks:function(){br(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ss(this._map._container,"touchstart",this._onDown,this)},_onDown:function(_){if(clearTimeout(this._holdTimeout),_.touches.length===1){var E=_.touches[0];this._startPos=this._newPos=new mn(E.clientX,E.clientY),this._holdTimeout=setTimeout(v(function(){this._cancel(),this._isTapValid()&&(br(document,"touchend",Rr),br(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",E))},this),ul),br(document,"touchend touchcancel contextmenu",this._cancel,this),br(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function _(){ss(document,"touchend",Rr),ss(document,"touchend touchcancel",_)},_cancel:function(){clearTimeout(this._holdTimeout),ss(document,"touchend touchcancel contextmenu",this._cancel,this),ss(document,"touchmove",this._onMove,this)},_onMove:function(_){var E=_.touches[0];this._newPos=new mn(E.clientX,E.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(_,E){var G=new MouseEvent(_,{bubbles:!0,cancelable:!0,view:window,screenX:E.screenX,screenY:E.screenY,clientX:E.clientX,clientY:E.clientY});G._simulated=!0,E.target.dispatchEvent(G)}});Mo.addInitHook("addHandler","tapHold",Oo),Mo.mergeOptions({touchZoom:Pe.touch,bounceAtZoomLimits:!0});var Bl=ps.extend({addHooks:function(){Jr(this._map._container,"leaflet-touch-zoom"),br(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Wo(this._map._container,"leaflet-touch-zoom"),ss(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(_){var E=this._map;if(!(!_.touches||_.touches.length!==2||E._animatingZoom||this._zooming)){var G=E.mouseEventToContainerPoint(_.touches[0]),ne=E.mouseEventToContainerPoint(_.touches[1]);this._centerPoint=E.getSize()._divideBy(2),this._startLatLng=E.containerPointToLatLng(this._centerPoint),E.options.touchZoom!=="center"&&(this._pinchStartLatLng=E.containerPointToLatLng(G.add(ne)._divideBy(2))),this._startDist=G.distanceTo(ne),this._startZoom=E.getZoom(),this._moved=!1,this._zooming=!0,E._stop(),br(document,"touchmove",this._onTouchMove,this),br(document,"touchend touchcancel",this._onTouchEnd,this),Rr(_)}},_onTouchMove:function(_){if(!(!_.touches||_.touches.length!==2||!this._zooming)){var E=this._map,G=E.mouseEventToContainerPoint(_.touches[0]),ne=E.mouseEventToContainerPoint(_.touches[1]),ge=G.distanceTo(ne)/this._startDist;if(this._zoom=E.getScaleZoom(ge,this._startZoom),!E.options.bounceAtZoomLimits&&(this._zoom<E.getMinZoom()&&ge<1||this._zoom>E.getMaxZoom()&&ge>1)&&(this._zoom=E._limitZoom(this._zoom)),E.options.touchZoom==="center"){if(this._center=this._startLatLng,ge===1)return}else{var Ne=G._add(ne)._divideBy(2)._subtract(this._centerPoint);if(ge===1&&Ne.x===0&&Ne.y===0)return;this._center=E.unproject(E.project(this._pinchStartLatLng,this._zoom).subtract(Ne),this._zoom)}this._moved||(E._moveStart(!0,!1),this._moved=!0),rn(this._animRequest);var at=v(E._move,E,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=qt(at,this,!0),Rr(_)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,rn(this._animRequest),ss(document,"touchmove",this._onTouchMove,this),ss(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Mo.addInitHook("addHandler","touchZoom",Bl),Mo.BoxZoom=Za,Mo.DoubleClickZoom=cl,Mo.Drag=Mc,Mo.Keyboard=hc,Mo.ScrollWheelZoom=bu,Mo.TapHold=Oo,Mo.TouchZoom=Bl,i.Bounds=Xn,i.Browser=Pe,i.CRS=tr,i.Canvas=Xc,i.Circle=Wc,i.CircleMarker=Bc,i.Class=Kt,i.Control=Is,i.DivIcon=Vl,i.DivOverlay=wl,i.DomEvent=ch,i.DomUtil=bc,i.Draggable=to,i.Evented=Rn,i.FeatureGroup=sl,i.GeoJSON=Ia,i.GridLayer=no,i.Handler=ps,i.Icon=al,i.ImageOverlay=Ui,i.LatLng=Hn,i.LatLngBounds=Bi,i.Layer=ms,i.LayerGroup=va,i.LineUtil=lo,i.Map=Mo,i.Marker=Qu,i.Mixin=dh,i.Path=ll,i.Point=mn,i.PolyUtil=gu,i.Polygon=Tc,i.Polyline=oa,i.Popup=ha,i.PosAnimation=kh,i.Projection=Hc,i.Rectangle=da,i.Renderer=Ka,i.SVG=uc,i.SVGOverlay=as,i.TileLayer=Xs,i.Tooltip=Mi,i.Transformation=sr,i.Util=Ut,i.VideoOverlay=po,i.bind=v,i.bounds=Wn,i.canvas=Wl,i.circle=Zs,i.circleMarker=Gc,i.control=za,i.divIcon=Gl,i.extend=d,i.featureGroup=Dh,i.geoJSON=Dn,i.geoJson=wn,i.gridLayer=wi,i.icon=yu,i.imageOverlay=Br,i.latLng=ei,i.latLngBounds=Bn,i.layerGroup=ph,i.map=Ss,i.marker=lc,i.point=Qt,i.polygon=mh,i.polyline=$u,i.popup=Cl,i.rectangle=Kl,i.setOptions=Ae,i.stamp=s,i.svg=Ic,i.svgOverlay=_d,i.tileLayer=Zc,i.tooltip=Hl,i.transformation=li,i.version=r,i.videoOverlay=qs;var Yc=window.L;i.noConflict=function(){return window.L=Yc,this},window.L=i})})(E1,E1.exports);var gA=E1.exports;const $0=Sm(gA);function pI(e){return e.split(" ").filter(Boolean)}function mI(e,t){pI(t).forEach(i=>{gA.DomUtil.addClass(e,i)})}function gI(e,t){pI(t).forEach(i=>{gA.DomUtil.removeClass(e,i)})}function ER(e,t,i){e!=null&&i!==t&&(t!=null&&t.length>0&&gI(e,t),i!=null&&i.length>0&&mI(e,i))}function Zg(e,t){return t==null?function(r,d){return Pi(e(r,d))}:function(r,d){const f=Pi(e(r,d)),v=Pi(r),{instance:h}=f.current;return $i(function(){v.current!==r&&(t(h,r,v.current),v.current=r)},[h,r,d]),f}}function S1(e,t){$i(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var f;(f=t.layerContainer)==null||f.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function I1(e){return function(i){const r=Kg(),d=e(Ey(i,r),r);return b1(r.map,i.attribution),Q0(d.current,i.eventHandlers),S1(d.current,r),d}}function _I(e,t){const i=Pi();$i(function(){if(t.pathOptions!==i.current){const d=t.pathOptions??{};e.instance.setStyle(d),i.current=d}},[e,t])}function yI(e){return function(i){const r=Kg(),d=e(Ey(i,r),r);return Q0(d.current,i.eventHandlers),S1(d.current,r),_I(d.current,i),d}}function SR(e){function t(d,f){return{instance:e(d),context:f}}const i=Zg(t),r=AI(i);return T1(r)}function vI(e,t){const i=Zg(e,t),r=I1(i);return B1(r)}function xI(e,t){const i=Zg(e),r=fI(i,t);return dI(r)}function IR(e,t){const i=Zg(e,t),r=yI(i);return B1(r)}function bI(e,t){const i=Zg(e,t),r=I1(i);return T1(r)}function wI(e,t,i){const{opacity:r,zIndex:d}=t;r!=null&&r!==i.opacity&&e.setOpacity(r),d!=null&&d!==i.zIndex&&e.setZIndex(d)}function MR(e,t,i){t.bounds instanceof gA.LatLngBounds&&t.bounds!==i.bounds&&e.setBounds(t.bounds),t.opacity!=null&&t.opacity!==i.opacity&&e.setOpacity(t.opacity),t.zIndex!=null&&t.zIndex!==i.zIndex&&e.setZIndex(t.zIndex)}const LR=Object.freeze(Object.defineProperty({__proto__:null,CONTEXT_VERSION:hI,LeafletContext:w1,LeafletProvider:C1,addClassName:mI,createContainerComponent:B1,createControlComponent:SR,createControlHook:AI,createDivOverlayComponent:dI,createDivOverlayHook:fI,createElementHook:Zg,createLayerComponent:vI,createLayerHook:I1,createLeafComponent:T1,createOverlayComponent:xI,createPathComponent:IR,createPathHook:yI,createTileLayerComponent:bI,removeClassName:gI,updateCircle:TR,updateClassName:ER,updateGridLayer:wI,updateMediaOverlay:MR,useAttribution:b1,useEventHandlers:Q0,useLayerLifecycle:S1,useLeafletContext:Kg,usePathOptions:_I,withPane:Ey},Symbol.toStringTag,{value:"Module"}));function kR(){return Kg().map}function M1(){return M1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},M1.apply(this,arguments)}function PR(e,t){const[i,r]=ur(null);return $i(()=>{if(e.current!==null&&i===null){const d=new gA.Map(e.current,t);t.center!=null&&t.zoom!=null?d.setView(t.center,t.zoom):t.bounds!=null&&d.fitBounds(t.bounds,t.boundsOptions),t.whenReady!=null&&d.whenReady(t.whenReady),r(d)}},[e,i,t]),i}function FR(e){let{children:t,className:i,id:r,placeholder:d,style:f,whenCreated:v,...h}=e;const s=Pi(null),U=PR(s,h),$=Pi(!1);$i(()=>{U!=null&&$.current===!1&&v!=null&&($.current=!0,v(U))},[U,v]),$i(()=>()=>{U==null||U.remove()},[U]);const[V]=ur({className:i,id:r,style:f}),q=tl(()=>U?{__version:hI,map:U}:null,[U]),te=q?ka.createElement(C1,{value:q},t):d??null;return ka.createElement("div",M1({},V,{ref:s}),te)}const DR=vI(function(t,i){let{position:r,...d}=t;const f=new gA.Marker(r,d);return{instance:f,context:{...i,overlayContainer:f}}},function(t,i,r){i.position!==r.position&&t.setLatLng(i.position),i.icon!=null&&i.icon!==r.icon&&t.setIcon(i.icon),i.zIndexOffset!=null&&i.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(i.zIndexOffset),i.opacity!=null&&i.opacity!==r.opacity&&t.setOpacity(i.opacity),t.dragging!=null&&i.draggable!==r.draggable&&(i.draggable===!0?t.dragging.enable():t.dragging.disable())}),UR=xI(function(t,i){return{instance:new gA.Popup(t,i.overlayContainer),context:i}},function(t,i,r,d){const{onClose:f,onOpen:v,position:h}=r;$i(function(){const{instance:U}=t;function $(q){q.popup===U&&(U.update(),d(!0),v==null||v())}function V(q){q.popup===U&&(d(!1),f==null||f())}return i.map.on({popupopen:$,popupclose:V}),i.overlayContainer==null?(h!=null&&U.setLatLng(h),U.openOn(i.map)):i.overlayContainer.bindPopup(U),function(){var te;i.map.off({popupopen:$,popupclose:V}),(te=i.overlayContainer)==null||te.unbindPopup(),i.map.removeLayer(U)}},[t,i,d,f,v,h])}),zR=bI(function(t,i){let{url:r,...d}=t;return{instance:new gA.TileLayer(r,Ey(d,i)),context:i}},wI),Rte="modulepreload",Ote=function(e){return"/"+e},Nte={},RR=function(t,i,r){return Promise.resolve().then(()=>t()).catch(f=>{const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=f,window.dispatchEvent(v),!v.defaultPrevented)throw f})},OR=Sh(null);function NR(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,d=Array.isArray(t)?t[0]:t?t.x:0,f=Array.isArray(t)?t[1]:t?t.y:0;return i===d&&r===f}function ld(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!ld(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(const d of i)if(!t.hasOwnProperty(d)||!ld(e[d],t[d]))return!1;return!0}return!1}function QR(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function CI(e,t){if(!e.getProjection)return;const i=e.getProjection(),r=t.getProjection();ld(i,r)||t.setProjection(i)}function BI(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function TI(e,t){const i=t.viewState||t;let r=!1;if("longitude"in i&&"latitude"in i){const d=e.center;e.center=new d.constructor(i.longitude,i.latitude),r=r||d!==e.center}if("zoom"in i){const d=e.zoom;e.zoom=i.zoom,r=r||d!==e.zoom}if("bearing"in i){const d=e.bearing;e.bearing=i.bearing,r=r||d!==e.bearing}if("pitch"in i){const d=e.pitch;e.pitch=i.pitch,r=r||d!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(r=!0,e.padding=i.padding),r}const $R=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function EI(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const r of e.layers)t[r.id]=r;const i=e.layers.map(r=>{let d=null;"interactive"in r&&(d=Object.assign({},r),delete d.interactive);const f=t[r.ref];if(f){d=d||Object.assign({},r),delete d.ref;for(const v of $R)v in f&&(d[v]=f[v])}return d||r});return{...e,layers:i}}var SI={};const II={version:8,sources:{},layers:[]},MI={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},L1={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},LI={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},jR=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],HR=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class qg{constructor(t,i,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=d=>{const f=this.props[LI[d.type]];f?f(d):d.type==="error"&&console.error(d.error)},this._onPointerEvent=d=>{(d.type==="mousemove"||d.type==="mouseout")&&this._updateHover(d);const f=this.props[MI[d.type]];f&&(this.props.interactiveLayerIds&&d.type!=="mouseover"&&d.type!=="mouseout"&&(d.features=this._hoveredFeatures||this._queryRenderedFeatures(d.point)),f(d),delete d.features)},this._onCameraEvent=d=>{if(!this._internalUpdate){const f=this.props[L1[d.type]];f&&f(d)}d.type in this._deferredEvents&&(this._deferredEvents[d.type]=!1)},this._MapClass=t,this.props=i,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const r=this._updateSettings(t,i);r&&this._createShadowTransform(this._map);const d=this._updateSize(t),f=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(r||d||f&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const r=qg.savedMaps.pop();if(!r)return null;const d=r.map,f=d.getContainer();for(i.className=f.className;f.childNodes.length>0;)i.appendChild(f.childNodes[0]);d._container=i;const v=d._resizeObserver;v&&(v.disconnect(),v.observe(i)),r.setProps({...t,styleDiffing:!1}),d.resize();const{initialViewState:h}=t;return h&&(h.bounds?d.fitBounds(h.bounds,{...h.fitBoundsOptions,duration:0}):r._updateViewState(h,!1)),d.isStyleLoaded()?d.fire("load"):d.once("styledata",()=>d.fire("load")),d._update(),r}_initialize(t){const{props:i}=this,{mapStyle:r=II}=i,d={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||VR()||null,container:t,style:EI(r)},f=d.initialViewState||d.viewState||d;if(Object.assign(d,{center:[f.longitude||0,f.latitude||0],zoom:f.zoom||0,pitch:f.pitch||0,bearing:f.bearing||0}),i.gl){const $=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=$,i.gl)}const v=new this._MapClass(d);f.padding&&v.setPadding(f.padding),i.cursor&&(v.getCanvas().style.cursor=i.cursor),this._createShadowTransform(v);const h=v._render;v._render=$=>{this._inRender=!0,h.call(v,$),this._inRender=!1};const s=v._renderTaskQueue.run;v._renderTaskQueue.run=$=>{s.call(v._renderTaskQueue,$),this._onBeforeRepaint()},v.on("render",()=>this._onAfterRepaint());const U=v.fire;v.fire=this._fireEvent.bind(this,U),v.on("resize",()=>{this._renderTransform.resize(v.transform.width,v.transform.height)}),v.on("styledata",()=>{this._updateStyleComponents(this.props,{}),CI(v.transform,this._renderTransform)}),v.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const $ in MI)v.on($,this._onPointerEvent);for(const $ in L1)v.on($,this._onCameraEvent);for(const $ in LI)v.on($,this._onEvent);this._map=v}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),qg.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=QR(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const r=this._map;if(i.width!==r.transform.width||i.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const r=this._map,d=this._renderTransform,{zoom:f,pitch:v,bearing:h}=d,s=r.isMoving();s&&(d.cameraElevationReference="sea");const U=TI(d,{...BI(r.transform),...t});if(s&&(d.cameraElevationReference="ground"),U&&i){const $=this._deferredEvents;$.move=!0,$.zoom||($.zoom=f!==d.zoom),$.rotate||($.rotate=h!==d.bearing),$.pitch||($.pitch=v!==d.pitch)}return s||TI(r.transform,t),U}_updateSettings(t,i){const r=this._map;let d=!1;for(const f of jR)if(f in t&&!ld(t[f],i[f])){d=!0;const v=r[`set${f[0].toUpperCase()}${f.slice(1)}`];v==null||v.call(r,t[f])}return d}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:r=II,styleDiffing:d=!0}=t,f={diff:d};return"localIdeographFontFamily"in t&&(f.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(EI(r),f),!0}return!1}_updateStyleComponents(t,i){const r=this._map;let d=!1;return r.isStyleLoaded()&&("light"in t&&r.setLight&&!ld(t.light,i.light)&&(d=!0,r.setLight(t.light)),"fog"in t&&r.setFog&&!ld(t.fog,i.fog)&&(d=!0,r.setFog(t.fog)),"terrain"in t&&r.setTerrain&&!ld(t.terrain,i.terrain)&&(!t.terrain||r.getSource(t.terrain.source))&&(d=!0,r.setTerrain(t.terrain))),d}_updateHandlers(t,i){var r,d;const f=this._map;let v=!1;for(const h of HR){const s=(r=t[h])!==null&&r!==void 0?r:!0,U=(d=i[h])!==null&&d!==void 0?d:!0;ld(s,U)||(v=!0,s?f[h].enable(s):f[h].disable())}return v}_queryRenderedFeatures(t){const i=this._map,r=i.transform,{interactiveLayerIds:d=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:d.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=r}}_updateHover(t){var i;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const f=t.type,v=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,h=this._queryRenderedFeatures(t.point),s=h.length>0;!s&&v&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=h,s&&!v&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=f}else this._hoveredFeatures=null}_fireEvent(t,i,r){const d=this._map,f=d.transform,v=typeof i=="string"?i:i.type;return v==="move"&&this._updateViewState(this.props,!1),v in L1&&(typeof i=="object"&&(i.viewState=BI(f)),this._map.isMoving())?(d.transform=this._renderTransform,t.call(d,i,r),d.transform=f,d):(t.call(d,i,r),d)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&t.fire(r);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{CI(this._renderTransform,i),t.transform=i}}}qg.savedMaps=[];function VR(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||SI.MapboxAccessToken}catch{}try{e=e||SI.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const GR=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function WR(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:r=>{const d=t.transform;t.transform=e.transform;const f=t.project(r);return t.transform=d,f},unproject:r=>{const d=t.transform;t.transform=e.transform;const f=t.unproject(r);return t.transform=d,f},queryTerrainElevation:(r,d)=>{const f=t.transform;t.transform=e.transform;const v=t.queryTerrainElevation(r,d);return t.transform=f,v},queryRenderedFeatures:(r,d)=>{const f=t.transform;t.transform=e.transform;const v=t.queryRenderedFeatures(r,d);return t.transform=f,v}};for(const r of KR(t))!(r in i)&&!GR.includes(r)&&(i[r]=t[r].bind(t));return i}function KR(e){const t=new Set;let i=e;for(;i;){for(const r of Object.getOwnPropertyNames(i))r[0]!=="_"&&typeof e[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&t.add(r);i=Object.getPrototypeOf(i)}return Array.from(t)}const ZR=typeof document<"u"?gp:$i,qR=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function XR(e,t){for(const r of qR)r in t&&(e[r]=t[r]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,r=>{r&&console.error(r)},!1)}const Xg=Sh(null);function YR(e,t,i){const r=nl(OR),[d,f]=ur(null),v=Pi(),{current:h}=Pi({mapLib:null,map:null});$i(()=>{const $=e.mapLib;let V=!0,q;return Promise.resolve($||i).then(te=>{if(!V)return;if(!te)throw new Error("Invalid mapLib");const he="Map"in te?te:te.default;if(!he.Map)throw new Error("Invalid mapLib");if(XR(he,e),!he.supported||he.supported(e))e.reuseMaps&&(q=qg.reuse(e,v.current)),q||(q=new qg(he.Map,e,v.current)),h.map=WR(q),h.mapLib=he,f(q),r==null||r.onMapMount(h.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(te=>{const{onError:he}=e;he?he({type:"error",target:null,originalEvent:null,error:te}):console.error(te)}),()=>{V=!1,q&&(r==null||r.onMapUnmount(e.id),e.reuseMaps?q.recycle():q.destroy())}},[]),ZR(()=>{d&&d.setProps(e)}),Ih(t,()=>h.map,[d]);const s=tl(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),U={height:"100%"};return Dl("div",{id:e.id,ref:v,style:s},d&&Dl(Xg.Provider,{value:h},Dl("div",{"mapboxgl-children":"",style:U},e.children)))}const JR=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Im(e,t){if(!e||!t)return;const i=e.style;for(const r in t){const d=t[r];Number.isFinite(d)&&!JR.test(r)?i[r]=`${d}px`:i[r]=d}}function eO(e,t){const{map:i,mapLib:r}=nl(Xg),d=Pi({props:e});d.current.props=e;const f=tl(()=>{let Ae=!1;mA.forEach(e.children,xe=>{xe&&(Ae=!0)});const De={...e,element:Ae?document.createElement("div"):null},ke=new r.Marker(De);return ke.setLngLat([e.longitude,e.latitude]),ke.getElement().addEventListener("click",xe=>{var Te,Ee;(Ee=(Te=d.current.props).onClick)===null||Ee===void 0||Ee.call(Te,{type:"click",target:ke,originalEvent:xe})}),ke.on("dragstart",xe=>{var Te,Ee;const Fe=xe;Fe.lngLat=f.getLngLat(),(Ee=(Te=d.current.props).onDragStart)===null||Ee===void 0||Ee.call(Te,Fe)}),ke.on("drag",xe=>{var Te,Ee;const Fe=xe;Fe.lngLat=f.getLngLat(),(Ee=(Te=d.current.props).onDrag)===null||Ee===void 0||Ee.call(Te,Fe)}),ke.on("dragend",xe=>{var Te,Ee;const Fe=xe;Fe.lngLat=f.getLngLat(),(Ee=(Te=d.current.props).onDragEnd)===null||Ee===void 0||Ee.call(Te,Fe)}),ke},[]);$i(()=>(f.addTo(i.getMap()),()=>{f.remove()}),[]);const{longitude:v,latitude:h,offset:s,style:U,draggable:$=!1,popup:V=null,rotation:q=0,rotationAlignment:te="auto",pitchAlignment:he="auto"}=e;return $i(()=>{Im(f.getElement(),U)},[U]),Ih(t,()=>f,[]),(f.getLngLat().lng!==v||f.getLngLat().lat!==h)&&f.setLngLat([v,h]),s&&!NR(f.getOffset(),s)&&f.setOffset(s),f.isDraggable()!==$&&f.setDraggable($),f.getRotation()!==q&&f.setRotation(q),f.getRotationAlignment()!==te&&f.setRotationAlignment(te),f.getPitchAlignment()!==he&&f.setPitchAlignment(he),f.getPopup()!==V&&f.setPopup(V),Wg(e.children,f.getElement())}ZA(Yr(eO));function kI(e){return new Set(e?e.trim().split(/\s+/):[])}function tO(e,t){const{map:i,mapLib:r}=nl(Xg),d=tl(()=>document.createElement("div"),[]),f=Pi({props:e});f.current.props=e;const v=tl(()=>{const h={...e},s=new r.Popup(h);return s.setLngLat([e.longitude,e.latitude]),s.once("open",U=>{var $,V;(V=($=f.current.props).onOpen)===null||V===void 0||V.call($,U)}),s},[]);if($i(()=>{const h=s=>{var U,$;($=(U=f.current.props).onClose)===null||$===void 0||$.call(U,s)};return v.on("close",h),v.setDOMContent(d).addTo(i.getMap()),()=>{v.off("close",h),v.isOpen()&&v.remove()}},[]),$i(()=>{Im(v.getElement(),e.style)},[e.style]),Ih(t,()=>v,[]),v.isOpen()&&((v.getLngLat().lng!==e.longitude||v.getLngLat().lat!==e.latitude)&&v.setLngLat([e.longitude,e.latitude]),e.offset&&!ld(v.options.offset,e.offset)&&v.setOffset(e.offset),(v.options.anchor!==e.anchor||v.options.maxWidth!==e.maxWidth)&&(v.options.anchor=e.anchor,v.setMaxWidth(e.maxWidth)),v.options.className!==e.className)){const h=kI(v.options.className),s=kI(e.className);for(const U of h)s.has(U)||v.removeClassName(U);for(const U of s)h.has(U)||v.addClassName(U);v.options.className=e.className}return Wg(e.children,d)}const nO=ZA(Yr(tO));function Sy(e,t,i,r){const d=nl(Xg),f=tl(()=>e(d),[]);return $i(()=>{const v=r||i||t,h=typeof t=="function"&&typeof i=="function"?t:null,s=typeof i=="function"?i:typeof t=="function"?t:null,{map:U}=d;return U.hasControl(f)||(U.addControl(f,v==null?void 0:v.position),h&&h(d)),()=>{s&&s(d),U.hasControl(f)&&U.removeControl(f)}},[]),f}function iO(e){const t=Sy(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return $i(()=>{Im(t._container,e.style)},[e.style]),null}const rO=ZA(iO);function oO(e){const t=Sy(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return $i(()=>{Im(t._controlContainer,e.style)},[e.style]),null}ZA(oO);function sO(e,t){const i=Pi({props:e}),r=Sy(({mapLib:d})=>{const f=new d.GeolocateControl(e),v=f._setupUI;return f._setupUI=h=>{f._container.hasChildNodes()||v(h)},f.on("geolocate",h=>{var s,U;(U=(s=i.current.props).onGeolocate)===null||U===void 0||U.call(s,h)}),f.on("error",h=>{var s,U;(U=(s=i.current.props).onError)===null||U===void 0||U.call(s,h)}),f.on("outofmaxbounds",h=>{var s,U;(U=(s=i.current.props).onOutOfMaxBounds)===null||U===void 0||U.call(s,h)}),f.on("trackuserlocationstart",h=>{var s,U;(U=(s=i.current.props).onTrackUserLocationStart)===null||U===void 0||U.call(s,h)}),f.on("trackuserlocationend",h=>{var s,U;(U=(s=i.current.props).onTrackUserLocationEnd)===null||U===void 0||U.call(s,h)}),f},{position:e.position});return i.current.props=e,Ih(t,()=>r,[]),$i(()=>{Im(r._container,e.style)},[e.style]),null}ZA(Yr(sO));function aO(e){const t=Sy(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return $i(()=>{Im(t._container,e.style)},[e.style]),null}const lO=ZA(aO);function cO(e){const t=Sy(({mapLib:f})=>new f.ScaleControl(e),{position:e.position}),i=Pi(e),r=i.current;i.current=e;const{style:d}=e;return e.maxWidth!==void 0&&e.maxWidth!==r.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==r.unit&&t.setUnit(e.unit),$i(()=>{Im(t._container,d)},[d]),null}ZA(cO);function j0(e,t){if(!e)throw new Error(t)}function uO(e,t,i,r){if(j0(i.id===r.id,"layer id changed"),j0(i.type===r.type,"layer type changed"),i.type==="custom"||r.type==="custom")return;const{layout:d={},paint:f={},filter:v,minzoom:h,maxzoom:s,beforeId:U}=i;if(U!==r.beforeId&&e.moveLayer(t,U),d!==r.layout){const $=r.layout||{};for(const V in d)ld(d[V],$[V])||e.setLayoutProperty(t,V,d[V]);for(const V in $)d.hasOwnProperty(V)||e.setLayoutProperty(t,V,void 0)}if(f!==r.paint){const $=r.paint||{};for(const V in f)ld(f[V],$[V])||e.setPaintProperty(t,V,f[V]);for(const V in $)f.hasOwnProperty(V)||e.setPaintProperty(t,V,void 0)}ld(v,r.filter)||e.setFilter(t,v),(h!==r.minzoom||s!==r.maxzoom)&&e.setLayerZoomRange(t,h,s)}function hO(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const r={...i,id:t};delete r.beforeId,e.addLayer(r,i.beforeId)}}let dO=0;function AO(e){const t=nl(Xg).map.getMap(),i=Pi(e),[,r]=ur(0),d=tl(()=>e.id||`jsx-layer-${dO++}`,[]);if($i(()=>{if(t){const v=()=>r(h=>h+1);return t.on("styledata",v),v(),()=>{t.off("styledata",v),t.style&&t.style._loaded&&t.getLayer(d)&&t.removeLayer(d)}}},[t]),t&&t.style&&t.getLayer(d))try{uO(t,d,e,i.current)}catch(v){console.warn(v)}else hO(t,d,e);return i.current=e,null}let fO=0;function pO(e,t,i){if(e.style&&e.style._loaded){const r={...i};return delete r.id,delete r.children,e.addSource(t,r),e.getSource(t)}return null}function mO(e,t,i){j0(t.id===i.id,"source id changed"),j0(t.type===i.type,"source type changed");let r="",d=0;for(const v in t)v!=="children"&&v!=="id"&&!ld(i[v],t[v])&&(r=v,d++);if(!d)return;const f=t.type;if(f==="geojson")e.setData(t.data);else if(f==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&d===1&&r==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(r){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${r}`)}function gO(e){const t=nl(Xg).map.getMap(),i=Pi(e),[,r]=ur(0),d=tl(()=>e.id||`jsx-source-${fO++}`,[]);$i(()=>{if(t){const v=()=>setTimeout(()=>r(h=>h+1),0);return t.on("styledata",v),v(),()=>{var h;if(t.off("styledata",v),t.style&&t.style._loaded&&t.getSource(d)){const s=(h=t.getStyle())===null||h===void 0?void 0:h.layers;if(s)for(const U of s)U.source===d&&t.removeLayer(U.id);t.removeSource(d)}}}},[t]);let f=t&&t.style&&t.getSource(d);return f?mO(f,e,i.current):f=pO(t,d,e),i.current=e,f&&mA.map(e.children,v=>v&&pl(v,{source:d}))||null}const _O=RR(()=>Promise.resolve().then(()=>wO),void 0),yO=Yr(function(t,i){return YR(t,i,_O)}),vO=nO,xO=rO,bO=lO,XA=AO,k1=gO;var PI={exports:{}};(function(e,t){var i={};(function(r,d){e.exports=d()})(hu,function(){var r,d,f;function v(s,U){if(!r)r=U;else if(!d)d=U;else{var $="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+d+")(sharedChunk); self.onerror = null;",V={};r(V),f=U(V),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(f.workerUrl=window.URL.createObjectURL(new Blob([$],{type:"text/javascript"})))}}v(["exports"],function(s){var U=typeof self<"u"?self:{},$="2.15.0";let V;const q={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(V==null){const o=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{V=i.API_URL_REGEX!=null?new RegExp(i.API_URL_REGEX):o}catch{V=o}}return V},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!q.API_URL)return null;try{const o=new URL(q.API_URL);return o.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":o.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},te={supported:!1,testSupport:function(o){!De&&Ae&&(ke?xe(o):he=o)}};let he,Ae,De=!1,ke=!1;function xe(o){const n=o.createTexture();o.bindTexture(o.TEXTURE_2D,n);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,Ae),o.isContextLost())return;te.supported=!0}catch{}o.deleteTexture(n),De=!0}U.document&&(Ae=U.document.createElement("img"),Ae.onload=function(){he&&xe(he),he=null,ke=!0},Ae.onerror=function(){De=!0,he=null},Ae.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Te="01";function Ee(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Fe=Se;function Se(o,n,a,p){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(p-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=a,this.p2y=p}Se.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,p=0;p<8;p++){var y=this.sampleCurveX(a)-o;if(Math.abs(y)<n)return a;var C=this.sampleCurveDerivativeX(a);if(Math.abs(C)<1e-6)break;a-=y/C}var S=0,z=1;for(a=o,p=0;p<20&&(y=this.sampleCurveX(a),!(Math.abs(y-o)<n));p++)o>y?S=a:z=a,a=.5*(z-S)+S;return a},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var nt=Ee(Fe),xt=Bt;function Bt(o,n){this.x=o,this.y=n}Bt.prototype={clone:function(){return new Bt(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,a=o.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),a=Math.sin(o),p=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=p,this},_rotateAround:function(o,n){var a=Math.cos(o),p=Math.sin(o),y=n.y+p*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-p*(this.y-n.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Bt.convert=function(o){return o instanceof Bt?o:Array.isArray(o)?new Bt(o[0],o[1]):o};var Xe=Ee(xt);const qt=Math.PI/180,rn=180/Math.PI;function Ut(o){return o*qt}function Kt(o){return o*rn}const On=[[0,0],[1,0],[1,1],[0,1]];function Gt(o){if(o<=0)return 0;if(o>=1)return 1;const n=o*o,a=n*o;return 4*(o<.5?a:3*(o-n)+a-.75)}function Rn(o,n,a,p){const y=new nt(o,n,a,p);return function(C){return y.solve(C)}}const mn=Rn(.25,.1,.25,1);function Cn(o,n,a){return Math.min(a,Math.max(n,o))}function Qt(o,n,a){return(a=Cn((a-o)/(n-o),0,1))*a*(3-2*a)}function Xn(o,n,a){const p=a-n,y=((o-n)%p+p)%p+n;return y===n?a:y}function Wn(o,n,a){if(!o.length)return a(null,[]);let p=o.length;const y=new Array(o.length);let C=null;o.forEach((S,z)=>{n(S,(Q,W)=>{Q&&(C=Q),y[z]=W,--p==0&&a(C,y)})})}function Bi(o){const n=[];for(const a in o)n.push(o[a]);return n}function Bn(o,...n){for(const a of n)for(const p in a)o[p]=a[p];return o}let Hn=1;function ei(){return Hn++}function tr(){return function o(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,o)}()}function ri(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))}function zi(o){return!!o&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)}function Vr(o,n){o.forEach(a=>{n[a]&&(n[a]=n[a].bind(n))})}function sr(o,n){return o.indexOf(n,o.length-n.length)!==-1}function li(o,n,a){const p={};for(const y in o)p[y]=n.call(a||this,o[y],y,o);return p}function Qi(o,n,a){const p={};for(const y in o)n.call(a||this,o[y],y,o)&&(p[y]=o[y]);return p}function Ki(o){return Array.isArray(o)?o.map(Ki):typeof o=="object"&&o?li(o,Ki):o}const ji={};function di(o){ji[o]||(typeof console<"u"&&console.warn(o),ji[o]=!0)}function Ir(o,n,a){return(a.y-o.y)*(n.x-o.x)>(n.y-o.y)*(a.x-o.x)}function nr(o){let n=0;for(let a,p,y=0,C=o.length,S=C-1;y<C;S=y++)a=o[y],p=o[S],n+=(p.x-a.x)*(a.y+p.y);return n}function Ri(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function hr(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,p,y,C)=>{const S=y||C;return n[p]=!S||S.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n}let ir=null;function Ur(o){if(ir==null){const n=o.navigator?o.navigator.userAgent:null;ir=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return ir}function jr(o){try{const n=U[o];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function pr(o,n){return[o[4*n],o[4*n+1],o[4*n+2],o[4*n+3]]}const Zr="mapbox-tiles";let Eo=500,Ao=50,$t,en;function Fr(){try{return U.caches}catch{}}function So(){Fr()&&!$t&&($t=U.caches.open(Zr))}function er(o){const n=o.indexOf("?");if(n<0)return o;const a=function(y){const C=y.indexOf("?");return C>0?y.slice(C+1).split("&"):[]}(o),p=a.filter(y=>{const C=y.split("=");return C[0]==="language"||C[0]==="worldview"});return p.length?`${o.slice(0,n)}?${p.join("&")}`:o.slice(0,n)}let xi=1/0;const Xi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Xi);class Un extends Error{constructor(n,a,p){a===401&&zt(p)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=a,this.url=p}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Oi=Ri()?()=>self.worker&&self.worker.referrer:()=>(U.location.protocol==="blob:"?U.parent:U).location.href,bn=function(o,n){if(!(/^file:/.test(a=o.url)||/^file:/.test(Oi())&&!/^\w+:/.test(a))){if(U.fetch&&U.Request&&U.AbortController&&U.Request.prototype.hasOwnProperty("signal"))return function(p,y){const C=new U.AbortController,S=new U.Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:Oi(),referrerPolicy:p.referrerPolicy,signal:C.signal});let z=!1,Q=!1;const W=(J=S.url).indexOf("sku=")>0&&zt(J);var J;p.type==="json"&&S.headers.set("Accept","application/json");const ie=(fe,_e,Me)=>{if(Q)return;if(fe&&fe.message!=="SecurityError"&&di(fe.toString()),_e&&Me)return se(_e);const Ve=Date.now();U.fetch(S).then(ut=>{if(ut.ok){const Ct=W?ut.clone():null;return se(ut,Ct,Ve)}return y(new Un(ut.statusText,ut.status,p.url))}).catch(ut=>{ut.name!=="AbortError"&&y(new Error(`${ut.message} ${p.url}`))})},se=(fe,_e,Me)=>{(p.type==="arrayBuffer"?fe.arrayBuffer():p.type==="json"?fe.json():fe.text()).then(Ve=>{Q||(_e&&Me&&function(ut,Ct,ht){if(So(),!$t)return;const vt={status:Ct.status,statusText:Ct.statusText,headers:new U.Headers};Ct.headers.forEach((An,ln)=>vt.headers.set(ln,An));const Pt=hr(Ct.headers.get("Cache-Control")||"");if(Pt["no-store"])return;Pt["max-age"]&&vt.headers.set("Expires",new Date(ht+1e3*Pt["max-age"]).toUTCString());const Lt=vt.headers.get("Expires");Lt&&(new Date(Lt).getTime()-ht<42e4||function(An,ln){if(en===void 0)try{new Response(new ReadableStream),en=!0}catch{en=!1}en?ln(An.body):An.blob().then(ln)}(Ct,An=>{const ln=new U.Response(An,vt);So(),$t&&$t.then(Ln=>Ln.put(er(ut.url),ln)).catch(Ln=>di(Ln.message))}))}(S,_e,Me),z=!0,y(null,Ve,fe.headers.get("Cache-Control"),fe.headers.get("Expires")))}).catch(Ve=>{Q||y(new Error(Ve.message))})};return W?function(fe,_e){if(So(),!$t)return _e(null);const Me=er(fe.url);$t.then(Ve=>{Ve.match(Me).then(ut=>{const Ct=function(ht){if(!ht)return!1;const vt=new Date(ht.headers.get("Expires")||0),Pt=hr(ht.headers.get("Cache-Control")||"");return vt>Date.now()&&!Pt["no-cache"]}(ut);Ve.delete(Me),Ct&&Ve.put(Me,ut.clone()),_e(null,ut,Ct)}).catch(_e)}).catch(_e)}(S,ie):ie(null,null),{cancel:()=>{Q=!0,z||C.abort()}}}(o,n);if(Ri()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var a;return function(p,y){const C=new U.XMLHttpRequest;C.open(p.method||"GET",p.url,!0),p.type==="arrayBuffer"&&(C.responseType="arraybuffer");for(const S in p.headers)C.setRequestHeader(S,p.headers[S]);return p.type==="json"&&(C.responseType="text",C.setRequestHeader("Accept","application/json")),C.withCredentials=p.credentials==="include",C.onerror=()=>{y(new Error(C.statusText))},C.onload=()=>{if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let S=C.response;if(p.type==="json")try{S=JSON.parse(C.response)}catch(z){return y(z)}y(null,S,C.getResponseHeader("Cache-Control"),C.getResponseHeader("Expires"))}else y(new Un(C.statusText,C.status,p.url))},C.send(p.body),{cancel:()=>C.abort()}}(o,n)},bi=function(o,n){return bn(Bn(o,{type:"arrayBuffer"}),n)};function fi(o){const n=U.document.createElement("a");return n.href=o,n.protocol===U.document.location.protocol&&n.host===U.document.location.host}const ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ie,Ce;Ie=[],Ce=0;const st=function(o,n){if(te.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),Ce>=q.MAX_PARALLEL_IMAGE_REQUESTS){const C={requestParameters:o,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return Ie.push(C),C}Ce++;let a=!1;const p=()=>{if(!a)for(a=!0,Ce--;Ie.length&&Ce<q.MAX_PARALLEL_IMAGE_REQUESTS;){const C=Ie.shift(),{requestParameters:S,callback:z,cancelled:Q}=C;Q||(C.cancel=st(S,z).cancel)}},y=bi(o,(C,S,z,Q)=>{p(),C?n(C):S&&(U.createImageBitmap?function(W,J){const ie=new U.Blob([new Uint8Array(W)],{type:"image/png"});U.createImageBitmap(ie).then(se=>{J(null,se)}).catch(se=>{J(new Error(`Could not load image because of ${se.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(S,(W,J)=>n(W,J,z,Q)):function(W,J){const ie=new U.Image,se=U.URL;ie.onload=()=>{J(null,ie),se.revokeObjectURL(ie.src),ie.onload=null,U.requestAnimationFrame(()=>{ie.src=ot})},ie.onerror=()=>J(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const fe=new U.Blob([new Uint8Array(W)],{type:"image/png"});ie.src=W.byteLength?se.createObjectURL(fe):ot}(S,(W,J)=>n(W,J,z,Q)))});return{cancel:()=>{y.cancel(),p()}}},ft="NO_ACCESS_TOKEN";function kt(o){return o.indexOf("mapbox:")===0}function zt(o){return q.API_URL_REGEX.test(o)}function Rt(o){return q.API_CDN_URL_REGEX.test(o)}function yt(o){return q.API_STYLE_REGEX.test(o)&&!Xt(o)}function Xt(o){return q.API_SPRITE_REGEX.test(o)}const Tn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Fn(o){const n=o.match(Tn);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function zn(o){const n=o.params.length?`?${o.params.join("&")}`:"";return`${o.protocol}://${o.authority}${o.path}${n}`}const rr="mapbox.eventData";function Zi(o){if(!o)return null;const n=o.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(U.atob(n[1]).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Pe{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const a=Zi(q.ACCESS_TOKEN);let p="";return p=a&&a.u?U.btoa(encodeURIComponent(a.u).replace(/%([0-9A-F]{2})/g,(y,C)=>String.fromCharCode(+("0x"+C)))):q.ACCESS_TOKEN||"",n?`${rr}.${n}:${p}`:`${rr}:${p}`}fetchEventData(){const n=jr("localStorage"),a=this.getStorageKey(),p=this.getStorageKey("uuid");if(n)try{const y=U.localStorage.getItem(a);y&&(this.eventData=JSON.parse(y));const C=U.localStorage.getItem(p);C&&(this.anonId=C)}catch{di("Unable to read from LocalStorage")}}saveEventData(){const n=jr("localStorage"),a=this.getStorageKey(),p=this.getStorageKey("uuid");if(n)try{U.localStorage.setItem(p,this.anonId),Object.keys(this.eventData).length>=1&&U.localStorage.setItem(a,JSON.stringify(this.eventData))}catch{di("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,a,p,y){if(!q.EVENTS_URL)return;const C=Fn(q.EVENTS_URL);C.params.push(`access_token=${y||q.ACCESS_TOKEN||""}`);const S={event:this.type,created:new Date(n).toISOString()},z=a?Bn(S,a):S,Q={url:zn(C),headers:{"Content-Type":"text/plain"},body:JSON.stringify([z])};this.pendingRequest=function(W,J){return bn(Bn(W,{method:"POST"}),J)}(Q,W=>{this.pendingRequest=null,p(W),this.saveEventData(),this.processRequests(y)})}queueRequest(n,a){this.queue.push(n),this.processRequests(a)}}const pe=new class extends Pe{constructor(o){super("appUserTurnstile"),this._customAccessToken=o}postTurnstileEvent(o,n){q.EVENTS_URL&&q.ACCESS_TOKEN&&Array.isArray(o)&&o.some(a=>kt(a)||zt(a))&&this.queueRequest(Date.now(),n)}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=Zi(q.ACCESS_TOKEN),a=n?n.u:q.ACCESS_TOKEN;let p=a!==this.eventData.tokenU;zi(this.anonId)||(this.anonId=tr(),p=!0);const y=this.queue.shift();if(this.eventData.lastSuccess){const C=new Date(this.eventData.lastSuccess),S=new Date(y),z=(y-this.eventData.lastSuccess)/864e5;p=p||z>=1||z<-1||C.getDate()!==S.getDate()}else p=!0;p?this.postEvent(y,{sdkIdentifier:"mapbox-gl-js",sdkVersion:$,skuId:Te,"enabled.telemetry":!1,userId:this.anonId},C=>{C||(this.eventData.lastSuccess=y,this.eventData.tokenU=a)},o):this.processRequests()}},we=pe.postTurnstileEvent.bind(pe),je=new class extends Pe{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(o,n,a,p){this.skuToken=n,this.errorCb=p,q.EVENTS_URL&&(a||q.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},a):this.errorCb(new Error(ft)))}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:a}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),zi(this.anonId)||(this.anonId=tr()),this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:$,skuId:Te,skuToken:this.skuToken,userId:this.anonId},p=>{p?this.errorCb(p):n&&(this.success[n]=!0)},o))}},Ke=je.postMapLoadEvent.bind(je),_t=new class extends Pe{constructor(){super("gljs.performance")}postPerformanceEvent(o,n){q.EVENTS_URL&&(o||q.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},o)}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,performanceData:a}=this.queue.shift(),p=function(y){const C=U.performance.getEntriesByType("resource"),S=U.performance.getEntriesByType("mark"),z=function(se){const fe={};if(se){for(const _e in se)if(_e!=="other")for(const Me of se[_e]){const Ve=`${_e}ResolveRangeMin`,ut=`${_e}ResolveRangeMax`,Ct=`${_e}RequestCount`,ht=`${_e}RequestCachedCount`;fe[Ve]=Math.min(fe[Ve]||1/0,Me.startTime),fe[ut]=Math.max(fe[ut]||-1/0,Me.responseEnd);const vt=Pt=>{fe[Pt]===void 0&&(fe[Pt]=0),++fe[Pt]};Me.transferSize!==void 0&&Me.transferSize===0&&vt(ht),vt(Ct)}}return fe}(function(se,fe){const _e={};if(se)for(const Me of se){const Ve=fe(Me);_e[Ve]===void 0&&(_e[Ve]=[]),_e[Ve].push(Me)}return _e}(C,an)),Q=U.devicePixelRatio,W=U.navigator.connection||U.navigator.mozConnection||U.navigator.webkitConnection,J={counters:[],metadata:[],attributes:[]},ie=(se,fe,_e)=>{_e!=null&&se.push({name:fe,value:_e.toString()})};for(const se in z)ie(J.counters,se,z[se]);if(y.interactionRange[0]!==1/0&&y.interactionRange[1]!==-1/0&&(ie(J.counters,"interactionRangeMin",y.interactionRange[0]),ie(J.counters,"interactionRangeMax",y.interactionRange[1])),S)for(const se of Object.keys(Jt)){const fe=Jt[se],_e=S.find(Me=>Me.name===fe);_e&&ie(J.counters,fe,_e.startTime)}return ie(J.counters,"visibilityHidden",y.visibilityHidden),ie(J.attributes,"style",function(se){if(se)for(const fe of se){const _e=fe.name.split("?")[0];if(yt(_e)){const Me=_e.split("/").slice(-2);if(Me.length===2)return`mapbox://styles/${Me[0]}/${Me[1]}`}}}(C)),ie(J.attributes,"terrainEnabled",y.terrainEnabled?"true":"false"),ie(J.attributes,"fogEnabled",y.fogEnabled?"true":"false"),ie(J.attributes,"projection",y.projection),ie(J.attributes,"zoom",y.zoom),ie(J.metadata,"devicePixelRatio",Q),ie(J.metadata,"connectionEffectiveType",W?W.effectiveType:void 0),ie(J.metadata,"navigatorUserAgent",U.navigator.userAgent),ie(J.metadata,"screenWidth",U.screen.width),ie(J.metadata,"screenHeight",U.screen.height),ie(J.metadata,"windowWidth",U.innerWidth),ie(J.metadata,"windowHeight",U.innerHeight),ie(J.metadata,"mapWidth",y.width/Q),ie(J.metadata,"mapHeight",y.height/Q),ie(J.metadata,"webglRenderer",y.renderer),ie(J.metadata,"webglVendor",y.vendor),ie(J.metadata,"sdkVersion",$),ie(J.metadata,"sdkIdentifier","mapbox-gl-js"),J}(a);for(const y of p.metadata);for(const y of p.counters);for(const y of p.attributes);this.postEvent(n,p,()=>{},o)}},qe=_t.postPerformanceEvent.bind(_t),Oe=new class extends Pe{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(o,n,a,p){if(!q.API_URL||!q.SESSION_PATH)return;const y=Fn(q.API_URL+q.SESSION_PATH);y.params.push(`sku=${n||""}`),y.params.push(`access_token=${p||q.ACCESS_TOKEN||""}`);const C={url:zn(y),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(S,z){return bn(Bn(S,{method:"GET"}),z)}(C,S=>{this.pendingRequest=null,a(S),this.saveEventData(),this.processRequests(p)})}getSessionAPI(o,n,a,p){this.skuToken=n,this.errorCb=p,q.SESSION_PATH&&q.API_URL&&(a||q.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},a):this.errorCb(new Error(ft)))}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:a}=this.queue.shift();n&&this.success[n]||this.getSession(a,this.skuToken,p=>{p?this.errorCb(p):n&&(this.success[n]=!0)},o)}},Je=Oe.getSessionAPI.bind(Oe),mt=new Set,Jt={create:"create",load:"load",fullLoad:"fullLoad"},Sn={mark(o){U.performance.mark(o)},measure(o,n,a){U.performance.measure(o,n,a)}};function an(o){const n=o.name.split("?")[0];return Rt(n)&&n.includes("mapbox-gl.js")?"javascript":Rt(n)&&n.includes("mapbox-gl.css")?"css":function(a){return q.API_FONTS_REGEX.test(a)}(n)?"fontRange":Xt(n)?"sprite":yt(n)?"style":function(a){return q.API_TILEJSON_REGEX.test(a)}(n)?"tilejson":"other"}const gn=U.performance;function mi(o){const n=o?o.url.toString():void 0;return gn.getEntriesByName(n)}let yi,cr,xr,Gr;const mr={now:()=>xr!==void 0?xr:U.performance.now(),setNow(o){xr=o},restoreNow(){xr=void 0},frame(o){const n=U.requestAnimationFrame(o);return{cancel:()=>U.cancelAnimationFrame(n)}},getImageData(o,n=0){const{width:a,height:p}=o;Gr||(Gr=U.document.createElement("canvas"));const y=Gr.getContext("2d",{willReadFrequently:!0});if(!y)throw new Error("failed to create canvas 2d context");return(a>Gr.width||p>Gr.height)&&(Gr.width=a,Gr.height=p),y.clearRect(-n,-n,a+2*n,p+2*n),y.drawImage(o,0,0,a,p),y.getImageData(-n,-n,a+2*n,p+2*n)},resolveURL:o=>(yi||(yi=U.document.createElement("a")),yi.href=o,yi.href),get devicePixelRatio(){return U.devicePixelRatio},get prefersReducedMotion(){return!!U.matchMedia&&(cr==null&&(cr=U.matchMedia("(prefers-reduced-motion: reduce)")),cr.matches)}};function Hr(o,n,a){a[o]&&a[o].indexOf(n)!==-1||(a[o]=a[o]||[],a[o].push(n))}function fo(o,n,a){if(a&&a[o]){const p=a[o].indexOf(n);p!==-1&&a[o].splice(p,1)}}class xo{constructor(n,a={}){Bn(this,a),this.type=n}}class hs extends xo{constructor(n,a={}){super("error",Bn({error:n},a))}}class Yo{on(n,a){return this._listeners=this._listeners||{},Hr(n,a,this._listeners),this}off(n,a){return fo(n,a,this._listeners),fo(n,a,this._oneTimeListeners),this}once(n,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Hr(n,a,this._oneTimeListeners),this):new Promise(p=>this.once(n,p))}fire(n,a){typeof n=="string"&&(n=new xo(n,a||{}));const p=n.type;if(this.listens(p)){n.target=this;const y=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const z of y)z.call(this,n);const C=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const z of C)fo(p,z,this._oneTimeListeners),z.call(this,n);const S=this._eventedParent;S&&(Bn(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),S.fire(n))}else n instanceof hs&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var hn=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Wr(o,...n){for(const a of n)for(const p in a)o[p]=a[p];return o}function Dr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Mr(o){if(Array.isArray(o))return o.map(Mr);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const a in o)n[a]=Mr(o[a]);return n}return Dr(o)}class xc extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}var ca=xc;class sh{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[p,y]of a)this.bindings[p]=y}concat(n){return new sh(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var Jr=sh;const Wo={kind:"null"},gi={kind:"number"},zr={kind:"string"},_r={kind:"boolean"},Va={kind:"color"},Ea={kind:"object"},Lr={kind:"value"},Io={kind:"collator"},Sa={kind:"formatted"},_a={kind:"resolvedImage"};function Es(o,n){return{kind:"array",itemType:o,N:n}}function Ho(o){if(o.kind==="array"){const n=Ho(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const Ol=[Wo,gi,zr,_r,Va,Sa,Ea,Es(Lr),_a];function gl(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!gl(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const a of Ol)if(!gl(a,n))return null}}return`Expected ${Ho(o)} but found ${Ho(n)} instead.`}function oc(o,n){return n.some(a=>a.kind===o.kind)}function _l(o,n){return n.some(a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o)}var Jo,Qc={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function $c(o){return(o=Math.round(o))<0?0:o>255?255:o}function Uu(o){return $c(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function fu(o){return(n=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:n>1?1:n;var n}function bc(o,n,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?o+(n-o)*a*6:2*a<1?n:3*a<2?o+(n-o)*(2/3-a)*6:o}try{Jo={}.parseCSSColor=function(o){var n,a=o.replace(/ /g,"").toLowerCase();if(a in Qc)return Qc[a].slice();if(a[0]==="#")return a.length===4?(n=parseInt(a.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:a.length===7&&(n=parseInt(a.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var p=a.indexOf("("),y=a.indexOf(")");if(p!==-1&&y+1===a.length){var C=a.substr(0,p),S=a.substr(p+1,y-(p+1)).split(","),z=1;switch(C){case"rgba":if(S.length!==4)return null;z=fu(S.pop());case"rgb":return S.length!==3?null:[Uu(S[0]),Uu(S[1]),Uu(S[2]),z];case"hsla":if(S.length!==4)return null;z=fu(S.pop());case"hsl":if(S.length!==3)return null;var Q=(parseFloat(S[0])%360+360)%360/360,W=fu(S[1]),J=fu(S[2]),ie=J<=.5?J*(W+1):J+W-J*W,se=2*J-ie;return[$c(255*bc(se,ie,Q+1/3)),$c(255*bc(se,ie,Q)),$c(255*bc(se,ie,Q-1/3)),z];default:return null}}return null}}catch{}class br{constructor(n,a,p,y=1){this.r=n,this.g=a,this.b=p,this.a=y}static parse(n){if(!n)return;if(n instanceof br)return n;if(typeof n!="string")return;const a=Jo(n);return a?new br(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[n,a,p,y]=this.toArray();return`rgba(${Math.round(n)},${Math.round(a)},${Math.round(p)},${y})`}toArray(){const{r:n,g:a,b:p,a:y}=this;return y===0?[0,0,0,0]:[255*n/y,255*a/y,255*p/y,y]}toArray01(){const{r:n,g:a,b:p,a:y}=this;return y===0?[0,0,0,0]:[n/y,a/y,p/y,y]}toArray01PremultipliedAlpha(){const{r:n,g:a,b:p,a:y}=this;return[n,a,p,y]}}br.black=new br(0,0,0,1),br.white=new br(1,1,1,1),br.transparent=new br(0,0,0,0),br.red=new br(1,0,0,1),br.blue=new br(0,0,1,1);var Ko=br;class ss{constructor(n,a,p){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ah{constructor(n,a,p,y,C){this.text=n.normalize?n.normalize():n,this.image=a,this.scale=p,this.fontStack=y,this.textColor=C}}class ia{constructor(n){this.sections=n}static fromString(n){return new ia([new ah(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ia?n:ia.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const a of this.sections){if(a.image){n.push(["image",a.image.name]);continue}n.push(a.text);const p={};a.fontStack&&(p["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(p["font-scale"]=a.scale),a.textColor&&(p["text-color"]=["rgba"].concat(a.textColor.toArray())),n.push(p)}return n}}class Da{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Da({name:n,available:!1}):null}serialize(){return["image",this.name]}}function lh(o,n,a,p){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[o,n,a,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[o,n,a,p]:[o,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function eo(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Ko||o instanceof ss||o instanceof ia||o instanceof Da)return!0;if(Array.isArray(o)){for(const n of o)if(!eo(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!eo(o[n]))return!1;return!0}return!1}function fs(o){if(o===null)return Wo;if(typeof o=="string")return zr;if(typeof o=="boolean")return _r;if(typeof o=="number")return gi;if(o instanceof Ko)return Va;if(o instanceof ss)return Io;if(o instanceof ia)return Sa;if(o instanceof Da)return _a;if(Array.isArray(o)){const n=o.length;let a;for(const p of o){const y=fs(p);if(a){if(a===y)continue;a=Lr;break}a=y}return Es(a||Lr,n)}return Ea}function jc(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Ko||o instanceof ia||o instanceof Da?o.toString():JSON.stringify(o)}class Rr{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!eo(n[1]))return a.error("invalid value");const p=n[1];let y=fs(p);const C=a.expectedType;return y.kind!=="array"||y.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(y=C),new Rr(y,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ko?["rgba"].concat(this.value.toArray()):this.value instanceof ia?this.value.serialize():this.value}}var ao=Rr,ua=class{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}};const Ua={string:zr,number:gi,boolean:_r,object:Ea};class Lh{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let p,y=1;const C=n[0];if(C==="array"){let z,Q;if(n.length>2){const W=n[1];if(typeof W!="string"||!(W in Ua)||W==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);z=Ua[W],y++}else z=Lr;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);Q=n[2],y++}p=Es(z,Q)}else p=Ua[C];const S=[];for(;y<n.length;y++){const z=a.parse(n[y],y,Lr);if(!z)return null;S.push(z)}return new Lh(p,S)}evaluate(n){for(let a=0;a<this.args.length;a++){const p=this.args[a].evaluate(n);if(!gl(this.type,fs(p)))return p;if(a===this.args.length-1)throw new ua(`Expected value to be of type ${Ho(this.type)}, but found ${Ho(fs(p))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,a=[n.kind];if(n.kind==="array"){const p=n.itemType;if(p.kind==="string"||p.kind==="number"||p.kind==="boolean"){a.push(p.kind);const y=n.N;(typeof y=="number"||this.args.length>1)&&a.push(y)}}return a.concat(this.args.map(p=>p.serialize()))}}var yl=Lh;class vl{constructor(n){this.type=Sa,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const p=n[1];if(!Array.isArray(p)&&typeof p=="object")return a.error("First argument must be an image or text section.");const y=[];let C=!1;for(let S=1;S<=n.length-1;++S){const z=n[S];if(C&&typeof z=="object"&&!Array.isArray(z)){C=!1;let Q=null;if(z["font-scale"]&&(Q=a.parse(z["font-scale"],1,gi),!Q))return null;let W=null;if(z["text-font"]&&(W=a.parse(z["text-font"],1,Es(zr)),!W))return null;let J=null;if(z["text-color"]&&(J=a.parse(z["text-color"],1,Va),!J))return null;const ie=y[y.length-1];ie.scale=Q,ie.font=W,ie.textColor=J}else{const Q=a.parse(n[S],1,Lr);if(!Q)return null;const W=Q.type.kind;if(W!=="string"&&W!=="value"&&W!=="null"&&W!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,y.push({content:Q,scale:null,font:null,textColor:null})}}return new vl(y)}evaluate(n){return new ia(this.sections.map(a=>{const p=a.content.evaluate(n);return fs(p)===_a?new ah("",p,null,null,null):new ah(jc(p),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const a of this.sections){n.push(a.content.serialize());const p={};a.scale&&(p["font-scale"]=a.scale.serialize()),a.font&&(p["text-font"]=a.font.serialize()),a.textColor&&(p["text-color"]=a.textColor.serialize()),n.push(p)}return n}}class ch{constructor(n){this.type=_a,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const p=a.parse(n[1],1,zr);return p?new ch(p):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),p=Da.fromString(a);return p&&n.availableImages&&(p.available=n.availableImages.indexOf(a)>-1),p}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const kh={"to-boolean":_r,"to-color":Va,"to-number":gi,"to-string":zr};class Mo{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const p=n[0];if((p==="to-boolean"||p==="to-string")&&n.length!==2)return a.error("Expected one argument.");const y=kh[p],C=[];for(let S=1;S<n.length;S++){const z=a.parse(n[S],S,Lr);if(!z)return null;C.push(z)}return new Mo(y,C)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let a,p;for(const y of this.args){if(a=y.evaluate(n),p=null,a instanceof Ko)return a;if(typeof a=="string"){const C=n.parseColor(a);if(C)return C}else if(Array.isArray(a)&&(p=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:lh(a[0],a[1],a[2],a[3]),!p))return new Ko(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new ua(p||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const p of this.args){if(a=p.evaluate(n),a===null)return 0;const y=Number(a);if(!isNaN(y))return y}throw new ua(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?ia.fromString(jc(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?Da.fromString(jc(this.args[0].evaluate(n))):jc(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new vl([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ch(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(a=>{n.push(a.serialize())}),n}}var Ss=Mo;const Is=["Unknown","Point","LineString","Polygon"];var za=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Is[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:a,y:p}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(a*n-o[0])+this.featureDistanceData.bearing[1]*(p*n-o[1])}return 0}parseColor(o){let n=this._parseColorCache[o];return n||(n=this._parseColorCache[o]=Ko.parse(o)),n}};class wc{constructor(n,a,p,y){this.name=n,this.type=a,this._evaluate=p,this.args=y}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,a){const p=n[0],y=wc.definitions[p];if(!y)return a.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(y)?y[0]:y.type,S=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,z=S.filter(([W])=>!Array.isArray(W)||W.length===n.length-1);let Q=null;for(const[W,J]of z){Q=new bl(a.registry,a.path,null,a.scope);const ie=[];let se=!1;for(let fe=1;fe<n.length;fe++){const _e=n[fe],Me=Array.isArray(W)?W[fe-1]:W.type,Ve=Q.parse(_e,1+ie.length,Me);if(!Ve){se=!0;break}ie.push(Ve)}if(!se)if(Array.isArray(W)&&W.length!==ie.length)Q.error(`Expected ${W.length} arguments, but found ${ie.length} instead.`);else{for(let fe=0;fe<ie.length;fe++){const _e=Array.isArray(W)?W[fe]:W.type,Me=ie[fe];Q.concat(fe+1).checkSubtype(_e,Me.type)}if(Q.errors.length===0)return new wc(p,C,J,ie)}}if(z.length===1)a.errors.push(...Q.errors);else{const W=(z.length?z:S).map(([ie])=>{return se=ie,Array.isArray(se)?`(${se.map(Ho).join(", ")})`:`(${Ho(se.type)}...)`;var se}).join(" | "),J=[];for(let ie=1;ie<n.length;ie++){const se=a.parse(n[ie],1+J.length);if(!se)return null;J.push(Ho(se.type))}a.error(`Expected arguments of type ${W}, but found (${J.join(", ")}) instead.`)}return null}static register(n,a){wc.definitions=a;for(const p in a)n[p]=wc}}var Nl=wc;class ks{constructor(n,a,p){this.type=Io,this.locale=p,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const p=n[1];if(typeof p!="object"||Array.isArray(p))return a.error("Collator options argument must be an object.");const y=a.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,_r);if(!y)return null;const C=a.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,_r);if(!C)return null;let S=null;return p.locale&&(S=a.parse(p.locale,1,zr),!S)?null:new ks(y,C,S)}evaluate(n){return new ss(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const Cc=8192;function uh(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function zu(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function hh(o,n){const a=(180+o[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,y=Math.pow(2,n.z);return[Math.round(a*y*Cc),Math.round(p*y*Cc)]}function Ph(o,n,a){const p=o[0]-n[0],y=o[1]-n[1],C=o[0]-a[0],S=o[1]-a[1];return p*S-C*y==0&&p*C<=0&&y*S<=0}function Fh(o,n){let a=!1;for(let S=0,z=n.length;S<z;S++){const Q=n[S];for(let W=0,J=Q.length;W<J-1;W++){if(Ph(o,Q[W],Q[W+1]))return!1;(y=Q[W])[1]>(p=o)[1]!=(C=Q[W+1])[1]>p[1]&&p[0]<(C[0]-y[0])*(p[1]-y[1])/(C[1]-y[1])+y[0]&&(a=!a)}}var p,y,C;return a}function ps(o,n){for(let a=0;a<n.length;a++)if(Fh(o,n[a]))return!0;return!1}function dh(o,n,a,p){const y=p[0]-a[0],C=p[1]-a[1],S=(o[0]-a[0])*C-y*(o[1]-a[1]),z=(n[0]-a[0])*C-y*(n[1]-a[1]);return S>0&&z<0||S<0&&z>0}function ra(o,n,a){for(const W of a)for(let J=0;J<W.length-1;++J)if((z=[(S=W[J+1])[0]-(C=W[J])[0],S[1]-C[1]])[0]*(Q=[(y=n)[0]-(p=o)[0],y[1]-p[1]])[1]-z[1]*Q[0]!=0&&dh(p,y,C,S)&&dh(C,S,p,y))return!0;var p,y,C,S,z,Q;return!1}function to(o,n){for(let a=0;a<o.length;++a)if(!Fh(o[a],n))return!1;for(let a=0;a<o.length-1;++a)if(ra(o[a],o[a+1],n))return!1;return!0}function pu(o,n){for(let a=0;a<n.length;a++)if(to(o,n[a]))return!0;return!1}function Ql(o,n,a){const p=[];for(let y=0;y<o.length;y++){const C=[];for(let S=0;S<o[y].length;S++){const z=hh(o[y][S],a);uh(n,z),C.push(z)}p.push(C)}return p}function mu(o,n,a){const p=[];for(let y=0;y<o.length;y++){const C=Ql(o[y],n,a);p.push(C)}return p}function gu(o,n,a,p){if(o[0]<a[0]||o[0]>a[2]){const y=.5*p;let C=o[0]-a[0]>y?-p:a[0]-o[0]>y?p:0;C===0&&(C=o[0]-a[2]>y?-p:a[2]-o[0]>y?p:0),o[0]+=C}uh(n,o)}function Vo(o,n,a,p){const y=Math.pow(2,p.z)*Cc,C=[p.x*Cc,p.y*Cc],S=[];if(!o)return S;for(const z of o)for(const Q of z){const W=[Q.x+C[0],Q.y+C[1]];gu(W,n,a,y),S.push(W)}return S}function $l(o,n,a,p){const y=Math.pow(2,p.z)*Cc,C=[p.x*Cc,p.y*Cc],S=[];if(!o)return S;for(const Q of o){const W=[];for(const J of Q){const ie=[J.x+C[0],J.y+C[1]];uh(n,ie),W.push(ie)}S.push(W)}if(n[2]-n[0]<=y/2){(z=n)[0]=z[1]=1/0,z[2]=z[3]=-1/0;for(const Q of S)for(const W of Q)gu(W,n,a,y)}var z;return S}class xl{constructor(n,a){this.type=_r,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(eo(n[1])){const p=n[1];if(p.type==="FeatureCollection")for(let y=0;y<p.features.length;++y){const C=p.features[y].geometry.type;if(C==="Polygon"||C==="MultiPolygon")return new xl(p,p.features[y].geometry)}else if(p.type==="Feature"){const y=p.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new xl(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new xl(p,p)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,p){const y=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],S=a.canonicalID();if(!S)return!1;if(p.type==="Polygon"){const z=Ql(p.coordinates,C,S),Q=Vo(a.geometry(),y,C,S);if(!zu(y,C))return!1;for(const W of Q)if(!Fh(W,z))return!1}if(p.type==="MultiPolygon"){const z=mu(p.coordinates,C,S),Q=Vo(a.geometry(),y,C,S);if(!zu(y,C))return!1;for(const W of Q)if(!ps(W,z))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,p){const y=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],S=a.canonicalID();if(!S)return!1;if(p.type==="Polygon"){const z=Ql(p.coordinates,C,S),Q=$l(a.geometry(),y,C,S);if(!zu(y,C))return!1;for(const W of Q)if(!to(W,z))return!1}if(p.type==="MultiPolygon"){const z=mu(p.coordinates,C,S),Q=$l(a.geometry(),y,C,S);if(!zu(y,C))return!1;for(const W of Q)if(!pu(W,z))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var rs=xl;function sc(o){if(o instanceof Nl&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof rs)return!1;let n=!0;return o.eachChild(a=>{n&&!sc(a)&&(n=!1)}),n}function Or(o){if(o instanceof Nl&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(a=>{n&&!Or(a)&&(n=!1)}),n}function bo(o,n){if(o instanceof Nl&&n.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(p=>{a&&!bo(p,n)&&(a=!1)}),a}class Zo{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const p=n[1];return a.scope.has(p)?new Zo(p,a.scope.get(p)):a.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var es=Zo;class ya{constructor(n,a=[],p,y=new Jr,C=[]){this.registry=n,this.path=a,this.key=a.map(S=>`[${S}]`).join(""),this.scope=y,this.errors=C,this.expectedType=p}parse(n,a,p,y,C={}){return a?this.concat(a,p,y)._parse(n,C):this._parse(n,C)}_parse(n,a){function p(y,C,S){return S==="assert"?new yl(C,[y]):S==="coerce"?new Ss(C,[y]):y}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=n[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[y];if(C){let S=C.parse(n,this);if(!S)return null;if(this.expectedType){const z=this.expectedType,Q=S.type;if(z.kind!=="string"&&z.kind!=="number"&&z.kind!=="boolean"&&z.kind!=="object"&&z.kind!=="array"||Q.kind!=="value")if(z.kind!=="color"&&z.kind!=="formatted"&&z.kind!=="resolvedImage"||Q.kind!=="value"&&Q.kind!=="string"){if(this.checkSubtype(z,Q))return null}else S=p(S,z,a.typeAnnotation||"coerce");else S=p(S,z,a.typeAnnotation||"assert")}if(!(S instanceof ao)&&S.type.kind!=="resolvedImage"&&Ru(S)){const z=new za;try{S=new ao(S.type,S.evaluate(z))}catch(Q){return this.error(Q.message),null}}return S}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,p){const y=typeof n=="number"?this.path.concat(n):this.path,C=p?this.scope.concat(p):this.scope;return new ya(this.registry,y,a||null,C,this.errors)}error(n,...a){const p=`${this.key}${a.map(y=>`[${y}]`).join("")}`;this.errors.push(new ca(p,n))}checkSubtype(n,a){const p=gl(n,a);return p&&this.error(p),p}}var bl=ya;function Ru(o){if(o instanceof es)return Ru(o.boundExpression);if(o instanceof Nl&&o.name==="error"||o instanceof ks||o instanceof rs)return!1;const n=o instanceof Ss||o instanceof yl;let a=!0;return o.eachChild(p=>{a=n?a&&Ru(p):a&&p instanceof ao}),!!a&&sc(o)&&bo(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ra(o,n){const a=o.length-1;let p,y,C=0,S=a,z=0;for(;C<=S;)if(z=Math.floor((C+S)/2),p=o[z],y=o[z+1],p<=n){if(z===a||n<y)return z;C=z+1}else{if(!(p>n))throw new ua("Input is not a number.");S=z-1}return 0}class Ou{constructor(n,a,p){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[y,C]of p)this.labels.push(y),this.outputs.push(C)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const p=a.parse(n[1],1,gi);if(!p)return null;const y=[];let C=null;a.expectedType&&a.expectedType.kind!=="value"&&(C=a.expectedType);for(let S=1;S<n.length;S+=2){const z=S===1?-1/0:n[S],Q=n[S+1],W=S,J=S+1;if(typeof z!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(y.length&&y[y.length-1][0]>=z)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',W);const ie=a.parse(Q,J,C);if(!ie)return null;C=C||ie.type,y.push([z,ie])}return new Ou(C,p,y)}evaluate(n){const a=this.labels,p=this.outputs;if(a.length===1)return p[0].evaluate(n);const y=this.input.evaluate(n);if(y<=a[0])return p[0].evaluate(n);const C=a.length;return y>=a[C-1]?p[C-1].evaluate(n):p[Ra(a,y)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&n.push(this.labels[a]),n.push(this.outputs[a].serialize());return n}}var Ah=Ou;function lo(o,n,a){return o*(1-a)+n*a}var jl=Object.freeze({__proto__:null,array:function(o,n,a){return o.map((p,y)=>lo(p,n[y],a))},color:function(o,n,a){return new Ko(lo(o.r,n.r,a),lo(o.g,n.g,a),lo(o.b,n.b,a),lo(o.a,n.a,a))},number:lo});const _u=.95047,Hc=1.08883,fh=4/29,Vc=6/29,Nu=3*Vc*Vc,ms=Vc*Vc*Vc,va=Math.PI/180,ph=180/Math.PI;function sl(o){return o>ms?Math.pow(o,1/3):o/Nu+fh}function Dh(o){return o>Vc?o*o*o:Nu*(o-fh)}function al(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function yu(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function ac(o){const n=yu(o.r),a=yu(o.g),p=yu(o.b),y=sl((.4124564*n+.3575761*a+.1804375*p)/_u),C=sl((.2126729*n+.7151522*a+.072175*p)/1);return{l:116*C-16,a:500*(y-C),b:200*(C-sl((.0193339*n+.119192*a+.9503041*p)/Hc)),alpha:o.a}}function gd(o){let n=(o.l+16)/116,a=isNaN(o.a)?n:n+o.a/500,p=isNaN(o.b)?n:n-o.b/200;return n=1*Dh(n),a=_u*Dh(a),p=Hc*Dh(p),new Ko(al(3.2404542*a-1.5371385*n-.4985314*p),al(-.969266*a+1.8760108*n+.041556*p),al(.0556434*a-.2040259*n+1.0572252*p),o.alpha)}function Qu(o,n,a){const p=n-o;return o+a*(p>180||p<-180?p-360*Math.round(p/360):p)}const lc={forward:ac,reverse:gd,interpolate:function(o,n,a){return{l:lo(o.l,n.l,a),a:lo(o.a,n.a,a),b:lo(o.b,n.b,a),alpha:lo(o.alpha,n.alpha,a)}}},ll={forward:function(o){const{l:n,a,b:p}=ac(o),y=Math.atan2(p,a)*ph;return{h:y<0?y+360:y,c:Math.sqrt(a*a+p*p),l:n,alpha:o.a}},reverse:function(o){const n=o.h*va,a=o.c;return gd({l:o.l,a:Math.cos(n)*a,b:Math.sin(n)*a,alpha:o.alpha})},interpolate:function(o,n,a){return{h:Qu(o.h,n.h,a),c:lo(o.c,n.c,a),l:lo(o.l,n.l,a),alpha:lo(o.alpha,n.alpha,a)}}};var Bc=Object.freeze({__proto__:null,hcl:ll,lab:lc});class Gc{constructor(n,a,p,y,C){this.type=n,this.operator=a,this.interpolation=p,this.input=y,this.labels=[],this.outputs=[];for(const[S,z]of C)this.labels.push(S),this.outputs.push(z)}static interpolationFactor(n,a,p,y){let C=0;if(n.name==="exponential")C=Wc(a,n.base,p,y);else if(n.name==="linear")C=Wc(a,1,p,y);else if(n.name==="cubic-bezier"){const S=n.controlPoints;C=new nt(S[0],S[1],S[2],S[3]).solve(Wc(a,1,p,y))}return C}static parse(n,a){let[p,y,C,...S]=n;if(!Array.isArray(y)||y.length===0)return a.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const W=y[1];if(typeof W!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:W}}else{if(y[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const W=y.slice(1);if(W.length!==4||W.some(J=>typeof J!="number"||J<0||J>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:W}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(C=a.parse(C,2,gi),!C)return null;const z=[];let Q=null;p==="interpolate-hcl"||p==="interpolate-lab"?Q=Va:a.expectedType&&a.expectedType.kind!=="value"&&(Q=a.expectedType);for(let W=0;W<S.length;W+=2){const J=S[W],ie=S[W+1],se=W+3,fe=W+4;if(typeof J!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',se);if(z.length&&z[z.length-1][0]>=J)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',se);const _e=a.parse(ie,fe,Q);if(!_e)return null;Q=Q||_e.type,z.push([J,_e])}return Q.kind==="number"||Q.kind==="color"||Q.kind==="array"&&Q.itemType.kind==="number"&&typeof Q.N=="number"?new Gc(Q,p,y,C,z):a.error(`Type ${Ho(Q)} is not interpolatable.`)}evaluate(n){const a=this.labels,p=this.outputs;if(a.length===1)return p[0].evaluate(n);const y=this.input.evaluate(n);if(y<=a[0])return p[0].evaluate(n);const C=a.length;if(y>=a[C-1])return p[C-1].evaluate(n);const S=Ra(a,y),z=Gc.interpolationFactor(this.interpolation,y,a[S],a[S+1]),Q=p[S].evaluate(n),W=p[S+1].evaluate(n);return this.operator==="interpolate"?jl[this.type.kind.toLowerCase()](Q,W,z):this.operator==="interpolate-hcl"?ll.reverse(ll.interpolate(ll.forward(Q),ll.forward(W),z)):lc.reverse(lc.interpolate(lc.forward(Q),lc.forward(W),z))}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,n,this.input.serialize()];for(let p=0;p<this.labels.length;p++)a.push(this.labels[p],this.outputs[p].serialize());return a}}function Wc(o,n,a,p){const y=p-a,C=o-a;return y===0?0:n===1?C/y:(Math.pow(n,C)-1)/(Math.pow(n,y)-1)}var Zs=Gc;class oa{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let p=null;const y=a.expectedType;y&&y.kind!=="value"&&(p=y);const C=[];for(const z of n.slice(1)){const Q=a.parse(z,1+C.length,p,void 0,{typeAnnotation:"omit"});if(!Q)return null;p=p||Q.type,C.push(Q)}const S=y&&C.some(z=>gl(y,z.type));return new oa(S?Lr:p,C)}evaluate(n){let a,p=null,y=0;for(const C of this.args){if(y++,p=C.evaluate(n),p&&p instanceof Da&&!p.available&&(a||(a=p),p=null,y===this.args.length))return a;if(p!==null)break}return p}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(a=>{n.push(a.serialize())}),n}}var $u=oa;class Tc{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const p=[];for(let C=1;C<n.length-1;C+=2){const S=n[C];if(typeof S!="string")return a.error(`Expected string, but found ${typeof S} instead.`,C);if(/[^a-zA-Z0-9_]/.test(S))return a.error("Variable names must contain only alphanumeric characters or '_'.",C);const z=a.parse(n[C+1],C+1);if(!z)return null;p.push([S,z])}const y=a.parse(n[n.length-1],n.length-1,a.expectedType,p);return y?new Tc(p,y):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[a,p]of this.bindings)n.push(a,p.serialize());return n.push(this.result.serialize()),n}}var mh=Tc;class Ia{constructor(n,a,p){this.type=n,this.index=a,this.input=p}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const p=a.parse(n[1],1,gi),y=a.parse(n[2],2,Es(a.expectedType||Lr));return p&&y?new Ia(y.type.itemType,p,y):null}evaluate(n){const a=this.index.evaluate(n),p=this.input.evaluate(n);if(a<0)throw new ua(`Array index out of bounds: ${a} < 0.`);if(a>=p.length)throw new ua(`Array index out of bounds: ${a} > ${p.length-1}.`);if(a!==Math.floor(a))throw new ua(`Array index must be an integer, but found ${a} instead.`);return p[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Ga=Ia;class gh{constructor(n,a){this.type=_r,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const p=a.parse(n[1],1,Lr),y=a.parse(n[2],2,Lr);return p&&y?oc(p.type,[_r,zr,gi,Wo,Lr])?new gh(p,y):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ho(p.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),p=this.haystack.evaluate(n);if(p==null)return!1;if(!_l(a,["boolean","string","number","null"]))throw new ua(`Expected first argument to be of type boolean, string, number or null, but found ${Ho(fs(a))} instead.`);if(!_l(p,["string","array"]))throw new ua(`Expected second argument to be of type array or string, but found ${Ho(fs(p))} instead.`);return p.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var cc=gh;class Kc{constructor(n,a,p){this.type=gi,this.needle=n,this.haystack=a,this.fromIndex=p}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const p=a.parse(n[1],1,Lr),y=a.parse(n[2],2,Lr);if(!p||!y)return null;if(!oc(p.type,[_r,zr,gi,Wo,Lr]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ho(p.type)} instead`);if(n.length===4){const C=a.parse(n[3],3,gi);return C?new Kc(p,y,C):null}return new Kc(p,y)}evaluate(n){const a=this.needle.evaluate(n),p=this.haystack.evaluate(n);if(!_l(a,["boolean","string","number","null"]))throw new ua(`Expected first argument to be of type boolean, string, number or null, but found ${Ho(fs(a))} instead.`);if(!_l(p,["string","array"]))throw new ua(`Expected second argument to be of type array or string, but found ${Ho(fs(p))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(n);return p.indexOf(a,y)}return p.indexOf(a)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var vu=Kc;class Ec{constructor(n,a,p,y,C,S){this.inputType=n,this.type=a,this.input=p,this.cases=y,this.outputs=C,this.otherwise=S}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let p,y;a.expectedType&&a.expectedType.kind!=="value"&&(y=a.expectedType);const C={},S=[];for(let W=2;W<n.length-1;W+=2){let J=n[W];const ie=n[W+1];Array.isArray(J)||(J=[J]);const se=a.concat(W);if(J.length===0)return se.error("Expected at least one branch label.");for(const _e of J){if(typeof _e!="number"&&typeof _e!="string")return se.error("Branch labels must be numbers or strings.");if(typeof _e=="number"&&Math.abs(_e)>Number.MAX_SAFE_INTEGER)return se.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof _e=="number"&&Math.floor(_e)!==_e)return se.error("Numeric branch labels must be integer values.");if(p){if(se.checkSubtype(p,fs(_e)))return null}else p=fs(_e);if(C[String(_e)]!==void 0)return se.error("Branch labels must be unique.");C[String(_e)]=S.length}const fe=a.parse(ie,W,y);if(!fe)return null;y=y||fe.type,S.push(fe)}const z=a.parse(n[1],1,Lr);if(!z)return null;const Q=a.parse(n[n.length-1],n.length-1,y);return Q?z.type.kind!=="value"&&a.concat(1).checkSubtype(p,z.type)?null:new Ec(p,y,z,C,S,Q):null}evaluate(n){const a=this.input.evaluate(n);return(fs(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),p=[],y={};for(const S of a){const z=y[this.cases[S]];z===void 0?(y[this.cases[S]]=p.length,p.push([this.cases[S],[S]])):p[z][1].push(S)}const C=S=>this.inputType.kind==="number"?Number(S):S;for(const[S,z]of p)n.push(z.length===1?C(z[0]):z.map(C)),n.push(this.outputs[S].serialize());return n.push(this.otherwise.serialize()),n}}var xa=Ec;class Wa{constructor(n,a,p){this.type=n,this.branches=a,this.otherwise=p}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let p;a.expectedType&&a.expectedType.kind!=="value"&&(p=a.expectedType);const y=[];for(let S=1;S<n.length-1;S+=2){const z=a.parse(n[S],S,_r);if(!z)return null;const Q=a.parse(n[S+1],S+1,p);if(!Q)return null;y.push([z,Q]),p=p||Q.type}const C=a.parse(n[n.length-1],n.length-1,p);return C?new Wa(p,y,C):null}evaluate(n){for(const[a,p]of this.branches)if(a.evaluate(n))return p.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,p]of this.branches)n(a),n(p);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(a=>{n.push(a.serialize())}),n}}var jt=Wa;class Dn{constructor(n,a,p,y){this.type=n,this.input=a,this.beginIndex=p,this.endIndex=y}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const p=a.parse(n[1],1,Lr),y=a.parse(n[2],2,gi);if(!p||!y)return null;if(!oc(p.type,[Es(Lr),zr,Lr]))return a.error(`Expected first argument to be of type array or string, but found ${Ho(p.type)} instead`);if(n.length===4){const C=a.parse(n[3],3,gi);return C?new Dn(p.type,p,y,C):null}return new Dn(p.type,p,y)}evaluate(n){const a=this.input.evaluate(n),p=this.beginIndex.evaluate(n);if(!_l(a,["string","array"]))throw new ua(`Expected first argument to be of type array or string, but found ${Ho(fs(a))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(n);return a.slice(p,y)}return a.slice(p)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var wn=Dn;function Ui(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Br(o,n,a,p){return p.compare(n,a)===0}function po(o,n,a){const p=o!=="=="&&o!=="!=";return class mz{constructor(C,S,z){this.type=_r,this.lhs=C,this.rhs=S,this.collator=z,this.hasUntypedArgument=C.type.kind==="value"||S.type.kind==="value"}static parse(C,S){if(C.length!==3&&C.length!==4)return S.error("Expected two or three arguments.");const z=C[0];let Q=S.parse(C[1],1,Lr);if(!Q)return null;if(!Ui(z,Q.type))return S.concat(1).error(`"${z}" comparisons are not supported for type '${Ho(Q.type)}'.`);let W=S.parse(C[2],2,Lr);if(!W)return null;if(!Ui(z,W.type))return S.concat(2).error(`"${z}" comparisons are not supported for type '${Ho(W.type)}'.`);if(Q.type.kind!==W.type.kind&&Q.type.kind!=="value"&&W.type.kind!=="value")return S.error(`Cannot compare types '${Ho(Q.type)}' and '${Ho(W.type)}'.`);p&&(Q.type.kind==="value"&&W.type.kind!=="value"?Q=new yl(W.type,[Q]):Q.type.kind!=="value"&&W.type.kind==="value"&&(W=new yl(Q.type,[W])));let J=null;if(C.length===4){if(Q.type.kind!=="string"&&W.type.kind!=="string"&&Q.type.kind!=="value"&&W.type.kind!=="value")return S.error("Cannot use collator to compare non-string types.");if(J=S.parse(C[3],3,Io),!J)return null}return new mz(Q,W,J)}evaluate(C){const S=this.lhs.evaluate(C),z=this.rhs.evaluate(C);if(p&&this.hasUntypedArgument){const Q=fs(S),W=fs(z);if(Q.kind!==W.kind||Q.kind!=="string"&&Q.kind!=="number")throw new ua(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${Q.kind}, ${W.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const Q=fs(S),W=fs(z);if(Q.kind!=="string"||W.kind!=="string")return n(C,S,z)}return this.collator?a(C,S,z,this.collator.evaluate(C)):n(C,S,z)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}serialize(){const C=[o];return this.eachChild(S=>{C.push(S.serialize())}),C}}}const qs=po("==",function(o,n,a){return n===a},Br),as=po("!=",function(o,n,a){return n!==a},function(o,n,a,p){return!Br(0,n,a,p)}),_d=po("<",function(o,n,a){return n<a},function(o,n,a,p){return p.compare(n,a)<0}),wl=po(">",function(o,n,a){return n>a},function(o,n,a,p){return p.compare(n,a)>0}),ha=po("<=",function(o,n,a){return n<=a},function(o,n,a,p){return p.compare(n,a)<=0}),Cl=po(">=",function(o,n,a){return n>=a},function(o,n,a,p){return p.compare(n,a)>=0});class Mi{constructor(n,a,p,y,C,S){this.type=zr,this.number=n,this.locale=a,this.currency=p,this.unit=y,this.minFractionDigits=C,this.maxFractionDigits=S}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const p=a.parse(n[1],1,gi);if(!p)return null;const y=n[2];if(typeof y!="object"||Array.isArray(y))return a.error("NumberFormat options argument must be an object.");let C=null;if(y.locale&&(C=a.parse(y.locale,1,zr),!C))return null;let S=null;if(y.currency&&(S=a.parse(y.currency,1,zr),!S))return null;let z=null;if(y.unit&&(z=a.parse(y.unit,1,zr),!z))return null;let Q=null;if(y["min-fraction-digits"]&&(Q=a.parse(y["min-fraction-digits"],1,gi),!Q))return null;let W=null;return y["max-fraction-digits"]&&(W=a.parse(y["max-fraction-digits"],1,gi),!W)?null:new Mi(p,C,S,z,Q,W)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Hl{constructor(n){this.type=gi,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const p=a.parse(n[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Ho(p.type)} instead.`):new Hl(p):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string"||Array.isArray(a))return a.length;throw new ua(`Expected value to be of type string or array, but found ${Ho(fs(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(a=>{n.push(a.serialize())}),n}}const Vl={"==":qs,"!=":as,">":wl,"<":_d,">=":Cl,"<=":ha,array:yl,at:Ga,boolean:yl,case:jt,coalesce:$u,collator:ks,format:vl,image:ch,in:cc,"index-of":vu,interpolate:Zs,"interpolate-hcl":Zs,"interpolate-lab":Zs,length:Hl,let:mh,literal:ao,match:xa,number:yl,"number-format":Mi,object:yl,slice:wn,step:Ah,string:yl,"to-boolean":Ss,"to-color":Ss,"to-number":Ss,"to-string":Ss,var:es,within:rs};function Gl(o,[n,a,p,y]){n=n.evaluate(o),a=a.evaluate(o),p=p.evaluate(o);const C=y?y.evaluate(o):1,S=lh(n,a,p,C);if(S)throw new ua(S);return new Ko(n/255*C,a/255*C,p/255*C,C)}function no(o,n){return o in n}function wi(o,n){const a=n[o];return a===void 0?null:a}function Xs(o){return{type:o}}Nl.register(Vl,{error:[{kind:"error"},[zr],(o,[n])=>{throw new ua(n.evaluate(o))}],typeof:[zr,[Lr],(o,[n])=>Ho(fs(n.evaluate(o)))],"to-rgba":[Es(gi,4),[Va],(o,[n])=>n.evaluate(o).toArray()],rgb:[Va,[gi,gi,gi],Gl],rgba:[Va,[gi,gi,gi,gi],Gl],has:{type:_r,overloads:[[[zr],(o,[n])=>no(n.evaluate(o),o.properties())],[[zr,Ea],(o,[n,a])=>no(n.evaluate(o),a.evaluate(o))]]},get:{type:Lr,overloads:[[[zr],(o,[n])=>wi(n.evaluate(o),o.properties())],[[zr,Ea],(o,[n,a])=>wi(n.evaluate(o),a.evaluate(o))]]},"feature-state":[Lr,[zr],(o,[n])=>wi(n.evaluate(o),o.featureState||{})],properties:[Ea,[],o=>o.properties()],"geometry-type":[zr,[],o=>o.geometryType()],id:[Lr,[],o=>o.id()],zoom:[gi,[],o=>o.globals.zoom],pitch:[gi,[],o=>o.globals.pitch||0],"distance-from-center":[gi,[],o=>o.distanceFromCenter()],"heatmap-density":[gi,[],o=>o.globals.heatmapDensity||0],"line-progress":[gi,[],o=>o.globals.lineProgress||0],"sky-radial-progress":[gi,[],o=>o.globals.skyRadialProgress||0],accumulated:[Lr,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[gi,Xs(gi),(o,n)=>{let a=0;for(const p of n)a+=p.evaluate(o);return a}],"*":[gi,Xs(gi),(o,n)=>{let a=1;for(const p of n)a*=p.evaluate(o);return a}],"-":{type:gi,overloads:[[[gi,gi],(o,[n,a])=>n.evaluate(o)-a.evaluate(o)],[[gi],(o,[n])=>-n.evaluate(o)]]},"/":[gi,[gi,gi],(o,[n,a])=>n.evaluate(o)/a.evaluate(o)],"%":[gi,[gi,gi],(o,[n,a])=>n.evaluate(o)%a.evaluate(o)],ln2:[gi,[],()=>Math.LN2],pi:[gi,[],()=>Math.PI],e:[gi,[],()=>Math.E],"^":[gi,[gi,gi],(o,[n,a])=>Math.pow(n.evaluate(o),a.evaluate(o))],sqrt:[gi,[gi],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[gi,[gi],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[gi,[gi],(o,[n])=>Math.log(n.evaluate(o))],log2:[gi,[gi],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[gi,[gi],(o,[n])=>Math.sin(n.evaluate(o))],cos:[gi,[gi],(o,[n])=>Math.cos(n.evaluate(o))],tan:[gi,[gi],(o,[n])=>Math.tan(n.evaluate(o))],asin:[gi,[gi],(o,[n])=>Math.asin(n.evaluate(o))],acos:[gi,[gi],(o,[n])=>Math.acos(n.evaluate(o))],atan:[gi,[gi],(o,[n])=>Math.atan(n.evaluate(o))],min:[gi,Xs(gi),(o,n)=>Math.min(...n.map(a=>a.evaluate(o)))],max:[gi,Xs(gi),(o,n)=>Math.max(...n.map(a=>a.evaluate(o)))],abs:[gi,[gi],(o,[n])=>Math.abs(n.evaluate(o))],round:[gi,[gi],(o,[n])=>{const a=n.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[gi,[gi],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[gi,[gi],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[_r,[zr,Lr],(o,[n,a])=>o.properties()[n.value]===a.value],"filter-id-==":[_r,[Lr],(o,[n])=>o.id()===n.value],"filter-type-==":[_r,[zr],(o,[n])=>o.geometryType()===n.value],"filter-<":[_r,[zr,Lr],(o,[n,a])=>{const p=o.properties()[n.value],y=a.value;return typeof p==typeof y&&p<y}],"filter-id-<":[_r,[Lr],(o,[n])=>{const a=o.id(),p=n.value;return typeof a==typeof p&&a<p}],"filter->":[_r,[zr,Lr],(o,[n,a])=>{const p=o.properties()[n.value],y=a.value;return typeof p==typeof y&&p>y}],"filter-id->":[_r,[Lr],(o,[n])=>{const a=o.id(),p=n.value;return typeof a==typeof p&&a>p}],"filter-<=":[_r,[zr,Lr],(o,[n,a])=>{const p=o.properties()[n.value],y=a.value;return typeof p==typeof y&&p<=y}],"filter-id-<=":[_r,[Lr],(o,[n])=>{const a=o.id(),p=n.value;return typeof a==typeof p&&a<=p}],"filter->=":[_r,[zr,Lr],(o,[n,a])=>{const p=o.properties()[n.value],y=a.value;return typeof p==typeof y&&p>=y}],"filter-id->=":[_r,[Lr],(o,[n])=>{const a=o.id(),p=n.value;return typeof a==typeof p&&a>=p}],"filter-has":[_r,[Lr],(o,[n])=>n.value in o.properties()],"filter-has-id":[_r,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[_r,[Es(zr)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[_r,[Es(Lr)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[_r,[zr,Es(Lr)],(o,[n,a])=>a.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[_r,[zr,Es(Lr)],(o,[n,a])=>function(p,y,C,S){for(;C<=S;){const z=C+S>>1;if(y[z]===p)return!0;y[z]>p?S=z-1:C=z+1}return!1}(o.properties()[n.value],a.value,0,a.value.length-1)],all:{type:_r,overloads:[[[_r,_r],(o,[n,a])=>n.evaluate(o)&&a.evaluate(o)],[Xs(_r),(o,n)=>{for(const a of n)if(!a.evaluate(o))return!1;return!0}]]},any:{type:_r,overloads:[[[_r,_r],(o,[n,a])=>n.evaluate(o)||a.evaluate(o)],[Xs(_r),(o,n)=>{for(const a of n)if(a.evaluate(o))return!0;return!1}]]},"!":[_r,[_r],(o,[n])=>!n.evaluate(o)],"is-supported-script":[_r,[zr],(o,[n])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(n.evaluate(o))}],upcase:[zr,[zr],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[zr,[zr],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[zr,Xs(Lr),(o,n)=>n.map(a=>jc(a.evaluate(o))).join("")],"resolved-locale":[zr,[Io],(o,[n])=>n.evaluate(o).resolvedLocale()]});var Zc=Vl;function Uh(o){return{result:"success",value:o}}function qc(o){return{result:"error",value:o}}function Ka(o){return o["property-type"]==="data-driven"}function Xc(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Wl(o){return!!o.expression&&o.expression.interpolated}function qr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function xu(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Sc(o){return o}function uc(o,n){const a=n.type==="color",p=o.stops&&typeof o.stops[0][0]=="object",y=p||!(p||o.property!==void 0),C=o.type||(Wl(n)?"exponential":"interval");if(a&&((o=Wr({},o)).stops&&(o.stops=o.stops.map(W=>[W[0],Ko.parse(W[1])])),o.default=Ko.parse(o.default?o.default:n.default)),o.colorSpace&&o.colorSpace!=="rgb"&&!Bc[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let S,z,Q;if(C==="exponential")S=Za;else if(C==="interval")S=Kl;else if(C==="categorical"){S=da,z=Object.create(null);for(const W of o.stops)z[W[0]]=W[1];Q=typeof o.stops[0][0]}else{if(C!=="identity")throw new Error(`Unknown function type "${C}"`);S=cl}if(p){const W={},J=[];for(let fe=0;fe<o.stops.length;fe++){const _e=o.stops[fe],Me=_e[0].zoom;W[Me]===void 0&&(W[Me]={zoom:Me,type:o.type,property:o.property,default:o.default,stops:[]},J.push(Me)),W[Me].stops.push([_e[0].value,_e[1]])}const ie=[];for(const fe of J)ie.push([W[fe].zoom,uc(W[fe],n)]);const se={name:"linear"};return{kind:"composite",interpolationType:se,interpolationFactor:Zs.interpolationFactor.bind(void 0,se),zoomStops:ie.map(fe=>fe[0]),evaluate:({zoom:fe},_e)=>Za({stops:ie,base:o.base},n,fe).evaluate(fe,_e)}}if(y){const W=C==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:W,interpolationFactor:Zs.interpolationFactor.bind(void 0,W),zoomStops:o.stops.map(J=>J[0]),evaluate:({zoom:J})=>S(o,n,J,z,Q)}}return{kind:"source",evaluate(W,J){const ie=J&&J.properties?J.properties[o.property]:void 0;return ie===void 0?Ic(o.default,n.default):S(o,n,ie,z,Q)}}}function Ic(o,n,a){return o!==void 0?o:n!==void 0?n:a!==void 0?a:void 0}function da(o,n,a,p,y){return Ic(typeof a===y?p[a]:void 0,o.default,n.default)}function Kl(o,n,a){if(qr(a)!=="number")return Ic(o.default,n.default);const p=o.stops.length;if(p===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[p-1][0])return o.stops[p-1][1];const y=Ra(o.stops.map(C=>C[0]),a);return o.stops[y][1]}function Za(o,n,a){const p=o.base!==void 0?o.base:1;if(qr(a)!=="number")return Ic(o.default,n.default);const y=o.stops.length;if(y===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[y-1][0])return o.stops[y-1][1];const C=Ra(o.stops.map(J=>J[0]),a),S=function(J,ie,se,fe){const _e=fe-se,Me=J-se;return _e===0?0:ie===1?Me/_e:(Math.pow(ie,Me)-1)/(Math.pow(ie,_e)-1)}(a,p,o.stops[C][0],o.stops[C+1][0]),z=o.stops[C][1],Q=o.stops[C+1][1];let W=jl[n.type]||Sc;if(o.colorSpace&&o.colorSpace!=="rgb"){const J=Bc[o.colorSpace];W=(ie,se)=>J.reverse(J.interpolate(J.forward(ie),J.forward(se),S))}return typeof z.evaluate=="function"?{evaluate(...J){const ie=z.evaluate.apply(void 0,J),se=Q.evaluate.apply(void 0,J);if(ie!==void 0&&se!==void 0)return W(ie,se,S)}}:W(z,Q,S)}function cl(o,n,a){return n.type==="color"?a=Ko.parse(a):n.type==="formatted"?a=ia.fromString(a.toString()):n.type==="resolvedImage"?a=Da.fromString(a.toString()):qr(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0),Ic(a,o.default,n.default)}class Mc{constructor(n,a){this.expression=n,this._warningHistory={},this._evaluator=new za,this._defaultValue=a?function(p){return p.type==="color"&&(xu(p.default)||Array.isArray(p.default))?new Ko(0,0,0,0):p.type==="color"?Ko.parse(p.default)||null:p.default===void 0?null:p.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,p,y,C,S,z,Q){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=p,this._evaluator.canonical=y||null,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=S,this._evaluator.featureTileCoord=z||null,this._evaluator.featureDistanceData=Q||null,this.expression.evaluate(this._evaluator)}evaluate(n,a,p,y,C,S,z,Q){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=p||null,this._evaluator.canonical=y||null,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=S||null,this._evaluator.featureTileCoord=z||null,this._evaluator.featureDistanceData=Q||null;try{const W=this.expression.evaluate(this._evaluator);if(W==null||typeof W=="number"&&W!=W)return this._defaultValue;if(this._enumValues&&!(W in this._enumValues))throw new ua(`Expected value to be one of ${Object.keys(this._enumValues).map(J=>JSON.stringify(J)).join(", ")}, but found ${JSON.stringify(W)} instead.`);return W}catch(W){return this._warningHistory[W.message]||(this._warningHistory[W.message]=!0,typeof console<"u"&&console.warn(W.message)),this._defaultValue}}}function hc(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Zc}function bu(o,n){const a=new bl(Zc,[],n?function(y){const C={color:Va,string:zr,number:gi,enum:zr,boolean:_r,formatted:Sa,resolvedImage:_a};return y.type==="array"?Es(C[y.value]||Lr,y.length):C[y.type]}(n):void 0),p=a.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Uh(new Mc(p,n)):qc(a.errors)}class ul{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!Or(a.expression)}evaluateWithoutErrorHandling(n,a,p,y,C,S){return this._styleExpression.evaluateWithoutErrorHandling(n,a,p,y,C,S)}evaluate(n,a,p,y,C,S){return this._styleExpression.evaluate(n,a,p,y,C,S)}}class Oo{constructor(n,a,p,y){this.kind=n,this.zoomStops=p,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!Or(a.expression),this.interpolationType=y}evaluateWithoutErrorHandling(n,a,p,y,C,S){return this._styleExpression.evaluateWithoutErrorHandling(n,a,p,y,C,S)}evaluate(n,a,p,y,C,S){return this._styleExpression.evaluate(n,a,p,y,C,S)}interpolationFactor(n,a,p){return this.interpolationType?Zs.interpolationFactor(this.interpolationType,n,a,p):0}}function Bl(o,n){if((o=bu(o,n)).result==="error")return o;const a=o.value.expression,p=sc(a);if(!p&&!Ka(n))return qc([new ca("","data expressions not supported")]);const y=bo(a,["zoom","pitch","distance-from-center"]);if(!y&&!Xc(n))return qc([new ca("","zoom expressions not supported")]);const C=_(a);return C||y?C instanceof ca?qc([C]):C instanceof Zs&&!Wl(n)?qc([new ca("",'"interpolate" expressions cannot be used with this property')]):Uh(C?new Oo(p?"camera":"composite",o.value,C.labels,C instanceof Zs?C.interpolation:void 0):new ul(p?"constant":"source",o.value)):qc([new ca("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Yc{constructor(n,a){this._parameters=n,this._specification=a,Wr(this,uc(this._parameters,this._specification))}static deserialize(n){return new Yc(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function _(o){let n=null;if(o instanceof mh)n=_(o.result);else if(o instanceof $u){for(const a of o.args)if(n=_(a),n)break}else(o instanceof Ah||o instanceof Zs)&&o.input instanceof Nl&&o.input.name==="zoom"&&(n=o);return n instanceof ca||o.eachChild(a=>{const p=_(a);p instanceof ca?n=p:!n&&p?n=new ca("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&p&&n!==p&&(n=new ca("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class E{constructor(n,a,p,y){this.message=(n?`${n}: `:"")+p,y&&(this.identifier=y),a!=null&&a.__line__&&(this.line=a.__line__)}}function G(o){const n=o.key,a=o.value,p=o.valueSpec||{},y=o.objectElementValidators||{},C=o.style,S=o.styleSpec;let z=[];const Q=qr(a);if(Q!=="object")return[new E(n,a,`object expected, ${Q} found`)];for(const W in a){const J=W.split(".")[0];let ie;y[J]?ie=y[J]:p[J]?ie=Ft:y["*"]?ie=y["*"]:p["*"]&&(ie=Ft),ie?z=z.concat(ie({key:(n&&`${n}.`)+W,value:a[W],valueSpec:p[J]||p["*"],style:C,styleSpec:S,object:a,objectKey:W},a)):z.push(new E(n,a[W],`unknown property "${W}"`))}for(const W in p)y[W]||p[W].required&&p[W].default===void 0&&a[W]===void 0&&z.push(new E(n,a,`missing required property "${W}"`));return z}function ne(o){const n=o.value,a=o.valueSpec,p=o.style,y=o.styleSpec,C=o.key,S=o.arrayElementValidator||Ft;if(qr(n)!=="array")return[new E(C,n,`array expected, ${qr(n)} found`)];if(a.length&&n.length!==a.length)return[new E(C,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new E(C,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let z={type:a.value,values:a.values,minimum:a.minimum,maximum:a.maximum,function:void 0};y.$version<7&&(z.function=a.function),qr(a.value)==="object"&&(z=a.value);let Q=[];for(let W=0;W<n.length;W++)Q=Q.concat(S({array:n,arrayIndex:W,value:n[W],valueSpec:z,style:p,styleSpec:y,key:`${C}[${W}]`}));return Q}function ge(o){const n=o.key,a=o.value,p=o.valueSpec;let y=qr(a);if(y==="number"&&a!=a&&(y="NaN"),y!=="number")return[new E(n,a,`number expected, ${y} found`)];if("minimum"in p){let C=p.minimum;if(qr(p.minimum)==="array"&&(C=p.minimum[o.arrayIndex]),a<C)return[new E(n,a,`${a} is less than the minimum value ${C}`)]}if("maximum"in p){let C=p.maximum;if(qr(p.maximum)==="array"&&(C=p.maximum[o.arrayIndex]),a>C)return[new E(n,a,`${a} is greater than the maximum value ${C}`)]}return[]}function Ne(o){const n=o.valueSpec,a=Dr(o.value.type);let p,y,C,S={};const z=a!=="categorical"&&o.value.property===void 0,Q=!z,W=qr(o.value.stops)==="array"&&qr(o.value.stops[0])==="array"&&qr(o.value.stops[0][0])==="object",J=G({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(fe){if(a==="identity")return[new E(fe.key,fe.value,'identity function may not have a "stops" property')];let _e=[];const Me=fe.value;return _e=_e.concat(ne({key:fe.key,value:Me,valueSpec:fe.valueSpec,style:fe.style,styleSpec:fe.styleSpec,arrayElementValidator:ie})),qr(Me)==="array"&&Me.length===0&&_e.push(new E(fe.key,Me,"array must have at least one stop")),_e},default:function(fe){return Ft({key:fe.key,value:fe.value,valueSpec:n,style:fe.style,styleSpec:fe.styleSpec})}}});return a==="identity"&&z&&J.push(new E(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||J.push(new E(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!Wl(o.valueSpec)&&J.push(new E(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(Q&&!Ka(o.valueSpec)?J.push(new E(o.key,o.value,"property functions not supported")):z&&!Xc(o.valueSpec)&&J.push(new E(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!W||o.value.property!==void 0||J.push(new E(o.key,o.value,'"property" property is required')),J;function ie(fe){let _e=[];const Me=fe.value,Ve=fe.key;if(qr(Me)!=="array")return[new E(Ve,Me,`array expected, ${qr(Me)} found`)];if(Me.length!==2)return[new E(Ve,Me,`array length 2 expected, length ${Me.length} found`)];if(W){if(qr(Me[0])!=="object")return[new E(Ve,Me,`object expected, ${qr(Me[0])} found`)];if(Me[0].zoom===void 0)return[new E(Ve,Me,"object stop key must have zoom")];if(Me[0].value===void 0)return[new E(Ve,Me,"object stop key must have value")];const ut=Dr(Me[0].zoom);if(typeof ut!="number")return[new E(Ve,Me[0].zoom,"stop zoom values must be numbers")];if(C&&C>ut)return[new E(Ve,Me[0].zoom,"stop zoom values must appear in ascending order")];ut!==C&&(C=ut,y=void 0,S={}),_e=_e.concat(G({key:`${Ve}[0]`,value:Me[0],valueSpec:{zoom:{}},style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{zoom:ge,value:se}}))}else _e=_e.concat(se({key:`${Ve}[0]`,value:Me[0],valueSpec:{},style:fe.style,styleSpec:fe.styleSpec},Me));return hc(Mr(Me[1]))?_e.concat([new E(`${Ve}[1]`,Me[1],"expressions are not allowed in function stops.")]):_e.concat(Ft({key:`${Ve}[1]`,value:Me[1],valueSpec:n,style:fe.style,styleSpec:fe.styleSpec}))}function se(fe,_e){const Me=qr(fe.value),Ve=Dr(fe.value),ut=fe.value!==null?fe.value:_e;if(p){if(Me!==p)return[new E(fe.key,ut,`${Me} stop domain type must match previous stop domain type ${p}`)]}else p=Me;if(Me!=="number"&&Me!=="string"&&Me!=="boolean"&&typeof Ve!="number"&&typeof Ve!="string"&&typeof Ve!="boolean")return[new E(fe.key,ut,"stop domain value must be a number, string, or boolean")];if(Me!=="number"&&a!=="categorical"){let Ct=`number expected, ${Me} found`;return Ka(n)&&a===void 0&&(Ct+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new E(fe.key,ut,Ct)]}return a!=="categorical"||Me!=="number"||typeof Ve=="number"&&isFinite(Ve)&&Math.floor(Ve)===Ve?a!=="categorical"&&Me==="number"&&typeof Ve=="number"&&typeof y=="number"&&y!==void 0&&Ve<y?[new E(fe.key,ut,"stop domain values must appear in ascending order")]:(y=Ve,a==="categorical"&&Ve in S?[new E(fe.key,ut,"stop domain values must be unique")]:(S[Ve]=!0,[])):[new E(fe.key,ut,`integer expected, found ${String(Ve)}`)]}}function at(o){const n=(o.expressionContext==="property"?Bl:bu)(Mr(o.value),o.valueSpec);if(n.result==="error")return n.value.map(p=>new E(`${o.key}${p.key}`,o.value,p.message));const a=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new E(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Or(a))return[new E(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter")return Dt(a,o);if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!bo(a,["zoom","feature-state"]))return[new E(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!sc(a))return[new E(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Dt(o,n){const a=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const y of n.valueSpec.expression.parameters)a.delete(y);if(a.size===0)return[];const p=[];return o instanceof Nl&&a.has(o.name)?[new E(n.key,n.value,`["${o.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(o.eachChild(y=>{p.push(...Dt(y,n))}),p)}function _n(o){const n=o.key,a=o.value,p=o.valueSpec,y=[];return Array.isArray(p.values)?p.values.indexOf(Dr(a))===-1&&y.push(new E(n,a,`expected one of [${p.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(p.values).indexOf(Dr(a))===-1&&y.push(new E(n,a,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(a)} found`)),y}function ni(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!ni(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function Ti(o,n="fill"){if(o==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ni(o)||(o=Uo(o));const a=o;let p=!0;try{p=function(W){if(!zo(W))return W;let J=Mr(W);return kr(J),J=Hi(J),J}(a)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(a,null,2)}
        `)}const y=hn[`filter_${n}`],C=bu(p,y);let S=null;if(C.result==="error")throw new Error(C.value.map(W=>`${W.key}: ${W.message}`).join(", "));S=(W,J,ie)=>C.value.evaluate(W,J,{},ie);let z=null,Q=null;if(p!==a){const W=bu(a,y);if(W.result==="error")throw new Error(W.value.map(J=>`${J.key}: ${J.message}`).join(", "));z=(J,ie,se,fe,_e)=>W.value.evaluate(J,ie,{},se,void 0,void 0,fe,_e),Q=!sc(W.value.expression)}return{filter:S,dynamicFilter:z||void 0,needGeometry:Lo(p),needFeature:!!Q}}function Hi(o){if(!Array.isArray(o))return o;const n=function(a){if(ws.has(a[0])){for(let p=1;p<a.length;p++)if(zo(a[p]))return!0}return a}(o);return n===!0?n:n.map(a=>Hi(a))}function kr(o){let n=!1;const a=[];if(o[0]==="case"){for(let p=1;p<o.length-1;p+=2)n=n||zo(o[p]),a.push(o[p+1]);a.push(o[o.length-1])}else if(o[0]==="match"){n=n||zo(o[1]);for(let p=2;p<o.length-1;p+=2)a.push(o[p+1]);a.push(o[o.length-1])}else if(o[0]==="step"){n=n||zo(o[1]);for(let p=1;p<o.length-1;p+=2)a.push(o[p+1])}n&&(o.length=0,o.push("any",...a));for(let p=1;p<o.length;p++)kr(o[p])}function zo(o){if(!Array.isArray(o))return!1;if((n=o[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let a=1;a<o.length;a++)if(zo(o[a]))return!0;return!1}const ws=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ps(o,n){return o<n?-1:o>n?1:0}function Lo(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(Lo(o[n]))return!0;return!1}function Uo(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?zh(o[1],o[2],"=="):n==="!="?u(zh(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?zh(o[1],o[2],n):n==="any"?(a=o.slice(1),["any"].concat(a.map(Uo))):n==="all"?["all"].concat(o.slice(1).map(Uo)):n==="none"?["all"].concat(o.slice(1).map(Uo).map(u)):n==="in"?Jc(o[1],o.slice(2)):n==="!in"?u(Jc(o[1],o.slice(2))):n==="has"?P(o[1]):n==="!has"?u(P(o[1])):n!=="within"||o;var a}function zh(o,n,a){switch(o){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,o,n]}}function Jc(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",o,["literal",n.sort(Ps)]]:["filter-in-small",o,["literal",n]]}}function P(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function u(o){return["!",o]}function x(o){return ni(Mr(o.value))?at(Wr({},o,{expressionContext:"filter",valueSpec:o.styleSpec[`filter_${o.layerType||"fill"}`]})):I(o)}function I(o){const n=o.value,a=o.key;if(qr(n)!=="array")return[new E(a,n,`array expected, ${qr(n)} found`)];const p=o.styleSpec;let y,C=[];if(n.length<1)return[new E(a,n,"filter array must have at least 1 element")];switch(C=C.concat(_n({key:`${a}[0]`,value:n[0],valueSpec:p.filter_operator,style:o.style,styleSpec:o.styleSpec})),Dr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Dr(n[1])==="$type"&&C.push(new E(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&C.push(new E(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(y=qr(n[1]),y!=="string"&&C.push(new E(`${a}[1]`,n[1],`string expected, ${y} found`)));for(let S=2;S<n.length;S++)y=qr(n[S]),Dr(n[1])==="$type"?C=C.concat(_n({key:`${a}[${S}]`,value:n[S],valueSpec:p.geometry_type,style:o.style,styleSpec:o.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&C.push(new E(`${a}[${S}]`,n[S],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let S=1;S<n.length;S++)C=C.concat(I({key:`${a}[${S}]`,value:n[S],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":y=qr(n[1]),n.length!==2?C.push(new E(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):y!=="string"&&C.push(new E(`${a}[1]`,n[1],`string expected, ${y} found`));break;case"within":y=qr(n[1]),n.length!==2?C.push(new E(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):y!=="object"&&C.push(new E(`${a}[1]`,n[1],`object expected, ${y} found`))}return C}function F(o,n){const a=o.key,p=o.style,y=o.styleSpec,C=o.value,S=o.objectKey,z=y[`${n}_${o.layerType}`];if(!z)return[];const Q=S.match(/^(.*)-transition$/);if(n==="paint"&&Q&&z[Q[1]]&&z[Q[1]].transition)return Ft({key:a,value:C,valueSpec:y.transition,style:p,styleSpec:y});const W=o.valueSpec||z[S];if(!W)return[new E(a,C,`unknown property "${S}"`)];let J;if(qr(C)==="string"&&Ka(W)&&!W.tokens&&(J=/^{([^}]+)}$/.exec(C))){const se=`\`{ "type": "identity", "property": ${J?JSON.stringify(J[1]):'"_"'} }\``;return[new E(a,C,`"${S}" does not support interpolation syntax
Use an identity property function instead: ${se}.`)]}const ie=[];return o.layerType==="symbol"&&(S==="text-field"&&p&&!p.glyphs&&ie.push(new E(a,C,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&xu(Mr(C))&&Dr(C.type)==="identity"&&ie.push(new E(a,C,'"text-font" does not support identity functions'))),ie.concat(Ft({key:o.key,value:C,valueSpec:W,style:p,styleSpec:y,expressionContext:"property",propertyType:n,propertyKey:S}))}function j(o){return F(o,"paint")}function N(o){return F(o,"layout")}function oe(o){let n=[];const a=o.value,p=o.key,y=o.style,C=o.styleSpec;a.type||a.ref||n.push(new E(p,a,'either "type" or "ref" is required'));let S=Dr(a.type);const z=Dr(a.ref);if(a.id){const Q=Dr(a.id);for(let W=0;W<o.arrayIndex;W++){const J=y.layers[W];Dr(J.id)===Q&&n.push(new E(p,a.id,`duplicate layer id "${a.id}", previously used at line ${J.id.__line__}`))}}if("ref"in a){let Q;["type","source","source-layer","filter","layout"].forEach(W=>{W in a&&n.push(new E(p,a[W],`"${W}" is prohibited for ref layers`))}),y.layers.forEach(W=>{Dr(W.id)===z&&(Q=W)}),Q?Q.ref?n.push(new E(p,a.ref,"ref cannot reference another ref layer")):S=Dr(Q.type):typeof z=="string"&&n.push(new E(p,a.ref,`ref layer "${z}" not found`))}else if(S!=="background"&&S!=="sky")if(a.source){const Q=y.sources&&y.sources[a.source],W=Q&&Dr(Q.type);Q?W==="vector"&&S==="raster"?n.push(new E(p,a.source,`layer "${a.id}" requires a raster source`)):W==="raster"&&S!=="raster"?n.push(new E(p,a.source,`layer "${a.id}" requires a vector source`)):W!=="vector"||a["source-layer"]?W==="raster-dem"&&S!=="hillshade"?n.push(new E(p,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!a.paint||!a.paint["line-gradient"]&&!a.paint["line-trim-offset"]||W==="geojson"&&Q.lineMetrics||n.push(new E(p,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new E(p,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new E(p,a.source,`source "${a.source}" not found`))}else n.push(new E(p,a,'missing required property "source"'));return n=n.concat(G({key:p,value:a,valueSpec:C.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ft({key:`${p}.type`,value:a.type,valueSpec:C.layer.type,style:o.style,styleSpec:o.styleSpec,object:a,objectKey:"type"}),filter:Q=>x(Wr({layerType:S},Q)),layout:Q=>G({layer:a,key:Q.key,value:Q.value,valueSpec:{},style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{"*":W=>N(Wr({layerType:S},W))}}),paint:Q=>G({layer:a,key:Q.key,value:Q.value,valueSpec:{},style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{"*":W=>j(Wr({layerType:S},W))}})}})),n}function ae(o){const n=o.value,a=o.key,p=qr(n);return p!=="string"?[new E(a,n,`string expected, ${p} found`)]:[]}const me={promoteId:function({key:o,value:n}){if(qr(n)==="string")return ae({key:o,value:n});{const a=[];for(const p in n)a.push(...ae({key:`${o}.${p}`,value:n[p]}));return a}}};function ye(o){const n=o.value,a=o.key,p=o.styleSpec,y=o.style;if(!n.type)return[new E(a,n,'"type" is required')];const C=Dr(n.type);let S;switch(C){case"vector":case"raster":case"raster-dem":return S=G({key:a,value:n,valueSpec:p[`source_${C.replace("-","_")}`],style:o.style,styleSpec:p,objectElementValidators:me}),S;case"geojson":if(S=G({key:a,value:n,valueSpec:p.source_geojson,style:y,styleSpec:p,objectElementValidators:me}),n.cluster)for(const z in n.clusterProperties){const[Q,W]=n.clusterProperties[z],J=typeof Q=="string"?[Q,["accumulated"],["get",z]]:Q;S.push(...at({key:`${a}.${z}.map`,value:W,expressionContext:"cluster-map"})),S.push(...at({key:`${a}.${z}.reduce`,value:J,expressionContext:"cluster-reduce"}))}return S;case"video":return G({key:a,value:n,valueSpec:p.source_video,style:y,styleSpec:p});case"image":return G({key:a,value:n,valueSpec:p.source_image,style:y,styleSpec:p});case"canvas":return[new E(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return _n({key:`${a}.type`,value:n.type,valueSpec:{values:Re(p)},style:y,styleSpec:p})}}function Re(o){return o.source.reduce((n,a)=>{const p=o[a];return p.type.type==="enum"&&(n=n.concat(Object.keys(p.type.values))),n},[])}function He(o){const n=o.value,a=o.styleSpec,p=a.light,y=o.style;let C=[];const S=qr(n);if(n===void 0)return C;if(S!=="object")return C=C.concat([new E("light",n,`object expected, ${S} found`)]),C;for(const z in n){const Q=z.match(/^(.*)-transition$/);C=C.concat(Q&&p[Q[1]]&&p[Q[1]].transition?Ft({key:z,value:n[z],valueSpec:a.transition,style:y,styleSpec:a}):p[z]?Ft({key:z,value:n[z],valueSpec:p[z],style:y,styleSpec:a}):[new E(z,n[z],`unknown property "${z}"`)])}return C}function gt(o){const n=o.value,a=o.key,p=o.style,y=o.styleSpec,C=y.terrain;let S=[];const z=qr(n);if(n===void 0)return S;if(z!=="object")return S=S.concat([new E("terrain",n,`object expected, ${z} found`)]),S;for(const Q in n){const W=Q.match(/^(.*)-transition$/);S=S.concat(W&&C[W[1]]&&C[W[1]].transition?Ft({key:Q,value:n[Q],valueSpec:y.transition,style:p,styleSpec:y}):C[Q]?Ft({key:Q,value:n[Q],valueSpec:C[Q],style:p,styleSpec:y}):[new E(Q,n[Q],`unknown property "${Q}"`)])}if(n.source){const Q=p.sources&&p.sources[n.source],W=Q&&Dr(Q.type);Q?W!=="raster-dem"&&S.push(new E(a,n.source,`terrain cannot be used with a source of type ${String(W)}, it only be used with a "raster-dem" source type`)):S.push(new E(a,n.source,`source "${n.source}" not found`))}else S.push(new E(a,n,'terrain is missing required property "source"'));return S}function dt(o){const n=o.value,a=o.style,p=o.styleSpec,y=p.fog;let C=[];const S=qr(n);if(n===void 0)return C;if(S!=="object")return C=C.concat([new E("fog",n,`object expected, ${S} found`)]),C;for(const z in n){const Q=z.match(/^(.*)-transition$/);C=C.concat(Q&&y[Q[1]]&&y[Q[1]].transition?Ft({key:z,value:n[z],valueSpec:p.transition,style:a,styleSpec:p}):y[z]?Ft({key:z,value:n[z],valueSpec:y[z],style:a,styleSpec:p}):[new E(z,n[z],`unknown property "${z}"`)])}return C}const pt={"*":()=>[],array:ne,boolean:function(o){const n=o.value,a=o.key,p=qr(n);return p!=="boolean"?[new E(a,n,`boolean expected, ${p} found`)]:[]},number:ge,color:function(o){const n=o.key,a=o.value,p=qr(a);return p!=="string"?[new E(n,a,`color expected, ${p} found`)]:Jo(a)===null?[new E(n,a,`color expected, "${a}" found`)]:[]},enum:_n,filter:x,function:Ne,layer:oe,object:G,source:ye,light:He,terrain:gt,fog:dt,string:ae,formatted:function(o){return ae(o).length===0?[]:at(o)},resolvedImage:function(o){return ae(o).length===0?[]:at(o)},projection:function(o){const n=o.value,a=o.styleSpec,p=a.projection,y=o.style;let C=[];const S=qr(n);if(S==="object")for(const z in n)C=C.concat(Ft({key:z,value:n[z],valueSpec:p[z],style:y,styleSpec:a}));else S!=="string"&&(C=C.concat([new E("projection",n,`object or string expected, ${S} found`)]));return C}};function Ft(o){const n=o.value,a=o.valueSpec,p=o.styleSpec;return a.expression&&xu(Dr(n))?Ne(o):a.expression&&hc(Mr(n))?at(o):a.type&&pt[a.type]?pt[a.type](o):G(Wr({},o,{valueSpec:a.type?p[a.type]:a}))}function Wt(o){const n=o.value,a=o.key,p=ae(o);return p.length||(n.indexOf("{fontstack}")===-1&&p.push(new E(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&p.push(new E(a,n,'"glyphs" url must include a "{range}" token'))),p}function on(o,n=hn){return tn(Ft({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,objectElementValidators:{glyphs:Wt,"*":()=>[]}}))}const bt=o=>tn(j(o)),un=o=>tn(N(o));function tn(o){return o.slice().sort((n,a)=>n.line&&a.line?n.line-a.line:0)}function In(o,n){let a=!1;if(n&&n.length)for(const p of n)o.fire(new hs(new Error(p.message))),a=!0;return a}var kn=xn,Kn=3;function xn(o,n,a){var p=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var y=new Int32Array(this.arrayBuffer);o=y[0],this.d=(n=y[1])+2*(a=y[2]);for(var C=0;C<this.d*this.d;C++){var S=y[Kn+C],z=y[Kn+C+1];p.push(S===z?null:y.subarray(S,z))}var Q=y[Kn+p.length+1];this.keys=y.subarray(y[Kn+p.length],Q),this.bboxes=y.subarray(Q),this.insert=this._insertReadonly}else{this.d=n+2*a;for(var W=0;W<this.d*this.d;W++)p.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=o,this.padding=a,this.scale=n/o,this.uid=0;var J=a/n*o;this.min=-J,this.max=o+J}xn.prototype.insert=function(o,n,a,p,y){this._forEachCell(n,a,p,y,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(n),this.bboxes.push(a),this.bboxes.push(p),this.bboxes.push(y)},xn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},xn.prototype._insertCell=function(o,n,a,p,y,C){this.cells[y].push(C)},xn.prototype.query=function(o,n,a,p,y){var C=this.min,S=this.max;if(o<=C&&n<=C&&S<=a&&S<=p&&!y)return Array.prototype.slice.call(this.keys);var z=[];return this._forEachCell(o,n,a,p,this._queryCell,z,{},y),z},xn.prototype._queryCell=function(o,n,a,p,y,C,S,z){var Q=this.cells[y];if(Q!==null)for(var W=this.keys,J=this.bboxes,ie=0;ie<Q.length;ie++){var se=Q[ie];if(S[se]===void 0){var fe=4*se;(z?z(J[fe+0],J[fe+1],J[fe+2],J[fe+3]):o<=J[fe+2]&&n<=J[fe+3]&&a>=J[fe+0]&&p>=J[fe+1])?(S[se]=!0,C.push(W[se])):S[se]=!1}}},xn.prototype._forEachCell=function(o,n,a,p,y,C,S,z){for(var Q=this._convertToCellCoord(o),W=this._convertToCellCoord(n),J=this._convertToCellCoord(a),ie=this._convertToCellCoord(p),se=Q;se<=J;se++)for(var fe=W;fe<=ie;fe++){var _e=this.d*fe+se;if((!z||z(this._convertFromCellCoord(se),this._convertFromCellCoord(fe),this._convertFromCellCoord(se+1),this._convertFromCellCoord(fe+1)))&&y.call(this,o,n,a,p,_e,C,S,z))return}},xn.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},xn.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},xn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,n=Kn+this.cells.length+1+1,a=0,p=0;p<this.cells.length;p++)a+=this.cells[p].length;var y=new Int32Array(n+a+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;for(var C=n,S=0;S<o.length;S++){var z=o[S];y[Kn+S]=C,y.set(z,C),C+=z.length}return y[Kn+o.length]=C,y.set(this.keys,C),y[Kn+o.length+1]=C+=this.keys.length,y.set(this.bboxes,C),C+=this.bboxes.length,y.buffer};var pi=Ee(kn);const vi={};function yn(o,n,a={}){Object.defineProperty(o,"_classRegistryKey",{value:n,writeable:!1}),vi[n]={klass:o,omit:a.omit||[]}}yn(Object,"Object"),pi.serialize=function(o,n){const a=o.toArrayBuffer();return n&&n.push(a),{buffer:a}},pi.deserialize=function(o){return new pi(o.buffer)},Object.defineProperty(pi,"name",{value:"Grid"}),yn(pi,"Grid"),yn(Ko,"Color"),yn(Error,"Error"),yn(Un,"AJAXError"),yn(Da,"ResolvedImage"),yn(Yc,"StylePropertyFunction"),yn(Mc,"StyleExpression",{omit:["_evaluator"]}),yn(Oo,"ZoomDependentExpression"),yn(ul,"ZoomConstantExpression"),yn(Nl,"CompoundExpression",{omit:["_evaluate"]});for(const o in Zc)vi[Zc[o]._classRegistryKey]||yn(Zc[o],`Expression${o}`);function Nr(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function io(o){return U.ImageBitmap&&o instanceof U.ImageBitmap}function or(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp)return o;if(Nr(o)||io(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return n&&n.push(a.buffer),a}if(o instanceof U.ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const p of o)a.push(or(p,n));return a}if(typeof o=="object"){const a=o.constructor,p=a._classRegistryKey;if(!p)throw new Error(`can't serialize object of unregistered class ${p}`);const y=a.serialize?a.serialize(o,n):{};if(!a.serialize){for(const C in o)o.hasOwnProperty(C)&&(vi[p].omit.indexOf(C)>=0||(y[C]=or(o[C],n)));o instanceof Error&&(y.message=o.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(y.$name=p),y}throw new Error("can't serialize object of type "+typeof o)}function mo(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||Nr(o)||io(o)||ArrayBuffer.isView(o)||o instanceof U.ImageData)return o;if(Array.isArray(o))return o.map(mo);if(typeof o=="object"){const n=o.$name||"Object",{klass:a}=vi[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(o);const p=Object.create(a.prototype);for(const y of Object.keys(o))y!=="$name"&&(p[y]=mo(o[y]));return p}throw new Error("can't deserialize object of type "+typeof o)}const qn={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Po(o){for(const n of o)if(ba(n.charCodeAt(0)))return!0;return!1}function Xr(o){for(const n of o)if(!os(n.charCodeAt(0)))return!1;return!0}function os(o){return!(qn.Arabic(o)||qn["Arabic Supplement"](o)||qn["Arabic Extended-A"](o)||qn["Arabic Presentation Forms-A"](o)||qn["Arabic Presentation Forms-B"](o))}function ba(o){return!(o!==746&&o!==747&&(o<4352||!(qn["Bopomofo Extended"](o)||qn.Bopomofo(o)||qn["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||qn["CJK Compatibility Ideographs"](o)||qn["CJK Compatibility"](o)||qn["CJK Radicals Supplement"](o)||qn["CJK Strokes"](o)||!(!qn["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||qn["CJK Unified Ideographs Extension A"](o)||qn["CJK Unified Ideographs"](o)||qn["Enclosed CJK Letters and Months"](o)||qn["Hangul Compatibility Jamo"](o)||qn["Hangul Jamo Extended-A"](o)||qn["Hangul Jamo Extended-B"](o)||qn["Hangul Jamo"](o)||qn["Hangul Syllables"](o)||qn.Hiragana(o)||qn["Ideographic Description Characters"](o)||qn.Kanbun(o)||qn["Kangxi Radicals"](o)||qn["Katakana Phonetic Extensions"](o)||qn.Katakana(o)&&o!==12540||!(!qn["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!qn["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||qn["Unified Canadian Aboriginal Syllabics"](o)||qn["Unified Canadian Aboriginal Syllabics Extended"](o)||qn["Vertical Forms"](o)||qn["Yijing Hexagram Symbols"](o)||qn["Yi Syllables"](o)||qn["Yi Radicals"](o))))}function eu(o){return!(ba(o)||function(n){return!!(qn["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||qn["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||qn["Letterlike Symbols"](n)||qn["Number Forms"](n)||qn["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||qn["Control Pictures"](n)&&n!==9251||qn["Optical Character Recognition"](n)||qn["Enclosed Alphanumerics"](n)||qn["Geometric Shapes"](n)||qn["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||qn["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||qn["CJK Symbols and Punctuation"](n)||qn.Katakana(n)||qn["Private Use Area"](n)||qn["CJK Compatibility Forms"](n)||qn["Small Form Variants"](n)||qn["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function Lc(o){return o>=1424&&o<=2303||qn["Arabic Presentation Forms-A"](o)||qn["Arabic Presentation Forms-B"](o)}function wu(o,n){return!(!n&&Lc(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||qn.Khmer(o))}function ju(o){for(const n of o)if(Lc(n.charCodeAt(0)))return!0;return!1}const Tl="deferred",hl="loading",tu="loaded";let nu=null,b="unavailable",l=null;const g=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(b="error"),nu&&nu(o)};function T(){k.fire(new xo("pluginStateChange",{pluginStatus:b,pluginURL:l}))}const k=new Yo,R=function(){return b},K=function(){if(b!==Tl||!l)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");b=hl,T(),l&&bi({url:l},o=>{o?g(o):(b=tu,T())})},X={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>b===tu||X.applyArabicShaping!=null,isLoading:()=>b===hl,setState(o){b=o.pluginStatus,l=o.pluginURL},isParsed:()=>X.applyArabicShaping!=null&&X.processBidirectionalText!=null&&X.processStyledBidirectionalText!=null,getPluginURL:()=>l};class ee{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.transition=a.transition,this.pitch=a.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(n){return function(a,p){for(const y of a)if(!wu(y.charCodeAt(0),p))return!1;return!0}(n,X.isLoaded())}}class ce{constructor(n,a){this.property=n,this.value=a,this.expression=function(p,y){if(xu(p))return new Yc(p,y);if(hc(p)){const C=Bl(p,y);if(C.result==="error")throw new Error(C.value.map(S=>`${S.key}: ${S.message}`).join(", "));return C.value}{let C=p;return typeof p=="string"&&y.type==="color"&&(C=Ko.parse(p)),{kind:"constant",evaluate:()=>C}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,p){return this.property.possiblyEvaluate(this,n,a,p)}}class le{constructor(n){this.property=n,this.value=new ce(n,void 0)}transitioned(n,a){return new Qe(this.property,this.value,a,Bn({},n.transition,this.transition),n.now)}untransitioned(){return new Qe(this.property,this.value,null,{},0)}}class ve{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Ki(this._values[n].value.value)}setValue(n,a){this._values.hasOwnProperty(n)||(this._values[n]=new le(this._values[n].property)),this._values[n].value=new ce(this._values[n].property,a===null?void 0:Ki(a))}getTransition(n){return Ki(this._values[n].transition)}setTransition(n,a){this._values.hasOwnProperty(n)||(this._values[n]=new le(this._values[n].property)),this._values[n].transition=Ki(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const p=this.getValue(a);p!==void 0&&(n[a]=p);const y=this.getTransition(a);y!==void 0&&(n[`${a}-transition`]=y)}return n}transitioned(n,a){const p=new We(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].transitioned(n,a._values[y]);return p}untransitioned(){const n=new We(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class Qe{constructor(n,a,p,y,C){const S=y.delay||0,z=y.duration||0;C=C||0,this.property=n,this.value=a,this.begin=C+S,this.end=this.begin+z,n.specification.transition&&(y.delay||y.duration)&&(this.prior=p)}possiblyEvaluate(n,a,p){const y=n.now||0,C=this.value.possiblyEvaluate(n,a,p),S=this.prior;if(S){if(y>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(y<this.begin)return S.possiblyEvaluate(n,a,p);{const z=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(S.possiblyEvaluate(n,a,p),C,Gt(z))}}return C}}class We{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,p){const y=new rt(this._properties);for(const C of Object.keys(this._values))y._values[C]=this._values[C].possiblyEvaluate(n,a,p);return y}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class et{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return Ki(this._values[n].value)}setValue(n,a){this._values[n]=new ce(this._values[n].property,a===null?void 0:Ki(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const p=this.getValue(a);p!==void 0&&(n[a]=p)}return n}possiblyEvaluate(n,a,p){const y=new rt(this._properties);for(const C of Object.keys(this._values))y._values[C]=this._values[C].possiblyEvaluate(n,a,p);return y}}class tt{constructor(n,a,p){this.property=n,this.value=a,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,p,y){return this.property.evaluate(this.value,this.parameters,n,a,p,y)}}class rt{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Be{constructor(n){this.specification=n}possiblyEvaluate(n,a){return n.expression.evaluate(a)}interpolate(n,a,p){const y=jl[this.specification.type];return y?y(n,a,p):n}}class Ye{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,p,y){return new tt(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},p,y)}:n.expression,a)}interpolate(n,a,p){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new tt(this,{kind:"constant",value:void 0},n.parameters);const y=jl[this.specification.type];return y?new tt(this,{kind:"constant",value:y(n.value.value,a.value.value,p)},n.parameters):n}evaluate(n,a,p,y,C,S){return n.kind==="constant"?n.value:n.evaluate(a,p,y,C,S)}}class lt{constructor(n){this.specification=n}possiblyEvaluate(n,a,p,y){return!!n.expression.evaluate(a,null,{},p,y)}interpolate(){return!1}}class At{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const a=new ee(0,{});for(const p in n){const y=n[p];y.specification.overridable&&this.overridableProperties.push(p);const C=this.defaultPropertyValues[p]=new ce(y,void 0),S=this.defaultTransitionablePropertyValues[p]=new le(y);this.defaultTransitioningPropertyValues[p]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=C.possiblyEvaluate(a)}}}function It(o,n){return 256*(o=Cn(Math.floor(o),0,255))+Cn(Math.floor(n),0,255)}yn(Ye,"DataDrivenProperty"),yn(Be,"DataConstantProperty"),yn(lt,"ColorRampProperty");const Tt={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Mt{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ht{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Nt(o,n=1){let a=0,p=0;return{members:o.map(y=>{const C=Tt[y.type].BYTES_PER_ELEMENT,S=a=cn(a,Math.max(n,C)),z=y.components||1;return p=Math.max(p,C),a+=C*z,{name:y.name,type:y.type,components:z,offset:S}}),size:cn(a,Math.max(p,n)),alignment:n}}function cn(o,n){return Math.ceil(o/n)*n}class Nn extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const p=this.length;return this.resize(p+1),this.emplace(p,n,a)}emplace(n,a,p){const y=2*n;return this.int16[y+0]=a,this.int16[y+1]=p,n}}Nn.prototype.bytesPerElement=4,yn(Nn,"StructArrayLayout2i4");class Vt extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,p){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,p)}emplace(n,a,p,y){const C=3*n;return this.int16[C+0]=a,this.int16[C+1]=p,this.int16[C+2]=y,n}}Vt.prototype.bytesPerElement=6,yn(Vt,"StructArrayLayout3i6");class Pn extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,p,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,a,p,y)}emplace(n,a,p,y,C){const S=4*n;return this.int16[S+0]=a,this.int16[S+1]=p,this.int16[S+2]=y,this.int16[S+3]=C,n}}Pn.prototype.bytesPerElement=8,yn(Pn,"StructArrayLayout4i8");class fn extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,p,y,C,S,z){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,a,p,y,C,S,z)}emplace(n,a,p,y,C,S,z,Q){const W=6*n,J=12*n,ie=3*n;return this.int16[W+0]=a,this.int16[W+1]=p,this.uint8[J+4]=y,this.uint8[J+5]=C,this.uint8[J+6]=S,this.uint8[J+7]=z,this.float32[ie+2]=Q,n}}fn.prototype.bytesPerElement=12,yn(fn,"StructArrayLayout2i4ub1f12");class Zn extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,p,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,a,p,y)}emplace(n,a,p,y,C){const S=4*n;return this.float32[S+0]=a,this.float32[S+1]=p,this.float32[S+2]=y,this.float32[S+3]=C,n}}Zn.prototype.bytesPerElement=16,yn(Zn,"StructArrayLayout4f16");class nn extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,p,y,C){const S=this.length;return this.resize(S+1),this.emplace(S,n,a,p,y,C)}emplace(n,a,p,y,C,S){const z=6*n,Q=3*n;return this.uint16[z+0]=a,this.uint16[z+1]=p,this.uint16[z+2]=y,this.uint16[z+3]=C,this.float32[Q+2]=S,n}}nn.prototype.bytesPerElement=12,yn(nn,"StructArrayLayout4ui1f12");class Mn extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,p,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,a,p,y)}emplace(n,a,p,y,C){const S=4*n;return this.uint16[S+0]=a,this.uint16[S+1]=p,this.uint16[S+2]=y,this.uint16[S+3]=C,n}}Mn.prototype.bytesPerElement=8,yn(Mn,"StructArrayLayout4ui8");class Yn extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,p,y,C,S){const z=this.length;return this.resize(z+1),this.emplace(z,n,a,p,y,C,S)}emplace(n,a,p,y,C,S,z){const Q=6*n;return this.int16[Q+0]=a,this.int16[Q+1]=p,this.int16[Q+2]=y,this.int16[Q+3]=C,this.int16[Q+4]=S,this.int16[Q+5]=z,n}}Yn.prototype.bytesPerElement=12,yn(Yn,"StructArrayLayout6i12");class Vn extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,p,y,C,S,z,Q,W,J,ie,se){const fe=this.length;return this.resize(fe+1),this.emplace(fe,n,a,p,y,C,S,z,Q,W,J,ie,se)}emplace(n,a,p,y,C,S,z,Q,W,J,ie,se,fe){const _e=12*n;return this.int16[_e+0]=a,this.int16[_e+1]=p,this.int16[_e+2]=y,this.int16[_e+3]=C,this.uint16[_e+4]=S,this.uint16[_e+5]=z,this.uint16[_e+6]=Q,this.uint16[_e+7]=W,this.int16[_e+8]=J,this.int16[_e+9]=ie,this.int16[_e+10]=se,this.int16[_e+11]=fe,n}}Vn.prototype.bytesPerElement=24,yn(Vn,"StructArrayLayout4i4ui4i24");class si extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,p,y,C,S){const z=this.length;return this.resize(z+1),this.emplace(z,n,a,p,y,C,S)}emplace(n,a,p,y,C,S,z){const Q=10*n,W=5*n;return this.int16[Q+0]=a,this.int16[Q+1]=p,this.int16[Q+2]=y,this.float32[W+2]=C,this.float32[W+3]=S,this.float32[W+4]=z,n}}si.prototype.bytesPerElement=20,yn(si,"StructArrayLayout3i3f20");class ar extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}ar.prototype.bytesPerElement=4,yn(ar,"StructArrayLayout1ul4");class Tr extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,p,y,C,S,z,Q,W,J,ie,se,fe){const _e=this.length;return this.resize(_e+1),this.emplace(_e,n,a,p,y,C,S,z,Q,W,J,ie,se,fe)}emplace(n,a,p,y,C,S,z,Q,W,J,ie,se,fe,_e){const Me=20*n,Ve=10*n;return this.int16[Me+0]=a,this.int16[Me+1]=p,this.int16[Me+2]=y,this.int16[Me+3]=C,this.int16[Me+4]=S,this.float32[Ve+3]=z,this.float32[Ve+4]=Q,this.float32[Ve+5]=W,this.float32[Ve+6]=J,this.int16[Me+14]=ie,this.uint32[Ve+8]=se,this.uint16[Me+18]=fe,this.uint16[Me+19]=_e,n}}Tr.prototype.bytesPerElement=40,yn(Tr,"StructArrayLayout5i4f1i1ul2ui40");class Di extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,p,y,C,S,z){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,a,p,y,C,S,z)}emplace(n,a,p,y,C,S,z,Q){const W=8*n;return this.int16[W+0]=a,this.int16[W+1]=p,this.int16[W+2]=y,this.int16[W+4]=C,this.int16[W+5]=S,this.int16[W+6]=z,this.int16[W+7]=Q,n}}Di.prototype.bytesPerElement=16,yn(Di,"StructArrayLayout3i2i2i16");class yr extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,p,y,C){const S=this.length;return this.resize(S+1),this.emplace(S,n,a,p,y,C)}emplace(n,a,p,y,C,S){const z=4*n,Q=8*n;return this.float32[z+0]=a,this.float32[z+1]=p,this.float32[z+2]=y,this.int16[Q+6]=C,this.int16[Q+7]=S,n}}yr.prototype.bytesPerElement=16,yn(yr,"StructArrayLayout2f1f2i16");class ro extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,p,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,a,p,y)}emplace(n,a,p,y,C){const S=12*n,z=3*n;return this.uint8[S+0]=a,this.uint8[S+1]=p,this.float32[z+1]=y,this.float32[z+2]=C,n}}ro.prototype.bytesPerElement=12,yn(ro,"StructArrayLayout2ub2f12");class co extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,p){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,p)}emplace(n,a,p,y){const C=3*n;return this.float32[C+0]=a,this.float32[C+1]=p,this.float32[C+2]=y,n}}co.prototype.bytesPerElement=12,yn(co,"StructArrayLayout3f12");class Yi extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,p){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,p)}emplace(n,a,p,y){const C=3*n;return this.uint16[C+0]=a,this.uint16[C+1]=p,this.uint16[C+2]=y,n}}Yi.prototype.bytesPerElement=6,yn(Yi,"StructArrayLayout3ui6");class Ro extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,a,p,y,C,S,z,Q,W,J,ie,se,fe,_e,Me,Ve,ut,Ct,ht,vt,Pt){const Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,n,a,p,y,C,S,z,Q,W,J,ie,se,fe,_e,Me,Ve,ut,Ct,ht,vt,Pt)}emplace(n,a,p,y,C,S,z,Q,W,J,ie,se,fe,_e,Me,Ve,ut,Ct,ht,vt,Pt,Lt){const An=30*n,ln=15*n,Ln=60*n;return this.int16[An+0]=a,this.int16[An+1]=p,this.int16[An+2]=y,this.float32[ln+2]=C,this.float32[ln+3]=S,this.uint16[An+8]=z,this.uint16[An+9]=Q,this.uint32[ln+5]=W,this.uint32[ln+6]=J,this.uint32[ln+7]=ie,this.uint16[An+16]=se,this.uint16[An+17]=fe,this.uint16[An+18]=_e,this.float32[ln+10]=Me,this.float32[ln+11]=Ve,this.uint8[Ln+48]=ut,this.uint8[Ln+49]=Ct,this.uint8[Ln+50]=ht,this.uint32[ln+13]=vt,this.int16[An+28]=Pt,this.uint8[Ln+58]=Lt,n}}Ro.prototype.bytesPerElement=60,yn(Ro,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class gs extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,a,p,y,C,S,z,Q,W,J,ie,se,fe,_e,Me,Ve,ut,Ct,ht,vt,Pt,Lt,An,ln,Ln,ai,vn,$n,jn,ti){const ui=this.length;return this.resize(ui+1),this.emplace(ui,n,a,p,y,C,S,z,Q,W,J,ie,se,fe,_e,Me,Ve,ut,Ct,ht,vt,Pt,Lt,An,ln,Ln,ai,vn,$n,jn,ti)}emplace(n,a,p,y,C,S,z,Q,W,J,ie,se,fe,_e,Me,Ve,ut,Ct,ht,vt,Pt,Lt,An,ln,Ln,ai,vn,$n,jn,ti,ui){const En=38*n,Si=19*n;return this.int16[En+0]=a,this.int16[En+1]=p,this.int16[En+2]=y,this.float32[Si+2]=C,this.float32[Si+3]=S,this.int16[En+8]=z,this.int16[En+9]=Q,this.int16[En+10]=W,this.int16[En+11]=J,this.int16[En+12]=ie,this.int16[En+13]=se,this.uint16[En+14]=fe,this.uint16[En+15]=_e,this.uint16[En+16]=Me,this.uint16[En+17]=Ve,this.uint16[En+18]=ut,this.uint16[En+19]=Ct,this.uint16[En+20]=ht,this.uint16[En+21]=vt,this.uint16[En+22]=Pt,this.uint16[En+23]=Lt,this.uint16[En+24]=An,this.uint16[En+25]=ln,this.uint16[En+26]=Ln,this.uint16[En+27]=ai,this.uint16[En+28]=vn,this.uint32[Si+15]=$n,this.float32[Si+16]=jn,this.float32[Si+17]=ti,this.float32[Si+18]=ui,n}}gs.prototype.bytesPerElement=76,yn(gs,"StructArrayLayout3i2f6i15ui1ul3f76");class qo extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}qo.prototype.bytesPerElement=4,yn(qo,"StructArrayLayout1f4");class Xo extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,p,y,C){const S=this.length;return this.resize(S+1),this.emplace(S,n,a,p,y,C)}emplace(n,a,p,y,C,S){const z=5*n;return this.float32[z+0]=a,this.float32[z+1]=p,this.float32[z+2]=y,this.float32[z+3]=C,this.float32[z+4]=S,n}}Xo.prototype.bytesPerElement=20,yn(Xo,"StructArrayLayout5f20");class qa extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,p,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,a,p,y)}emplace(n,a,p,y,C){const S=6*n;return this.uint32[3*n+0]=a,this.uint16[S+2]=p,this.uint16[S+3]=y,this.uint16[S+4]=C,n}}qa.prototype.bytesPerElement=12,yn(qa,"StructArrayLayout1ul3ui12");class Oa extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const p=this.length;return this.resize(p+1),this.emplace(p,n,a)}emplace(n,a,p){const y=2*n;return this.uint16[y+0]=a,this.uint16[y+1]=p,n}}Oa.prototype.bytesPerElement=4,yn(Oa,"StructArrayLayout2ui4");class iu extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}iu.prototype.bytesPerElement=2,yn(iu,"StructArrayLayout1ui2");class Os extends Ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const p=this.length;return this.resize(p+1),this.emplace(p,n,a)}emplace(n,a,p){const y=2*n;return this.float32[y+0]=a,this.float32[y+1]=p,n}}Os.prototype.bytesPerElement=8,yn(Os,"StructArrayLayout2f8");class ko extends Mt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ko.prototype.size=40;class ts extends Tr{get(n){return new ko(this,n)}}yn(ts,"CollisionBoxArray");class No extends Mt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}No.prototype.size=60;class Aa extends Ro{get(n){return new No(this,n)}}yn(Aa,"PlacedSymbolArray");class Na extends Mt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Na.prototype.size=76;class Fs extends gs{get(n){return new Na(this,n)}}yn(Fs,"SymbolInstanceArray");class Zl extends qo{getoffsetX(n){return this.float32[1*n+0]}}yn(Zl,"GlyphOffsetArray");class EA extends Nn{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}yn(EA,"SymbolLineVertexArray");class Cu extends Mt{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Cu.prototype.size=12;class yd extends qa{get(n){return new Cu(this,n)}}yn(yd,"FeatureIndexArray");class Bu extends Oa{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}yn(Bu,"FillExtrusionCentroidArray");const Rh=Nt([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Oh=Nt([{name:"a_dash",components:4,type:"Uint16"}]);var wo={exports:{}},Xd={exports:{}};Xd.exports=function(o,n){var a,p,y,C,S,z,Q,W;for(p=o.length-(a=3&o.length),y=n,S=3432918353,z=461845907,W=0;W<p;)Q=255&o.charCodeAt(W)|(255&o.charCodeAt(++W))<<8|(255&o.charCodeAt(++W))<<16|(255&o.charCodeAt(++W))<<24,++W,y=27492+(65535&(C=5*(65535&(y=(y^=Q=(65535&(Q=(Q=(65535&Q)*S+(((Q>>>16)*S&65535)<<16)&4294967295)<<15|Q>>>17))*z+(((Q>>>16)*z&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(Q=0,a){case 3:Q^=(255&o.charCodeAt(W+2))<<16;case 2:Q^=(255&o.charCodeAt(W+1))<<8;case 1:y^=Q=(65535&(Q=(Q=(65535&(Q^=255&o.charCodeAt(W)))*S+(((Q>>>16)*S&65535)<<16)&4294967295)<<15|Q>>>17))*z+(((Q>>>16)*z&65535)<<16)&4294967295}return y^=o.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var SA=Xd.exports,Jh={exports:{}};Jh.exports=function(o,n){for(var a,p=o.length,y=n^p,C=0;p>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(C)|(255&o.charCodeAt(++C))<<8|(255&o.charCodeAt(++C))<<16|(255&o.charCodeAt(++C))<<24))+((1540483477*(a>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),p-=4,++C;switch(p){case 3:y^=(255&o.charCodeAt(C+2))<<16;case 2:y^=(255&o.charCodeAt(C+1))<<8;case 1:y=1540483477*(65535&(y^=255&o.charCodeAt(C)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var ru=SA,Q_=Jh.exports;wo.exports=ru,wo.exports.murmur3=ru,wo.exports.murmur2=Q_;var Jm=Ee(wo.exports);class ou{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,p,y){this.ids.push($_(n)),this.positions.push(a,p,y)}getPositions(n){const a=$_(n);let p=0,y=this.ids.length-1;for(;p<y;){const S=p+y>>1;this.ids[S]>=a?y=S:p=S+1}const C=[];for(;this.ids[p]===a;)C.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return C}static serialize(n,a){const p=new Float64Array(n.ids),y=new Uint32Array(n.positions);return vd(p,y,0,p.length-1),a&&a.push(p.buffer,y.buffer),{ids:p,positions:y}}static deserialize(n){const a=new ou;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function $_(o){const n=+o;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:Jm(String(o))}function vd(o,n,a,p){for(;a<p;){const y=o[a+p>>1];let C=a-1,S=p+1;for(;;){do C++;while(o[C]<y);do S--;while(o[S]>y);if(C>=S)break;xd(o,C,S),xd(n,3*C,3*S),xd(n,3*C+1,3*S+1),xd(n,3*C+2,3*S+2)}S-a<p-S?(vd(o,n,a,S),a=S+1):(vd(o,n,S+1,p),p=S)}}function xd(o,n,a){const p=o[n];o[n]=o[a],o[a]=p}yn(ou,"FeaturePositionMap");class Nh{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,a){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,a),this.initialized=!0),!!this.location}}class Qh extends Nh{constructor(n){super(n),this.current=0}set(n,a,p){this.fetchUniformLocation(n,a)&&this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))}}class ql extends Nh{constructor(n){super(n),this.current=[0,0,0,0]}set(n,a,p){this.fetchUniformLocation(n,a)&&(p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]&&p[3]===this.current[3]||(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3])))}}class bd extends Nh{constructor(n){super(n),this.current=Ko.transparent}set(n,a,p){this.fetchUniformLocation(n,a)&&(p.r===this.current.r&&p.g===this.current.g&&p.b===this.current.b&&p.a===this.current.a||(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a)))}}const eg=new Float32Array(16),j_=new Float32Array(9),Np=new Float32Array(4);function Qp(o){return[It(255*o.r,255*o.g),It(255*o.b,255*o.a)]}class IA{constructor(n,a,p){this.value=n,this.uniformNames=a.map(y=>`u_${y}`),this.type=p}setUniform(n,a,p,y,C){a.set(n,C,y.constantOr(this.value))}getBinding(n,a){return this.type==="color"?new bd(n):new Qh(n)}}class MA{constructor(n,a){this.uniformNames=a.map(p=>`u_${p}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,a,p,y,C){const S=C==="u_pattern"||C==="u_dash"?this.pattern:C==="u_pixel_ratio"?this.pixelRatio:null;S&&a.set(n,C,S)}getBinding(n,a){return a==="u_pattern"||a==="u_dash"?new ql(n):new Qh(n)}}class Hu{constructor(n,a,p,y){this.expression=n,this.type=p,this.maxValue=0,this.paintVertexAttributes=a.map(C=>({name:`a_${C}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(n,a,p,y,C,S){const z=this.paintVertexArray.length,Q=this.expression.evaluate(new ee(0),a,{},C,y,S);this.paintVertexArray.resize(n),this._setPaintValue(z,n,Q)}updatePaintArray(n,a,p,y,C){const S=this.expression.evaluate({zoom:0},p,y,void 0,C);this._setPaintValue(n,a,S)}_setPaintValue(n,a,p){if(this.type==="color"){const y=Qp(p);for(let C=n;C<a;C++)this.paintVertexArray.emplace(C,y[0],y[1])}else{for(let y=n;y<a;y++)this.paintVertexArray.emplace(y,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Vu{constructor(n,a,p,y,C,S){this.expression=n,this.uniformNames=a.map(z=>`u_${z}_t`),this.type=p,this.useIntegerZoom=y,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=a.map(z=>({name:`a_${z}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new S}populatePaintArray(n,a,p,y,C,S){const z=this.expression.evaluate(new ee(this.zoom),a,{},C,y,S),Q=this.expression.evaluate(new ee(this.zoom+1),a,{},C,y,S),W=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(W,n,z,Q)}updatePaintArray(n,a,p,y,C){const S=this.expression.evaluate({zoom:this.zoom},p,y,void 0,C),z=this.expression.evaluate({zoom:this.zoom+1},p,y,void 0,C);this._setPaintValue(n,a,S,z)}_setPaintValue(n,a,p,y){if(this.type==="color"){const C=Qp(p),S=Qp(y);for(let z=n;z<a;z++)this.paintVertexArray.emplace(z,C[0],C[1],S[0],S[1])}else{for(let C=n;C<a;C++)this.paintVertexArray.emplace(C,p,y);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(y))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a,p,y,C){const S=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,z=Cn(this.expression.interpolationFactor(S,this.zoom,this.zoom+1),0,1);a.set(n,C,z)}getBinding(n,a){return new Qh(n)}}class dl{constructor(n,a,p,y,C){this.expression=n,this.layerId=C,this.paintVertexAttributes=(p==="array"?Oh:Rh).members;for(let S=0;S<a.length;++S);this.paintVertexArray=new y}populatePaintArray(n,a,p){const y=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(y,n,a.patterns&&a.patterns[this.layerId],p)}updatePaintArray(n,a,p,y,C,S){this._setPaintValues(n,a,p.patterns&&p.patterns[this.layerId],S)}_setPaintValues(n,a,p,y){if(!y||!p)return;const C=y[p];if(!C)return;const{tl:S,br:z,pixelRatio:Q}=C;for(let W=n;W<a;W++)this.paintVertexArray.emplace(W,S[0],S[1],z[0],z[1],Q)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Yd{constructor(n,a,p=()=>!0){this.binders={},this._buffers=[];const y=[];for(const C in n.paint._values){if(!p(C))continue;const S=n.paint.get(C);if(!(S instanceof tt&&Ka(S.property.specification)))continue;const z=tg(C,n.type),Q=S.value,W=S.property.specification.type,J=!!S.property.useIntegerZoom,ie=C==="line-dasharray"||C.endsWith("pattern"),se=C==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(Q.kind!=="constant"||se)if(Q.kind==="source"||se||ie){const fe=Af(C,W,"source");this.binders[C]=ie?new dl(Q,z,W,fe,n.id):new Hu(Q,z,W,fe),y.push(`/a_${C}`)}else{const fe=Af(C,W,"composite");this.binders[C]=new Vu(Q,z,W,J,a,fe),y.push(`/z_${C}`)}else this.binders[C]=ie?new MA(Q.value,z):new IA(Q.value,z,W),y.push(`/u_${C}`)}this.cacheKey=y.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof Hu||a instanceof Vu?a.maxValue:0}populatePaintArrays(n,a,p,y,C,S){for(const z in this.binders){const Q=this.binders[z];(Q instanceof Hu||Q instanceof Vu||Q instanceof dl)&&Q.populatePaintArray(n,a,p,y,C,S)}}setConstantPatternPositions(n){for(const a in this.binders){const p=this.binders[a];p instanceof MA&&p.setConstantPatternPositions(n)}}updatePaintArrays(n,a,p,y,C,S){let z=!1;for(const Q in n){const W=a.getPositions(Q);for(const J of W){const ie=p.feature(J.index);for(const se in this.binders){const fe=this.binders[se];if((fe instanceof Hu||fe instanceof Vu||fe instanceof dl)&&fe.expression.isStateDependent===!0){const _e=y.paint.get(se);fe.expression=_e.value,fe.updatePaintArray(J.start,J.end,ie,n[Q],C,S),z=!0}}}}return z}defines(){const n=[];for(const a in this.binders){const p=this.binders[a];(p instanceof IA||p instanceof MA)&&n.push(...p.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const p=this.binders[a];if(p instanceof Hu||p instanceof Vu||p instanceof dl)for(let y=0;y<p.paintVertexAttributes.length;y++)n.push(p.paintVertexAttributes[y].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const p=this.binders[a];if(p instanceof IA||p instanceof MA||p instanceof Vu)for(const y of p.uniformNames)n.push(y)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const a=[];for(const p in this.binders){const y=this.binders[p];if(y instanceof IA||y instanceof MA||y instanceof Vu)for(const C of y.uniformNames)a.push({name:C,property:p,binding:y.getBinding(n,C)})}return a}setUniforms(n,a,p,y,C){for(const{name:S,property:z,binding:Q}of p)this.binders[z].setUniform(n,Q,C,y.get(z),S)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const a=this.binders[n];(a instanceof Hu||a instanceof Vu||a instanceof dl)&&a.paintVertexBuffer&&this._buffers.push(a.paintVertexBuffer)}}upload(n){for(const a in this.binders){const p=this.binders[a];(p instanceof Hu||p instanceof Vu||p instanceof dl)&&p.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof Hu||a instanceof Vu||a instanceof dl)&&a.destroy()}}}class ns{constructor(n,a,p=()=>!0){this.programConfigurations={};for(const y of n)this.programConfigurations[y.id]=new Yd(y,a,p);this.needsUpload=!1,this._featureMap=new ou,this._bufferOffset=0}populatePaintArrays(n,a,p,y,C,S,z){for(const Q in this.programConfigurations)this.programConfigurations[Q].populatePaintArrays(n,a,y,C,S,z);a.id!==void 0&&this._featureMap.add(a.id,p,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,p,y,C){for(const S of p)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(n,this._featureMap,a,S,y,C)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const Kf={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function tg(o,n){return Kf[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}const df={"line-pattern":{source:nn,composite:nn},"fill-pattern":{source:nn,composite:nn},"fill-extrusion-pattern":{source:nn,composite:nn},"line-dasharray":{source:Mn,composite:Mn}},$p={color:{source:Os,composite:Zn},number:{source:qo,composite:Os}};function Af(o,n,a){const p=df[o];return p&&p[a]||$p[n][a]}yn(IA,"ConstantBinder"),yn(MA,"PatternConstantBinder"),yn(Hu,"SourceExpressionBinder"),yn(dl,"PatternCompositeBinder"),yn(Vu,"CompositeExpressionBinder"),yn(Yd,"ProgramConfiguration",{omit:["_buffers"]}),yn(ns,"ProgramConfigurationSet");const ng="-transition";class Gu extends Yo{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new et(a.layout)),a.paint)){this._transitionablePaint=new ve(a.paint);for(const p in n.paint)this.setPaintProperty(p,n.paint[p],{validate:!1});for(const p in n.layout)this.setLayoutProperty(p,n.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new rt(a.paint)}}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,p={}){a!=null&&this._validate(un,`layers.${this.id}.layout.${n}`,n,a,p)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return sr(n,ng)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,p={}){if(a!=null&&this._validate(bt,`layers.${this.id}.paint.${n}`,n,a,p))return!1;if(sr(n,ng))return this._transitionablePaint.setTransition(n.slice(0,-11),a||void 0),!1;{const y=this._transitionablePaint._values[n],C=y.value.isDataDriven(),S=y.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const z=this._transitionablePaint._values[n].value,Q=z.isDataDriven(),W=sr(n,"pattern")||n==="line-dasharray";return Q||C||W||this._handleOverridablePaintPropertyUpdate(n,S,z)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,a,p){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Qi(n,(a,p)=>!(a===void 0||p==="layout"&&!Object.keys(a).length||p==="paint"&&!Object.keys(a).length))}_validate(n,a,p,y,C={}){return(!C||C.validate!==!1)&&In(this,n.call(on,{key:a,layerType:this.type,objectKey:p,value:y,styleSpec:hn,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof tt&&Ka(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Ti(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const ff=Nt([{name:"a_pos",components:2,type:"Int16"}],4),ig=Nt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class sa{constructor(n=[]){this.segments=n}prepareSegment(n,a,p,y){let C=this.segments[this.segments.length-1];return n>sa.MAX_VERTEX_ARRAY_LENGTH&&di(`Max vertices per segment is ${sa.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!C||C.vertexLength+n>sa.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==y)&&(C={vertexOffset:a.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},y!==void 0&&(C.sortKey=y),this.segments.push(C)),C}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,p,y){return new sa([{vertexOffset:n,primitiveOffset:a,vertexLength:p,primitiveLength:y,vaos:{},sortKey:0}])}}sa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,yn(sa,"SegmentVector");var Ar=8192;class Qa{constructor(n,a){n&&(a?this.setSouthWest(n).setNorthEast(a):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof _s?new _s(n.lng,n.lat):_s.convert(n),this}setSouthWest(n){return this._sw=n instanceof _s?new _s(n.lng,n.lat):_s.convert(n),this}extend(n){const a=this._sw,p=this._ne;let y,C;if(n instanceof _s)y=n,C=n;else{if(!(n instanceof Qa))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Qa.convert(n)):this.extend(_s.convert(n)):typeof n=="object"&&n!==null&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(_s.convert(n)):this;if(y=n._sw,C=n._ne,!y||!C)return this}return a||p?(a.lng=Math.min(y.lng,a.lng),a.lat=Math.min(y.lat,a.lat),p.lng=Math.max(C.lng,p.lng),p.lat=Math.max(C.lat,p.lat)):(this._sw=new _s(y.lng,y.lat),this._ne=new _s(C.lng,C.lat)),this}getCenter(){return new _s((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new _s(this.getWest(),this.getNorth())}getSouthEast(){return new _s(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:a,lat:p}=_s.convert(n);let y=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&y}static convert(n){return!n||n instanceof Qa?n:new Qa(n)}}var dc=1e-6,Tu=typeof Float32Array<"u"?Float32Array:Array;function jp(){var o=new Tu(9);return Tu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function Zf(o,n,a){var p=n[0],y=n[1],C=n[2],S=n[3],z=n[4],Q=n[5],W=n[6],J=n[7],ie=n[8],se=a[0],fe=a[1],_e=a[2],Me=a[3],Ve=a[4],ut=a[5],Ct=a[6],ht=a[7],vt=a[8];return o[0]=se*p+fe*S+_e*W,o[1]=se*y+fe*z+_e*J,o[2]=se*C+fe*Q+_e*ie,o[3]=Me*p+Ve*S+ut*W,o[4]=Me*y+Ve*z+ut*J,o[5]=Me*C+Ve*Q+ut*ie,o[6]=Ct*p+ht*S+vt*W,o[7]=Ct*y+ht*z+vt*J,o[8]=Ct*C+ht*Q+vt*ie,o}function Xl(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function pf(o,n){var a=n[0],p=n[1],y=n[2],C=n[3],S=n[4],z=n[5],Q=n[6],W=n[7],J=n[8],ie=n[9],se=n[10],fe=n[11],_e=n[12],Me=n[13],Ve=n[14],ut=n[15],Ct=a*z-p*S,ht=a*Q-y*S,vt=a*W-C*S,Pt=p*Q-y*z,Lt=p*W-C*z,An=y*W-C*Q,ln=J*Me-ie*_e,Ln=J*Ve-se*_e,ai=J*ut-fe*_e,vn=ie*Ve-se*Me,$n=ie*ut-fe*Me,jn=se*ut-fe*Ve,ti=Ct*jn-ht*$n+vt*vn+Pt*ai-Lt*Ln+An*ln;return ti?(o[0]=(z*jn-Q*$n+W*vn)*(ti=1/ti),o[1]=(y*$n-p*jn-C*vn)*ti,o[2]=(Me*An-Ve*Lt+ut*Pt)*ti,o[3]=(se*Lt-ie*An-fe*Pt)*ti,o[4]=(Q*ai-S*jn-W*Ln)*ti,o[5]=(a*jn-y*ai+C*Ln)*ti,o[6]=(Ve*vt-_e*An-ut*ht)*ti,o[7]=(J*An-se*vt+fe*ht)*ti,o[8]=(S*$n-z*ai+W*ln)*ti,o[9]=(p*ai-a*$n-C*ln)*ti,o[10]=(_e*Lt-Me*vt+ut*Ct)*ti,o[11]=(ie*vt-J*Lt-fe*Ct)*ti,o[12]=(z*Ln-S*vn-Q*ln)*ti,o[13]=(a*vn-p*Ln+y*ln)*ti,o[14]=(Me*ht-_e*Pt-Ve*Ct)*ti,o[15]=(J*Pt-ie*ht+se*Ct)*ti,o):null}function ed(o,n,a){var p=n[0],y=n[1],C=n[2],S=n[3],z=n[4],Q=n[5],W=n[6],J=n[7],ie=n[8],se=n[9],fe=n[10],_e=n[11],Me=n[12],Ve=n[13],ut=n[14],Ct=n[15],ht=a[0],vt=a[1],Pt=a[2],Lt=a[3];return o[0]=ht*p+vt*z+Pt*ie+Lt*Me,o[1]=ht*y+vt*Q+Pt*se+Lt*Ve,o[2]=ht*C+vt*W+Pt*fe+Lt*ut,o[3]=ht*S+vt*J+Pt*_e+Lt*Ct,o[4]=(ht=a[4])*p+(vt=a[5])*z+(Pt=a[6])*ie+(Lt=a[7])*Me,o[5]=ht*y+vt*Q+Pt*se+Lt*Ve,o[6]=ht*C+vt*W+Pt*fe+Lt*ut,o[7]=ht*S+vt*J+Pt*_e+Lt*Ct,o[8]=(ht=a[8])*p+(vt=a[9])*z+(Pt=a[10])*ie+(Lt=a[11])*Me,o[9]=ht*y+vt*Q+Pt*se+Lt*Ve,o[10]=ht*C+vt*W+Pt*fe+Lt*ut,o[11]=ht*S+vt*J+Pt*_e+Lt*Ct,o[12]=(ht=a[12])*p+(vt=a[13])*z+(Pt=a[14])*ie+(Lt=a[15])*Me,o[13]=ht*y+vt*Q+Pt*se+Lt*Ve,o[14]=ht*C+vt*W+Pt*fe+Lt*ut,o[15]=ht*S+vt*J+Pt*_e+Lt*Ct,o}function qf(o,n,a){var p,y,C,S,z,Q,W,J,ie,se,fe,_e,Me=a[0],Ve=a[1],ut=a[2];return n===o?(o[12]=n[0]*Me+n[4]*Ve+n[8]*ut+n[12],o[13]=n[1]*Me+n[5]*Ve+n[9]*ut+n[13],o[14]=n[2]*Me+n[6]*Ve+n[10]*ut+n[14],o[15]=n[3]*Me+n[7]*Ve+n[11]*ut+n[15]):(y=n[1],C=n[2],S=n[3],z=n[4],Q=n[5],W=n[6],J=n[7],ie=n[8],se=n[9],fe=n[10],_e=n[11],o[0]=p=n[0],o[1]=y,o[2]=C,o[3]=S,o[4]=z,o[5]=Q,o[6]=W,o[7]=J,o[8]=ie,o[9]=se,o[10]=fe,o[11]=_e,o[12]=p*Me+z*Ve+ie*ut+n[12],o[13]=y*Me+Q*Ve+se*ut+n[13],o[14]=C*Me+W*Ve+fe*ut+n[14],o[15]=S*Me+J*Ve+_e*ut+n[15]),o}function Jd(o,n,a){var p=a[0],y=a[1],C=a[2];return o[0]=n[0]*p,o[1]=n[1]*p,o[2]=n[2]*p,o[3]=n[3]*p,o[4]=n[4]*y,o[5]=n[5]*y,o[6]=n[6]*y,o[7]=n[7]*y,o[8]=n[8]*C,o[9]=n[9]*C,o[10]=n[10]*C,o[11]=n[11]*C,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o}function eA(o,n,a){var p=Math.sin(a),y=Math.cos(a),C=n[4],S=n[5],z=n[6],Q=n[7],W=n[8],J=n[9],ie=n[10],se=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=C*y+W*p,o[5]=S*y+J*p,o[6]=z*y+ie*p,o[7]=Q*y+se*p,o[8]=W*y-C*p,o[9]=J*y-S*p,o[10]=ie*y-z*p,o[11]=se*y-Q*p,o}function tA(o,n,a){var p=Math.sin(a),y=Math.cos(a),C=n[0],S=n[1],z=n[2],Q=n[3],W=n[8],J=n[9],ie=n[10],se=n[11];return n!==o&&(o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=C*y-W*p,o[1]=S*y-J*p,o[2]=z*y-ie*p,o[3]=Q*y-se*p,o[8]=C*p+W*y,o[9]=S*p+J*y,o[10]=z*p+ie*y,o[11]=Q*p+se*y,o}function H_(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function td(o,n,a){var p,y,C,S=a[0],z=a[1],Q=a[2],W=Math.hypot(S,z,Q);return W<dc?null:(S*=W=1/W,z*=W,Q*=W,p=Math.sin(n),y=Math.cos(n),o[0]=S*S*(C=1-y)+y,o[1]=z*S*C+Q*p,o[2]=Q*S*C-z*p,o[3]=0,o[4]=S*z*C-Q*p,o[5]=z*z*C+y,o[6]=Q*z*C+S*p,o[7]=0,o[8]=S*Q*C+z*p,o[9]=z*Q*C-S*p,o[10]=Q*Q*C+y,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o)}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var V_=ed;function LA(){var o=new Tu(3);return Tu!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function nA(o){var n=new Tu(3);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n}function iA(o){return Math.hypot(o[0],o[1],o[2])}function rA(o,n,a){var p=new Tu(3);return p[0]=o,p[1]=n,p[2]=a,p}function _h(o,n,a){return o[0]=n[0]+a[0],o[1]=n[1]+a[1],o[2]=n[2]+a[2],o}function Hp(o,n,a){return o[0]=n[0]-a[0],o[1]=n[1]-a[1],o[2]=n[2]-a[2],o}function Vp(o,n,a){return o[0]=n[0]*a[0],o[1]=n[1]*a[1],o[2]=n[2]*a[2],o}function oA(o,n,a){return o[0]=Math.min(n[0],a[0]),o[1]=Math.min(n[1],a[1]),o[2]=Math.min(n[2],a[2]),o}function mf(o,n,a){return o[0]=Math.max(n[0],a[0]),o[1]=Math.max(n[1],a[1]),o[2]=Math.max(n[2],a[2]),o}function su(o,n,a){return o[0]=n[0]*a,o[1]=n[1]*a,o[2]=n[2]*a,o}function Xf(o,n,a,p){return o[0]=n[0]+a[0]*p,o[1]=n[1]+a[1]*p,o[2]=n[2]+a[2]*p,o}function El(o,n){var a=n[0],p=n[1],y=n[2],C=a*a+p*p+y*y;return C>0&&(C=1/Math.sqrt(C)),o[0]=n[0]*C,o[1]=n[1]*C,o[2]=n[2]*C,o}function wa(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]}function gf(o,n,a){var p=n[0],y=n[1],C=n[2],S=a[0],z=a[1],Q=a[2];return o[0]=y*Q-C*z,o[1]=C*S-p*Q,o[2]=p*z-y*S,o}function fa(o,n,a){var p=n[0],y=n[1],C=n[2],S=a[3]*p+a[7]*y+a[11]*C+a[15];return o[0]=(a[0]*p+a[4]*y+a[8]*C+a[12])/(S=S||1),o[1]=(a[1]*p+a[5]*y+a[9]*C+a[13])/S,o[2]=(a[2]*p+a[6]*y+a[10]*C+a[14])/S,o}function G_(o,n,a){var p=a[0],y=a[1],C=a[2],S=n[0],z=n[1],Q=n[2],W=y*Q-C*z,J=C*S-p*Q,ie=p*z-y*S,se=y*ie-C*J,fe=C*W-p*ie,_e=p*J-y*W,Me=2*a[3];return J*=Me,ie*=Me,fe*=2,_e*=2,o[0]=S+(W*=Me)+(se*=2),o[1]=z+J+fe,o[2]=Q+ie+_e,o}var _f,au=Hp,W_=Vp,wd=iA;function Gp(o,n,a){return o[0]=n[0]*a,o[1]=n[1]*a,o[2]=n[2]*a,o[3]=n[3]*a,o}function Wp(o,n){var a=n[0],p=n[1],y=n[2],C=n[3],S=a*a+p*p+y*y+C*C;return S>0&&(S=1/Math.sqrt(S)),o[0]=a*S,o[1]=p*S,o[2]=y*S,o[3]=C*S,o}function Cd(o,n,a){var p=n[0],y=n[1],C=n[2],S=n[3];return o[0]=a[0]*p+a[4]*y+a[8]*C+a[12]*S,o[1]=a[1]*p+a[5]*y+a[9]*C+a[13]*S,o[2]=a[2]*p+a[6]*y+a[10]*C+a[14]*S,o[3]=a[3]*p+a[7]*y+a[11]*C+a[15]*S,o}function Yf(){var o=new Tu(4);return Tu!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function kA(o){return o[0]=0,o[1]=0,o[2]=0,o[3]=1,o}function Qr(o,n,a){a*=.5;var p=n[0],y=n[1],C=n[2],S=n[3],z=Math.sin(a),Q=Math.cos(a);return o[0]=p*Q+S*z,o[1]=y*Q+C*z,o[2]=C*Q-y*z,o[3]=S*Q-p*z,o}function PA(o,n,a){a*=.5;var p=n[0],y=n[1],C=n[2],S=n[3],z=Math.sin(a),Q=Math.cos(a);return o[0]=p*Q-C*z,o[1]=y*Q+S*z,o[2]=C*Q+p*z,o[3]=S*Q-y*z,o}LA(),_f=new Tu(4),Tu!=Float32Array&&(_f[0]=0,_f[1]=0,_f[2]=0,_f[3]=0);var rg=Wp;LA(),rA(1,0,0),rA(0,1,0),Yf(),Yf(),jp();const sA=Nt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:og}=sA,Jf=Nt([{name:"a_pos_3",components:3,type:"Int16"}]);var yf=Nt([{name:"a_pos",type:"Int16",components:2}]);class Yl{constructor(n,a){this.pos=n,this.dir=a}intersectsPlane(n,a,p){const y=wa(a,this.dir);if(Math.abs(y)<1e-6)return!1;const C=((n[0]-this.pos[0])*a[0]+(n[1]-this.pos[1])*a[1]+(n[2]-this.pos[2])*a[2])/y;return p[0]=this.pos[0]+this.dir[0]*C,p[1]=this.pos[1]+this.dir[1]*C,p[2]=this.pos[2]+this.dir[2]*C,!0}closestPointOnSphere(n,a,p){if(function(fe,_e){var Me=fe[0],Ve=fe[1],ut=fe[2],Ct=_e[0],ht=_e[1],vt=_e[2];return Math.abs(Me-Ct)<=dc*Math.max(1,Math.abs(Me),Math.abs(Ct))&&Math.abs(Ve-ht)<=dc*Math.max(1,Math.abs(Ve),Math.abs(ht))&&Math.abs(ut-vt)<=dc*Math.max(1,Math.abs(ut),Math.abs(vt))}(this.pos,n)||a===0)return p[0]=p[1]=p[2]=0,!1;const[y,C,S]=this.dir,z=this.pos[0]-n[0],Q=this.pos[1]-n[1],W=this.pos[2]-n[2],J=y*y+C*C+S*S,ie=2*(z*y+Q*C+W*S),se=ie*ie-4*J*(z*z+Q*Q+W*W-a*a);if(se<0){const fe=Math.max(-ie/2,0),_e=z+y*fe,Me=Q+C*fe,Ve=W+S*fe,ut=Math.hypot(_e,Me,Ve);return p[0]=_e*a/ut,p[1]=Me*a/ut,p[2]=Ve*a/ut,!1}{const fe=(-ie-Math.sqrt(se))/(2*J);if(fe<0){const _e=Math.hypot(z,Q,W);return p[0]=z*a/_e,p[1]=Q*a/_e,p[2]=W*a/_e,!1}return p[0]=z+y*fe,p[1]=Q+C*fe,p[2]=W+S*fe,!0}}}class sg{constructor(n,a,p,y,C){this.TL=n,this.TR=a,this.BR=p,this.BL=y,this.horizon=C}static fromInvProjectionMatrix(n,a,p){const y=[-1,1,1],C=[1,1,1],S=[1,-1,1],z=[-1,-1,1],Q=fa(y,y,n),W=fa(C,C,n),J=fa(S,S,n),ie=fa(z,z,n);return new sg(Q,W,J,ie,a/p)}}class Kp{constructor(n,a){this.points=n,this.planes=a}static fromInvProjectionMatrix(n,a,p,y){const C=Math.pow(2,p),S=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Q=>{const W=Cd([],Q,n),J=1/W[3]/a*C;return function(ie,se,fe){return ie[0]=se[0]*fe[0],ie[1]=se[1]*fe[1],ie[2]=se[2]*fe[2],ie[3]=se[3]*fe[3],ie}(W,W,[J,J,y?1/W[3]:J,J])}),z=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Q=>{const W=El([],gf([],au([],S[Q[0]],S[Q[1]]),au([],S[Q[2]],S[Q[1]]))),J=-wa(W,S[Q[1]]);return W.concat(J)});return new Kp(S,z)}}class Ac{static fromPoints(n){const a=[1/0,1/0,1/0],p=[-1/0,-1/0,-1/0];for(const y of n)oA(a,a,y),mf(p,p,y);return new Ac(a,p)}static applyTransform(n,a){const p=n.getCorners();for(let y=0;y<p.length;++y)fa(p[y],p[y],a);return Ac.fromPoints(p)}constructor(n,a){this.min=n,this.max=a,this.center=su([],_h([],this.min,this.max),.5)}quadrant(n){const a=[n%2==0,n<2],p=nA(this.min),y=nA(this.max);for(let C=0;C<a.length;C++)p[C]=a[C]?this.min[C]:this.center[C],y[C]=a[C]?this.center[C]:this.max[C];return y[2]=this.max[2],new Ac(p,y)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,a=this.max;return[[n[0],n[1],n[2]],[a[0],n[1],n[2]],[a[0],a[1],n[2]],[n[0],a[1],n[2]],[n[0],n[1],a[2]],[a[0],n[1],a[2]],[a[0],a[1],a[2]],[n[0],a[1],a[2]]]}intersects(n){const a=this.getCorners();let p=!0;for(let y=0;y<n.planes.length;y++){const C=n.planes[y];let S=0;for(let z=0;z<a.length;z++)S+=wa(C,a[z])+C[3]>=0;if(S===0)return 0;S!==a.length&&(p=!1)}if(p)return 2;for(let y=0;y<3;y++){let C=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let z=0;z<n.points.length;z++){const Q=n.points[z][y]-this.min[y];C=Math.min(C,Q),S=Math.max(S,Q)}if(S<0||C>this.max[y]-this.min[y])return 0}return 1}}const ag=5,FA=6,Ns=Ar/Math.PI/2,lg=16383,aA=64,Eu=[aA,32,16],Pr=-Ns,Xa=Ns,cg=[new Ac([Pr,Pr,Pr],[Xa,Xa,Xa]),new Ac([Pr,Pr,Pr],[0,0,Xa]),new Ac([0,Pr,Pr],[Xa,0,Xa]),new Ac([Pr,0,Pr],[0,Xa,Xa]),new Ac([0,0,Pr],[Xa,Xa,Xa])];function DA(o){return o*Ns/nd}function ug(o,n,a,p=!0){const y=su([],o._camera.position,o.worldSize),C=[n,a,1,1];Cd(C,C,o.pixelMatrixInverse),Gp(C,C,1/C[3]);const S=El([],au([],C,y)),z=o.globeMatrix,Q=[z[12],z[13],z[14]],W=au([],Q,y),J=iA(W),ie=El([],W),se=o.worldSize/(2*Math.PI),fe=wa(ie,S),_e=Math.asin(se/J);if(_e<Math.acos(fe)){if(!p)return null;const ai=[],vn=[];su(ai,S,J/fe),El(vn,au(vn,ai,W)),El(S,_h(S,W,su(S,vn,Math.tan(_e)*J)))}const Me=[];new Yl(y,S).closestPointOnSphere(Q,se,Me);const Ve=El([],pr(z,0)),ut=El([],pr(z,1)),Ct=El([],pr(z,2)),ht=wa(Ve,Me),vt=wa(ut,Me),Pt=wa(Ct,Me),Lt=Kt(Math.asin(-vt/se));let An=Kt(Math.atan2(ht,Pt));An=o.center.lng+function(ai,vn){const $n=(vn-ai+180)%360-180;return $n<-180?$n+360:$n}(o.center.lng,An);const ln=Hh(An),Ln=Cn(id(Lt),0,1);return new hA(ln,Ln)}class Bd{constructor(n,a,p){this.a=au([],n,p),this.b=au([],a,p),this.center=p;const y=El([],this.a),C=El([],this.b);this.angle=Math.acos(wa(y,C))}}function yh(o,n){if(o.angle===0)return null;let a;return a=o.a[n]===0?1/o.angle*.5*Math.PI:1/o.angle*Math.atan(o.b[n]/o.a[n]/Math.sin(o.angle)-1/Math.tan(o.angle)),a<0||a>1?null:function(p,y,C,S){const z=Math.sin(C);return p*(Math.sin((1-S)*C)/z)+y*(Math.sin(S*C)/z)}(o.a[n],o.b[n],o.angle,Cn(a,0,1))+o.center[n]}function vh(o){if(o.z<=1)return cg[o.z+2*o.y+o.x];const n=qp(Zp(o));return Ac.fromPoints(n)}function lA(o,n,a){return su(o,o,1-a),Xf(o,o,n,a)}function K_(o,n){const a=Td(n.zoom);if(a===0)return vh(o);const p=Zp(o),y=qp(p),C=Hh(p.getWest())*n.worldSize,S=Hh(p.getEast())*n.worldSize,z=id(p.getNorth())*n.worldSize,Q=id(p.getSouth())*n.worldSize,W=[C,z,0],J=[S,z,0],ie=[C,Q,0],se=[S,Q,0],fe=pf([],n.globeMatrix);return fa(W,W,fe),fa(J,J,fe),fa(ie,ie,fe),fa(se,se,fe),y[0]=lA(y[0],ie,a),y[1]=lA(y[1],se,a),y[2]=lA(y[2],J,a),y[3]=lA(y[3],W,a),Ac.fromPoints(y)}function Z_(o,n,a){for(const p of o)fa(p,p,n),su(p,p,a)}function Zv(o,n,a){const p=n/o.worldSize,y=o.globeMatrix;if(a.z<=1){const ln=vh(a).getCorners();return Z_(ln,y,p),Ac.fromPoints(ln)}const C=Zp(a),S=qp(C);Z_(S,y,p);const z=Number.MAX_VALUE,Q=[-z,-z,-z],W=[z,z,z];if(C.contains(o.center)){for(const ai of S)oA(W,W,ai),mf(Q,Q,ai);Q[2]=0;const ln=o.point,Ln=[ln.x*p,ln.y*p,0];return oA(W,W,Ln),mf(Q,Q,Ln),new Ac(W,Q)}const J=[y[12]*p,y[13]*p,y[14]*p],ie=C.getCenter(),se=Cn(o.center.lat,-Sl,Sl),fe=Cn(ie.lat,-Sl,Sl),_e=Hh(o.center.lng),Me=id(se);let Ve=_e-Hh(ie.lng);const ut=Me-id(fe);Ve>.5?Ve-=1:Ve<-.5&&(Ve+=1);let Ct=0;Math.abs(Ve)>Math.abs(ut)?Ct=Ve>=0?1:3:(Ct=ut>=0?0:2,Xf(J,J,[y[4]*p,y[5]*p,y[6]*p],-Math.sin(Ut(ut>=0?C.getSouth():C.getNorth()))*Ns));const ht=S[Ct],vt=S[(Ct+1)%4],Pt=new Bd(ht,vt,J),Lt=[yh(Pt,0)||ht[0],yh(Pt,1)||ht[1],yh(Pt,2)||ht[2]],An=Td(o.zoom);if(An>0){const ln=function({x:ai,y:vn,z:$n},jn,ti,ui,En){const Si=1/(1<<$n);let Wi=ai*Si,ki=Wi+Si,_o=vn*Si,hi=_o+Si,vr=0;const yo=(Wi+ki)/2-ui;return yo>.5?vr=-1:yo<-.5&&(vr=1),Wi=((Wi+vr)*jn-(ui*=jn))*ti+ui,ki=((ki+vr)*jn-ui)*ti+ui,_o=(_o*jn-(En*=jn))*ti+En,hi=(hi*jn-En)*ti+En,[[Wi,hi,0],[ki,hi,0],[ki,_o,0],[Wi,_o,0]]}(a,n,o._pixelsPerMercatorPixel,_e,Me);for(let ai=0;ai<S.length;ai++)lA(S[ai],ln[ai],An);const Ln=_h([],ln[Ct],ln[(Ct+1)%4]);su(Ln,Ln,.5),lA(Lt,Ln,An)}for(const ln of S)oA(W,W,ln),mf(Q,Q,ln);return W[2]=Math.min(ht[2],vt[2]),oA(W,W,Lt),mf(Q,Q,Lt),new Ac(W,Q)}function Zp({x:o,y:n,z:a}){const p=1/(1<<a),y=new _s(Iu(o*p),Al((n+1)*p)),C=new _s(Iu((o+1)*p),Al(n*p));return new Qa(y,C)}function qp(o){const n=Ut(o.getNorth()),a=Ut(o.getSouth()),p=Math.cos(n),y=Math.cos(a),C=Math.sin(n),S=Math.sin(a),z=o.getWest(),Q=o.getEast();return[UA(y,S,z),UA(y,S,Q),UA(p,C,Q),UA(p,C,z)]}function UA(o,n,a,p=Ns){return a=Ut(a),[o*Math.sin(a)*p,-n*p,o*Math.cos(a)*p]}function vf(o,n,a){return UA(Math.cos(Ut(o)),Math.sin(Ut(o)),n,a)}function zA(o,n,a,p){const y=1<<a.z,C=(o/Ar+a.x)/y;return vf(Al((n/Ar+a.y)/y),Iu(C),p)}function cA({min:o,max:n}){return lg/Math.max(n[0]-o[0],n[1]-o[1],n[2]-o[2])}const $h=new Float64Array(16);function uA(o){const n=cA(o),a=H_($h,[n,n,n]);return qf(a,a,((p=[])[0]=-(y=o.min)[0],p[1]=-y[1],p[2]=-y[2],p));var p,y}function Xp(o){const n=(p=o.min,(a=$h)[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=p[0],a[13]=p[1],a[14]=p[2],a[15]=1,a);var a,p;const y=1/cA(o);return Jd(n,n,[y,y,y])}function hg(o,n,a,p,y){const C=function(Q){const W=Ar/(2*Math.PI);return Q/(2*Math.PI)/W}(a),S=[o,n,-a/(2*Math.PI)],z=Xl(new Float64Array(16));return qf(z,z,S),Jd(z,z,[C,C,C]),eA(z,z,Ut(-y)),tA(z,z,Ut(-p)),z}function Td(o){return Qt(ag,FA,o)}function Yp(o,n){const a=vf(n.lat,n.lng),p=function(_e){const Me=vf(_e._center.lat,_e._center.lng);let Ve=gf([],rA(0,1,0),Me);const ut=td([],-_e.angle,Me);Ve=fa(Ve,Ve,ut),td(ut,-_e._pitch,Ve);const Ct=El([],Me);return su(Ct,Ct,DA(_e.cameraToCenterDistance/_e.pixelsPerMeter)),fa(Ct,Ct,ut),_h([],Me,Ct)}(o);return S=(y=Hp([],p,a))[0],z=y[1],Q=y[2],W=(C=a)[0],J=C[1],ie=C[2],fe=(se=Math.sqrt(S*S+z*z+Q*Q)*Math.sqrt(W*W+J*J+ie*ie))&&wa(y,C)/se,Math.acos(Math.min(Math.max(fe,-1),1));var y,C,S,z,Q,W,J,ie,se,fe}function Su(o,n){return Yp(o,n)>Math.PI/2*1.01}const Ed=Ut(85),Jp=Math.cos(Ed),xf=Math.sin(Ed),nd=63710088e-1,ep=2*Math.PI*nd;class jh{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new jh(Xn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,p=this.lat*a,y=n.lat*a,C=Math.sin(p)*Math.sin(y)+Math.cos(p)*Math.cos(y)*Math.cos((n.lng-this.lng)*a);return nd*Math.acos(Math.min(C,1))}toBounds(n=0){const a=360*n/40075017,p=a/Math.cos(Math.PI/180*this.lat);return new Qa(new jh(this.lng-p,this.lat-a),new jh(this.lng+p,this.lat+a))}toEcef(n){const a=DA(n);return vf(this.lat,this.lng,Ns+a)}static convert(n){if(n instanceof jh)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new jh(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new jh(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var _s=jh;function em(o){return ep*Math.cos(o*Math.PI/180)}function Hh(o){return(180+o)/360}function id(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function xh(o,n){return o/em(n)}function Iu(o){return 360*o-180}function Al(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}function tm(o,n){return o*em(Al(n))}const Sl=85.051129;function dg(o){return 1/Math.cos(o*Math.PI/180)}class hA{constructor(n,a,p=0){this.x=+n,this.y=+a,this.z=+p}static fromLngLat(n,a=0){const p=_s.convert(n);return new hA(Hh(p.lng),id(p.lat),xh(a,p.lat))}toLngLat(){return new _s(Iu(this.x),Al(this.y))}toAltitude(){return tm(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ep*dg(Al(this.y))}}function Vh(o,n,a,p,y,C,S,z,Q){const W=(n+p)/2,J=(a+y)/2,ie=new Xe(W,J);z(ie),function(se,fe,_e,Me,Ve,ut){const Ct=_e-Ve,ht=Me-ut;return Math.abs((Me-fe)*Ct-(_e-se)*ht)/Math.hypot(Ct,ht)}(ie.x,ie.y,C.x,C.y,S.x,S.y)>=Q?(Vh(o,n,a,W,J,C,ie,z,Q),Vh(o,W,J,p,y,ie,S,z,Q)):o.push(S)}function Ag(o,n,a){let p=o[0],y=p.x,C=p.y;n(p);const S=[p];for(let z=1;z<o.length;z++){const Q=o[z],{x:W,y:J}=Q;n(Q),Vh(S,y,C,W,J,p,Q,n,a),y=W,C=J,p=Q}return S}function rd(o,n,a,p){if(p(n,a)){const y=n.add(a)._mult(.5);rd(o,n,y,p),rd(o,y,a,p)}else o.push(a)}function fg(o,n){let a=o[0];const p=[a];for(let y=1;y<o.length;y++){const C=o[y];rd(p,a,C,n),a=C}return p}const nm=Math.pow(2,14)-1,pg=-nm-1;function q_(o,n){const a=Math.round(o.x*n),p=Math.round(o.y*n);return o.x=Cn(a,pg,nm),o.y=Cn(p,pg,nm),(a<o.x||a>o.x+1||p<o.y||p>o.y+1)&&di("Geometry exceeds allowed extent, reduce your vector tile buffer size"),o}function Sd(o,n,a){const p=o.loadGeometry(),y=o.extent,C=Ar/y;if(n&&a&&a.projection.isReprojectedInTileSpace){const S=1<<n.z,{scale:z,x:Q,y:W,projection:J}=a,ie=se=>{const fe=Iu((n.x+se.x/y)/S),_e=Al((n.y+se.y/y)/S),Me=J.project(fe,_e);se.x=(Me.x*z-Q)*y,se.y=(Me.y*z-W)*y};for(let se=0;se<p.length;se++)if(o.type!==1)p[se]=Ag(p[se],ie,1);else{const fe=[];for(const _e of p[se])_e.x<0||_e.x>=y||_e.y<0||_e.y>=y||(ie(_e),fe.push(_e));p[se]=fe}}for(const S of p)for(const z of S)q_(z,C);return p}function RA(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?Sd(o):[]}}function tp(o,n,a,p,y){o.emplaceBack(2*n+(p+1)/2,2*a+(y+1)/2)}function kc(o,n,a){o.emplaceBack(n.x,n.y,n.z,a[0]*16384,a[1]*16384,a[2]*16384)}class im{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new Nn,this.indexArray=new Yi,this.segments=new sa,this.programConfigurations=new ns(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,p,y){const C=this.layers[0],S=[];let z=null;C.type==="circle"&&(z=C.layout.get("circle-sort-key"));for(const{feature:W,id:J,index:ie,sourceLayerIndex:se}of n){const fe=this.layers[0]._featureFilter.needGeometry,_e=RA(W,fe);if(!this.layers[0]._featureFilter.filter(new ee(this.zoom),_e,p))continue;const Me=z?z.evaluate(_e,{},p):void 0,Ve={id:J,properties:W.properties,type:W.type,sourceLayerIndex:se,index:ie,geometry:fe?_e.geometry:Sd(W,p,y),patterns:{},sortKey:Me};S.push(Ve)}z&&S.sort((W,J)=>W.sortKey-J.sortKey);let Q=null;y.projection.name==="globe"&&(this.globeExtVertexArray=new Yn,Q=y.projection);for(const W of S){const{geometry:J,index:ie,sourceLayerIndex:se}=W,fe=n[ie].feature;this.addFeature(W,J,ie,a.availableImages,p,Q),a.featureIndex.insert(fe,J,ie,se,this.index)}}update(n,a,p,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,p,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ff.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,ig.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,a,p,y,C,S){for(const z of a)for(const Q of z){const W=Q.x,J=Q.y;if(W<0||W>=Ar||J<0||J>=Ar)continue;if(S){const fe=S.projectTilePoint(W,J,C),_e=S.upVector(C,W,J),Me=this.globeExtVertexArray;kc(Me,fe,_e),kc(Me,fe,_e),kc(Me,fe,_e),kc(Me,fe,_e)}const ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),se=ie.vertexLength;tp(this.layoutVertexArray,W,J,-1,-1),tp(this.layoutVertexArray,W,J,1,-1),tp(this.layoutVertexArray,W,J,1,1),tp(this.layoutVertexArray,W,J,-1,1),this.indexArray.emplaceBack(se,se+1,se+2),this.indexArray.emplaceBack(se,se+2,se+3),ie.vertexLength+=4,ie.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,{},y,C)}}function np(o,n){for(let a=0;a<o.length;a++)if(bh(n,o[a]))return!0;for(let a=0;a<n.length;a++)if(bh(o,n[a]))return!0;return!!wf(o,n)}function X_(o,n,a){return!!bh(o,n)||!!mg(n,o,a)}function bf(o,n){if(o.length===1)return Y_(n,o[0]);for(let a=0;a<n.length;a++){const p=n[a];for(let y=0;y<p.length;y++)if(bh(o,p[y]))return!0}for(let a=0;a<o.length;a++)if(Y_(n,o[a]))return!0;for(let a=0;a<n.length;a++)if(wf(o,n[a]))return!0;return!1}function rm(o,n,a){if(o.length>1){if(wf(o,n))return!0;for(let p=0;p<n.length;p++)if(mg(n[p],o,a))return!0}for(let p=0;p<o.length;p++)if(mg(o[p],n,a))return!0;return!1}function wf(o,n){if(o.length===0||n.length===0)return!1;for(let a=0;a<o.length-1;a++){const p=o[a],y=o[a+1];for(let C=0;C<n.length-1;C++)if(qv(p,y,n[C],n[C+1]))return!0}return!1}function qv(o,n,a,p){return Ir(o,a,p)!==Ir(n,a,p)&&Ir(o,n,a)!==Ir(o,n,p)}function mg(o,n,a){const p=a*a;if(n.length===1)return o.distSqr(n[0])<p;for(let y=1;y<n.length;y++)if(om(o,n[y-1],n[y])<p)return!0;return!1}function om(o,n,a){const p=n.distSqr(a);if(p===0)return o.distSqr(n);const y=((o.x-n.x)*(a.x-n.x)+(o.y-n.y)*(a.y-n.y))/p;return o.distSqr(y<0?n:y>1?a:a.sub(n)._mult(y)._add(n))}function Y_(o,n){let a,p,y,C=!1;for(let S=0;S<o.length;S++){a=o[S];for(let z=0,Q=a.length-1;z<a.length;Q=z++)p=a[z],y=a[Q],p.y>n.y!=y.y>n.y&&n.x<(y.x-p.x)*(n.y-p.y)/(y.y-p.y)+p.x&&(C=!C)}return C}function bh(o,n){let a=!1;for(let p=0,y=o.length-1;p<o.length;y=p++){const C=o[p],S=o[y];C.y>n.y!=S.y>n.y&&n.x<(S.x-C.x)*(n.y-C.y)/(S.y-C.y)+C.x&&(a=!a)}return a}function sm(o,n,a,p,y){for(const S of o)if(n<=S.x&&a<=S.y&&p>=S.x&&y>=S.y)return!0;const C=[new Xe(n,a),new Xe(n,y),new Xe(p,y),new Xe(p,a)];if(o.length>2){for(const S of C)if(bh(o,S))return!0}for(let S=0;S<o.length-1;S++)if(J_(o[S],o[S+1],C))return!0;return!1}function J_(o,n,a){const p=a[0],y=a[2];if(o.x<p.x&&n.x<p.x||o.x>y.x&&n.x>y.x||o.y<p.y&&n.y<p.y||o.y>y.y&&n.y>y.y)return!1;const C=Ir(o,n,a[0]);return C!==Ir(o,n,a[1])||C!==Ir(o,n,a[2])||C!==Ir(o,n,a[3])}function dA(o,n,a){const p=n.paint.get(o).value;return p.kind==="constant"?p.value:a.programConfigurations.get(n.id).getMaxValue(o)}function am(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Id(o,n,a,p,y){if(!n[0]&&!n[1])return o;const C=Xe.convert(n)._mult(y);a==="viewport"&&C._rotate(-p);const S=[];for(let z=0;z<o.length;z++)S.push(o[z].sub(C));return S}function gg(o,n,a,p){const y=Xe.convert(o)._mult(p);return n==="viewport"&&y._rotate(-a),y}yn(im,"CircleBucket",{omit:["layers"]});const ey=new At({"circle-sort-key":new Ye(hn.layout_circle["circle-sort-key"])});var Xv={paint:new At({"circle-radius":new Ye(hn.paint_circle["circle-radius"]),"circle-color":new Ye(hn.paint_circle["circle-color"]),"circle-blur":new Ye(hn.paint_circle["circle-blur"]),"circle-opacity":new Ye(hn.paint_circle["circle-opacity"]),"circle-translate":new Be(hn.paint_circle["circle-translate"]),"circle-translate-anchor":new Be(hn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Be(hn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Be(hn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ye(hn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ye(hn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ye(hn.paint_circle["circle-stroke-opacity"])}),layout:ey};function ty(o,n,a,p,y,C,S,z,Q){if(C&&o.queryGeometry.isAboveHorizon)return!1;C&&(Q*=o.pixelToTileUnitsFactor);const W=o.tileID.canonical,J=a.projection.upVectorScale(W,a.center.lat,a.worldSize).metersToTile;for(const ie of n)for(const se of ie){const fe=se.add(z),_e=y&&a.elevation?a.elevation.exaggeration()*y.getElevationAt(fe.x,fe.y,!0):0,Me=a.projection.projectTilePoint(fe.x,fe.y,W);if(_e>0){const ht=a.projection.upVector(W,fe.x,fe.y);Me.x+=ht[0]*J*_e,Me.y+=ht[1]*J*_e,Me.z+=ht[2]*J*_e}const Ve=C?fe:Yv(Me.x,Me.y,Me.z,p),ut=C?o.tilespaceRays.map(ht=>Jv(ht,_e)):o.queryGeometry.screenGeometry,Ct=Cd([],[Me.x,Me.y,Me.z,1],p);if(!S&&C?Q*=Ct[3]/a.cameraToCenterDistance:S&&!C&&(Q*=a.cameraToCenterDistance/Ct[3]),C){const ht=Al((se.y/Ar+W.y)/(1<<W.z));Q/=a.projection.pixelsPerMeter(ht,1)/xh(1,ht)}if(X_(ut,Ve,Q))return!0}return!1}function Yv(o,n,a,p){const y=Cd([],[o,n,a,1],p);return new Xe(y[0]/y[3],y[1]/y[3])}const ip=rA(0,0,0),_g=rA(0,0,1);function Jv(o,n){const a=LA();return ip[2]=n,o.intersectsPlane(ip,_g,a),new Xe(a[0],a[1])}class lm extends im{}function cm(o,{width:n,height:a},p,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==n*a*p)throw new RangeError("mismatched image size")}else y=new Uint8Array(n*a*p);return o.width=n,o.height=a,o.data=y,o}function OA(o,n,a){const{width:p,height:y}=n;p===o.width&&y===o.height||(yg(o,n,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,p),height:Math.min(o.height,y)},a),o.width=p,o.height=y,o.data=n.data)}function yg(o,n,a,p,y,C){if(y.width===0||y.height===0)return n;if(y.width>o.width||y.height>o.height||a.x>o.width-y.width||a.y>o.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>n.width||y.height>n.height||p.x>n.width-y.width||p.y>n.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const S=o.data,z=n.data;for(let Q=0;Q<y.height;Q++){const W=((a.y+Q)*o.width+a.x)*C,J=((p.y+Q)*n.width+p.x)*C;for(let ie=0;ie<y.width*C;ie++)z[J+ie]=S[W+ie]}return n}yn(lm,"HeatmapBucket",{omit:["layers"]});class Gh{constructor(n,a){cm(this,n,1,a)}resize(n){OA(this,new Gh(n),1)}clone(){return new Gh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,p,y,C){yg(n,a,p,y,C,1)}}class fc{constructor(n,a){cm(this,n,4,a)}resize(n){OA(this,new fc(n),4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new fc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,p,y,C){yg(n,a,p,y,C,4)}}yn(Gh,"AlphaImage"),yn(fc,"RGBAImage");var rp={paint:new At({"heatmap-radius":new Ye(hn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ye(hn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Be(hn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lt(hn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Be(hn.paint_heatmap["heatmap-opacity"])})};function op(o){const n={},a=o.resolution||256,p=o.clips?o.clips.length:1,y=o.image||new fc({width:a,height:p}),C=(S,z,Q)=>{n[o.evaluationKey]=Q;const W=o.expression.evaluate(n);y.data[S+z+0]=Math.floor(255*W.r/W.a),y.data[S+z+1]=Math.floor(255*W.g/W.a),y.data[S+z+2]=Math.floor(255*W.b/W.a),y.data[S+z+3]=Math.floor(255*W.a)};if(o.clips)for(let S=0,z=0;S<p;++S,z+=4*a)for(let Q=0,W=0;Q<a;Q++,W+=4){const J=Q/(a-1),{start:ie,end:se}=o.clips[S];C(z,W,ie*(1-J)+se*J)}else for(let S=0,z=0;S<a;S++,z+=4)C(0,z,S/(a-1));return y}var e0={paint:new At({"hillshade-illumination-direction":new Be(hn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Be(hn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Be(hn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Be(hn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Be(hn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Be(hn.paint_hillshade["hillshade-accent-color"])})};const t0=Nt([{name:"a_pos",components:2,type:"Int16"}],4),{members:n0}=t0;var vg={exports:{}};function um(o,n,a){a=a||2;var p,y,C,S,z,Q,W,J=n&&n.length,ie=J?n[0]*a:o.length,se=xg(o,0,ie,a,!0),fe=[];if(!se||se.next===se.prev)return fe;if(J&&(se=function(Me,Ve,ut,Ct){var ht,vt,Pt,Lt=[];for(ht=0,vt=Ve.length;ht<vt;ht++)(Pt=xg(Me,Ve[ht]*Ct,ht<vt-1?Ve[ht+1]*Ct:Me.length,Ct,!1))===Pt.next&&(Pt.steiner=!0),Lt.push(wg(Pt));for(Lt.sort(oy),ht=0;ht<Lt.length;ht++)ut=bg(Lt[ht],ut);return ut}(o,n,se,a)),o.length>80*a){p=C=o[0],y=S=o[1];for(var _e=a;_e<ie;_e+=a)(z=o[_e])<p&&(p=z),(Q=o[_e+1])<y&&(y=Q),z>C&&(C=z),Q>S&&(S=Q);W=(W=Math.max(C-p,S-y))!==0?32767/W:0}return wh(se,fe,a,p,y,W,0),fe}function xg(o,n,a,p,y){var C,S;if(y===QA(o,n,a,p)>0)for(C=n;C<a;C+=p)S=Tg(C,o[C],o[C+1],S);else for(C=a-p;C>=n;C-=p)S=Tg(C,o[C],o[C+1],S);return S&&ap(S,S.next)&&(AA(S),S=S.next),S}function Ms(o,n){if(!o)return o;n||(n=o);var a,p=o;do if(a=!1,p.steiner||!ap(p,p.next)&&Ys(p.prev,p,p.next)!==0)p=p.next;else{if(AA(p),(p=n=p.prev)===p.next)break;a=!0}while(a||p!==n);return n}function wh(o,n,a,p,y,C,S){if(o){!S&&C&&function(J,ie,se,fe){var _e=J;do _e.z===0&&(_e.z=dm(_e.x,_e.y,ie,se,fe)),_e.prevZ=_e.prev,_e.nextZ=_e.next,_e=_e.next;while(_e!==J);_e.prevZ.nextZ=null,_e.prevZ=null,function(Me){var Ve,ut,Ct,ht,vt,Pt,Lt,An,ln=1;do{for(ut=Me,Me=null,vt=null,Pt=0;ut;){for(Pt++,Ct=ut,Lt=0,Ve=0;Ve<ln&&(Lt++,Ct=Ct.nextZ);Ve++);for(An=ln;Lt>0||An>0&&Ct;)Lt!==0&&(An===0||!Ct||ut.z<=Ct.z)?(ht=ut,ut=ut.nextZ,Lt--):(ht=Ct,Ct=Ct.nextZ,An--),vt?vt.nextZ=ht:Me=ht,ht.prevZ=vt,vt=ht;ut=Ct}vt.nextZ=null,ln*=2}while(Pt>1)}(_e)}(o,p,y,C);for(var z,Q,W=o;o.prev!==o.next;)if(z=o.prev,Q=o.next,C?sp(o,p,y,C):ny(o))n.push(z.i/a|0),n.push(o.i/a|0),n.push(Q.i/a|0),AA(o),o=Q.next,W=Q.next;else if((o=Q)===W){S?S===1?wh(o=iy(Ms(o),n,a),n,a,p,y,C,2):S===2&&ry(o,n,a,p,y,C):wh(Ms(o),n,a,p,y,C,1);break}}}function ny(o){var n=o.prev,a=o,p=o.next;if(Ys(n,a,p)>=0)return!1;for(var y=n.x,C=a.x,S=p.x,z=n.y,Q=a.y,W=p.y,J=y<C?y<S?y:S:C<S?C:S,ie=z<Q?z<W?z:W:Q<W?Q:W,se=y>C?y>S?y:S:C>S?C:S,fe=z>Q?z>W?z:W:Q>W?Q:W,_e=p.next;_e!==n;){if(_e.x>=J&&_e.x<=se&&_e.y>=ie&&_e.y<=fe&&NA(y,z,C,Q,S,W,_e.x,_e.y)&&Ys(_e.prev,_e,_e.next)>=0)return!1;_e=_e.next}return!0}function sp(o,n,a,p){var y=o.prev,C=o,S=o.next;if(Ys(y,C,S)>=0)return!1;for(var z=y.x,Q=C.x,W=S.x,J=y.y,ie=C.y,se=S.y,fe=z<Q?z<W?z:W:Q<W?Q:W,_e=J<ie?J<se?J:se:ie<se?ie:se,Me=z>Q?z>W?z:W:Q>W?Q:W,Ve=J>ie?J>se?J:se:ie>se?ie:se,ut=dm(fe,_e,n,a,p),Ct=dm(Me,Ve,n,a,p),ht=o.prevZ,vt=o.nextZ;ht&&ht.z>=ut&&vt&&vt.z<=Ct;){if(ht.x>=fe&&ht.x<=Me&&ht.y>=_e&&ht.y<=Ve&&ht!==y&&ht!==S&&NA(z,J,Q,ie,W,se,ht.x,ht.y)&&Ys(ht.prev,ht,ht.next)>=0||(ht=ht.prevZ,vt.x>=fe&&vt.x<=Me&&vt.y>=_e&&vt.y<=Ve&&vt!==y&&vt!==S&&NA(z,J,Q,ie,W,se,vt.x,vt.y)&&Ys(vt.prev,vt,vt.next)>=0))return!1;vt=vt.nextZ}for(;ht&&ht.z>=ut;){if(ht.x>=fe&&ht.x<=Me&&ht.y>=_e&&ht.y<=Ve&&ht!==y&&ht!==S&&NA(z,J,Q,ie,W,se,ht.x,ht.y)&&Ys(ht.prev,ht,ht.next)>=0)return!1;ht=ht.prevZ}for(;vt&&vt.z<=Ct;){if(vt.x>=fe&&vt.x<=Me&&vt.y>=_e&&vt.y<=Ve&&vt!==y&&vt!==S&&NA(z,J,Q,ie,W,se,vt.x,vt.y)&&Ys(vt.prev,vt,vt.next)>=0)return!1;vt=vt.nextZ}return!0}function iy(o,n,a){var p=o;do{var y=p.prev,C=p.next.next;!ap(y,C)&&Cg(y,p,p.next,C)&&Cf(y,C)&&Cf(C,y)&&(n.push(y.i/a|0),n.push(p.i/a|0),n.push(C.i/a|0),AA(p),AA(p.next),p=o=C),p=p.next}while(p!==o);return Ms(p)}function ry(o,n,a,p,y,C){var S=o;do{for(var z=S.next.next;z!==S.prev;){if(S.i!==z.i&&Wu(S,z)){var Q=Bg(S,z);return S=Ms(S,S.next),Q=Ms(Q,Q.next),wh(S,n,a,p,y,C,0),void wh(Q,n,a,p,y,C,0)}z=z.next}S=S.next}while(S!==o)}function oy(o,n){return o.x-n.x}function bg(o,n){var a=function(y,C){var S,z=C,Q=y.x,W=y.y,J=-1/0;do{if(W<=z.y&&W>=z.next.y&&z.next.y!==z.y){var ie=z.x+(W-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(ie<=Q&&ie>J&&(J=ie,S=z.x<z.next.x?z:z.next,ie===Q))return S}z=z.next}while(z!==C);if(!S)return null;var se,fe=S,_e=S.x,Me=S.y,Ve=1/0;z=S;do Q>=z.x&&z.x>=_e&&Q!==z.x&&NA(W<Me?Q:J,W,_e,Me,W<Me?J:Q,W,z.x,z.y)&&(se=Math.abs(W-z.y)/(Q-z.x),Cf(z,y)&&(se<Ve||se===Ve&&(z.x>S.x||z.x===S.x&&hm(S,z)))&&(S=z,Ve=se)),z=z.next;while(z!==fe);return S}(o,n);if(!a)return n;var p=Bg(a,o);return Ms(p,p.next),Ms(a,a.next)}function hm(o,n){return Ys(o.prev,o,n.prev)<0&&Ys(n.next,o,o.next)<0}function dm(o,n,a,p,y){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*y|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-p)*y|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function wg(o){var n=o,a=o;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==o);return a}function NA(o,n,a,p,y,C,S,z){return(y-S)*(n-z)>=(o-S)*(C-z)&&(o-S)*(p-z)>=(a-S)*(n-z)&&(a-S)*(C-z)>=(y-S)*(p-z)}function Wu(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(a,p){var y=a;do{if(y.i!==a.i&&y.next.i!==a.i&&y.i!==p.i&&y.next.i!==p.i&&Cg(y,y.next,a,p))return!0;y=y.next}while(y!==a);return!1}(o,n)&&(Cf(o,n)&&Cf(n,o)&&function(a,p){var y=a,C=!1,S=(a.x+p.x)/2,z=(a.y+p.y)/2;do y.y>z!=y.next.y>z&&y.next.y!==y.y&&S<(y.next.x-y.x)*(z-y.y)/(y.next.y-y.y)+y.x&&(C=!C),y=y.next;while(y!==a);return C}(o,n)&&(Ys(o.prev,o,n.prev)||Ys(o,n.prev,n))||ap(o,n)&&Ys(o.prev,o,o.next)>0&&Ys(n.prev,n,n.next)>0)}function Ys(o,n,a){return(n.y-o.y)*(a.x-n.x)-(n.x-o.x)*(a.y-n.y)}function ap(o,n){return o.x===n.x&&o.y===n.y}function Cg(o,n,a,p){var y=cp(Ys(o,n,a)),C=cp(Ys(o,n,p)),S=cp(Ys(a,p,o)),z=cp(Ys(a,p,n));return y!==C&&S!==z||!(y!==0||!lp(o,a,n))||!(C!==0||!lp(o,p,n))||!(S!==0||!lp(a,o,p))||!(z!==0||!lp(a,n,p))}function lp(o,n,a){return n.x<=Math.max(o.x,a.x)&&n.x>=Math.min(o.x,a.x)&&n.y<=Math.max(o.y,a.y)&&n.y>=Math.min(o.y,a.y)}function cp(o){return o>0?1:o<0?-1:0}function Cf(o,n){return Ys(o.prev,o,o.next)<0?Ys(o,n,o.next)>=0&&Ys(o,o.prev,n)>=0:Ys(o,n,o.prev)<0||Ys(o,o.next,n)<0}function Bg(o,n){var a=new Bf(o.i,o.x,o.y),p=new Bf(n.i,n.x,n.y),y=o.next,C=n.prev;return o.next=n,n.prev=o,a.next=y,y.prev=a,p.next=a,a.prev=p,C.next=p,p.prev=C,p}function Tg(o,n,a,p){var y=new Bf(o,n,a);return p?(y.next=p.next,y.prev=p,p.next.prev=y,p.next=y):(y.prev=y,y.next=y),y}function AA(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Bf(o,n,a){this.i=o,this.x=n,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function QA(o,n,a,p){for(var y=0,C=n,S=a-p;C<a;C+=p)y+=(o[S]-o[C])*(o[C+1]+o[S+1]),S=C;return y}vg.exports=um,vg.exports.default=um,um.deviation=function(o,n,a,p){var y=n&&n.length,C=Math.abs(QA(o,0,y?n[0]*a:o.length,a));if(y)for(var S=0,z=n.length;S<z;S++)C-=Math.abs(QA(o,n[S]*a,S<z-1?n[S+1]*a:o.length,a));var Q=0;for(S=0;S<p.length;S+=3){var W=p[S]*a,J=p[S+1]*a,ie=p[S+2]*a;Q+=Math.abs((o[W]-o[ie])*(o[J+1]-o[W+1])-(o[W]-o[J])*(o[ie+1]-o[W+1]))}return C===0&&Q===0?0:Math.abs((Q-C)/C)},um.flatten=function(o){for(var n=o[0][0].length,a={vertices:[],holes:[],dimensions:n},p=0,y=0;y<o.length;y++){for(var C=0;C<o[y].length;C++)for(var S=0;S<n;S++)a.vertices.push(o[y][C][S]);y>0&&a.holes.push(p+=o[y-1].length)}return a};var up=Ee(vg.exports);function i0(o,n,a,p,y){A(o,n,a||0,p||o.length-1,y||m)}function A(o,n,a,p,y){for(;p>a;){if(p-a>600){var C=p-a+1,S=n-a+1,z=Math.log(C),Q=.5*Math.exp(2*z/3),W=.5*Math.sqrt(z*Q*(C-Q)/C)*(S-C/2<0?-1:1);A(o,n,Math.max(a,Math.floor(n-S*Q/C+W)),Math.min(p,Math.floor(n+(C-S)*Q/C+W)),y)}var J=o[n],ie=a,se=p;for(c(o,a,n),y(o[p],J)>0&&c(o,a,p);ie<se;){for(c(o,ie,se),ie++,se--;y(o[ie],J)<0;)ie++;for(;y(o[se],J)>0;)se--}y(o[a],J)===0?c(o,a,se):c(o,++se,p),se<=n&&(a=se+1),n<=se&&(p=se-1)}}function c(o,n,a){var p=o[n];o[n]=o[a],o[a]=p}function m(o,n){return o<n?-1:o>n?1:0}function B(o,n){const a=o.length;if(a<=1)return[o];const p=[];let y,C;for(let S=0;S<a;S++){const z=nr(o[S]);z!==0&&(o[S].area=Math.abs(z),C===void 0&&(C=z<0),C===z<0?(y&&p.push(y),y=[o[S]]):y.push(o[S]))}if(y&&p.push(y),n>1)for(let S=0;S<p.length;S++)p[S].length<=n||(i0(p[S],n,1,p[S].length-1,D),p[S]=p[S].slice(0,n));return p}function D(o,n){return n.area-o.area}function O(o,n,a){const p=a.patternDependencies;let y=!1;for(const C of n){const S=C.paint.get(`${o}-pattern`);S.isConstant()||(y=!0);const z=S.constantOr(null);z&&(y=!0,p[z]=!0)}return y}function H(o,n,a,p,y){const C=y.patternDependencies;for(const S of n){const z=S.paint.get(`${o}-pattern`).value;if(z.kind!=="constant"){let Q=z.evaluate({zoom:p},a,{},y.availableImages);Q=Q&&Q.name?Q.name:Q,C[Q]=!0,a.patterns[S.id]=Q}}return a}class Y{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Nn,this.indexArray=new Yi,this.indexArray2=new Oa,this.programConfigurations=new ns(n.layers,n.zoom),this.segments=new sa,this.segments2=new sa,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.projection=n.projection}populate(n,a,p,y){this.hasPattern=O("fill",this.layers,a);const C=this.layers[0].layout.get("fill-sort-key"),S=[];for(const{feature:z,id:Q,index:W,sourceLayerIndex:J}of n){const ie=this.layers[0]._featureFilter.needGeometry,se=RA(z,ie);if(!this.layers[0]._featureFilter.filter(new ee(this.zoom),se,p))continue;const fe=C?C.evaluate(se,{},p,a.availableImages):void 0,_e={id:Q,properties:z.properties,type:z.type,sourceLayerIndex:J,index:W,geometry:ie?se.geometry:Sd(z,p,y),patterns:{},sortKey:fe};S.push(_e)}C&&S.sort((z,Q)=>z.sortKey-Q.sortKey);for(const z of S){const{geometry:Q,index:W,sourceLayerIndex:J}=z;if(this.hasPattern){const ie=H("fill",this.layers,z,this.zoom,a);this.patternFeatures.push(ie)}else this.addFeature(z,Q,W,p,{},a.availableImages);a.featureIndex.insert(n[W].feature,Q,W,J,this.index)}}update(n,a,p,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,p,y)}addFeatures(n,a,p,y,C){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,a,p,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,n0),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,p,y,C,S=[]){for(const z of B(a,500)){let Q=0;for(const _e of z)Q+=_e.length;const W=this.segments.prepareSegment(Q,this.layoutVertexArray,this.indexArray),J=W.vertexLength,ie=[],se=[];for(const _e of z){if(_e.length===0)continue;_e!==z[0]&&se.push(ie.length/2);const Me=this.segments2.prepareSegment(_e.length,this.layoutVertexArray,this.indexArray2),Ve=Me.vertexLength;this.layoutVertexArray.emplaceBack(_e[0].x,_e[0].y),this.indexArray2.emplaceBack(Ve+_e.length-1,Ve),ie.push(_e[0].x),ie.push(_e[0].y);for(let ut=1;ut<_e.length;ut++)this.layoutVertexArray.emplaceBack(_e[ut].x,_e[ut].y),this.indexArray2.emplaceBack(Ve+ut-1,Ve+ut),ie.push(_e[ut].x),ie.push(_e[ut].y);Me.vertexLength+=_e.length,Me.primitiveLength+=_e.length}const fe=up(ie,se);for(let _e=0;_e<fe.length;_e+=3)this.indexArray.emplaceBack(J+fe[_e],J+fe[_e+1],J+fe[_e+2]);W.vertexLength+=Q,W.primitiveLength+=fe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,C,S,y)}}yn(Y,"FillBucket",{omit:["layers","patternFeatures"]});const re=new At({"fill-sort-key":new Ye(hn.layout_fill["fill-sort-key"])});var de={paint:new At({"fill-antialias":new Be(hn.paint_fill["fill-antialias"]),"fill-opacity":new Ye(hn.paint_fill["fill-opacity"]),"fill-color":new Ye(hn.paint_fill["fill-color"]),"fill-outline-color":new Ye(hn.paint_fill["fill-outline-color"]),"fill-translate":new Be(hn.paint_fill["fill-translate"]),"fill-translate-anchor":new Be(hn.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ye(hn.paint_fill["fill-pattern"])}),layout:re};const be=Nt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Le=Nt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),$e=Nt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Ge}=be;var Ze={},St=xt,wt=Yt;function Yt(o,n,a,p,y){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=p,this._values=y,o.readFields(pn,this,n)}function pn(o,n,a){o==1?n.id=a.readVarint():o==2?function(p,y){for(var C=p.readVarint()+p.pos;p.pos<C;){var S=y._keys[p.readVarint()],z=y._values[p.readVarint()];y.properties[S]=z}}(a,n):o==3?n.type=a.readVarint():o==4&&(n._geometry=a.pos)}function Zt(o){for(var n,a,p=0,y=0,C=o.length,S=C-1;y<C;S=y++)p+=((a=o[S]).x-(n=o[y]).x)*(n.y+a.y);return p}Yt.types=["Unknown","Point","LineString","Polygon"],Yt.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,a=o.readVarint()+o.pos,p=1,y=0,C=0,S=0,z=[];o.pos<a;){if(y<=0){var Q=o.readVarint();p=7&Q,y=Q>>3}if(y--,p===1||p===2)C+=o.readSVarint(),S+=o.readSVarint(),p===1&&(n&&z.push(n),n=[]),n.push(new St(C,S));else{if(p!==7)throw new Error("unknown command "+p);n&&n.push(n[0].clone())}}return n&&z.push(n),z},Yt.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,a=1,p=0,y=0,C=0,S=1/0,z=-1/0,Q=1/0,W=-1/0;o.pos<n;){if(p<=0){var J=o.readVarint();a=7&J,p=J>>3}if(p--,a===1||a===2)(y+=o.readSVarint())<S&&(S=y),y>z&&(z=y),(C+=o.readSVarint())<Q&&(Q=C),C>W&&(W=C);else if(a!==7)throw new Error("unknown command "+a)}return[S,Q,z,W]},Yt.prototype.toGeoJSON=function(o,n,a){var p,y,C=this.extent*Math.pow(2,a),S=this.extent*o,z=this.extent*n,Q=this.loadGeometry(),W=Yt.types[this.type];function J(fe){for(var _e=0;_e<fe.length;_e++){var Me=fe[_e];fe[_e]=[360*(Me.x+S)/C-180,360/Math.PI*Math.atan(Math.exp((180-360*(Me.y+z)/C)*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(p=0;p<Q.length;p++)ie[p]=Q[p][0];J(Q=ie);break;case 2:for(p=0;p<Q.length;p++)J(Q[p]);break;case 3:for(Q=function(fe){var _e=fe.length;if(_e<=1)return[fe];for(var Me,Ve,ut=[],Ct=0;Ct<_e;Ct++){var ht=Zt(fe[Ct]);ht!==0&&(Ve===void 0&&(Ve=ht<0),Ve===ht<0?(Me&&ut.push(Me),Me=[fe[Ct]]):Me.push(fe[Ct]))}return Me&&ut.push(Me),ut}(Q),p=0;p<Q.length;p++)for(y=0;y<Q[p].length;y++)J(Q[p][y])}Q.length===1?Q=Q[0]:W="Multi"+W;var se={type:"Feature",geometry:{type:W,coordinates:Q},properties:this.properties};return"id"in this&&(se.id=this.id),se};var dn=wt,Gn=Qn;function Qn(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(Ni,this,n),this.length=this._features.length}function Ni(o,n,a){o===15?n.version=a.readVarint():o===1?n.name=a.readString():o===5?n.extent=a.readVarint():o===2?n._features.push(a.pos):o===3?n._keys.push(a.readString()):o===4&&n._values.push(function(p){for(var y=null,C=p.readVarint()+p.pos;p.pos<C;){var S=p.readVarint()>>3;y=S===1?p.readString():S===2?p.readFloat():S===3?p.readDouble():S===4?p.readVarint64():S===5?p.readVarint():S===6?p.readSVarint():S===7?p.readBoolean():null}return y}(a))}Qn.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new dn(this._pbf,n,this.extent,this._keys,this._values)};var Vi=Gn;function Li(o,n,a){if(o===3){var p=new Vi(a,a.readVarint()+a.pos);p.length&&(n[p.name]=p)}}var Ci=Ze.VectorTile=function(o,n){this.layers=o.readFields(Li,{},n)},_i=Ze.VectorTileFeature=wt;function Ei(o,n,a,p){const y=[],C=p===0?(S,z,Q,W,J,ie)=>{S.push(new Xe(ie,Q+(ie-z)/(W-z)*(J-Q)))}:(S,z,Q,W,J,ie)=>{S.push(new Xe(z+(ie-Q)/(J-Q)*(W-z),ie))};for(const S of o){const z=[];for(const Q of S){if(Q.length<=2)continue;const W=[];for(let se=0;se<Q.length-1;se++){const fe=Q[se].x,_e=Q[se].y,Me=Q[se+1].x,Ve=Q[se+1].y,ut=p===0?fe:_e,Ct=p===0?Me:Ve;ut<n?Ct>n&&C(W,fe,_e,Me,Ve,n):ut>a?Ct<a&&C(W,fe,_e,Me,Ve,a):W.push(Q[se]),Ct<n&&ut>=n&&C(W,fe,_e,Me,Ve,n),Ct>a&&ut<=a&&C(W,fe,_e,Me,Ve,a)}let J=Q[Q.length-1];const ie=p===0?J.x:J.y;ie>=n&&ie<=a&&W.push(J),W.length&&(J=W[W.length-1],W[0].x===J.x&&W[0].y===J.y||W.push(W[0]),z.push(W))}z.length&&y.push(z)}return y}Ze.VectorTileLayer=Gn;const Ii=_i.types,ci=Math.pow(2,13);function dr(o,n,a,p,y,C,S,z){o.emplaceBack((n<<1)+S,(a<<1)+C,(Math.floor(p*ci)<<1)+y,Math.round(z))}function Ji(o,n,a){o.emplaceBack(n.x,n.y,n.z,a[0]*16384,a[1]*16384,a[2]*16384)}class Co{constructor(){this.acc=new Xe(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Xe(n.x,n.y),this.max=new Xe(n.x,n.y))}append(n,a){this.currentPolyCount.edges++,this.acc._add(n);const p=this.min,y=this.max;n.x<p.x?p.x=n.x:n.x>y.x&&(y.x=n.x),n.y<p.y?p.y=n.y:n.y>y.y&&(y.y=n.y),((n.x===0||n.x===Ar)&&n.x===a.x)!=((n.y===0||n.y===Ar)&&n.y===a.y)&&this.processBorderOverlap(n,a),a.x<0!=n.x<0&&this.addBorderIntersection(0,lo(a.y,n.y,(0-a.x)/(n.x-a.x))),a.x>Ar!=n.x>Ar&&this.addBorderIntersection(1,lo(a.y,n.y,(Ar-a.x)/(n.x-a.x))),a.y<0!=n.y<0&&this.addBorderIntersection(2,lo(a.x,n.x,(0-a.y)/(n.y-a.y))),a.y>Ar!=n.y>Ar&&this.addBorderIntersection(3,lo(a.x,n.x,(Ar-a.y)/(n.y-a.y)))}addBorderIntersection(n,a){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const p=this.borders[n];a<p[0]&&(p[0]=a),a>p[1]&&(p[1]=a)}processBorderOverlap(n,a){if(n.x===a.x){if(n.y===a.y)return;const p=n.x===0?0:1;this.addBorderIntersection(p,a.y),this.addBorderIntersection(p,n.y)}else{const p=n.y===0?2:3;this.addBorderIntersection(p,a.x),this.addBorderIntersection(p,n.x)}}centroid(){const n=this.polyCount.reduce((a,p)=>a+p.edges,0);return n!==0?this.acc.div(n)._round():new Xe(0,0)}span(){return new Xe(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,a)=>n+ +(a[0]!==Number.MAX_VALUE),0)}}class ys{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new Pn,this.centroidVertexArray=new Bu,this.indexArray=new Yi,this.programConfigurations=new ns(n.layers,n.zoom),this.segments=new sa,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.enableTerrain=n.enableTerrain}populate(n,a,p,y){this.features=[],this.hasPattern=O("fill-extrusion",this.layers,a),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(C){const S=Math.exp(Math.PI*(1-C.y/(1<<C.z)*2));return 80150034*S/(S*S+1)/Ar/(1<<C.z)}(p),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:C,id:S,index:z,sourceLayerIndex:Q}of n){const W=this.layers[0]._featureFilter.needGeometry,J=RA(C,W);if(!this.layers[0]._featureFilter.filter(new ee(this.zoom),J,p))continue;const ie={id:S,sourceLayerIndex:Q,index:z,geometry:W?J.geometry:Sd(C,p,y),properties:C.properties,type:C.type,patterns:{}},se=this.layoutVertexArray.length;this.hasPattern?this.features.push(H("fill-extrusion",this.layers,ie,this.zoom,a)):this.addFeature(ie,ie.geometry,z,p,{},a.availableImages,y),a.featureIndex.insert(C,ie.geometry,z,Q,this.index,se)}this.sortBorders()}addFeatures(n,a,p,y,C){for(const S of this.features){const{geometry:z}=S;this.addFeature(S,z,S.index,a,p,y,C)}this.sortBorders()}update(n,a,p,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,p,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ge),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,$e.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Le.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,p,y,C,S,z){const Q=[new Xe(0,0),new Xe(Ar,Ar)],W=z.projection,J=W.name==="globe",ie=this.enableTerrain&&!J?new Co:null,se=Ii[n.type]==="Polygon";J&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Yn);const fe=B(a,500);for(let ut=fe.length-1;ut>=0;ut--){const Ct=fe[ut];(Ct.length===0||(_e=Ct[0]).every(ht=>ht.x<=0)||_e.every(ht=>ht.x>=Ar)||_e.every(ht=>ht.y<=0)||_e.every(ht=>ht.y>=Ar))&&fe.splice(ut,1)}var _e;let Me;if(J)Me=$s(fe,Q,y);else{Me=[];for(const ut of fe)Me.push({polygon:ut,bounds:Q})}const Ve=se?this.edgeRadius:0;for(const{polygon:ut,bounds:Ct}of Me){let ht=0,vt=0;for(const Lt of ut)se&&!Lt[0].equals(Lt[Lt.length-1])&&Lt.push(Lt[0]),vt+=se?Lt.length-1:Lt.length;const Pt=this.segments.prepareSegment((se?5:4)*vt,this.layoutVertexArray,this.indexArray);if(se){const Lt=[],An=[];ht=Pt.vertexLength;for(const Ln of ut){let ai,vn;Ln.length&&Ln!==ut[0]&&An.push(Lt.length/2),ai=Ln[1].sub(Ln[0])._perp()._unit();for(let $n=1;$n<Ln.length;$n++){const jn=Ln[$n],ti=Ln[$n===Ln.length-1?1:$n+1];let{x:ui,y:En}=jn;if(Ve){vn=ti.sub(jn)._perp()._unit();const Si=ai.add(vn)._unit(),Wi=Ve*Math.min(4,1/(ai.x*Si.x+ai.y*Si.y));ui+=Wi*Si.x,En+=Wi*Si.y,ai=vn}dr(this.layoutVertexArray,ui,En,0,0,1,1,0),Pt.vertexLength++,Lt.push(jn.x,jn.y),J&&Ji(this.layoutVertexExtArray,W.projectTilePoint(ui,En,y),W.upVector(y,ui,En))}}const ln=up(Lt,An);for(let Ln=0;Ln<ln.length;Ln+=3)this.indexArray.emplaceBack(ht+ln[Ln],ht+ln[Ln+2],ht+ln[Ln+1]),Pt.primitiveLength++}for(const Lt of ut){ie&&Lt.length&&ie.startRing(Lt[0]);let An,ln,Ln,ai=Lt.length>4&&Ma(Lt[Lt.length-2],Lt[0],Lt[1]),vn=Ve?Ya(Lt[Lt.length-2],Lt[0],Lt[1],Ve):0;ln=Lt[1].sub(Lt[0])._perp()._unit();let $n=!0;for(let jn=1,ti=0;jn<Lt.length;jn++){let ui=Lt[jn-1],En=Lt[jn];const Si=Lt[jn===Lt.length-1?1:jn+1];if(ie&&se&&ie.currentPolyCount.top++,Il(En,ui,Ct)){Ve&&(ln=Si.sub(En)._perp()._unit(),$n=!$n);continue}ie&&ie.append(En,ui);const Wi=En.sub(ui)._perp(),ki=Wi.x/(Math.abs(Wi.x)+Math.abs(Wi.y)),_o=Wi.y>0?1:0,hi=ui.dist(En);if(ti+hi>32768&&(ti=0),Ve){Ln=Si.sub(En)._perp()._unit();let vo=Mu(ui,En,Si,Qs(ln,Ln),Ve);isNaN(vo)&&(vo=0);const Sr=En.sub(ui)._unit();ui=ui.add(Sr.mult(vn))._round(),En=En.add(Sr.mult(-vo))._round(),vn=vo,ln=Ln}const vr=Pt.vertexLength,yo=Lt.length>4&&Ma(ui,En,Si);let cs=Ja(ti,ai,$n);if(dr(this.layoutVertexArray,ui.x,ui.y,ki,_o,0,0,cs),dr(this.layoutVertexArray,ui.x,ui.y,ki,_o,0,1,cs),ti+=hi,cs=Ja(ti,yo,!$n),ai=yo,dr(this.layoutVertexArray,En.x,En.y,ki,_o,0,0,cs),dr(this.layoutVertexArray,En.x,En.y,ki,_o,0,1,cs),Pt.vertexLength+=4,this.indexArray.emplaceBack(vr+0,vr+1,vr+2),this.indexArray.emplaceBack(vr+1,vr+3,vr+2),Pt.primitiveLength+=2,Ve){const vo=ht+(jn===1?Lt.length-2:jn-2),Sr=jn===1?ht:vo+1;if(this.indexArray.emplaceBack(vr+1,vo,vr+3),this.indexArray.emplaceBack(vo,Sr,vr+3),Pt.primitiveLength+=2,An===void 0&&(An=vr),!Il(Si,Lt[jn],Ct)){const aa=jn===Lt.length-1?An:Pt.vertexLength;this.indexArray.emplaceBack(vr+2,vr+3,aa),this.indexArray.emplaceBack(vr+3,aa+1,aa),this.indexArray.emplaceBack(vr+3,Sr,aa+1),Pt.primitiveLength+=3}$n=!$n}if(J){const vo=this.layoutVertexExtArray,Sr=W.projectTilePoint(ui.x,ui.y,y),aa=W.projectTilePoint(En.x,En.y,y),Bo=W.upVector(y,ui.x,ui.y),To=W.upVector(y,En.x,En.y);Ji(vo,Sr,Bo),Ji(vo,Sr,Bo),Ji(vo,aa,To),Ji(vo,aa,To)}}se&&(ht+=Lt.length-1)}}if(ie&&ie.polyCount.length>0){if(ie.borders){ie.vertexArrayOffset=this.centroidVertexArray.length;const ut=ie.borders,Ct=this.featuresOnBorder.push(ie)-1;for(let ht=0;ht<4;ht++)ut[ht][0]!==Number.MAX_VALUE&&this.borders[ht].push(Ct)}this.encodeCentroid(ie.borders?void 0:ie.centroid(),ie)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,C,S,y)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((a,p)=>this.featuresOnBorder[a].borders[n][0]-this.featuresOnBorder[p].borders[n][0])}encodeCentroid(n,a,p=!0){let y,C;if(n)if(n.y!==0){const z=a.span()._mult(this.tileToMeter);y=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(z.x/10)),C=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(z.y/10))}else y=Math.ceil(7*(n.x+450)),C=0;else y=0,C=+p;let S=p?this.centroidVertexArray.length:a.vertexArrayOffset;for(const z of a.polyCount){p&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*z.edges+z.top);for(let Q=0;Q<z.top;Q++)this.centroidVertexArray.emplace(S++,y,C);for(let Q=0;Q<2*z.edges;Q++)this.centroidVertexArray.emplace(S++,0,C),this.centroidVertexArray.emplace(S++,y,C)}}}function Qs(o,n){const a=o.add(n)._unit();return o.x*a.x+o.y*a.y}function Ya(o,n,a,p){const y=n.sub(o)._perp()._unit(),C=a.sub(n)._perp()._unit();return Mu(o,n,a,Qs(y,C),p)}function Mu(o,n,a,p,y){const C=Math.sqrt(1-p*p);return Math.min(o.dist(n)/3,n.dist(a)/3,y*C/p)}function Il(o,n,a){return o.x<a[0].x&&n.x<a[0].x||o.x>a[1].x&&n.x>a[1].x||o.y<a[0].y&&n.y<a[0].y||o.y>a[1].y&&n.y>a[1].y}function Ma(o,n,a){if(o.x<0||o.x>=Ar||n.x<0||n.x>=Ar||a.x<0||a.x>=Ar)return!1;const p=a.sub(n),y=p.perp(),C=o.sub(n);return(p.x*C.x+p.y*C.y)/Math.sqrt((p.x*p.x+p.y*p.y)*(C.x*C.x+C.y*C.y))>-.866&&y.x*C.x+y.y*C.y<0}function Ja(o,n,a){const p=n?2|o:-3&o;return a?1|p:-2&p}function Ml(){const o=Math.PI/32,n=Math.tan(o),a=nd;return a*Math.sqrt(1+2*n*n)-a}function $s(o,n,a){const p=1<<a.z,y=Iu(a.x/p),C=Iu((a.x+1)/p),S=Al(a.y/p),z=Al((a.y+1)/p);return function(Q,W,J,ie,se=0,fe){const _e=[];if(!Q.length||!J||!ie)return _e;const Me=(Lt,An)=>{for(const ln of Lt)_e.push({polygon:ln,bounds:An})},Ve=Math.ceil(Math.log2(J)),ut=Math.ceil(Math.log2(ie)),Ct=Ve-ut,ht=[];for(let Lt=0;Lt<Math.abs(Ct);Lt++)ht.push(Ct>0?0:1);for(let Lt=0;Lt<Math.min(Ve,ut);Lt++)ht.push(0),ht.push(1);let vt=Q;if(vt=Ei(vt,W[0].y-se,W[1].y+se,1),vt=Ei(vt,W[0].x-se,W[1].x+se,0),!vt.length)return _e;const Pt=[];for(ht.length?Pt.push({polygons:vt,bounds:W,depth:0}):Me(vt,W);Pt.length;){const Lt=Pt.pop(),An=Lt.depth,ln=ht[An],Ln=Lt.bounds[0],ai=Lt.bounds[1],vn=ln===0?Ln.x:Ln.y,$n=ln===0?ai.x:ai.y,jn=fe?fe(ln,vn,$n):.5*(vn+$n),ti=Ei(Lt.polygons,vn-se,jn+se,ln),ui=Ei(Lt.polygons,jn-se,$n+se,ln);if(ti.length){const En=[Ln,new Xe(ln===0?jn:ai.x,ln===1?jn:ai.y)];ht.length>An+1?Pt.push({polygons:ti,bounds:En,depth:An+1}):Me(ti,En)}if(ui.length){const En=[new Xe(ln===0?jn:Ln.x,ln===1?jn:Ln.y),ai];ht.length>An+1?Pt.push({polygons:ui,bounds:En,depth:An+1}):Me(ui,En)}}return _e}(o,n,Math.ceil((C-y)/11.25),Math.ceil((S-z)/11.25),1,(Q,W,J)=>{if(Q===0)return .5*(W+J);{const ie=Al((a.y+W/Ar)/p);return(id(.5*(Al((a.y+J/Ar)/p)+ie))*p-a.y)*Ar}})}yn(ys,"FillExtrusionBucket",{omit:["layers","features"]}),yn(Co,"PartMetadata");const lu=new At({"fill-extrusion-edge-radius":new Be(hn["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var $a={paint:new At({"fill-extrusion-opacity":new Be(hn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ye(hn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Be(hn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Be(hn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ye(hn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ye(hn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ye(hn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Be(hn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Be(hn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Be(hn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Be(hn["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:lu};function pa(o,n,a){var p=2*Math.PI*6378137/256/Math.pow(2,a);return[o*p-2*Math.PI*6378137/2,n*p-2*Math.PI*6378137/2]}class wr{constructor(n,a,p){this.z=n,this.x=a,this.y=p,this.key=Qo(0,n,n,a,p)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a){const p=function(C,S,z){var Q=pa(256*C,256*(S=Math.pow(2,z)-S-1),z),W=pa(256*(C+1),256*(S+1),z);return Q[0]+","+Q[1]+","+W[0]+","+W[1]}(this.x,this.y,this.z),y=function(C,S,z){let Q,W="";for(let J=C;J>0;J--)Q=1<<J-1,W+=(S&Q?1:0)+(z&Q?2:0);return W}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(a==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",y).replace("{bbox-epsg-3857}",p)}toString(){return`${this.z}/${this.x}/${this.y}`}}class pc{constructor(n,a){this.wrap=n,this.canonical=a,this.key=Qo(n,a.z,a.z,a.x,a.y)}}class Fo{constructor(n,a,p,y,C){this.overscaledZ=n,this.wrap=a,this.canonical=new wr(p,+y,+C),this.key=a===0&&n===p?this.canonical.key:Qo(a,n,p,y,C)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const a=this.canonical.z-n;return n>this.canonical.z?new Fo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fo(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a=!0){if(this.overscaledZ===n&&a)return this.key;if(n>this.canonical.z)return Qo(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y);{const p=this.canonical.z-n;return Qo(this.wrap*+a,n,n,this.canonical.x>>p,this.canonical.y>>p)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new Fo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,p=2*this.canonical.x,y=2*this.canonical.y;return[new Fo(a,this.wrap,a,p,y),new Fo(a,this.wrap,a,p+1,y),new Fo(a,this.wrap,a,p,y+1),new Fo(a,this.wrap,a,p+1,y+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Fo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Fo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new pc(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Qo(o,n,a,p,y){const C=1<<Math.min(a,22);let S=C*(y%C)+p%C;return o&&a<22&&(S+=C*C*((o<0?-2*o-1:2*o)%(1<<2*(22-a)))),16*(32*S+a)+(n-a)}yn(wr,"CanonicalTileID"),yn(Fo,"OverscaledTileID",{omit:["projMatrix"]});class Cs extends Xe{constructor(n,a,p){super(n,a),this.z=p}}function Bs(o,n){return o.x*n.x+o.y*n.y}function Do(o,n){if(o.length===1){let a=0;const p=n[a++];let y;for(;!y||p.equals(y);)if(y=n[a++],!y)return 1/0;for(;a<n.length;a++){const C=n[a],S=o[0],z=y.sub(p),Q=C.sub(p),W=S.sub(p),J=Bs(z,z),ie=Bs(z,Q),se=Bs(Q,Q),fe=Bs(W,z),_e=Bs(W,Q),Me=J*se-ie*ie,Ve=(se*fe-ie*_e)/Me,ut=(J*_e-ie*fe)/Me,Ct=p.z*(1-Ve-ut)+y.z*Ve+C.z*ut;if(isFinite(Ct))return Ct}return 1/0}{let a=1/0;for(const p of n)a=Math.min(a,p.z);return a}}function cu(o,n,a,p,y,C,S,z){const Q=S*y.getElevationAt(o,n,!0,!0),W=C[0]!==0,J=W?C[1]===0?S*(C[0]/7-450):S*function(ie,se,fe){const _e=Math.floor(se[0]/8),Me=Math.floor(se[1]/8),Ve=10*(se[0]-8*_e),ut=10*(se[1]-8*Me),Ct=ie.getElevationAt(_e,Me,!0,!0),ht=ie.getMeterToDEM(fe),vt=Math.floor(.5*(Ve*ht-1)),Pt=Math.floor(.5*(ut*ht-1)),Lt=ie.tileCoordToPixel(_e,Me),An=2*vt+1,ln=2*Pt+1,Ln=function(ui,En,Si,Wi,ki){return[ui.getElevationAtPixel(En,Si,!0),ui.getElevationAtPixel(En+ki,Si,!0),ui.getElevationAtPixel(En,Si+ki,!0),ui.getElevationAtPixel(En+Wi,Si+ki,!0)]}(ie,Lt.x-vt,Lt.y-Pt,An,ln),ai=Math.abs(Ln[0]-Ln[1]),vn=Math.abs(Ln[2]-Ln[3]),$n=Math.abs(Ln[0]-Ln[2])+Math.abs(Ln[1]-Ln[3]),jn=Math.min(.25,.5*ht*(ai+vn)/An),ti=Math.min(.25,.5*ht*$n/ln);return Ct+Math.max(jn*Ve,ti*ut)}(y,C,z):Q;return{base:Q+(a===0)?-1:a,top:W?Math.max(J+p,Q+a+2):Q+p}}const Jl=Nt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:mc}=Jl,Ch=Nt([{name:"a_packed",components:4,type:"Float32"}]),{members:Ku}=Ch,Wh=_i.types,gc=Math.cos(Math.PI/180*37.5);class Pc{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new fn,this.layoutVertexArray2=new Zn,this.indexArray=new Yi,this.programConfigurations=new ns(n.layers,n.zoom),this.segments=new sa,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,p,y){this.hasPattern=O("line",this.layers,a);const C=this.layers[0].layout.get("line-sort-key"),S=[];for(const{feature:J,id:ie,index:se,sourceLayerIndex:fe}of n){const _e=this.layers[0]._featureFilter.needGeometry,Me=RA(J,_e);if(!this.layers[0]._featureFilter.filter(new ee(this.zoom),Me,p))continue;const Ve=C?C.evaluate(Me,{},p):void 0,ut={id:ie,properties:J.properties,type:J.type,sourceLayerIndex:fe,index:se,geometry:_e?Me.geometry:Sd(J,p,y),patterns:{},sortKey:Ve};S.push(ut)}C&&S.sort((J,ie)=>J.sortKey-ie.sortKey);const{lineAtlas:z,featureIndex:Q}=a,W=this.addConstantDashes(z);for(const J of S){const{geometry:ie,index:se,sourceLayerIndex:fe}=J;if(W&&this.addFeatureDashes(J,z),this.hasPattern){const _e=H("line",this.layers,J,this.zoom,a);this.patternFeatures.push(_e)}else this.addFeature(J,ie,se,p,z.positions,a.availableImages);Q.insert(n[se].feature,ie,se,fe,this.index)}}addConstantDashes(n){let a=!1;for(const p of this.layers){const y=p.paint.get("line-dasharray").value,C=p.layout.get("line-cap").value;if(y.kind!=="constant"||C.kind!=="constant")a=!0;else{const S=C.value,z=y.value;if(!z)continue;n.addDash(z,S)}}return a}addFeatureDashes(n,a){const p=this.zoom;for(const y of this.layers){const C=y.paint.get("line-dasharray").value,S=y.layout.get("line-cap").value;if(C.kind==="constant"&&S.kind==="constant")continue;let z,Q;if(C.kind==="constant"){if(z=C.value,!z)continue}else z=C.evaluate({zoom:p},n);Q=S.kind==="constant"?S.value:S.evaluate({zoom:p},n),a.addDash(z,Q),n.patterns[y.id]=a.getKey(z,Q)}}update(n,a,p,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,p,y)}addFeatures(n,a,p,y,C){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,a,p,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Ku)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,mc),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,p,y,C,S){const z=this.layers[0].layout,Q=z.get("line-join").evaluate(n,{}),W=z.get("line-cap").evaluate(n,{}),J=z.get("line-miter-limit"),ie=z.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const se of a)this.addLine(se,n,Q,W,J,ie);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,C,S,y)}addLine(n,a,p,y,C,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ut=0;ut<n.length-1;ut++)this.totalDistance+=n[ut].dist(n[ut+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const z=Wh[a.type]==="Polygon";let Q=n.length;for(;Q>=2&&n[Q-1].equals(n[Q-2]);)Q--;let W=0;for(;W<Q-1&&n[W].equals(n[W+1]);)W++;if(Q<(z?3:2))return;p==="bevel"&&(C=1.05);const J=this.overscaling<=16?15*Ar/(512*this.overscaling):0,ie=this.segments.prepareSegment(10*Q,this.layoutVertexArray,this.indexArray);let se,fe,_e,Me,Ve;this.e1=this.e2=-1,z&&(se=n[Q-2],Ve=n[W].sub(se)._unit()._perp());for(let ut=W;ut<Q;ut++){if(_e=ut===Q-1?z?n[W+1]:void 0:n[ut+1],_e&&n[ut].equals(_e))continue;Ve&&(Me=Ve),se&&(fe=se),se=n[ut],Ve=_e?_e.sub(se)._unit()._perp():Me,Me=Me||Ve;let Ct=Me.add(Ve);Ct.x===0&&Ct.y===0||Ct._unit();const ht=Me.x*Ve.x+Me.y*Ve.y,vt=Ct.x*Ve.x+Ct.y*Ve.y,Pt=vt!==0?1/vt:1/0,Lt=2*Math.sqrt(2-2*vt),An=vt<gc&&fe&&_e,ln=Me.x*Ve.y-Me.y*Ve.x>0;if(An&&ut>W){const vn=se.dist(fe);if(vn>2*J){const $n=se.sub(se.sub(fe)._mult(J/vn)._round());this.updateDistance(fe,$n),this.addCurrentVertex($n,Me,0,0,ie),fe=$n}}const Ln=fe&&_e;let ai=Ln?p:z?"butt":y;if(Ln&&ai==="round"&&(Pt<S?ai="miter":Pt<=2&&(ai="fakeround")),ai==="miter"&&Pt>C&&(ai="bevel"),ai==="bevel"&&(Pt>2&&(ai="flipbevel"),Pt<C&&(ai="miter")),fe&&this.updateDistance(fe,se),ai==="miter")Ct._mult(Pt),this.addCurrentVertex(se,Ct,0,0,ie);else if(ai==="flipbevel"){if(Pt>100)Ct=Ve.mult(-1);else{const vn=Pt*Me.add(Ve).mag()/Me.sub(Ve).mag();Ct._perp()._mult(vn*(ln?-1:1))}this.addCurrentVertex(se,Ct,0,0,ie),this.addCurrentVertex(se,Ct.mult(-1),0,0,ie)}else if(ai==="bevel"||ai==="fakeround"){const vn=-Math.sqrt(Pt*Pt-1),$n=ln?vn:0,jn=ln?0:vn;if(fe&&this.addCurrentVertex(se,Me,$n,jn,ie),ai==="fakeround"){const ti=Math.round(180*Lt/Math.PI/20);for(let ui=1;ui<ti;ui++){let En=ui/ti;if(En!==.5){const Wi=En-.5;En+=En*Wi*(En-1)*((1.0904+ht*(ht*(3.55645-1.43519*ht)-3.2452))*Wi*Wi+(.848013+ht*(.215638*ht-1.06021)))}const Si=Ve.sub(Me)._mult(En)._add(Me)._unit()._mult(ln?-1:1);this.addHalfVertex(se,Si.x,Si.y,!1,ln,0,ie)}}_e&&this.addCurrentVertex(se,Ve,-$n,-jn,ie)}else if(ai==="butt")this.addCurrentVertex(se,Ct,0,0,ie);else if(ai==="square"){const vn=fe?1:-1;fe||this.addCurrentVertex(se,Ct,vn,vn,ie),this.addCurrentVertex(se,Ct,0,0,ie),fe&&this.addCurrentVertex(se,Ct,vn,vn,ie)}else ai==="round"&&(fe&&(this.addCurrentVertex(se,Me,0,0,ie),this.addCurrentVertex(se,Me,1,1,ie,!0)),_e&&(this.addCurrentVertex(se,Ve,-1,-1,ie,!0),this.addCurrentVertex(se,Ve,0,0,ie)));if(An&&ut<Q-1){const vn=se.dist(_e);if(vn>2*J){const $n=se.add(_e.sub(se)._mult(J/vn)._round());this.updateDistance(se,$n),this.addCurrentVertex($n,Ve,0,0,ie),se=$n}}}}addCurrentVertex(n,a,p,y,C,S=!1){const z=a.y*y-a.x,Q=-a.y-a.x*y;this.addHalfVertex(n,a.x+a.y*p,a.y-a.x*p,S,!1,p,C),this.addHalfVertex(n,z,Q,S,!0,-y,C)}addHalfVertex({x:n,y:a},p,y,C,S,z,Q){this.layoutVertexArray.emplaceBack((n<<1)+(C?1:0),(a<<1)+(S?1:0),Math.round(63*p)+128,Math.round(63*y)+128,1+(z===0?0:z<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const W=Q.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),Q.primitiveLength++),S?this.e2=W:this.e1=W}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}yn(Pc,"LineBucket",{omit:["layers","patternFeatures"]});const Fc=new At({"line-cap":new Ye(hn.layout_line["line-cap"]),"line-join":new Ye(hn.layout_line["line-join"]),"line-miter-limit":new Be(hn.layout_line["line-miter-limit"]),"line-round-limit":new Be(hn.layout_line["line-round-limit"]),"line-sort-key":new Ye(hn.layout_line["line-sort-key"])});var Go={paint:new At({"line-opacity":new Ye(hn.paint_line["line-opacity"]),"line-color":new Ye(hn.paint_line["line-color"]),"line-translate":new Be(hn.paint_line["line-translate"]),"line-translate-anchor":new Be(hn.paint_line["line-translate-anchor"]),"line-width":new Ye(hn.paint_line["line-width"]),"line-gap-width":new Ye(hn.paint_line["line-gap-width"]),"line-offset":new Ye(hn.paint_line["line-offset"]),"line-blur":new Ye(hn.paint_line["line-blur"]),"line-dasharray":new Ye(hn.paint_line["line-dasharray"]),"line-pattern":new Ye(hn.paint_line["line-pattern"]),"line-gradient":new lt(hn.paint_line["line-gradient"]),"line-trim-offset":new Be(hn.paint_line["line-trim-offset"])}),layout:Fc};const Ts=new class extends Ye{possiblyEvaluate(o,n){return n=new ee(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(o,n)}evaluate(o,n,a,p){return n=Bn({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(o,n,a,p)}}(Go.paint.properties["line-width"].specification);function $A(o,n){return n>0?n+2*o:o}Ts.useIntegerZoom=!0;const sy=Nt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Eg=Nt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Sg=Nt([{name:"a_projected_pos",components:4,type:"Float32"}],4);Nt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Md=Nt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),ay=Nt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Nt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Am=Nt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),fm=Nt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Nt([{name:"triangle",components:3,type:"Uint16"}]),Nt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Nt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Nt([{type:"Float32",name:"offsetX"}]),Nt([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Ca=24;const Zu=128;function Ig(o,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new ee(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:y}=a;let C=0;for(;C<p.length&&p[C]<=o;)C++;C=Math.max(0,C-1);let S=C;for(;S<p.length&&p[S]<o+1;)S++;S=Math.min(p.length-1,S);const z=p[C],Q=p[S];return a.kind==="composite"?{kind:"composite",minZoom:z,maxZoom:Q,interpolationType:y}:{kind:"camera",minZoom:z,maxZoom:Q,minSize:a.evaluate(new ee(z)),maxSize:a.evaluate(new ee(Q)),interpolationType:y}}}function hp(o,{uSize:n,uSizeT:a},{lowerSize:p,upperSize:y}){return o.kind==="source"?p/Zu:o.kind==="composite"?lo(p/Zu,y/Zu,a):n}function Ld(o,n){let a=0,p=0;if(o.kind==="constant")p=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:y,minZoom:C,maxZoom:S}=o,z=y?Cn(Zs.interpolationFactor(y,n,C,S),0,1):0;o.kind==="camera"?p=lo(o.minSize,o.maxSize,z):a=z}return{uSizeT:a,uSize:p}}var qu=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Zu,evaluateSizeForFeature:hp,evaluateSizeForZoom:Ld,getSizeData:Ig});function Tf(o,n,a){return o.sections.forEach(p=>{p.text=function(y,C,S){const z=C.layout.get("text-transform").evaluate(S,{});return z==="uppercase"?y=y.toLocaleUpperCase():z==="lowercase"&&(y=y.toLocaleLowerCase()),X.applyArabicShaping&&(y=X.applyArabicShaping(y)),y}(p.text,n,a)}),o}const dp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function r0(o){return o==="︶"||o==="﹈"||o==="︸"||o==="﹄"||o==="﹂"||o==="︾"||o==="︼"||o==="︺"||o==="︘"||o==="﹀"||o==="︐"||o==="︓"||o==="︔"||o==="｀"||o==="￣"||o==="︑"||o==="︒"}function Kh(o){return o==="︵"||o==="﹇"||o==="︷"||o==="﹃"||o==="﹁"||o==="︽"||o==="︻"||o==="︹"||o==="︗"||o==="︿"}var Ap=uo,Mg=function(o,n,a,p,y){var C,S,z=8*y-p-1,Q=(1<<z)-1,W=Q>>1,J=-7,ie=a?y-1:0,se=a?-1:1,fe=o[n+ie];for(ie+=se,C=fe&(1<<-J)-1,fe>>=-J,J+=z;J>0;C=256*C+o[n+ie],ie+=se,J-=8);for(S=C&(1<<-J)-1,C>>=-J,J+=p;J>0;S=256*S+o[n+ie],ie+=se,J-=8);if(C===0)C=1-W;else{if(C===Q)return S?NaN:1/0*(fe?-1:1);S+=Math.pow(2,p),C-=W}return(fe?-1:1)*S*Math.pow(2,C-p)},_c=function(o,n,a,p,y,C){var S,z,Q,W=8*C-y-1,J=(1<<W)-1,ie=J>>1,se=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,fe=p?0:C-1,_e=p?1:-1,Me=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(z=isNaN(n)?1:0,S=J):(S=Math.floor(Math.log(n)/Math.LN2),n*(Q=Math.pow(2,-S))<1&&(S--,Q*=2),(n+=S+ie>=1?se/Q:se*Math.pow(2,1-ie))*Q>=2&&(S++,Q/=2),S+ie>=J?(z=0,S=J):S+ie>=1?(z=(n*Q-1)*Math.pow(2,y),S+=ie):(z=n*Math.pow(2,ie-1)*Math.pow(2,y),S=0));y>=8;o[a+fe]=255&z,fe+=_e,z/=256,y-=8);for(S=S<<y|z,W+=y;W>0;o[a+fe]=255&S,fe+=_e,S/=256,W-=8);o[a+fe-_e]|=128*Me};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function uo(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}uo.Varint=0,uo.Fixed64=1,uo.Bytes=2,uo.Fixed32=5;var go=4294967296,jA=1/go,Lu=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Dc(o){return o.type===uo.Bytes?o.readVarint()+o.pos:o.pos+1}function pm(o,n,a){return a?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Ds(o,n,a){var p=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(p);for(var y=a.pos-1;y>=o;y--)a.buf[y+p]=a.buf[y]}function GT(o,n){for(var a=0;a<o.length;a++)n.writeVarint(o[a])}function Cw(o,n){for(var a=0;a<o.length;a++)n.writeSVarint(o[a])}function ly(o,n){for(var a=0;a<o.length;a++)n.writeFloat(o[a])}function WT(o,n){for(var a=0;a<o.length;a++)n.writeDouble(o[a])}function KT(o,n){for(var a=0;a<o.length;a++)n.writeBoolean(o[a])}function ZT(o,n){for(var a=0;a<o.length;a++)n.writeFixed32(o[a])}function qT(o,n){for(var a=0;a<o.length;a++)n.writeSFixed32(o[a])}function XT(o,n){for(var a=0;a<o.length;a++)n.writeFixed64(o[a])}function YT(o,n){for(var a=0;a<o.length;a++)n.writeSFixed64(o[a])}function cy(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function mm(o,n,a){o[a]=n,o[a+1]=n>>>8,o[a+2]=n>>>16,o[a+3]=n>>>24}function Bw(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}uo.prototype={destroy:function(){this.buf=null},readFields:function(o,n,a){for(a=a||this.length;this.pos<a;){var p=this.readVarint(),y=p>>3,C=this.pos;this.type=7&p,o(y,n,this),this.pos===C&&this.skip(p)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=cy(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Bw(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=cy(this.buf,this.pos)+cy(this.buf,this.pos+4)*go;return this.pos+=8,o},readSFixed64:function(){var o=cy(this.buf,this.pos)+Bw(this.buf,this.pos+4)*go;return this.pos+=8,o},readFloat:function(){var o=Mg(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Mg(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,a,p=this.buf;return n=127&(a=p[this.pos++]),a<128?n:(n|=(127&(a=p[this.pos++]))<<7,a<128?n:(n|=(127&(a=p[this.pos++]))<<14,a<128?n:(n|=(127&(a=p[this.pos++]))<<21,a<128?n:function(y,C,S){var z,Q,W=S.buf;if(z=(112&(Q=W[S.pos++]))>>4,Q<128||(z|=(127&(Q=W[S.pos++]))<<3,Q<128)||(z|=(127&(Q=W[S.pos++]))<<10,Q<128)||(z|=(127&(Q=W[S.pos++]))<<17,Q<128)||(z|=(127&(Q=W[S.pos++]))<<24,Q<128)||(z|=(1&(Q=W[S.pos++]))<<31,Q<128))return pm(y,z,C);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=p[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Lu?function(a,p,y){return Lu.decode(a.subarray(p,y))}(this.buf,n,o):function(a,p,y){for(var C="",S=p;S<y;){var z,Q,W,J=a[S],ie=null,se=J>239?4:J>223?3:J>191?2:1;if(S+se>y)break;se===1?J<128&&(ie=J):se===2?(192&(z=a[S+1]))==128&&(ie=(31&J)<<6|63&z)<=127&&(ie=null):se===3?(Q=a[S+2],(192&(z=a[S+1]))==128&&(192&Q)==128&&((ie=(15&J)<<12|(63&z)<<6|63&Q)<=2047||ie>=55296&&ie<=57343)&&(ie=null)):se===4&&(Q=a[S+2],W=a[S+3],(192&(z=a[S+1]))==128&&(192&Q)==128&&(192&W)==128&&((ie=(15&J)<<18|(63&z)<<12|(63&Q)<<6|63&W)<=65535||ie>=1114112)&&(ie=null)),ie===null?(ie=65533,se=1):ie>65535&&(ie-=65536,C+=String.fromCharCode(ie>>>10&1023|55296),ie=56320|1023&ie),C+=String.fromCharCode(ie),S+=se}return C}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==uo.Bytes)return o.push(this.readVarint(n));var a=Dc(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==uo.Bytes)return o.push(this.readSVarint());var n=Dc(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==uo.Bytes)return o.push(this.readBoolean());var n=Dc(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==uo.Bytes)return o.push(this.readFloat());var n=Dc(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==uo.Bytes)return o.push(this.readDouble());var n=Dc(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==uo.Bytes)return o.push(this.readFixed32());var n=Dc(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==uo.Bytes)return o.push(this.readSFixed32());var n=Dc(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==uo.Bytes)return o.push(this.readFixed64());var n=Dc(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==uo.Bytes)return o.push(this.readSFixed64());var n=Dc(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===uo.Varint)for(;this.buf[this.pos++]>127;);else if(n===uo.Bytes)this.pos=this.readVarint()+this.pos;else if(n===uo.Fixed32)this.pos+=4;else{if(n!==uo.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),mm(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),mm(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),mm(this.buf,-1&o,this.pos),mm(this.buf,Math.floor(o*jA),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),mm(this.buf,-1&o,this.pos),mm(this.buf,Math.floor(o*jA),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,a){var p,y;if(n>=0?(p=n%4294967296|0,y=n/4294967296|0):(y=~(-n/4294967296),4294967295^(p=~(-n%4294967296))?p=p+1|0:(p=0,y=y+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(C,S,z){z.buf[z.pos++]=127&C|128,C>>>=7,z.buf[z.pos++]=127&C|128,C>>>=7,z.buf[z.pos++]=127&C|128,C>>>=7,z.buf[z.pos++]=127&C|128,z.buf[z.pos]=127&(C>>>=7)}(p,0,a),function(C,S){var z=(7&C)<<4;S.buf[S.pos++]|=z|((C>>>=3)?128:0),C&&(S.buf[S.pos++]=127&C|((C>>>=7)?128:0),C&&(S.buf[S.pos++]=127&C|((C>>>=7)?128:0),C&&(S.buf[S.pos++]=127&C|((C>>>=7)?128:0),C&&(S.buf[S.pos++]=127&C|((C>>>=7)?128:0),C&&(S.buf[S.pos++]=127&C)))))}(y,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(p,y,C){for(var S,z,Q=0;Q<y.length;Q++){if((S=y.charCodeAt(Q))>55295&&S<57344){if(!z){S>56319||Q+1===y.length?(p[C++]=239,p[C++]=191,p[C++]=189):z=S;continue}if(S<56320){p[C++]=239,p[C++]=191,p[C++]=189,z=S;continue}S=z-55296<<10|S-56320|65536,z=null}else z&&(p[C++]=239,p[C++]=191,p[C++]=189,z=null);S<128?p[C++]=S:(S<2048?p[C++]=S>>6|192:(S<65536?p[C++]=S>>12|224:(p[C++]=S>>18|240,p[C++]=S>>12&63|128),p[C++]=S>>6&63|128),p[C++]=63&S|128)}return C}(this.buf,o,this.pos);var a=this.pos-n;a>=128&&Ds(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),_c(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),_c(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,n){this.pos++;var a=this.pos;o(n,this);var p=this.pos-a;p>=128&&Ds(a,p,this),this.pos=a-1,this.writeVarint(p),this.pos+=p},writeMessage:function(o,n,a){this.writeTag(o,uo.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,GT,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,Cw,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,KT,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,ly,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,WT,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,ZT,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,qT,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,XT,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,YT,n)},writeBytesField:function(o,n){this.writeTag(o,uo.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,uo.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,uo.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,uo.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,uo.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,uo.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,uo.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,uo.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,uo.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,uo.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var uy=Ee(Ap);const o0=3;function JT(o,n,a){n.glyphs=[],o===1&&a.readMessage(eE,n)}function eE(o,n,a){if(o===3){const{id:p,bitmap:y,width:C,height:S,left:z,top:Q,advance:W}=a.readMessage(s0,{});n.glyphs.push({id:p,bitmap:new Gh({width:C+2*o0,height:S+2*o0},y),metrics:{width:C,height:S,left:z,top:Q,advance:W}})}else o===4?n.ascender=a.readSVarint():o===5&&(n.descender=a.readSVarint())}function s0(o,n,a){o===1?n.id=a.readVarint():o===2?n.bitmap=a.readBytes():o===3?n.width=a.readVarint():o===4?n.height=a.readVarint():o===5?n.left=a.readSVarint():o===6?n.top=a.readSVarint():o===7&&(n.advance=a.readVarint())}const Tw=o0;function Lg(o){let n=0,a=0;for(const S of o)n+=S.w*S.h,a=Math.max(a,S.w);o.sort((S,z)=>z.h-S.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let y=0,C=0;for(const S of o)for(let z=p.length-1;z>=0;z--){const Q=p[z];if(!(S.w>Q.w||S.h>Q.h)){if(S.x=Q.x,S.y=Q.y,C=Math.max(C,S.y+S.h),y=Math.max(y,S.x+S.w),S.w===Q.w&&S.h===Q.h){const W=p.pop();z<p.length&&(p[z]=W)}else S.h===Q.h?(Q.x+=S.w,Q.w-=S.w):S.w===Q.w?(Q.y+=S.h,Q.h-=S.h):(p.push({x:Q.x+S.w,y:Q.y,w:Q.w-S.w,h:S.h}),Q.y+=S.h,Q.h-=S.h);break}}return{w:y,h:C,fill:n/(y*C)||0}}const Xu=1;class a0{constructor(n,{pixelRatio:a,version:p,stretchX:y,stretchY:C,content:S}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=y,this.stretchY=C,this.content=S,this.version=p}get tl(){return[this.paddedRect.x+Xu,this.paddedRect.y+Xu]}get br(){return[this.paddedRect.x+this.paddedRect.w-Xu,this.paddedRect.y+this.paddedRect.h-Xu]}get displaySize(){return[(this.paddedRect.w-2*Xu)/this.pixelRatio,(this.paddedRect.h-2*Xu)/this.pixelRatio]}}class Ew{constructor(n,a){const p={},y={};this.haveRenderCallbacks=[];const C=[];this.addImages(n,p,C),this.addImages(a,y,C);const{w:S,h:z}=Lg(C),Q=new fc({width:S||1,height:z||1});for(const W in n){const J=n[W],ie=p[W].paddedRect;fc.copy(J.data,Q,{x:0,y:0},{x:ie.x+Xu,y:ie.y+Xu},J.data)}for(const W in a){const J=a[W],ie=y[W].paddedRect,se=ie.x+Xu,fe=ie.y+Xu,_e=J.data.width,Me=J.data.height;fc.copy(J.data,Q,{x:0,y:0},{x:se,y:fe},J.data),fc.copy(J.data,Q,{x:0,y:Me-1},{x:se,y:fe-1},{width:_e,height:1}),fc.copy(J.data,Q,{x:0,y:0},{x:se,y:fe+Me},{width:_e,height:1}),fc.copy(J.data,Q,{x:_e-1,y:0},{x:se-1,y:fe},{width:1,height:Me}),fc.copy(J.data,Q,{x:0,y:0},{x:se+_e,y:fe},{width:1,height:Me})}this.image=Q,this.iconPositions=p,this.patternPositions=y}addImages(n,a,p){for(const y in n){const C=n[y],S={x:0,y:0,w:C.data.width+2*Xu,h:C.data.height+2*Xu};p.push(S),a[y]=new a0(S,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(n,a){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(p=>n.hasImage(p)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in n.updatedImages)this.patchUpdatedImage(this.iconPositions[p],n.getImage(p),a),this.patchUpdatedImage(this.patternPositions[p],n.getImage(p),a)}patchUpdatedImage(n,a,p){if(!n||!a||n.version===a.version)return;n.version=a.version;const[y,C]=n.tl;p.update(a.data,void 0,{x:y,y:C})}}yn(a0,"ImagePosition"),yn(Ew,"ImageAtlas");const js={horizontal:1,vertical:2,horizontalOnly:3},Yu=-17;class kg{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const p=new kg;return p.scale=n||1,p.fontStack=a,p}static forImage(n){const a=new kg;return a.imageName=n,a}}class gm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const p=new gm;for(let y=0;y<n.sections.length;y++){const C=n.sections[y];C.image?p.addImageSection(C):p.addTextSection(C,a)}return p}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(a,p){let y="";for(let C=0;C<a.length;C++){const S=a.charCodeAt(C+1)||null,z=a.charCodeAt(C-1)||null;y+=!p&&(S&&eu(S)&&!dp[a[C+1]]||z&&eu(z)&&!dp[a[C-1]])||!dp[a[C]]?a[C]:dp[a[C]]}return y}(this.text,n)}trim(){let n=0;for(let p=0;p<this.text.length&&Pg[this.text.charCodeAt(p)];p++)n++;let a=this.text.length;for(let p=this.text.length-1;p>=0&&p>=n&&Pg[this.text.charCodeAt(p)];p--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const p=new gm;return p.text=this.text.substring(n,a),p.sectionIndex=this.sectionIndex.slice(n,a),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(kg.forText(n.scale,n.fontStack||a));const p=this.sections.length-1;for(let y=0;y<n.text.length;++y)this.sectionIndex.push(p)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void di("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(kg.forImage(a)),this.sectionIndex.push(this.sections.length-1)):di("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function l0(o,n,a,p,y,C,S,z,Q,W,J,ie,se,fe,_e){const Me=gm.fromFeature(o,y);ie===js.vertical&&Me.verticalizePunctuation(se);let Ve=[];const ut=function(Lt,An,ln,Ln,ai,vn){if(!Lt)return[];const $n=[],jn=function(Si,Wi,ki,_o,hi,vr){let yo=0;for(let cs=0;cs<Si.length();cs++){const vo=Si.getSection(cs);yo+=Sw(Si.getCharCode(cs),vo,_o,hi,Wi,vr)}return yo/Math.max(1,Math.ceil(yo/ki))}(Lt,An,ln,Ln,ai,vn),ti=Lt.text.indexOf("​")>=0;let ui=0;for(let Si=0;Si<Lt.length();Si++){const Wi=Lt.getSection(Si),ki=Lt.getCharCode(Si);if(Pg[ki]||(ui+=Sw(ki,Wi,Ln,ai,An,vn)),Si<Lt.length()-1){const _o=!((En=ki)<11904||!(qn["Bopomofo Extended"](En)||qn.Bopomofo(En)||qn["CJK Compatibility Forms"](En)||qn["CJK Compatibility Ideographs"](En)||qn["CJK Compatibility"](En)||qn["CJK Radicals Supplement"](En)||qn["CJK Strokes"](En)||qn["CJK Symbols and Punctuation"](En)||qn["CJK Unified Ideographs Extension A"](En)||qn["CJK Unified Ideographs"](En)||qn["Enclosed CJK Letters and Months"](En)||qn["Halfwidth and Fullwidth Forms"](En)||qn.Hiragana(En)||qn["Ideographic Description Characters"](En)||qn["Kangxi Radicals"](En)||qn["Katakana Phonetic Extensions"](En)||qn.Katakana(En)||qn["Vertical Forms"](En)||qn["Yi Radicals"](En)||qn["Yi Syllables"](En)));(tE[ki]||_o||Wi.imageName)&&$n.push(Lw(Si+1,ui,jn,$n,Mw(ki,Lt.getCharCode(Si+1),_o&&ti),!1))}}var En;return kw(Lw(Lt.length(),ui,jn,$n,0,!0))}(Me,W,C,n,p,fe),{processBidirectionalText:Ct,processStyledBidirectionalText:ht}=X;if(Ct&&Me.sections.length===1){const Lt=Ct(Me.toString(),ut);for(const An of Lt){const ln=new gm;ln.text=An,ln.sections=Me.sections;for(let Ln=0;Ln<An.length;Ln++)ln.sectionIndex.push(0);Ve.push(ln)}}else if(ht){const Lt=ht(Me.text,Me.sectionIndex,ut);for(const An of Lt){const ln=new gm;ln.text=An[0],ln.sectionIndex=An[1],ln.sections=Me.sections,Ve.push(ln)}}else Ve=function(Lt,An){const ln=[],Ln=Lt.text;let ai=0;for(const vn of An)ln.push(Lt.substring(ai,vn)),ai=vn;return ai<Ln.length&&ln.push(Lt.substring(ai,Ln.length)),ln}(Me,ut);const vt=[],Pt={positionedLines:vt,text:Me.toString(),top:J[1],bottom:J[1],left:J[0],right:J[0],writingMode:ie,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Lt,An,ln,Ln,ai,vn,$n,jn,ti,ui,En,Si){let Wi=0,ki=0,_o=0;const hi=jn==="right"?1:jn==="left"?0:.5;let vr=!1;for(const Bo of ai){const To=Bo.getSections();for(const Hs of To){if(Hs.imageName)continue;const Js=An[Hs.fontStack];if(Js&&(vr=Js.ascender!==void 0&&Js.descender!==void 0,!vr))break}if(!vr)break}let yo=0;for(const Bo of ai){Bo.trim();const To=Bo.getMaxScale(),Hs=(To-1)*Ca,Js={positionedGlyphs:[],lineOffset:0};Lt.positionedLines[yo]=Js;const ea=Js.positionedGlyphs;let Vs=0;if(!Bo.length()){ki+=vn,++yo;continue}let La=0,el=0;for(let Gs=0;Gs<Bo.length();Gs++){const tc=Bo.getSection(Gs),kl=Bo.getSectionIndex(Gs),ja=Bo.getCharCode(Gs);let ds=tc.scale,Pl=null,ta=null,Th=null,Fl=Ca,uu=0;const zc=!(ti===js.horizontal||!En&&!ba(ja)||En&&(Pg[ja]||(cs=ja,qn.Arabic(cs)||qn["Arabic Supplement"](cs)||qn["Arabic Extended-A"](cs)||qn["Arabic Presentation Forms-A"](cs)||qn["Arabic Presentation Forms-B"](cs))));if(tc.imageName){const Eh=Ln[tc.imageName];if(!Eh)continue;Th=tc.imageName,Lt.iconsInText=Lt.iconsInText||!0,ta=Eh.paddedRect;const Rc=Eh.displaySize;ds=ds*Ca/Si,Pl={width:Rc[0],height:Rc[1],left:Xu,top:-Tw,advance:zc?Rc[1]:Rc[0],localGlyph:!1},uu=vr?-Pl.height*ds:Yu+To*Ca-Rc[1]*ds,Fl=Pl.advance;const KA=(zc?Rc[0]:Rc[1])*ds-Ca*To;KA>0&&KA>Vs&&(Vs=KA)}else{const Eh=ln[tc.fontStack];if(!Eh)continue;Eh[ja]&&(ta=Eh[ja]);const Rc=An[tc.fontStack];if(!Rc)continue;const KA=Rc.glyphs[ja];if(!KA)continue;if(Pl=KA.metrics,Fl=ja!==8203?Ca:0,vr){const by=Rc.ascender!==void 0?Math.abs(Rc.ascender):0,T0=Rc.descender!==void 0?Math.abs(Rc.descender):0,E0=(by+T0)*ds;La<E0&&(La=E0,el=(by-T0)/2*ds),uu=-by*ds}else uu=Yu+(To-ds)*Ca}zc?(Lt.verticalizable=!0,ea.push({glyph:ja,imageName:Th,x:Wi,y:ki+uu,vertical:zc,scale:ds,localGlyph:Pl.localGlyph,fontStack:tc.fontStack,sectionIndex:kl,metrics:Pl,rect:ta}),Wi+=Fl*ds+ui):(ea.push({glyph:ja,imageName:Th,x:Wi,y:ki+uu,vertical:zc,scale:ds,localGlyph:Pl.localGlyph,fontStack:tc.fontStack,sectionIndex:kl,metrics:Pl,rect:ta}),Wi+=Pl.advance*ds+ui)}ea.length!==0&&(_o=Math.max(Wi-ui,_o),vr?u0(ea,hi,Vs,el,vn*To/2):u0(ea,hi,Vs,0,vn/2)),Wi=0;const Ll=vn*To+Vs;Js.lineOffset=Math.max(Vs,Hs),ki+=Ll,++yo}var cs;const vo=ki,{horizontalAlign:Sr,verticalAlign:aa}=c0($n);(function(Bo,To,Hs,Js,ea,Vs){const La=(To-Hs)*ea,el=-Vs*Js;for(const Ll of Bo)for(const Gs of Ll.positionedGlyphs)Gs.x+=La,Gs.y+=el})(Lt.positionedLines,hi,Sr,aa,_o,vo),Lt.top+=-aa*vo,Lt.bottom=Lt.top+vo,Lt.left+=-Sr*_o,Lt.right=Lt.left+_o,Lt.hasBaseline=vr}(Pt,n,a,p,Ve,S,z,Q,ie,W,se,_e),!function(Lt){for(const An of Lt)if(An.positionedGlyphs.length!==0)return!1;return!0}(vt)&&Pt}const Pg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},tE={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Sw(o,n,a,p,y,C){if(n.imageName){const S=p[n.imageName];return S?S.displaySize[0]*n.scale*Ca/C+y:0}{const S=a[n.fontStack],z=S&&S.glyphs[o];return z?z.metrics.advance*n.scale+y:0}}function Iw(o,n,a,p){const y=Math.pow(o-n,2);return p?o<n?y/2:2*y:y+Math.abs(a)*a}function Mw(o,n,a){let p=0;return o===10&&(p-=1e4),a&&(p+=150),o!==40&&o!==65288||(p+=50),n!==41&&n!==65289||(p+=50),p}function Lw(o,n,a,p,y,C){let S=null,z=Iw(n,a,y,C);for(const Q of p){const W=Iw(n-Q.x,a,y,C)+Q.badness;W<=z&&(S=Q,z=W)}return{index:o,x:n,priorBreak:S,badness:z}}function kw(o){return o?kw(o.priorBreak).concat(o.index):[]}function c0(o){let n=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function u0(o,n,a,p,y){if(!(n||a||p||y))return;const C=o.length-1,S=o[C],z=(S.x+S.metrics.advance*S.scale)*n;for(let Q=0;Q<=C;Q++)o[Q].x-=z,o[Q].y+=a+p+y}function Pw(o,n,a){const{horizontalAlign:p,verticalAlign:y}=c0(a),C=n[0]-o.displaySize[0]*p,S=n[1]-o.displaySize[1]*y;return{image:o,top:S,bottom:S+o.displaySize[1],left:C,right:C+o.displaySize[0]}}function Fw(o,n,a,p,y,C){const S=o.image;let z;if(S.content){const Ve=S.content,ut=S.pixelRatio||1;z=[Ve[0]/ut,Ve[1]/ut,S.displaySize[0]-Ve[2]/ut,S.displaySize[1]-Ve[3]/ut]}const Q=n.left*C,W=n.right*C;let J,ie,se,fe;a==="width"||a==="both"?(fe=y[0]+Q-p[3],ie=y[0]+W+p[1]):(fe=y[0]+(Q+W-S.displaySize[0])/2,ie=fe+S.displaySize[0]);const _e=n.top*C,Me=n.bottom*C;return a==="height"||a==="both"?(J=y[1]+_e-p[0],se=y[1]+Me+p[2]):(J=y[1]+(_e+Me-S.displaySize[1])/2,se=J+S.displaySize[1]),{image:S,top:J,right:ie,bottom:se,left:fe,collisionPadding:z}}class HA extends Xe{constructor(n,a,p,y,C){super(n,a),this.angle=y,this.z=p,C!==void 0&&(this.segment=C)}clone(){return new HA(this.x,this.y,this.z,this.angle,this.segment)}}function Dw(o,n,a,p,y){if(n.segment===void 0)return!0;let C=n,S=n.segment+1,z=0;for(;z>-a/2;){if(S--,S<0)return!1;z-=o[S].dist(C),C=o[S]}z+=o[S].dist(o[S+1]),S++;const Q=[];let W=0;for(;z<a/2;){const J=o[S],ie=o[S+1];if(!ie)return!1;let se=o[S-1].angleTo(J)-J.angleTo(ie);for(se=Math.abs((se+3*Math.PI)%(2*Math.PI)-Math.PI),Q.push({distance:z,angleDelta:se}),W+=se;z-Q[0].distance>p;)W-=Q.shift().angleDelta;if(W>y)return!1;S++,z+=J.dist(ie)}return!0}function Uw(o){let n=0;for(let a=0;a<o.length-1;a++)n+=o[a].dist(o[a+1]);return n}function fp(o,n,a){return o?.6*n*a:0}function zw(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function nE(o,n,a,p,y,C){const S=fp(a,y,C),z=zw(a,p)*C;let Q=0;const W=Uw(o)/2;for(let J=0;J<o.length-1;J++){const ie=o[J],se=o[J+1],fe=ie.dist(se);if(Q+fe>W){const _e=(W-Q)/fe,Me=lo(ie.x,se.x,_e),Ve=lo(ie.y,se.y,_e),ut=new HA(Me,Ve,0,se.angleTo(ie),J);return!S||Dw(o,ut,z,S,n)?ut:void 0}Q+=fe}}function iE(o,n,a,p,y,C,S,z,Q){const W=fp(p,C,S),J=zw(p,y),ie=J*S,se=o[0].x===0||o[0].x===Q||o[0].y===0||o[0].y===Q;return n-ie<n/4&&(n=ie+n/4),Rw(o,se?n/2*z%n:(J/2+2*C)*S*z%n,n,W,a,ie,se,!1,Q)}function Rw(o,n,a,p,y,C,S,z,Q){const W=C/2,J=Uw(o);let ie=0,se=n-a,fe=[];for(let _e=0;_e<o.length-1;_e++){const Me=o[_e],Ve=o[_e+1],ut=Me.dist(Ve),Ct=Ve.angleTo(Me);for(;se+a<ie+ut;){se+=a;const ht=(se-ie)/ut,vt=lo(Me.x,Ve.x,ht),Pt=lo(Me.y,Ve.y,ht);if(vt>=0&&vt<Q&&Pt>=0&&Pt<Q&&se-W>=0&&se+W<=J){const Lt=new HA(vt,Pt,0,Ct,_e);Lt._round(),p&&!Dw(o,Lt,C,p,y)||fe.push(Lt)}}ie+=ut}return z||fe.length||S||(fe=Rw(o,ie/2,a,p,y,C,S,!0,Q)),fe}function Ow(o,n,a,p,y){const C=[];for(let S=0;S<o.length;S++){const z=o[S];let Q;for(let W=0;W<z.length-1;W++){let J=z[W],ie=z[W+1];J.x<n&&ie.x<n||(J.x<n?J=new Xe(n,J.y+(n-J.x)/(ie.x-J.x)*(ie.y-J.y))._round():ie.x<n&&(ie=new Xe(n,J.y+(n-J.x)/(ie.x-J.x)*(ie.y-J.y))._round()),J.y<a&&ie.y<a||(J.y<a?J=new Xe(J.x+(a-J.y)/(ie.y-J.y)*(ie.x-J.x),a)._round():ie.y<a&&(ie=new Xe(J.x+(a-J.y)/(ie.y-J.y)*(ie.x-J.x),a)._round()),J.x>=p&&ie.x>=p||(J.x>=p?J=new Xe(p,J.y+(p-J.x)/(ie.x-J.x)*(ie.y-J.y))._round():ie.x>=p&&(ie=new Xe(p,J.y+(p-J.x)/(ie.x-J.x)*(ie.y-J.y))._round()),J.y>=y&&ie.y>=y||(J.y>=y?J=new Xe(J.x+(y-J.y)/(ie.y-J.y)*(ie.x-J.x),y)._round():ie.y>=y&&(ie=new Xe(J.x+(y-J.y)/(ie.y-J.y)*(ie.x-J.x),y)._round()),Q&&J.equals(Q[Q.length-1])||(Q=[J],C.push(Q)),Q.push(ie)))))}}return C}yn(HA,"Anchor");const _m=1e20;function h0(o,n,a,p,y,C,S,z,Q){for(let W=n;W<n+p;W++)Nw(o,a*C+W,C,y,S,z,Q);for(let W=a;W<a+y;W++)Nw(o,W*C+n,1,p,S,z,Q)}function Nw(o,n,a,p,y,C,S){C[0]=0,S[0]=-_m,S[1]=_m,y[0]=o[n];for(let z=1,Q=0,W=0;z<p;z++){y[z]=o[n+z*a];const J=z*z;do{const ie=C[Q];W=(y[z]-y[ie]+J-ie*ie)/(z-ie)/2}while(W<=S[Q]&&--Q>-1);Q++,C[Q]=z,S[Q]=W,S[Q+1]=_m}for(let z=0,Q=0;z<p;z++){for(;S[Q+1]<z;)Q++;const W=C[Q],J=z-W;o[n+z*a]=y[W]+J*J}}const kd=2,d0={none:0,ideographs:1,all:2};class ym{constructor(n,a,p){this.requestManager=n,this.localGlyphMode=a,this.localFontFamily=p,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,a){const p=[];for(const y in n)for(const C of n[y])p.push({stack:y,id:C});Wn(p,({stack:y,id:C},S)=>{let z=this.entries[y];z||(z=this.entries[y]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let Q=z.glyphs[C];if(Q!==void 0)return void S(null,{stack:y,id:C,glyph:Q});if(Q=this._tinySDF(z,y,C),Q)return z.glyphs[C]=Q,void S(null,{stack:y,id:C,glyph:Q});const W=Math.floor(C/256);if(256*W>65535)return void S(new Error("glyphs > 65535 not supported"));if(z.ranges[W])return void S(null,{stack:y,id:C,glyph:Q});let J=z.requests[W];J||(J=z.requests[W]=[],ym.loadGlyphRange(y,W,this.url,this.requestManager,(ie,se)=>{if(se){z.ascender=se.ascender,z.descender=se.descender;for(const fe in se.glyphs)this._doesCharSupportLocalGlyph(+fe)||(z.glyphs[+fe]=se.glyphs[+fe]);z.ranges[W]=!0}for(const fe of J)fe(ie,se);delete z.requests[W]})),J.push((ie,se)=>{ie?S(ie):se&&S(null,{stack:y,id:C,glyph:se.glyphs[C]||null})})},(y,C)=>{if(y)a(y);else if(C){const S={};for(const{stack:z,id:Q,glyph:W}of C)S[z]===void 0&&(S[z]={}),S[z].glyphs===void 0&&(S[z].glyphs={}),S[z].glyphs[Q]=W&&{id:W.id,bitmap:W.bitmap.clone(),metrics:W.metrics},S[z].ascender=this.entries[z].ascender,S[z].descender=this.entries[z].descender;a(null,S)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==d0.none&&(this.localGlyphMode===d0.all?!!this.localFontFamily:!!this.localFontFamily&&(qn["CJK Unified Ideographs"](n)||qn["Hangul Syllables"](n)||qn.Hiragana(n)||qn.Katakana(n)||qn["CJK Symbols and Punctuation"](n)))}_tinySDF(n,a,p){const y=this.localFontFamily;if(!y||!this._doesCharSupportLocalGlyph(p))return;let C=n.tinySDF;if(!C){let Me="400";/bold/i.test(a)?Me="900":/medium/i.test(a)?Me="500":/light/i.test(a)&&(Me="200"),C=n.tinySDF=new ym.TinySDF({fontFamily:y,fontWeight:Me,fontSize:24*kd,buffer:3*kd,radius:8*kd}),C.fontWeight=Me}if(this.localGlyphs[C.fontWeight][p])return this.localGlyphs[C.fontWeight][p];const S=String.fromCharCode(p),{data:z,width:Q,height:W,glyphWidth:J,glyphHeight:ie,glyphLeft:se,glyphTop:fe,glyphAdvance:_e}=C.draw(S);return this.localGlyphs[C.fontWeight][p]={id:p,bitmap:new Gh({width:Q,height:W},z),metrics:{width:J/kd,height:ie/kd,left:se/kd,top:fe/kd-27,advance:_e/kd,localGlyph:!0}}}}ym.loadGlyphRange=function(o,n,a,p,y){const C=256*n,S=C+255,z=p.transformRequest(p.normalizeGlyphsURL(a).replace("{fontstack}",o).replace("{range}",`${C}-${S}`),Xi.Glyphs);bi(z,(Q,W)=>{if(Q)y(Q);else if(W){const J={},ie=function(se){return new uy(se).readFields(JT,{})}(W);for(const se of ie.glyphs)J[se.id]=se;y(null,{glyphs:J,ascender:ie.ascender,descender:ie.descender})}})},ym.TinySDF=class{constructor({fontSize:o=24,buffer:n=3,radius:a=8,cutoff:p=.25,fontFamily:y="sans-serif",fontWeight:C="normal",fontStyle:S="normal"}={}){this.buffer=n,this.cutoff=p,this.radius=a;const z=this.size=o+4*n,Q=this._createCanvas(z),W=this.ctx=Q.getContext("2d",{willReadFrequently:!0});W.font=`${S} ${C} ${o}px ${y}`,W.textBaseline="alphabetic",W.textAlign="left",W.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(o){const n=document.createElement("canvas");return n.width=n.height=o,n}draw(o){const{width:n,actualBoundingBoxAscent:a,actualBoundingBoxDescent:p,actualBoundingBoxLeft:y,actualBoundingBoxRight:C}=this.ctx.measureText(o),S=Math.ceil(a),z=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(C-y))),Q=Math.min(this.size-this.buffer,S+Math.ceil(p)),W=z+2*this.buffer,J=Q+2*this.buffer,ie=Math.max(W*J,0),se=new Uint8ClampedArray(ie),fe={data:se,width:W,height:J,glyphWidth:z,glyphHeight:Q,glyphTop:S,glyphLeft:0,glyphAdvance:n};if(z===0||Q===0)return fe;const{ctx:_e,buffer:Me,gridInner:Ve,gridOuter:ut}=this;_e.clearRect(Me,Me,z,Q),_e.fillText(o,Me,Me+S);const Ct=_e.getImageData(Me,Me,z,Q);ut.fill(_m,0,ie),Ve.fill(0,0,ie);for(let ht=0;ht<Q;ht++)for(let vt=0;vt<z;vt++){const Pt=Ct.data[4*(ht*z+vt)+3]/255;if(Pt===0)continue;const Lt=(ht+Me)*W+vt+Me;if(Pt===1)ut[Lt]=0,Ve[Lt]=_m;else{const An=.5-Pt;ut[Lt]=An>0?An*An:0,Ve[Lt]=An<0?An*An:0}}h0(ut,0,0,W,J,W,this.f,this.v,this.z),h0(Ve,Me,Me,z,Q,W,this.f,this.v,this.z);for(let ht=0;ht<ie;ht++){const vt=Math.sqrt(ut[ht])-Math.sqrt(Ve[ht]);se[ht]=Math.round(255-255*(vt/this.radius+this.cutoff))}return fe}};const vm=Xu;function Qw(o,n,a,p){const y=[],C=o.image,S=C.pixelRatio,z=C.paddedRect.w-2*vm,Q=C.paddedRect.h-2*vm,W=o.right-o.left,J=o.bottom-o.top,ie=C.stretchX||[[0,z]],se=C.stretchY||[[0,Q]],fe=(vn,$n)=>vn+$n[1]-$n[0],_e=ie.reduce(fe,0),Me=se.reduce(fe,0),Ve=z-_e,ut=Q-Me;let Ct=0,ht=_e,vt=0,Pt=Me,Lt=0,An=Ve,ln=0,Ln=ut;if(C.content&&p){const vn=C.content;Ct=hy(ie,0,vn[0]),vt=hy(se,0,vn[1]),ht=hy(ie,vn[0],vn[2]),Pt=hy(se,vn[1],vn[3]),Lt=vn[0]-Ct,ln=vn[1]-vt,An=vn[2]-vn[0]-ht,Ln=vn[3]-vn[1]-Pt}const ai=(vn,$n,jn,ti)=>{const ui=dy(vn.stretch-Ct,ht,W,o.left),En=Ay(vn.fixed-Lt,An,vn.stretch,_e),Si=dy($n.stretch-vt,Pt,J,o.top),Wi=Ay($n.fixed-ln,Ln,$n.stretch,Me),ki=dy(jn.stretch-Ct,ht,W,o.left),_o=Ay(jn.fixed-Lt,An,jn.stretch,_e),hi=dy(ti.stretch-vt,Pt,J,o.top),vr=Ay(ti.fixed-ln,Ln,ti.stretch,Me),yo=new Xe(ui,Si),cs=new Xe(ki,Si),vo=new Xe(ki,hi),Sr=new Xe(ui,hi),aa=new Xe(En/S,Wi/S),Bo=new Xe(_o/S,vr/S),To=n*Math.PI/180;if(To){const ea=Math.sin(To),Vs=Math.cos(To),La=[Vs,-ea,ea,Vs];yo._matMult(La),cs._matMult(La),Sr._matMult(La),vo._matMult(La)}const Hs=vn.stretch+vn.fixed,Js=$n.stretch+$n.fixed;return{tl:yo,tr:cs,bl:Sr,br:vo,tex:{x:C.paddedRect.x+vm+Hs,y:C.paddedRect.y+vm+Js,w:jn.stretch+jn.fixed-Hs,h:ti.stretch+ti.fixed-Js},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:aa,pixelOffsetBR:Bo,minFontScaleX:An/S/W,minFontScaleY:Ln/S/J,isSDF:a}};if(p&&(C.stretchX||C.stretchY)){const vn=$w(ie,Ve,_e),$n=$w(se,ut,Me);for(let jn=0;jn<vn.length-1;jn++){const ti=vn[jn],ui=vn[jn+1];for(let En=0;En<$n.length-1;En++)y.push(ai(ti,$n[En],ui,$n[En+1]))}}else y.push(ai({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:z+1},{fixed:0,stretch:Q+1}));return y}function hy(o,n,a){let p=0;for(const y of o)p+=Math.max(n,Math.min(a,y[1]))-Math.max(n,Math.min(a,y[0]));return p}function $w(o,n,a){const p=[{fixed:-vm,stretch:0}];for(const[y,C]of o){const S=p[p.length-1];p.push({fixed:y-S.stretch,stretch:S.stretch}),p.push({fixed:y-S.stretch,stretch:S.stretch+(C-y)})}return p.push({fixed:n+vm,stretch:a}),p}function dy(o,n,a,p){return o/n*a+p}function Ay(o,n,a,p){return o-n*a/p}function rE(o,n,a,p){const y=n+o.positionedLines[p].lineOffset;return p===0?a+y/2:a+(y+(n+o.positionedLines[p-1].lineOffset))/2}class oE{constructor(n=[],a=sE){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:p}=this,y=a[n];for(;n>0;){const C=n-1>>1,S=a[C];if(p(y,S)>=0)break;a[n]=S,n=C}a[n]=y}_down(n){const{data:a,compare:p}=this,y=this.length>>1,C=a[n];for(;n<y;){let S=1+(n<<1),z=a[S];const Q=S+1;if(Q<this.length&&p(a[Q],z)<0&&(S=Q,z=a[Q]),p(z,C)>=0)break;a[n]=z,n=S}a[n]=C}}function sE(o,n){return o<n?-1:o>n?1:0}function aE(o,n=1,a=!1){let p=1/0,y=1/0,C=-1/0,S=-1/0;const z=o[0];for(let fe=0;fe<z.length;fe++){const _e=z[fe];(!fe||_e.x<p)&&(p=_e.x),(!fe||_e.y<y)&&(y=_e.y),(!fe||_e.x>C)&&(C=_e.x),(!fe||_e.y>S)&&(S=_e.y)}const Q=Math.min(C-p,S-y);let W=Q/2;const J=new oE([],lE);if(Q===0)return new Xe(p,y);for(let fe=p;fe<C;fe+=Q)for(let _e=y;_e<S;_e+=Q)J.push(new xm(fe+W,_e+W,W,o));let ie=function(fe){let _e=0,Me=0,Ve=0;const ut=fe[0];for(let Ct=0,ht=ut.length,vt=ht-1;Ct<ht;vt=Ct++){const Pt=ut[Ct],Lt=ut[vt],An=Pt.x*Lt.y-Lt.x*Pt.y;Me+=(Pt.x+Lt.x)*An,Ve+=(Pt.y+Lt.y)*An,_e+=3*An}return new xm(Me/_e,Ve/_e,0,fe)}(o),se=J.length;for(;J.length;){const fe=J.pop();(fe.d>ie.d||!ie.d)&&(ie=fe,a&&console.log("found best %d after %d probes",Math.round(1e4*fe.d)/1e4,se)),fe.max-ie.d<=n||(W=fe.h/2,J.push(new xm(fe.p.x-W,fe.p.y-W,W,o)),J.push(new xm(fe.p.x+W,fe.p.y-W,W,o)),J.push(new xm(fe.p.x-W,fe.p.y+W,W,o)),J.push(new xm(fe.p.x+W,fe.p.y+W,W,o)),se+=4)}return a&&(console.log(`num probes: ${se}`),console.log(`best distance: ${ie.d}`)),ie.p}function lE(o,n){return n.max-o.max}class xm{constructor(n,a,p,y){this.p=new Xe(n,a),this.h=p,this.d=function(C,S){let z=!1,Q=1/0;for(let W=0;W<S.length;W++){const J=S[W];for(let ie=0,se=J.length,fe=se-1;ie<se;fe=ie++){const _e=J[ie],Me=J[fe];_e.y>C.y!=Me.y>C.y&&C.x<(Me.x-_e.x)*(C.y-_e.y)/(Me.y-_e.y)+_e.x&&(z=!z),Q=Math.min(Q,om(C,_e,Me))}}return(z?1:-1)*Math.sqrt(Q)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}}const bm=7,A0=Number.POSITIVE_INFINITY,cE=Math.sqrt(2);function jw(o,[n,a]){let p=0,y=0;if(a===A0){n<0&&(n=0);const C=n/cE;switch(o){case"top-right":case"top-left":y=C-bm;break;case"bottom-right":case"bottom-left":y=-C+bm;break;case"bottom":y=-n+bm;break;case"top":y=n-bm}switch(o){case"top-right":case"bottom-right":p=-C;break;case"top-left":case"bottom-left":p=C;break;case"left":p=n;break;case"right":p=-n}}else{switch(n=Math.abs(n),a=Math.abs(a),o){case"top-right":case"top-left":case"top":y=a-bm;break;case"bottom-right":case"bottom-left":case"bottom":y=-a+bm}switch(o){case"top-right":case"bottom-right":case"right":p=-n;break;case"top-left":case"bottom-left":case"left":p=n}}return[p,y]}function uE(o,n,a,p,y,C,S,z,Q,W){o.createArrays(),o.tilePixelRatio=Ar/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;const J=o.layers[0].layout,ie=o.layers[0]._unevaluatedLayout._values,se={};if(o.textSizeData.kind==="composite"){const{minZoom:Me,maxZoom:Ve}=o.textSizeData;se.compositeTextSizes=[ie["text-size"].possiblyEvaluate(new ee(Me),z),ie["text-size"].possiblyEvaluate(new ee(Ve),z)]}if(o.iconSizeData.kind==="composite"){const{minZoom:Me,maxZoom:Ve}=o.iconSizeData;se.compositeIconSizes=[ie["icon-size"].possiblyEvaluate(new ee(Me),z),ie["icon-size"].possiblyEvaluate(new ee(Ve),z)]}se.layoutTextSize=ie["text-size"].possiblyEvaluate(new ee(Q+1),z),se.layoutIconSize=ie["icon-size"].possiblyEvaluate(new ee(Q+1),z),se.textMaxSize=ie["text-size"].possiblyEvaluate(new ee(18),z);const fe=J.get("text-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",_e=J.get("text-size");for(const Me of o.features){const Ve=J.get("text-font").evaluate(Me,{},z).join(","),ut=_e.evaluate(Me,{},z),Ct=se.layoutTextSize.evaluate(Me,{},z),ht=(se.layoutIconSize.evaluate(Me,{},z),{horizontal:{},vertical:void 0}),vt=Me.text;let Pt,Lt=[0,0];if(vt){const Ln=vt.toString(),ai=J.get("text-letter-spacing").evaluate(Me,{},z)*Ca,vn=J.get("text-line-height").evaluate(Me,{},z)*Ca,$n=Xr(Ln)?ai:0,jn=J.get("text-anchor").evaluate(Me,{},z),ti=J.get("text-variable-anchor");if(!ti){const ki=J.get("text-radial-offset").evaluate(Me,{},z);Lt=ki?jw(jn,[ki*Ca,A0]):J.get("text-offset").evaluate(Me,{},z).map(_o=>_o*Ca)}let ui=fe?"center":J.get("text-justify").evaluate(Me,{},z);const En=J.get("symbol-placement")==="point",Si=En?J.get("text-max-width").evaluate(Me,{},z)*Ca:1/0,Wi=ki=>{o.allowVerticalPlacement&&Po(Ln)&&(ht.vertical=l0(vt,n,a,y,Ve,Si,vn,jn,ki,$n,Lt,js.vertical,!0,Ct,ut))};if(!fe&&ti){const ki=ui==="auto"?ti.map(hi=>f0(hi)):[ui];let _o=!1;for(let hi=0;hi<ki.length;hi++){const vr=ki[hi];if(!ht.horizontal[vr])if(_o)ht.horizontal[vr]=ht.horizontal[0];else{const yo=l0(vt,n,a,y,Ve,Si,vn,"center",vr,$n,Lt,js.horizontal,!1,Ct,ut);yo&&(ht.horizontal[vr]=yo,_o=yo.positionedLines.length===1)}}Wi("left")}else{if(ui==="auto"&&(ui=f0(jn)),En||J.get("text-writing-mode").indexOf("horizontal")>=0||!Po(Ln)){const ki=l0(vt,n,a,y,Ve,Si,vn,jn,ui,$n,Lt,js.horizontal,!1,Ct,ut);ki&&(ht.horizontal[ui]=ki)}Wi(En?"left":ui)}}let An=!1;if(Me.icon&&Me.icon.name){const Ln=p[Me.icon.name];Ln&&(Pt=Pw(y[Me.icon.name],J.get("icon-offset").evaluate(Me,{},z),J.get("icon-anchor").evaluate(Me,{},z)),An=Ln.sdf,o.sdfIcons===void 0?o.sdfIcons=Ln.sdf:o.sdfIcons!==Ln.sdf&&di("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ln.pixelRatio!==o.pixelRatio||J.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}const ln=p0(ht.horizontal)||ht.vertical;o.iconsInText||(o.iconsInText=!!ln&&ln.iconsInText),(ln||Pt)&&hE(o,Me,ht,Pt,p,se,Ct,0,Lt,An,S,z,W)}C&&o.generateCollisionDebugBuffers(Q,o.collisionBoxArray)}function f0(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function hE(o,n,a,p,y,C,S,z,Q,W,J,ie,se){let fe=C.textMaxSize.evaluate(n,{},ie);fe===void 0&&(fe=S);const _e=o.layers[0].layout,Me=_e.get("icon-offset").evaluate(n,{},ie),Ve=p0(a.horizontal)||a.vertical,ut=se.name==="globe",Ct=Ca,ht=S/Ct,vt=o.tilePixelRatio*fe/Ct,Pt=(jn=o.overscaling,o.zoom>18&&jn>2&&(jn>>=1),Math.max(Ar/(512*jn),1)*_e.get("symbol-spacing")),Lt=_e.get("text-padding")*o.tilePixelRatio,An=_e.get("icon-padding")*o.tilePixelRatio,ln=Ut(_e.get("text-max-angle")),Ln=_e.get("text-rotation-alignment")==="map"&&_e.get("symbol-placement")!=="point",ai=_e.get("icon-rotation-alignment")==="map"&&_e.get("symbol-placement")!=="point",vn=_e.get("symbol-placement"),$n=Pt/2;var jn;const ti=_e.get("icon-text-fit");let ui;p&&ti!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(ui=Fw(p,a.vertical,ti,_e.get("icon-text-fit-padding"),Me,ht)),Ve&&(p=Fw(p,Ve,ti,_e.get("icon-text-fit-padding"),Me,ht)));const En=(Si,Wi,ki)=>{if(Wi.x<0||Wi.x>=Ar||Wi.y<0||Wi.y>=Ar)return;let _o=null;if(ut){const{x:hi,y:vr,z:yo}=se.projectTilePoint(Wi.x,Wi.y,ki);_o={anchor:new HA(hi,vr,yo,0,void 0),up:se.upVector(ki,Wi.x,Wi.y)}}(function(hi,vr,yo,cs,vo,Sr,aa,Bo,To,Hs,Js,ea,Vs,La,el,Ll,Gs,tc,kl,ja,ds,Pl,ta,Th,Fl){const uu=hi.addToLineVertexArray(vr,cs);let zc,Eh,Rc,KA,by,T0,E0,uz=0,hz=0,dz=0,Az=0,RE=-1,OE=-1;const Lf={};let fz=Jm("");const Qg=yo?yo.anchor:vr;let NE=0,QE=0;if(To._unevaluatedLayout.getValue("text-radial-offset")===void 0?[NE,QE]=To.layout.get("text-offset").evaluate(ds,{},Fl).map(od=>od*Ca):(NE=To.layout.get("text-radial-offset").evaluate(ds,{},Fl)*Ca,QE=A0),hi.allowVerticalPlacement&&vo.vertical){const od=vo.vertical;if(el)T0=m0(od),Bo&&(E0=m0(Bo));else{const sd=To.layout.get("text-rotate").evaluate(ds,{},Fl)+90;Rc=Dg(Hs,Qg,vr,Js,ea,Vs,od,La,sd,Ll),Bo&&(KA=Dg(Hs,Qg,vr,Js,ea,Vs,Bo,tc,sd))}}if(Sr){const od=To.layout.get("icon-rotate").evaluate(ds,{},Fl),sd=To.layout.get("icon-text-fit")!=="none",S0=Qw(Sr,od,ta,sd),jE=Bo?Qw(Bo,od,ta,sd):void 0;Eh=Dg(Hs,Qg,vr,Js,ea,Vs,Sr,tc,od),uz=4*S0.length;const pz=hi.iconSizeData;let $g=null;pz.kind==="source"?($g=[Zu*To.layout.get("icon-size").evaluate(ds,{},Fl)],$g[0]>Ef&&di(`${hi.layerIds[0]}: Value for "icon-size" is >= ${Fg}. Reduce your "icon-size".`)):pz.kind==="composite"&&($g=[Zu*Pl.compositeIconSizes[0].evaluate(ds,{},Fl),Zu*Pl.compositeIconSizes[1].evaluate(ds,{},Fl)],($g[0]>Ef||$g[1]>Ef)&&di(`${hi.layerIds[0]}: Value for "icon-size" is >= ${Fg}. Reduce your "icon-size".`)),hi.addSymbols(hi.icon,S0,$g,ja,kl,ds,!1,yo,vr,uu.lineStartIndex,uu.lineLength,-1,Th,Fl),RE=hi.icon.placedSymbolArray.length-1,jE&&(hz=4*jE.length,hi.addSymbols(hi.icon,jE,$g,ja,kl,ds,js.vertical,yo,vr,uu.lineStartIndex,uu.lineLength,-1,Th,Fl),OE=hi.icon.placedSymbolArray.length-1)}for(const od in vo.horizontal){const sd=vo.horizontal[od];zc||(fz=Jm(sd.text),el?by=m0(sd):zc=Dg(Hs,Qg,vr,Js,ea,Vs,sd,La,To.layout.get("text-rotate").evaluate(ds,{},Fl),Ll));const S0=sd.positionedLines.length===1;if(dz+=fy(hi,yo,vr,sd,aa,To,el,ds,Ll,uu,vo.vertical?js.horizontal:js.horizontalOnly,S0?Object.keys(vo.horizontal):[od],Lf,RE,Pl,Th,Fl),S0)break}vo.vertical&&(Az+=fy(hi,yo,vr,vo.vertical,aa,To,el,ds,Ll,uu,js.vertical,["vertical"],Lf,OE,Pl,Th,Fl));let Bm=-1;const $E=(od,sd)=>od?Math.max(od,sd):sd;Bm=$E(by,Bm),Bm=$E(T0,Bm),Bm=$E(E0,Bm);const Dte=Bm>-1?1:0;hi.glyphOffsetArray.length>=If.MAX_GLYPHS&&di("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ds.sortKey!==void 0&&hi.addToSortKeyRanges(hi.symbolInstances.length,ds.sortKey),hi.symbolInstances.emplaceBack(Qg.x,Qg.y,Qg.z,vr.x,vr.y,Lf.right>=0?Lf.right:-1,Lf.center>=0?Lf.center:-1,Lf.left>=0?Lf.left:-1,Lf.vertical>=0?Lf.vertical:-1,RE,OE,fz,zc!==void 0?zc:hi.collisionBoxArray.length,zc!==void 0?zc+1:hi.collisionBoxArray.length,Rc!==void 0?Rc:hi.collisionBoxArray.length,Rc!==void 0?Rc+1:hi.collisionBoxArray.length,Eh!==void 0?Eh:hi.collisionBoxArray.length,Eh!==void 0?Eh+1:hi.collisionBoxArray.length,KA||hi.collisionBoxArray.length,KA?KA+1:hi.collisionBoxArray.length,Js,dz,Az,uz,hz,Dte,0,NE,QE,Bm)})(o,Wi,_o,Si,a,p,y,ui,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Lt,Ln,Q,0,An,ai,Me,n,C,W,J,ie)};if(vn==="line")for(const Si of Ow(n.geometry,0,0,Ar,Ar)){const Wi=iE(Si,Pt,ln,a.vertical||Ve,p,Ct,vt,o.overscaling,Ar);for(const ki of Wi)Ve&&dE(o,Ve.text,$n,ki)||En(Si,ki,ie)}else if(vn==="line-center"){for(const Si of n.geometry)if(Si.length>1){const Wi=nE(Si,ln,a.vertical||Ve,p,Ct,vt);Wi&&En(Si,Wi,ie)}}else if(n.type==="Polygon")for(const Si of B(n.geometry,0)){const Wi=aE(Si,16);En(Si[0],new HA(Wi.x,Wi.y,0,0,void 0),ie)}else if(n.type==="LineString")for(const Si of n.geometry)En(Si,new HA(Si[0].x,Si[0].y,0,0,void 0),ie);else if(n.type==="Point")for(const Si of n.geometry)for(const Wi of Si)En([Wi],new HA(Wi.x,Wi.y,0,0,void 0),ie)}const Fg=255,Ef=Fg*Zu;function fy(o,n,a,p,y,C,S,z,Q,W,J,ie,se,fe,_e,Me,Ve){const ut=function(vt,Pt,Lt,An,ln,Ln,ai,vn){const $n=[];if(Pt.positionedLines.length===0)return $n;const jn=An.layout.get("text-rotate").evaluate(Ln,{})*Math.PI/180,ti=function(ki){const _o=ki[0],hi=ki[1],vr=_o*hi;return vr>0?[_o,-hi]:vr<0?[-_o,hi]:_o===0?[hi,_o]:[hi,-_o]}(Lt);let ui=Math.abs(Pt.top-Pt.bottom);for(const ki of Pt.positionedLines)ui-=ki.lineOffset;const En=Pt.positionedLines.length,Si=ui/En;let Wi=Pt.top-Lt[1];for(let ki=0;ki<En;++ki){const _o=Pt.positionedLines[ki];Wi=rE(Pt,Si,Wi,ki);for(const hi of _o.positionedGlyphs){if(!hi.rect)continue;const vr=hi.rect||{};let yo=Tw+1,cs=!0,vo=1,Sr=0;if(hi.imageName){const ta=ai[hi.imageName];if(!ta)continue;if(ta.sdf){di("SDF images are not supported in formatted text and will be ignored.");continue}cs=!1,vo=ta.pixelRatio,yo=Xu/vo}const aa=(ln||vn)&&hi.vertical,Bo=hi.metrics.advance*hi.scale/2,To=hi.metrics,Hs=hi.rect;if(Hs===null)continue;vn&&Pt.verticalizable&&(Sr=hi.imageName?Bo-hi.metrics.width*hi.scale/2:0);const Js=ln?[hi.x+Bo,hi.y]:[0,0];let ea=[0,0],Vs=[0,0],La=!1;ln||(aa?(Vs=[hi.x+Bo+ti[0],hi.y+ti[1]-Sr],La=!0):ea=[hi.x+Bo+Lt[0],hi.y+Lt[1]-Sr]);const el=Hs.w*hi.scale/(vo*(hi.localGlyph?kd:1)),Ll=Hs.h*hi.scale/(vo*(hi.localGlyph?kd:1));let Gs,tc,kl,ja;if(aa){const ta=hi.y-Wi,Th=new Xe(-Bo,Bo-ta),Fl=-Math.PI/2,uu=new Xe(...Vs);Gs=new Xe(-Bo+ea[0],ea[1]),Gs._rotateAround(Fl,Th)._add(uu),Gs.x+=-ta+Bo,Gs.y-=(To.left-yo)*hi.scale;const zc=hi.imageName?To.advance*hi.scale:Ca*hi.scale,Eh=String.fromCharCode(hi.glyph);r0(Eh)?Gs.x+=(1-yo)*hi.scale:Kh(Eh)?Gs.x+=zc-To.height*hi.scale+(-yo-1)*hi.scale:Gs.x+=hi.imageName||To.width+2*yo===Hs.w&&To.height+2*yo===Hs.h?(zc-Ll)/2:(zc-(To.height+2*yo)*hi.scale)/2,tc=new Xe(Gs.x,Gs.y-el),kl=new Xe(Gs.x+Ll,Gs.y),ja=new Xe(Gs.x+Ll,Gs.y-el)}else{const ta=(To.left-yo)*hi.scale-Bo+ea[0],Th=(-To.top-yo)*hi.scale+ea[1],Fl=ta+el,uu=Th+Ll;Gs=new Xe(ta,Th),tc=new Xe(Fl,Th),kl=new Xe(ta,uu),ja=new Xe(Fl,uu)}if(jn){let ta;ta=ln?new Xe(0,0):La?new Xe(ti[0],ti[1]):new Xe(Lt[0],Lt[1]),Gs._rotateAround(jn,ta),tc._rotateAround(jn,ta),kl._rotateAround(jn,ta),ja._rotateAround(jn,ta)}const ds=new Xe(0,0),Pl=new Xe(0,0);$n.push({tl:Gs,tr:tc,bl:kl,br:ja,tex:vr,writingMode:Pt.writingMode,glyphOffset:Js,sectionIndex:hi.sectionIndex,isSDF:cs,pixelOffsetTL:ds,pixelOffsetBR:Pl,minFontScaleX:0,minFontScaleY:0})}}return $n}(0,p,Q,C,S,z,y,o.allowVerticalPlacement),Ct=o.textSizeData;let ht=null;Ct.kind==="source"?(ht=[Zu*C.layout.get("text-size").evaluate(z,{},Ve)],ht[0]>Ef&&di(`${o.layerIds[0]}: Value for "text-size" is >= ${Fg}. Reduce your "text-size".`)):Ct.kind==="composite"&&(ht=[Zu*_e.compositeTextSizes[0].evaluate(z,{},Ve),Zu*_e.compositeTextSizes[1].evaluate(z,{},Ve)],(ht[0]>Ef||ht[1]>Ef)&&di(`${o.layerIds[0]}: Value for "text-size" is >= ${Fg}. Reduce your "text-size".`)),o.addSymbols(o.text,ut,ht,Q,S,z,J,n,a,W.lineStartIndex,W.lineLength,fe,Me,Ve);for(const vt of ie)se[vt]=o.text.placedSymbolArray.length-1;return 4*ut.length}function p0(o){for(const n in o)return o[n];return null}function Dg(o,n,a,p,y,C,S,z,Q,W){let J=S.top,ie=S.bottom,se=S.left,fe=S.right;const _e=S.collisionPadding;if(_e&&(se-=_e[0],J-=_e[1],fe+=_e[2],ie+=_e[3]),Q){const Me=new Xe(se,J),Ve=new Xe(fe,J),ut=new Xe(se,ie),Ct=new Xe(fe,ie),ht=Ut(Q);let vt=new Xe(0,0);W&&(vt=new Xe(W[0],W[1])),Me._rotateAround(ht,vt),Ve._rotateAround(ht,vt),ut._rotateAround(ht,vt),Ct._rotateAround(ht,vt),se=Math.min(Me.x,Ve.x,ut.x,Ct.x),fe=Math.max(Me.x,Ve.x,ut.x,Ct.x),J=Math.min(Me.y,Ve.y,ut.y,Ct.y),ie=Math.max(Me.y,Ve.y,ut.y,Ct.y)}return o.emplaceBack(n.x,n.y,n.z,a.x,a.y,se,J,fe,ie,z,p,y,C),o.length-1}function m0(o){o.collisionPadding&&(o.top-=o.collisionPadding[1],o.bottom+=o.collisionPadding[3]);const n=o.bottom-o.top;return n>0?Math.max(10,n):null}function dE(o,n,a,p){const y=o.compareText;if(n in y){const C=y[n];for(let S=C.length-1;S>=0;S--)if(p.dist(C[S])<a)return!0}else y[n]=[];return y[n].push(p),!1}function Hw(o,n){const a=o.fovAboveCenter,p=o.elevation?o.elevation.getMinElevationBelowMSL()*n:0,y=(o._camera.position[2]*o.worldSize-p)/Math.cos(o._pitch),C=Math.sin(a)*y/Math.sin(Math.max(Math.PI/2-o._pitch-a,.01)),S=Math.sin(o._pitch)*C+y;return Math.min(1.01*S,y*(1/o._horizonShift))}function VA(o,n){if(!n.isReprojectedInTileSpace)return{scale:1<<o.z,x:o.x,y:o.y,x2:o.x+1,y2:o.y+1,projection:n};const a=Math.pow(2,-o.z),p=o.x*a,y=(o.x+1)*a,C=o.y*a,S=(o.y+1)*a,z=Iu(p),Q=Iu(y),W=Al(C),J=Al(S),ie=n.project(z,W),se=n.project(Q,W),fe=n.project(Q,J),_e=n.project(z,J);let Me=Math.min(ie.x,se.x,fe.x,_e.x),Ve=Math.min(ie.y,se.y,fe.y,_e.y),ut=Math.max(ie.x,se.x,fe.x,_e.x),Ct=Math.max(ie.y,se.y,fe.y,_e.y);const ht=a/16;function vt(Lt,An,ln,Ln,ai,vn){const $n=(ln+ai)/2,jn=(Ln+vn)/2,ti=n.project(Iu($n),Al(jn)),ui=Math.max(0,Me-ti.x,Ve-ti.y,ti.x-ut,ti.y-Ct);Me=Math.min(Me,ti.x),ut=Math.max(ut,ti.x),Ve=Math.min(Ve,ti.y),Ct=Math.max(Ct,ti.y),ui>ht&&(vt(Lt,ti,ln,Ln,$n,jn),vt(ti,An,$n,jn,ai,vn))}vt(ie,se,p,C,y,C),vt(se,fe,y,C,y,S),vt(fe,_e,y,S,p,S),vt(_e,ie,p,S,p,C),Me-=ht,Ve-=ht,ut+=ht,Ct+=ht;const Pt=1/Math.max(ut-Me,Ct-Ve);return{scale:Pt,x:Me*Pt,y:Ve*Pt,x2:ut*Pt,y2:Ct*Pt,projection:n}}const AE=Xl(new Float32Array(16));class Sf{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,a){return{x:0,y:0,z:0}}unproject(n,a){return new _s(0,0)}projectTilePoint(n,a,p){return{x:n,y:a,z:0}}locationPoint(n,a,p=!0){return n._coordinatePoint(n.locationCoordinate(a),p)}pixelsPerMeter(n,a){return xh(1,n)*a}pixelSpaceConversion(n,a,p){return 1}farthestPixelDistance(n){return Hw(n,n.pixelsPerMeter)}pointCoordinate(n,a,p,y){const C=n.horizonLineFromTop(!1),S=new Xe(a,Math.max(C,p));return n.rayIntersectionCoordinate(n.pointRayIntersection(S,y))}pointCoordinate3D(n,a,p){const y=new Xe(a,p);if(n.elevation)return n.elevation.pointCoordinate(y);{const C=this.pointCoordinate(n,y.x,y.y,0);return[C.x,C.y,C.z]}}isPointAboveHorizon(n,a){if(n.elevation)return!this.pointCoordinate3D(n,a.x,a.y);const p=n.horizonLineFromTop();return a.y<p}createInversionMatrix(n,a){return AE}createTileMatrix(n,a,p){let y,C,S;const z=p.canonical,Q=Xl(new Float64Array(16));if(this.isReprojectedInTileSpace){const W=VA(z,this);y=1,C=W.x+p.wrap*W.scale,S=W.y,Jd(Q,Q,[y/W.scale,y/W.scale,n.pixelsPerMeter/a])}else y=a/n.zoomScale(z.z),C=(z.x+Math.pow(2,z.z)*p.wrap)*y,S=z.y*y;return qf(Q,Q,[C,S,0]),Jd(Q,Q,[y/Ar,y/Ar,1]),Q}upVector(n,a,p){return[0,0,1]}upVectorScale(n,a,p){return{metersToTile:1}}}class fE extends Sf{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[a,p]=this.parallels=n.parallels||[29.5,45.5],y=Math.sin(Ut(a));this.n=(y+Math.sin(Ut(p)))/2,this.c=1+y*(2*this.n-y),this.r0=Math.sqrt(this.c)/this.n}project(n,a){const{n:p,c:y,r0:C}=this,S=Ut(n-this.center[0]),z=Ut(a),Q=Math.sqrt(y-2*p*Math.sin(z))/p;return{x:Q*Math.sin(S*p),y:Q*Math.cos(S*p)-C,z:0}}unproject(n,a){const{n:p,c:y,r0:C}=this,S=C+a;let z=Math.atan2(n,Math.abs(S))*Math.sign(S);S*p<0&&(z-=Math.PI*Math.sign(n)*Math.sign(S));const Q=Ut(this.center[0])*p;z=Xn(z,-Math.PI-Q,Math.PI-Q);const W=Cn(Kt(z/p)+this.center[0],-180,180),J=Math.asin(Cn((y-(n*n+S*S)*p*p)/(2*p),-1,1)),ie=Cn(Kt(J),-Sl,Sl);return new _s(W,ie)}}const Uc=1.340264,pp=-.081106,Ug=893e-6,zg=.003796,py=Math.sqrt(3)/2;class pE extends Sf{project(n,a){a=a/180*Math.PI,n=n/180*Math.PI;const p=Math.asin(py*Math.sin(a)),y=p*p,C=y*y*y;return{x:.5*(n*Math.cos(p)/(py*(Uc+3*pp*y+C*(7*Ug+9*zg*y)))/Math.PI+.5),y:1-.5*(p*(Uc+pp*y+C*(Ug+zg*y))/Math.PI+1),z:0}}unproject(n,a){n=(2*n-.5)*Math.PI;let p=a=(2*(1-a)-1)*Math.PI,y=p*p,C=y*y*y;for(let J,ie,se,fe=0;fe<12&&(ie=p*(Uc+pp*y+C*(Ug+zg*y))-a,se=Uc+3*pp*y+C*(7*Ug+9*zg*y),J=ie/se,p=Cn(p-J,-Math.PI/3,Math.PI/3),y=p*p,C=y*y*y,!(Math.abs(J)<1e-12));++fe);const S=py*n*(Uc+3*pp*y+C*(7*Ug+9*zg*y))/Math.cos(p),z=Math.asin(Math.sin(p)/py),Q=Cn(180*S/Math.PI,-180,180),W=Cn(180*z/Math.PI,-Sl,Sl);return new _s(Q,W)}}class g0 extends Sf{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,a){return{x:.5+n/360,y:.5-a/360,z:0}}unproject(n,a){const p=360*(n-.5),y=Cn(360*(.5-a),-Sl,Sl);return new _s(p,y)}}const wm=Math.PI/2;function Cm(o){return Math.tan((wm+o)/2)}class mE extends Sf{constructor(n){super(n),this.center=n.center||[0,30];const[a,p]=this.parallels=n.parallels||[30,30];let y=Ut(a),C=Ut(p);this.southernCenter=y+C<0,this.southernCenter&&(y=-y,C=-C);const S=Math.cos(y),z=Cm(y);this.n=y===C?Math.sin(y):Math.log(S/Math.cos(C))/Math.log(Cm(C)/z),this.f=S*Math.pow(Cm(y),this.n)/this.n}project(n,a){a=Ut(a),this.southernCenter&&(a=-a),n=Ut(n-this.center[0]);const p=1e-6,{n:y,f:C}=this;C>0?a<-wm+p&&(a=-wm+p):a>wm-p&&(a=wm-p);const S=C/Math.pow(Cm(a),y);let z=S*Math.sin(y*n),Q=C-S*Math.cos(y*n);return z=.5*(z/Math.PI+.5),Q=.5*(Q/Math.PI+.5),{x:z,y:this.southernCenter?Q:1-Q,z:0}}unproject(n,a){n=(2*n-.5)*Math.PI,this.southernCenter&&(a=1-a),a=(2*(1-a)-.5)*Math.PI;const{n:p,f:y}=this,C=y-a,S=Math.sign(C),z=Math.sign(p)*Math.sqrt(n*n+C*C);let Q=Math.atan2(n,Math.abs(C))*S;C*p<0&&(Q-=Math.PI*Math.sign(n)*S);const W=Cn(Kt(Q/p)+this.center[0],-180,180),J=Cn(Kt(2*Math.atan(Math.pow(y/z,1/p))-wm),-Sl,Sl);return new _s(W,this.southernCenter?-J:J)}}class Vw extends Sf{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,a){return{x:Hh(n),y:id(a),z:0}}unproject(n,a){const p=Iu(n),y=Al(a);return new _s(p,y)}}const Gw=Ut(Sl);class gE extends Sf{project(n,a){const p=(a=Ut(a))*a,y=p*p;return{x:.5*((n=Ut(n))*(.8707-.131979*p+y*(y*(.003971*p-.001529*y)-.013791))/Math.PI+.5),y:1-.5*(a*(1.007226+p*(.015085+y*(.028874*p-.044475-.005916*y)))/Math.PI+1),z:0}}unproject(n,a){n=(2*n-.5)*Math.PI;let p=a=(2*(1-a)-1)*Math.PI,y=25,C=0,S=p*p;do{S=p*p;const W=S*S;C=(p*(1.007226+S*(.015085+W*(.028874*S-.044475-.005916*W)))-a)/(1.007226+S*(.045255+W*(.259866*S-.311325-.005916*11*W))),p=Cn(p-C,-Gw,Gw)}while(Math.abs(C)>1e-6&&--y>0);S=p*p;const z=Cn(Kt(n/(.8707+S*(S*(S*S*S*(.003971-.001529*S)-.013791)-.131979))),-180,180),Q=Kt(p);return new _s(z,Q)}}const _0=Ut(Sl);class _E extends Sf{project(n,a){a=Ut(a),n=Ut(n);const p=Math.cos(a),y=2/Math.PI,C=Math.acos(p*Math.cos(n/2)),S=Math.sin(C)/C,z=.5*(n*y+2*p*Math.sin(n/2)/S)||0,Q=.5*(a+Math.sin(a)/S)||0;return{x:.5*(z/Math.PI+.5),y:1-.5*(Q/Math.PI+1),z:0}}unproject(n,a){let p=n=(2*n-.5)*Math.PI,y=a=(2*(1-a)-1)*Math.PI,C=25;const S=1e-6;let z=0,Q=0;do{const W=Math.cos(y),J=Math.sin(y),ie=2*J*W,se=J*J,fe=W*W,_e=Math.cos(p/2),Me=Math.sin(p/2),Ve=2*_e*Me,ut=Me*Me,Ct=1-fe*_e*_e,ht=Ct?1/Ct:0,vt=Ct?Math.acos(W*_e)*Math.sqrt(1/Ct):0,Pt=.5*(2*vt*W*Me+2*p/Math.PI)-n,Lt=.5*(vt*J+y)-a,An=.5*ht*(fe*ut+vt*W*_e*se)+1/Math.PI,ln=ht*(Ve*ie/4-vt*J*Me),Ln=.125*ht*(ie*Me-vt*J*fe*Ve),ai=.5*ht*(se*_e+vt*ut*W)+.5,vn=ln*Ln-ai*An;z=(Lt*ln-Pt*ai)/vn,Q=(Pt*Ln-Lt*An)/vn,p=Cn(p-z,-Math.PI,Math.PI),y=Cn(y-Q,-_0,_0)}while((Math.abs(z)>S||Math.abs(Q)>S)&&--C>0);return new _s(Kt(p),Kt(y))}}class Ww extends Sf{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Ut(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,a){const{scale:p,cosPhi:y}=this;return{x:Ut(n)*y*p+.5,y:-Math.sin(Ut(a))/y*p+.5,z:0}}unproject(n,a){const{scale:p,cosPhi:y}=this,C=-(a-.5)/p,S=Cn(Kt((n-.5)/p)/y,-180,180),z=Math.asin(Cn(C*y,-1,1)),Q=Cn(Kt(z),-Sl,Sl);return new _s(S,Q)}}class yE extends Vw{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,a,p){const y=zA(n,a,p);return fa(y,y,uA(vh(p))),{x:y[0],y:y[1],z:y[2]}}locationPoint(n,a){const p=vf(a.lat,a.lng),y=El([],p),C=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(a),n._centerAltitude):n._centerAltitude;Xf(p,p,y,xh(1,0)*Ar*C);const S=Xl(new Float64Array(16));return ed(S,n.pixelMatrix,n.globeMatrix),fa(p,p,S),new Xe(p[0],p[1])}pixelsPerMeter(n,a){return xh(1,0)*a}pixelSpaceConversion(n,a,p){const y=xh(1,n)*a,C=lo(xh(1,45)*a,y,p);return this.pixelsPerMeter(n,a)/C}createTileMatrix(n,a,p){const y=Xp(vh(p.canonical));return ed(new Float64Array(16),n.globeMatrix,y)}createInversionMatrix(n,a){const{center:p}=n,y=uA(vh(a));return tA(y,y,Ut(p.lng)),eA(y,y,Ut(p.lat)),Jd(y,y,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(y)}pointCoordinate(n,a,p,y){return ug(n,a,p,!0)||new hA(0,0)}pointCoordinate3D(n,a,p){const y=this.pointCoordinate(n,a,p,0);return[y.x,y.y,y.z]}isPointAboveHorizon(n,a){return!ug(n,a.x,a.y,!1)}farthestPixelDistance(n){const a=function(y,C){const S=y.cameraToCenterDistance,z=y._centerAltitude*C,Q=y._camera,W=y._camera.forward(),J=_h([],su([],W,-S),[0,0,z]),ie=y.worldSize/(2*Math.PI),se=[0,0,-ie],fe=y.width/y.height,_e=Math.tan(y.fovAboveCenter),Me=su([],Q.up(),_e),Ve=su([],Q.right(),_e*fe),ut=El([],_h([],_h([],W,Me),Ve)),Ct=[];let ht;if(new Yl(J,ut).closestPointOnSphere(se,ie,Ct)){const vt=_h([],Ct,se),Pt=au([],vt,J);ht=Math.cos(y.fovAboveCenter)*iA(Pt)}else{const vt=au([],J,se),Pt=au([],se,J);El(Pt,Pt);const Lt=iA(vt)-ie;ht=Math.sqrt(Lt*(Lt+2*ie));const An=Math.acos(ht/(ie+Lt))-Math.acos(wa(W,Pt));ht*=Math.cos(An)}return 1.01*ht}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),p=Td(n.zoom);if(p>0){const y=Hw(n,xh(1,n.center.lat)*n.worldSize),C=n.worldSize/(2*Math.PI),S=Math.max(n.width,n.height)/n.worldSize*Math.PI;return lo(a,y+C*(1-Math.cos(S)),Math.pow(p,10))}return a}upVector(n,a,p){return zA(a,p,n,1)}upVectorScale(n){return{metersToTile:DA(cA(vh(n)))}}}function my(o){const n=o.parallels,a=!!n&&Math.abs(n[0]+n[1])<.01;switch(o.name){case"mercator":return new Vw(o);case"equirectangular":return new g0(o);case"naturalEarth":return new gE(o);case"equalEarth":return new pE(o);case"winkelTripel":return new _E(o);case"albers":return a?new Ww(o):new fE(o);case"lambertConformalConic":return a?new Ww(o):new mE(o);case"globe":return new yE(o)}throw new Error(`Invalid projection name: ${o.name}`)}const y0=_i.types,vE=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function gy(o,n,a,p,y,C,S,z,Q,W,J,ie,se){const fe=z?Math.min(Ef,Math.round(z[0])):0,_e=z?Math.min(Ef,Math.round(z[1])):0;o.emplaceBack(n,a,Math.round(32*p),Math.round(32*y),C,S,(fe<<1)+(Q?1:0),_e,16*W,16*J,256*ie,256*se)}function _y(o,n,a,p,y,C,S){o.emplaceBack(n,a,p,y,C,S)}function yy(o,n,a,p,y){o.emplaceBack(n,a,p,y),o.emplaceBack(n,a,p,y),o.emplaceBack(n,a,p,y),o.emplaceBack(n,a,p,y)}function xE(o){for(const n of o.sections)if(ju(n.text))return!0;return!1}class v0{constructor(n){this.layoutVertexArray=new Vn,this.indexArray=new Yi,this.programConfigurations=n,this.segments=new sa,this.dynamicLayoutVertexArray=new Zn,this.opacityVertexArray=new ar,this.placedSymbolArray=new Aa,this.globeExtVertexArray=new si}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,p,y){this.isEmpty()||(p&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,sy.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Sg.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,vE,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,Eg.members,!0)),this.opacityVertexBuffer.itemSize=1),(p||y)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}yn(v0,"SymbolBuffers");class x0{constructor(n,a,p){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new p,this.segments=new sa,this.collisionVertexArray=new ro,this.collisionVertexArrayExt=new co}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Md.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,ay.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}yn(x0,"CollisionBuffers");class If{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(S=>S.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Xl([]),this.placementViewportMatrix=Xl([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ig(this.zoom,a["text-size"]),this.iconSizeData=Ig(this.zoom,a["icon-size"]);const p=this.layers[0].layout,y=p.get("symbol-sort-key"),C=p.get("symbol-z-order");this.canOverlap=p.get("text-allow-overlap")||p.get("icon-allow-overlap")||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&y.constantOr(1)!==void 0,this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=p.get("text-writing-mode").map(S=>js[S]),this.stateDependentLayerIds=this.layers.filter(S=>S.isStateDependent()).map(S=>S.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new v0(new ns(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new v0(new ns(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Zl,this.lineVertexArray=new EA,this.symbolInstances=new Fs}calculateGlyphDependencies(n,a,p,y,C){for(let S=0;S<n.length;S++)if(a[n.charCodeAt(S)]=!0,y&&C){const z=dp[n.charAt(S)];z&&(a[z.charCodeAt(0)]=!0)}}populate(n,a,p,y){const C=this.layers[0],S=C.layout,z=this.projection.name==="globe",Q=S.get("text-font"),W=S.get("text-field"),J=S.get("icon-image"),ie=(W.value.kind!=="constant"||W.value.value instanceof ia&&!W.value.value.isEmpty()||W.value.value.toString().length>0)&&(Q.value.kind!=="constant"||Q.value.value.length>0),se=J.value.kind!=="constant"||!!J.value.value||Object.keys(J.parameters).length>0,fe=S.get("symbol-sort-key");if(this.features=[],!ie&&!se)return;const _e=a.iconDependencies,Me=a.glyphDependencies,Ve=a.availableImages,ut=new ee(this.zoom);for(const{feature:Ct,id:ht,index:vt,sourceLayerIndex:Pt}of n){const Lt=C._featureFilter.needGeometry,An=RA(Ct,Lt);if(!C._featureFilter.filter(ut,An,p))continue;if(Lt||(An.geometry=Sd(Ct,p,y)),z&&Ct.type!==1&&p.z<=5){const vn=An.geometry,$n=.98078528056,jn=(ti,ui)=>wa(zA(ti.x,ti.y,p,1),zA(ui.x,ui.y,p,1))<$n;for(let ti=0;ti<vn.length;ti++)vn[ti]=fg(vn[ti],jn)}let ln,Ln;if(ie){const vn=C.getValueAndResolveTokens("text-field",An,p,Ve),$n=ia.factory(vn);xE($n)&&(this.hasRTLText=!0),(!this.hasRTLText||R()==="unavailable"||this.hasRTLText&&X.isParsed())&&(ln=Tf($n,C,An))}if(se){const vn=C.getValueAndResolveTokens("icon-image",An,p,Ve);Ln=vn instanceof Da?vn:Da.fromString(vn)}if(!ln&&!Ln)continue;const ai=this.sortFeaturesByKey?fe.evaluate(An,{},p):void 0;if(this.features.push({id:ht,text:ln,icon:Ln,index:vt,sourceLayerIndex:Pt,geometry:An.geometry,properties:Ct.properties,type:y0[Ct.type],sortKey:ai}),Ln&&(_e[Ln.name]=!0),ln){const vn=Q.evaluate(An,{},p).join(","),$n=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(js.vertical)>=0;for(const jn of ln.sections)if(jn.image)_e[jn.image.name]=!0;else{const ti=Po(ln.toString()),ui=jn.fontStack||vn,En=Me[ui]=Me[ui]||{};this.calculateGlyphDependencies(jn.text,En,$n,this.allowVerticalPlacement,ti)}}}S.get("symbol-placement")==="line"&&(this.features=function(Ct){const ht={},vt={},Pt=[];let Lt=0;function An(vn){Pt.push(Ct[vn]),Lt++}function ln(vn,$n,jn){const ti=vt[vn];return delete vt[vn],vt[$n]=ti,Pt[ti].geometry[0].pop(),Pt[ti].geometry[0]=Pt[ti].geometry[0].concat(jn[0]),ti}function Ln(vn,$n,jn){const ti=ht[$n];return delete ht[$n],ht[vn]=ti,Pt[ti].geometry[0].shift(),Pt[ti].geometry[0]=jn[0].concat(Pt[ti].geometry[0]),ti}function ai(vn,$n,jn){const ti=jn?$n[0][$n[0].length-1]:$n[0][0];return`${vn}:${ti.x}:${ti.y}`}for(let vn=0;vn<Ct.length;vn++){const $n=Ct[vn],jn=$n.geometry,ti=$n.text?$n.text.toString():null;if(!ti){An(vn);continue}const ui=ai(ti,jn),En=ai(ti,jn,!0);if(ui in vt&&En in ht&&vt[ui]!==ht[En]){const Si=Ln(ui,En,jn),Wi=ln(ui,En,Pt[Si].geometry);delete ht[ui],delete vt[En],vt[ai(ti,Pt[Wi].geometry,!0)]=Wi,Pt[Si].geometry=null}else ui in vt?ln(ui,En,jn):En in ht?Ln(ui,En,jn):(An(vn),ht[ui]=Lt-1,vt[En]=Lt-1)}return Pt.filter(vn=>vn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ct,ht)=>Ct.sortKey-ht.sortKey)}update(n,a,p,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,p,y),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,p,y))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=my(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const p=this.lineVertexArray.length;if(n.segment!==void 0)for(const{x:y,y:C}of a)this.lineVertexArray.emplaceBack(y,C);return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(n,a,p,y,C,S,z,Q,W,J,ie,se,fe,_e){const Me=n.indexArray,Ve=n.layoutVertexArray,ut=n.globeExtVertexArray,Ct=n.segments.prepareSegment(4*a.length,Ve,Me,this.canOverlap?S.sortKey:void 0),ht=this.glyphOffsetArray.length,vt=Ct.vertexLength,Pt=this.allowVerticalPlacement&&z===js.vertical?Math.PI/2:0,Lt=S.text&&S.text.sections;for(let ln=0;ln<a.length;ln++){const{tl:Ln,tr:ai,bl:vn,br:$n,tex:jn,pixelOffsetTL:ti,pixelOffsetBR:ui,minFontScaleX:En,minFontScaleY:Si,glyphOffset:Wi,isSDF:ki,sectionIndex:_o}=a[ln],hi=Ct.vertexLength,vr=Wi[1];if(gy(Ve,W.x,W.y,Ln.x,vr+Ln.y,jn.x,jn.y,p,ki,ti.x,ti.y,En,Si),gy(Ve,W.x,W.y,ai.x,vr+ai.y,jn.x+jn.w,jn.y,p,ki,ui.x,ti.y,En,Si),gy(Ve,W.x,W.y,vn.x,vr+vn.y,jn.x,jn.y+jn.h,p,ki,ti.x,ui.y,En,Si),gy(Ve,W.x,W.y,$n.x,vr+$n.y,jn.x+jn.w,jn.y+jn.h,p,ki,ui.x,ui.y,En,Si),Q){const{x:yo,y:cs,z:vo}=Q.anchor,[Sr,aa,Bo]=Q.up;_y(ut,yo,cs,vo,Sr,aa,Bo),_y(ut,yo,cs,vo,Sr,aa,Bo),_y(ut,yo,cs,vo,Sr,aa,Bo),_y(ut,yo,cs,vo,Sr,aa,Bo),yy(n.dynamicLayoutVertexArray,yo,cs,vo,Pt)}else yy(n.dynamicLayoutVertexArray,W.x,W.y,W.z,Pt);Me.emplaceBack(hi,hi+1,hi+2),Me.emplaceBack(hi+1,hi+2,hi+3),Ct.vertexLength+=4,Ct.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Wi[0]),ln!==a.length-1&&_o===a[ln+1].sectionIndex||n.programConfigurations.populatePaintArrays(Ve.length,S,S.index,{},fe,_e,Lt&&Lt[_o])}const An=Q?Q.anchor:W;n.placedSymbolArray.emplaceBack(An.x,An.y,An.z,W.x,W.y,ht,this.glyphOffsetArray.length-ht,vt,J,ie,W.segment,p?p[0]:0,p?p[1]:0,y[0],y[1],z,0,!1,0,se,0)}_commitLayoutVertex(n,a,p,y,C,S,z){n.emplaceBack(a,p,y,C,S,Math.round(z.x),Math.round(z.y))}_addCollisionDebugVertices(n,a,p,y,C,S,z){const Q=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),W=Q.vertexLength,J=z.tileAnchorX,ie=z.tileAnchorY;for(let fe=0;fe<4;fe++)p.collisionVertexArray.emplaceBack(0,0,0,0);p.collisionVertexArrayExt.emplaceBack(a,-n.padding,-n.padding),p.collisionVertexArrayExt.emplaceBack(a,n.padding,-n.padding),p.collisionVertexArrayExt.emplaceBack(a,n.padding,n.padding),p.collisionVertexArrayExt.emplaceBack(a,-n.padding,n.padding),this._commitLayoutVertex(p.layoutVertexArray,y,C,S,J,ie,new Xe(n.x1,n.y1)),this._commitLayoutVertex(p.layoutVertexArray,y,C,S,J,ie,new Xe(n.x2,n.y1)),this._commitLayoutVertex(p.layoutVertexArray,y,C,S,J,ie,new Xe(n.x2,n.y2)),this._commitLayoutVertex(p.layoutVertexArray,y,C,S,J,ie,new Xe(n.x1,n.y2)),Q.vertexLength+=4;const se=p.indexArray;se.emplaceBack(W,W+1),se.emplaceBack(W+1,W+2),se.emplaceBack(W+2,W+3),se.emplaceBack(W+3,W),Q.primitiveLength+=4}_addTextDebugCollisionBoxes(n,a,p,y,C,S){for(let z=y;z<C;z++){const Q=p.get(z),W=this.getSymbolInstanceTextSize(n,S,a,z);this._addCollisionDebugVertices(Q,W,this.textCollisionBox,Q.projectedAnchorX,Q.projectedAnchorY,Q.projectedAnchorZ,S)}}_addIconDebugCollisionBoxes(n,a,p,y,C,S){for(let z=y;z<C;z++){const Q=p.get(z),W=this.getSymbolInstanceIconSize(n,a,S.placedIconSymbolIndex);this._addCollisionDebugVertices(Q,W,this.iconCollisionBox,Q.projectedAnchorX,Q.projectedAnchorY,Q.projectedAnchorZ,S)}}generateCollisionDebugBuffers(n,a){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new x0(Di,Am.members,Oa),this.iconCollisionBox=new x0(Di,Am.members,Oa);const p=Ld(this.iconSizeData,n),y=Ld(this.textSizeData,n);for(let C=0;C<this.symbolInstances.length;C++){const S=this.symbolInstances.get(C);this._addTextDebugCollisionBoxes(y,n,a,S.textBoxStartIndex,S.textBoxEndIndex,S),this._addTextDebugCollisionBoxes(y,n,a,S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S),this._addIconDebugCollisionBoxes(p,n,a,S.iconBoxStartIndex,S.iconBoxEndIndex,S),this._addIconDebugCollisionBoxes(p,n,a,S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex,S)}}getSymbolInstanceTextSize(n,a,p,y){const C=this.text.placedSymbolArray.get(a.rightJustifiedTextSymbolIndex>=0?a.rightJustifiedTextSymbolIndex:a.centerJustifiedTextSymbolIndex>=0?a.centerJustifiedTextSymbolIndex:a.leftJustifiedTextSymbolIndex>=0?a.leftJustifiedTextSymbolIndex:a.verticalPlacedTextSymbolIndex>=0?a.verticalPlacedTextSymbolIndex:y),S=hp(this.textSizeData,n,C)/Ca;return this.tilePixelRatio*S}getSymbolInstanceIconSize(n,a,p){const y=this.icon.placedSymbolArray.get(p),C=hp(this.iconSizeData,n,y);return this.tilePixelRatio*C}_commitDebugCollisionVertexUpdate(n,a,p){n.emplaceBack(a,-p,-p),n.emplaceBack(a,p,-p),n.emplaceBack(a,p,p),n.emplaceBack(a,-p,p)}_updateTextDebugCollisionBoxes(n,a,p,y,C,S){for(let z=y;z<C;z++){const Q=p.get(z),W=this.getSymbolInstanceTextSize(n,S,a,z);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,W,Q.padding)}}_updateIconDebugCollisionBoxes(n,a,p,y,C,S){for(let z=y;z<C;z++){const Q=p.get(z),W=this.getSymbolInstanceIconSize(n,a,S);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,W,Q.padding)}}updateCollisionDebugBuffers(n,a){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const p=Ld(this.iconSizeData,n),y=Ld(this.textSizeData,n);for(let C=0;C<this.symbolInstances.length;C++){const S=this.symbolInstances.get(C);this._updateTextDebugCollisionBoxes(y,n,a,S.textBoxStartIndex,S.textBoxEndIndex,S),this._updateTextDebugCollisionBoxes(y,n,a,S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S),this._updateIconDebugCollisionBoxes(p,n,a,S.iconBoxStartIndex,S.iconBoxEndIndex,S.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(p,n,a,S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex,S.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,a,p,y,C,S,z,Q,W){const J={};if(a<p){const{x1:ie,y1:se,x2:fe,y2:_e,padding:Me,projectedAnchorX:Ve,projectedAnchorY:ut,projectedAnchorZ:Ct,tileAnchorX:ht,tileAnchorY:vt,featureIndex:Pt}=n.get(a);J.textBox={x1:ie,y1:se,x2:fe,y2:_e,padding:Me,projectedAnchorX:Ve,projectedAnchorY:ut,projectedAnchorZ:Ct,tileAnchorX:ht,tileAnchorY:vt},J.textFeatureIndex=Pt}if(y<C){const{x1:ie,y1:se,x2:fe,y2:_e,padding:Me,projectedAnchorX:Ve,projectedAnchorY:ut,projectedAnchorZ:Ct,tileAnchorX:ht,tileAnchorY:vt,featureIndex:Pt}=n.get(y);J.verticalTextBox={x1:ie,y1:se,x2:fe,y2:_e,padding:Me,projectedAnchorX:Ve,projectedAnchorY:ut,projectedAnchorZ:Ct,tileAnchorX:ht,tileAnchorY:vt},J.verticalTextFeatureIndex=Pt}if(S<z){const{x1:ie,y1:se,x2:fe,y2:_e,padding:Me,projectedAnchorX:Ve,projectedAnchorY:ut,projectedAnchorZ:Ct,tileAnchorX:ht,tileAnchorY:vt,featureIndex:Pt}=n.get(S);J.iconBox={x1:ie,y1:se,x2:fe,y2:_e,padding:Me,projectedAnchorX:Ve,projectedAnchorY:ut,projectedAnchorZ:Ct,tileAnchorX:ht,tileAnchorY:vt},J.iconFeatureIndex=Pt}if(Q<W){const{x1:ie,y1:se,x2:fe,y2:_e,padding:Me,projectedAnchorX:Ve,projectedAnchorY:ut,projectedAnchorZ:Ct,tileAnchorX:ht,tileAnchorY:vt,featureIndex:Pt}=n.get(Q);J.verticalIconBox={x1:ie,y1:se,x2:fe,y2:_e,padding:Me,projectedAnchorX:Ve,projectedAnchorY:ut,projectedAnchorZ:Ct,tileAnchorX:ht,tileAnchorY:vt},J.verticalIconFeatureIndex=Pt}return J}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const p=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const p=n.placedSymbolArray.get(a),y=p.vertexStartIndex+4*p.numGlyphs;for(let C=p.vertexStartIndex;C<y;C+=4)n.indexArray.emplaceBack(C,C+1,C+2),n.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),p=Math.cos(n),y=[],C=[],S=[];for(let z=0;z<this.symbolInstances.length;++z){S.push(z);const Q=this.symbolInstances.get(z);y.push(0|Math.round(a*Q.tileAnchorX+p*Q.tileAnchorY)),C.push(Q.featureIndex)}return S.sort((z,Q)=>y[z]-y[Q]||C[Q]-C[z]),S}addToSortKeyRanges(n,a){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===a?p.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const p=this.symbolInstances.get(a);this.featureSortOrder.push(p.featureIndex);const{rightJustifiedTextSymbolIndex:y,centerJustifiedTextSymbolIndex:C,leftJustifiedTextSymbolIndex:S,verticalPlacedTextSymbolIndex:z,placedIconSymbolIndex:Q,verticalPlacedIconSymbolIndex:W}=p;y>=0&&this.addIndicesForPlacedSymbol(this.text,y),C>=0&&C!==y&&this.addIndicesForPlacedSymbol(this.text,C),S>=0&&S!==C&&S!==y&&this.addIndicesForPlacedSymbol(this.text,S),z>=0&&this.addIndicesForPlacedSymbol(this.text,z),Q>=0&&this.addIndicesForPlacedSymbol(this.icon,Q),W>=0&&this.addIndicesForPlacedSymbol(this.icon,W)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}yn(If,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),If.MAX_GLYPHS=65535,If.addDynamicAttributes=yy;const bE=new At({"symbol-placement":new Be(hn.layout_symbol["symbol-placement"]),"symbol-spacing":new Be(hn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Be(hn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ye(hn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Be(hn.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Be(hn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Be(hn.layout_symbol["icon-ignore-placement"]),"icon-optional":new Be(hn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Be(hn.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ye(hn.layout_symbol["icon-size"]),"icon-text-fit":new Be(hn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Be(hn.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ye(hn.layout_symbol["icon-image"]),"icon-rotate":new Ye(hn.layout_symbol["icon-rotate"]),"icon-padding":new Be(hn.layout_symbol["icon-padding"]),"icon-keep-upright":new Be(hn.layout_symbol["icon-keep-upright"]),"icon-offset":new Ye(hn.layout_symbol["icon-offset"]),"icon-anchor":new Ye(hn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Be(hn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Be(hn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Be(hn.layout_symbol["text-rotation-alignment"]),"text-field":new Ye(hn.layout_symbol["text-field"]),"text-font":new Ye(hn.layout_symbol["text-font"]),"text-size":new Ye(hn.layout_symbol["text-size"]),"text-max-width":new Ye(hn.layout_symbol["text-max-width"]),"text-line-height":new Ye(hn.layout_symbol["text-line-height"]),"text-letter-spacing":new Ye(hn.layout_symbol["text-letter-spacing"]),"text-justify":new Ye(hn.layout_symbol["text-justify"]),"text-radial-offset":new Ye(hn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Be(hn.layout_symbol["text-variable-anchor"]),"text-anchor":new Ye(hn.layout_symbol["text-anchor"]),"text-max-angle":new Be(hn.layout_symbol["text-max-angle"]),"text-writing-mode":new Be(hn.layout_symbol["text-writing-mode"]),"text-rotate":new Ye(hn.layout_symbol["text-rotate"]),"text-padding":new Be(hn.layout_symbol["text-padding"]),"text-keep-upright":new Be(hn.layout_symbol["text-keep-upright"]),"text-transform":new Ye(hn.layout_symbol["text-transform"]),"text-offset":new Ye(hn.layout_symbol["text-offset"]),"text-allow-overlap":new Be(hn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Be(hn.layout_symbol["text-ignore-placement"]),"text-optional":new Be(hn.layout_symbol["text-optional"])});var b0={paint:new At({"icon-opacity":new Ye(hn.paint_symbol["icon-opacity"]),"icon-color":new Ye(hn.paint_symbol["icon-color"]),"icon-halo-color":new Ye(hn.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ye(hn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ye(hn.paint_symbol["icon-halo-blur"]),"icon-translate":new Be(hn.paint_symbol["icon-translate"]),"icon-translate-anchor":new Be(hn.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ye(hn.paint_symbol["text-opacity"]),"text-color":new Ye(hn.paint_symbol["text-color"],{runtimeType:Va,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Ye(hn.paint_symbol["text-halo-color"]),"text-halo-width":new Ye(hn.paint_symbol["text-halo-width"]),"text-halo-blur":new Ye(hn.paint_symbol["text-halo-blur"]),"text-translate":new Be(hn.paint_symbol["text-translate"]),"text-translate-anchor":new Be(hn.paint_symbol["text-translate-anchor"])}),layout:bE};class Kw{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:Wo,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}yn(Kw,"FormatSectionOverride",{omit:["defaultValue"]});class vy extends Gu{constructor(n){super(n,b0)}recalculate(n,a){super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const p=this.layout.get("text-writing-mode");if(p){const y=[];for(const C of p)y.indexOf(C)<0&&y.push(C);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,a,p,y){const C=this.layout.get(n).evaluate(a,{},p,y),S=this._unevaluatedLayout._values[n];return S.isDataDriven()||hc(S.value)||!C?C:function(z,Q){return Q.replace(/{([^{}]+)}/g,(W,J)=>J in z?String(z[J]):"")}(a.properties,C)}createBucket(n){return new If(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of b0.paint.overridableProperties){if(!vy.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),p=new Kw(a),y=new Mc(p,a.property.specification);let C=null;C=a.value.kind==="constant"||a.value.kind==="source"?new ul("source",y):new Oo("composite",y,a.value.zoomStops,a.value._interpolationType),this.paint._values[n]=new tt(a.property,C,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,p){return!(!this.layout||a.isDataDriven()||p.isDataDriven())&&vy.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const p=n.get("text-field"),y=b0.paint.properties[a];let C=!1;const S=z=>{for(const Q of z)if(y.overrides&&y.overrides.hasOverride(Q))return void(C=!0)};if(p.value.kind==="constant"&&p.value.value instanceof ia)S(p.value.value.sections);else if(p.value.kind==="source"){const z=W=>{C||(W instanceof ao&&fs(W.value)===Sa?S(W.value.sections):W instanceof vl?S(W.sections):W.eachChild(z))},Q=p.value;Q._styleExpression&&z(Q._styleExpression.expression)}return C}getProgramConfiguration(n){return new Yd(this,n)}}var wE={paint:new At({"background-color":new Be(hn.paint_background["background-color"]),"background-pattern":new Be(hn.paint_background["background-pattern"]),"background-opacity":new Be(hn.paint_background["background-opacity"])})},CE={paint:new At({"raster-opacity":new Be(hn.paint_raster["raster-opacity"]),"raster-hue-rotate":new Be(hn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Be(hn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Be(hn.paint_raster["raster-brightness-max"]),"raster-saturation":new Be(hn.paint_raster["raster-saturation"]),"raster-contrast":new Be(hn.paint_raster["raster-contrast"]),"raster-resampling":new Be(hn.paint_raster["raster-resampling"]),"raster-fade-duration":new Be(hn.paint_raster["raster-fade-duration"])})};class BE extends Gu{constructor(n){super(n,{}),this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var TE={paint:new At({"sky-type":new Be(hn.paint_sky["sky-type"]),"sky-atmosphere-sun":new Be(hn.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Be(hn.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Be(hn.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Be(hn.paint_sky["sky-gradient-radius"]),"sky-gradient":new lt(hn.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Be(hn.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Be(hn.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Be(hn.paint_sky["sky-opacity"])})};function w0(o,n,a){const p=[0,0,1],y=kA([]);return PA(y,y,a?-Ut(o)+Math.PI:Ut(o)),Qr(y,y,-Ut(n)),G_(p,p,y),El(p,p)}const EE={circle:class extends Gu{constructor(o){super(o,Xv)}createBucket(o){return new im(o)}queryRadius(o){const n=o;return dA("circle-radius",this,n)+dA("circle-stroke-width",this,n)+am(this.paint.get("circle-translate"))}queryIntersectsFeature(o,n,a,p,y,C,S,z){const Q=gg(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,o.pixelToTileUnitsFactor),W=this.paint.get("circle-radius").evaluate(n,a)+this.paint.get("circle-stroke-width").evaluate(n,a);return ty(o,p,C,S,z,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",Q,W)}getProgramIds(){return["circle"]}getProgramConfiguration(o){return new Yd(this,o)}},heatmap:class extends Gu{createBucket(o){return new lm(o)}constructor(o){super(o,rp),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=op({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(o){return dA("heatmap-radius",this,o)}queryIntersectsFeature(o,n,a,p,y,C,S,z){const Q=this.paint.get("heatmap-radius").evaluate(n,a);return ty(o,p,C,S,z,!0,!0,new Xe(0,0),Q)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(o){return new Yd(this,o)}},hillshade:class extends Gu{constructor(o){super(o,e0)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Gu{constructor(o){super(o,de)}getProgramIds(){const o=this.paint.get("fill-pattern"),n=o&&o.constantOr(1),a=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&a.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),a}getProgramConfiguration(o){return new Yd(this,o)}recalculate(o,n){super.recalculate(o,n);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Y(o)}queryRadius(){return am(this.paint.get("fill-translate"))}queryIntersectsFeature(o,n,a,p,y,C){return!o.queryGeometry.isAboveHorizon&&bf(Id(o.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,o.pixelToTileUnitsFactor),p)}isTileClipped(){return!0}},"fill-extrusion":class extends Gu{constructor(o){super(o,$a)}createBucket(o){return new ys(o)}queryRadius(){return am(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(o){return new Yd(this,o)}queryIntersectsFeature(o,n,a,p,y,C,S,z,Q){const W=gg(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,o.pixelToTileUnitsFactor),J=this.paint.get("fill-extrusion-height").evaluate(n,a),ie=this.paint.get("fill-extrusion-base").evaluate(n,a),se=[0,0],fe=z&&C.elevation,_e=C.elevation?C.elevation.exaggeration():1,Me=o.tile.getBucket(this);if(fe&&Me instanceof ys){const vt=Me.centroidVertexArray,Pt=Q+1;Pt<vt.length&&(se[0]=vt.geta_centroid_pos0(Pt),se[1]=vt.geta_centroid_pos1(Pt))}if(se[0]===0&&se[1]===1)return!1;C.projection.name==="globe"&&(p=$s([p],[new Xe(0,0),new Xe(Ar,Ar)],o.tileID.canonical).map(vt=>vt.polygon).flat());const Ve=fe?z:null,[ut,Ct]=function(vt,Pt,Lt,An,ln,Ln,ai,vn,$n,jn,ti){return vt.projection.name==="globe"?function(ui,En,Si,Wi,ki,_o,hi,vr,yo,cs,vo){const Sr=[],aa=[],Bo=ui.projection.upVectorScale(vo,ui.center.lat,ui.worldSize).metersToTile,To=[0,0,0,1],Hs=[0,0,0,1],Js=(Vs,La,el,Ll)=>{Vs[0]=La,Vs[1]=el,Vs[2]=Ll,Vs[3]=1},ea=Ml();Si>0&&(Si+=ea),Wi+=ea;for(const Vs of En){const La=[],el=[];for(const Ll of Vs){const Gs=Ll.x+ki.x,tc=Ll.y+ki.y,kl=ui.projection.projectTilePoint(Gs,tc,vo),ja=ui.projection.upVector(vo,Ll.x,Ll.y);let ds=Si,Pl=Wi;if(hi){const ta=cu(Gs,tc,Si,Wi,hi,vr,yo,cs);ds+=ta.base,Pl+=ta.top}Si!==0?Js(To,kl.x+ja[0]*Bo*ds,kl.y+ja[1]*Bo*ds,kl.z+ja[2]*Bo*ds):Js(To,kl.x,kl.y,kl.z),Js(Hs,kl.x+ja[0]*Bo*Pl,kl.y+ja[1]*Bo*Pl,kl.z+ja[2]*Bo*Pl),fa(To,To,_o),fa(Hs,Hs,_o),La.push(new Cs(To[0],To[1],To[2])),el.push(new Cs(Hs[0],Hs[1],Hs[2]))}Sr.push(La),aa.push(el)}return[Sr,aa]}(vt,Pt,Lt,An,ln,Ln,ai,vn,$n,jn,ti):ai?function(ui,En,Si,Wi,ki,_o,hi,vr,yo){const cs=[],vo=[],Sr=[0,0,0,1];for(const aa of ui){const Bo=[],To=[];for(const Hs of aa){const Js=Hs.x+Wi.x,ea=Hs.y+Wi.y,Vs=cu(Js,ea,En,Si,_o,hi,vr,yo);Sr[0]=Js,Sr[1]=ea,Sr[2]=Vs.base,Sr[3]=1,Cd(Sr,Sr,ki),Sr[3]=Math.max(Sr[3],1e-5);const La=new Cs(Sr[0]/Sr[3],Sr[1]/Sr[3],Sr[2]/Sr[3]);Sr[0]=Js,Sr[1]=ea,Sr[2]=Vs.top,Sr[3]=1,Cd(Sr,Sr,ki),Sr[3]=Math.max(Sr[3],1e-5);const el=new Cs(Sr[0]/Sr[3],Sr[1]/Sr[3],Sr[2]/Sr[3]);Bo.push(La),To.push(el)}cs.push(Bo),vo.push(To)}return[cs,vo]}(Pt,Lt,An,ln,Ln,ai,vn,$n,jn):function(ui,En,Si,Wi,ki){const _o=[],hi=[],vr=ki[8]*En,yo=ki[9]*En,cs=ki[10]*En,vo=ki[11]*En,Sr=ki[8]*Si,aa=ki[9]*Si,Bo=ki[10]*Si,To=ki[11]*Si;for(const Hs of ui){const Js=[],ea=[];for(const Vs of Hs){const La=Vs.x+Wi.x,el=Vs.y+Wi.y,Ll=ki[0]*La+ki[4]*el+ki[12],Gs=ki[1]*La+ki[5]*el+ki[13],tc=ki[2]*La+ki[6]*el+ki[14],kl=ki[3]*La+ki[7]*el+ki[15],ja=Ll+vr,ds=Gs+yo,Pl=tc+cs,ta=Math.max(kl+vo,1e-5),Th=Ll+Sr,Fl=Gs+aa,uu=tc+Bo,zc=Math.max(kl+To,1e-5);Js.push(new Cs(ja/ta,ds/ta,Pl/ta)),ea.push(new Cs(Th/zc,Fl/zc,uu/zc))}_o.push(Js),hi.push(ea)}return[_o,hi]}(Pt,Lt,An,ln,Ln)}(C,p,ie,J,W,S,Ve,se,_e,C.center.lat,o.tileID.canonical),ht=o.queryGeometry;return function(vt,Pt,Lt){let An=1/0;bf(Lt,Pt)&&(An=Do(Lt,Pt[0]));for(let ln=0;ln<Pt.length;ln++){const Ln=Pt[ln],ai=vt[ln];for(let vn=0;vn<Ln.length-1;vn++){const $n=Ln[vn],jn=[$n,Ln[vn+1],ai[vn+1],ai[vn],$n];np(Lt,jn)&&(An=Math.min(An,Do(Lt,jn)))}}return An!==1/0&&An}(ut,Ct,ht.isPointQuery()?ht.screenBounds:ht.screenGeometry)}},line:class extends Gu{constructor(o){super(o,Go),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof Ah,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(o,n){super.recalculate(o,n),this.paint._values["line-floorwidth"]=Ts.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Pc(o)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(o){return new Yd(this,o)}queryRadius(o){const n=o,a=$A(dA("line-width",this,n),dA("line-gap-width",this,n)),p=dA("line-offset",this,n);return a/2+Math.abs(p)+am(this.paint.get("line-translate"))}queryIntersectsFeature(o,n,a,p,y,C){if(o.queryGeometry.isAboveHorizon)return!1;const S=Id(o.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,o.pixelToTileUnitsFactor),z=o.pixelToTileUnitsFactor/2*$A(this.paint.get("line-width").evaluate(n,a),this.paint.get("line-gap-width").evaluate(n,a)),Q=this.paint.get("line-offset").evaluate(n,a);return Q&&(p=function(W,J){const ie=[],se=new Xe(0,0);for(let fe=0;fe<W.length;fe++){const _e=W[fe],Me=[];for(let Ve=0;Ve<_e.length;Ve++){const ut=_e[Ve],Ct=_e[Ve+1],ht=Ve===0?se:ut.sub(_e[Ve-1])._unit()._perp(),vt=Ve===_e.length-1?se:Ct.sub(ut)._unit()._perp(),Pt=ht._add(vt)._unit();Pt._mult(1/(Pt.x*vt.x+Pt.y*vt.y)),Me.push(Pt._mult(J)._add(ut))}ie.push(Me)}return ie}(p,Q*o.pixelToTileUnitsFactor)),function(W,J,ie){for(let se=0;se<J.length;se++){const fe=J[se];if(W.length>=3){for(let _e=0;_e<fe.length;_e++)if(bh(W,fe[_e]))return!0}if(rm(W,fe,ie))return!0}return!1}(S,p,z)}isTileClipped(){return!0}},symbol:vy,background:class extends Gu{constructor(o){super(o,wE)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Gu{constructor(o){super(o,CE)}getProgramIds(){return["raster"]}},sky:class extends Gu{constructor(o){super(o,TE),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="sky-gradient"?this._updateColorRamp():o!=="sky-atmosphere-sun"&&o!=="sky-atmosphere-halo-color"&&o!=="sky-atmosphere-color"&&o!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=op({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(o){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=o.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(o,n){if(this.paint.get("sky-type")==="atmosphere"){const p=this.paint.get("sky-atmosphere-sun"),y=!p,C=o.style.light,S=C.properties.get("position");return y&&C.properties.get("anchor")==="viewport"&&di("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),y?w0(S.azimuthal,90-S.polar,n):w0(p[0],90-p[1],n)}const a=this.paint.get("sky-gradient-center");return w0(a[0],90-a[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(o){this._skyboxInvalidated=!1,this._lightPosition=o.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const o=this.paint.get("sky-type");return o==="atmosphere"?["skyboxCapture","skybox"]:o==="gradient"?["skyboxGradient"]:null}}};class Rg{constructor(n,a,p,y){this.context=n,this.format=p,this.texture=n.gl.createTexture(),this.update(a,y)}update(n,a,p){const{width:y,height:C}=n,{context:S}=this,{gl:z}=S,{HTMLImageElement:Q,HTMLCanvasElement:W,HTMLVideoElement:J,ImageData:ie,ImageBitmap:se}=U;if(z.bindTexture(z.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!a||a.premultiply!==!1)),p||this.size&&this.size[0]===y&&this.size[1]===C){const{x:fe,y:_e}=p||{x:0,y:0};n instanceof Q||n instanceof W||n instanceof J||n instanceof ie||se&&n instanceof se?z.texSubImage2D(z.TEXTURE_2D,0,fe,_e,z.RGBA,z.UNSIGNED_BYTE,n):z.texSubImage2D(z.TEXTURE_2D,0,fe,_e,y,C,z.RGBA,z.UNSIGNED_BYTE,n.data)}else this.size=[y,C],n instanceof Q||n instanceof W||n instanceof J||n instanceof ie||se&&n instanceof se?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,n):z.texImage2D(z.TEXTURE_2D,0,this.format,y,C,0,this.format,z.UNSIGNED_BYTE,n.data);this.useMipmap=!!(a&&a.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&z.generateMipmap(z.TEXTURE_2D)}bind(n,a){const{context:p}=this,{gl:y}=p;y.bindTexture(y.TEXTURE_2D,this.texture),n!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,n),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,this.useMipmap?n===y.NEAREST?y.NEAREST_MIPMAP_NEAREST:y.LINEAR_MIPMAP_NEAREST:n),this.filter=n),a!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,a),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class SE{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class IE{constructor(){this.tasks={},this.taskQueue=[],Vr(["process"],this),this.invoker=new SE(this.process),this.nextId=0}add(n,a){const p=this.nextId++,y=function({type:C,isSymbolTile:S,zoom:z}){return z=z||0,C==="message"?0:C!=="maybePrepare"||S?C!=="parseTile"||S?C==="parseTile"&&S?300-z:C==="maybePrepare"&&S?400-z:500:200-z:100-z}(a);if(y===0){Ri();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[p]={fn:n,metadata:a,priority:y,id:p},this.taskQueue.push(p),this.invoker.trigger(),{cancel:()=>{delete this.tasks[p]}}}process(){Ri();try{if(this.taskQueue=this.taskQueue.filter(p=>!!this.tasks[p]),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const a=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!a)return;a.fn()}finally{}}pick(){let n=null,a=1/0;for(let y=0;y<this.taskQueue.length;y++){const C=this.tasks[this.taskQueue[y]];C.priority<a&&(a=C.priority,n=y)}if(n===null)return null;const p=this.taskQueue[n];return this.taskQueue.splice(n,1),p}remove(){this.invoker.remove()}}class w{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const p=n[a];this._stringToNumber[p]=a,this._numberToString[a]=p}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const M=["tile","layer","source","sourceLayer","state"];class Z{constructor(n,a,p,y,C){this.type="Feature",this._vectorTileFeature=n,this._z=a,this._x=p,this._y=y,this.properties=n.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const a of M)this[a]!==void 0&&(n[a]=this[a]);return n}}const ue=32,Ue=33,it=new Uint16Array(8184);for(let o=0;o<2046;o++){let n=o+2,a=0,p=0,y=0,C=0,S=0,z=0;for(1&n?y=C=S=ue:a=p=z=ue;(n>>=1)>1;){const W=a+y>>1,J=p+C>>1;1&n?(y=a,C=p,a=S,p=z):(a=y,p=C,y=S,C=z),S=W,z=J}const Q=4*o;it[Q+0]=a,it[Q+1]=p,it[Q+2]=y,it[Q+3]=C}const Et=new Uint16Array(2178),Ot=new Uint8Array(1089),sn=new Uint16Array(1089);function ii(o){return o===0?-.03125:o===32?.03125:0}var oi=Nt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Ai={type:2,extent:Ar,loadGeometry:()=>[[new Xe(0,0),new Xe(Ar+1,0),new Xe(Ar+1,Ar+1),new Xe(0,Ar+1),new Xe(0,0)]]};class Gi{constructor(n,a,p,y,C){this.tileID=n,this.uid=ei(),this.uses=0,this.tileSize=a,this.tileZoom=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=C,this.expiredRequestCount=0,this.state="loading",y&&y.transform&&(this.projection=y.transform.projection)}registerFadeDuration(n){const a=n+this.timeAdded;a<mr.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=VA(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,a,p){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(y,C){const S={};if(!C)return S;for(const z of y){const Q=z.layerIds.map(W=>C.getLayer(W)).filter(Boolean);if(Q.length!==0){z.layers=Q,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map(W=>Q.filter(J=>J.id===W)[0]));for(const W of Q)S[W.id]=z}}return S}(n.buckets,a.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const C=this.buckets[y];if(C instanceof If){if(this.hasSymbolBuckets=!0,!p)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const C=this.buckets[y];if(C instanceof If&&C.hasRTLText){this.hasRTLText=!0,X.isLoading()||X.isLoaded()||R()!=="deferred"||K();break}}this.queryPadding=0;for(const y in this.buckets){const C=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(y).queryRadius(C))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new ts}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const p in this.buckets){const y=this.buckets[p];y.uploadPending()&&y.upload(n)}const a=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Rg(n,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Rg(n,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Rg(n,this.lineAtlas.image,a.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,a,p,y,C,S,z,Q){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:y,pixelPosMatrix:z,transform:S,params:C,tileTransform:this.tileTransform},n,a,p):{}}querySourceFeatures(n,a){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const y=p.loadVTLayers(),C=a?a.sourceLayer:"",S=y._geojsonTileLayer||y[C];if(!S)return;const z=Ti(a&&a.filter),{z:Q,x:W,y:J}=this.tileID.canonical,ie={z:Q,x:W,y:J};for(let se=0;se<S.length;se++){const fe=S.feature(se);if(z.needGeometry){const Ve=RA(fe,!0);if(!z.filter(new ee(this.tileID.overscaledZ),Ve,this.tileID.canonical))continue}else if(!z.filter(new ee(this.tileID.overscaledZ),fe))continue;const _e=p.getId(fe,C),Me=new Z(fe,Q,W,J,_e);Me.tile=ie,n.push(Me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const a=this.expirationTime;if(n.cacheControl){const p=hr(n.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const p=Date.now();let y=!1;if(this.expirationTime>p)y=!1;else if(a)if(this.expirationTime<a)y=!0;else{const C=this.expirationTime-a;C?this.expirationTime=p+Math.max(C,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0||!a)return;const p=this.latestFeatureIndex.loadVTLayers(),y=a.style.listImages();for(const C in this.buckets){if(!a.style.hasLayer(C))continue;const S=this.buckets[C],z=S.layers[0].sourceLayer||"_geojsonTileLayer",Q=p[z],W=n[z];if(!Q||!W||Object.keys(W).length===0)continue;if(S.update(W,Q,y,this.imageAtlas&&this.imageAtlas.patternPositions||{}),S instanceof Pc||S instanceof Y){const ie=a.style._getSourceCache(S.layers[0].source);a._terrain&&a._terrain.enabled&&ie&&S.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(ie.id,this.tileID)}const J=a&&a.style&&a.style.getLayer(C);J&&(this.queryPadding=Math.max(this.queryPadding,J.queryRadius(S)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<mr.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=mr.now()+n}setTexture(n,a){const p=a.context,y=p.gl;this.texture=this.texture||a.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new Rg(p,n,y.RGBA,{useMipmap:!0}),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE))}setDependencies(n,a){const p={};for(const y of a)p[y]=!0;this.dependencies[n]=p}hasDependency(n,a){for(const p of n){const y=this.dependencies[p];if(y){for(const C of a)if(y[C])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,a){if(!a||a.name==="mercator"||this._tileDebugBuffer)return;const p=Sd(Ai,this.tileID.canonical,this.tileTransform)[0],y=new Nn,C=new iu;for(let S=0;S<p.length;S++){const{x:z,y:Q}=p[S];y.emplaceBack(z,Q),C.emplaceBack(S)}C.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(C),this._tileDebugBuffer=n.createVertexBuffer(y,yf.members),this._tileDebugSegments=sa.simpleSegment(0,0,y.length,C.length)}_makeTileBoundsBuffers(n,a){if(this._tileBoundsBuffer||!a||a.name==="mercator")return;const p=Sd(Ai,this.tileID.canonical,this.tileTransform)[0];let y,C;if(this.isRaster){const S=function(z,Q){const W=VA(z,Q),J=Math.pow(2,z.z);for(let Ve=0;Ve<Ue;Ve++)for(let ut=0;ut<Ue;ut++){const Ct=Iu((z.x+(ut+ii(ut))/ue)/J),ht=Al((z.y+(Ve+ii(Ve))/ue)/J),vt=Q.project(Ct,ht),Pt=Ve*Ue+ut;Et[2*Pt+0]=Math.round((vt.x*W.scale-W.x)*Ar),Et[2*Pt+1]=Math.round((vt.y*W.scale-W.y)*Ar)}Ot.fill(0),sn.fill(0);for(let Ve=2045;Ve>=0;Ve--){const ut=4*Ve,Ct=it[ut+0],ht=it[ut+1],vt=it[ut+2],Pt=it[ut+3],Lt=Ct+vt>>1,An=ht+Pt>>1,ln=Lt+An-ht,Ln=An+Ct-Lt,ai=ht*Ue+Ct,vn=Pt*Ue+vt,$n=An*Ue+Lt,jn=Math.hypot((Et[2*ai+0]+Et[2*vn+0])/2-Et[2*$n+0],(Et[2*ai+1]+Et[2*vn+1])/2-Et[2*$n+1])>=16;Ot[$n]=Ot[$n]||(jn?1:0),Ve<1022&&(Ot[$n]=Ot[$n]||Ot[(ht+Ln>>1)*Ue+(Ct+ln>>1)]||Ot[(Pt+Ln>>1)*Ue+(vt+ln>>1)])}const ie=new Pn,se=new Yi;let fe=0;function _e(Ve,ut){const Ct=ut*Ue+Ve;return sn[Ct]===0&&(ie.emplaceBack(Et[2*Ct+0],Et[2*Ct+1],Ve*Ar/ue,ut*Ar/ue),sn[Ct]=++fe),sn[Ct]-1}function Me(Ve,ut,Ct,ht,vt,Pt){const Lt=Ve+Ct>>1,An=ut+ht>>1;if(Math.abs(Ve-vt)+Math.abs(ut-Pt)>1&&Ot[An*Ue+Lt])Me(vt,Pt,Ve,ut,Lt,An),Me(Ct,ht,vt,Pt,Lt,An);else{const ln=_e(Ve,ut),Ln=_e(Ct,ht),ai=_e(vt,Pt);se.emplaceBack(ln,Ln,ai)}}return Me(0,0,ue,ue,ue,0),Me(ue,ue,0,0,0,ue),{vertices:ie,indices:se}}(this.tileID.canonical,a);y=S.vertices,C=S.indices}else{y=new Pn,C=new Yi;for(const{x:z,y:Q}of p)y.emplaceBack(z,Q,0,0);const S=up(y.int16,void 0,4);for(let z=0;z<S.length;z+=3)C.emplaceBack(S[z],S[z+1],S[z+2])}this._tileBoundsBuffer=n.createVertexBuffer(y,oi.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(C),this._tileBoundsSegments=sa.simpleSegment(0,0,y.length,C.length)}_makeGlobeTileDebugBuffers(n,a){const p=a.projection;if(!p||p.name!=="globe"||a.freezeTileCoverage)return;const y=this.tileID.canonical,C=uA(K_(y,a)),S=Td(a.zoom);let z;S>0&&(z=pf(new Float64Array(16),a.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,y,a,C,z,S),this._makeGlobeTileDebugTextBuffer(n,y,a,C,z,S)}_globePoint(n,a,p,y,C,S,z){let Q=zA(n,a,p);if(S){const W=1<<p.z,J=Hh(y.center.lng),ie=id(y.center.lat),se=(p.x+.5)/W-J;let fe=0;se>.5?fe=-1:se<-.5&&(fe=1);let _e=(n/Ar+p.x)/W+fe,Me=(a/Ar+p.y)/W;_e=(_e-J)*y._pixelsPerMercatorPixel+J,Me=(Me-ie)*y._pixelsPerMercatorPixel+ie;const Ve=[_e*y.worldSize,Me*y.worldSize,0];fa(Ve,Ve,S),Q=lA(Q,Ve,z)}return fa(Q,Q,C)}_makeGlobeTileDebugBorderBuffer(n,a,p,y,C,S){const z=new Nn,Q=new iu,W=new Vt,J=(se,fe,_e,Me,Ve)=>{const ut=(_e-se)/(Ve-1),Ct=(Me-fe)/(Ve-1),ht=z.length;for(let vt=0;vt<Ve;vt++){const Pt=se+vt*ut,Lt=fe+vt*Ct;z.emplaceBack(Pt,Lt);const An=this._globePoint(Pt,Lt,a,p,y,C,S);W.emplaceBack(An[0],An[1],An[2]),Q.emplaceBack(ht+vt)}},ie=Ar;J(0,0,ie,0,16),J(ie,0,ie,ie,16),J(ie,ie,0,ie,16),J(0,ie,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(Q),this._tileDebugBuffer=n.createVertexBuffer(z,yf.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(W,Jf.members),this._tileDebugSegments=sa.simpleSegment(0,0,z.length,Q.length)}_makeGlobeTileDebugTextBuffer(n,a,p,y,C,S){const z=Ar/4,Q=new Nn,W=new Yi,J=new Vt,ie=25;W.reserve(32),Q.reserve(ie),J.reserve(ie);const se=(fe,_e)=>ie*fe+_e;for(let fe=0;fe<ie;fe++){const _e=fe*z;for(let Me=0;Me<ie;Me++){const Ve=Me*z;Q.emplaceBack(Ve,_e);const ut=this._globePoint(Ve,_e,a,p,y,C,S);J.emplaceBack(ut[0],ut[1],ut[2])}}for(let fe=0;fe<4;fe++)for(let _e=0;_e<4;_e++){const Me=se(fe,_e),Ve=se(fe,_e+1),ut=se(fe+1,_e),Ct=se(fe+1,_e+1);W.emplaceBack(Me,Ve,ut),W.emplaceBack(ut,Ve,Ct)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(W),this._tileDebugTextBuffer=n.createVertexBuffer(Q,yf.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(J,Jf.members),this._tileDebugTextSegments=sa.simpleSegment(0,0,ie,32)}}class Er{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,a,p){const y=String(a);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][y]=this.stateChanges[n][y]||{},Bn(this.stateChanges[n][y],p),this.deletedStates[n]===null){this.deletedStates[n]={};for(const C in this.state[n])C!==y&&(this.deletedStates[n][C]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][y]===null){this.deletedStates[n][y]={};for(const C in this.state[n][y])p[C]||(this.deletedStates[n][y][C]=null)}else for(const C in p)this.deletedStates[n]&&this.deletedStates[n][y]&&this.deletedStates[n][y][C]===null&&delete this.deletedStates[n][y][C]}removeFeatureState(n,a,p){if(this.deletedStates[n]===null)return;const y=String(a);if(this.deletedStates[n]=this.deletedStates[n]||{},p&&a!==void 0)this.deletedStates[n][y]!==null&&(this.deletedStates[n][y]=this.deletedStates[n][y]||{},this.deletedStates[n][y][p]=null);else if(a!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][y])for(p in this.deletedStates[n][y]={},this.stateChanges[n][y])this.deletedStates[n][y][p]=null;else this.deletedStates[n][y]=null;else this.deletedStates[n]=null}getState(n,a){const p=String(a),y=Bn({},(this.state[n]||{})[p],(this.stateChanges[n]||{})[p]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const C=this.deletedStates[n][a];if(C===null)return{};for(const S in C)delete y[S]}return y}initializeTileState(n,a){n.setFeatureState(this.state,a)}coalesceChanges(n,a){const p={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const C={};for(const S in this.stateChanges[y])this.state[y][S]||(this.state[y][S]={}),Bn(this.state[y][S],this.stateChanges[y][S]),C[S]=this.state[y][S];p[y]=C}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const C={};if(this.deletedStates[y]===null)for(const S in this.state[y])C[S]={},this.state[y][S]={};else for(const S in this.deletedStates[y]){if(this.deletedStates[y][S]===null)this.state[y][S]={};else if(this.state[y][S])for(const z of Object.keys(this.deletedStates[y][S]))delete this.state[y][S][z];C[S]=this.state[y][S]}p[y]=p[y]||{},Bn(p[y],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const y in n)n[y].setFeatureState(p,a)}}class oo{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,a){const p=this.toIdx(n,a);return{min:this.minimums[p],max:this.maximums[p]}}isLeaf(n,a){return this.leaves[this.toIdx(n,a)]}toIdx(n,a){return a*this.size+n}}function $o(o,n,a,p){let y=0,C=Number.MAX_VALUE;for(let S=0;S<3;S++)if(Math.abs(p[S])<1e-15){if(a[S]<o[S]||a[S]>n[S])return null}else{const z=1/p[S];let Q=(o[S]-a[S])*z,W=(n[S]-a[S])*z;if(Q>W){const J=Q;Q=W,W=J}if(Q>y&&(y=Q),W<C&&(C=W),y>C)return null}return y}function so(o,n,a,p,y,C,S,z,Q,W,J){const ie=p-o,se=y-n,fe=C-a,_e=S-o,Me=z-n,Ve=Q-a,ut=J[1]*Ve-J[2]*Me,Ct=J[2]*_e-J[0]*Ve,ht=J[0]*Me-J[1]*_e,vt=ie*ut+se*Ct+fe*ht;if(Math.abs(vt)<1e-15)return null;const Pt=1/vt,Lt=W[0]-o,An=W[1]-n,ln=W[2]-a,Ln=(Lt*ut+An*Ct+ln*ht)*Pt;if(Ln<0||Ln>1)return null;const ai=An*fe-ln*se,vn=ln*ie-Lt*fe,$n=Lt*se-An*ie,jn=(J[0]*ai+J[1]*vn+J[2]*$n)*Pt;return jn<0||Ln+jn>1?null:(_e*ai+Me*vn+Ve*$n)*Pt}function is(o,n,a){return(o-n)/(a-n)}function ls(o,n,a,p,y,C,S,z,Q){const W=1<<a,J=C-p,ie=S-y,se=(o+1)/W*J+p,fe=(n+0)/W*ie+y,_e=(n+1)/W*ie+y;z[0]=(o+0)/W*J+p,z[1]=fe,Q[0]=se,Q[1]=_e}class Bh{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const a=function(C){const S=Math.ceil(Math.log2(C.dim/8)),z=[];let Q=Math.ceil(Math.pow(2,S));const W=1/Q,J=(fe,_e,Me,Ve,ut)=>{const Ct=Ve?1:0,ht=(fe+1)*Me-Ct,vt=_e*Me,Pt=(_e+1)*Me-Ct;ut[0]=fe*Me,ut[1]=vt,ut[2]=ht,ut[3]=Pt};let ie=new oo(Q);const se=[];for(let fe=0;fe<Q*Q;fe++){J(fe%Q,Math.floor(fe/Q),W,!1,se);const _e=ec(se[0],se[1],C),Me=ec(se[2],se[1],C),Ve=ec(se[2],se[3],C),ut=ec(se[0],se[3],C);ie.minimums.push(Math.min(_e,Me,Ve,ut)),ie.maximums.push(Math.max(_e,Me,Ve,ut)),ie.leaves.push(1)}for(z.push(ie),Q/=2;Q>=1;Q/=2){const fe=z[z.length-1];ie=new oo(Q);for(let _e=0;_e<Q*Q;_e++){J(_e%Q,Math.floor(_e/Q),2,!0,se);const Me=fe.getElevation(se[0],se[1]),Ve=fe.getElevation(se[2],se[1]),ut=fe.getElevation(se[2],se[3]),Ct=fe.getElevation(se[0],se[3]),ht=fe.isLeaf(se[0],se[1]),vt=fe.isLeaf(se[2],se[1]),Pt=fe.isLeaf(se[2],se[3]),Lt=fe.isLeaf(se[0],se[3]),An=Math.min(Me.min,Ve.min,ut.min,Ct.min),ln=Math.max(Me.max,Ve.max,ut.max,Ct.max),Ln=ht&&vt&&Pt&&Lt;ie.maximums.push(ln),ie.minimums.push(An),ie.leaves.push(ln-An<=5&&Ln?1:0)}z.push(ie)}return z}(this.dem),p=a.length-1,y=a[p];this._addNode(y.minimums[0],y.maximums[0],y.leaves[0]),this._construct(a,0,0,p,0)}raycastRoot(n,a,p,y,C,S,z=1){return $o([n,a,-100],[p,y,this.maximums[0]*z],C,S)}raycast(n,a,p,y,C,S,z=1){if(!this.nodeCount)return null;const Q=this.raycastRoot(n,a,p,y,C,S,z);if(Q==null)return null;const W=[],J=[],ie=[],se=[],fe=[{idx:0,t:Q,nodex:0,nodey:0,depth:0}];for(;fe.length>0;){const{idx:_e,t:Me,nodex:Ve,nodey:ut,depth:Ct}=fe.pop();if(this.leaves[_e]){ls(Ve,ut,Ct,n,a,p,y,ie,se);const vt=1<<Ct,Pt=(Ve+0)/vt,Lt=(Ve+1)/vt,An=(ut+0)/vt,ln=(ut+1)/vt,Ln=ec(Pt,An,this.dem)*z,ai=ec(Lt,An,this.dem)*z,vn=ec(Lt,ln,this.dem)*z,$n=ec(Pt,ln,this.dem)*z,jn=so(ie[0],ie[1],Ln,se[0],ie[1],ai,se[0],se[1],vn,C,S),ti=so(se[0],se[1],vn,ie[0],se[1],$n,ie[0],ie[1],Ln,C,S),ui=Math.min(jn!==null?jn:Number.MAX_VALUE,ti!==null?ti:Number.MAX_VALUE);if(ui!==Number.MAX_VALUE)return ui;{const En=Xf([],C,S,Me);if(ku(Ln,ai,$n,vn,is(En[0],ie[0],se[0]),is(En[1],ie[1],se[1]))>=En[2])return Me}continue}let ht=0;for(let vt=0;vt<this._siblingOffset.length;vt++){ls((Ve<<1)+this._siblingOffset[vt][0],(ut<<1)+this._siblingOffset[vt][1],Ct+1,n,a,p,y,ie,se),ie[2]=-100,se[2]=this.maximums[this.childOffsets[_e]+vt]*z;const Pt=$o(ie,se,C,S);if(Pt!=null){const Lt=Pt;W[vt]=Lt;let An=!1;for(let ln=0;ln<ht&&!An;ln++)Lt>=W[J[ln]]&&(J.splice(ln,0,vt),An=!0);An||(J[ht]=vt),ht++}}for(let vt=0;vt<ht;vt++){const Pt=J[vt];fe.push({idx:this.childOffsets[_e]+Pt,t:W[Pt],nodex:(Ve<<1)+this._siblingOffset[Pt][0],nodey:(ut<<1)+this._siblingOffset[Pt][1],depth:Ct+1})}}return null}_addNode(n,a,p){return this.minimums.push(n),this.maximums.push(a),this.leaves.push(p),this.childOffsets.push(0),this.nodeCount++}_construct(n,a,p,y,C){if(n[y].isLeaf(a,p)===1)return;this.childOffsets[C]||(this.childOffsets[C]=this.nodeCount);const S=y-1,z=n[S];let Q=0,W=0;for(let J=0;J<this._siblingOffset.length;J++){const ie=2*a+this._siblingOffset[J][0],se=2*p+this._siblingOffset[J][1],fe=z.getElevation(ie,se),_e=z.isLeaf(ie,se),Me=this._addNode(fe.min,fe.max,_e);_e&&(Q|=1<<J),W||(W=Me)}for(let J=0;J<this._siblingOffset.length;J++)Q&1<<J||this._construct(n,2*a+this._siblingOffset[J][0],2*p+this._siblingOffset[J][1],S,W+J)}}function ku(o,n,a,p,y,C){return lo(lo(o,a,C),lo(n,p,C),y)}function ec(o,n,a){const p=a.dim,y=Cn(o*p-.5,0,p-1),C=Cn(n*p-.5,0,p-1),S=Math.floor(y),z=Math.floor(C),Q=Math.min(S+1,p-1),W=Math.min(z+1,p-1);return ku(a.get(S,z),a.get(Q,z),a.get(S,W),a.get(Q,W),y-S,C-z)}const fl={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Pd(o,n,a){return(256*o*256+256*n+a)/10-1e4}function GA(o,n,a){return 256*o+n+a/256-32768}class Og{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,a,p,y=!1,C=!1){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(p&&p!=="mapbox"&&p!=="terrarium")return di(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const S=this.dim=a.height-2,z=new Uint32Array(a.data.buffer);if(this.pixels=new Uint8Array(a.data.buffer),this.encoding=p||"mapbox",this.borderReady=y,!y){for(let Q=0;Q<S;Q++)z[this._idx(-1,Q)]=z[this._idx(0,Q)],z[this._idx(S,Q)]=z[this._idx(S-1,Q)],z[this._idx(Q,-1)]=z[this._idx(Q,0)],z[this._idx(Q,S)]=z[this._idx(Q,S-1)];z[this._idx(-1,-1)]=z[this._idx(0,0)],z[this._idx(S,-1)]=z[this._idx(S-1,0)],z[this._idx(-1,S)]=z[this._idx(0,S-1)],z[this._idx(S,S)]=z[this._idx(S-1,S-1)],C&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Bh(this)}get(n,a,p=!1){p&&(n=Cn(n,-1,this.dim),a=Cn(a,-1,this.dim));const y=4*this._idx(n,a);return(this.encoding==="terrarium"?GA:Pd)(this.pixels[y],this.pixels[y+1],this.pixels[y+2])}static getUnpackVector(n){return fl[n]}get unpackVector(){return fl[this.encoding]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}static pack(n,a){const p=[0,0,0,0],y=Og.getUnpackVector(a);let C=Math.floor((n+y[3])/y[2]);return p[2]=C%256,C=Math.floor(C/256),p[1]=C%256,C=Math.floor(C/256),p[0]=C,p}getPixels(){return new fc({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,a,p){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let y=a*this.dim,C=a*this.dim+this.dim,S=p*this.dim,z=p*this.dim+this.dim;switch(a){case-1:y=C-1;break;case 1:C=y+1}switch(p){case-1:S=z-1;break;case 1:z=S+1}const Q=-a*this.dim,W=-p*this.dim;for(let J=S;J<z;J++)for(let ie=y;ie<C;ie++){const se=4*this._idx(ie,J),fe=4*this._idx(ie+Q,J+W);this.pixels[se+0]=n.pixels[fe+0],this.pixels[se+1]=n.pixels[fe+1],this.pixels[se+2]=n.pixels[fe+2],this.pixels[se+3]=n.pixels[fe+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}yn(Og,"DEMData"),yn(Bh,"DemMinMaxQuadTree",{omit:["dem"]});class kte{constructor(n,a){this.max=n,this.onRemove=a,this.reset()}reset(){for(const n in this.data)for(const a of this.data[n])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(n,a,p){const y=n.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const C={value:a,timeout:void 0};if(p!==void 0&&(C.timeout=setTimeout(()=>{this.remove(n,C)},p)),this.data[y].push(C),this.order.push(y),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const a=this.data[n].shift();return a.timeout&&clearTimeout(a.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),a.value}getByKey(n){const a=this.data[n];return a?a[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,a){if(!this.has(n))return this;const p=n.wrapped().key,y=a===void 0?0:this.data[p].indexOf(a),C=this.data[p][y];return this.data[p].splice(y,1),C.timeout&&clearTimeout(C.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(C.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(n){const a=[];for(const p in this.data)for(const y of this.data[p])n(y.value)||a.push(y);for(const p of a)this.remove(p.value.tileID,p)}}class xy{constructor(n,a,p){this.func=n,this.mask=a,this.range=p}}xy.ReadOnly=!1,xy.ReadWrite=!0,xy.disabled=new xy(519,xy.ReadOnly,[0,1]);const ME=7680;class LE{constructor(n,a,p,y,C,S){this.test=n,this.ref=a,this.mask=p,this.fail=y,this.depthFail=C,this.pass=S}}LE.disabled=new LE({func:519,mask:0},0,0,ME,ME,ME);class Mf{constructor(n,a,p){this.blendFunction=n,this.blendColor=a,this.mask=p}}Mf.Replace=[1,0],Mf.disabled=new Mf(Mf.Replace,Ko.transparent,[!1,!1,!1,!1]),Mf.unblended=new Mf(Mf.Replace,Ko.transparent,[!0,!0,!0,!0]),Mf.alphaBlended=new Mf([1,771],Ko.transparent,[!0,!0,!0,!0]);const kE=1029,PE=2305;class WA{constructor(n,a,p){this.enable=n,this.mode=a,this.frontFace=p}}WA.disabled=new WA(!1,kE,PE),WA.backCCW=new WA(!0,kE,PE),WA.backCW=new WA(!0,kE,2304),WA.frontCW=new WA(!0,1028,2304),WA.frontCCW=new WA(!0,1028,PE);class Ng extends Yo{constructor(n,a,p){super(),this.id=n,this._onlySymbols=p,a.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),a.on("error",()=>{this._sourceErrored=!0}),this._source=a,this._tiles={},this._cache=new kte(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=a.minTileCacheSize,this._maxTileCacheSize=a.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Er,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const a=this._tiles[n];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,a){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,a)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const p=this._tiles[a];p.upload(n),p.prepare(this.map.style.imageManager)}}getIds(){return Bi(this._tiles).map(n=>n.tileID).sort(YU).map(n=>n.key)}getRenderableIds(n){const a=[];for(const p in this._tiles)this._isIdRenderable(+p,n)&&a.push(this._tiles[p]);return n?a.sort((p,y)=>{const C=p.tileID,S=y.tileID,z=new Xe(C.canonical.x,C.canonical.y)._rotate(this.transform.angle),Q=new Xe(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return C.overscaledZ-S.overscaledZ||Q.y-z.y||Q.x-z.x}).map(p=>p.tileID.key):a.map(p=>p.tileID).sort(YU).map(p=>p.key)}hasRenderableParent(n){const a=this.findLoadedParent(n,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(n,a){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(a||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,a){const p=this._tiles[n];p&&(p.state!=="loading"&&(p.state=a),this._loadTile(p,this._tileLoaded.bind(this,p,n,a)))}_tileLoaded(n,a,p,y){if(y)if(n.state="errored",y.status!==404)this._source.fire(new hs(y,{tile:n}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const C=this.map.painter.terrain;this.update(this.transform,C.getScaledDemTileSize(),!0),C.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=mr.now(),p==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(a,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new xo("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const a=this.getRenderableIds();for(let y=0;y<a.length;y++){const C=a[y];if(n.neighboringTiles&&n.neighboringTiles[C]){const S=this.getTileByID(C);p(n,S),p(S,n)}}function p(y,C){if(!y.dem||y.dem.borderReady)return;y.needsHillshadePrepare=!0,y.needsDEMTextureUpload=!0;let S=C.tileID.canonical.x-y.tileID.canonical.x;const z=C.tileID.canonical.y-y.tileID.canonical.y,Q=Math.pow(2,y.tileID.canonical.z),W=C.tileID.key;S===0&&z===0||Math.abs(z)>1||(Math.abs(S)>1&&(Math.abs(S+Q)===1?S+=Q:Math.abs(S-Q)===1&&(S-=Q)),C.dem&&y.dem&&(y.dem.backfillBorder(C.dem,S,z),y.neighboringTiles&&y.neighboringTiles[W]&&(y.neighboringTiles[W].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,a,p,y){for(const C in this._tiles){let S=this._tiles[C];if(y[C]||!S.hasData()||S.tileID.overscaledZ<=a||S.tileID.overscaledZ>p)continue;let z=S.tileID;for(;S&&S.tileID.overscaledZ>a+1;){const W=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[W.key],S&&S.hasData()&&(z=W)}let Q=z;for(;Q.overscaledZ>a;)if(Q=Q.scaledTo(Q.overscaledZ-1),n[Q.key]){y[z.key]=z;break}}}findLoadedParent(n,a){if(n.key in this._loadedParentTiles){const p=this._loadedParentTiles[n.key];return p&&p.tileID.overscaledZ>=a?p:null}for(let p=n.overscaledZ-1;p>=a;p--){const y=n.scaledTo(p),C=this._getLoadedTile(y);if(C)return C}}_getLoadedTile(n){const a=this._tiles[n.key];return a&&a.hasData()?a:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,a){a=a||this._source.tileSize;const p=Math.ceil(n.width/a)+1,y=Math.ceil(n.height/a)+1,C=Math.floor(p*y*5),S=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,C):C,z=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._cache.setMaxSize(z)}handleWrapJump(n){const a=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,a){const p={};for(const y in this._tiles){const C=this._tiles[y];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+a),p[C.tileID.key]=C}this._tiles=p;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(+y,this._tiles[y])}}update(n,a,p){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!p)return;let y;this.updateCacheSize(n,a),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?y=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new Fo(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(y=n.coveringTiles({tileSize:a||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!p,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(y=y.filter(z=>this._source.hasTile(z)))):y=[];const C=this._updateRetainedTiles(y);if(JU(this._source.type)&&y.length!==0){const z={},Q={},W=Object.keys(C);for(const ie of W){const se=C[ie],fe=this._tiles[ie];if(!fe||fe.fadeEndTime&&fe.fadeEndTime<=mr.now())continue;const _e=this.findLoadedParent(se,Math.max(se.overscaledZ-Ng.maxOverzooming,this._source.minzoom));_e&&(this._addTile(_e.tileID),z[_e.tileID.key]=_e.tileID),Q[ie]=se}const J=y[y.length-1].overscaledZ;for(const ie in this._tiles){const se=this._tiles[ie];if(C[ie]||!se.hasData())continue;let fe=se.tileID;for(;fe.overscaledZ>J;){fe=fe.scaledTo(fe.overscaledZ-1);const _e=this._tiles[fe.key];if(_e&&_e.hasData()&&Q[fe.key]){C[ie]=se.tileID;break}}}for(const ie in z)C[ie]||(this._coveredTiles[ie]=!0,C[ie]=z[ie])}for(const z in C)this._tiles[z].clearFadeHold();const S=function(z,Q){const W=[];for(const J in z)J in Q||W.push(J);return W}(this._tiles,C);for(const z of S){const Q=this._tiles[z];Q.hasSymbolBuckets&&!Q.holdingForFade()?Q.setHoldDuration(this.map._fadeDuration):Q.hasSymbolBuckets&&!Q.symbolFadeFinished()||this._removeTile(+z)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const a={};if(n.length===0)return a;const p={},y=n.reduce((W,J)=>Math.min(W,J.overscaledZ),1/0),C=n[0].overscaledZ,S=Math.max(C-Ng.maxOverzooming,this._source.minzoom),z=Math.max(C+Ng.maxUnderzooming,this._source.minzoom),Q={};for(const W of n){const J=this._addTile(W);a[W.key]=W,J.hasData()||y<this._source.maxzoom&&(Q[W.key]=W)}this._retainLoadedChildren(Q,y,z,a);for(const W of n){let J=this._tiles[W.key];if(J.hasData())continue;if(W.canonical.z>=this._source.maxzoom){const se=W.children(this._source.maxzoom)[0],fe=this.getTile(se);if(fe&&fe.hasData()){a[se.key]=se;continue}}else{const se=W.children(this._source.maxzoom);if(a[se[0].key]&&a[se[1].key]&&a[se[2].key]&&a[se[3].key])continue}let ie=J.wasRequested();for(let se=W.overscaledZ-1;se>=S;--se){const fe=W.scaledTo(se);if(p[fe.key]||(p[fe.key]=!0,J=this.getTile(fe),!J&&ie&&(J=this._addTile(fe)),J&&(a[fe.key]=fe,ie=J.wasRequested(),J.hasData())))break}}return a}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const a=[];let p,y=this._tiles[n].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){p=this._loadedParentTiles[y.key];break}a.push(y.key);const C=y.scaledTo(y.overscaledZ-1);if(p=this._getLoadedTile(C),p)break;y=C}for(const C of a)this._loadedParentTiles[C]=p}}_addTile(n){let a=this._tiles[n.key];if(a)return a;a=this._cache.getAndRemove(n),a&&(this._setTileReloadTimer(n.key,a),a.tileID=n,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,a)));const p=!!a;if(!p){const y=this.map?this.map.painter:null;a=new Gi(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,y,this._isRaster),this._loadTile(a,this._tileLoaded.bind(this,a,n.key,a.state))}return a?(a.uses++,this._tiles[n.key]=a,p||this._source.fire(new xo("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a):null}_setTileReloadTimer(n,a){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const p=a.getExpiryTimeout();p&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},p))}_removeTile(n){const a=this._tiles[n];a&&(a.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,a,p){const y=[],C=this.transform;if(!C)return y;const S=C.projection.name==="globe",z=Hh(C.center.lng);for(const Q in this._tiles){const W=this._tiles[Q];if(p&&W.clearQueryDebugViz(),W.holdingForFade())continue;let J;if(S){const ie=W.tileID.canonical;if(ie.z===0){const se=[Math.abs(Cn(z,...C0(ie,-1))-z),Math.abs(Cn(z,...C0(ie,1))-z)];J=[0,2*se.indexOf(Math.min(...se))-1]}else{const se=[Math.abs(Cn(z,...C0(ie,-1))-z),Math.abs(Cn(z,...C0(ie,0))-z),Math.abs(Cn(z,...C0(ie,1))-z)];J=[se.indexOf(Math.min(...se))-1]}}else J=[0];for(const ie of J){const se=n.containsTile(W,C,a,ie);se&&y.push(se)}}return y}getVisibleCoordinates(n){const a=this.getRenderableIds(n).map(p=>this._tiles[p].tileID);for(const p of a)p.projMatrix=this.transform.calculateProjMatrix(p.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(JU(this._source.type))for(const n in this._tiles){const a=this._tiles[n];if(a.fadeEndTime!==void 0&&a.fadeEndTime>=mr.now())return!0}return!1}setFeatureState(n,a,p){this._state.updateState(n=n||"_geojsonTileLayer",a,p)}removeFeatureState(n,a,p){this._state.removeFeatureState(n=n||"_geojsonTileLayer",a,p)}getFeatureState(n,a){return this._state.getState(n=n||"_geojsonTileLayer",a)}setDependencies(n,a,p){const y=this._tiles[n];y&&y.setDependencies(a,p)}reloadTilesForDependencies(n,a){for(const p in this._tiles)this._tiles[p].hasDependency(n,a)&&this._reloadTile(+p,"reloading");this._cache.filter(p=>!p.hasDependency(n,a))}_preloadTiles(n,a){if(!this._sourceLoaded){const z=()=>{this._sourceLoaded&&(this._source.off("data",z),this._preloadTiles(n,a))};return void this._source.on("data",z)}const p=new Map,y=Array.isArray(n)?n:[n],C=this.map.painter.terrain,S=this.usedForTerrain&&C?C.getScaledDemTileSize():this._source.tileSize;for(const z of y){const Q=z.coveringTiles({tileSize:S,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const W of Q)p.set(W.key,W);this.usedForTerrain&&z.updateElevation(!1)}Wn(Array.from(p.values()),(z,Q)=>{const W=new Gi(z,this._source.tileSize*z.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(W,J=>{this._source.type==="raster-dem"&&W.dem&&this._backfillDEM(W),Q(J,W)})},a)}}function YU(o,n){const a=Math.abs(2*o.wrap)-+(o.wrap<0),p=Math.abs(2*n.wrap)-+(n.wrap<0);return o.overscaledZ-n.overscaledZ||p-a||n.canonical.y-o.canonical.y||n.canonical.x-o.canonical.x}function JU(o){return o==="raster"||o==="image"||o==="video"||o==="custom"}function C0(o,n){const a=1<<o.z;return[o.x/a+n,(o.x+1)/a+n]}Ng.maxOverzooming=10,Ng.maxUnderzooming=3;class Zw{constructor(n,a,p){this._demTile=n,this._dem=this._demTile.dem,this._scale=a,this._offset=p}static create(n,a,p){const y=p||n.findDEMTileFor(a);if(!y||!y.dem)return;const C=y.dem,S=y.tileID,z=1<<a.canonical.z-S.canonical.z;return new Zw(y,y.tileSize/Ar/z,[(a.canonical.x/z-S.canonical.x)*C.dim,(a.canonical.y/z-S.canonical.y)*C.dim])}tileCoordToPixel(n,a){const p=a*this._scale+this._offset[1],y=Math.floor(n*this._scale+this._offset[0]),C=Math.floor(p);return new Xe(y,C)}getElevationAt(n,a,p,y){const C=n*this._scale+this._offset[0],S=a*this._scale+this._offset[1],z=Math.floor(C),Q=Math.floor(S),W=this._dem;return y=!!y,p?lo(lo(W.get(z,Q,y),W.get(z,Q+1,y),S-Q),lo(W.get(z+1,Q,y),W.get(z+1,Q+1,y),S-Q),C-z):W.get(z,Q,y)}getElevationAtPixel(n,a,p){return this._dem.get(n,a,!!p)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*xh(1,n)*this._dem.stride}}class ez{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new pi(Ar,16,0),this.featureIndexArray=new yd,this.promoteId=a}insert(n,a,p,y,C,S=0){const z=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,y,C,S);const Q=this.grid;for(let W=0;W<a.length;W++){const J=a[W],ie=[1/0,1/0,-1/0,-1/0];for(let se=0;se<J.length;se++){const fe=J[se];ie[0]=Math.min(ie[0],fe.x),ie[1]=Math.min(ie[1],fe.y),ie[2]=Math.max(ie[2],fe.x),ie[3]=Math.max(ie[3],fe.y)}ie[0]<Ar&&ie[1]<Ar&&ie[2]>=0&&ie[3]>=0&&Q.insert(z,ie[0],ie[1],ie[2],ie[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Ci(new uy(this.rawTileData)).layers,this.sourceLayerCoder=new w(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,a,p,y){this.loadVTLayers();const C=n.params||{},S=Ti(C.filter),z=n.tileResult,Q=n.transform,W=z.bufferedTilespaceBounds,J=this.grid.query(W.min.x,W.min.y,W.max.x,W.max.y,(_e,Me,Ve,ut)=>sm(z.bufferedTilespaceGeometry,_e,Me,Ve,ut));J.sort(Pte);let ie=null;Q.elevation&&J.length>0&&(ie=Zw.create(Q.elevation,this.tileID));const se={};let fe;for(let _e=0;_e<J.length;_e++){const Me=J[_e];if(Me===fe)continue;fe=Me;const Ve=this.featureIndexArray.get(Me);let ut=null;this.loadMatchingFeature(se,Ve,S,C.layers,C.availableImages,a,p,y,(Ct,ht,vt,Pt=0)=>(ut||(ut=Sd(Ct,this.tileID.canonical,n.tileTransform)),ht.queryIntersectsFeature(z,Ct,vt,ut,this.z,n.transform,n.pixelPosMatrix,ie,Pt)))}return se}loadMatchingFeature(n,a,p,y,C,S,z,Q,W){const{featureIndex:J,bucketIndex:ie,sourceLayerIndex:se,layoutVertexArrayOffset:fe}=a,_e=this.bucketLayerIDs[ie];if(y&&!function(Ct,ht){for(let vt=0;vt<Ct.length;vt++)if(ht.indexOf(Ct[vt])>=0)return!0;return!1}(y,_e))return;const Me=this.sourceLayerCoder.decode(se),Ve=this.vtLayers[Me].feature(J);if(p.needGeometry){const Ct=RA(Ve,!0);if(!p.filter(new ee(this.tileID.overscaledZ),Ct,this.tileID.canonical))return}else if(!p.filter(new ee(this.tileID.overscaledZ),Ve))return;const ut=this.getId(Ve,Me);for(let Ct=0;Ct<_e.length;Ct++){const ht=_e[Ct];if(y&&y.indexOf(ht)<0)continue;const vt=S[ht];if(!vt)continue;let Pt={};ut!==void 0&&Q&&(Pt=Q.getState(vt.sourceLayer||"_geojsonTileLayer",ut));const Lt=Bn({},z[ht]);Lt.paint=tz(Lt.paint,vt.paint,Ve,Pt,C),Lt.layout=tz(Lt.layout,vt.layout,Ve,Pt,C);const An=!W||W(Ve,vt,Pt,fe);if(!An)continue;const ln=new Z(Ve,this.z,this.x,this.y,ut);ln.layer=Lt;let Ln=n[ht];Ln===void 0&&(Ln=n[ht]=[]),Ln.push({featureIndex:J,feature:ln,intersectionZ:An})}}lookupSymbolFeatures(n,a,p,y,C,S,z,Q){const W={};this.loadVTLayers();const J=Ti(C);for(const ie of n)this.loadMatchingFeature(W,{bucketIndex:p,sourceLayerIndex:y,featureIndex:ie,layoutVertexArrayOffset:0},J,S,z,Q,a);return W}loadFeature(n){const{featureIndex:a,sourceLayerIndex:p}=n;this.loadVTLayers();const y=this.sourceLayerCoder.decode(p),C=this.vtFeatures[y];if(C[a])return C[a];const S=this.vtLayers[y].feature(a);return C[a]=S,S}hasLayer(n){for(const a of this.bucketLayerIDs)for(const p of a)if(n===p)return!0;return!1}getId(n,a){let p=n.id;if(this.promoteId){const y=typeof this.promoteId=="string"?this.promoteId:this.promoteId[a];y!=null&&(p=n.properties[y]),typeof p=="boolean"&&(p=Number(p))}return p}}function tz(o,n,a,p,y){return li(o,(C,S)=>{const z=n instanceof rt?n.get(S):null;return z&&z.evaluate?z.evaluate(a,p,y):z})}function Pte(o,n){return n-o}yn(ez,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class nz{constructor(n,a){this.width=n,this.height=a,this.nextRow=0,this.image=new Gh({width:n,height:a}),this.positions={},this.uploaded=!1}getDash(n,a){const p=this.getKey(n,a);return this.positions[p]}trim(){const n=this.width,a=this.height=ri(this.nextRow);this.image.resize({width:n,height:a})}getKey(n,a){return n.join(",")+a}getDashRanges(n,a,p){const y=[];let C=n.length%2==1?-n[n.length-1]*p:0,S=n[0]*p,z=!0;y.push({left:C,right:S,isDash:z,zeroLength:n[0]===0});let Q=n[0];for(let W=1;W<n.length;W++){z=!z;const J=n[W];C=Q*p,Q+=J,S=Q*p,y.push({left:C,right:S,isDash:z,zeroLength:J===0})}return y}addRoundDash(n,a,p){const y=a/2;for(let C=-p;C<=p;C++){const S=this.width*(this.nextRow+p+C);let z=0,Q=n[z];for(let W=0;W<this.width;W++){W/Q.right>1&&(Q=n[++z]);const J=Math.abs(W-Q.left),ie=Math.abs(W-Q.right),se=Math.min(J,ie);let fe;const _e=C/p*(y+1);if(Q.isDash){const Me=y-Math.abs(_e);fe=Math.sqrt(se*se+Me*Me)}else fe=y-Math.sqrt(se*se+_e*_e);this.image.data[S+W]=Math.max(0,Math.min(255,fe+128))}}}addRegularDash(n,a){for(let Q=n.length-1;Q>=0;--Q){const W=n[Q],J=n[Q+1];W.zeroLength?n.splice(Q,1):J&&J.isDash===W.isDash&&(J.left=W.left,n.splice(Q,1))}const p=n[0],y=n[n.length-1];p.isDash===y.isDash&&(p.left=y.left-this.width,y.right=p.right+this.width);const C=this.width*this.nextRow;let S=0,z=n[S];for(let Q=0;Q<this.width;Q++){Q/z.right>1&&(z=n[++S]);const W=Math.abs(Q-z.left),J=Math.abs(Q-z.right),ie=Math.min(W,J);this.image.data[C+Q]=Math.max(0,Math.min(255,(z.isDash?ie:-ie)+a+128))}}addDash(n,a){const p=this.getKey(n,a);if(this.positions[p])return this.positions[p];const y=a==="round",C=y?7:0,S=2*C+1;if(this.nextRow+S>this.height)return di("LineAtlas out of space"),null;n.length===0&&n.push(1);let z=0;for(let J=0;J<n.length;J++)n[J]<0&&(di("Negative value is found in line dasharray, replacing values with 0"),n[J]=0),z+=n[J];if(z!==0){const J=this.width/z,ie=this.getDashRanges(n,this.width,J);y?this.addRoundDash(ie,J,C):this.addRegularDash(ie,a==="square"?.5*J:0)}const Q=this.nextRow+C;this.nextRow+=S;const W={tl:[Q,C],br:[z,0]};return this.positions[p]=W,W}}yn(nz,"LineAtlas");const iz=1*kd;class rz{constructor(n){const a={},p=[];for(const z in n){const Q=n[z],W=a[z]={};for(const J in Q.glyphs){const ie=Q.glyphs[+J];if(!ie||ie.bitmap.width===0||ie.bitmap.height===0)continue;const se=ie.metrics.localGlyph?iz:1,fe={x:0,y:0,w:ie.bitmap.width+2*se,h:ie.bitmap.height+2*se};p.push(fe),W[J]=fe}}const{w:y,h:C}=Lg(p),S=new Gh({width:y||1,height:C||1});for(const z in n){const Q=n[z];for(const W in Q.glyphs){const J=Q.glyphs[+W];if(!J||J.bitmap.width===0||J.bitmap.height===0)continue;const ie=a[z][W],se=J.metrics.localGlyph?iz:1;Gh.copy(J.bitmap,S,{x:0,y:0},{x:ie.x+se,y:ie.y+se},J.bitmap)}}this.image=S,this.positions=a}}yn(rz,"GlyphAtlas");class Fte{constructor(n){this.tileID=new Fo(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=VA(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,a,p,y,C){this.status="parsing",this.data=n,this.collisionBoxArray=new ts;const S=new w(Object.keys(n.layers).sort()),z=new ez(this.tileID,this.promoteId);z.bucketLayerIDs=[];const Q={},W=new nz(256,256),J={featureIndex:z,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:W,availableImages:p},ie=a.familiesBySource[this.source];for(const Pt in ie){const Lt=n.layers[Pt];if(!Lt)continue;let An=!1,ln=!1;for(const vn of ie[Pt])vn[0].type==="symbol"?An=!0:ln=!0;if(this.isSymbolTile===!0&&!An||this.isSymbolTile===!1&&!ln)continue;Lt.version===1&&di(`Vector tile source "${this.source}" layer "${Pt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ln=S.encode(Pt),ai=[];for(let vn=0;vn<Lt.length;vn++){const $n=Lt.feature(vn),jn=z.getId($n,Pt);ai.push({feature:$n,id:jn,index:vn,sourceLayerIndex:Ln})}for(const vn of ie[Pt]){const $n=vn[0];this.isSymbolTile!==void 0&&$n.type==="symbol"!==this.isSymbolTile||$n.minzoom&&this.zoom<Math.floor($n.minzoom)||$n.maxzoom&&this.zoom>=$n.maxzoom||$n.visibility!=="none"&&(FE(vn,this.zoom,p),(Q[$n.id]=$n.createBucket({index:z.bucketLayerIDs.length,layers:vn,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ln,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:p})).populate(ai,J,this.tileID.canonical,this.tileTransform),z.bucketLayerIDs.push(vn.map(jn=>jn.id)))}}let se,fe,_e,Me;W.trim();const Ve={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ut=()=>{if(se)return C(se);if(fe&&_e&&Me){const Pt=new rz(fe),Lt=new Ew(_e,Me);for(const An in Q){const ln=Q[An];ln instanceof If?(FE(ln.layers,this.zoom,p),uE(ln,fe,Pt.positions,_e,Lt.iconPositions,this.showCollisionBoxes,p,this.tileID.canonical,this.tileZoom,this.projection)):ln.hasPattern&&(ln instanceof Pc||ln instanceof Y||ln instanceof ys)&&(FE(ln.layers,this.zoom,p),ln.addFeatures(J,this.tileID.canonical,Lt.patternPositions,p,this.tileTransform))}this.status="done",C(null,{buckets:Bi(Q).filter(An=>!An.isEmpty()),featureIndex:z,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Pt.image,lineAtlas:W,imageAtlas:Lt,glyphMap:this.returnDependencies?fe:null,iconMap:this.returnDependencies?_e:null,glyphPositions:this.returnDependencies?Pt.positions:null})}},Ct=li(J.glyphDependencies,Pt=>Object.keys(Pt).map(Number));Object.keys(Ct).length?y.send("getGlyphs",{uid:this.uid,stacks:Ct},(Pt,Lt)=>{se||(se=Pt,fe=Lt,ut())},void 0,!1,Ve):fe={};const ht=Object.keys(J.iconDependencies);ht.length?y.send("getImages",{icons:ht,source:this.source,tileID:this.tileID,type:"icons"},(Pt,Lt)=>{se||(se=Pt,_e=Lt,ut())},void 0,!1,Ve):_e={};const vt=Object.keys(J.patternDependencies);vt.length?y.send("getImages",{icons:vt,source:this.source,tileID:this.tileID,type:"patterns"},(Pt,Lt)=>{se||(se=Pt,Me=Lt,ut())},void 0,!1,Ve):Me={},ut()}}function FE(o,n,a){const p=new ee(n);for(const y of o)y.recalculate(p,a)}class oz{constructor(n){this.entries={},this.scheduler=n}request(n,a,p,y){const C=this.entries[n]=this.entries[n]||{callbacks:[]};if(C.result){const[S,z]=C.result;return this.scheduler?this.scheduler.add(()=>{y(S,z)},a):y(S,z),()=>{}}return C.callbacks.push(y),C.cancel||(C.cancel=p((S,z)=>{C.result=[S,z];for(const Q of C.callbacks)this.scheduler?this.scheduler.add(()=>{Q(S,z)},a):Q(S,z);setTimeout(()=>delete this.entries[n],3e3)})),()=>{C.result||(C.callbacks=C.callbacks.filter(S=>S!==y),C.callbacks.length||(C.cancel(),delete this.entries[n]))}}}function sz(o,n,a){const p=JSON.stringify(o.request);return o.data&&(this.deduped.entries[p]={result:[null,o.data]}),this.deduped.request(p,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom},y=>{const C=bi(o.request,(S,z,Q,W)=>{S?y(S):z&&y(null,{vectorTile:a?void 0:new Ci(new uy(z)),rawData:z,cacheControl:Q,expires:W})});return()=>{C.cancel(),y()}},n)}const az=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class DE{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,p]=new Uint8Array(n,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=p>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const C=az[15&p];if(!C)throw new Error("Unrecognized array type.");const[S]=new Uint16Array(n,2,1),[z]=new Uint32Array(n,4,1);return new DE(z,S,C,n)}constructor(n,a=64,p=Float64Array,y){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=p,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const C=az.indexOf(this.ArrayType),S=2*n*this.ArrayType.BYTES_PER_ELEMENT,z=n*this.IndexArrayType.BYTES_PER_ELEMENT,Q=(8-z%8)%8;if(C<0)throw new Error(`Unexpected typed array class: ${p}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+z+Q,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+S+z+Q),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+z+Q,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+C]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=n)}add(n,a){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=n,this.coords[this._pos++]=a,p}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return UE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,a,p,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:C,coords:S,nodeSize:z}=this,Q=[0,C.length-1,0],W=[];for(;Q.length;){const J=Q.pop()||0,ie=Q.pop()||0,se=Q.pop()||0;if(ie-se<=z){for(let Ve=se;Ve<=ie;Ve++){const ut=S[2*Ve],Ct=S[2*Ve+1];ut>=n&&ut<=p&&Ct>=a&&Ct<=y&&W.push(C[Ve])}continue}const fe=se+ie>>1,_e=S[2*fe],Me=S[2*fe+1];_e>=n&&_e<=p&&Me>=a&&Me<=y&&W.push(C[fe]),(J===0?n<=_e:a<=Me)&&(Q.push(se),Q.push(fe-1),Q.push(1-J)),(J===0?p>=_e:y>=Me)&&(Q.push(fe+1),Q.push(ie),Q.push(1-J))}return W}within(n,a,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:C,nodeSize:S}=this,z=[0,y.length-1,0],Q=[],W=p*p;for(;z.length;){const J=z.pop()||0,ie=z.pop()||0,se=z.pop()||0;if(ie-se<=S){for(let Ve=se;Ve<=ie;Ve++)cz(C[2*Ve],C[2*Ve+1],n,a)<=W&&Q.push(y[Ve]);continue}const fe=se+ie>>1,_e=C[2*fe],Me=C[2*fe+1];cz(_e,Me,n,a)<=W&&Q.push(y[fe]),(J===0?n-p<=_e:a-p<=Me)&&(z.push(se),z.push(fe-1),z.push(1-J)),(J===0?n+p>=_e:a+p>=Me)&&(z.push(fe+1),z.push(ie),z.push(1-J))}return Q}}function UE(o,n,a,p,y,C){if(y-p<=a)return;const S=p+y>>1;lz(o,n,S,p,y,C),UE(o,n,a,p,S-1,1-C),UE(o,n,a,S+1,y,1-C)}function lz(o,n,a,p,y,C){for(;y>p;){if(y-p>600){const W=y-p+1,J=a-p+1,ie=Math.log(W),se=.5*Math.exp(2*ie/3),fe=.5*Math.sqrt(ie*se*(W-se)/W)*(J-W/2<0?-1:1);lz(o,n,a,Math.max(p,Math.floor(a-J*se/W+fe)),Math.min(y,Math.floor(a+(W-J)*se/W+fe)),C)}const S=n[2*a+C];let z=p,Q=y;for(B0(o,n,p,a),n[2*y+C]>S&&B0(o,n,p,y);z<Q;){for(B0(o,n,z,Q),z++,Q--;n[2*z+C]<S;)z++;for(;n[2*Q+C]>S;)Q--}n[2*p+C]===S?B0(o,n,p,Q):(Q++,B0(o,n,Q,y)),Q<=a&&(p=Q+1),a<=Q&&(y=Q-1)}}function B0(o,n,a,p){zE(o,a,p),zE(n,2*a,2*p),zE(n,2*a+1,2*p+1)}function zE(o,n,a){const p=o[n];o[n]=o[a],o[a]=p}function cz(o,n,a,p){const y=o-a,C=n-p;return y*y+C*C}s.ARRAY_TYPE=Tu,s.AUTH_ERR_MSG=ft,s.Aabb=Ac,s.Actor=class{constructor(o,n,a){this.target=o,this.parent=n,this.mapId=a,this.callbacks={},this.cancelCallbacks={},Vr(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ri()?o:U,this.scheduler=new IE}send(o,n,a,p,y=!1,C){const S=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(a.metadata=C,this.callbacks[S]=a);const z=Ur(this.globalScope)?void 0:[];return this.target.postMessage({id:S,type:o,hasCallback:!!a,targetMapId:p,mustQueue:y,sourceMapId:this.mapId,data:or(n,z)},z),{cancel:()=>{a&&delete this.callbacks[S],this.target.postMessage({id:S,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}receive(o){const n=o.data,a=n.id;if(a&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){const p=this.cancelCallbacks[a];delete this.cancelCallbacks[a],p&&p.cancel()}else if(n.mustQueue||Ri()){const p=this.callbacks[a];this.cancelCallbacks[a]=this.scheduler.add(()=>this.processTask(a,n),p&&p.metadata||{type:"message"})}else this.processTask(a,n)}processTask(o,n){if(n.type==="<response>"){const a=this.callbacks[o];delete this.callbacks[o],a&&(n.error?a(mo(n.error)):a(null,mo(n.data)))}else{const a=Ur(this.globalScope)?void 0:[],p=n.hasCallback?(C,S)=>{delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:C?or(C):null,data:or(S,a)},a)}:C=>{},y=mo(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,y,p);else if(this.parent.getWorkerSource){const C=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,C[0],y.source)[C[1]](y,p)}else p(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=wr,s.Color=Ko,s.ColorMode=Mf,s.CullFaceMode=WA,s.DEMData=Og,s.DataConstantProperty=Be,s.DedupedRequest=oz,s.DepthMode=xy,s.EXTENT=Ar,s.Elevation=class{isDataAvailableAtPoint(o){const n=this._source();if(this.isUsingMockSource()||!n||o.y<0||o.y>1)return!1;const a=n.getSource().maxzoom,p=1<<a,y=Math.floor(o.x),C=Math.floor((o.x-y)*p),S=Math.floor(o.y*p),z=this.findDEMTileFor(new Fo(a,y,a,C,S));return!(!z||!z.dem)}getAtPointOrZero(o,n=0){return this.getAtPoint(o,n)||0}getAtPoint(o,n,a=!0){if(this.isUsingMockSource())return null;n==null&&(n=null);const p=this._source();if(!p||o.y<0||o.y>1)return n;const y=p.getSource().maxzoom,C=1<<y,S=Math.floor(o.x),z=o.x-S,Q=new Fo(y,S,y,Math.floor(z*C),Math.floor(o.y*C)),W=this.findDEMTileFor(Q);if(!W||!W.dem)return n;const J=W.dem,ie=1<<W.tileID.canonical.z,se=(z*ie-W.tileID.canonical.x)*J.dim,fe=(o.y*ie-W.tileID.canonical.y)*J.dim,_e=Math.floor(se),Me=Math.floor(fe);return(a?this.exaggeration():1)*lo(lo(J.get(_e,Me),J.get(_e,Me+1),fe-Me),lo(J.get(_e+1,Me),J.get(_e+1,Me+1),fe-Me),se-_e)}getAtTileOffset(o,n,a){const p=1<<o.canonical.z;return this.getAtPointOrZero(new hA(o.wrap+(o.canonical.x+n/Ar)/p,(o.canonical.y+a/Ar)/p))}getAtTileOffsetFunc(o,n,a,p){return y=>{const C=this.getAtTileOffset(o,y.x,y.y),S=p.upVector(o.canonical,y.x,y.y);return su(S,S,C*p.upVectorScale(o.canonical,n,a).metersToTile),S}}getForTilePoints(o,n,a,p){if(this.isUsingMockSource())return!1;const y=Zw.create(this,o,p);return!!y&&(n.forEach(C=>{C[2]=this.exaggeration()*y.getElevationAt(C[0],C[1],a)}),!0)}getMinMaxForTile(o){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(o);if(!n||!n.dem)return null;const a=n.dem.tree,p=n.tileID,y=1<<o.canonical.z-p.canonical.z;let C=o.canonical.x/y-p.canonical.x,S=o.canonical.y/y-p.canonical.y,z=0;for(let Q=0;Q<o.canonical.z-p.canonical.z&&!a.leaves[z];Q++){C*=2,S*=2;const W=2*Math.floor(S)+Math.floor(C);z=a.childOffsets[z]+W,C%=1,S%=1}return{min:this.exaggeration()*a.minimums[z],max:this.exaggeration()*a.maximums[z]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(o,n,a){throw new Error("Pure virtual method called.")}pointCoordinate(o){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(o){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=hs,s.EvaluationParameters=ee,s.Event=xo,s.Evented=Yo,s.FillExtrusionBucket=ys,s.Frustum=Kp,s.FrustumCorners=sg,s.GLOBE_RADIUS=Ns,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=FA,s.GLOBE_ZOOM_THRESHOLD_MIN=ag,s.GlobeSharedBuffers=class{constructor(o){this._createGrid(o),this._createPoles(o)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const o of this._poleSegments)o.destroy();for(const o of this._gridSegments)o.withSkirts.destroy(),o.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const o of this._wireframeSegments)o.destroy()}}_fillGridMeshWithLods(o,n){const a=new Nn,p=new Yi,y=[],C=o+1+2,S=n[0]+1,z=n[0]+1+(1+n.length),Q=(W,J,ie)=>{let se=W===C-1?W-2:W===0?W:W-1;return se+=ie?24575:0,[se,J]};for(let W=0;W<C;++W)a.emplaceBack(...Q(W,0,!0));for(let W=0;W<S;++W)for(let J=0;J<C;++J)a.emplaceBack(...Q(J,W,(J===0||J===C-1)&&!0));for(let W=0;W<n.length;++W){const J=n[W];for(let ie=0;ie<C;++ie)a.emplaceBack(...Q(ie,J,!0))}for(let W=0;W<n.length;++W){const J=p.length,ie=n[W]+1+2,se=new Yi;for(let Me=0;Me<ie-1;Me++){const Ve=Me===ie-2,ut=Ve?C*(z-n.length+W-Me):C;for(let Ct=0;Ct<C-1;Ct++){const ht=Me*C+Ct;Me===0||Ve||Ct===0||Ct===C-2?(se.emplaceBack(ht+1,ht,ht+ut),se.emplaceBack(ht+ut,ht+ut+1,ht+1)):(p.emplaceBack(ht+1,ht,ht+ut),p.emplaceBack(ht+ut,ht+ut+1,ht+1))}}const fe=sa.simpleSegment(0,J,a.length,p.length-J);for(let Me=0;Me<se.uint16.length;Me+=3)p.emplaceBack(se.uint16[Me],se.uint16[Me+1],se.uint16[Me+2]);const _e=sa.simpleSegment(0,J,a.length,p.length-J);y.push({withoutSkirts:fe,withSkirts:_e})}return{vertices:a,indices:p,segments:y}}_createGrid(o){const n=this._fillGridMeshWithLods(aA,Eu);this._gridSegments=n.segments,this._gridBuffer=o.createVertexBuffer(n.vertices,yf.members),this._gridIndexBuffer=o.createIndexBuffer(n.indices,!0)}_createPoles(o){const n=new Yi;for(let y=0;y<=aA;y++)n.emplaceBack(0,y+1,y+2);this._poleIndexBuffer=o.createIndexBuffer(n,!0);const a=new Xo,p=new Xo;this._poleSegments=[];for(let y=0,C=0;y<ag;y++){const S=360/(1<<y);a.emplaceBack(0,-Ns,0,.5,0),p.emplaceBack(0,-Ns,0,.5,1);for(let z=0;z<=aA;z++){const Q=z/aA,W=lo(0,S,Q),[J,ie,se]=UA(Jp,xf,W,Ns);a.emplaceBack(J,ie,se,Q,0),p.emplaceBack(J,ie,se,Q,1)}this._poleSegments.push(sa.simpleSegment(C,0,66,64)),C+=66}this._poleNorthVertexBuffer=o.createVertexBuffer(a,og,!1),this._poleSouthVertexBuffer=o.createVertexBuffer(p,og,!1)}getGridBuffers(o,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[o].withSkirts:this._gridSegments[o].withoutSkirts]}getPoleBuffers(o){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[o]]}getWirefameBuffers(o,n){if(!this._wireframeSegments){const a=new Oa,p=aA,y=p+1+2,C=1;this._wireframeSegments=[];for(let S=0,z=0;S<Eu.length;S++){const Q=Eu[S];for(let J=C;J<Q+C;J++)for(let ie=C;ie<p+C;ie++){const se=J*y+ie;a.emplaceBack(se,se+1),a.emplaceBack(se,se+y),a.emplaceBack(se,se+y+1)}const W=Q*p*3;this._wireframeSegments.push(sa.simpleSegment(0,z,(Q+1)*y,W)),z+=W}this._wireframeIndexBuffer=o.createIndexBuffer(a)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},s.GlyphManager=ym,s.ImagePosition=a0,s.KDBush=DE,s.LivePerformanceUtils=Sn,s.LngLat=_s,s.LngLatBounds=Qa,s.LocalGlyphMode=d0,s.MAX_MERCATOR_LATITUDE=Sl,s.MercatorCoordinate=hA,s.ONE_EM=Ca,s.OverscaledTileID=Fo,s.PerformanceMarkers=Jt,s.Point=Xe,s.Properties=At,s.RGBAImage=fc,s.Ray=Yl,s.RequestManager=class{constructor(o,n,a){this._transformRequestFn=o,this._customAccessToken=n,this._silenceAuthErrors=!!a,this._createSkuToken()}_createSkuToken(){const o=function(){let n="";for(let a=0;a<10;a++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Te,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,n){return this._transformRequestFn&&this._transformRequestFn(o,n)||{url:o}}normalizeStyleURL(o,n){if(!kt(o))return o;const a=Fn(o);return a.path=`/styles/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||n)}normalizeGlyphsURL(o,n){if(!kt(o))return o;const a=Fn(o);return a.path=`/fonts/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||n)}normalizeSourceURL(o,n,a,p){if(!kt(o))return o;const y=Fn(o);return y.path=`/v4/${y.authority}.json`,y.params.push("secure"),a&&y.params.push(`language=${a}`),p&&y.params.push(`worldview=${p}`),this._makeAPIURL(y,this._customAccessToken||n)}normalizeSpriteURL(o,n,a,p){const y=Fn(o);return kt(o)?(y.path=`/styles/v1${y.path}/sprite${n}${a}`,this._makeAPIURL(y,this._customAccessToken||p)):(y.path+=`${n}${a}`,zn(y))}normalizeTileURL(o,n,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!kt(o))return o;const p=Fn(o);p.path=p.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||a&&p.authority!=="raster"&&a===512?"@2x":""}${te.supported?".webp":"$1"}`),p.authority==="raster"?p.path=`/${q.RASTER_URL_PREFIX}${p.path}`:(p.path=p.path.replace(/^.+\/v4\//,"/"),p.path=`/${q.TILE_URL_VERSION}${p.path}`);const y=this._customAccessToken||function(C){for(const S of C){const z=S.match(/^access_token=(.*)$/);if(z)return z[1]}return null}(p.params)||q.ACCESS_TOKEN;return q.REQUIRE_ACCESS_TOKEN&&y&&this._skuToken&&p.params.push(`sku=${this._skuToken}`),this._makeAPIURL(p,y)}canonicalizeTileURL(o,n){const a=Fn(o);if(!a.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!a.path.match(/\.[\w]+$/))return o;let p="mapbox://";a.path.match(/^\/raster\/v1\//)?p+=`raster/${a.path.replace(`/${q.RASTER_URL_PREFIX}/`,"")}`:p+=`tiles/${a.path.replace(`/${q.TILE_URL_VERSION}/`,"")}`;let y=a.params;return n&&(y=y.filter(C=>!C.match(/^access_token=/))),y.length&&(p+=`?${y.join("&")}`),p}canonicalizeTileset(o,n){const a=!!n&&kt(n),p=[];for(const y of o.tiles||[])zt(y)?p.push(this.canonicalizeTileURL(y,a)):p.push(y);return p}_makeAPIURL(o,n){const a="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",p=Fn(q.API_URL);if(o.protocol=p.protocol,o.authority=p.authority,o.protocol==="http"){const y=o.params.indexOf("secure");y>=0&&o.params.splice(y,1)}if(p.path!=="/"&&(o.path=`${p.path}${o.path}`),!q.REQUIRE_ACCESS_TOKEN)return zn(o);if(n=n||q.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${a}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${a}`)}return o.params=o.params.filter(y=>y.indexOf("access_token")===-1),o.params.push(`access_token=${n||""}`),zn(o)}},s.ResourceType=Xi,s.SegmentVector=sa,s.SourceCache=Ng,s.StencilMode=LE,s.StructArrayLayout1ui2=iu,s.StructArrayLayout2f1f2i16=yr,s.StructArrayLayout2i4=Nn,s.StructArrayLayout2ui4=Oa,s.StructArrayLayout3f12=co,s.StructArrayLayout3ui6=Yi,s.StructArrayLayout4i8=Pn,s.StructArrayLayout5f20=Xo,s.Texture=Rg,s.Tile=Gi,s.Transitionable=ve,s.Uniform1f=Qh,s.Uniform1i=class extends Nh{constructor(o){super(o),this.current=0}set(o,n,a){this.fetchUniformLocation(o,n)&&this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},s.Uniform2f=class extends Nh{constructor(o){super(o),this.current=[0,0]}set(o,n,a){this.fetchUniformLocation(o,n)&&(a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1])))}},s.Uniform3f=class extends Nh{constructor(o){super(o),this.current=[0,0,0]}set(o,n,a){this.fetchUniformLocation(o,n)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2])))}},s.Uniform4f=ql,s.UniformColor=bd,s.UniformMatrix2f=class extends Nh{constructor(o){super(o),this.current=Np}set(o,n,a){if(this.fetchUniformLocation(o,n)){for(let p=0;p<4;p++)if(a[p]!==this.current[p]){this.current=a,this.gl.uniformMatrix2fv(this.location,!1,a);break}}}},s.UniformMatrix3f=class extends Nh{constructor(o){super(o),this.current=j_}set(o,n,a){if(this.fetchUniformLocation(o,n)){for(let p=0;p<9;p++)if(a[p]!==this.current[p]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}}},s.UniformMatrix4f=class extends Nh{constructor(o){super(o),this.current=eg}set(o,n,a){if(this.fetchUniformLocation(o,n)){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let p=1;p<16;p++)if(a[p]!==this.current[p]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}}},s.UnwrappedTileID=pc,s.ValidationError=E,s.VectorTileFeature=_i,s.VectorTileWorkerSource=class extends Yo{constructor(o,n,a,p,y){super(),this.actor=o,this.layerIndex=n,this.availableImages=a,this.loadVectorData=y||sz,this.loading={},this.loaded={},this.deduped=new oz(o.scheduler),this.isSpriteLoaded=p,this.scheduler=o.scheduler}loadTile(o,n){const a=o.uid,p=o&&o.request,y=p&&p.collectResourceTiming,C=this.loading[a]=new Fte(o);C.abort=this.loadVectorData(o,(S,z)=>{const Q=!this.loading[a];if(delete this.loading[a],Q||S||!z)return C.status="done",Q||(this.loaded[a]=C),n(S);const W=z.rawData,J={};z.expires&&(J.expires=z.expires),z.cacheControl&&(J.cacheControl=z.cacheControl),C.vectorTile=z.vectorTile||new Ci(new uy(W));const ie=()=>{C.parse(C.vectorTile,this.layerIndex,this.availableImages,this.actor,(se,fe)=>{if(se||!fe)return n(se);const _e={};if(y){const Me=mi(p);Me.length>0&&(_e.resourceTiming=JSON.parse(JSON.stringify(Me)))}n(null,Bn({rawTileData:W.slice(0)},fe,J,_e))})};this.isSpriteLoaded?ie():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(ie,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom}):ie()}),this.loaded=this.loaded||{},this.loaded[a]=C})}reloadTile(o,n){const a=this.loaded,p=o.uid,y=this;if(a&&a[p]){const C=a[p];C.showCollisionBoxes=o.showCollisionBoxes,C.enableTerrain=!!o.enableTerrain,C.projection=o.projection,C.tileTransform=VA(o.tileID.canonical,o.projection);const S=(z,Q)=>{const W=C.reloadCallback;W&&(delete C.reloadCallback,C.parse(C.vectorTile,y.layerIndex,this.availableImages,y.actor,W)),n(z,Q)};C.status==="parsing"?C.reloadCallback=S:C.status==="done"&&(C.vectorTile?C.parse(C.vectorTile,this.layerIndex,this.availableImages,this.actor,S):S())}}abortTile(o,n){const a=o.uid,p=this.loading[a];p&&(p.abort&&p.abort(),delete this.loading[a]),n()}removeTile(o,n){const a=this.loaded,p=o.uid;a&&a[p]&&delete a[p],n()}},s.WritingMode=js,s.ZoomDependentExpression=Oo,s.add=_h,s.addDynamicAttributes=yy,s.adjoint=function(o,n){var a=n[0],p=n[1],y=n[2],C=n[3],S=n[4],z=n[5],Q=n[6],W=n[7],J=n[8];return o[0]=S*J-z*W,o[1]=y*W-p*J,o[2]=p*z-y*S,o[3]=z*Q-C*J,o[4]=a*J-y*Q,o[5]=y*C-a*z,o[6]=C*W-S*Q,o[7]=p*Q-a*W,o[8]=a*S-p*C,o},s.asyncAll=Wn,s.bezier=Rn,s.bindAll=Vr,s.boundsAttributes=oi,s.bufferConvexPolygon=function(o,n){const a=[];for(let p=0;p<o.length;p++){const y=Xn(p-1,-1,o.length-1),C=Xn(p+1,-1,o.length-1),S=o[p],z=o[C],Q=o[y].sub(S).unit(),W=z.sub(S).unit(),J=W.angleWithSep(Q.x,Q.y),ie=Q.add(W).unit().mult(-1*n/Math.sin(J/2));a.push(S.add(ie))}return a},s.cacheEntryPossiblyAdded=function(o){xi++,xi>Ao&&(o.getActor().send("enforceCacheSizeLimit",Eo),xi=0)},s.calculateGlobeLabelMatrix=function(o,n){const{x:a,y:p}=o.point,y=hg(a,p,o.worldSize/o._pixelsPerMercatorPixel,0,0);return ed(y,y,Xp(vh(n)))},s.calculateGlobeMatrix=function(o){const{x:n,y:a}=o.point,{lng:p,lat:y}=o._center;return hg(n,a,o.worldSize,p,y)},s.calculateGlobeMercatorMatrix=function(o){const n=o.pixelsPerMeter,a=n/xh(1,o.center.lat),p=Xl(new Float64Array(16));return qf(p,p,[o.point.x,o.point.y,0]),Jd(p,p,[a,a,n]),Float32Array.from(p)},s.circumferenceAtLatitude=em,s.clamp=Cn,s.clearTileCache=function(o){if(!Fr())return;const n=U.caches.delete(Zr);o&&n.catch(o).then(()=>o())},s.clipLine=Ow,s.clone=function(o){var n=new Tu(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},s.clone$1=Ki,s.collisionCircleLayout=fm,s.config=q,s.conjugate=function(o,n){return o[0]=-n[0],o[1]=-n[1],o[2]=-n[2],o[3]=n[3],o},s.create=function(){var o=new Tu(16);return Tu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},s.create$1=jp,s.createExpression=bu,s.createLayout=Nt,s.createStyleLayer=function(o){return o.type==="custom"?new BE(o):new EE[o.type](o)},s.cross=gf,s.degToRad=Ut,s.distance=function(o,n){return Math.hypot(n[0]-o[0],n[1]-o[1],n[2]-o[2])},s.div=function(o,n,a){return o[0]=n[0]/a[0],o[1]=n[1]/a[1],o[2]=n[2]/a[2],o},s.dot=wa,s.earthRadius=nd,s.ease=mn,s.easeCubicInOut=Gt,s.ecefToLatLng=function([o,n,a]){const p=Math.hypot(o,n,a),y=Math.atan2(o,a),C=.5*Math.PI-Math.acos(-n/p);return new _s(Kt(y),Kt(C))},s.emitValidationErrors=In,s.endsWith=sr,s.enforceCacheSizeLimit=function(o){So(),$t&&$t.then(n=>{n.keys().then(a=>{for(let p=0;p<a.length-o;p++)n.delete(a[p])})})},s.evaluateSizeForFeature=hp,s.evaluateSizeForZoom=Ld,s.evaluateVariableOffset=jw,s.evented=k,s.exactEquals=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]&&o[3]===n[3]},s.exactEquals$1=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]},s.exported=mr,s.exported$1=te,s.extend=Bn,s.extend$1=Wr,s.fillExtrusionHeightLift=Ml,s.filterObject=Qi,s.fromMat4=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[4],o[4]=n[5],o[5]=n[6],o[6]=n[8],o[7]=n[9],o[8]=n[10],o},s.fromQuat=function(o,n){var a=n[0],p=n[1],y=n[2],C=n[3],S=a+a,z=p+p,Q=y+y,W=a*S,J=p*S,ie=p*z,se=y*S,fe=y*z,_e=y*Q,Me=C*S,Ve=C*z,ut=C*Q;return o[0]=1-ie-_e,o[1]=J+ut,o[2]=se-Ve,o[3]=0,o[4]=J-ut,o[5]=1-W-_e,o[6]=fe+Me,o[7]=0,o[8]=se+Ve,o[9]=fe-Me,o[10]=1-W-ie,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},s.fromRotation=function(o,n){var a=Math.sin(n),p=Math.cos(n);return o[0]=p,o[1]=a,o[2]=0,o[3]=-a,o[4]=p,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},s.fromScaling=H_,s.furthestTileCorner=function(o){const n=Math.round((o+45+360)%360/90)%4;return On[n]},s.getAABBPointSquareDist=function(o,n,a){let p=0;for(let y=0;y<2;++y){const C=a?a[y]:0;o[y]>C&&(p+=(o[y]-C)*(o[y]-C)),n[y]<C&&(p+=(C-n[y])*(C-n[y]))}return p},s.getAnchorAlignment=c0,s.getAnchorJustification=f0,s.getBounds=function(o){let n=1/0,a=1/0,p=-1/0,y=-1/0;for(const C of o)n=Math.min(n,C.x),a=Math.min(a,C.y),p=Math.max(p,C.x),y=Math.max(y,C.y);return{min:new Xe(n,a),max:new Xe(p,y)}},s.getColumn=pr,s.getDefaultExportFromCjs=Ee,s.getGridMatrix=function(o,n,a,p){const y=n.getNorth(),C=n.getSouth(),S=n.getWest(),z=n.getEast(),Q=1<<o.z,W=z-S,J=y-C,ie=W/aA,se=-J/Eu[a],fe=[0,ie,0,se,0,0,y,S,0];if(o.z>0){const _e=180/p;Zf(fe,fe,[_e/W+1,0,0,0,_e/J+1,0,-.5*_e/ie,.5*_e/se,1])}return fe[2]=Q,fe[5]=o.x,fe[8]=o.y,fe},s.getImage=st,s.getJSON=function(o,n){return bn(Bn(o,{type:"json"}),n)},s.getLatitudinalLod=function(o){const n=Sl-5;o=Cn(o,-n,n)/n*90;const a=Math.pow(Math.abs(Math.sin(Ut(o))),3);return Math.round(a*(Eu.length-1))},s.getMapSessionAPI=Je,s.getPerformanceMeasurement=mi,s.getProjection=my,s.getRTLTextPluginStatus=R,s.getReferrer=Oi,s.getTilePoint=function(o,{x:n,y:a},p=0){return new Xe(((n-p)*o.scale-o.x)*Ar,(a*o.scale-o.y)*Ar)},s.getTileVec3=function(o,n,a=0){return rA(((n.x-a)*o.scale-o.x)*Ar,(n.y*o.scale-o.y)*Ar,tm(n.z,n.y))},s.getVideo=function(o,n){const a=U.document.createElement("video");a.muted=!0,a.onloadstart=function(){n(null,a)};for(let p=0;p<o.length;p++){const y=U.document.createElement("source");fi(o[p])||(a.crossOrigin="Anonymous"),y.src=o[p],a.appendChild(y)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(o){const n=[0,0,0],a=Xl(new Float64Array(16));return ed(a,o.pixelMatrix,o.globeMatrix),fa(n,n,a),new Xe(n[0],n[1])},s.globeDenormalizeECEF=Xp,s.globeECEFOrigin=function(o,n){const a=[0,0,0];return fa(a,a,uA(vh(n.canonical))),fa(a,a,o),a},s.globeMetersToEcef=DA,s.globeNormalizeECEF=uA,s.globePixelsToTileUnits=function(o,n){return Ar/(512*Math.pow(2,o))*cA(vh(n))},s.globePoleMatrixForTile=function(o,n,a){const p=Xl(new Float64Array(16)),y=(n/(1<<o)-.5)*Math.PI*2;return tA(p,a.globeMatrix,y),Float32Array.from(p)},s.globeTileBounds=vh,s.globeTiltAtLngLat=Yp,s.globeToMercatorTransition=Td,s.globeUseCustomAntiAliasing=function(o,n,a){const p=Td(a.zoom),y=o.style.map._antialias,C=!!n.extStandardDerivatives,S=n.extStandardDerivativesForceOff||o.terrain&&o.terrain.exaggeration()>0;return p===0&&!y&&!S&&C},s.identity=Xl,s.identity$1=kA,s.invert=pf,s.isFullscreen=function(){return!!U.document.fullscreenElement||!!U.document.webkitFullscreenElement},s.isLngLatBehindGlobe=Su,s.isMapAuthenticated=function(o){return mt.has(o)},s.isMapboxURL=kt,s.isSafariWithAntialiasingBug=function(o){const n=o.navigator?o.navigator.userAgent:null;return!!Ur(o)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=Al,s.latLngToECEF=vf,s.len=wd,s.length=iA,s.length$1=function(o){return Math.hypot(o[0],o[1],o[2],o[3])},s.lngFromMercatorX=Iu,s.loadVectorTile=sz,s.makeRequest=bn,s.mapValue=function(o,n,a,p,y){return Cn((o-n)/(a-n)*(y-p)+p,p,y)},s.mercatorScale=dg,s.mercatorXfromLng=Hh,s.mercatorYfromLat=id,s.mercatorZfromAltitude=xh,s.mul=V_,s.mul$1=W_,s.multiply=ed,s.multiply$1=Zf,s.multiply$2=Vp,s.nextPowerOfTwo=ri,s.normalize=El,s.normalize$1=rg,s.normalize$2=Wp,s.number=lo,s.ortho=function(o,n,a,p,y,C,S){var z=1/(n-a),Q=1/(p-y),W=1/(C-S);return o[0]=-2*z,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*Q,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*W,o[11]=0,o[12]=(n+a)*z,o[13]=(y+p)*Q,o[14]=(S+C)*W,o[15]=1,o},s.pbf=Ap,s.perspective=function(o,n,a,p,y){var C,S=1/Math.tan(n/2);return o[0]=S/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=S,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,y!=null&&y!==1/0?(o[10]=(y+p)*(C=1/(p-y)),o[14]=2*y*p*C):(o[10]=-1,o[14]=-2*p),o},s.pick=function(o,n){const a={};for(let p=0;p<n.length;p++){const y=n[p];y in o&&(a[y]=o[y])}return a},s.plugin=X,s.pointGeometry=xt,s.polesInViewport=function(o){const n=Xl(new Float64Array(16));ed(n,o.pixelMatrix,o.globeMatrix);const a=[0,Pr,0],p=[0,Xa,0];return fa(a,a,n),fa(p,p,n),[a[0]>0&&a[0]<=o.width&&a[1]>0&&a[1]<=o.height&&!Su(o,new _s(o.center.lat,90)),p[0]>0&&p[0]<=o.width&&p[1]>0&&p[1]<=o.height&&!Su(o,new _s(o.center.lat,-90))]},s.polygonContainsPoint=bh,s.polygonIntersectsBox=sm,s.polygonIntersectsPolygon=np,s.polygonizeBounds=function(o,n,a=0,p=!0){const y=new Xe(a,a),C=o.sub(y),S=n.add(y),z=[C,new Xe(S.x,C.y),S,new Xe(C.x,S.y)];return p&&z.push(C.clone()),z},s.posAttributes=yf,s.postMapLoadEvent=Ke,s.postPerformanceEvent=qe,s.postTurnstileEvent=we,s.potpack=Lg,s.prevPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.floor(Math.log(o)/Math.LN2))},s.radToDeg=Kt,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(o){return o({pluginStatus:b,pluginURL:l}),k.on("pluginStateChange",o),o},s.removeAuthState=function(o){mt.delete(o)},s.renderColorRamp=op,s.resample=Ag,s.rotateX=eA,s.rotateX$1=Qr,s.rotateY=tA,s.rotateY$1=PA,s.rotateZ=function(o,n,a){var p=Math.sin(a),y=Math.cos(a),C=n[0],S=n[1],z=n[2],Q=n[3],W=n[4],J=n[5],ie=n[6],se=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=C*y+W*p,o[1]=S*y+J*p,o[2]=z*y+ie*p,o[3]=Q*y+se*p,o[4]=W*y-C*p,o[5]=J*y-S*p,o[6]=ie*y-z*p,o[7]=se*y-Q*p,o},s.rotateZ$1=function(o,n,a){a*=.5;var p=n[0],y=n[1],C=n[2],S=n[3],z=Math.sin(a),Q=Math.cos(a);return o[0]=p*Q+y*z,o[1]=y*Q-p*z,o[2]=C*Q+S*z,o[3]=S*Q-C*z,o},s.scale=Jd,s.scale$1=Gp,s.scale$2=su,s.scaleAndAdd=Xf,s.set=function(o,n,a,p){return o[0]=n,o[1]=a,o[2]=p,o},s.setCacheLimits=function(o,n){Eo=o,Ao=n},s.setColumn=function(o,n,a){o[4*n+0]=a[0],o[4*n+1]=a[1],o[4*n+2]=a[2],o[4*n+3]=a[3]},s.setRTLTextPlugin=function(o,n,a=!1){if(b===Tl||b===hl||b===tu)throw new Error("setRTLTextPlugin cannot be called multiple times.");l=mr.resolveURL(o),b=Tl,nu=n,T(),a||K()},s.smoothstep=Qt,s.spec=hn,s.squaredLength=function(o){var n=o[0],a=o[1],p=o[2];return n*n+a*a+p*p},s.storeAuthState=function(o,n){n?mt.add(o):mt.delete(o)},s.sub=au,s.subtract=Hp,s.symbolSize=qu,s.tileAABB=function(o,n,a,p,y,C,S,z,Q){if(Q.name==="globe")return Zv(o,n,new wr(a,p,y));const W=VA({z:a,x:p,y},Q);return new Ac([(C+W.x/W.scale)*n,n*(W.y/W.scale),S],[(C+W.x2/W.scale)*n,n*(W.y2/W.scale),z])},s.tileCornersToBounds=Zp,s.tileTransform=VA,s.transformMat3=function(o,n,a){var p=n[0],y=n[1],C=n[2];return o[0]=p*a[0]+y*a[3]+C*a[6],o[1]=p*a[1]+y*a[4]+C*a[7],o[2]=p*a[2]+y*a[5]+C*a[8],o},s.transformMat4=fa,s.transformMat4$1=Cd,s.transformQuat=G_,s.transitionTileAABBinECEF=K_,s.translate=qf,s.transpose=function(o,n){if(o===n){var a=n[1],p=n[2],y=n[5];o[1]=n[3],o[2]=n[6],o[3]=a,o[5]=n[7],o[6]=p,o[7]=y}else o[0]=n[0],o[1]=n[3],o[2]=n[6],o[3]=n[1],o[4]=n[4],o[5]=n[7],o[6]=n[2],o[7]=n[5],o[8]=n[8];return o},s.triggerPluginCompletionEvent=g,s.uniqueId=ei,s.updateGlobeVertexNormal=function(o,n,a,p,y){const C=5*n+2;o.float32[C+0]=a,o.float32[C+1]=p,o.float32[C+2]=y},s.validateCustomStyleLayer=function(o){const n=[],a=o.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},s.validateFilter=o=>tn(x(o)),s.validateFog=o=>tn(dt(o)),s.validateLayer=o=>tn(oe(o)),s.validateLight=o=>tn(He(o)),s.validateSource=o=>tn(ye(o)),s.validateStyle=on,s.validateTerrain=o=>tn(gt(o)),s.values=Bi,s.vectorTile=Ze,s.version=$,s.warnOnce=di,s.window=U,s.wrap=Xn}),v(["./shared"],function(s){function U(ot){if(typeof ot=="number"||typeof ot=="boolean"||typeof ot=="string"||ot==null)return JSON.stringify(ot);if(Array.isArray(ot)){let Ce="[";for(const st of ot)Ce+=`${U(st)},`;return`${Ce}]`}let Ie="{";for(const Ce of Object.keys(ot).sort())Ie+=`${Ce}:${U(ot[Ce])},`;return`${Ie}}`}function $(ot){let Ie="";for(const Ce of s.refProperties)Ie+=`/${U(ot[Ce])}`;return Ie}class V{constructor(Ie){this.keyCache={},Ie&&this.replace(Ie)}replace(Ie){this._layerConfigs={},this._layers={},this.update(Ie,[])}update(Ie,Ce){for(const ft of Ie)this._layerConfigs[ft.id]=ft,(this._layers[ft.id]=s.createStyleLayer(ft)).compileFilter(),this.keyCache[ft.id]&&delete this.keyCache[ft.id];for(const ft of Ce)delete this.keyCache[ft],delete this._layerConfigs[ft],delete this._layers[ft];this.familiesBySource={};const st=function(ft,kt){const zt={};for(let yt=0;yt<ft.length;yt++){const Xt=kt&&kt[ft[yt].id]||$(ft[yt]);kt&&(kt[ft[yt].id]=Xt);let Tn=zt[Xt];Tn||(Tn=zt[Xt]=[]),Tn.push(ft[yt])}const Rt=[];for(const yt in zt)Rt.push(zt[yt]);return Rt}(s.values(this._layerConfigs),this.keyCache);for(const ft of st){const kt=ft.map(Fn=>this._layers[Fn.id]),zt=kt[0];if(zt.visibility==="none")continue;const Rt=zt.source||"";let yt=this.familiesBySource[Rt];yt||(yt=this.familiesBySource[Rt]={});const Xt=zt.sourceLayer||"_geojsonTileLayer";let Tn=yt[Xt];Tn||(Tn=yt[Xt]=[]),Tn.push(kt)}}}class q{loadTile(Ie,Ce){const{uid:st,encoding:ft,rawImageData:kt,padding:zt,buildQuadTree:Rt}=Ie,yt=s.window.ImageBitmap&&kt instanceof s.window.ImageBitmap?this.getImageData(kt,zt):kt;Ce(null,new s.DEMData(st,yt,ft,zt<1,Rt))}getImageData(Ie,Ce){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ie.width,Ie.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Ie.width,this.offscreenCanvas.height=Ie.height,this.offscreenCanvasContext.drawImage(Ie,0,0,Ie.width,Ie.height);const st=this.offscreenCanvasContext.getImageData(-Ce,-Ce,Ie.width+2*Ce,Ie.height+2*Ce);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),st}}function te(ot,Ie){if(ot.length!==0){he(ot[0],Ie);for(var Ce=1;Ce<ot.length;Ce++)he(ot[Ce],!Ie)}}function he(ot,Ie){for(var Ce=0,st=0,ft=0,kt=ot.length,zt=kt-1;ft<kt;zt=ft++){var Rt=(ot[ft][0]-ot[zt][0])*(ot[zt][1]+ot[ft][1]),yt=Ce+Rt;st+=Math.abs(Ce)>=Math.abs(Rt)?Ce-yt+Rt:Rt-yt+Ce,Ce=yt}Ce+st>=0!=!!Ie&&ot.reverse()}var Ae=s.getDefaultExportFromCjs(function ot(Ie,Ce){var st,ft=Ie&&Ie.type;if(ft==="FeatureCollection")for(st=0;st<Ie.features.length;st++)ot(Ie.features[st],Ce);else if(ft==="GeometryCollection")for(st=0;st<Ie.geometries.length;st++)ot(Ie.geometries[st],Ce);else if(ft==="Feature")ot(Ie.geometry,Ce);else if(ft==="Polygon")te(Ie.coordinates,Ce);else if(ft==="MultiPolygon")for(st=0;st<Ie.coordinates.length;st++)te(Ie.coordinates[st],Ce);return Ie});const De=s.VectorTileFeature.prototype.toGeoJSON;var ke={exports:{}},xe=s.pointGeometry,Te=s.vectorTile.VectorTileFeature,Ee=Fe;function Fe(ot,Ie){this.options=Ie||{},this.features=ot,this.length=ot.length}function Se(ot,Ie){this.id=typeof ot.id=="number"?ot.id:void 0,this.type=ot.type,this.rawGeometry=ot.type===1?[ot.geometry]:ot.geometry,this.properties=ot.tags,this.extent=Ie||4096}Fe.prototype.feature=function(ot){return new Se(this.features[ot],this.options.extent)},Se.prototype.loadGeometry=function(){var ot=this.rawGeometry;this.geometry=[];for(var Ie=0;Ie<ot.length;Ie++){for(var Ce=ot[Ie],st=[],ft=0;ft<Ce.length;ft++)st.push(new xe(Ce[ft][0],Ce[ft][1]));this.geometry.push(st)}return this.geometry},Se.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ot=this.geometry,Ie=1/0,Ce=-1/0,st=1/0,ft=-1/0,kt=0;kt<ot.length;kt++)for(var zt=ot[kt],Rt=0;Rt<zt.length;Rt++){var yt=zt[Rt];Ie=Math.min(Ie,yt.x),Ce=Math.max(Ce,yt.x),st=Math.min(st,yt.y),ft=Math.max(ft,yt.y)}return[Ie,st,Ce,ft]},Se.prototype.toGeoJSON=Te.prototype.toGeoJSON;var nt=s.pbf,xt=Ee;function Bt(ot){var Ie=new nt;return function(Ce,st){for(var ft in Ce.layers)st.writeMessage(3,Xe,Ce.layers[ft])}(ot,Ie),Ie.finish()}function Xe(ot,Ie){var Ce;Ie.writeVarintField(15,ot.version||1),Ie.writeStringField(1,ot.name||""),Ie.writeVarintField(5,ot.extent||4096);var st={keys:[],values:[],keycache:{},valuecache:{}};for(Ce=0;Ce<ot.length;Ce++)st.feature=ot.feature(Ce),Ie.writeMessage(2,qt,st);var ft=st.keys;for(Ce=0;Ce<ft.length;Ce++)Ie.writeStringField(3,ft[Ce]);var kt=st.values;for(Ce=0;Ce<kt.length;Ce++)Ie.writeMessage(4,Gt,kt[Ce])}function qt(ot,Ie){var Ce=ot.feature;Ce.id!==void 0&&Ie.writeVarintField(1,Ce.id),Ie.writeMessage(2,rn,ot),Ie.writeVarintField(3,Ce.type),Ie.writeMessage(4,On,Ce)}function rn(ot,Ie){var Ce=ot.feature,st=ot.keys,ft=ot.values,kt=ot.keycache,zt=ot.valuecache;for(var Rt in Ce.properties){var yt=Ce.properties[Rt],Xt=kt[Rt];if(yt!==null){Xt===void 0&&(st.push(Rt),kt[Rt]=Xt=st.length-1),Ie.writeVarint(Xt);var Tn=typeof yt;Tn!=="string"&&Tn!=="boolean"&&Tn!=="number"&&(yt=JSON.stringify(yt));var Fn=Tn+":"+yt,zn=zt[Fn];zn===void 0&&(ft.push(yt),zt[Fn]=zn=ft.length-1),Ie.writeVarint(zn)}}}function Ut(ot,Ie){return(Ie<<3)+(7&ot)}function Kt(ot){return ot<<1^ot>>31}function On(ot,Ie){for(var Ce=ot.loadGeometry(),st=ot.type,ft=0,kt=0,zt=Ce.length,Rt=0;Rt<zt;Rt++){var yt=Ce[Rt],Xt=1;st===1&&(Xt=yt.length),Ie.writeVarint(Ut(1,Xt));for(var Tn=st===3?yt.length-1:yt.length,Fn=0;Fn<Tn;Fn++){Fn===1&&st!==1&&Ie.writeVarint(Ut(2,Tn-1));var zn=yt[Fn].x-ft,rr=yt[Fn].y-kt;Ie.writeVarint(Kt(zn)),Ie.writeVarint(Kt(rr)),ft+=zn,kt+=rr}st===3&&Ie.writeVarint(Ut(7,1))}}function Gt(ot,Ie){var Ce=typeof ot;Ce==="string"?Ie.writeStringField(1,ot):Ce==="boolean"?Ie.writeBooleanField(7,ot):Ce==="number"&&(ot%1!=0?Ie.writeDoubleField(3,ot):ot<0?Ie.writeSVarintField(6,ot):Ie.writeVarintField(5,ot))}ke.exports=Bt,ke.exports.fromVectorTileJs=Bt,ke.exports.fromGeojsonVt=function(ot,Ie){Ie=Ie||{};var Ce={};for(var st in ot)Ce[st]=new xt(ot[st].features,Ie),Ce[st].name=st,Ce[st].version=Ie.version,Ce[st].extent=Ie.extent;return Bt({layers:Ce})},ke.exports.GeoJSONWrapper=xt;var Rn=s.getDefaultExportFromCjs(ke.exports);const mn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ot=>ot},Cn=Math.fround||(Qt=new Float32Array(1),ot=>(Qt[0]=+ot,Qt[0]));var Qt;const Xn=3,Wn=5,Bi=6;class Bn{constructor(Ie){this.options=Object.assign(Object.create(mn),Ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ie){const{log:Ce,minZoom:st,maxZoom:ft}=this.options;Ce&&console.time("total time");const kt=`prepare ${Ie.length} points`;Ce&&console.time(kt),this.points=Ie;const zt=[];for(let yt=0;yt<Ie.length;yt++){const Xt=Ie[yt];if(!Xt.geometry)continue;const[Tn,Fn]=Xt.geometry.coordinates,zn=Cn(tr(Tn)),rr=Cn(ri(Fn));zt.push(zn,rr,1/0,yt,-1,1),this.options.reduce&&zt.push(0)}let Rt=this.trees[ft+1]=this._createTree(zt);Ce&&console.timeEnd(kt);for(let yt=ft;yt>=st;yt--){const Xt=+Date.now();Rt=this.trees[yt]=this._createTree(this._cluster(Rt,yt)),Ce&&console.log("z%d: %d clusters in %dms",yt,Rt.numItems,+Date.now()-Xt)}return Ce&&console.timeEnd("total time"),this}getClusters(Ie,Ce){let st=((Ie[0]+180)%360+360)%360-180;const ft=Math.max(-90,Math.min(90,Ie[1]));let kt=Ie[2]===180?180:((Ie[2]+180)%360+360)%360-180;const zt=Math.max(-90,Math.min(90,Ie[3]));if(Ie[2]-Ie[0]>=360)st=-180,kt=180;else if(st>kt){const Fn=this.getClusters([st,ft,180,zt],Ce),zn=this.getClusters([-180,ft,kt,zt],Ce);return Fn.concat(zn)}const Rt=this.trees[this._limitZoom(Ce)],yt=Rt.range(tr(st),ri(zt),tr(kt),ri(ft)),Xt=Rt.data,Tn=[];for(const Fn of yt){const zn=this.stride*Fn;Tn.push(Xt[zn+Wn]>1?Hn(Xt,zn,this.clusterProps):this.points[Xt[zn+Xn]])}return Tn}getChildren(Ie){const Ce=this._getOriginId(Ie),st=this._getOriginZoom(Ie),ft="No cluster with the specified id.",kt=this.trees[st];if(!kt)throw new Error(ft);const zt=kt.data;if(Ce*this.stride>=zt.length)throw new Error(ft);const Rt=this.options.radius/(this.options.extent*Math.pow(2,st-1)),yt=kt.within(zt[Ce*this.stride],zt[Ce*this.stride+1],Rt),Xt=[];for(const Tn of yt){const Fn=Tn*this.stride;zt[Fn+4]===Ie&&Xt.push(zt[Fn+Wn]>1?Hn(zt,Fn,this.clusterProps):this.points[zt[Fn+Xn]])}if(Xt.length===0)throw new Error(ft);return Xt}getLeaves(Ie,Ce,st){const ft=[];return this._appendLeaves(ft,Ie,Ce=Ce||10,st=st||0,0),ft}getTile(Ie,Ce,st){const ft=this.trees[this._limitZoom(Ie)],kt=Math.pow(2,Ie),{extent:zt,radius:Rt}=this.options,yt=Rt/zt,Xt=(st-yt)/kt,Tn=(st+1+yt)/kt,Fn={features:[]};return this._addTileFeatures(ft.range((Ce-yt)/kt,Xt,(Ce+1+yt)/kt,Tn),ft.data,Ce,st,kt,Fn),Ce===0&&this._addTileFeatures(ft.range(1-yt/kt,Xt,1,Tn),ft.data,kt,st,kt,Fn),Ce===kt-1&&this._addTileFeatures(ft.range(0,Xt,yt/kt,Tn),ft.data,-1,st,kt,Fn),Fn.features.length?Fn:null}getClusterExpansionZoom(Ie){let Ce=this._getOriginZoom(Ie)-1;for(;Ce<=this.options.maxZoom;){const st=this.getChildren(Ie);if(Ce++,st.length!==1)break;Ie=st[0].properties.cluster_id}return Ce}_appendLeaves(Ie,Ce,st,ft,kt){const zt=this.getChildren(Ce);for(const Rt of zt){const yt=Rt.properties;if(yt&&yt.cluster?kt+yt.point_count<=ft?kt+=yt.point_count:kt=this._appendLeaves(Ie,yt.cluster_id,st,ft,kt):kt<ft?kt++:Ie.push(Rt),Ie.length===st)break}return kt}_createTree(Ie){const Ce=new s.KDBush(Ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let st=0;st<Ie.length;st+=this.stride)Ce.add(Ie[st],Ie[st+1]);return Ce.finish(),Ce.data=Ie,Ce}_addTileFeatures(Ie,Ce,st,ft,kt,zt){for(const Rt of Ie){const yt=Rt*this.stride,Xt=Ce[yt+Wn]>1;let Tn,Fn,zn;if(Xt)Tn=ei(Ce,yt,this.clusterProps),Fn=Ce[yt],zn=Ce[yt+1];else{const Pe=this.points[Ce[yt+Xn]];Tn=Pe.properties;const[pe,we]=Pe.geometry.coordinates;Fn=tr(pe),zn=ri(we)}const rr={type:1,geometry:[[Math.round(this.options.extent*(Fn*kt-st)),Math.round(this.options.extent*(zn*kt-ft))]],tags:Tn};let Zi;Zi=Xt||this.options.generateId?Ce[yt+Xn]:this.points[Ce[yt+Xn]].id,Zi!==void 0&&(rr.id=Zi),zt.features.push(rr)}}_limitZoom(Ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ie),this.options.maxZoom+1))}_cluster(Ie,Ce){const{radius:st,extent:ft,reduce:kt,minPoints:zt}=this.options,Rt=st/(ft*Math.pow(2,Ce)),yt=Ie.data,Xt=[],Tn=this.stride;for(let Fn=0;Fn<yt.length;Fn+=Tn){if(yt[Fn+2]<=Ce)continue;yt[Fn+2]=Ce;const zn=yt[Fn],rr=yt[Fn+1],Zi=Ie.within(yt[Fn],yt[Fn+1],Rt),Pe=yt[Fn+Wn];let pe=Pe;for(const we of Zi){const je=we*Tn;yt[je+2]>Ce&&(pe+=yt[je+Wn])}if(pe>Pe&&pe>=zt){let we,je=zn*Pe,Ke=rr*Pe,_t=-1;const qe=((Fn/Tn|0)<<5)+(Ce+1)+this.points.length;for(const Oe of Zi){const Je=Oe*Tn;if(yt[Je+2]<=Ce)continue;yt[Je+2]=Ce;const mt=yt[Je+Wn];je+=yt[Je]*mt,Ke+=yt[Je+1]*mt,yt[Je+4]=qe,kt&&(we||(we=this._map(yt,Fn,!0),_t=this.clusterProps.length,this.clusterProps.push(we)),kt(we,this._map(yt,Je)))}yt[Fn+4]=qe,Xt.push(je/pe,Ke/pe,1/0,qe,-1,pe),kt&&Xt.push(_t)}else{for(let we=0;we<Tn;we++)Xt.push(yt[Fn+we]);if(pe>1)for(const we of Zi){const je=we*Tn;if(!(yt[je+2]<=Ce)){yt[je+2]=Ce;for(let Ke=0;Ke<Tn;Ke++)Xt.push(yt[je+Ke])}}}}return Xt}_getOriginId(Ie){return Ie-this.points.length>>5}_getOriginZoom(Ie){return(Ie-this.points.length)%32}_map(Ie,Ce,st){if(Ie[Ce+Wn]>1){const zt=this.clusterProps[Ie[Ce+Bi]];return st?Object.assign({},zt):zt}const ft=this.points[Ie[Ce+Xn]].properties,kt=this.options.map(ft);return st&&kt===ft?Object.assign({},kt):kt}}function Hn(ot,Ie,Ce){return{type:"Feature",id:ot[Ie+Xn],properties:ei(ot,Ie,Ce),geometry:{type:"Point",coordinates:[(st=ot[Ie],360*(st-.5)),zi(ot[Ie+1])]}};var st}function ei(ot,Ie,Ce){const st=ot[Ie+Wn],ft=st>=1e4?`${Math.round(st/1e3)}k`:st>=1e3?Math.round(st/100)/10+"k":st,kt=ot[Ie+Bi],zt=kt===-1?{}:Object.assign({},Ce[kt]);return Object.assign(zt,{cluster:!0,cluster_id:ot[Ie+Xn],point_count:st,point_count_abbreviated:ft})}function tr(ot){return ot/360+.5}function ri(ot){const Ie=Math.sin(ot*Math.PI/180),Ce=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function zi(ot){const Ie=(180-360*ot)*Math.PI/180;return 360*Math.atan(Math.exp(Ie))/Math.PI-90}function Vr(ot,Ie,Ce,st){for(var ft,kt=st,zt=Ce-Ie>>1,Rt=Ce-Ie,yt=ot[Ie],Xt=ot[Ie+1],Tn=ot[Ce],Fn=ot[Ce+1],zn=Ie+3;zn<Ce;zn+=3){var rr=sr(ot[zn],ot[zn+1],yt,Xt,Tn,Fn);if(rr>kt)ft=zn,kt=rr;else if(rr===kt){var Zi=Math.abs(zn-zt);Zi<Rt&&(ft=zn,Rt=Zi)}}kt>st&&(ft-Ie>3&&Vr(ot,Ie,ft,st),ot[ft+2]=kt,Ce-ft>3&&Vr(ot,ft,Ce,st))}function sr(ot,Ie,Ce,st,ft,kt){var zt=ft-Ce,Rt=kt-st;if(zt!==0||Rt!==0){var yt=((ot-Ce)*zt+(Ie-st)*Rt)/(zt*zt+Rt*Rt);yt>1?(Ce=ft,st=kt):yt>0&&(Ce+=zt*yt,st+=Rt*yt)}return(zt=ot-Ce)*zt+(Rt=Ie-st)*Rt}function li(ot,Ie,Ce,st){var ft={id:ot===void 0?null:ot,type:Ie,geometry:Ce,tags:st,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(kt){var zt=kt.geometry,Rt=kt.type;if(Rt==="Point"||Rt==="MultiPoint"||Rt==="LineString")Qi(kt,zt);else if(Rt==="Polygon"||Rt==="MultiLineString")for(var yt=0;yt<zt.length;yt++)Qi(kt,zt[yt]);else if(Rt==="MultiPolygon")for(yt=0;yt<zt.length;yt++)for(var Xt=0;Xt<zt[yt].length;Xt++)Qi(kt,zt[yt][Xt])}(ft),ft}function Qi(ot,Ie){for(var Ce=0;Ce<Ie.length;Ce+=3)ot.minX=Math.min(ot.minX,Ie[Ce]),ot.minY=Math.min(ot.minY,Ie[Ce+1]),ot.maxX=Math.max(ot.maxX,Ie[Ce]),ot.maxY=Math.max(ot.maxY,Ie[Ce+1])}function Ki(ot,Ie,Ce,st){if(Ie.geometry){var ft=Ie.geometry.coordinates,kt=Ie.geometry.type,zt=Math.pow(Ce.tolerance/((1<<Ce.maxZoom)*Ce.extent),2),Rt=[],yt=Ie.id;if(Ce.promoteId?yt=Ie.properties[Ce.promoteId]:Ce.generateId&&(yt=st||0),kt==="Point")ji(ft,Rt);else if(kt==="MultiPoint")for(var Xt=0;Xt<ft.length;Xt++)ji(ft[Xt],Rt);else if(kt==="LineString")di(ft,Rt,zt,!1);else if(kt==="MultiLineString"){if(Ce.lineMetrics){for(Xt=0;Xt<ft.length;Xt++)di(ft[Xt],Rt=[],zt,!1),ot.push(li(yt,"LineString",Rt,Ie.properties));return}Ir(ft,Rt,zt,!1)}else if(kt==="Polygon")Ir(ft,Rt,zt,!0);else{if(kt!=="MultiPolygon"){if(kt==="GeometryCollection"){for(Xt=0;Xt<Ie.geometry.geometries.length;Xt++)Ki(ot,{id:yt,geometry:Ie.geometry.geometries[Xt],properties:Ie.properties},Ce,st);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Xt=0;Xt<ft.length;Xt++){var Tn=[];Ir(ft[Xt],Tn,zt,!0),Rt.push(Tn)}}ot.push(li(yt,kt,Rt,Ie.properties))}}function ji(ot,Ie){Ie.push(nr(ot[0])),Ie.push(Ri(ot[1])),Ie.push(0)}function di(ot,Ie,Ce,st){for(var ft,kt,zt=0,Rt=0;Rt<ot.length;Rt++){var yt=nr(ot[Rt][0]),Xt=Ri(ot[Rt][1]);Ie.push(yt),Ie.push(Xt),Ie.push(0),Rt>0&&(zt+=st?(ft*Xt-yt*kt)/2:Math.sqrt(Math.pow(yt-ft,2)+Math.pow(Xt-kt,2))),ft=yt,kt=Xt}var Tn=Ie.length-3;Ie[2]=1,Vr(Ie,0,Tn,Ce),Ie[Tn+2]=1,Ie.size=Math.abs(zt),Ie.start=0,Ie.end=Ie.size}function Ir(ot,Ie,Ce,st){for(var ft=0;ft<ot.length;ft++){var kt=[];di(ot[ft],kt,Ce,st),Ie.push(kt)}}function nr(ot){return ot/360+.5}function Ri(ot){var Ie=Math.sin(ot*Math.PI/180),Ce=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function hr(ot,Ie,Ce,st,ft,kt,zt,Rt){if(st/=Ie,kt>=(Ce/=Ie)&&zt<st)return ot;if(zt<Ce||kt>=st)return null;for(var yt=[],Xt=0;Xt<ot.length;Xt++){var Tn=ot[Xt],Fn=Tn.geometry,zn=Tn.type,rr=ft===0?Tn.minX:Tn.minY,Zi=ft===0?Tn.maxX:Tn.maxY;if(rr>=Ce&&Zi<st)yt.push(Tn);else if(!(Zi<Ce||rr>=st)){var Pe=[];if(zn==="Point"||zn==="MultiPoint")ir(Fn,Pe,Ce,st,ft);else if(zn==="LineString")Ur(Fn,Pe,Ce,st,ft,!1,Rt.lineMetrics);else if(zn==="MultiLineString")pr(Fn,Pe,Ce,st,ft,!1);else if(zn==="Polygon")pr(Fn,Pe,Ce,st,ft,!0);else if(zn==="MultiPolygon")for(var pe=0;pe<Fn.length;pe++){var we=[];pr(Fn[pe],we,Ce,st,ft,!0),we.length&&Pe.push(we)}if(Pe.length){if(Rt.lineMetrics&&zn==="LineString"){for(pe=0;pe<Pe.length;pe++)yt.push(li(Tn.id,zn,Pe[pe],Tn.tags));continue}zn!=="LineString"&&zn!=="MultiLineString"||(Pe.length===1?(zn="LineString",Pe=Pe[0]):zn="MultiLineString"),zn!=="Point"&&zn!=="MultiPoint"||(zn=Pe.length===3?"Point":"MultiPoint"),yt.push(li(Tn.id,zn,Pe,Tn.tags))}}}return yt.length?yt:null}function ir(ot,Ie,Ce,st,ft){for(var kt=0;kt<ot.length;kt+=3){var zt=ot[kt+ft];zt>=Ce&&zt<=st&&(Ie.push(ot[kt]),Ie.push(ot[kt+1]),Ie.push(ot[kt+2]))}}function Ur(ot,Ie,Ce,st,ft,kt,zt){for(var Rt,yt,Xt=jr(ot),Tn=ft===0?Eo:Ao,Fn=ot.start,zn=0;zn<ot.length-3;zn+=3){var rr=ot[zn],Zi=ot[zn+1],Pe=ot[zn+2],pe=ot[zn+3],we=ot[zn+4],je=ft===0?rr:Zi,Ke=ft===0?pe:we,_t=!1;zt&&(Rt=Math.sqrt(Math.pow(rr-pe,2)+Math.pow(Zi-we,2))),je<Ce?Ke>Ce&&(yt=Tn(Xt,rr,Zi,pe,we,Ce),zt&&(Xt.start=Fn+Rt*yt)):je>st?Ke<st&&(yt=Tn(Xt,rr,Zi,pe,we,st),zt&&(Xt.start=Fn+Rt*yt)):Zr(Xt,rr,Zi,Pe),Ke<Ce&&je>=Ce&&(yt=Tn(Xt,rr,Zi,pe,we,Ce),_t=!0),Ke>st&&je<=st&&(yt=Tn(Xt,rr,Zi,pe,we,st),_t=!0),!kt&&_t&&(zt&&(Xt.end=Fn+Rt*yt),Ie.push(Xt),Xt=jr(ot)),zt&&(Fn+=Rt)}var qe=ot.length-3;rr=ot[qe],Zi=ot[qe+1],Pe=ot[qe+2],(je=ft===0?rr:Zi)>=Ce&&je<=st&&Zr(Xt,rr,Zi,Pe),qe=Xt.length-3,kt&&qe>=3&&(Xt[qe]!==Xt[0]||Xt[qe+1]!==Xt[1])&&Zr(Xt,Xt[0],Xt[1],Xt[2]),Xt.length&&Ie.push(Xt)}function jr(ot){var Ie=[];return Ie.size=ot.size,Ie.start=ot.start,Ie.end=ot.end,Ie}function pr(ot,Ie,Ce,st,ft,kt){for(var zt=0;zt<ot.length;zt++)Ur(ot[zt],Ie,Ce,st,ft,kt,!1)}function Zr(ot,Ie,Ce,st){ot.push(Ie),ot.push(Ce),ot.push(st)}function Eo(ot,Ie,Ce,st,ft,kt){var zt=(kt-Ie)/(st-Ie);return ot.push(kt),ot.push(Ce+(ft-Ce)*zt),ot.push(1),zt}function Ao(ot,Ie,Ce,st,ft,kt){var zt=(kt-Ce)/(ft-Ce);return ot.push(Ie+(st-Ie)*zt),ot.push(kt),ot.push(1),zt}function $t(ot,Ie){for(var Ce=[],st=0;st<ot.length;st++){var ft,kt=ot[st],zt=kt.type;if(zt==="Point"||zt==="MultiPoint"||zt==="LineString")ft=en(kt.geometry,Ie);else if(zt==="MultiLineString"||zt==="Polygon"){ft=[];for(var Rt=0;Rt<kt.geometry.length;Rt++)ft.push(en(kt.geometry[Rt],Ie))}else if(zt==="MultiPolygon")for(ft=[],Rt=0;Rt<kt.geometry.length;Rt++){for(var yt=[],Xt=0;Xt<kt.geometry[Rt].length;Xt++)yt.push(en(kt.geometry[Rt][Xt],Ie));ft.push(yt)}Ce.push(li(kt.id,zt,ft,kt.tags))}return Ce}function en(ot,Ie){var Ce=[];Ce.size=ot.size,ot.start!==void 0&&(Ce.start=ot.start,Ce.end=ot.end);for(var st=0;st<ot.length;st+=3)Ce.push(ot[st]+Ie,ot[st+1],ot[st+2]);return Ce}function Fr(ot,Ie){if(ot.transformed)return ot;var Ce,st,ft,kt=1<<ot.z,zt=ot.x,Rt=ot.y;for(Ce=0;Ce<ot.features.length;Ce++){var yt=ot.features[Ce],Xt=yt.geometry,Tn=yt.type;if(yt.geometry=[],Tn===1)for(st=0;st<Xt.length;st+=2)yt.geometry.push(So(Xt[st],Xt[st+1],Ie,kt,zt,Rt));else for(st=0;st<Xt.length;st++){var Fn=[];for(ft=0;ft<Xt[st].length;ft+=2)Fn.push(So(Xt[st][ft],Xt[st][ft+1],Ie,kt,zt,Rt));yt.geometry.push(Fn)}}return ot.transformed=!0,ot}function So(ot,Ie,Ce,st,ft,kt){return[Math.round(Ce*(ot*st-ft)),Math.round(Ce*(Ie*st-kt))]}function er(ot,Ie,Ce,st,ft){for(var kt=Ie===ft.maxZoom?0:ft.tolerance/((1<<Ie)*ft.extent),zt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ce,y:st,z:Ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Rt=0;Rt<ot.length;Rt++){zt.numFeatures++,xi(zt,ot[Rt],kt,ft);var yt=ot[Rt].minX,Xt=ot[Rt].minY,Tn=ot[Rt].maxX,Fn=ot[Rt].maxY;yt<zt.minX&&(zt.minX=yt),Xt<zt.minY&&(zt.minY=Xt),Tn>zt.maxX&&(zt.maxX=Tn),Fn>zt.maxY&&(zt.maxY=Fn)}return zt}function xi(ot,Ie,Ce,st){var ft=Ie.geometry,kt=Ie.type,zt=[];if(kt==="Point"||kt==="MultiPoint")for(var Rt=0;Rt<ft.length;Rt+=3)zt.push(ft[Rt]),zt.push(ft[Rt+1]),ot.numPoints++,ot.numSimplified++;else if(kt==="LineString")Xi(zt,ft,ot,Ce,!1,!1);else if(kt==="MultiLineString"||kt==="Polygon")for(Rt=0;Rt<ft.length;Rt++)Xi(zt,ft[Rt],ot,Ce,kt==="Polygon",Rt===0);else if(kt==="MultiPolygon")for(var yt=0;yt<ft.length;yt++){var Xt=ft[yt];for(Rt=0;Rt<Xt.length;Rt++)Xi(zt,Xt[Rt],ot,Ce,!0,Rt===0)}if(zt.length){var Tn=Ie.tags||null;if(kt==="LineString"&&st.lineMetrics){for(var Fn in Tn={},Ie.tags)Tn[Fn]=Ie.tags[Fn];Tn.mapbox_clip_start=ft.start/ft.size,Tn.mapbox_clip_end=ft.end/ft.size}var zn={geometry:zt,type:kt==="Polygon"||kt==="MultiPolygon"?3:kt==="LineString"||kt==="MultiLineString"?2:1,tags:Tn};Ie.id!==null&&(zn.id=Ie.id),ot.features.push(zn)}}function Xi(ot,Ie,Ce,st,ft,kt){var zt=st*st;if(st>0&&Ie.size<(ft?zt:st))Ce.numPoints+=Ie.length/3;else{for(var Rt=[],yt=0;yt<Ie.length;yt+=3)(st===0||Ie[yt+2]>zt)&&(Ce.numSimplified++,Rt.push(Ie[yt]),Rt.push(Ie[yt+1])),Ce.numPoints++;ft&&function(Xt,Tn){for(var Fn=0,zn=0,rr=Xt.length,Zi=rr-2;zn<rr;Zi=zn,zn+=2)Fn+=(Xt[zn]-Xt[Zi])*(Xt[zn+1]+Xt[Zi+1]);if(Fn>0===Tn)for(zn=0,rr=Xt.length;zn<rr/2;zn+=2){var Pe=Xt[zn],pe=Xt[zn+1];Xt[zn]=Xt[rr-2-zn],Xt[zn+1]=Xt[rr-1-zn],Xt[rr-2-zn]=Pe,Xt[rr-1-zn]=pe}}(Rt,kt),ot.push(Rt)}}function Un(ot,Ie){var Ce=(Ie=this.options=function(ft,kt){for(var zt in kt)ft[zt]=kt[zt];return ft}(Object.create(this.options),Ie)).debug;if(Ce&&console.time("preprocess data"),Ie.maxZoom<0||Ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ie.promoteId&&Ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var st=function(ft,kt){var zt=[];if(ft.type==="FeatureCollection")for(var Rt=0;Rt<ft.features.length;Rt++)Ki(zt,ft.features[Rt],kt,Rt);else Ki(zt,ft.type==="Feature"?ft:{geometry:ft},kt);return zt}(ot,Ie);this.tiles={},this.tileCoords=[],Ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ie.indexMaxZoom,Ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),st=function(ft,kt){var zt=kt.buffer/kt.extent,Rt=ft,yt=hr(ft,1,-1-zt,zt,0,-1,2,kt),Xt=hr(ft,1,1-zt,2+zt,0,-1,2,kt);return(yt||Xt)&&(Rt=hr(ft,1,-zt,1+zt,0,-1,2,kt)||[],yt&&(Rt=$t(yt,1).concat(Rt)),Xt&&(Rt=Rt.concat($t(Xt,-1)))),Rt}(st,Ie),st.length&&this.splitTile(st,0,0,0),Ce&&(st.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Oi(ot,Ie,Ce){return 32*((1<<ot)*Ce+Ie)+ot}function bn(ot,Ie){const Ce=ot.tileID.canonical;if(!this._geoJSONIndex)return Ie(null,null);const st=this._geoJSONIndex.getTile(Ce.z,Ce.x,Ce.y);if(!st)return Ie(null,null);const ft=new class{constructor(zt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=zt.length,this._features=zt}feature(zt){return new class{constructor(Rt){this._feature=Rt,this.extent=s.EXTENT,this.type=Rt.type,this.properties=Rt.tags,"id"in Rt&&!isNaN(Rt.id)&&(this.id=parseInt(Rt.id,10))}loadGeometry(){if(this._feature.type===1){const Rt=[];for(const yt of this._feature.geometry)Rt.push([new s.Point(yt[0],yt[1])]);return Rt}{const Rt=[];for(const yt of this._feature.geometry){const Xt=[];for(const Tn of yt)Xt.push(new s.Point(Tn[0],Tn[1]));Rt.push(Xt)}return Rt}}toGeoJSON(Rt,yt,Xt){return De.call(this,Rt,yt,Xt)}}(this._features[zt])}}(st.features);let kt=Rn(ft);kt.byteOffset===0&&kt.byteLength===kt.buffer.byteLength||(kt=new Uint8Array(kt)),Ie(null,{vectorTile:ft,rawData:kt.buffer})}Un.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Un.prototype.splitTile=function(ot,Ie,Ce,st,ft,kt,zt){for(var Rt=[ot,Ie,Ce,st],yt=this.options,Xt=yt.debug;Rt.length;){st=Rt.pop(),Ce=Rt.pop(),Ie=Rt.pop(),ot=Rt.pop();var Tn=1<<Ie,Fn=Oi(Ie,Ce,st),zn=this.tiles[Fn];if(!zn&&(Xt>1&&console.time("creation"),zn=this.tiles[Fn]=er(ot,Ie,Ce,st,yt),this.tileCoords.push({z:Ie,x:Ce,y:st}),Xt)){Xt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ie,Ce,st,zn.numFeatures,zn.numPoints,zn.numSimplified),console.timeEnd("creation"));var rr="z"+Ie;this.stats[rr]=(this.stats[rr]||0)+1,this.total++}if(zn.source=ot,ft){if(Ie===yt.maxZoom||Ie===ft)continue;var Zi=1<<ft-Ie;if(Ce!==Math.floor(kt/Zi)||st!==Math.floor(zt/Zi))continue}else if(Ie===yt.indexMaxZoom||zn.numPoints<=yt.indexMaxPoints)continue;if(zn.source=null,ot.length!==0){Xt>1&&console.time("clipping");var Pe,pe,we,je,Ke,_t,qe=.5*yt.buffer/yt.extent,Oe=.5-qe,Je=.5+qe,mt=1+qe;Pe=pe=we=je=null,Ke=hr(ot,Tn,Ce-qe,Ce+Je,0,zn.minX,zn.maxX,yt),_t=hr(ot,Tn,Ce+Oe,Ce+mt,0,zn.minX,zn.maxX,yt),ot=null,Ke&&(Pe=hr(Ke,Tn,st-qe,st+Je,1,zn.minY,zn.maxY,yt),pe=hr(Ke,Tn,st+Oe,st+mt,1,zn.minY,zn.maxY,yt),Ke=null),_t&&(we=hr(_t,Tn,st-qe,st+Je,1,zn.minY,zn.maxY,yt),je=hr(_t,Tn,st+Oe,st+mt,1,zn.minY,zn.maxY,yt),_t=null),Xt>1&&console.timeEnd("clipping"),Rt.push(Pe||[],Ie+1,2*Ce,2*st),Rt.push(pe||[],Ie+1,2*Ce,2*st+1),Rt.push(we||[],Ie+1,2*Ce+1,2*st),Rt.push(je||[],Ie+1,2*Ce+1,2*st+1)}}},Un.prototype.getTile=function(ot,Ie,Ce){var st=this.options,ft=st.extent,kt=st.debug;if(ot<0||ot>24)return null;var zt=1<<ot,Rt=Oi(ot,Ie=(Ie%zt+zt)%zt,Ce);if(this.tiles[Rt])return Fr(this.tiles[Rt],ft);kt>1&&console.log("drilling down to z%d-%d-%d",ot,Ie,Ce);for(var yt,Xt=ot,Tn=Ie,Fn=Ce;!yt&&Xt>0;)Xt--,Tn=Math.floor(Tn/2),Fn=Math.floor(Fn/2),yt=this.tiles[Oi(Xt,Tn,Fn)];return yt&&yt.source?(kt>1&&console.log("found parent tile z%d-%d-%d",Xt,Tn,Fn),kt>1&&console.time("drilling down"),this.splitTile(yt.source,Xt,Tn,Fn,ot,Ie,Ce),kt>1&&console.timeEnd("drilling down"),this.tiles[Rt]?Fr(this.tiles[Rt],ft):null):null};class bi extends s.VectorTileWorkerSource{constructor(Ie,Ce,st,ft,kt){super(Ie,Ce,st,ft,bn),kt&&(this.loadGeoJSON=kt)}loadData(Ie,Ce){const st=Ie&&Ie.request,ft=st&&st.collectResourceTiming;this.loadGeoJSON(Ie,(kt,zt)=>{if(kt||!zt)return Ce(kt);if(typeof zt!="object")return Ce(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));{Ae(zt,!0);try{if(Ie.filter){const yt=s.createExpression(Ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(yt.result==="error")throw new Error(yt.value.map(Tn=>`${Tn.key}: ${Tn.message}`).join(", "));zt={type:"FeatureCollection",features:zt.features.filter(Tn=>yt.value.evaluate({zoom:0},Tn))}}this._geoJSONIndex=Ie.cluster?new Bn(function({superclusterOptions:yt,clusterProperties:Xt}){if(!Xt||!yt)return yt;const Tn={},Fn={},zn={accumulated:null,zoom:0},rr={properties:null},Zi=Object.keys(Xt);for(const Pe of Zi){const[pe,we]=Xt[Pe],je=s.createExpression(we),Ke=s.createExpression(typeof pe=="string"?[pe,["accumulated"],["get",Pe]]:pe);Tn[Pe]=je.value,Fn[Pe]=Ke.value}return yt.map=Pe=>{rr.properties=Pe;const pe={};for(const we of Zi)pe[we]=Tn[we].evaluate(zn,rr);return pe},yt.reduce=(Pe,pe)=>{rr.properties=pe;for(const we of Zi)zn.accumulated=Pe[we],Pe[we]=Fn[we].evaluate(zn,rr)},yt}(Ie)).load(zt.features):function(yt,Xt){return new Un(yt,Xt)}(zt,Ie.geojsonVtOptions)}catch(yt){return Ce(yt)}this.loaded={};const Rt={};if(ft){const yt=s.getPerformanceMeasurement(st);yt&&(Rt.resourceTiming={},Rt.resourceTiming[Ie.source]=JSON.parse(JSON.stringify(yt)))}Ce(null,Rt)}})}reloadTile(Ie,Ce){const st=this.loaded;return st&&st[Ie.uid]?super.reloadTile(Ie,Ce):this.loadTile(Ie,Ce)}loadGeoJSON(Ie,Ce){if(Ie.request)s.getJSON(Ie.request,Ce);else{if(typeof Ie.data!="string")return Ce(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));try{return Ce(null,JSON.parse(Ie.data))}catch{return Ce(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Ie,Ce){try{Ce(null,this._geoJSONIndex.getClusterExpansionZoom(Ie.clusterId))}catch(st){Ce(st)}}getClusterChildren(Ie,Ce){try{Ce(null,this._geoJSONIndex.getChildren(Ie.clusterId))}catch(st){Ce(st)}}getClusterLeaves(Ie,Ce){try{Ce(null,this._geoJSONIndex.getLeaves(Ie.clusterId,Ie.limit,Ie.offset))}catch(st){Ce(st)}}}class fi{constructor(Ie){this.self=Ie,this.actor=new s.Actor(Ie,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:bi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ce,st)=>{if(this.workerSourceTypes[Ce])throw new Error(`Worker source with name "${Ce}" already registered.`);this.workerSourceTypes[Ce]=st},this.self.registerRTLTextPlugin=Ce=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=Ce.applyArabicShaping,s.plugin.processBidirectionalText=Ce.processBidirectionalText,s.plugin.processStyledBidirectionalText=Ce.processStyledBidirectionalText}}clearCaches(Ie,Ce,st){delete this.layerIndexes[Ie],delete this.availableImages[Ie],delete this.workerSources[Ie],delete this.demWorkerSources[Ie],st()}checkIfReady(Ie,Ce,st){st()}setReferrer(Ie,Ce){this.referrer=Ce}spriteLoaded(Ie,Ce){this.isSpriteLoaded[Ie]=Ce;for(const st in this.workerSources[Ie]){const ft=this.workerSources[Ie][st];for(const kt in ft)ft[kt]instanceof s.VectorTileWorkerSource&&(ft[kt].isSpriteLoaded=Ce,ft[kt].fire(new s.Event("isSpriteLoaded")))}}setImages(Ie,Ce,st){this.availableImages[Ie]=Ce;for(const ft in this.workerSources[Ie]){const kt=this.workerSources[Ie][ft];for(const zt in kt)kt[zt].availableImages=Ce}st()}enableTerrain(Ie,Ce,st){this.terrain=Ce,st()}setProjection(Ie,Ce){this.projections[Ie]=s.getProjection(Ce)}setLayers(Ie,Ce,st){this.getLayerIndex(Ie).replace(Ce),st()}updateLayers(Ie,Ce,st){this.getLayerIndex(Ie).update(Ce.layers,Ce.removedIds),st()}loadTile(Ie,Ce,st){const ft=this.enableTerrain?s.extend({enableTerrain:this.terrain},Ce):Ce;ft.projection=this.projections[Ie]||this.defaultProjection,this.getWorkerSource(Ie,Ce.type,Ce.source).loadTile(ft,st)}loadDEMTile(Ie,Ce,st){const ft=this.enableTerrain?s.extend({buildQuadTree:this.terrain},Ce):Ce;this.getDEMWorkerSource(Ie,Ce.source).loadTile(ft,st)}reloadTile(Ie,Ce,st){const ft=this.enableTerrain?s.extend({enableTerrain:this.terrain},Ce):Ce;ft.projection=this.projections[Ie]||this.defaultProjection,this.getWorkerSource(Ie,Ce.type,Ce.source).reloadTile(ft,st)}abortTile(Ie,Ce,st){this.getWorkerSource(Ie,Ce.type,Ce.source).abortTile(Ce,st)}removeTile(Ie,Ce,st){this.getWorkerSource(Ie,Ce.type,Ce.source).removeTile(Ce,st)}removeSource(Ie,Ce,st){if(!this.workerSources[Ie]||!this.workerSources[Ie][Ce.type]||!this.workerSources[Ie][Ce.type][Ce.source])return;const ft=this.workerSources[Ie][Ce.type][Ce.source];delete this.workerSources[Ie][Ce.type][Ce.source],ft.removeSource!==void 0?ft.removeSource(Ce,st):st()}loadWorkerSource(Ie,Ce,st){try{this.self.importScripts(Ce.url),st()}catch(ft){st(ft.toString())}}syncRTLPluginState(Ie,Ce,st){try{s.plugin.setState(Ce);const ft=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&ft!=null){this.self.importScripts(ft);const kt=s.plugin.isParsed();st(kt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ft}`),kt)}}catch(ft){st(ft.toString())}}getAvailableImages(Ie){let Ce=this.availableImages[Ie];return Ce||(Ce=[]),Ce}getLayerIndex(Ie){let Ce=this.layerIndexes[Ie];return Ce||(Ce=this.layerIndexes[Ie]=new V),Ce}getWorkerSource(Ie,Ce,st){if(this.workerSources[Ie]||(this.workerSources[Ie]={}),this.workerSources[Ie][Ce]||(this.workerSources[Ie][Ce]={}),!this.workerSources[Ie][Ce][st]){const ft={send:(kt,zt,Rt,yt,Xt,Tn)=>{this.actor.send(kt,zt,Rt,Ie,Xt,Tn)},scheduler:this.actor.scheduler};this.workerSources[Ie][Ce][st]=new this.workerSourceTypes[Ce](ft,this.getLayerIndex(Ie),this.getAvailableImages(Ie),this.isSpriteLoaded[Ie])}return this.workerSources[Ie][Ce][st]}getDEMWorkerSource(Ie,Ce){return this.demWorkerSources[Ie]||(this.demWorkerSources[Ie]={}),this.demWorkerSources[Ie][Ce]||(this.demWorkerSources[Ie][Ce]=new q),this.demWorkerSources[Ie][Ce]}enforceCacheSizeLimit(Ie,Ce){s.enforceCacheSizeLimit(Ce)}getWorkerPerformanceMetrics(Ie,Ce,st){st(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new fi(self)),fi}),v(["./shared"],function(s){function U(b,l){if(Array.isArray(b)){if(!Array.isArray(l)||b.length!==l.length)return!1;for(let g=0;g<b.length;g++)if(!U(b[g],l[g]))return!1;return!0}if(typeof b=="object"&&b!==null&&l!==null){if(typeof l!="object"||Object.keys(b).length!==Object.keys(l).length)return!1;for(const g in b)if(!U(b[g],l[g]))return!1;return!0}return b===l}var $=V;function V(b){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var T,k,R=new Blob([""],{type:"text/javascript"}),K=URL.createObjectURL(R);try{k=new Worker(K),T=!0}catch{T=!1}return k&&k.terminate(),URL.revokeObjectURL(K),T}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var T=document.createElement("canvas");T.width=T.height=1;var k=T.getContext("2d");if(!k)return!1;var R=k.getImageData(0,0,1,1);return R&&R.width===T.width}()?(q[g=l&&l.failIfMajorPerformanceCaveat]===void 0&&(q[g]=function(T){var k,R=function(K){var X=document.createElement("canvas"),ee=Object.create(V.webGLContextAttributes);return ee.failIfMajorPerformanceCaveat=K,X.getContext("webgl",ee)||X.getContext("experimental-webgl",ee)}(T);if(!R)return!1;try{k=R.createShader(R.VERTEX_SHADER)}catch{return!1}return!(!k||R.isContextLost())&&(R.shaderSource(k,"void main() {}"),R.compileShader(k),R.getShaderParameter(k,R.COMPILE_STATUS)===!0)}(g)),q[g]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var g}(b)}var q={};function te(b,l,g){const T=s.window.document.createElement(b);return l!==void 0&&(T.className=l),g&&g.appendChild(T),T}function he(b,l,g){const T=s.window.document.createElementNS("http://www.w3.org/2000/svg",b);for(const k of Object.keys(l))T.setAttributeNS(null,k,l[k]);return g&&g.appendChild(T),T}V.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Ae=s.window.document&&s.window.document.documentElement.style,De=Ae&&Ae.userSelect!==void 0?"userSelect":"WebkitUserSelect";let ke;function xe(){Ae&&De&&(ke=Ae[De],Ae[De]="none")}function Te(){Ae&&De&&(Ae[De]=ke)}function Ee(b){b.preventDefault(),b.stopPropagation(),s.window.removeEventListener("click",Ee,!0)}function Fe(){s.window.addEventListener("click",Ee,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",Ee,!0)},0)}function Se(b,l){const g=b.getBoundingClientRect();return Bt(b,g,l)}function nt(b,l){const g=b.getBoundingClientRect(),T=[];for(let k=0;k<l.length;k++)T.push(Bt(b,g,l[k]));return T}function xt(b){return s.window.InstallTrigger!==void 0&&b.button===2&&b.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:b.button}function Bt(b,l,g){const T=b.offsetWidth===l.width?1:b.offsetWidth/l.width;return new s.Point((g.clientX-l.left)*T,(g.clientY-l.top)*T)}function Xe(b,l){var g=l[0],T=l[1],k=l[2],R=l[3],K=g*R-k*T;return K?(b[0]=R*(K=1/K),b[1]=-T*K,b[2]=-k*K,b[3]=g*K,b):null}function qt(b){const{userImage:l}=b;return!!(l&&l.render&&l.render())&&(b.data.replace(new Uint8Array(l.data.buffer)),!0)}class rn extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:g,callback:T}of this.requestors)this._notify(g,T);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,g){this._validate(l,g)&&(this.images[l]=g)}_validate(l,g){let T=!0;return this._validateStretch(g.stretchX,g.data&&g.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),T=!1),this._validateStretch(g.stretchY,g.data&&g.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),T=!1),this._validateContent(g.content,g)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),T=!1),T}_validateStretch(l,g){if(!l)return!0;let T=0;for(const k of l){if(k[0]<T||k[1]<k[0]||g<k[1])return!1;T=k[1]}return!0}_validateContent(l,g){return!(l&&(l.length!==4||l[0]<0||g.data.width<l[0]||l[1]<0||g.data.height<l[1]||l[2]<0||g.data.width<l[2]||l[3]<0||g.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,g){g.version=this.images[l].version+1,this.images[l]=g,this.updatedImages[l]=!0}removeImage(l){const g=this.images[l];delete this.images[l],delete this.patterns[l],g.userImage&&g.userImage.onRemove&&g.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,g){let T=!0;if(!this.isLoaded())for(const k of l)this.images[k]||(T=!1);this.isLoaded()||T?this._notify(l,g):this.requestors.push({ids:l,callback:g})}_notify(l,g){const T={};for(const k of l){this.images[k]||this.fire(new s.Event("styleimagemissing",{id:k}));const R=this.images[k];R?T[k]={data:R.data.clone(),pixelRatio:R.pixelRatio,sdf:R.sdf,version:R.version,stretchX:R.stretchX,stretchY:R.stretchY,content:R.content,hasRenderCallback:!!(R.userImage&&R.userImage.render)}:s.warnOnce(`Image "${k}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}g(null,T)}getPixelSize(){const{width:l,height:g}=this.atlasImage;return{width:l,height:g}}getPattern(l){const g=this.patterns[l],T=this.getImage(l);if(!T)return null;if(g&&g.position.version===T.version)return g.position;if(g)g.position.version=T.version;else{const k={w:T.data.width+2,h:T.data.height+2,x:0,y:0},R=new s.ImagePosition(k,T);this.patterns[l]={bin:k,position:R}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const g=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(l,this.atlasImage,g.RGBA),this.atlasTexture&&this.atlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const R in this.patterns)l.push(this.patterns[R].bin);const{w:g,h:T}=s.potpack(l),k=this.atlasImage;k.resize({width:g||1,height:T||1});for(const R in this.patterns){const{bin:K}=this.patterns[R],X=K.x+1,ee=K.y+1,ce=this.images[R].data,le=ce.width,ve=ce.height;s.RGBAImage.copy(ce,k,{x:0,y:0},{x:X,y:ee},{width:le,height:ve}),s.RGBAImage.copy(ce,k,{x:0,y:ve-1},{x:X,y:ee-1},{width:le,height:1}),s.RGBAImage.copy(ce,k,{x:0,y:0},{x:X,y:ee+ve},{width:le,height:1}),s.RGBAImage.copy(ce,k,{x:le-1,y:0},{x:X-1,y:ee},{width:1,height:ve}),s.RGBAImage.copy(ce,k,{x:0,y:0},{x:X+le,y:ee},{width:1,height:ve})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const g of l){if(this.callbackDispatchedThisFrame[g])continue;this.callbackDispatchedThisFrame[g]=!0;const T=this.images[g];qt(T)&&this.updateImage(g,T)}}}const Ut=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(b,l){return function([g,T,k]){const R=s.degToRad(T+90),K=s.degToRad(k);return{x:g*Math.cos(R)*Math.sin(K),y:g*Math.sin(R)*Math.sin(K),z:g*Math.cos(K),azimuthal:T,polar:k}}(b.expression.evaluate(l))}interpolate(b,l,g){return{x:s.number(b.x,l.x,g),y:s.number(b.y,l.y,g),z:s.number(b.z,l.z,g),azimuthal:s.number(b.azimuthal,l.azimuthal,g),polar:s.number(b.polar,l.polar,g)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)});class Kt extends s.Evented{constructor(l){super(),this._transitionable=new s.Transitionable(Ut),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,g={}){if(!this._validate(s.validateLight,l,g))for(const T in l){const k=l[T];s.endsWith(T,"-transition")?this._transitionable.setTransition(T.slice(0,-11),k):this._transitionable.setValue(T,k)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,g,T){return(!T||T.validate!==!1)&&s.emitValidationErrors(this,l.call(s.validateStyle,s.extend({value:g,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const On=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)});let Gt=class extends s.Evented{constructor(b,l){super(),this._transitionable=new s.Transitionable(On),this.set(b),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l}get(){return this._transitionable.serialize()}set(b){for(const l in b){const g=b[l];s.endsWith(l,"-transition")?this._transitionable.setTransition(l.slice(0,-11),g):this._transitionable.setValue(l,g)}}updateTransitions(b){this._transitioning=this._transitionable.transitioned(b,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(b){this.properties=this._transitioning.possiblyEvaluate(b)}};function Rn(b,l,g,T){const k=s.smoothstep(45,65,g),[R,K]=mn(b,T),X=s.length(l);let ee=1-Math.min(1,Math.exp((X-R)/(K-R)*-6));return ee*=ee*ee,ee=Math.min(1,1.00747*ee),ee*k*b.alpha}function mn(b,l){const g=.5/Math.tan(.5*l);return[b.range[0]+g,b.range[1]+g]}const Cn=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])});class Qt extends s.Evented{constructor(l,g){super(),this._transitionable=new s.Transitionable(Cn),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=g}get state(){const l=this._transform,g=l.projection.name==="globe",T=s.globeToMercatorTransition(l.zoom),k=this.properties.get("range"),R=[.5,3];return{range:g?[s.number(R[0],k[0],T),s.number(R[1],k[1],T)]:k,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,g={}){if(!this._validate(s.validateFog,l,g)){for(const T of Object.keys(s.spec.fog))l&&l[T]===void 0&&(l[T]=s.spec.fog[T].default);for(const T in l){const k=l[T];s.endsWith(T,"-transition")?this._transitionable.setTransition(T.slice(0,-11),k):this._transitionable.setValue(T,k)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const g=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,l))*g.a}getOpacityAtLatLng(l,g){return this._transform.projection.supportsFog?function(T,k,R){const K=s.MercatorCoordinate.fromLngLat(k),X=R.elevation?R.elevation.getAtPointOrZero(K):0,ee=[K.x,K.y,X];return s.transformMat4(ee,ee,R.mercatorFogMatrix),Rn(T,ee,R.pitch,R._fov)}(this.state,l,g):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?mn(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,g,T){return(!T||T.validate!==!1)&&s.emitValidationErrors(this,l.call(s.validateStyle,s.extend({value:g,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Xn{constructor(l,g){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const T=this.workerPool.acquire(this.id);for(let k=0;k<T.length;k++){const R=new Xn.Actor(T[k],g,this.id);R.name=`Worker ${k}`,this.actors.push(R)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,g,T){s.asyncAll(this.actors,(k,R)=>{k.send(l,g,R)},T=T||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Wn(b,l,g){return l*(s.EXTENT/(b.tileSize*Math.pow(2,g-b.tileID.overscaledZ)))}Xn.Actor=s.Actor;class Bi{constructor(l,g,T,k){this.screenBounds=l,this.cameraPoint=g,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=T,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,k)}static createFromScreenPoints(l,g){let T,k;if(l instanceof s.Point||typeof l[0]=="number"){const R=s.Point.convert(l);T=[R],k=g.isPointAboveHorizon(R)}else{const R=s.Point.convert(l[0]),K=s.Point.convert(l[1]);T=[R,K],k=s.polygonizeBounds(R,K).every(X=>g.isPointAboveHorizon(X))}return new Bi(T,g.getCameraPoint(),k,g)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const g=this.screenBounds[0],T=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],k=s.polygonizeBounds(g,T,0,!1);return this.cameraPoint.y>T.y&&(this.cameraPoint.x>g.x&&this.cameraPoint.x<T.x?k.splice(3,0,this.cameraPoint):this.cameraPoint.x>=T.x?k[2]=this.cameraPoint:this.cameraPoint.x<=g.x&&(k[3]=this.cameraPoint)),s.bufferConvexPolygon(k,l)}bufferedCameraGeometryGlobe(l){const g=this.screenBounds[0],T=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],k=s.polygonizeBounds(g,T,l),R=this.cameraPoint.clone();switch(3*((R.y>g.y)+(R.y>T.y))+((R.x>g.x)+(R.x>T.x))){case 0:k[0]=R,k[4]=R.clone();break;case 1:k.splice(1,0,R);break;case 2:k[1]=R;break;case 3:k.splice(4,0,R);break;case 5:k.splice(2,0,R);break;case 6:k[3]=R;break;case 7:k.splice(3,0,R);break;case 8:k[2]=R}return k}containsTile(l,g,T,k=0){const R=l.queryPadding/g._pixelsPerMercatorPixel+1,K=T?this._bufferedCameraMercator(R,g):this._bufferedScreenMercator(R,g);let X=l.tileID.wrap+(K.unwrapped?k:0);const ee=K.polygon.map(rt=>s.getTilePoint(l.tileTransform,rt,X));if(!s.polygonIntersectsBox(ee,0,0,s.EXTENT,s.EXTENT))return;X=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?k:0);const ce=this.screenGeometryMercator.polygon.map(rt=>s.getTileVec3(l.tileTransform,rt,X)),le=ce.map(rt=>new s.Point(rt[0],rt[1])),ve=g.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),Qe=s.getTileVec3(l.tileTransform,ve,X),We=ce.map(rt=>{const Be=s.sub(rt,rt,Qe);return s.normalize(Be,Be),new s.Ray(Qe,Be)}),et=Wn(l,1,g.zoom)*g._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:le,tilespaceRays:We,bufferedTilespaceGeometry:ee,bufferedTilespaceBounds:(tt=s.getBounds(ee),tt.min.x=s.clamp(tt.min.x,0,s.EXTENT),tt.min.y=s.clamp(tt.min.y,0,s.EXTENT),tt.max.x=s.clamp(tt.max.x,0,s.EXTENT),tt.max.y=s.clamp(tt.max.y,0,s.EXTENT),tt),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:et};var tt}_bufferedScreenMercator(l,g){const T=ei(l);if(this._screenRaycastCache[T])return this._screenRaycastCache[T];{let k;return k=g.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),g):{polygon:this.bufferedScreenGeometry(l).map(R=>g.pointCoordinate3D(R)),unwrapped:!0},this._screenRaycastCache[T]=k,k}}_bufferedCameraMercator(l,g){const T=ei(l);if(this._cameraRaycastCache[T])return this._cameraRaycastCache[T];{let k;return k=g.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),g):{polygon:this.bufferedCameraGeometry(l).map(R=>g.pointCoordinate3D(R)),unwrapped:!0},this._cameraRaycastCache[T]=k,k}}_projectAndResample(l,g){const T=function(R,K){const X=s.multiply([],K.pixelMatrix,K.globeMatrix),ee=[0,-s.GLOBE_RADIUS,0,1],ce=[0,s.GLOBE_RADIUS,0,1],le=[0,0,0,1];s.transformMat4$1(ee,ee,X),s.transformMat4$1(ce,ce,X),s.transformMat4$1(le,le,X);const ve=new s.Point(ee[0]/ee[3],ee[1]/ee[3]),Qe=new s.Point(ce[0]/ce[3],ce[1]/ce[3]),We=s.polygonContainsPoint(R,ve)&&ee[3]<le[3],et=s.polygonContainsPoint(R,Qe)&&ce[3]<le[3];if(!We&&!et)return null;const tt=function(Mt,Ht,Nt){for(let cn=1;cn<Mt.length;cn++){const Nn=Hn(Ht.pointCoordinate3D(Mt[cn-1]).x),Vt=Hn(Ht.pointCoordinate3D(Mt[cn]).x);if(Nt<0){if(Nn<Vt)return{idx:cn,t:-Nn/(Vt-1-Nn)}}else if(Vt<Nn)return{idx:cn,t:(1-Nn)/(Vt+1-Nn)}}return null}(R,K,We?-1:1);if(!tt)return null;const{idx:rt,t:Be}=tt;let Ye=rt>1?Bn(R.slice(0,rt),K):[],lt=rt<R.length?Bn(R.slice(rt),K):[];Ye=Ye.map(Mt=>new s.Point(Hn(Mt.x),Mt.y)),lt=lt.map(Mt=>new s.Point(Hn(Mt.x),Mt.y));const At=[...Ye];At.length===0&&At.push(lt[lt.length-1]);const It=s.number(At[At.length-1].y,(lt.length===0?Ye[0]:lt[0]).y,Be);let Tt;return Tt=We?[new s.Point(0,It),new s.Point(0,0),new s.Point(1,0),new s.Point(1,It)]:[new s.Point(1,It),new s.Point(1,1),new s.Point(0,1),new s.Point(0,It)],At.push(...Tt),lt.length===0?At.push(Ye[0]):At.push(...lt),{polygon:At.map(Mt=>new s.MercatorCoordinate(Mt.x,Mt.y)),unwrapped:!1}}(l,g);if(T)return T;const k=function(R,K){let X=!1,ee=-1/0,ce=0;for(let ve=0;ve<R.length-1;ve++)R[ve].x>ee&&(ee=R[ve].x,ce=ve);for(let ve=0;ve<R.length-1;ve++){const Qe=(ce+ve)%(R.length-1),We=R[Qe],et=R[Qe+1];Math.abs(We.x-et.x)>.5&&(We.x<et.x?(We.x+=1,Qe===0&&(R[R.length-1].x+=1)):(et.x+=1,Qe+1===R.length-1&&(R[0].x+=1)),X=!0)}const le=s.mercatorXfromLng(K.center.lng);return X&&le<Math.abs(le-1)&&R.forEach(ve=>{ve.x-=1}),{polygon:R,unwrapped:X}}(Bn(l,g).map(R=>new s.Point(Hn(R.x),R.y)),g);return{polygon:k.polygon.map(R=>new s.MercatorCoordinate(R.x,R.y)),unwrapped:k.unwrapped}}}function Bn(b,l){return s.resample(b,g=>{const T=l.pointCoordinate3D(g);g.x=T.x,g.y=T.y},1/256)}function Hn(b){return b<0?1+b%1:b%1}function ei(b){return 100*b|0}function tr(b,l,g,T,k){const R=function(K,X){if(K)return k(K);if(X){b.url&&X.tiles&&b.tiles&&delete b.tiles;const ee=s.pick(s.extend(X,b),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);X.vector_layers&&(ee.vectorLayers=X.vector_layers,ee.vectorLayerIds=ee.vectorLayers.map(ce=>ce.id)),ee.tiles=l.canonicalizeTileset(ee,b.url),k(null,ee)}};return b.url?s.getJSON(l.transformRequest(l.normalizeSourceURL(b.url,null,g,T),s.ResourceType.Source),R):s.exported.frame(()=>R(null,b))}class ri{constructor(l,g,T){this.bounds=s.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=g||0,this.maxzoom=T||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const g=Math.pow(2,l.z),T=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*g),k=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*g),R=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*g),K=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*g);return l.x>=T&&l.x<R&&l.y>=k&&l.y<K}}class zi{constructor(l,g,T){this.context=l;const k=l.gl;this.buffer=k.createBuffer(),this.dynamicDraw=!!T,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),k.bufferData(k.ELEMENT_ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||g.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const g=this.context.gl;this.context.unbindVAO(),this.bind(),g.bufferSubData(g.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Vr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class sr{constructor(l,g,T,k){this.length=g.length,this.attributes=T,this.itemSize=g.bytesPerElement,this.dynamicDraw=k,this.context=l;const R=l.gl;this.buffer=R.createBuffer(),l.bindVertexBuffer.set(this.buffer),R.bufferData(R.ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||g.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const g=this.context.gl;this.bind(),g.bufferSubData(g.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,g){for(let T=0;T<this.attributes.length;T++){const k=g.attributes[this.attributes[T].name];k!==void 0&&l.enableVertexAttribArray(k)}}setVertexAttribPointers(l,g,T){for(let k=0;k<this.attributes.length;k++){const R=this.attributes[k],K=g.attributes[R.name];K!==void 0&&l.vertexAttribPointer(K,R.components,l[Vr[R.type]],!1,this.itemSize,R.offset+this.itemSize*(T||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class li{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Qi extends li{getDefault(){return s.Color.transparent}set(l){const g=this.current;(l.r!==g.r||l.g!==g.g||l.b!==g.b||l.a!==g.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Ki extends li{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class ji extends li{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class di extends li{getDefault(){return[!0,!0,!0,!0]}set(l){const g=this.current;(l[0]!==g[0]||l[1]!==g[1]||l[2]!==g[2]||l[3]!==g[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Ir extends li{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class nr extends li{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Ri extends li{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const g=this.current;(l.func!==g.func||l.ref!==g.ref||l.mask!==g.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class hr extends li{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const g=this.current;(l[0]!==g[0]||l[1]!==g[1]||l[2]!==g[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class ir extends li{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const g=this.gl;l?g.enable(g.STENCIL_TEST):g.disable(g.STENCIL_TEST),this.current=l,this.dirty=!1}}class Ur extends li{getDefault(){return[0,1]}set(l){const g=this.current;(l[0]!==g[0]||l[1]!==g[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class jr extends li{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const g=this.gl;l?g.enable(g.DEPTH_TEST):g.disable(g.DEPTH_TEST),this.current=l,this.dirty=!1}}class pr extends li{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Zr extends li{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const g=this.gl;l?g.enable(g.BLEND):g.disable(g.BLEND),this.current=l,this.dirty=!1}}class Eo extends li{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const g=this.current;(l[0]!==g[0]||l[1]!==g[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Ao extends li{getDefault(){return s.Color.transparent}set(l){const g=this.current;(l.r!==g.r||l.g!==g.g||l.b!==g.b||l.a!==g.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class $t extends li{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class en extends li{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const g=this.gl;l?g.enable(g.CULL_FACE):g.disable(g.CULL_FACE),this.current=l,this.dirty=!1}}class Fr extends li{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class So extends li{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let er,xi=class extends li{getDefault(){return null}set(b){(b!==this.current||this.dirty)&&(this.gl.useProgram(b),this.current=b,this.dirty=!1)}};class Xi extends li{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Un extends li{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const g=this.current;(l[0]!==g[0]||l[1]!==g[1]||l[2]!==g[2]||l[3]!==g[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Oi extends li{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const g=this.gl;g.bindFramebuffer(g.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class bn extends li{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const g=this.gl;g.bindRenderbuffer(g.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class bi extends li{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const g=this.gl;g.bindTexture(g.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class fi extends li{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const g=this.gl;g.bindBuffer(g.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class ot extends li{getDefault(){return null}set(l){const g=this.gl;g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Ie extends li{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class Ce extends li{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class st extends li{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class ft extends li{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class kt extends li{constructor(l,g){super(l),this.context=l,this.parent=g}getDefault(){return null}}class zt extends kt{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Rt extends kt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferRenderbuffer(g.FRAMEBUFFER,this.attachment(),g.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class yt extends Rt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Xt{constructor(l,g,T,k){this.context=l,this.width=g,this.height=T;const R=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new zt(l,R),k&&(this.depthAttachment=new Rt(l,R))}destroy(){const l=this.context.gl,g=this.colorAttachment.get();if(g&&l.deleteTexture(g),this.depthAttachment){const T=this.depthAttachment.get();T&&l.deleteRenderbuffer(T)}l.deleteFramebuffer(this.framebuffer)}}class Tn{constructor(l,g=!1){if(this.gl=l,this.isWebGL2=g,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),g){const T=l;this.extVertexArrayObject={createVertexArrayOES:T.createVertexArray.bind(l),deleteVertexArrayOES:T.deleteVertexArray.bind(l),bindVertexArrayOES:T.bindVertexArray.bind(l)}}this.clearColor=new Qi(this),this.clearDepth=new Ki(this),this.clearStencil=new ji(this),this.colorMask=new di(this),this.depthMask=new Ir(this),this.stencilMask=new nr(this),this.stencilFunc=new Ri(this),this.stencilOp=new hr(this),this.stencilTest=new ir(this),this.depthRange=new Ur(this),this.depthTest=new jr(this),this.depthFunc=new pr(this),this.blend=new Zr(this),this.blendFunc=new Eo(this),this.blendColor=new Ao(this),this.blendEquation=new $t(this),this.cullFace=new en(this),this.cullFaceSide=new Fr(this),this.frontFace=new So(this),this.program=new xi(this),this.activeTexture=new Xi(this),this.viewport=new Un(this),this.bindFramebuffer=new Oi(this),this.bindRenderbuffer=new bn(this),this.bindTexture=new bi(this),this.bindVertexBuffer=new fi(this),this.bindElementBuffer=new ot(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ie(this),this.pixelStoreUnpack=new Ce(this),this.pixelStoreUnpackPremultiplyAlpha=new st(this),this.pixelStoreUnpackFlipY=new ft(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),g||(this.extTextureHalfFloat=l.getExtension("OES_texture_half_float")),(g||this.extTextureHalfFloat&&l.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=g||l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,g){return new zi(this,l,g)}createVertexBuffer(l,g,T){return new sr(this,l,g,T)}createRenderbuffer(l,g,T){const k=this.gl,R=k.createRenderbuffer();return this.bindRenderbuffer.set(R),k.renderbufferStorage(k.RENDERBUFFER,l,g,T),this.bindRenderbuffer.set(null),R}createFramebuffer(l,g,T){return new Xt(this,l,g,T)}clear({color:l,depth:g,stencil:T}){const k=this.gl;let R=0;l&&(R|=k.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),g!==void 0&&(R|=k.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),T!==void 0&&(R|=k.STENCIL_BUFFER_BIT,this.clearStencil.set(T),this.stencilMask.set(255)),k.clear(R)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){U(l.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Fn extends s.Evented{constructor(l,g,T,k){if(super(),this.id=l,this.dispatcher=T,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(g,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},g),this._collectResourceTiming=g.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(k),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(l){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const g=Array.isArray(this.map._language)?this.map._language.join():this.map._language,T=this.map._worldview;this._tileJSONRequest=tr(this._options,this.map._requestManager,g,T,(k,R)=>{this._tileJSONRequest=null,this._loaded=!0,k?(g&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${g}`),T&&T.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${T}`),this.fire(new s.ErrorEvent(k))):R&&(s.extend(this,R),R.bounds&&(this.tileBounds=new ri(R.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(R.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(k)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(l,g){const T=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),k={request:this.map._requestManager.transformRequest(T,s.ResourceType.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile};if(k.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=g:l.request=l.actor.send("reloadTile",k,R.bind(this));else if(l.actor=this._tileWorkers[T]=this._tileWorkers[T]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",k,R.bind(this),void 0,!0);else{const K=s.loadVectorTile.call({deduped:this._deduped},k,(X,ee)=>{X||!ee?R.call(this,X):(k.data={cacheControl:ee.cacheControl,expires:ee.expires,rawData:ee.rawData.slice(0)},l.actor&&l.actor.send("loadTile",k,R.bind(this),void 0,!0))},!0);l.request={cancel:K}}function R(K,X){return delete l.request,l.aborted?g(null):K&&K.status!==404?g(K):(X&&X.resourceTiming&&(l.resourceTiming=X.resourceTiming),this.map._refreshExpiredTiles&&X&&l.setExpiryData(X),l.loadVectorData(X,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),g(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id})}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class zn extends s.Evented{constructor(l,g,T,k){super(),this.id=l,this.dispatcher=T,this.setEventedParent(k),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},g),s.extend(this,s.pick(g,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=tr(this._options,this.map._requestManager,null,null,(g,T)=>{this._tileJSONRequest=null,this._loaded=!0,g?this.fire(new s.ErrorEvent(g)):T&&(s.extend(this,T),T.bounds&&(this.tileBounds=new ri(T.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(T.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(g)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,g){const T=s.exported.devicePixelRatio>=2,k=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),T,this.tileSize);l.request=s.getImage(this.map._requestManager.transformRequest(k,s.ResourceType.Tile),(R,K,X,ee)=>(delete l.request,l.aborted?(l.state="unloaded",g(null)):R?(l.state="errored",g(R)):K?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:X,expires:ee}),l.setTexture(K,this.map.painter),l.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void g(null)):g(null)))}static loadTileData(l,g,T){l.setTexture(g,T)}static unloadTileData(l,g){l.texture&&g.saveTileTexture(l.texture)}abortTile(l,g){l.request&&(l.request.cancel(),delete l.request),g()}unloadTile(l,g){l.texture&&this.map.painter.saveTileTexture(l.texture),g()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function rr(b,l,g,T,k,R,K,X){const ee=[b,g,k,l,T,R,1,1,1],ce=[K,X,1],le=s.adjoint([],ee),[ve,Qe,We]=s.transformMat3(ce,ce,s.transpose(le,le));return s.multiply$1(ee,[ve,0,0,0,Qe,0,0,0,We],ee)}class Zi extends s.Evented{constructor(l,g,T,k){super(),this.id=l,this.dispatcher=T,this.coordinates=g.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(k),this.options=g,this._dirty=!1}load(l,g){this._loaded=g||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(T,k)=>{if(this._imageRequest=null,this._loaded=!0,T)this.fire(new s.ErrorEvent(T));else if(k){const{HTMLImageElement:R}=s.window;this.image=k instanceof R?s.exported.getImageData(k):k,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this._imageRequest&&l.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const g=l.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(T){let k=1/0,R=1/0,K=-1/0,X=-1/0;for(const ve of T)k=Math.min(k,ve.x),R=Math.min(R,ve.y),K=Math.max(K,ve.x),X=Math.max(X,ve.y);const ee=Math.max(K-k,X-R),ce=Math.max(0,Math.floor(-Math.log(ee)/Math.LN2)),le=Math.pow(2,ce);return new s.CanonicalTileID(ce,Math.floor((k+K)/2*le),Math.floor((R+X)/2*le))}(g),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const ee in this.tiles){const ce=this.tiles[ee];ce.state!=="loaded"&&(ce.state="loaded",ce.texture=this.texture)}if(this._boundsArray)return;const g=s.tileTransform(this.tileID,this.map.transform.projection),[T,k,R,K]=this.coordinates.map(ee=>{const ce=g.projection.project(ee[0],ee[1]);return s.getTilePoint(g,ce)._round()});this.perspectiveTransform=function(ee,ce,le,ve,Qe,We,et,tt,rt,Be){const Ye=rr(0,0,ee,0,0,ce,ee,ce),lt=rr(le,ve,Qe,We,et,tt,rt,Be);return s.multiply$1(lt,s.adjoint(Ye,Ye),lt),[lt[6]/lt[8]*ee/s.EXTENT,lt[7]/lt[8]*ce/s.EXTENT]}(this.width,this.height,T.x,T.y,k.x,k.y,K.x,K.y,R.x,R.y);const X=this._boundsArray=new s.StructArrayLayout4i8;X.emplaceBack(T.x,T.y,0,0),X.emplaceBack(k.x,k.y,s.EXTENT,0),X.emplaceBack(K.x,K.y,0,s.EXTENT),X.emplaceBack(R.x,R.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(X,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,g=l.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(l,this.image,g.RGBA),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(l)}loadTile(l,g){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},g(null)):(l.state="errored",g(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Pe={vector:Fn,raster:zn,"raster-dem":class extends zn{constructor(b,l,g,T){super(b,l,g,T),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(b,l){const g=this.map._requestManager.normalizeTileURL(b.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function T(k,R){k&&(b.state="errored",l(k)),R&&(b.dem=R,b.dem.onDeserialize(),b.needsHillshadePrepare=!0,b.needsDEMTextureUpload=!0,b.state="loaded",l(null))}b.request=s.getImage(this.map._requestManager.transformRequest(g,s.ResourceType.Tile),(function(k,R,K,X){if(delete b.request,b.aborted)b.state="unloaded",l(null);else if(k)b.state="errored",l(k);else if(R){this.map._refreshExpiredTiles&&b.setExpiryData({cacheControl:K,expires:X});const ee=s.window.ImageBitmap&&R instanceof s.window.ImageBitmap&&(er==null&&(er=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),er),ce=1-(R.width-s.prevPowerOfTwo(R.width))/2;ce<1||b.neighboringTiles||(b.neighboringTiles=this._getNeighboringTiles(b.tileID));const le=ee?R:s.exported.getImageData(R,ce),ve={uid:b.uid,coord:b.tileID,source:this.id,rawImageData:le,encoding:this.encoding,padding:ce};b.actor&&b.state!=="expired"||(b.actor=this.dispatcher.getActor(),b.actor.send("loadDEMTile",ve,T.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(b){const l=b.canonical,g=Math.pow(2,l.z),T=(l.x-1+g)%g,k=l.x===0?b.wrap-1:b.wrap,R=(l.x+1+g)%g,K=l.x+1===g?b.wrap+1:b.wrap,X={};return X[new s.OverscaledTileID(b.overscaledZ,k,l.z,T,l.y).key]={backfilled:!1},X[new s.OverscaledTileID(b.overscaledZ,K,l.z,R,l.y).key]={backfilled:!1},l.y>0&&(X[new s.OverscaledTileID(b.overscaledZ,k,l.z,T,l.y-1).key]={backfilled:!1},X[new s.OverscaledTileID(b.overscaledZ,b.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},X[new s.OverscaledTileID(b.overscaledZ,K,l.z,R,l.y-1).key]={backfilled:!1}),l.y+1<g&&(X[new s.OverscaledTileID(b.overscaledZ,k,l.z,T,l.y+1).key]={backfilled:!1},X[new s.OverscaledTileID(b.overscaledZ,b.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},X[new s.OverscaledTileID(b.overscaledZ,K,l.z,R,l.y+1).key]={backfilled:!1}),X}unloadTile(b){b.demTexture&&this.map.painter.saveTileTexture(b.demTexture),b.fbo&&(b.fbo.destroy(),delete b.fbo),b.dem&&delete b.dem,delete b.neighboringTiles,b.state="unloaded"}},geojson:class extends s.Evented{constructor(b,l,g,T){super(),this.id=b,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=g.getActor(),this.setEventedParent(T),this._data=l.data,this._options=s.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const k=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*k,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*k,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:s.EXTENT,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*k,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(b){this.map=b,this.setData(this._data)}setData(b){return this._data=b,this._updateWorkerData(),this}getClusterExpansionZoom(b,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:b,source:this.id},l),this}getClusterChildren(b,l){return this.actor.send("geojson.getClusterChildren",{clusterId:b,source:this.id},l),this}getClusterLeaves(b,l,g,T){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:b,limit:l,offset:g},T),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const b=s.extend({},this.workerOptions),l=this._data;typeof l=="string"?(b.request=this.map._requestManager.transformRequest(s.exported.resolveURL(l),s.ResourceType.Source),b.request.collectResourceTiming=this._collectResourceTiming):b.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,b,(g,T)=>{if(this._loaded=!0,this._pendingLoad=null,g)this.fire(new s.ErrorEvent(g));else{const k={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&T&&T.resourceTiming&&T.resourceTiming[this.id]&&(k.resourceTiming=T.resourceTiming[this.id]),this.fire(new s.Event("data",k)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(b,l){const g=b.actor?"reloadTile":"loadTile";b.actor=this.actor,b.request=this.actor.send(g,{type:this.type,uid:b.uid,tileID:b.tileID,tileZoom:b.tileZoom,zoom:b.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(T,k)=>(delete b.request,b.unloadVectorData(),b.aborted?l(null):T?l(T):(b.loadVectorData(k,this.map.painter,g==="reloadTile"),l(null))),void 0,g==="loadTile")}abortTile(b){b.request&&(b.request.cancel(),delete b.request),b.aborted=!0}unloadTile(b){b.unloadVectorData(),this.actor.send("removeTile",{uid:b.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Zi{constructor(b,l,g,T){super(b,l,g,T),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const b=this.options;this.urls=[];for(const l of b.urls)this.urls.push(this.map._requestManager.transformRequest(l,s.ResourceType.Source).url);s.getVideo(this.urls,(l,g)=>{this._loaded=!0,l?this.fire(new s.ErrorEvent(l)):g&&(this.video=g,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(b){if(this.video){const l=this.video.seekable;b<l.start(0)||b>l.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=b}}getVideo(){return this.video}onAdd(b){this.map||(this.map=b,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const b=this.map.painter.context,l=b.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(b,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(b)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Zi,canvas:class extends Zi{constructor(b,l,g,T){super(b,l,g,T),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(k=>!Array.isArray(k)||k.length!==2||k.some(R=>typeof R!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${b}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${b}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${b}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${b}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${b}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(b){this.map=b,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let b=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,b=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,b=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?(b||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const b of[this.canvas.width,this.canvas.height])if(isNaN(b)||b<=0)return!0;return!1}},custom:class extends s.Evented{constructor(b,l,g,T){super(),this.id=b,this.type="custom",this._dataType="raster",this._dispatcher=g,this._implementation=l,this.setEventedParent(T),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new ri(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(b){this._map=b,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(b),this.load()}onRemove(b){this._implementation.onRemove&&this._implementation.onRemove(b)}hasTile(b){if(this._implementation.hasTile){const{x:l,y:g,z:T}=b.canonical;return this._implementation.hasTile({x:l,y:g,z:T})}return!this.tileBounds||this.tileBounds.contains(b.canonical)}loadTile(b,l){const{x:g,y:T,z:k}=b.tileID.canonical,R=new s.window.AbortController;b.request=Promise.resolve(this._implementation.loadTile({x:g,y:T,z:k},{signal:R.signal})).then((function(K){return delete b.request,b.aborted?(b.state="unloaded",l(null)):K===void 0?(b.state="errored",l(null)):K===null?(this.loadTileData(b,{width:this.tileSize,height:this.tileSize,data:null}),b.state="loaded",l(null)):function(X){return X instanceof s.window.ImageData||X instanceof s.window.HTMLCanvasElement||X instanceof s.window.ImageBitmap||X instanceof s.window.HTMLImageElement}(K)?(this.loadTileData(b,K),b.state="loaded",void l(null)):(b.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(K=>{K.code!==20&&(b.state="errored",l(K))}),b.request.cancel=()=>R.abort()}loadTileData(b,l){zn.loadTileData(b,l,this._map.painter)}unloadTileData(b){zn.unloadTileData(b,this._map.painter)}unloadTile(b,l){if(this.unloadTileData(b),this._implementation.unloadTile){const{x:g,y:T,z:k}=b.tileID.canonical;this._implementation.unloadTile({x:g,y:T,z:k})}l()}abortTile(b,l){b.request&&b.request.cancel&&(b.request.cancel(),delete b.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(b=>({x:b.canonical.x,y:b.canonical.y,z:b.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},pe=function(b,l,g,T){const k=new Pe[l.type](b,l,g,T);if(k.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${k.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],k),k};function we(b,l){const g=s.identity([]);return s.scale(g,g,[.5*b.width,.5*-b.height,1]),s.translate(g,g,[1,-1,0]),s.multiply(g,g,b.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(g)}function je(b,l,g,T,k,R,K,X=!1){const ee=b.tilesIn(T,K,X);ee.sort(_t);const ce=[];for(const ve of ee)ce.push({wrappedTileID:ve.tile.tileID.wrapped().key,queryResults:ve.tile.queryRenderedFeatures(l,g,b._state,ve,k,R,we(b.transform,ve.tile.tileID),X)});const le=function(ve){const Qe={},We={};for(const et of ve){const tt=et.queryResults,rt=et.wrappedTileID,Be=We[rt]=We[rt]||{};for(const Ye in tt){const lt=tt[Ye],At=Be[Ye]=Be[Ye]||{},It=Qe[Ye]=Qe[Ye]||[];for(const Tt of lt)At[Tt.featureIndex]||(At[Tt.featureIndex]=!0,It.push(Tt))}}return Qe}(ce);for(const ve in le)le[ve].forEach(Qe=>{const We=Qe.feature,et=We.layer;et&&et.type!=="background"&&et.type!=="sky"&&(We.source=et.source,et["source-layer"]&&(We.sourceLayer=et["source-layer"]),We.state=We.id!==void 0?b.getFeatureState(et["source-layer"],We.id):{})});return le}function Ke(b,l){const g=b.getRenderableIds().map(R=>b.getTileByID(R)),T=[],k={};for(let R=0;R<g.length;R++){const K=g[R],X=K.tileID.canonical.key;k[X]||(k[X]=!0,K.querySourceFeatures(T,l))}return T}function _t(b,l){const g=b.tileID,T=l.tileID;return g.overscaledZ-T.overscaledZ||g.canonical.y-T.canonical.y||g.wrap-T.wrap||g.canonical.x-T.canonical.x}function qe(){return nu.workerClass!=null?new nu.workerClass:new s.window.Worker(nu.workerUrl)}const Oe="mapboxgl_preloaded_worker_pool";class Je{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Je.workerCount;)this.workers.push(new qe);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(g=>{g.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Oe]}numActive(){return Object.keys(this.active).length}}let mt;function Jt(){return mt||(mt=new Je),mt}function Sn(b,l){const g={};for(const T in b)T!=="ref"&&(g[T]=b[T]);return s.refProperties.forEach(T=>{T in l&&(g[T]=l[T])}),g}function an(b){b=b.slice();const l=Object.create(null);for(let g=0;g<b.length;g++)l[b[g].id]=b[g];for(let g=0;g<b.length;g++)"ref"in b[g]&&(b[g]=Sn(b[g],l[b[g].ref]));return b}Je.workerCount=2;const gn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function mi(b,l,g){g.push({command:gn.addSource,args:[b,l[b]]})}function yi(b,l,g){l.push({command:gn.removeSource,args:[b]}),g[b]=!0}function cr(b,l,g,T){yi(b,g,T),mi(b,l,g)}function xr(b,l,g){let T;for(T in b[g])if(b[g].hasOwnProperty(T)&&T!=="data"&&!U(b[g][T],l[g][T]))return!1;for(T in l[g])if(l[g].hasOwnProperty(T)&&T!=="data"&&!U(b[g][T],l[g][T]))return!1;return!0}function Gr(b,l,g,T,k,R){let K;for(K in l=l||{},b=b||{})b.hasOwnProperty(K)&&(U(b[K],l[K])||g.push({command:R,args:[T,K,l[K],k]}));for(K in l)l.hasOwnProperty(K)&&!b.hasOwnProperty(K)&&(U(b[K],l[K])||g.push({command:R,args:[T,K,l[K],k]}))}function mr(b){return b.id}function Hr(b,l){return b[l.id]=l,b}class fo{constructor(l,g){this.reset(l,g)}reset(l,g){this.points=l||[],this._distances=[0];for(let T=1;T<this.points.length;T++)this._distances[T]=this._distances[T-1]+this.points[T].dist(this.points[T-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(g||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=s.clamp(l,0,1);let g=1,T=this._distances[g];const k=l*this.paddedLength+this.padding;for(;T<k&&g<this._distances.length;)T=this._distances[++g];const R=g-1,K=this._distances[R],X=T-K,ee=X>0?(k-K)/X:0;return this.points[R].mult(1-ee).add(this.points[g].mult(ee))}}class xo{constructor(l,g,T){const k=this.boxCells=[],R=this.circleCells=[];this.xCellCount=Math.ceil(l/T),this.yCellCount=Math.ceil(g/T);for(let K=0;K<this.xCellCount*this.yCellCount;K++)k.push([]),R.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=g,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/g,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,g,T,k,R){this._forEachCell(g,T,k,R,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(g),this.bboxes.push(T),this.bboxes.push(k),this.bboxes.push(R)}insertCircle(l,g,T,k){this._forEachCell(g-k,T-k,g+k,T+k,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(g),this.circles.push(T),this.circles.push(k)}_insertBoxCell(l,g,T,k,R,K){this.boxCells[R].push(K)}_insertCircleCell(l,g,T,k,R,K){this.circleCells[R].push(K)}_query(l,g,T,k,R,K){if(T<0||l>this.width||k<0||g>this.height)return!R&&[];const X=[];if(l<=0&&g<=0&&this.width<=T&&this.height<=k){if(R)return!0;for(let ee=0;ee<this.boxKeys.length;ee++)X.push({key:this.boxKeys[ee],x1:this.bboxes[4*ee],y1:this.bboxes[4*ee+1],x2:this.bboxes[4*ee+2],y2:this.bboxes[4*ee+3]});for(let ee=0;ee<this.circleKeys.length;ee++){const ce=this.circles[3*ee],le=this.circles[3*ee+1],ve=this.circles[3*ee+2];X.push({key:this.circleKeys[ee],x1:ce-ve,y1:le-ve,x2:ce+ve,y2:le+ve})}return K?X.filter(K):X}return this._forEachCell(l,g,T,k,this._queryCell,X,{hitTest:R,seenUids:{box:{},circle:{}}},K),R?X.length>0:X}_queryCircle(l,g,T,k,R){const K=l-T,X=l+T,ee=g-T,ce=g+T;if(X<0||K>this.width||ce<0||ee>this.height)return!k&&[];const le=[];return this._forEachCell(K,ee,X,ce,this._queryCellCircle,le,{hitTest:k,circle:{x:l,y:g,radius:T},seenUids:{box:{},circle:{}}},R),k?le.length>0:le}query(l,g,T,k,R){return this._query(l,g,T,k,!1,R)}hitTest(l,g,T,k,R){return this._query(l,g,T,k,!0,R)}hitTestCircle(l,g,T,k){return this._queryCircle(l,g,T,!0,k)}_queryCell(l,g,T,k,R,K,X,ee){const ce=X.seenUids,le=this.boxCells[R];if(le!==null){const Qe=this.bboxes;for(const We of le)if(!ce.box[We]){ce.box[We]=!0;const et=4*We;if(l<=Qe[et+2]&&g<=Qe[et+3]&&T>=Qe[et+0]&&k>=Qe[et+1]&&(!ee||ee(this.boxKeys[We]))){if(X.hitTest)return K.push(!0),!0;K.push({key:this.boxKeys[We],x1:Qe[et],y1:Qe[et+1],x2:Qe[et+2],y2:Qe[et+3]})}}}const ve=this.circleCells[R];if(ve!==null){const Qe=this.circles;for(const We of ve)if(!ce.circle[We]){ce.circle[We]=!0;const et=3*We;if(this._circleAndRectCollide(Qe[et],Qe[et+1],Qe[et+2],l,g,T,k)&&(!ee||ee(this.circleKeys[We]))){if(X.hitTest)return K.push(!0),!0;{const tt=Qe[et],rt=Qe[et+1],Be=Qe[et+2];K.push({key:this.circleKeys[We],x1:tt-Be,y1:rt-Be,x2:tt+Be,y2:rt+Be})}}}}}_queryCellCircle(l,g,T,k,R,K,X,ee){const ce=X.circle,le=X.seenUids,ve=this.boxCells[R];if(ve!==null){const We=this.bboxes;for(const et of ve)if(!le.box[et]){le.box[et]=!0;const tt=4*et;if(this._circleAndRectCollide(ce.x,ce.y,ce.radius,We[tt+0],We[tt+1],We[tt+2],We[tt+3])&&(!ee||ee(this.boxKeys[et])))return K.push(!0),!0}}const Qe=this.circleCells[R];if(Qe!==null){const We=this.circles;for(const et of Qe)if(!le.circle[et]){le.circle[et]=!0;const tt=3*et;if(this._circlesCollide(We[tt],We[tt+1],We[tt+2],ce.x,ce.y,ce.radius)&&(!ee||ee(this.circleKeys[et])))return K.push(!0),!0}}}_forEachCell(l,g,T,k,R,K,X,ee){const ce=this._convertToXCellCoord(l),le=this._convertToYCellCoord(g),ve=this._convertToXCellCoord(T),Qe=this._convertToYCellCoord(k);for(let We=ce;We<=ve;We++)for(let et=le;et<=Qe;et++)if(R.call(this,l,g,T,k,this.xCellCount*et+We,K,X,ee))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,g,T,k,R,K){const X=k-l,ee=R-g,ce=T+K;return ce*ce>X*X+ee*ee}_circleAndRectCollide(l,g,T,k,R,K,X){const ee=(K-k)/2,ce=Math.abs(l-(k+ee));if(ce>ee+T)return!1;const le=(X-R)/2,ve=Math.abs(g-(R+le));if(ve>le+T)return!1;if(ce<=ee||ve<=le)return!0;const Qe=ce-ee,We=ve-le;return Qe*Qe+We*We<=T*T}}const hs={unknown:0,flipRequired:1,flipNotRequired:2},Yo=Math.tan(85*Math.PI/180);function hn(b,l,g,T,k,R,K){const X=s.create();if(g)if(R.name==="globe"){const ee=s.calculateGlobeLabelMatrix(k,l);s.multiply(X,X,ee)}else{const ee=Xe([],K);X[0]=ee[0],X[1]=ee[1],X[4]=ee[2],X[5]=ee[3],T||s.rotateZ(X,X,k.angle)}else s.multiply(X,k.labelPlaneMatrix,b);return X}function Wr(b,l,g,T,k,R,K){const X=hn(b,l,g,T,k,R,K);return R.name==="globe"&&g||(X[2]=X[6]=X[10]=X[14]=0),X}function Dr(b,l,g,T,k,R,K){if(g){if(R.name==="globe"){const X=hn(b,l,g,T,k,R,K);return s.invert(X,X),s.multiply(X,b,X),X}{const X=s.clone(b),ee=s.identity([]);return ee[0]=K[0],ee[1]=K[1],ee[4]=K[2],ee[5]=K[3],s.multiply(X,X,ee),T||s.rotateZ(X,X,-k.angle),X}}return k.glCoordMatrix}function Mr(b,l,g,T){const k=[b,l,g,1];g?s.transformMat4$1(k,k,T):Lr(k,k,T);const R=k[3];return k[0]/=R,k[1]/=R,k[2]/=R,k}function xc(b,l){return Math.min(.5+b/l*.5,1.5)}function ca(b,l){const g=b[0]/b[3],T=b[1]/b[3];return g>=-l[0]&&g<=l[0]&&T>=-l[1]&&T<=l[1]}function sh(b,l,g,T,k,R,K,X,ee,ce){const le=g.transform,ve=T?b.textSizeData:b.iconSizeData,Qe=s.evaluateSizeForZoom(ve,g.transform.zoom),We=le.projection.name==="globe",et=[256/g.width*2+1,256/g.height*2+1],tt=T?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;tt.clear();let rt=null;We&&(rt=T?b.text.globeExtVertexArray:b.icon.globeExtVertexArray);const Be=b.lineVertexArray,Ye=T?b.text.placedSymbolArray:b.icon.placedSymbolArray,lt=g.transform.width/g.transform.height;let At,It=!1;for(let Tt=0;Tt<Ye.length;Tt++){const Mt=Ye.get(Tt),{numGlyphs:Ht,writingMode:Nt}=Mt;if(Nt!==s.WritingMode.vertical||It||At===s.WritingMode.horizontal||(It=!0),At=Nt,(Mt.hidden||Nt===s.WritingMode.vertical)&&!It){Ea(Ht,tt);continue}It=!1;const cn=new s.Point(Mt.tileAnchorX,Mt.tileAnchorY);let{x:Nn,y:Vt,z:Pn}=le.projection.projectTilePoint(cn.x,cn.y,ce.canonical);if(ee){const[Tr,Di,yr]=ee(cn);Nn+=Tr,Vt+=Di,Pn+=yr}const fn=[Nn,Vt,Pn,1];if(s.transformMat4$1(fn,fn,l),!ca(fn,et)){Ea(Ht,tt);continue}const Zn=xc(g.transform.cameraToCenterDistance,fn[3]),nn=s.evaluateSizeForFeature(ve,Qe,Mt),Mn=K?nn/Zn:nn*Zn,Yn=Mr(Nn,Vt,Pn,k);if(Yn[3]<=0){Ea(Ht,tt);continue}let Vn={};const si=K?null:ee,ar=gi(Mt,Mn,!1,X,l,k,R,b.glyphOffsetArray,Be,tt,rt,Yn,cn,Vn,lt,si,le.projection,ce,K);It=ar.useVertical,si&&ar.needsFlipping&&(Vn={}),(ar.notEnoughRoom||It||ar.needsFlipping&&gi(Mt,Mn,!0,X,l,k,R,b.glyphOffsetArray,Be,tt,rt,Yn,cn,Vn,lt,si,le.projection,ce,K).notEnoughRoom)&&Ea(Ht,tt)}T?(b.text.dynamicLayoutVertexBuffer.updateData(tt),rt&&b.text.globeExtVertexBuffer.updateData(rt)):(b.icon.dynamicLayoutVertexBuffer.updateData(tt),rt&&b.icon.globeExtVertexBuffer.updateData(rt))}function Jr(b,l,g,T,k,R,K,X,ee,ce,le,ve,Qe,We,et,tt){const{lineStartIndex:rt,glyphStartIndex:Be,segment:Ye}=X,lt=Be+X.numGlyphs,At=rt+X.lineLength,It=l.getoffsetX(Be),Tt=l.getoffsetX(lt-1),Mt=Va(b*It,g,T,k,R,K,Ye,rt,At,ee,ce,le,ve,Qe,!0,We,et,tt);if(!Mt)return null;const Ht=Va(b*Tt,g,T,k,R,K,Ye,rt,At,ee,ce,le,ve,Qe,!0,We,et,tt);return Ht?{first:Mt,last:Ht}:null}function Wo(b,l,g,T){return b===s.WritingMode.horizontal&&Math.abs(T)>Math.abs(g)?{useVertical:!0}:b===s.WritingMode.vertical?T>0?{needsFlipping:!0}:null:l!==hs.unknown&&function(k,R){return k===0||Math.abs(R/k)>Yo}(g,T)?l===hs.flipRequired?{needsFlipping:!0}:null:g<0?{needsFlipping:!0}:null}function gi(b,l,g,T,k,R,K,X,ee,ce,le,ve,Qe,We,et,tt,rt,Be,Ye){const lt=l/24,At=b.lineOffsetX*lt,It=b.lineOffsetY*lt,{lineStartIndex:Tt,glyphStartIndex:Mt,numGlyphs:Ht,segment:Nt,writingMode:cn,flipState:Nn}=b,Vt=Tt+b.lineLength,Pn=fn=>{if(le){const[Yn,Vn,si]=fn.up,ar=ce.length;s.updateGlobeVertexNormal(le,ar+0,Yn,Vn,si),s.updateGlobeVertexNormal(le,ar+1,Yn,Vn,si),s.updateGlobeVertexNormal(le,ar+2,Yn,Vn,si),s.updateGlobeVertexNormal(le,ar+3,Yn,Vn,si)}const[Zn,nn,Mn]=fn.point;s.addDynamicAttributes(ce,Zn,nn,Mn,fn.angle)};if(Ht>1){const fn=Jr(lt,X,At,It,g,ve,Qe,b,ee,R,We,tt,!1,rt,Be,Ye);if(!fn)return{notEnoughRoom:!0};if(T&&!g){let[Zn,nn,Mn]=fn.first.point,[Yn,Vn,si]=fn.last.point;[Zn,nn]=Mr(Zn,nn,Mn,K),[Yn,Vn]=Mr(Yn,Vn,si,K);const ar=Wo(cn,Nn,(Yn-Zn)*et,Vn-nn);if(b.flipState=ar&&ar.needsFlipping?hs.flipRequired:hs.flipNotRequired,ar)return ar}Pn(fn.first);for(let Zn=Mt+1;Zn<Mt+Ht-1;Zn++){const nn=Va(lt*X.getoffsetX(Zn),At,It,g,ve,Qe,Nt,Tt,Vt,ee,R,We,tt,!1,!1,rt,Be,Ye);if(!nn)return ce.length-=4*(Zn-Mt),{notEnoughRoom:!0};Pn(nn)}Pn(fn.last)}else{if(T&&!g){const Zn=Mr(Qe.x,Qe.y,0,k),nn=Tt+Nt+1,Mn=new s.Point(ee.getx(nn),ee.gety(nn)),Yn=Mr(Mn.x,Mn.y,0,k),Vn=Yn[3]>0?Yn:_r(Qe,Mn,Zn,1,k,void 0,rt,Be.canonical),si=Wo(cn,Nn,(Vn[0]-Zn[0])*et,Vn[1]-Zn[1]);if(b.flipState=si&&si.needsFlipping?hs.flipRequired:hs.flipNotRequired,si)return si}const fn=Va(lt*X.getoffsetX(Mt),At,It,g,ve,Qe,Nt,Tt,Vt,ee,R,We,tt,!1,!1,rt,Be,Ye);if(!fn)return{notEnoughRoom:!0};Pn(fn)}return{}}function zr(b,l,g,T,k){const{x:R,y:K,z:X}=T.projectTilePoint(b.x,b.y,l);if(!k)return Mr(R,K,X,g);const[ee,ce,le]=k(b);return Mr(R+ee,K+ce,X+le,g)}function _r(b,l,g,T,k,R,K,X){const ee=zr(b.sub(l)._unit()._add(b),X,k,K,R);return s.sub(ee,g,ee),s.normalize(ee,ee),s.scaleAndAdd(ee,g,ee,T)}function Va(b,l,g,T,k,R,K,X,ee,ce,le,ve,Qe,We,et,tt,rt,Be){const Ye=T?b-l:b+l;let lt=Ye>0?1:-1,At=0;T&&(lt*=-1,At=Math.PI),lt<0&&(At+=Math.PI);let It=X+K+(lt>0?0:1)|0,Tt=k,Mt=k,Ht=0,Nt=0;const cn=Math.abs(Ye),Nn=[],Vt=[];let Pn=R,fn=Pn;const Zn=()=>_r(fn,Pn,Mt,cn-Ht+1,le,Qe,tt,rt.canonical);for(;Ht+Nt<=cn;){if(It+=lt,It<X||It>=ee)return null;if(Mt=Tt,fn=Pn,Nn.push(Mt),We&&Vt.push(fn),Pn=new s.Point(ce.getx(It),ce.gety(It)),Tt=ve[It],!Tt){const yr=zr(Pn,rt.canonical,le,tt,Qe);Tt=yr[3]>0?ve[It]=yr:Zn()}Ht+=Nt,Nt=s.distance(Mt,Tt)}et&&Qe&&(ve[It]&&(Tt=Zn(),Nt=s.distance(Mt,Tt)),ve[It]=Tt);const nn=(cn-Ht)/Nt,Mn=Pn.sub(fn)._mult(nn)._add(fn),Yn=s.sub([],Tt,Mt),Vn=s.scaleAndAdd([],Mt,Yn,nn);let si=[0,0,1],ar=Yn[0],Tr=Yn[1];if(Be&&(si=tt.upVector(rt.canonical,Mn.x,Mn.y),si[0]!==0||si[1]!==0||si[2]!==1)){const yr=[si[2],0,-si[0]],ro=s.cross([],si,yr);s.normalize(yr,yr),s.normalize(ro,ro),ar=s.dot(Yn,yr),Tr=s.dot(Yn,ro)}if(g){const yr=s.cross([],si,Yn);s.normalize(yr,yr),s.scaleAndAdd(Vn,Vn,yr,g*lt)}const Di=At+Math.atan2(Tr,ar);return Nn.push(Vn),We&&Vt.push(Mn),{point:Vn,angle:Di,path:Nn,tilePath:Vt,up:si}}function Ea(b,l){const g=l.length,T=g+4*b;l.resize(T),l.float32.fill(-1/0,4*g,4*T)}function Lr(b,l,g){const T=l[0],k=l[1];return b[0]=g[0]*T+g[4]*k+g[12],b[1]=g[1]*T+g[5]*k+g[13],b[3]=g[3]*T+g[7]*k+g[15],b}const Io=100;class Sa{constructor(l,g,T=new xo(l.width+200,l.height+200,25),k=new xo(l.width+200,l.height+200,25)){this.transform=l,this.grid=T,this.ignoredGrid=k,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Io,this.screenBottomBoundary=l.height+Io,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=g}placeCollisionBox(l,g,T,k,R,K,X,ee){let ce=T.projectedAnchorX,le=T.projectedAnchorY,ve=T.projectedAnchorZ;const Qe=T.elevation,We=T.tileID,et=l.getProjection();if(Qe&&We){const[Tt,Mt,Ht]=et.upVector(We.canonical,T.tileAnchorX,T.tileAnchorY),Nt=et.upVectorScale(We.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;ce+=Tt*Qe*Nt,le+=Mt*Qe*Nt,ve+=Ht*Qe*Nt}const tt=this.projectAndGetPerspectiveRatio(X,ce,le,ve,T.tileID,et.name==="globe"||!!Qe||this.transform.pitch>0,et),rt=K*tt.perspectiveRatio,Be=(T.x1*g+k.x-T.padding)*rt+tt.point.x,Ye=(T.y1*g+k.y-T.padding)*rt+tt.point.y,lt=(T.x2*g+k.x+T.padding)*rt+tt.point.x,At=(T.y2*g+k.y+T.padding)*rt+tt.point.y,It=tt.perspectiveRatio<=.55||tt.occluded;return!this.isInsideGrid(Be,Ye,lt,At)||!R&&this.grid.hitTest(Be,Ye,lt,At,ee)||It?{box:[],offscreen:!1,occluded:tt.occluded}:{box:[Be,Ye,lt,At],offscreen:this.isOffscreen(Be,Ye,lt,At),occluded:!1}}placeCollisionCircles(l,g,T,k,R,K,X,ee,ce,le,ve,Qe,We,et,tt){const rt=[],Be=this.transform.elevation,Ye=l.getProjection(),lt=Be?Be.getAtTileOffsetFunc(tt,this.transform.center.lat,this.transform.worldSize,Ye):null,At=new s.Point(T.tileAnchorX,T.tileAnchorY);let{x:It,y:Tt,z:Mt}=Ye.projectTilePoint(At.x,At.y,tt.canonical);if(lt){const[Mn,Yn,Vn]=lt(At);It+=Mn,Tt+=Yn,Mt+=Vn}const Ht=Ye.name==="globe",Nt=this.projectAndGetPerspectiveRatio(X,It,Tt,Mt,tt,Ht||!!Be||this.transform.pitch>0,Ye),{perspectiveRatio:cn}=Nt,Nn=(ve?K/cn:K*cn)/s.ONE_EM,Vt=Mr(It,Tt,Mt,ee),Pn=Nt.signedDistanceFromCamera>0?Jr(Nn,R,T.lineOffsetX*Nn,T.lineOffsetY*Nn,!1,Vt,At,T,k,ee,{},Be&&!ve?lt:null,ve&&!!Be,Ye,tt,ve):null;let fn=!1,Zn=!1,nn=!0;if(Pn&&!Nt.occluded){const Mn=.5*We*cn+et,Yn=new s.Point(-100,-100),Vn=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),si=new fo,{first:ar,last:Tr}=Pn,Di=ar.path.length;let yr=[];for(let Yi=Di-1;Yi>=1;Yi--)yr.push(ar.path[Yi]);for(let Yi=1;Yi<Tr.path.length;Yi++)yr.push(Tr.path[Yi]);const ro=2.5*Mn;ce&&(yr=yr.map(([Yi,Ro,gs],qo)=>(lt&&!Ht&&(gs=lt(qo<Di-1?ar.tilePath[Di-1-qo]:Tr.tilePath[qo-Di+2])[2]),Mr(Yi,Ro,gs,ce))),yr.some(Yi=>Yi[3]<=0)&&(yr=[]));let co=[];if(yr.length>0){let Yi=1/0,Ro=-1/0,gs=1/0,qo=-1/0;for(const Xo of yr)Yi=Math.min(Yi,Xo[0]),gs=Math.min(gs,Xo[1]),Ro=Math.max(Ro,Xo[0]),qo=Math.max(qo,Xo[1]);Ro>=Yn.x&&Yi<=Vn.x&&qo>=Yn.y&&gs<=Vn.y&&(co=[yr.map(Xo=>new s.Point(Xo[0],Xo[1]))],(Yi<Yn.x||Ro>Vn.x||gs<Yn.y||qo>Vn.y)&&(co=s.clipLine(co,Yn.x,Yn.y,Vn.x,Vn.y)))}for(const Yi of co){si.reset(Yi,.25*Mn);let Ro=0;Ro=si.length<=.5*Mn?1:Math.ceil(si.paddedLength/ro)+1;for(let gs=0;gs<Ro;gs++){const qo=gs/Math.max(Ro-1,1),Xo=si.lerp(qo),qa=Xo.x+Io,Oa=Xo.y+Io;rt.push(qa,Oa,Mn,0);const iu=qa-Mn,Os=Oa-Mn,ko=qa+Mn,ts=Oa+Mn;if(nn=nn&&this.isOffscreen(iu,Os,ko,ts),Zn=Zn||this.isInsideGrid(iu,Os,ko,ts),!g&&this.grid.hitTestCircle(qa,Oa,Mn,Qe)&&(fn=!0,!le))return{circles:[],offscreen:!1,collisionDetected:fn,occluded:!1}}}}return{circles:!le&&fn||!Zn?[]:rt,offscreen:nn,collisionDetected:fn,occluded:Nt.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const g=[];let T=1/0,k=1/0,R=-1/0,K=-1/0;for(const le of l){const ve=new s.Point(le.x+Io,le.y+Io);T=Math.min(T,ve.x),k=Math.min(k,ve.y),R=Math.max(R,ve.x),K=Math.max(K,ve.y),g.push(ve)}const X=this.grid.query(T,k,R,K).concat(this.ignoredGrid.query(T,k,R,K)),ee={},ce={};for(const le of X){const ve=le.key;if(ee[ve.bucketInstanceId]===void 0&&(ee[ve.bucketInstanceId]={}),ee[ve.bucketInstanceId][ve.featureIndex])continue;const Qe=[new s.Point(le.x1,le.y1),new s.Point(le.x2,le.y1),new s.Point(le.x2,le.y2),new s.Point(le.x1,le.y2)];s.polygonIntersectsPolygon(g,Qe)&&(ee[ve.bucketInstanceId][ve.featureIndex]=!0,ce[ve.bucketInstanceId]===void 0&&(ce[ve.bucketInstanceId]=[]),ce[ve.bucketInstanceId].push(ve.featureIndex))}return ce}insertCollisionBox(l,g,T,k,R){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:T,featureIndex:k,collisionGroupID:R},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,g,T,k,R){const K=g?this.ignoredGrid:this.grid,X={bucketInstanceId:T,featureIndex:k,collisionGroupID:R};for(let ee=0;ee<l.length;ee+=4)K.insertCircle(X,l[ee],l[ee+1],l[ee+2])}projectAndGetPerspectiveRatio(l,g,T,k,R,K,X){const ee=[g,T,k,1];let ce=!1;k||this.transform.pitch>0?(s.transformMat4$1(ee,ee,l),this.fogState&&R&&X.name!=="globe"&&(ce=function(Qe,We,et,tt,rt,Be){const Ye=Be.calculateFogTileMatrix(rt),lt=[We,et,tt];return s.transformMat4(lt,lt,Ye),Rn(Qe,lt,Be.pitch,Be._fov)}(this.fogState,g,T,k,R.toUnwrapped(),this.transform)>.9)):Lr(ee,ee,l);const le=ee[3];return{point:new s.Point((ee[0]/le+1)/2*this.transform.width+Io,(-ee[1]/le+1)/2*this.transform.height+Io),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(X)/le*.5,1.5),signedDistanceFromCamera:le,occluded:K&&ee[2]>le||ce}}isOffscreen(l,g,T,k){return T<Io||l>=this.screenRightBoundary||k<Io||g>this.screenBottomBoundary}isInsideGrid(l,g,T,k){return T>=0&&l<this.gridRightBoundary&&k>=0&&g<this.gridBottomBoundary}getViewportMatrix(){const l=s.identity([]);return s.translate(l,l,[-100,-100,0]),l}}function _a(b,l,g){const T=l.createTileMatrix(b,b.worldSize,g.toUnwrapped());return s.multiply(new Float32Array(16),b.projMatrix,T)}function Es(b,l,g){if(l.projection.name===g.projection.name)return b.projMatrix;const T=g.clone();return T.setProjection(l.projection),_a(T,l.getProjection(),b)}function Ho(b,l,g){return l.name===g.projection.name?b.projMatrix:_a(g,l,b)}class Ol{constructor(l,g,T,k){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?g:-g))):k&&T?1:0,this.placed=T}isHidden(){return this.opacity===0&&!this.placed}}class gl{constructor(l,g,T,k,R,K=!1){this.text=new Ol(l?l.text:null,g,T,R),this.icon=new Ol(l?l.icon:null,g,k,R),this.clipped=K}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class oc{constructor(l,g,T,k=!1){this.text=l,this.icon=g,this.skipFade=T,this.clipped=k}}class _l{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Jo{constructor(l,g,T,k,R){this.bucketInstanceId=l,this.featureIndex=g,this.sourceLayerIndex=T,this.bucketIndex=k,this.tileID=R}}class Qc{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const g=++this.maxGroupID;this.collisionGroups[l]={ID:g,predicate:T=>T.collisionGroupID===g}}return this.collisionGroups[l]}}function $c(b,l,g,T,k){const{horizontalAlign:R,verticalAlign:K}=s.getAnchorAlignment(b),X=-(R-.5)*l,ee=-(K-.5)*g,ce=s.evaluateVariableOffset(b,T);return new s.Point(X+ce[0]*k,ee+ce[1]*k)}function Uu(b,l,g,T,k){const R=new s.Point(b,l);return g&&R._rotate(T?k:-k),R}class fu{constructor(l,g,T,k,R){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new Sa(this.transform,R),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Qc(T),this.collisionCircleArrays={},this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,g,T,k){const R=T.getBucket(g),K=T.latestFeatureIndex;if(!R||!K||g.id!==R.layerIds[0])return;const X=R.layers[0].layout,ee=T.collisionBoxArray,ce=Math.pow(2,this.transform.zoom-T.tileID.overscaledZ),le=T.tileSize/s.EXTENT,ve=T.tileID.toUnwrapped();this.transform.setProjection(R.projection);const Qe=(We=T.tileID,et=R.getProjection(),tt=this.transform,et.name===this.projection?tt.calculateProjMatrix(We.toUnwrapped()):_a(tt,et,We));var We,et,tt;const rt=X.get("text-pitch-alignment")==="map",Be=X.get("text-rotation-alignment")==="map";g.compileFilter();const Ye=g.dynamicFilter(),lt=g.dynamicFilterNeedsFeature(),At=this.transform.calculatePixelsToTileUnitsMatrix(T),It=Wr(Qe,T.tileID.canonical,rt,Be,this.transform,R.getProjection(),At);let Tt=null;if(rt){const Nt=Dr(Qe,T.tileID.canonical,rt,Be,this.transform,R.getProjection(),At);Tt=s.multiply([],this.transform.labelPlaneMatrix,Nt)}let Mt=null;Ye&&T.latestFeatureIndex&&(Mt={unwrappedTileID:ve,dynamicFilter:Ye,dynamicFilterNeedsFeature:lt,featureIndex:T.latestFeatureIndex}),this.retainedQueryData[R.bucketInstanceId]=new Jo(R.bucketInstanceId,K,R.sourceLayerIndex,R.index,T.tileID);const Ht={bucket:R,layout:X,posMatrix:Qe,textLabelPlaneMatrix:It,labelToScreenMatrix:Tt,clippingData:Mt,scale:ce,textPixelRatio:le,holdingForFade:T.holdingForFade(),collisionBoxArray:ee,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(R.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(R.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(R.sourceID)};if(k)for(const Nt of R.sortKeyRanges){const{sortKey:cn,symbolInstanceStart:Nn,symbolInstanceEnd:Vt}=Nt;l.push({sortKey:cn,symbolInstanceStart:Nn,symbolInstanceEnd:Vt,parameters:Ht})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:R.symbolInstances.length,parameters:Ht})}attemptAnchorPlacement(l,g,T,k,R,K,X,ee,ce,le,ve,Qe,We,et,tt,rt,Be,Ye){const{textOffset0:lt,textOffset1:At,crossTileID:It}=Qe,Tt=[lt,At],Mt=$c(l,T,k,Tt,R),Ht=this.collisionIndex.placeCollisionBox(et,R,g,Uu(Mt.x,Mt.y,K,X,this.transform.angle),ve,ee,ce,le.predicate);if(rt){const Nt=et.getSymbolInstanceIconSize(Ye,this.transform.zoom,Qe.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(et,Nt,rt,Uu(Mt.x,Mt.y,K,X,this.transform.angle),ve,ee,ce,le.predicate).box.length===0)return}if(Ht.box.length>0){let Nt;return this.prevPlacement&&this.prevPlacement.variableOffsets[It]&&this.prevPlacement.placements[It]&&this.prevPlacement.placements[It].text&&(Nt=this.prevPlacement.variableOffsets[It].anchor),this.variableOffsets[It]={textOffset:Tt,width:T,height:k,anchor:l,textScale:R,prevAnchor:Nt},this.markUsedJustification(et,l,Qe,tt),et.allowVerticalPlacement&&(this.markUsedOrientation(et,tt,Qe),this.placedOrientations[It]=tt),{shift:Mt,placedGlyphBoxes:Ht}}}placeLayerBucketPart(l,g,T,k){const{bucket:R,layout:K,posMatrix:X,textLabelPlaneMatrix:ee,labelToScreenMatrix:ce,clippingData:le,textPixelRatio:ve,holdingForFade:Qe,collisionBoxArray:We,partiallyEvaluatedTextSize:et,partiallyEvaluatedIconSize:tt,collisionGroup:rt}=l.parameters,Be=K.get("text-optional"),Ye=K.get("icon-optional"),lt=K.get("text-allow-overlap"),At=K.get("icon-allow-overlap"),It=K.get("text-rotation-alignment")==="map",Tt=K.get("text-pitch-alignment")==="map",Mt=K.get("icon-text-fit")!=="none",Ht=K.get("symbol-z-order")==="viewport-y";this.transform.setProjection(R.projection);let Nt=lt&&(At||!R.hasIconData()||Ye),cn=At&&(lt||!R.hasTextData()||Be);!R.collisionArrays&&We&&R.deserializeCollisionBoxes(We),T&&k&&R.updateCollisionDebugBuffers(this.transform.zoom,We);const Nn=(Vt,Pn,fn)=>{const{crossTileID:Zn,numVerticalGlyphVertices:nn}=Vt;if(le){const ko={zoom:this.transform.zoom,pitch:this.transform.pitch};let ts=null;if(le.dynamicFilterNeedsFeature){const No=this.retainedQueryData[R.bucketInstanceId];ts=le.featureIndex.loadFeature({featureIndex:Vt.featureIndex,bucketIndex:No.bucketIndex,sourceLayerIndex:No.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,le.dynamicFilter)(ko,ts,this.retainedQueryData[R.bucketInstanceId].tileID.canonical,new s.Point(Vt.tileAnchorX,Vt.tileAnchorY),this.transform.calculateDistanceTileData(le.unwrappedTileID)))return this.placements[Zn]=new oc(!1,!1,!1,!0),void g.add(Zn)}if(g.has(Zn))return;if(Qe)return void(this.placements[Zn]=new oc(!1,!1,!1));let Mn=!1,Yn=!1,Vn=!0,si=!1,ar=!1,Tr=null,Di={box:null,offscreen:null,occluded:null},yr={box:null,offscreen:null,occluded:null},ro=null,co=null,Yi=null,Ro=0,gs=0,qo=0;fn.textFeatureIndex?Ro=fn.textFeatureIndex:Vt.useRuntimeCollisionCircles&&(Ro=Vt.featureIndex),fn.verticalTextFeatureIndex&&(gs=fn.verticalTextFeatureIndex);const Xo=ko=>{ko.tileID=this.retainedQueryData[R.bucketInstanceId].tileID;const ts=this.transform.elevation;(ts||ko.elevation)&&(ko.elevation=ts?ts.getAtTileOffset(ko.tileID,ko.tileAnchorX,ko.tileAnchorY):0)},qa=fn.textBox;if(qa){Xo(qa);const ko=No=>{let Aa=s.WritingMode.horizontal;if(R.allowVerticalPlacement&&!No&&this.prevPlacement){const Na=this.prevPlacement.placedOrientations[Zn];Na&&(this.placedOrientations[Zn]=Na,Aa=Na,this.markUsedOrientation(R,Aa,Vt))}return Aa},ts=(No,Aa)=>{if(R.allowVerticalPlacement&&nn>0&&fn.verticalTextBox){for(const Na of R.writingModes)if(Na===s.WritingMode.vertical?(Di=Aa(),yr=Di):Di=No(),Di&&Di.box&&Di.box.length)break}else Di=No()};if(K.get("text-variable-anchor")){let No=K.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Zn]){const Fs=this.prevPlacement.variableOffsets[Zn];No.indexOf(Fs.anchor)>0&&(No=No.filter(Zl=>Zl!==Fs.anchor),No.unshift(Fs.anchor))}const Aa=(Fs,Zl,EA)=>{const Cu=R.getSymbolInstanceTextSize(et,Vt,this.transform.zoom,Pn),yd=(Fs.x2-Fs.x1)*Cu+2*Fs.padding,Bu=(Fs.y2-Fs.y1)*Cu+2*Fs.padding,Rh=Mt&&!At?Zl:null;Rh&&Xo(Rh);let Oh={box:[],offscreen:!1,occluded:!1};const wo=lt?2*No.length:No.length;for(let Xd=0;Xd<wo;++Xd){const SA=this.attemptAnchorPlacement(No[Xd%No.length],Fs,yd,Bu,Cu,It,Tt,ve,X,rt,Xd>=No.length,Vt,Pn,R,EA,Rh,et,tt);if(SA&&(Oh=SA.placedGlyphBoxes,Oh&&Oh.box&&Oh.box.length)){Mn=!0,Tr=SA.shift;break}}return Oh};ts(()=>Aa(qa,fn.iconBox,s.WritingMode.horizontal),()=>{const Fs=fn.verticalTextBox;return Fs&&Xo(Fs),R.allowVerticalPlacement&&!(Di&&Di.box&&Di.box.length)&&nn>0&&Fs?Aa(Fs,fn.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Di&&(Mn=Di.box,Vn=Di.offscreen,si=Di.occluded);const Na=ko(!(!Di||!Di.box));if(!Mn&&this.prevPlacement){const Fs=this.prevPlacement.variableOffsets[Zn];Fs&&(this.variableOffsets[Zn]=Fs,this.markUsedJustification(R,Fs.anchor,Vt,Na))}}else{const No=(Aa,Na)=>{const Fs=R.getSymbolInstanceTextSize(et,Vt,this.transform.zoom,Pn),Zl=this.collisionIndex.placeCollisionBox(R,Fs,Aa,new s.Point(0,0),lt,ve,X,rt.predicate);return Zl&&Zl.box&&Zl.box.length&&(this.markUsedOrientation(R,Na,Vt),this.placedOrientations[Zn]=Na),Zl};ts(()=>No(qa,s.WritingMode.horizontal),()=>{const Aa=fn.verticalTextBox;return R.allowVerticalPlacement&&nn>0&&Aa?(Xo(Aa),No(Aa,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),ko(!!(Di&&Di.box&&Di.box.length))}}if(ro=Di,Mn=ro&&ro.box&&ro.box.length>0,Vn=ro&&ro.offscreen,si=ro&&ro.occluded,Vt.useRuntimeCollisionCircles){const ko=R.text.placedSymbolArray.get(Vt.centerJustifiedTextSymbolIndex>=0?Vt.centerJustifiedTextSymbolIndex:Vt.verticalPlacedTextSymbolIndex),ts=s.evaluateSizeForFeature(R.textSizeData,et,ko),No=K.get("text-padding");co=this.collisionIndex.placeCollisionCircles(R,lt,ko,R.lineVertexArray,R.glyphOffsetArray,ts,X,ee,ce,T,Tt,rt.predicate,Vt.collisionCircleDiameter*ts/s.ONE_EM,No,this.retainedQueryData[R.bucketInstanceId].tileID),Mn=lt||co.circles.length>0&&!co.collisionDetected,Vn=Vn&&co.offscreen,si=co.occluded}if(fn.iconFeatureIndex&&(qo=fn.iconFeatureIndex),fn.iconBox){const ko=ts=>{Xo(ts);const No=Mt&&Tr?Uu(Tr.x,Tr.y,It,Tt,this.transform.angle):new s.Point(0,0),Aa=R.getSymbolInstanceIconSize(tt,this.transform.zoom,Vt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(R,Aa,ts,No,At,ve,X,rt.predicate)};yr&&yr.box&&yr.box.length&&fn.verticalIconBox?(Yi=ko(fn.verticalIconBox),Yn=Yi.box.length>0):(Yi=ko(fn.iconBox),Yn=Yi.box.length>0),Vn=Vn&&Yi.offscreen,ar=Yi.occluded}const Oa=Be||Vt.numHorizontalGlyphVertices===0&&nn===0,iu=Ye||Vt.numIconVertices===0;if(Oa||iu?iu?Oa||(Yn=Yn&&Mn):Mn=Yn&&Mn:Yn=Mn=Yn&&Mn,Mn&&ro&&ro.box&&this.collisionIndex.insertCollisionBox(ro.box,K.get("text-ignore-placement"),R.bucketInstanceId,yr&&yr.box&&gs?gs:Ro,rt.ID),Yn&&Yi&&this.collisionIndex.insertCollisionBox(Yi.box,K.get("icon-ignore-placement"),R.bucketInstanceId,qo,rt.ID),co&&(Mn&&this.collisionIndex.insertCollisionCircles(co.circles,K.get("text-ignore-placement"),R.bucketInstanceId,Ro,rt.ID),T)){const ko=R.bucketInstanceId;let ts=this.collisionCircleArrays[ko];ts===void 0&&(ts=this.collisionCircleArrays[ko]=new _l);for(let No=0;No<co.circles.length;No+=4)ts.circles.push(co.circles[No+0]),ts.circles.push(co.circles[No+1]),ts.circles.push(co.circles[No+2]),ts.circles.push(co.collisionDetected?1:0)}const Os=R.projection.name!=="globe";Nt=Nt&&(Os||!si),cn=cn&&(Os||!ar),this.placements[Zn]=new oc(Mn||Nt,Yn||cn,Vn||R.justReloaded),g.add(Zn)};if(Ht){const Vt=R.getSortedSymbolIndexes(this.transform.angle);for(let Pn=Vt.length-1;Pn>=0;--Pn){const fn=Vt[Pn];Nn(R.symbolInstances.get(fn),fn,R.collisionArrays[fn])}}else for(let Vt=l.symbolInstanceStart;Vt<l.symbolInstanceEnd;Vt++)Nn(R.symbolInstances.get(Vt),Vt,R.collisionArrays[Vt]);if(T&&R.bucketInstanceId in this.collisionCircleArrays){const Vt=this.collisionCircleArrays[R.bucketInstanceId];s.invert(Vt.invProjMatrix,X),Vt.viewportMatrix=this.collisionIndex.getViewportMatrix()}R.justReloaded=!1}markUsedJustification(l,g,T,k){const{leftJustifiedTextSymbolIndex:R,centerJustifiedTextSymbolIndex:K,rightJustifiedTextSymbolIndex:X,verticalPlacedTextSymbolIndex:ee,crossTileID:ce}=T,le=s.getAnchorJustification(g),ve=k===s.WritingMode.vertical?ee:le==="left"?R:le==="center"?K:le==="right"?X:-1;R>=0&&(l.text.placedSymbolArray.get(R).crossTileID=ve>=0&&R!==ve?0:ce),K>=0&&(l.text.placedSymbolArray.get(K).crossTileID=ve>=0&&K!==ve?0:ce),X>=0&&(l.text.placedSymbolArray.get(X).crossTileID=ve>=0&&X!==ve?0:ce),ee>=0&&(l.text.placedSymbolArray.get(ee).crossTileID=ve>=0&&ee!==ve?0:ce)}markUsedOrientation(l,g,T){const k=g===s.WritingMode.horizontal||g===s.WritingMode.horizontalOnly?g:0,R=g===s.WritingMode.vertical?g:0,{leftJustifiedTextSymbolIndex:K,centerJustifiedTextSymbolIndex:X,rightJustifiedTextSymbolIndex:ee,verticalPlacedTextSymbolIndex:ce}=T,le=l.text.placedSymbolArray;K>=0&&(le.get(K).placedOrientation=k),X>=0&&(le.get(X).placedOrientation=k),ee>=0&&(le.get(ee).placedOrientation=k),ce>=0&&(le.get(ce).placedOrientation=R)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const g=this.prevPlacement;let T=!1;this.prevZoomAdjustment=g?g.zoomAdjustment(this.transform.zoom):0;const k=g?g.symbolFadeChange(l):1,R=g?g.opacities:{},K=g?g.variableOffsets:{},X=g?g.placedOrientations:{};for(const ee in this.placements){const ce=this.placements[ee],le=R[ee];le?(this.opacities[ee]=new gl(le,k,ce.text,ce.icon,null,ce.clipped),T=T||ce.text!==le.text.placed||ce.icon!==le.icon.placed):(this.opacities[ee]=new gl(null,k,ce.text,ce.icon,ce.skipFade,ce.clipped),T=T||ce.text||ce.icon)}for(const ee in R){const ce=R[ee];if(!this.opacities[ee]){const le=new gl(ce,k,!1,!1);le.isHidden()||(this.opacities[ee]=le,T=T||ce.text.placed||ce.icon.placed)}}for(const ee in K)this.variableOffsets[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.variableOffsets[ee]=K[ee]);for(const ee in X)this.placedOrientations[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.placedOrientations[ee]=X[ee]);T?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=g?g.lastPlacementChangeTime:l)}updateLayerOpacities(l,g){const T=new Set;for(const k of g){const R=k.getBucket(l);R&&k.latestFeatureIndex&&l.id===R.layerIds[0]&&this.updateBucketOpacities(R,T,k.collisionBoxArray)}}updateBucketOpacities(l,g,T){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const k=l.layers[0].layout,R=!!l.layers[0].dynamicFilter(),K=new gl(null,0,!1,!1,!0),X=k.get("text-allow-overlap"),ee=k.get("icon-allow-overlap"),ce=k.get("text-variable-anchor"),le=k.get("text-rotation-alignment")==="map",ve=k.get("text-pitch-alignment")==="map",Qe=k.get("icon-text-fit")!=="none",We=new gl(null,0,X&&(ee||!l.hasIconData()||k.get("icon-optional")),ee&&(X||!l.hasTextData()||k.get("text-optional")),!0);!l.collisionArrays&&T&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(T);const et=(rt,Be,Ye)=>{for(let lt=0;lt<Be/4;lt++)rt.opacityVertexArray.emplaceBack(Ye)};let tt=0;for(let rt=0;rt<l.symbolInstances.length;rt++){const Be=l.symbolInstances.get(rt),{numHorizontalGlyphVertices:Ye,numVerticalGlyphVertices:lt,crossTileID:At,numIconVertices:It}=Be,Tt=g.has(At);let Mt=this.opacities[At];Tt?Mt=K:Mt||(Mt=We,this.opacities[At]=Mt),g.add(At);const Ht=Ye>0||lt>0,Nt=It>0,cn=this.placedOrientations[At],Nn=cn===s.WritingMode.vertical,Vt=cn===s.WritingMode.horizontal||cn===s.WritingMode.horizontalOnly;if(!Ht&&!Nt||Mt.isHidden()||tt++,Ht){const Pn=eo(Mt.text);et(l.text,Ye,Nn?fs:Pn),et(l.text,lt,Vt?fs:Pn);const fn=Mt.text.isHidden(),{leftJustifiedTextSymbolIndex:Zn,centerJustifiedTextSymbolIndex:nn,rightJustifiedTextSymbolIndex:Mn,verticalPlacedTextSymbolIndex:Yn}=Be,Vn=l.text.placedSymbolArray,si=fn||Nn?1:0;Zn>=0&&(Vn.get(Zn).hidden=si),nn>=0&&(Vn.get(nn).hidden=si),Mn>=0&&(Vn.get(Mn).hidden=si),Yn>=0&&(Vn.get(Yn).hidden=fn||Vt?1:0);const ar=this.variableOffsets[At];ar&&this.markUsedJustification(l,ar.anchor,Be,cn);const Tr=this.placedOrientations[At];Tr&&(this.markUsedJustification(l,"left",Be,Tr),this.markUsedOrientation(l,Tr,Be))}if(Nt){const Pn=eo(Mt.icon),{placedIconSymbolIndex:fn,verticalPlacedIconSymbolIndex:Zn}=Be,nn=l.icon.placedSymbolArray,Mn=Mt.icon.isHidden()?1:0;fn>=0&&(et(l.icon,It,Nn?fs:Pn),nn.get(fn).hidden=Mn),Zn>=0&&(et(l.icon,Be.numVerticalIconVertices,Vt?fs:Pn),nn.get(Zn).hidden=Mn)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Pn=l.collisionArrays[rt];if(Pn){let fn=new s.Point(0,0),Zn=!0;if(Pn.textBox||Pn.verticalTextBox){if(ce){const Mn=this.variableOffsets[At];Mn?(fn=$c(Mn.anchor,Mn.width,Mn.height,Mn.textOffset,Mn.textScale),le&&fn._rotate(ve?this.transform.angle:-this.transform.angle)):Zn=!1}R&&(Zn=!Mt.clipped),Pn.textBox&&bc(l.textCollisionBox.collisionVertexArray,Mt.text.placed,!Zn||Nn,fn.x,fn.y),Pn.verticalTextBox&&bc(l.textCollisionBox.collisionVertexArray,Mt.text.placed,!Zn||Vt,fn.x,fn.y)}const nn=Zn&&!!(!Vt&&Pn.verticalIconBox);Pn.iconBox&&bc(l.iconCollisionBox.collisionVertexArray,Mt.icon.placed,nn,Qe?fn.x:0,Qe?fn.y:0),Pn.verticalIconBox&&bc(l.iconCollisionBox.collisionVertexArray,Mt.icon.placed,!nn,Qe?fn.x:0,Qe?fn.y:0)}}}if(l.fullyClipped=tt===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const rt=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=rt.invProjMatrix,l.placementViewportMatrix=rt.viewportMatrix,l.collisionCircleArray=rt.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,g){const T=this.zoomAtLastRecencyCheck===g?1-this.zoomAdjustment(g):1;return this.zoomAtLastRecencyCheck=g,this.commitTime+this.fadeDuration*T>l}setStale(){this.stale=!0}}function bc(b,l,g,T,k){b.emplaceBack(l?1:0,g?1:0,T||0,k||0),b.emplaceBack(l?1:0,g?1:0,T||0,k||0),b.emplaceBack(l?1:0,g?1:0,T||0,k||0),b.emplaceBack(l?1:0,g?1:0,T||0,k||0)}const br=Math.pow(2,25),Ko=Math.pow(2,24),ss=Math.pow(2,17),ah=Math.pow(2,16),ia=Math.pow(2,9),Da=Math.pow(2,8),lh=Math.pow(2,1);function eo(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const l=b.placed?1:0,g=Math.floor(127*b.opacity);return g*br+l*Ko+g*ss+l*ah+g*ia+l*Da+g*lh+l}const fs=0;class jc{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,g,T,k,R){const K=this._bucketParts;for(;this._currentTileIndex<l.length;)if(g.getBucketParts(K,k,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,R())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,K.sort((X,ee)=>X.sortKey-ee.sortKey));this._currentPartIndex<K.length;){const X=K[this._currentPartIndex];if(g.placeLayerBucketPart(X,this._seenCrossTileIDs,T,X.symbolInstanceStart===0),this._currentPartIndex++,R())return!0}return!1}}class Rr{constructor(l,g,T,k,R,K,X,ee){this.placement=new fu(l,R,K,X,ee),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=T,this._showCollisionBoxes=k,this._done=!1}isDone(){return this._done}continuePlacement(l,g,T){const k=s.exported.now(),R=()=>{const K=s.exported.now()-k;return!this._forceFullPlacement&&K>2};for(;this._currentPlacementIndex>=0;){const K=g[l[this._currentPlacementIndex]],X=this.placement.collisionIndex.transform.zoom;if(K.type==="symbol"&&(!K.minzoom||K.minzoom<=X)&&(!K.maxzoom||K.maxzoom>X)){if(this._inProgressLayer||(this._inProgressLayer=new jc(K)),this._inProgressLayer.continuePlacement(T[K.source],this.placement,this._showCollisionBoxes,K,R))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const ao=512/s.EXTENT/2;class ua{constructor(l,g,T){this.tileID=l,this.bucketInstanceId=T,this.index=new s.KDBush(g.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const k=l.canonical.x*s.EXTENT,R=l.canonical.y*s.EXTENT;for(let K=0;K<g.length;K++){const{key:X,crossTileID:ee,tileAnchorX:ce,tileAnchorY:le}=g.get(K),ve=Math.floor((k+ce)*ao),Qe=Math.floor((R+le)*ao);this.index.add(ve,Qe),this.keys.push(X),this.crossTileIDs.push(ee)}this.index.finish()}findMatches(l,g,T){const k=this.tileID.canonical.z<g.canonical.z?1:Math.pow(2,this.tileID.canonical.z-g.canonical.z),R=ao/Math.pow(2,g.canonical.z-this.tileID.canonical.z),K=g.canonical.x*s.EXTENT,X=g.canonical.y*s.EXTENT;for(let ee=0;ee<l.length;ee++){const ce=l.get(ee);if(ce.crossTileID)continue;const{key:le,tileAnchorX:ve,tileAnchorY:Qe}=ce,We=Math.floor((K+ve)*R),et=Math.floor((X+Qe)*R),tt=this.index.range(We-k,et-k,We+k,et+k);for(const rt of tt){const Be=this.crossTileIDs[rt];if(this.keys[rt]===le&&!T.has(Be)){T.add(Be),ce.crossTileID=Be;break}}}}}class Ua{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Lh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const g=Math.round((l-this.lng)/360);if(g!==0)for(const T in this.indexes){const k=this.indexes[T],R={};for(const K in k){const X=k[K];X.tileID=X.tileID.unwrapTo(X.tileID.wrap+g),R[X.tileID.key]=X}this.indexes[T]=R}this.lng=l}addBucket(l,g,T){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===g.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let R=0;R<g.symbolInstances.length;R++)g.symbolInstances.get(R).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const k=this.usedCrossTileIDs[l.overscaledZ];for(const R in this.indexes){const K=this.indexes[R];if(Number(R)>l.overscaledZ)for(const X in K){const ee=K[X];ee.tileID.isChildOf(l)&&ee.findMatches(g.symbolInstances,l,k)}else{const X=K[l.scaledTo(Number(R)).key];X&&X.findMatches(g.symbolInstances,l,k)}}for(let R=0;R<g.symbolInstances.length;R++){const K=g.symbolInstances.get(R);K.crossTileID||(K.crossTileID=T.generate(),k.add(K.crossTileID))}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new ua(l,g.symbolInstances,g.bucketInstanceId),!0}removeBucketCrossTileIDs(l,g){for(const T of g.crossTileIDs)this.usedCrossTileIDs[l].delete(T)}removeStaleBuckets(l){let g=!1;for(const T in this.indexes){const k=this.indexes[T];for(const R in k)l[k[R].bucketInstanceId]||(this.removeBucketCrossTileIDs(T,k[R]),delete k[R],g=!0)}return g}}class yl{constructor(){this.layerIndexes={},this.crossTileIDs=new Ua,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,g,T,k){let R=this.layerIndexes[l.id];R===void 0&&(R=this.layerIndexes[l.id]=new Lh);let K=!1;const X={};k.name!=="globe"&&R.handleWrapJump(T);for(const ee of g){const ce=ee.getBucket(l);ce&&l.id===ce.layerIds[0]&&(ce.bucketInstanceId||(ce.bucketInstanceId=++this.maxBucketInstanceId),R.addBucket(ee.tileID,ce,this.crossTileIDs)&&(K=!0),X[ce.bucketInstanceId]=!0)}return R.removeStaleBuckets(X)&&(K=!0),K}pruneUnusedLayers(l){const g={};l.forEach(T=>{g[T]=!0});for(const T in this.layerIndexes)g[T]||delete this.layerIndexes[T]}}const vl=(b,l)=>s.emitValidationErrors(b,l&&l.filter(g=>g.identifier!=="source.canvas")),ch=s.pick(gn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),kh=s.pick(gn,["setCenter","setZoom","setBearing","setPitch"]),Mo={version:8,layers:[],sources:{}},Ss={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Is extends s.Evented{constructor(l,g={}){super(),this.map=l,this.dispatcher=new Xn(Jt(),this),this.imageManager=new rn,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(l._requestManager,g.localFontFamily?s.LocalGlyphMode.all:g.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,g.localFontFamily||g.localIdeographFontFamily),this.crossTileSymbolIndex=new yl,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const T=this;this._rtlTextPluginCallback=Is.registerForPluginStateChange(k=>{T.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},(R,K)=>{if(s.triggerPluginCompletionEvent(R),K&&K.every(X=>X))for(const X in T._sourceCaches){const ee=T._sourceCaches[X],ce=ee.getSource().type;ce!=="vector"&&ce!=="geojson"||ee.reload()}})}),this.on("data",k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const R=this.getSource(k.sourceId);if(R&&R.vectorLayerIds)for(const K in this._layers){const X=this._layers[K];X.source===R.id&&this._validateLayer(X)}})}loadURL(l,g={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const T=typeof g.validate=="boolean"?g.validate:!s.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,g.accessToken);const k=this.map._requestManager.transformRequest(l,s.ResourceType.Style);this._request=s.getJSON(k,(R,K)=>{this._request=null,R?this.fire(new s.ErrorEvent(R)):K&&this._load(K,T)})}loadJSON(l,g={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(l,g.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Mo,!1)}_updateLayerCount(l,g){const T=g?1:-1;l.is3D()&&(this._num3DLayers+=T),l.type==="circle"&&(this._numCircleLayers+=T),l.type==="symbol"&&(this._numSymbolLayers+=T)}_load(l,g){if(g&&vl(this,s.validateStyle(l)))return;this._loaded=!0,this.stylesheet=s.clone$1(l),this._updateMapProjection();for(const k in l.sources)this.addSource(k,l.sources[k],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const T=an(this.stylesheet.layers);this._order=T.map(k=>k.id),this._layers={},this._serializedLayers={};for(const k of T){const R=s.createStyleLayer(k);R.setEventedParent(this,{layer:{id:R.id}}),this._layers[R.id]=R,this._serializedLayers[R.id]=R.serialize(),this._updateLayerCount(R,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Kt(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(g,T,k){let R,K,X;const ee=s.exported.devicePixelRatio>1?"@2x":"";let ce=s.getJSON(T.transformRequest(T.normalizeSpriteURL(g,ee,".json"),s.ResourceType.SpriteJSON),(Qe,We)=>{ce=null,X||(X=Qe,R=We,ve())}),le=s.getImage(T.transformRequest(T.normalizeSpriteURL(g,ee,".png"),s.ResourceType.SpriteImage),(Qe,We)=>{le=null,X||(X=Qe,K=We,ve())});function ve(){if(X)k(X);else if(R&&K){const Qe=s.exported.getImageData(K),We={};for(const et in R){const{width:tt,height:rt,x:Be,y:Ye,sdf:lt,pixelRatio:At,stretchX:It,stretchY:Tt,content:Mt}=R[et],Ht=new s.RGBAImage({width:tt,height:rt});s.RGBAImage.copy(Qe,Ht,{x:Be,y:Ye},{x:0,y:0},{width:tt,height:rt}),We[et]={data:Ht,pixelRatio:At,sdf:lt,stretchX:It,stretchY:Tt,content:Mt}}k(null,We)}}return{cancel(){ce&&(ce.cancel(),ce=null),le&&(le.cancel(),le=null)}}}(l,this.map._requestManager,(g,T)=>{if(this._spriteRequest=null,g)this.fire(new s.ErrorEvent(g));else if(T)for(const k in T)this.imageManager.addImage(k,T[k]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(l){const g=this.getSource(l.source);if(!g)return;const T=l.sourceLayer;T&&(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(T)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${T}" does not exist on source "${g.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const g=[];for(const T of l){const k=this._layers[T];k.type!=="custom"&&g.push(k.serialize())}return g}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&(typeof l.isLayerDraped=="function"?l.isLayerDraped():Ss[l.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const g=this._changed;if(this._changed){const k=Object.keys(this._updatedLayers),R=Object.keys(this._removedLayers);(k.length||R.length)&&this._updateWorkerLayers(k,R);for(const K in this._updatedSources){const X=this._updatedSources[K];X==="reload"?this._reloadSource(K):X==="clear"&&this._clearSource(K)}this._updateTilesForChangedImages();for(const K in this._updatedPaintProps)this._layers[K].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const T={};for(const k in this._sourceCaches){const R=this._sourceCaches[k];T[k]=R.used,R.used=!1}for(const k of this._order){const R=this._layers[k];if(R.recalculate(l,this._availableImages),!R.isHidden(l.zoom)){const X=this._getLayerSourceCache(R);X&&(X.used=!0)}const K=this.map.painter;if(K){const X=R.getProgramIds();if(!X)continue;const ee=R.getProgramConfiguration(l.zoom);for(const ce of X)K.useProgram(ce,ee)}}for(const k in T){const R=this._sourceCaches[k];T[k]!==R.used&&R.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:R.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),g&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const g in this._sourceCaches)this._sourceCaches[g].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,g){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:g})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),vl(this,s.validateStyle(l)))return!1;(l=s.clone$1(l)).layers=an(l.layers);const g=function(k,R){if(!k)return[{command:gn.setStyle,args:[R]}];let K=[];try{if(!U(k.version,R.version))return[{command:gn.setStyle,args:[R]}];U(k.center,R.center)||K.push({command:gn.setCenter,args:[R.center]}),U(k.zoom,R.zoom)||K.push({command:gn.setZoom,args:[R.zoom]}),U(k.bearing,R.bearing)||K.push({command:gn.setBearing,args:[R.bearing]}),U(k.pitch,R.pitch)||K.push({command:gn.setPitch,args:[R.pitch]}),U(k.sprite,R.sprite)||K.push({command:gn.setSprite,args:[R.sprite]}),U(k.glyphs,R.glyphs)||K.push({command:gn.setGlyphs,args:[R.glyphs]}),U(k.transition,R.transition)||K.push({command:gn.setTransition,args:[R.transition]}),U(k.light,R.light)||K.push({command:gn.setLight,args:[R.light]}),U(k.fog,R.fog)||K.push({command:gn.setFog,args:[R.fog]}),U(k.projection,R.projection)||K.push({command:gn.setProjection,args:[R.projection]});const X={},ee=[];(function(ve,Qe,We,et){let tt;for(tt in Qe=Qe||{},ve=ve||{})ve.hasOwnProperty(tt)&&(Qe.hasOwnProperty(tt)||yi(tt,We,et));for(tt in Qe){if(!Qe.hasOwnProperty(tt))continue;const rt=Qe[tt];ve.hasOwnProperty(tt)?U(ve[tt],rt)||(ve[tt].type==="geojson"&&rt.type==="geojson"&&xr(ve,Qe,tt)?We.push({command:gn.setGeoJSONSourceData,args:[tt,rt.data]}):cr(tt,Qe,We,et)):mi(tt,Qe,We)}})(k.sources,R.sources,ee,X);const ce=[];k.layers&&k.layers.forEach(ve=>{ve.source&&X[ve.source]?K.push({command:gn.removeLayer,args:[ve.id]}):ce.push(ve)});let le=k.terrain;le&&X[le.source]&&(K.push({command:gn.setTerrain,args:[void 0]}),le=void 0),K=K.concat(ee),U(le,R.terrain)||K.push({command:gn.setTerrain,args:[R.terrain]}),function(ve,Qe,We){Qe=Qe||[];const et=(ve=ve||[]).map(mr),tt=Qe.map(mr),rt=ve.reduce(Hr,{}),Be=Qe.reduce(Hr,{}),Ye=et.slice(),lt=Object.create(null);let At,It,Tt,Mt,Ht,Nt,cn;for(At=0,It=0;At<et.length;At++)Tt=et[At],Be.hasOwnProperty(Tt)?It++:(We.push({command:gn.removeLayer,args:[Tt]}),Ye.splice(Ye.indexOf(Tt,It),1));for(At=0,It=0;At<tt.length;At++)Tt=tt[tt.length-1-At],Ye[Ye.length-1-At]!==Tt&&(rt.hasOwnProperty(Tt)?(We.push({command:gn.removeLayer,args:[Tt]}),Ye.splice(Ye.lastIndexOf(Tt,Ye.length-It),1)):It++,Nt=Ye[Ye.length-At],We.push({command:gn.addLayer,args:[Be[Tt],Nt]}),Ye.splice(Ye.length-At,0,Tt),lt[Tt]=!0);for(At=0;At<tt.length;At++)if(Tt=tt[At],Mt=rt[Tt],Ht=Be[Tt],!lt[Tt]&&!U(Mt,Ht))if(U(Mt.source,Ht.source)&&U(Mt["source-layer"],Ht["source-layer"])&&U(Mt.type,Ht.type)){for(cn in Gr(Mt.layout,Ht.layout,We,Tt,null,gn.setLayoutProperty),Gr(Mt.paint,Ht.paint,We,Tt,null,gn.setPaintProperty),U(Mt.filter,Ht.filter)||We.push({command:gn.setFilter,args:[Tt,Ht.filter]}),U(Mt.minzoom,Ht.minzoom)&&U(Mt.maxzoom,Ht.maxzoom)||We.push({command:gn.setLayerZoomRange,args:[Tt,Ht.minzoom,Ht.maxzoom]}),Mt)Mt.hasOwnProperty(cn)&&cn!=="layout"&&cn!=="paint"&&cn!=="filter"&&cn!=="metadata"&&cn!=="minzoom"&&cn!=="maxzoom"&&(cn.indexOf("paint.")===0?Gr(Mt[cn],Ht[cn],We,Tt,cn.slice(6),gn.setPaintProperty):U(Mt[cn],Ht[cn])||We.push({command:gn.setLayerProperty,args:[Tt,cn,Ht[cn]]}));for(cn in Ht)Ht.hasOwnProperty(cn)&&!Mt.hasOwnProperty(cn)&&cn!=="layout"&&cn!=="paint"&&cn!=="filter"&&cn!=="metadata"&&cn!=="minzoom"&&cn!=="maxzoom"&&(cn.indexOf("paint.")===0?Gr(Mt[cn],Ht[cn],We,Tt,cn.slice(6),gn.setPaintProperty):U(Mt[cn],Ht[cn])||We.push({command:gn.setLayerProperty,args:[Tt,cn,Ht[cn]]}))}else We.push({command:gn.removeLayer,args:[Tt]}),Nt=Ye[Ye.lastIndexOf(Tt)+1],We.push({command:gn.addLayer,args:[Ht,Nt]})}(ce,R.layers,K)}catch(X){console.warn("Unable to compute style diff:",X),K=[{command:gn.setStyle,args:[R]}]}return K}(this.serialize(),l).filter(k=>!(k.command in kh));if(g.length===0)return!1;const T=g.filter(k=>!(k.command in ch));if(T.length>0)throw new Error(`Unimplemented: ${T.map(k=>k.command).join(", ")}.`);return g.forEach(k=>{k.command!=="setTransition"&&k.command!=="setProjection"&&this[k.command].apply(this,k.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,g){return this.getImage(l)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,g),this._afterImageUpdated(l),this)}updateImage(l,g){this.imageManager.updateImage(l,g)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,g,T={}){if(this._checkLoaded(),this.getSource(l)!==void 0)throw new Error("There is already a source with this ID");if(!g.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(g).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(g.type)>=0&&this._validate(s.validateSource,`sources.${l}`,g,null,T))return;this.map&&this.map._collectResourceTiming&&(g.collectResourceTiming=!0);const k=pe(l,g,this.dispatcher,this);k.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:k.serialize(),sourceId:l}));const R=K=>{const X=(K?"symbol:":"other:")+l,ee=this._sourceCaches[X]=new s.SourceCache(X,k,K);(K?this._symbolSourceCaches:this._otherSourceCaches)[l]=ee,ee.style=this,ee.onAdd(this.map)};R(!1),g.type!=="vector"&&g.type!=="geojson"||R(!0),k.onAdd&&k.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const g=this.getSource(l);if(!g)throw new Error("There is no source with this ID");for(const k in this._layers)if(this._layers[k].source===l)return this.fire(new s.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${k}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new s.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const T=this._getSourceCaches(l);for(const k of T)delete this._sourceCaches[k.id],delete this._updatedSources[k.id],k.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:k.getSource().id})),k.setEventedParent(null),k.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],g.setEventedParent(null),g.onRemove&&g.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,g){this._checkLoaded(),this.getSource(l).setData(g),this._changed=!0}getSource(l){const g=this._getSourceCache(l);return g&&g.getSource()}_getSources(){const l=[];for(const g in this._otherSourceCaches){const T=this._getSourceCache(g);T&&l.push(T.getSource())}return l}addLayer(l,g,T={}){this._checkLoaded();const k=l.id;if(this.getLayer(k))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${k}" already exists on this map`)));let R;if(l.type==="custom"){if(vl(this,s.validateCustomStyleLayer(l)))return;R=s.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(k,l.source),l=s.clone$1(l),l=s.extend(l,{source:k})),this._validate(s.validateLayer,`layers.${k}`,l,{arrayIndex:-1},T))return;R=s.createStyleLayer(l),this._validateLayer(R),R.setEventedParent(this,{layer:{id:k}}),this._serializedLayers[R.id]=R.serialize(),this._updateLayerCount(R,!0)}const K=g?this._order.indexOf(g):this._order.length;if(g&&K===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${g}" does not exist on this map.`)));this._order.splice(K,0,k),this._layerOrderChanged=!0,this._layers[k]=R;const X=this._getLayerSourceCache(R);if(this._removedLayers[k]&&R.source&&X&&R.type!=="custom"){const ee=this._removedLayers[k];delete this._removedLayers[k],ee.type!==R.type?this._updatedSources[R.source]="clear":(this._updatedSources[R.source]="reload",X.pause())}this._updateLayer(R),R.onAdd&&R.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,g){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===g)return;const T=this._order.indexOf(l);this._order.splice(T,1);const k=g?this._order.indexOf(g):this._order.length;g&&k===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${g}" does not exist on this map.`))):(this._order.splice(k,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const g=this._layers[l];if(!g)return void this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));g.setEventedParent(null),this._updateLayerCount(g,!1);const T=this._order.indexOf(l);this._order.splice(T,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=g,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],g.onRemove&&g.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const g in this._layers)if(this._layers[g].type===l)return!0;return!1}setLayerZoomRange(l,g,T){this._checkLoaded();const k=this.getLayer(l);k?k.minzoom===g&&k.maxzoom===T||(g!=null&&(k.minzoom=g),T!=null&&(k.maxzoom=T),this._updateLayer(k)):this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,g,T={}){this._checkLoaded();const k=this.getLayer(l);if(k){if(!U(k.filter,g))return g==null?(k.filter=void 0,void this._updateLayer(k)):void(this._validate(s.validateFilter,`layers.${k.id}.filter`,g,{layerType:k.type},T)||(k.filter=s.clone$1(g),this._updateLayer(k)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const g=this.getLayer(l);return g&&s.clone$1(g.filter)}setLayoutProperty(l,g,T,k={}){this._checkLoaded();const R=this.getLayer(l);R?U(R.getLayoutProperty(g),T)||(R.setLayoutProperty(g,T,k),this._updateLayer(R)):this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,g){const T=this.getLayer(l);if(T)return T.getLayoutProperty(g);this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,g,T,k={}){this._checkLoaded();const R=this.getLayer(l);R?U(R.getPaintProperty(g),T)||(R.setPaintProperty(g,T,k)&&this._updateLayer(R),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,g){const T=this.getLayer(l);return T&&T.getPaintProperty(g)}setFeatureState(l,g){this._checkLoaded();const T=l.source,k=l.sourceLayer,R=this.getSource(T);if(!R)return void this.fire(new s.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const K=R.type;if(K==="geojson"&&k)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(K==="vector"&&!k)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const X=this._getSourceCaches(T);for(const ee of X)ee.setFeatureState(k,l.id,g)}removeFeatureState(l,g){this._checkLoaded();const T=l.source,k=this.getSource(T);if(!k)return void this.fire(new s.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const R=k.type,K=R==="vector"?l.sourceLayer:void 0;if(R==="vector"&&!K)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(g&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const X=this._getSourceCaches(T);for(const ee of X)ee.removeFeatureState(K,l.id,g)}getFeatureState(l){this._checkLoaded();const g=l.source,T=l.sourceLayer,k=this.getSource(g);if(k){if(k.type!=="vector"||T)return l.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(g)[0].getFeatureState(T,l.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const g in this._sourceCaches){const T=this._sourceCaches[g].getSource();l[T.id]||(l[T.id]=T.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},g=>g!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0;const g=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&g&&g.getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",g.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const g=K=>this._layers[K].type==="fill-extrusion",T={},k=[];for(let K=this._order.length-1;K>=0;K--){const X=this._order[K];if(g(X)){T[X]=K;for(const ee of l){const ce=ee[X];if(ce)for(const le of ce)k.push(le)}}}k.sort((K,X)=>X.intersectionZ-K.intersectionZ);const R=[];for(let K=this._order.length-1;K>=0;K--){const X=this._order[K];if(g(X))for(let ee=k.length-1;ee>=0;ee--){const ce=k[ee].feature;if(T[ce.layer.id]<K)break;R.push(ce),k.pop()}else for(const ee of l){const ce=ee[X];if(ce)for(const le of ce)R.push(le.feature)}}return R}queryRenderedFeatures(l,g,T){g&&g.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",g.filter,null,g);const k={};if(g&&g.layers){if(!Array.isArray(g.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ee of g.layers){const ce=this._layers[ee];if(!ce)return this.fire(new s.ErrorEvent(new Error(`The layer '${ee}' does not exist in the map's style and cannot be queried for features.`))),[];k[ce.source]=!0}}const R=[];g.availableImages=this._availableImages;const K=g&&g.layers?g.layers.some(ee=>{const ce=this.getLayer(ee);return ce&&ce.is3D()}):this.has3DLayers(),X=Bi.createFromScreenPoints(l,T);for(const ee in this._sourceCaches){const ce=this._sourceCaches[ee].getSource().id;g.layers&&!k[ce]||R.push(je(this._sourceCaches[ee],this._layers,this._serializedLayers,X,g,T,K,!!this.map._showQueryGeometry))}return this.placement&&R.push(function(ee,ce,le,ve,Qe,We,et){const tt={},rt=We.queryRenderedSymbols(ve),Be=[];for(const Ye of Object.keys(rt).map(Number))Be.push(et[Ye]);Be.sort(_t);for(const Ye of Be){const lt=Ye.featureIndex.lookupSymbolFeatures(rt[Ye.bucketInstanceId],ce,Ye.bucketIndex,Ye.sourceLayerIndex,Qe.filter,Qe.layers,Qe.availableImages,ee);for(const At in lt){const It=tt[At]=tt[At]||[],Tt=lt[At];Tt.sort((Mt,Ht)=>{const Nt=Ye.featureSortOrder;if(Nt){const cn=Nt.indexOf(Mt.featureIndex);return Nt.indexOf(Ht.featureIndex)-cn}return Ht.featureIndex-Mt.featureIndex});for(const Mt of Tt)It.push(Mt)}}for(const Ye in tt)tt[Ye].forEach(lt=>{const At=lt.feature,It=le(ee[Ye]);if(!It)return;const Tt=It.getFeatureState(At.layer["source-layer"],At.id);At.source=At.layer.source,At.layer["source-layer"]&&(At.sourceLayer=At.layer["source-layer"]),At.state=Tt});return tt}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),X.screenGeometry,g,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(R)}querySourceFeatures(l,g){g&&g.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",g.filter,null,g);const T=this._getSourceCaches(l);let k=[];for(const R of T)k=k.concat(Ke(R,g));return k}addSourceType(l,g,T){return Is.getSourceType(l)?T(new Error(`A source type called "${l}" already exists.`)):(Is.setSourceType(l,g),g.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:g.workerSourceURL},T):T(null,null))}getLight(){return this.light.getLight()}setLight(l,g={}){this._checkLoaded();const T=this.light.getLight();let k=!1;for(const K in l)if(!U(l[K],T[K])){k=!0;break}if(!k)return;const R=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,g),this.light.updateTransitions(R)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,g=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let T=l;if(g===1){if(typeof T.source=="object"){const k="terrain-dem-src";this.addSource(k,T.source),T=s.clone$1(T),T=s.extend(T,{source:k})}if(this._validate(s.validateTerrain,"terrain",T))return}if(!this.terrain||this.terrain&&g!==this.terrain.drapeRenderMode){if(!T)return;this._createTerrain(T,g)}else{const k=this.terrain,R=k.get();for(const K of Object.keys(s.spec.terrain))!T.hasOwnProperty(K)&&s.spec.terrain[K].default&&(T[K]=s.spec.terrain[K].default);for(const K in T)if(!U(T[K],R[K])){k.set(T),this.stylesheet.terrain=T;const X=this._setTransitionParameters({duration:0});k.updateTransitions(X);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const g=this.fog=new Qt(l,this.map.transform);this.stylesheet.fog=l;const T=this._setTransitionParameters({duration:0});g.updateTransitions(T)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const g=this.fog,T=g.get();Object.keys(l).length===0&&g.set(l);for(const k in l)if(!U(l[k],T[k])){g.set(l),this.stylesheet.fog=l;const R=this._setTransitionParameters({duration:0});g.updateTransitions(R);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:s.exported.now(),transition:s.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(T=>this.isLayerDraped(this._layers[T])),g=this._order.filter(T=>!this.isLayerDraped(this._layers[T]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...g)}_createTerrain(l,g){const T=this.terrain=new Gt(l,g);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const k=this._setTransitionParameters({duration:0});T.updateTransitions(k)}_force3DLayerUpdate(){for(const l in this._layers){const g=this._layers[l];g.type==="fill-extrusion"&&this._updateLayer(g)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const g=this._layers[l];g.type==="symbol"&&this._updateLayer(g)}}_validate(l,g,T,k,R={}){return(!R||R.validate!==!1)&&vl(this,l.call(s.validateStyle,s.extend({key:g,style:this.serialize(),value:T,styleSpec:s.spec},k)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const g=this._getSourceCaches(l);for(const T of g)T.clearTiles()}_reloadSource(l){const g=this._getSourceCaches(l);for(const T of g)T.resume(),T.reload()}_reloadSources(){for(const l of this._getSources())l.reload&&l.reload()}_updateSources(l){for(const g in this._sourceCaches)this._sourceCaches[g].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const g=this._sourceCaches[l];g.resume(),g.reload()}}_updatePlacement(l,g,T,k,R=!1){let K=!1,X=!1;const ee={};for(const ce of this._order){const le=this._layers[ce];if(le.type!=="symbol")continue;if(!ee[le.source]){const Qe=this._getLayerSourceCache(le);if(!Qe)continue;ee[le.source]=Qe.getRenderableIds(!0).map(We=>Qe.getTileByID(We)).sort((We,et)=>et.tileID.overscaledZ-We.tileID.overscaledZ||(We.tileID.isLessThan(et.tileID)?-1:1))}const ve=this.crossTileSymbolIndex.addLayer(le,ee[le.source],l.center.lng,l.projection);K=K||ve}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),R=R||this._layerOrderChanged||T===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(R||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),l.zoom))&&(this.pauseablePlacement=new Rr(l,this._order,R,g,T,k,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ee),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),X=!0),K&&this.pauseablePlacement.placement.setStale()),X||K)for(const ce of this._order){const le=this._layers[ce];le.type==="symbol"&&this.placement.updateLayerOpacities(le,ee[le.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,g,T){this.imageManager.getImages(g.icons,T),this._updateTilesForChangedImages();const k=R=>{R&&R.setDependencies(g.tileID.key,g.type,g.icons)};k(this._otherSourceCaches[g.source]),k(this._symbolSourceCaches[g.source])}getGlyphs(l,g,T){this.glyphManager.getGlyphs(g.stacks,T)}getResource(l,g,T){return s.makeRequest(g,T)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const g=[];return this._otherSourceCaches[l]&&g.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&g.push(this._symbolSourceCaches[l]),g}_isSourceCacheLoaded(l){const g=this._getSourceCaches(l);return g.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):g.every(T=>T.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Is.getSourceType=function(b){return Pe[b]},Is.setSourceType=function(b,l){Pe[b]=l},Is.registerForPluginStateChange=s.registerForPluginStateChange;var za=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,wc="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Nl=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,ks=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Cc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let uh={},zu={};const hh=[];ra(za,hh),ra(Nl,hh),ra(ks,hh),ra(Cc,hh),uh=to("",Nl),zu=to(Cc,ks);const Ph=to(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Fh=za,ps=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var dh={background:to(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:to(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:to(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:to("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:to(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:to(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:to("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:to("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:to("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:to(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:to(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:to(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:to(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:to(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:to(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:to(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:to(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:to(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:to(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:to(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:to(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:to(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:to(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:to(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:to(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:to(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,wc),skyboxGradient:to(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,wc),skyboxCapture:to(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:to(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:to(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function ra(b,l){const g=b.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let T of g)if(T=T.trim(),T[0]==="#"&&T.includes("if")&&!T.includes("endif")){T=T.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const k=T.split(" ");for(const R of k)l.includes(R)||l.push(R)}}function to(b,l){const g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,T=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),k={},R=[...hh];return ra(b,R),ra(l,R),{fragmentSource:b=b.replace(g,(K,X,ee,ce,le)=>(k[le]=!0,X==="define"?`
#ifndef HAS_UNIFORM_u_${le}
varying ${ee} ${ce} ${le};
#else
uniform ${ee} ${ce} u_${le};
#endif
`:`
#ifdef HAS_UNIFORM_u_${le}
    ${ee} ${ce} ${le} = u_${le};
#endif
`)),vertexSource:l=l.replace(g,(K,X,ee,ce,le)=>{const ve=ce==="float"?"vec2":"vec4",Qe=le.match(/color/)?"color":ve;return k[le]?X==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
attribute ${ee} ${ve} a_${le};
varying ${ee} ${ce} ${le};
#else
uniform ${ee} ${ce} u_${le};
#endif
`:Qe==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = a_${le};
#else
    ${ee} ${ce} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = unpack_mix_${Qe}(a_${le}, u_${le}_t);
#else
    ${ee} ${ce} ${le} = u_${le};
#endif
`:X==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
attribute ${ee} ${ve} a_${le};
#else
uniform ${ee} ${ce} u_${le};
#endif
`:Qe==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${ee} ${ce} ${le} = a_${le};
#else
    ${ee} ${ce} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${ee} ${ce} ${le} = unpack_mix_${Qe}(a_${le}, u_${le}_t);
#else
    ${ee} ${ce} ${le} = u_${le};
#endif
`}),staticAttributes:T,usedDefines:R}}class pu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,g,T,k,R,K,X){this.context=l;let ee=this.boundPaintVertexBuffers.length!==k.length;for(let le=0;!ee&&le<k.length;le++)this.boundPaintVertexBuffers[le]!==k[le]&&(ee=!0);let ce=this.boundDynamicVertexBuffers.length!==X.length;for(let le=0;!ce&&le<X.length;le++)this.boundDynamicVertexBuffers[le]!==X[le]&&(ce=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==g||this.boundLayoutVertexBuffer!==T||ee||ce||this.boundIndexBuffer!==R||this.boundVertexOffset!==K)this.freshBind(g,T,k,R,K,X);else{l.bindVertexArrayOES.set(this.vao);for(const le of X)le&&le.bind();R&&R.dynamicDraw&&R.bind()}}freshBind(l,g,T,k,R,K){let X;const ee=l.numAttributes,ce=this.context,le=ce.gl;if(ce.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ce.extVertexArrayObject.createVertexArrayOES(),ce.bindVertexArrayOES.set(this.vao),X=0,this.boundProgram=l,this.boundLayoutVertexBuffer=g,this.boundPaintVertexBuffers=T,this.boundIndexBuffer=k,this.boundVertexOffset=R,this.boundDynamicVertexBuffers=K;else{X=ce.currentNumAttributes||0;for(let ve=ee;ve<X;ve++)le.disableVertexAttribArray(ve)}g.enableAttributes(le,l),g.bind(),g.setVertexAttribPointers(le,l,R);for(const ve of T)ve.enableAttributes(le,l),ve.bind(),ve.setVertexAttribPointers(le,l,R);for(const ve of K)ve&&(ve.enableAttributes(le,l),ve.bind(),ve.setVertexAttribPointers(le,l,R));k&&k.bind(),ce.currentNumAttributes=ee}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ql(b,l){const g=Math.pow(2,l.canonical.z),T=l.canonical.y;return[new s.MercatorCoordinate(0,T/g).toLngLat().lat,new s.MercatorCoordinate(0,(T+1)/g).toLngLat().lat]}function mu(b,l,g,T,k,R,K){const X=b.context,ee=X.gl,ce=g.fbo;if(!ce)return;b.prepareDrawTile();const le=b.useProgram("hillshade");X.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,ce.colorAttachment.get());const ve=((tt,rt,Be,Ye)=>{const lt=Be.paint.get("hillshade-shadow-color"),At=Be.paint.get("hillshade-highlight-color"),It=Be.paint.get("hillshade-accent-color");let Tt=Be.paint.get("hillshade-illumination-direction")*(Math.PI/180);Be.paint.get("hillshade-illumination-anchor")==="viewport"&&(Tt-=tt.transform.angle);const Mt=!tt.options.moving;return{u_matrix:Ye||tt.transform.calculateProjMatrix(rt.tileID.toUnwrapped(),Mt),u_image:0,u_latrange:Ql(0,rt.tileID),u_light:[Be.paint.get("hillshade-exaggeration"),Tt],u_shadow:lt,u_highlight:At,u_accent:It}})(b,g,T,b.terrain?l.projMatrix:null);b.prepareDrawProgram(X,le,l.toUnwrapped());const{tileBoundsBuffer:Qe,tileBoundsIndexBuffer:We,tileBoundsSegments:et}=b.getTileBoundsBuffers(g);le.draw(X,ee.TRIANGLES,k,R,K,s.CullFaceMode.disabled,ve,T.id,Qe,We,et)}function gu(b,l,g){if(!l.needsDEMTextureUpload)return;const T=b.context,k=T.gl;T.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||b.getTileTexture(g.stride);const R=g.getPixels();l.demTexture?l.demTexture.update(R,{premultiply:!1}):l.demTexture=new s.Texture(T,R,k.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function Vo(b,l,g,T,k,R){const K=b.context,X=K.gl;if(!l.dem)return;const ee=l.dem;if(K.activeTexture.set(X.TEXTURE1),gu(b,l,ee),!l.demTexture)return;l.demTexture.bind(X.NEAREST,X.CLAMP_TO_EDGE);const ce=ee.dim;K.activeTexture.set(X.TEXTURE0);let le=l.fbo;if(!le){const et=new s.Texture(K,{width:ce,height:ce,data:null},X.RGBA);et.bind(X.LINEAR,X.CLAMP_TO_EDGE),le=l.fbo=K.createFramebuffer(ce,ce,!0),le.colorAttachment.set(et.texture)}K.bindFramebuffer.set(le.framebuffer),K.viewport.set([0,0,ce,ce]);const{tileBoundsBuffer:ve,tileBoundsIndexBuffer:Qe,tileBoundsSegments:We}=b.getMercatorTileBoundsBuffers();b.useProgram("hillshadePrepare").draw(K,X.TRIANGLES,T,k,R,s.CullFaceMode.disabled,((et,tt)=>{const rt=tt.stride,Be=s.create();return s.ortho(Be,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(Be,Be,[0,-s.EXTENT,0]),{u_matrix:Be,u_image:1,u_dimension:[rt,rt],u_zoom:et.overscaledZ,u_unpack:tt.unpackVector}})(l.tileID,ee),g.id,ve,Qe,We),l.needsHillshadePrepare=!1}const $l=b=>({u_matrix:new s.UniformMatrix4f(b),u_image0:new s.Uniform1i(b),u_skirt_height:new s.Uniform1f(b)}),xl=(b,l)=>({u_matrix:b,u_image0:0,u_skirt_height:l}),rs=(b,l,g,T,k,R,K,X,ee,ce,le,ve,Qe,We,et)=>({u_proj_matrix:Float32Array.from(b),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(T),u_merc_matrix:g,u_zoom_transition:k,u_merc_center:R,u_image0:0,u_frustum_tl:K,u_frustum_tr:X,u_frustum_br:ee,u_frustum_bl:ce,u_globe_pos:le,u_globe_radius:ve,u_viewport:Qe,u_grid_matrix:et?Float32Array.from(et):new Float32Array(9),u_skirt_height:We});function sc(b,l){return b!=null&&l!=null&&!(!b.hasData()||!l.hasData())&&b.demTexture!=null&&l.demTexture!=null&&b.tileID.key!==l.tileID.key}const Or=new class{constructor(){this.operations={}}newMorphing(b,l,g,T,k){if(b in this.operations){const R=this.operations[b];R.to.tileID.key!==g.tileID.key&&(R.queued=g)}else this.operations[b]={startTime:T,phase:0,duration:k,from:l,to:g,queued:null}}getMorphValuesForProxy(b){if(!(b in this.operations))return null;const l=this.operations[b];return{from:l.from,to:l.to,phase:l.phase}}update(b){for(const l in this.operations){const g=this.operations[l];for(g.phase=(b-g.startTime)/g.duration;g.phase>=1||!this._validOp(g);)if(!this._nextOp(g,b)){delete this.operations[l];break}}}_nextOp(b,l){return!!b.queued&&(b.from=b.to,b.to=b.queued,b.queued=null,b.phase=0,b.startTime=l,!0)}_validOp(b){return b.from.hasData()&&b.to.hasData()}},bo={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Zo(b){return 6*Math.pow(1.5,22-b)}function es(b,l){const g=1<<b.z;return!l&&(b.x===0||b.x===g-1)||b.y===0||b.y===g-1}const ya=b=>({u_matrix:b});function bl(b,l,g,T,k){if(k>0){const R=s.exported.now(),K=(R-b.timeAdded)/k,X=l?(R-l.timeAdded)/k:-1,ee=g.getSource(),ce=T.coveringZoomLevel({tileSize:ee.tileSize,roundZoom:ee.roundZoom}),le=!l||Math.abs(l.tileID.overscaledZ-ce)>Math.abs(b.tileID.overscaledZ-ce),ve=le&&b.refreshedUponExpiration?1:s.clamp(le?K:1-X,0,1);return b.refreshedUponExpiration&&K>=1&&(b.refreshedUponExpiration=!1),l?{opacity:1,mix:1-ve}:{opacity:ve,mix:0}}return{opacity:1,mix:0}}class Ru extends s.SourceCache{constructor(l){const g={type:"raster-dem",maxzoom:l.transform.maxZoom},T=new Xn(Jt(),null),k=pe("mock-dem",g,T,l.style);super("mock-dem",k,!1),k.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,g){l.state="loaded",g(null)}}class Ra extends s.SourceCache{constructor(l){const g=pe("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new Xn(Jt(),null),l.style);super("proxy",g,!1),g.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,g,T){if(l.freezeTileCoverage)return;this.transform=l;const k=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((R,K)=>{if(R[K.key]="",!this._tiles[K.key]){const X=new s.Tile(K,this._source.tileSize*K.overscaleFactor(),l.tileZoom);X.state="loaded",this._tiles[K.key]=X}return R},{});for(const R in this._tiles)R in k||(this.freeFBO(R),this._tiles[R].unloadVectorData(),delete this._tiles[R])}freeFBO(l){const g=this.proxyCachedFBO[l];if(g!==void 0){const T=Object.values(g);this.renderCachePool.push(...T),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ou extends s.OverscaledTileID{constructor(l,g,T){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=g,this.projMatrix=T}}class Ah extends s.Elevation{constructor(l,g){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[T,k,R]=function(ee){const ce=new s.StructArrayLayout2i4,le=new s.StructArrayLayout3ui6,ve=131;ce.reserve(17161),le.reserve(33800);const Qe=s.EXTENT/128,We=s.EXTENT+Qe/2,et=We+Qe;for(let rt=-Qe;rt<et;rt+=Qe)for(let Be=-Qe;Be<et;Be+=Qe){const Ye=Be<0||Be>We||rt<0||rt>We?24575:0,lt=s.clamp(Math.round(Be),0,s.EXTENT),At=s.clamp(Math.round(rt),0,s.EXTENT);ce.emplaceBack(lt+Ye,At)}const tt=(rt,Be)=>{const Ye=Be*ve+rt;le.emplaceBack(Ye+1,Ye,Ye+ve),le.emplaceBack(Ye+ve,Ye+ve+1,Ye+1)};for(let rt=1;rt<129;rt++)for(let Be=1;Be<129;Be++)tt(Be,rt);return[0,129].forEach(rt=>{for(let Be=0;Be<130;Be++)tt(Be,rt),tt(rt,Be)}),[ce,le,32768]}(),K=l.context;this.gridBuffer=K.createVertexBuffer(T,s.posAttributes.members),this.gridIndexBuffer=K.createIndexBuffer(k),this.gridSegments=s.SegmentVector.simpleSegment(0,0,T.length,k.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,T.length,R),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ra(g.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const X=K.gl;this._overlapStencilMode=new s.StencilMode({func:X.GEQUAL,mask:255},0,255,X.KEEP,X.KEEP,X.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=g,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Ru(g.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,g,T){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const k=l.terrain.properties;this.sourceCache=l.terrain.drapeRenderMode===0?this._mockSourceCache:l._getSourceCache(k.get("source")),this._exaggeration=k.get("exaggeration");const R=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const K=this.getScaledDemTileSize();this.sourceCache.update(g,K,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,R(),this._initializing=!0),R(),g.updateElevation(!0,T),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(g),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||l.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const g=this.proxySourceCache,T=this.painter.transform;this._initializing&&(this._initializing=T._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(T.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const k=this.proxyCoords=g.getIds().map(ee=>{const ce=g.getTileByID(ee).tileID;return ce.projMatrix=T.calculateProjMatrix(ce.toUnwrapped()),ce});(function(ee,ce){const le=ce.transform.pointCoordinate(ce.transform.getCameraPoint()),ve=new s.Point(le.x,le.y);ee.sort((Qe,We)=>{if(We.overscaledZ-Qe.overscaledZ)return We.overscaledZ-Qe.overscaledZ;const et=new s.Point(Qe.canonical.x+(1<<Qe.canonical.z)*Qe.wrap,Qe.canonical.y),tt=new s.Point(We.canonical.x+(1<<We.canonical.z)*We.wrap,We.canonical.y),rt=ve.mult(1<<Qe.canonical.z);return rt.x-=.5,rt.y-=.5,rt.distSqr(et)-rt.distSqr(tt)})})(k,this.painter),this._previousZoom=T.zoom;const R=this.proxyToSource||{};this.proxyToSource={},k.forEach(ee=>{this.proxyToSource[ee.key]={}}),this.terrainTileForTile={};const K=this._style._sourceCaches;for(const ee in K){const ce=K[ee];if(!ce.used||(ce!==this.sourceCache&&this.resetTileLookupCache(ce.id),this._setupProxiedCoordsForOrtho(ce,l[ee],R),ce.usedForTerrain))continue;const le=l[ee];ce.getSource().reparseOverscaled&&this._assignTerrainTiles(le)}this.proxiedCoords[g.id]=k.map(ee=>new Ou(ee,ee.key,this.orthoMatrix)),this._assignTerrainTiles(k),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(R),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const X={};this._visibleDemTiles=[];for(const ee of this.proxyCoords){const ce=this.terrainTileForTile[ee.key];if(!ce)continue;const le=ce.tileID.key;le in X||(this._visibleDemTiles.push(ce),X[le]=le)}}_assignTerrainTiles(l){this._initializing||l.forEach(g=>{if(this.terrainTileForTile[g.key])return;const T=this._findTileCoveringTileID(g,this.sourceCache);T&&(this.terrainTileForTile[g.key]=T)})}_prepareDEMTextures(){const l=this.painter.context,g=l.gl;for(const T in this.terrainTileForTile){const k=this.terrainTileForTile[T],R=k.dem;!R||k.demTexture&&!k.needsDEMTextureUpload||(l.activeTexture.set(g.TEXTURE1),gu(this.painter,k,R))}}_prepareDemTileUniforms(l,g,T,k){if(!g||g.demTexture==null)return!1;const R=l.tileID.canonical,K=Math.pow(2,g.tileID.canonical.z-R.z),X=k||"";return T[`u_dem_tl${X}`]=[R.x*K%1,R.y*K%1],T[`u_dem_scale${X}`]=K,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,g=l.gl;if(!this._emptyDepthBufferTexture){const T=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(l,T,g.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const g=this._visibleDemTiles.reduce((T,k)=>{if(!k.dem)return T;const R=k.dem.tree.minimums[0];return R>0&&l++,T+R},0);return l?g/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,g=l.gl;l.activeTexture.set(g.TEXTURE2);const T=this._getLoadedAreaMinimum(),k=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(T,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let R=this._emptyDEMTexture;return R?R.update(k,{premultiply:!1}):R=this._emptyDEMTexture=new s.Texture(l,k,g.RGBA,{premultiply:!1}),R}setupElevationDraw(l,g,T){const k=this.painter.context,R=k.gl,K=(X=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(X),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var X;K.u_dem_size=this.sourceCache.getSource().tileSize,K.u_exaggeration=this.exaggeration();let ee=null,ce=null,le=1;if(T&&T.morphing&&this._useVertexMorphing){const ve=T.morphing.srcDemTile,Qe=T.morphing.dstDemTile;le=T.morphing.phase,ve&&Qe&&(this._prepareDemTileUniforms(l,ve,K,"_prev")&&(ce=ve),this._prepareDemTileUniforms(l,Qe,K)&&(ee=Qe))}if(ce&&ee?(k.activeTexture.set(R.TEXTURE2),ee.demTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE,R.NEAREST),k.activeTexture.set(R.TEXTURE4),ce.demTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE,R.NEAREST),K.u_dem_lerp=le):(ee=this.terrainTileForTile[l.tileID.key],k.activeTexture.set(R.TEXTURE2),(this._prepareDemTileUniforms(l,ee,K)?ee.demTexture:this.emptyDEMTexture).bind(R.NEAREST,R.CLAMP_TO_EDGE)),k.activeTexture.set(R.TEXTURE3),T&&T.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE),this._depthFBO&&(K.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE),K.u_depth_size_inv=[1,1]),T&&T.useMeterToDem&&ee){const ve=(1<<ee.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;K.u_meter_to_dem=ve}if(T&&T.labelPlaneMatrixInv&&(K.u_label_plane_matrix_inv=T.labelPlaneMatrixInv),g.setTerrainUniformValues(k,K),this.painter.transform.projection.name==="globe"){const ve=this.globeUniformValues(this.painter.transform,l.tileID.canonical,T&&T.useDenormalizedUpVectorScale);g.setGlobeUniformValues(k,ve)}}globeUniformValues(l,g,T){const k=l.projection;return{u_tile_tl_up:k.upVector(g,0,0),u_tile_tr_up:k.upVector(g,s.EXTENT,0),u_tile_br_up:k.upVector(g,s.EXTENT,s.EXTENT),u_tile_bl_up:k.upVector(g,0,s.EXTENT),u_tile_up_scale:T?s.globeMetersToEcef(1):k.upVectorScale(g,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const g=this.painter,T=this.painter.context;l.length!==0&&(T.bindFramebuffer.set(null),T.viewport.set([0,0,g.width,g.height]),g.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(k,R,K,X,ee){if(k.transform.projection.name==="globe")(function(ce,le,ve,Qe,We){const et=ce.context,tt=et.gl;let rt,Be;const Ye=ce.options.showTerrainWireframe?2:0,lt=ce.transform,At=s.globeUseCustomAntiAliasing(ce,et,lt),It=(Zn,nn)=>{if(Be===Zn)return;const Mn=[bo[Zn],"PROJECTION_GLOBE_VIEW"];At&&Mn.push("CUSTOM_ANTIALIASING"),nn&&Mn.push(bo[Ye]),rt=ce.useProgram("globeRaster",null,Mn),Be=Zn},Tt=ce.colorModeForRenderPass(),Mt=new s.DepthMode(tt.LEQUAL,s.DepthMode.ReadWrite,ce.depthRangeFor3D);Or.update(We);const Ht=s.calculateGlobeMercatorMatrix(lt),Nt=[s.mercatorXfromLng(lt.center.lng),s.mercatorYfromLat(lt.center.lat)],cn=Ye?[!1,!0]:[!1],Nn=ce.globeSharedBuffers,Vt=[lt.width*s.exported.devicePixelRatio,lt.height*s.exported.devicePixelRatio],Pn=Float32Array.from(lt.globeMatrix),fn={useDenormalizedUpVectorScale:!0};if(cn.forEach(Zn=>{const nn=ce.transform,Mn=Zo(nn.zoom)*le.exaggeration();Be=-1;const Yn=Zn?tt.LINES:tt.TRIANGLES;for(const Vn of Qe){const si=ve.getTile(Vn),ar=s.StencilMode.disabled,Tr=le.prevTerrainTileForTile[Vn.key],Di=le.terrainTileForTile[Vn.key];sc(Tr,Di)&&Or.newMorphing(Vn.key,Tr,Di,We,250),et.activeTexture.set(tt.TEXTURE0),si.texture.bind(tt.LINEAR,tt.CLAMP_TO_EDGE);const yr=Or.getMorphValuesForProxy(Vn.key),ro=yr?1:0;yr&&s.extend$1(fn,{morphing:{srcDemTile:yr.from,dstDemTile:yr.to,phase:s.easeCubicInOut(yr.phase)}});const co=s.tileCornersToBounds(Vn.canonical),Yi=s.getLatitudinalLod(co.getCenter().lat),Ro=s.getGridMatrix(Vn.canonical,co,Yi,nn.worldSize/nn._pixelsPerMercatorPixel),gs=s.globeNormalizeECEF(s.globeTileBounds(Vn.canonical)),qo=rs(nn.projMatrix,Pn,Ht,gs,s.globeToMercatorTransition(nn.zoom),Nt,nn.frustumCorners.TL,nn.frustumCorners.TR,nn.frustumCorners.BR,nn.frustumCorners.BL,nn.globeCenterInViewSpace,nn.globeRadius,Vt,Mn,Ro);if(It(ro,Zn),le.setupElevationDraw(si,rt,fn),ce.prepareDrawProgram(et,rt,Vn.toUnwrapped()),Nn){const[Xo,qa,Oa]=Zn?Nn.getWirefameBuffers(ce.context,Yi):Nn.getGridBuffers(Yi,Mn!==0);rt.draw(et,Yn,Mt,ar,Tt,s.CullFaceMode.backCCW,qo,"globe_raster",Xo,qa,Oa)}}}),Nn){const Zn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];At&&Zn.push("CUSTOM_ANTIALIASING"),rt=ce.useProgram("globeRaster",null,Zn);for(const nn of Qe){const{x:Mn,y:Yn,z:Vn}=nn.canonical,si=Yn===0,ar=Yn===(1<<Vn)-1,[Tr,Di,yr,ro]=Nn.getPoleBuffers(Vn);if(ro&&(si||ar)){const co=ve.getTile(nn);et.activeTexture.set(tt.TEXTURE0),co.texture.bind(tt.LINEAR,tt.CLAMP_TO_EDGE);let Yi=s.globePoleMatrixForTile(Vn,Mn,lt);const Ro=s.globeNormalizeECEF(s.globeTileBounds(nn.canonical)),gs=(qo,Xo)=>qo.draw(et,tt.TRIANGLES,Mt,s.StencilMode.disabled,Tt,s.CullFaceMode.disabled,rs(lt.projMatrix,Yi,Yi,Ro,0,Nt,lt.frustumCorners.TL,lt.frustumCorners.TR,lt.frustumCorners.BR,lt.frustumCorners.BL,lt.globeCenterInViewSpace,lt.globeRadius,Vt,0),"globe_pole_raster",Xo,yr,ro);le.setupElevationDraw(co,rt,fn),ce.prepareDrawProgram(et,rt,nn.toUnwrapped()),si&&gs(rt,Tr),ar&&(Yi=s.scale(s.create(),Yi,[1,-1,1]),gs(rt,Di))}}}})(k,R,K,X,ee);else{const ce=k.context,le=ce.gl;let ve,Qe;const We=k.options.showTerrainWireframe?2:0,et=(lt,At)=>{if(Qe===lt)return;const It=[bo[lt]];At&&It.push(bo[We]),ve=k.useProgram("terrainRaster",null,It),Qe=lt},tt=k.colorModeForRenderPass(),rt=new s.DepthMode(le.LEQUAL,s.DepthMode.ReadWrite,k.depthRangeFor3D);Or.update(ee);const Be=k.transform,Ye=Zo(Be.zoom)*R.exaggeration();(We?[!1,!0]:[!1]).forEach(lt=>{Qe=-1;const At=lt?le.LINES:le.TRIANGLES,[It,Tt]=lt?R.getWirefameBuffer():[R.gridIndexBuffer,R.gridSegments];for(const Mt of X){const Ht=K.getTile(Mt),Nt=s.StencilMode.disabled,cn=R.prevTerrainTileForTile[Mt.key],Nn=R.terrainTileForTile[Mt.key];sc(cn,Nn)&&Or.newMorphing(Mt.key,cn,Nn,ee,250),ce.activeTexture.set(le.TEXTURE0),Ht.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE,le.LINEAR_MIPMAP_NEAREST);const Vt=Or.getMorphValuesForProxy(Mt.key),Pn=Vt?1:0;let fn;Vt&&(fn={morphing:{srcDemTile:Vt.from,dstDemTile:Vt.to,phase:s.easeCubicInOut(Vt.phase)}});const Zn=xl(Mt.projMatrix,es(Mt.canonical,Be.renderWorldCopies)?Ye/10:Ye);et(Pn,lt),R.setupElevationDraw(Ht,ve,fn),k.prepareDrawProgram(ce,ve,Mt.toUnwrapped()),ve.draw(ce,At,rt,Nt,tt,s.CullFaceMode.backCCW,Zn,"terrain_raster",R.gridBuffer,It,Tt)}})}}(g,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,g.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const g=this.painter,T=this.painter.context,k=this.proxySourceCache,R=this.proxiedCoords[k.id],K=this._drapedRenderBatches.shift(),X=[],ee=g.style.order;let ce=0;for(const le of R){const ve=k.getTileByID(le.proxyTileKey),Qe=k.proxyCachedFBO[le.key]?k.proxyCachedFBO[le.key][l]:void 0,We=Qe!==void 0?k.renderCache[Qe]:this.pool[ce++],et=Qe!==void 0;if(ve.texture=We.tex,et&&!We.dirty){X.push(ve.tileID);continue}let tt;T.bindFramebuffer.set(We.fb.framebuffer),this.renderedToTile=!1,We.dirty&&(T.clear({color:s.Color.transparent,stencil:0}),We.dirty=!1);for(let rt=K.start;rt<=K.end;++rt){const Be=g.style._layers[ee[rt]];if(Be.isHidden(g.transform.zoom))continue;const Ye=g.style._getLayerSourceCache(Be),lt=Ye?this.proxyToSource[le.key][Ye.id]:[le];if(!lt)continue;const At=lt;T.viewport.set([0,0,We.fb.width,We.fb.height]),tt!==(Ye?Ye.id:null)&&(this._setupStencil(We,lt,Be,Ye),tt=Ye?Ye.id:null),g.renderLayer(g,Ye,Be,At)}this.renderedToTile?(We.dirty=!0,X.push(ve.tileID)):et||--ce,ce===5&&(ce=0,this.renderToBackBuffer(X))}return this.renderToBackBuffer(X),this.renderingToTexture=!1,T.bindFramebuffer.set(null),T.viewport.set([0,0,g.width,g.height]),K.end+1}postRender(){}renderCacheEfficiency(l){const g=l.order.length;if(g===0)return{efficiency:100};let T,k=0,R=0,K=!1;for(let X=0;X<g;++X){const ee=l._layers[l.order[X]];this._style.isLayerDraped(ee)?(K&&++k,++R):K||(K=!0,T=ee.id)}return R===0?{efficiency:100}:{efficiency:100*(1-k/R),firstUndrapedLayer:T}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(g=>g.dem).forEach(g=>{l=Math.min(l,g.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,g,T){if(!this._visibleDemTiles)return null;const k=this._visibleDemTiles.filter(R=>R.dem).map(R=>{const K=R.tileID,X=1<<K.overscaledZ,{x:ee,y:ce}=K.canonical,le=ee/X,ve=(ee+1)/X,Qe=ce/X,We=(ce+1)/X;return{minx:le,miny:Qe,maxx:ve,maxy:We,t:R.dem.tree.raycastRoot(le,Qe,ve,We,l,g,T),tile:R}});k.sort((R,K)=>(R.t!==null?R.t:Number.MAX_VALUE)-(K.t!==null?K.t:Number.MAX_VALUE));for(const R of k){if(R.t==null)return null;const K=R.tile.dem.tree.raycast(R.minx,R.miny,R.maxx,R.maxy,l,g,T);if(K!=null)return K}return null}_createFBO(){const l=this.painter.context,g=l.gl,T=this.drapeBufferSize;l.activeTexture.set(g.TEXTURE0);const k=new s.Texture(l,{width:T[0],height:T[1],data:null},g.RGBA);k.bind(g.LINEAR,g.CLAMP_TO_EDGE);const R=l.createFramebuffer(T[0],T[1],!1);return R.colorAttachment.set(k.texture),R.depthAttachment=new yt(l,R.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,T[0],T[1]),this._stencilRef=0,R.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):R.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&g.texParameterf(g.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:R,tex:k,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const g=this._style._layers[l],T=g.isHidden(this.painter.transform.zoom);return g.type==="custom"?!T&&g.shouldRedrape():!T&&g.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const T of this._style._getSources())if(T instanceof Fn){l=!0;break}if(!l)return;const g={};for(let T=0;T<this._style.order.length;++T){const k=this._style._layers[this._style.order[T]],R=this._style._getLayerSourceCache(k);if(R&&!g[R.id]&&!k.isHidden(this.painter.transform.zoom)&&k.type==="line"&&k.widthExpression()instanceof s.ZoomDependentExpression){g[R.id]=!0;for(const K of this.proxyCoords){const X=this.proxyToSource[K.key][R.id];if(X)for(const ee of X)this._clearRenderCacheForTile(R.id,ee)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const T in this._style._sourceCaches)if(this._style._sourceCaches[T]._source instanceof zn){l=!0;break}if(!l)return;const g={};for(let T=0;T<this._style.order.length;++T){const k=this._style._layers[this._style.order[T]],R=this._style._getLayerSourceCache(k);if(!R||g[R.id]||k.isHidden(this.painter.transform.zoom)||k.type!=="raster")continue;const K=k.paint.get("raster-fade-duration");for(const X of this.proxyCoords){const ee=this.proxyToSource[X.key][R.id];if(ee)for(const ce of ee){const le=bl(R.getTile(ce),R.findLoadedParent(ce,0),R,this.painter.transform,K);(le.opacity!==1||le.mix!==0)&&this._clearRenderCacheForTile(R.id,ce)}}}}_setupDrapedRenderBatches(){const l=this._style.order,g=l.length;if(g===0)return;const T=[];let k,R=0,K=this._style._layers[l[R]];for(;!this._style.isLayerDraped(K)&&K.isHidden(this.painter.transform.zoom)&&++R<g;)K=this._style._layers[l[R]];for(;R<g;++R){const X=this._style._layers[l[R]];X.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(X)?k===void 0&&(k=R):k!==void 0&&(T.push({start:k,end:R-1}),k=void 0))}k!==void 0&&T.push({start:k,end:R-1}),this._drapedRenderBatches=T}_setupRenderCache(l){const g=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,g.renderCache.length>g.renderCachePool.length){const K=Object.values(g.proxyCachedFBO);g.proxyCachedFBO={};for(let X=0;X<K.length;++X){const ee=Object.values(K[X]);g.renderCachePool.push(...ee)}}return}this._clearRasterLayersFromRenderCache();const T=this.proxyCoords,k=this._tilesDirty;for(let K=T.length-1;K>=0;K--){const X=T[K];if(g.getTileByID(X.key),g.proxyCachedFBO[X.key]!==void 0){const ee=l[X.key],ce=this.proxyToSource[X.key];let le=0;for(const ve in ce){const Qe=ce[ve],We=ee[ve];if(!We||We.length!==Qe.length||Qe.some((et,tt)=>et!==We[tt]||k[ve]&&k[ve].hasOwnProperty(et.key))){le=-1;break}++le}for(const ve in g.proxyCachedFBO[X.key])g.renderCache[g.proxyCachedFBO[X.key][ve]].dirty=le<0||le!==Object.values(ee).length}}const R=[...this._drapedRenderBatches];R.sort((K,X)=>X.end-X.start-(K.end-K.start));for(const K of R)for(const X of T){if(g.proxyCachedFBO[X.key])continue;let ee=g.renderCachePool.pop();ee===void 0&&g.renderCache.length<50&&(ee=g.renderCache.length,g.renderCache.push(this._createFBO())),ee!==void 0&&(g.proxyCachedFBO[X.key]={},g.proxyCachedFBO[X.key][K.start]=ee,g.renderCache[ee].dirty=!0)}this._tilesDirty={}}_setupStencil(l,g,T,k){if(!k||!this._sourceTilesOverlap[k.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const R=this.painter.context,K=R.gl;if(g.length<=1)return void(this._overlapStencilType=!1);let X;if(T.isTileClipped())X=g.length,this._overlapStencilMode.test={func:K.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(g[0].overscaledZ>g[g.length-1].overscaledZ))return void(this._overlapStencilType=!1);X=1,this._overlapStencilMode.test={func:K.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+X>255&&(R.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=X,this._overlapStencilMode.ref=this._stencilRef,T.isTileClipped()&&this._renderTileClippingMasks(g,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(l,g){const T=this.painter,k=this.painter.context,R=k.gl;T._tileClippingMaskIDs={},k.setColorMode(s.ColorMode.disabled),k.setDepthMode(s.DepthMode.disabled);const K=T.useProgram("clippingMask");for(const X of l){const ee=T._tileClippingMaskIDs[X.key]=--g;K.draw(k,R.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:R.ALWAYS,mask:0},ee,255,R.KEEP,R.KEEP,R.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,ya(X.projMatrix),"$clipping",T.tileExtentBuffer,T.quadTriangleIndexBuffer,T.tileExtentSegments)}}pointCoordinate(l){const g=this.painter.transform;if(l.x<0||l.x>g.width||l.y<0||l.y>g.height)return null;const T=[l.x,l.y,1,1];s.transformMat4$1(T,T,g.pixelMatrixInverse),s.scale$1(T,T,1/T[3]),T[0]/=g.worldSize,T[1]/=g.worldSize;const k=g._camera.position,R=s.mercatorZfromAltitude(1,g.center.lat),K=[k[0],k[1],k[2]/R,0],X=s.subtract([],T.slice(0,3),K);s.normalize(X,X);const ee=this.raycast(K,X,this._exaggeration);return ee!==null&&ee?(s.scaleAndAdd(K,K,X,ee),K[3]=K[2],K[2]*=R,K):null}drawDepth(){const l=this.painter,g=l.context,T=this.proxySourceCache,k=Math.ceil(l.width),R=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===k&&this._depthFBO.height===R||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const K=g.gl,X=g.createFramebuffer(k,R,!0);g.activeTexture.set(K.TEXTURE0);const ee=new s.Texture(g,{width:k,height:R,data:null},K.RGBA);ee.bind(K.NEAREST,K.CLAMP_TO_EDGE),X.colorAttachment.set(ee.texture);const ce=g.createRenderbuffer(g.gl.DEPTH_COMPONENT16,k,R);X.depthAttachment.set(ce),this._depthFBO=X,this._depthTexture=ee}g.bindFramebuffer.set(this._depthFBO.framebuffer),g.viewport.set([0,0,k,R]),function(K,X,ee,ce){if(K.transform.projection.name==="globe")return;const le=K.context,ve=le.gl;le.clear({depth:1});const Qe=K.useProgram("terrainDepth"),We=new s.DepthMode(ve.LESS,s.DepthMode.ReadWrite,K.depthRangeFor3D);for(const et of ce){const tt=ee.getTile(et),rt=xl(et.projMatrix,0);X.setupElevationDraw(tt,Qe),Qe.draw(le,ve.TRIANGLES,We,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,rt,"terrain_depth",X.gridBuffer,X.gridIndexBuffer,X.gridNoSkirtSegments)}}(l,this,T,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,g,T){if(l.getSource()instanceof Zi)return this._setupProxiedCoordsForImageSource(l,g,T);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const k=this.proxiedCoords[l.id]=[],R=this.proxyCoords;for(let X=0;X<R.length;X++){const ee=R[X],ce=this._findTileCoveringTileID(ee,l);if(ce){const le=this._createProxiedId(ee,ce,T[ee.key]&&T[ee.key][l.id]);k.push(le),this.proxyToSource[ee.key][l.id]=[le]}}let K=!1;for(let X=0;X<g.length;X++){const ee=l.getTile(g[X]);if(!ee||!ee.hasData())continue;const ce=this._findTileCoveringTileID(ee.tileID,this.proxySourceCache);if(ce&&ce.tileID.canonical.z!==ee.tileID.canonical.z){const le=this.proxyToSource[ce.tileID.key][l.id],ve=this._createProxiedId(ce.tileID,ee,T[ce.tileID.key]&&T[ce.tileID.key][l.id]);le?le.splice(le.length-1,0,ve):this.proxyToSource[ce.tileID.key][l.id]=[ve],k.push(ve),K=!0}}this._sourceTilesOverlap[l.id]=K}_setupProxiedCoordsForImageSource(l,g,T){if(!l.getSource().loaded())return;const k=this.proxiedCoords[l.id]=[],R=this.proxyCoords,K=l.getSource(),X=new s.Point(K.tileID.x,K.tileID.y)._div(1<<K.tileID.z),ee=K.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((le,ve)=>(le.min.x=Math.min(le.min.x,ve.x-X.x),le.min.y=Math.min(le.min.y,ve.y-X.y),le.max.x=Math.max(le.max.x,ve.x-X.x),le.max.y=Math.max(le.max.y,ve.y-X.y),le),{min:new s.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),ce=(le,ve)=>{const Qe=le.wrap+le.canonical.x/(1<<le.canonical.z),We=le.canonical.y/(1<<le.canonical.z),et=s.EXTENT/(1<<le.canonical.z),tt=ve.wrap+ve.canonical.x/(1<<ve.canonical.z),rt=ve.canonical.y/(1<<ve.canonical.z);return Qe+et<tt+ee.min.x||Qe>tt+ee.max.x||We+et<rt+ee.min.y||We>rt+ee.max.y};for(let le=0;le<R.length;le++){const ve=R[le];for(let Qe=0;Qe<g.length;Qe++){const We=l.getTile(g[Qe]);if(!We||!We.hasData()||ce(ve,We.tileID))continue;const et=this._createProxiedId(ve,We,T[ve.key]&&T[ve.key][l.id]),tt=this.proxyToSource[ve.key][l.id];tt?tt.push(et):this.proxyToSource[ve.key][l.id]=[et],k.push(et)}}}_createProxiedId(l,g,T){let k=this.orthoMatrix;if(T){const R=T.find(K=>K.key===g.tileID.key);if(R)return R}if(g.tileID.key!==l.key){const R=l.canonical.z-g.tileID.canonical.z;let K,X,ee;k=s.create();const ce=g.tileID.wrap-l.wrap<<l.overscaledZ;R>0?(K=s.EXTENT>>R,X=K*((g.tileID.canonical.x<<R)-l.canonical.x+ce),ee=K*((g.tileID.canonical.y<<R)-l.canonical.y)):(K=s.EXTENT<<-R,X=s.EXTENT*(g.tileID.canonical.x-(l.canonical.x+ce<<-R)),ee=s.EXTENT*(g.tileID.canonical.y-(l.canonical.y<<-R))),s.ortho(k,0,K,0,K,0,1),s.translate(k,k,[X,ee,0])}return new Ou(g.tileID,l.key,k)}_findTileCoveringTileID(l,g){let T=g.getTile(l);if(T&&T.hasData())return T;const k=this._findCoveringTileCache[g.id],R=k[l.key];if(T=R?g.getTileByID(R):null,T&&T.hasData()||R===null)return T;let K=T?T.tileID:l,X=K.overscaledZ;const ee=g.getSource().minzoom,ce=[];if(!R){const ve=g.getSource().maxzoom;if(l.canonical.z>=ve){const Qe=l.canonical.z-ve;g.getSource().reparseOverscaled?(X=Math.max(l.canonical.z+2,g.transform.tileZoom),K=new s.OverscaledTileID(X,l.wrap,ve,l.canonical.x>>Qe,l.canonical.y>>Qe)):Qe!==0&&(X=ve,K=new s.OverscaledTileID(X,l.wrap,ve,l.canonical.x>>Qe,l.canonical.y>>Qe))}K.key!==l.key&&(ce.push(K.key),T=g.getTile(K))}const le=ve=>{ce.forEach(Qe=>{k[Qe]=ve}),ce.length=0};for(X-=1;X>=ee&&(!T||!T.hasData());X--){T&&le(T.tileID.key);const ve=K.calculateScaledKey(X);if(T=g.getTileByID(ve),T&&T.hasData())break;const Qe=k[ve];if(Qe===null)break;Qe===void 0?ce.push(ve):T=g.getTileByID(Qe)}return le(T?T.tileID.key:null),T&&T.hasData()?T:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,g){let T=this._tilesDirty[l];T||(T=this._tilesDirty[l]={}),T[g.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(g){let T=0;const k=new s.StructArrayLayout2ui4,R=131;for(let K=1;K<129;K++){for(let X=1;X<129;X++)T=K*R+X,k.emplaceBack(T,T+1),k.emplaceBack(T,T+R),k.emplaceBack(T+1,T+R),K===128&&k.emplaceBack(T+R,T+R+1);k.emplaceBack(T+1,T+1+R)}return k}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class lo{static cacheKey(l,g,T,k){let R=`${g}${k?k.cacheKey:""}`;for(const K of T)l.usedDefines.includes(K)&&(R+=`/${K}`);return R}constructor(l,g,T,k,R,K){const X=l.gl;this.program=X.createProgram();const ee=function(Be){const Ye=[];for(let lt=0;lt<Be.length;lt++){if(Be[lt]===null)continue;const At=Be[lt].split(" ");Ye.push(At.pop())}return Ye}(T.staticAttributes),ce=k?k.getBinderAttributes():[],le=ee.concat(ce);let ve=k?k.defines():[];ve=ve.concat(K.map(Be=>`#define ${Be}`));const Qe=l.isWebGL2?`#version 300 es
`:"",We=Qe+ve.concat(l.extStandardDerivatives&&Qe.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(ps):ps,ps,Fh,Ph.fragmentSource,zu.fragmentSource,T.fragmentSource).join(`
`),et=Qe+ve.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Fh,Ph.vertexSource,zu.vertexSource,uh.vertexSource,T.vertexSource).join(`
`),tt=X.createShader(X.FRAGMENT_SHADER);if(X.isContextLost())return void(this.failedToCreate=!0);X.shaderSource(tt,We),X.compileShader(tt),X.attachShader(this.program,tt);const rt=X.createShader(X.VERTEX_SHADER);if(X.isContextLost())this.failedToCreate=!0;else{X.shaderSource(rt,et),X.compileShader(rt),X.attachShader(this.program,rt),this.attributes={},this.numAttributes=le.length;for(let Be=0;Be<this.numAttributes;Be++)le[Be]&&(X.bindAttribLocation(this.program,Be,le[Be]),this.attributes[le[Be]]=Be);X.linkProgram(this.program),X.deleteShader(rt),X.deleteShader(tt),this.fixedUniforms=R(l),this.binderUniforms=k?k.getUniforms(l):[],K.includes("TERRAIN")&&(this.terrainUniforms=(Be=>({u_dem:new s.Uniform1i(Be),u_dem_prev:new s.Uniform1i(Be),u_dem_unpack:new s.Uniform4f(Be),u_dem_tl:new s.Uniform2f(Be),u_dem_scale:new s.Uniform1f(Be),u_dem_tl_prev:new s.Uniform2f(Be),u_dem_scale_prev:new s.Uniform1f(Be),u_dem_size:new s.Uniform1f(Be),u_dem_lerp:new s.Uniform1f(Be),u_exaggeration:new s.Uniform1f(Be),u_depth:new s.Uniform1i(Be),u_depth_size_inv:new s.Uniform2f(Be),u_meter_to_dem:new s.Uniform1f(Be),u_label_plane_matrix_inv:new s.UniformMatrix4f(Be)}))(l)),K.includes("GLOBE")&&(this.globeUniforms=(Be=>({u_tile_tl_up:new s.Uniform3f(Be),u_tile_tr_up:new s.Uniform3f(Be),u_tile_br_up:new s.Uniform3f(Be),u_tile_bl_up:new s.Uniform3f(Be),u_tile_up_scale:new s.Uniform1f(Be)}))(l)),K.includes("FOG")&&(this.fogUniforms=(Be=>({u_fog_matrix:new s.UniformMatrix4f(Be),u_fog_range:new s.Uniform2f(Be),u_fog_color:new s.Uniform4f(Be),u_fog_horizon_blend:new s.Uniform1f(Be),u_fog_temporal_offset:new s.Uniform1f(Be),u_frustum_tl:new s.Uniform3f(Be),u_frustum_tr:new s.Uniform3f(Be),u_frustum_br:new s.Uniform3f(Be),u_frustum_bl:new s.Uniform3f(Be),u_globe_pos:new s.Uniform3f(Be),u_globe_radius:new s.Uniform1f(Be),u_globe_transition:new s.Uniform1f(Be),u_is_globe:new s.Uniform1i(Be),u_viewport:new s.Uniform2f(Be)}))(l))}}setTerrainUniformValues(l,g){if(!this.terrainUniforms)return;const T=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const k in g)T[k]&&T[k].set(this.program,k,g[k])}}setGlobeUniformValues(l,g){if(!this.globeUniforms)return;const T=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const k in g)T[k]&&T[k].set(this.program,k,g[k])}}setFogUniformValues(l,g){if(!this.fogUniforms)return;const T=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const k in g)T[k].set(this.program,k,g[k])}}draw(l,g,T,k,R,K,X,ee,ce,le,ve,Qe,We,et,tt){const rt=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(T),l.setStencilMode(k),l.setColorMode(R),l.setCullFace(K);for(const Ye of Object.keys(this.fixedUniforms))this.fixedUniforms[Ye].set(this.program,Ye,X[Ye]);et&&et.setUniforms(this.program,l,this.binderUniforms,Qe,{zoom:We});const Be={[rt.LINES]:2,[rt.TRIANGLES]:3,[rt.LINE_STRIP]:1}[g];for(const Ye of ve.get()){const lt=Ye.vaos||(Ye.vaos={});(lt[ee]||(lt[ee]=new pu)).bind(l,this,ce,et?et.getPaintVertexBuffers():[],le,Ye.vertexOffset,tt||[]),rt.drawElements(g,Ye.primitiveLength*Be,rt.UNSIGNED_SHORT,Ye.primitiveOffset*Be*2)}}}function jl(b,l){const g=Math.pow(2,l.tileID.overscaledZ),T=l.tileSize*Math.pow(2,b.transform.tileZoom)/g,k=T*(l.tileID.canonical.x+l.tileID.wrap*g),R=T*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_tile_units_to_pixels:1/Wn(l,1,b.transform.tileZoom),u_pixel_coord_upper:[k>>16,R>>16],u_pixel_coord_lower:[65535&k,65535&R]}}const _u=s.create(),Hc=(b,l,g,T,k,R,K,X,ee,ce,le)=>{const ve=l.style.light,Qe=ve.properties.get("position"),We=[Qe.x,Qe.y,Qe.z],et=s.create$1();ve.properties.get("anchor")==="viewport"&&(s.fromRotation(et,-l.transform.angle),s.transformMat3(We,We,et));const tt=ve.properties.get("color"),rt=l.transform,Be={u_matrix:b,u_lightpos:We,u_lightintensity:ve.properties.get("intensity"),u_lightcolor:[tt.r,tt.g,tt.b],u_vertical_gradient:+g,u_opacity:T,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:_u,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:k,u_edge_radius:R};return rt.projection.name==="globe"&&(Be.u_tile_id=[K.canonical.x,K.canonical.y,1<<K.canonical.z],Be.u_zoom_transition=ee,Be.u_inv_rot_matrix=le,Be.u_merc_center=ce,Be.u_up_dir=rt.projection.upVector(new s.CanonicalTileID(0,0,0),ce[0]*s.EXTENT,ce[1]*s.EXTENT),Be.u_height_lift=X),Be},fh=(b,l,g,T,k,R,K,X,ee,ce,le,ve)=>{const Qe=Hc(b,l,g,T,k,R,K,ee,ce,le,ve),We={u_height_factor:-Math.pow(2,K.overscaledZ)/X.tileSize/8};return s.extend(Qe,jl(l,X),We)},Vc=b=>({u_matrix:b}),Nu=(b,l,g)=>s.extend(Vc(b),jl(l,g)),ms=(b,l)=>({u_matrix:b,u_world:l}),va=(b,l,g,T)=>s.extend(Nu(b,l,g),{u_world:T}),ph=s.create(),sl=(b,l,g,T,k,R)=>{const K=b.transform,X=K.projection.name==="globe";let ee;if(R.paint.get("circle-pitch-alignment")==="map")if(X){const le=s.globePixelsToTileUnits(K.zoom,l.canonical)*K._pixelsPerMercatorPixel;ee=Float32Array.from([le,0,0,le])}else ee=K.calculatePixelsToTileUnitsMatrix(g);else ee=new Float32Array([K.pixelsToGLUnits[0],0,0,K.pixelsToGLUnits[1]]);const ce={u_camera_to_center_distance:K.cameraToCenterDistance,u_matrix:b.translatePosMatrix(l.projMatrix,g,R.paint.get("circle-translate"),R.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:ee,u_inv_rot_matrix:ph,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(X){ce.u_inv_rot_matrix=T,ce.u_merc_center=k,ce.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],ce.u_zoom_transition=s.globeToMercatorTransition(K.zoom);const le=k[0]*s.EXTENT,ve=k[1]*s.EXTENT;ce.u_up_dir=K.projection.upVector(new s.CanonicalTileID(0,0,0),le,ve)}return ce},Dh=b=>{const l=[];return b.paint.get("circle-pitch-alignment")==="map"&&l.push("PITCH_WITH_MAP"),b.paint.get("circle-pitch-scale")==="map"&&l.push("SCALE_WITH_MAP"),l},al=(b,l,g,T)=>{const k=s.EXTENT/g.tileSize;return{u_matrix:b,u_camera_to_center_distance:l.getCameraToCenterDistance(T),u_extrude_scale:[l.pixelsToGLUnits[0]/k,l.pixelsToGLUnits[1]/k]}},yu=(b,l,g=1)=>({u_matrix:b,u_color:l,u_overlay:0,u_overlay_scale:g}),ac=s.create(),gd=(b,l,g,T,k,R,K)=>{const X=b.transform,ee=X.projection.name==="globe",ce=ee?s.globePixelsToTileUnits(X.zoom,l.canonical)*X._pixelsPerMercatorPixel:Wn(g,1,R),le={u_matrix:l.projMatrix,u_extrude_scale:ce,u_intensity:K,u_inv_rot_matrix:ac,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(ee){le.u_inv_rot_matrix=T,le.u_merc_center=k,le.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],le.u_zoom_transition=s.globeToMercatorTransition(X.zoom);const ve=k[0]*s.EXTENT,Qe=k[1]*s.EXTENT;le.u_up_dir=X.projection.upVector(new s.CanonicalTileID(0,0,0),ve,Qe)}return le},Qu=(b,l,g,T,k,R,K)=>{const X=b.transform,ee=X.calculatePixelsToTileUnitsMatrix(l);return{u_matrix:Bc(b,l,g,T),u_pixels_to_tile_units:ee,u_device_pixel_ratio:R,u_units_to_pixels:[1/X.pixelsToGLUnits[0],1/X.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:k,u_texsize:Gc(g)?l.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:ll(l,b.transform),u_alpha_discard_threshold:0,u_trim_offset:K}},lc=(b,l,g,T,k)=>{const R=b.transform;return{u_matrix:Bc(b,l,g,T),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:R.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:k,u_image:0,u_tile_units_to_pixels:ll(l,R),u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function ll(b,l){return 1/Wn(b,1,l.tileZoom)}function Bc(b,l,g,T){return b.translatePosMatrix(T||l.tileID.projMatrix,l,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}function Gc(b){const l=b.paint.get("line-dasharray").value;return l.value||l.kind!=="constant"}const Wc=(b,l,g,T,k,R)=>{return{u_matrix:b,u_tl_parent:l,u_scale_parent:g,u_fade_t:T.mix,u_opacity:T.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(X=k.paint.get("raster-saturation"),X>0?1-1/(1.001-X):-X),u_contrast_factor:(K=k.paint.get("raster-contrast"),K>0?1/(1-K):1+K),u_spin_weights:Zs(k.paint.get("raster-hue-rotate")),u_perspective_transform:R};var K,X};function Zs(b){b*=Math.PI/180;const l=Math.sin(b),g=Math.cos(b);return[(2*g+1)/3,(-Math.sqrt(3)*l-g+1)/3,(Math.sqrt(3)*l-g+1)/3]}const oa=s.create(),$u=(b,l,g,T,k,R,K,X,ee,ce,le,ve,Qe,We,et,tt)=>{const rt=k.transform,Be={u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:rt.cameraToCenterDistance,u_rotate_symbol:+g,u_aspect_ratio:rt.width/rt.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:R,u_label_plane_matrix:K,u_coord_matrix:X,u_is_text:+ee,u_pitch_with_map:+T,u_texsize:ce,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:oa,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:oa,u_up_vector:[0,-1,0]};return tt.name==="globe"&&(Be.u_tile_id=[le.canonical.x,le.canonical.y,1<<le.canonical.z],Be.u_zoom_transition=ve,Be.u_inv_rot_matrix=We,Be.u_merc_center=Qe,Be.u_camera_forward=rt._camera.forward(),Be.u_ecef_origin=s.globeECEFOrigin(rt.globeMatrix,le.toUnwrapped()),Be.u_tile_matrix=Float32Array.from(rt.globeMatrix),Be.u_up_vector=et),Be},Tc=(b,l,g,T,k,R,K,X,ee,ce,le,ve,Qe,We,et,tt,rt)=>s.extend($u(b,l,g,T,k,R,K,X,ee,ce,ve,Qe,We,et,tt,rt),{u_gamma_scale:T?k.transform.cameraToCenterDistance*Math.cos(k.terrain?0:k.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+le}),mh=(b,l,g,T,k,R,K,X,ee,ce,le,ve,Qe,We,et,tt)=>s.extend(Tc(b,l,g,T,k,R,K,X,!0,ee,!0,le,ve,Qe,We,et,tt),{u_texsize_icon:ce,u_texture_icon:1}),Ia=(b,l,g)=>({u_matrix:b,u_opacity:l,u_color:g}),Ga=(b,l,g,T,k)=>s.extend(function(R,K,X){const ee=K.imageManager.getPattern(R.toString()),{width:ce,height:le}=K.imageManager.getPixelSize(),ve=Math.pow(2,X.tileID.overscaledZ),Qe=X.tileSize*Math.pow(2,K.transform.tileZoom)/ve,We=Qe*(X.tileID.canonical.x+X.tileID.wrap*ve),et=Qe*X.tileID.canonical.y;return{u_image:0,u_pattern_tl:ee.tl,u_pattern_br:ee.br,u_texsize:[ce,le],u_pattern_size:ee.displaySize,u_tile_units_to_pixels:1/Wn(X,1,K.transform.tileZoom),u_pixel_coord_upper:[We>>16,et>>16],u_pixel_coord_lower:[65535&We,65535&et]}}(T,g,k),{u_matrix:b,u_opacity:l}),gh={fillExtrusion:b=>({u_matrix:new s.UniformMatrix4f(b),u_lightpos:new s.Uniform3f(b),u_lightintensity:new s.Uniform1f(b),u_lightcolor:new s.Uniform3f(b),u_vertical_gradient:new s.Uniform1f(b),u_opacity:new s.Uniform1f(b),u_edge_radius:new s.Uniform1f(b),u_ao:new s.Uniform2f(b),u_tile_id:new s.Uniform3f(b),u_zoom_transition:new s.Uniform1f(b),u_inv_rot_matrix:new s.UniformMatrix4f(b),u_merc_center:new s.Uniform2f(b),u_up_dir:new s.Uniform3f(b),u_height_lift:new s.Uniform1f(b)}),fillExtrusionPattern:b=>({u_matrix:new s.UniformMatrix4f(b),u_lightpos:new s.Uniform3f(b),u_lightintensity:new s.Uniform1f(b),u_lightcolor:new s.Uniform3f(b),u_vertical_gradient:new s.Uniform1f(b),u_height_factor:new s.Uniform1f(b),u_edge_radius:new s.Uniform1f(b),u_ao:new s.Uniform2f(b),u_tile_id:new s.Uniform3f(b),u_zoom_transition:new s.Uniform1f(b),u_inv_rot_matrix:new s.UniformMatrix4f(b),u_merc_center:new s.Uniform2f(b),u_up_dir:new s.Uniform3f(b),u_height_lift:new s.Uniform1f(b),u_image:new s.Uniform1i(b),u_texsize:new s.Uniform2f(b),u_pixel_coord_upper:new s.Uniform2f(b),u_pixel_coord_lower:new s.Uniform2f(b),u_tile_units_to_pixels:new s.Uniform1f(b),u_opacity:new s.Uniform1f(b)}),fill:b=>({u_matrix:new s.UniformMatrix4f(b)}),fillPattern:b=>({u_matrix:new s.UniformMatrix4f(b),u_image:new s.Uniform1i(b),u_texsize:new s.Uniform2f(b),u_pixel_coord_upper:new s.Uniform2f(b),u_pixel_coord_lower:new s.Uniform2f(b),u_tile_units_to_pixels:new s.Uniform1f(b)}),fillOutline:b=>({u_matrix:new s.UniformMatrix4f(b),u_world:new s.Uniform2f(b)}),fillOutlinePattern:b=>({u_matrix:new s.UniformMatrix4f(b),u_world:new s.Uniform2f(b),u_image:new s.Uniform1i(b),u_texsize:new s.Uniform2f(b),u_pixel_coord_upper:new s.Uniform2f(b),u_pixel_coord_lower:new s.Uniform2f(b),u_tile_units_to_pixels:new s.Uniform1f(b)}),circle:b=>({u_camera_to_center_distance:new s.Uniform1f(b),u_extrude_scale:new s.UniformMatrix2f(b),u_device_pixel_ratio:new s.Uniform1f(b),u_matrix:new s.UniformMatrix4f(b),u_inv_rot_matrix:new s.UniformMatrix4f(b),u_merc_center:new s.Uniform2f(b),u_tile_id:new s.Uniform3f(b),u_zoom_transition:new s.Uniform1f(b),u_up_dir:new s.Uniform3f(b)}),collisionBox:b=>({u_matrix:new s.UniformMatrix4f(b),u_camera_to_center_distance:new s.Uniform1f(b),u_extrude_scale:new s.Uniform2f(b)}),collisionCircle:b=>({u_matrix:new s.UniformMatrix4f(b),u_inv_matrix:new s.UniformMatrix4f(b),u_camera_to_center_distance:new s.Uniform1f(b),u_viewport_size:new s.Uniform2f(b)}),debug:b=>({u_color:new s.UniformColor(b),u_matrix:new s.UniformMatrix4f(b),u_overlay:new s.Uniform1i(b),u_overlay_scale:new s.Uniform1f(b)}),clippingMask:b=>({u_matrix:new s.UniformMatrix4f(b)}),heatmap:b=>({u_extrude_scale:new s.Uniform1f(b),u_intensity:new s.Uniform1f(b),u_matrix:new s.UniformMatrix4f(b),u_inv_rot_matrix:new s.UniformMatrix4f(b),u_merc_center:new s.Uniform2f(b),u_tile_id:new s.Uniform3f(b),u_zoom_transition:new s.Uniform1f(b),u_up_dir:new s.Uniform3f(b)}),heatmapTexture:b=>({u_image:new s.Uniform1i(b),u_color_ramp:new s.Uniform1i(b),u_opacity:new s.Uniform1f(b)}),hillshade:b=>({u_matrix:new s.UniformMatrix4f(b),u_image:new s.Uniform1i(b),u_latrange:new s.Uniform2f(b),u_light:new s.Uniform2f(b),u_shadow:new s.UniformColor(b),u_highlight:new s.UniformColor(b),u_accent:new s.UniformColor(b)}),hillshadePrepare:b=>({u_matrix:new s.UniformMatrix4f(b),u_image:new s.Uniform1i(b),u_dimension:new s.Uniform2f(b),u_zoom:new s.Uniform1f(b),u_unpack:new s.Uniform4f(b)}),line:b=>({u_matrix:new s.UniformMatrix4f(b),u_pixels_to_tile_units:new s.UniformMatrix2f(b),u_device_pixel_ratio:new s.Uniform1f(b),u_units_to_pixels:new s.Uniform2f(b),u_dash_image:new s.Uniform1i(b),u_gradient_image:new s.Uniform1i(b),u_image_height:new s.Uniform1f(b),u_texsize:new s.Uniform2f(b),u_tile_units_to_pixels:new s.Uniform1f(b),u_alpha_discard_threshold:new s.Uniform1f(b),u_trim_offset:new s.Uniform2f(b)}),linePattern:b=>({u_matrix:new s.UniformMatrix4f(b),u_texsize:new s.Uniform2f(b),u_pixels_to_tile_units:new s.UniformMatrix2f(b),u_device_pixel_ratio:new s.Uniform1f(b),u_image:new s.Uniform1i(b),u_units_to_pixels:new s.Uniform2f(b),u_tile_units_to_pixels:new s.Uniform1f(b),u_alpha_discard_threshold:new s.Uniform1f(b)}),raster:b=>({u_matrix:new s.UniformMatrix4f(b),u_tl_parent:new s.Uniform2f(b),u_scale_parent:new s.Uniform1f(b),u_fade_t:new s.Uniform1f(b),u_opacity:new s.Uniform1f(b),u_image0:new s.Uniform1i(b),u_image1:new s.Uniform1i(b),u_brightness_low:new s.Uniform1f(b),u_brightness_high:new s.Uniform1f(b),u_saturation_factor:new s.Uniform1f(b),u_contrast_factor:new s.Uniform1f(b),u_spin_weights:new s.Uniform3f(b),u_perspective_transform:new s.Uniform2f(b)}),symbolIcon:b=>({u_is_size_zoom_constant:new s.Uniform1i(b),u_is_size_feature_constant:new s.Uniform1i(b),u_size_t:new s.Uniform1f(b),u_size:new s.Uniform1f(b),u_camera_to_center_distance:new s.Uniform1f(b),u_rotate_symbol:new s.Uniform1i(b),u_aspect_ratio:new s.Uniform1f(b),u_fade_change:new s.Uniform1f(b),u_matrix:new s.UniformMatrix4f(b),u_label_plane_matrix:new s.UniformMatrix4f(b),u_coord_matrix:new s.UniformMatrix4f(b),u_is_text:new s.Uniform1i(b),u_pitch_with_map:new s.Uniform1i(b),u_texsize:new s.Uniform2f(b),u_tile_id:new s.Uniform3f(b),u_zoom_transition:new s.Uniform1f(b),u_inv_rot_matrix:new s.UniformMatrix4f(b),u_merc_center:new s.Uniform2f(b),u_camera_forward:new s.Uniform3f(b),u_tile_matrix:new s.UniformMatrix4f(b),u_up_vector:new s.Uniform3f(b),u_ecef_origin:new s.Uniform3f(b),u_texture:new s.Uniform1i(b)}),symbolSDF:b=>({u_is_size_zoom_constant:new s.Uniform1i(b),u_is_size_feature_constant:new s.Uniform1i(b),u_size_t:new s.Uniform1f(b),u_size:new s.Uniform1f(b),u_camera_to_center_distance:new s.Uniform1f(b),u_rotate_symbol:new s.Uniform1i(b),u_aspect_ratio:new s.Uniform1f(b),u_fade_change:new s.Uniform1f(b),u_matrix:new s.UniformMatrix4f(b),u_label_plane_matrix:new s.UniformMatrix4f(b),u_coord_matrix:new s.UniformMatrix4f(b),u_is_text:new s.Uniform1i(b),u_pitch_with_map:new s.Uniform1i(b),u_texsize:new s.Uniform2f(b),u_texture:new s.Uniform1i(b),u_gamma_scale:new s.Uniform1f(b),u_device_pixel_ratio:new s.Uniform1f(b),u_tile_id:new s.Uniform3f(b),u_zoom_transition:new s.Uniform1f(b),u_inv_rot_matrix:new s.UniformMatrix4f(b),u_merc_center:new s.Uniform2f(b),u_camera_forward:new s.Uniform3f(b),u_tile_matrix:new s.UniformMatrix4f(b),u_up_vector:new s.Uniform3f(b),u_ecef_origin:new s.Uniform3f(b),u_is_halo:new s.Uniform1i(b)}),symbolTextAndIcon:b=>({u_is_size_zoom_constant:new s.Uniform1i(b),u_is_size_feature_constant:new s.Uniform1i(b),u_size_t:new s.Uniform1f(b),u_size:new s.Uniform1f(b),u_camera_to_center_distance:new s.Uniform1f(b),u_rotate_symbol:new s.Uniform1i(b),u_aspect_ratio:new s.Uniform1f(b),u_fade_change:new s.Uniform1f(b),u_matrix:new s.UniformMatrix4f(b),u_label_plane_matrix:new s.UniformMatrix4f(b),u_coord_matrix:new s.UniformMatrix4f(b),u_is_text:new s.Uniform1i(b),u_pitch_with_map:new s.Uniform1i(b),u_texsize:new s.Uniform2f(b),u_texsize_icon:new s.Uniform2f(b),u_texture:new s.Uniform1i(b),u_texture_icon:new s.Uniform1i(b),u_gamma_scale:new s.Uniform1f(b),u_device_pixel_ratio:new s.Uniform1f(b),u_is_halo:new s.Uniform1i(b)}),background:b=>({u_matrix:new s.UniformMatrix4f(b),u_opacity:new s.Uniform1f(b),u_color:new s.UniformColor(b)}),backgroundPattern:b=>({u_matrix:new s.UniformMatrix4f(b),u_opacity:new s.Uniform1f(b),u_image:new s.Uniform1i(b),u_pattern_tl:new s.Uniform2f(b),u_pattern_br:new s.Uniform2f(b),u_texsize:new s.Uniform2f(b),u_pattern_size:new s.Uniform2f(b),u_pixel_coord_upper:new s.Uniform2f(b),u_pixel_coord_lower:new s.Uniform2f(b),u_tile_units_to_pixels:new s.Uniform1f(b)}),terrainRaster:$l,terrainDepth:$l,skybox:b=>({u_matrix:new s.UniformMatrix4f(b),u_sun_direction:new s.Uniform3f(b),u_cubemap:new s.Uniform1i(b),u_opacity:new s.Uniform1f(b),u_temporal_offset:new s.Uniform1f(b)}),skyboxGradient:b=>({u_matrix:new s.UniformMatrix4f(b),u_color_ramp:new s.Uniform1i(b),u_center_direction:new s.Uniform3f(b),u_radius:new s.Uniform1f(b),u_opacity:new s.Uniform1f(b),u_temporal_offset:new s.Uniform1f(b)}),skyboxCapture:b=>({u_matrix_3f:new s.UniformMatrix3f(b),u_sun_direction:new s.Uniform3f(b),u_sun_intensity:new s.Uniform1f(b),u_color_tint_r:new s.Uniform4f(b),u_color_tint_m:new s.Uniform4f(b),u_luminance:new s.Uniform1f(b)}),globeRaster:b=>({u_proj_matrix:new s.UniformMatrix4f(b),u_globe_matrix:new s.UniformMatrix4f(b),u_normalize_matrix:new s.UniformMatrix4f(b),u_merc_matrix:new s.UniformMatrix4f(b),u_zoom_transition:new s.Uniform1f(b),u_merc_center:new s.Uniform2f(b),u_image0:new s.Uniform1i(b),u_grid_matrix:new s.UniformMatrix3f(b),u_skirt_height:new s.Uniform1f(b),u_frustum_tl:new s.Uniform3f(b),u_frustum_tr:new s.Uniform3f(b),u_frustum_br:new s.Uniform3f(b),u_frustum_bl:new s.Uniform3f(b),u_globe_pos:new s.Uniform3f(b),u_globe_radius:new s.Uniform1f(b),u_viewport:new s.Uniform2f(b)}),globeAtmosphere:b=>({u_frustum_tl:new s.Uniform3f(b),u_frustum_tr:new s.Uniform3f(b),u_frustum_br:new s.Uniform3f(b),u_frustum_bl:new s.Uniform3f(b),u_horizon:new s.Uniform1f(b),u_transition:new s.Uniform1f(b),u_fadeout_range:new s.Uniform1f(b),u_color:new s.Uniform4f(b),u_high_color:new s.Uniform4f(b),u_space_color:new s.Uniform4f(b),u_star_intensity:new s.Uniform1f(b),u_star_density:new s.Uniform1f(b),u_star_size:new s.Uniform1f(b),u_temporal_offset:new s.Uniform1f(b),u_horizon_angle:new s.Uniform1f(b),u_rotation_matrix:new s.UniformMatrix4f(b)})};let cc;function Kc(b,l,g,T,k,R,K){const X=b.context,ee=X.gl,ce=b.transform,le=b.useProgram("collisionBox"),ve=[];let Qe=0,We=0;for(let At=0;At<T.length;At++){const It=T[At],Tt=l.getTile(It),Mt=Tt.getBucket(g);if(!Mt)continue;const Ht=Es(It,Mt,ce);let Nt=Ht;k[0]===0&&k[1]===0||(Nt=b.translatePosMatrix(Ht,Tt,k,R));const cn=K?Mt.textCollisionBox:Mt.iconCollisionBox,Nn=Mt.collisionCircleArray;if(Nn.length>0){const Vt=s.create(),Pn=Nt;s.mul(Vt,Mt.placementInvProjMatrix,ce.glCoordMatrix),s.mul(Vt,Vt,Mt.placementViewportMatrix),ve.push({circleArray:Nn,circleOffset:We,transform:Pn,invTransform:Vt,projection:Mt.getProjection()}),Qe+=Nn.length/4,We=Qe}cn&&(b.terrain&&b.terrain.setupElevationDraw(Tt,le),le.draw(X,ee.LINES,s.DepthMode.disabled,s.StencilMode.disabled,b.colorModeForRenderPass(),s.CullFaceMode.disabled,al(Nt,ce,Tt,Mt.getProjection()),g.id,cn.layoutVertexBuffer,cn.indexBuffer,cn.segments,null,ce.zoom,null,[cn.collisionVertexBuffer,cn.collisionVertexBufferExt]))}if(!K||!ve.length)return;const et=b.useProgram("collisionCircle"),tt=new s.StructArrayLayout2f1f2i16;tt.resize(4*Qe),tt._trim();let rt=0;for(const At of ve)for(let It=0;It<At.circleArray.length/4;It++){const Tt=4*It,Mt=At.circleArray[Tt+0],Ht=At.circleArray[Tt+1],Nt=At.circleArray[Tt+2],cn=At.circleArray[Tt+3];tt.emplace(rt++,Mt,Ht,Nt,cn,0),tt.emplace(rt++,Mt,Ht,Nt,cn,1),tt.emplace(rt++,Mt,Ht,Nt,cn,2),tt.emplace(rt++,Mt,Ht,Nt,cn,3)}(!cc||cc.length<2*Qe)&&(cc=function(At){const It=2*At,Tt=new s.StructArrayLayout3ui6;Tt.resize(It),Tt._trim();for(let Mt=0;Mt<It;Mt++){const Ht=6*Mt;Tt.uint16[Ht+0]=4*Mt+0,Tt.uint16[Ht+1]=4*Mt+1,Tt.uint16[Ht+2]=4*Mt+2,Tt.uint16[Ht+3]=4*Mt+2,Tt.uint16[Ht+4]=4*Mt+3,Tt.uint16[Ht+5]=4*Mt+0}return Tt}(Qe));const Be=X.createIndexBuffer(cc,!0),Ye=X.createVertexBuffer(tt,s.collisionCircleLayout.members,!0);for(const At of ve){const It={u_matrix:At.transform,u_inv_matrix:At.invTransform,u_camera_to_center_distance:(lt=ce).getCameraToCenterDistance(At.projection),u_viewport_size:[lt.width,lt.height]};et.draw(X,ee.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,b.colorModeForRenderPass(),s.CullFaceMode.disabled,It,g.id,Ye,Be,s.SegmentVector.simpleSegment(0,2*At.circleOffset,At.circleArray.length,At.circleArray.length/2),null,ce.zoom)}var lt;Ye.destroy(),Be.destroy()}const vu=s.create();function Ec({width:b,height:l,anchor:g,textOffset:T,textScale:k},R){const{horizontalAlign:K,verticalAlign:X}=s.getAnchorAlignment(g),ee=-(K-.5)*b,ce=-(X-.5)*l,le=s.evaluateVariableOffset(g,T);return new s.Point((ee/k+le[0])*R,(ce/k+le[1])*R)}function xa(b,l,g,T,k,R,K,X,ee,ce,le){const ve=b.text.placedSymbolArray,Qe=b.text.dynamicLayoutVertexArray,We=b.icon.dynamicLayoutVertexArray,et={},tt=b.getProjection(),rt=Ho(X,tt,R),Be=R.elevation,Ye=tt.upVectorScale(X.canonical,R.center.lat,R.worldSize).metersToTile;Qe.clear();for(let lt=0;lt<ve.length;lt++){const At=ve.get(lt),{tileAnchorX:It,tileAnchorY:Tt,numGlyphs:Mt}=At,Ht=At.hidden||!At.crossTileID||b.allowVerticalPlacement&&!At.placedOrientation?null:T[At.crossTileID];if(Ht){let Nt=0,cn=0,Nn=0;if(Be){const si=Be?Be.getAtTileOffset(X,It,Tt):0,[ar,Tr,Di]=tt.upVector(X.canonical,It,Tt);Nt=si*ar*Ye,cn=si*Tr*Ye,Nn=si*Di*Ye}let[Vt,Pn,fn,Zn]=Mr(At.projectedAnchorX+Nt,At.projectedAnchorY+cn,At.projectedAnchorZ+Nn,g?rt:K);const nn=xc(R.getCameraToCenterDistance(tt),Zn);let Mn=k.evaluateSizeForFeature(b.textSizeData,ce,At)*nn/s.ONE_EM;g&&(Mn*=b.tilePixelRatio/ee);const Yn=Ec(Ht,Mn);g?({x:Vt,y:Pn,z:fn}=tt.projectTilePoint(It+Yn.x,Tt+Yn.y,X.canonical),[Vt,Pn,fn]=Mr(Vt+Nt,Pn+cn,fn+Nn,K)):(l&&Yn._rotate(-R.angle),Vt+=Yn.x,Pn+=Yn.y,fn=0);const Vn=b.allowVerticalPlacement&&At.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let si=0;si<Mt;si++)s.addDynamicAttributes(Qe,Vt,Pn,fn,Vn);le&&At.associatedIconIndex>=0&&(et[At.associatedIconIndex]={x:Vt,y:Pn,z:fn,angle:Vn})}else Ea(Mt,Qe)}if(le){We.clear();const lt=b.icon.placedSymbolArray;for(let At=0;At<lt.length;At++){const It=lt.get(At),{numGlyphs:Tt}=It,Mt=et[At];if(It.hidden||!Mt)Ea(Tt,We);else{const{x:Ht,y:Nt,z:cn,angle:Nn}=Mt;for(let Vt=0;Vt<Tt;Vt++)s.addDynamicAttributes(We,Ht,Nt,cn,Nn)}}b.icon.dynamicLayoutVertexBuffer.updateData(We)}b.text.dynamicLayoutVertexBuffer.updateData(Qe)}function Wa(b,l,g){return g.iconsInText&&l?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function jt(b,l,g,T,k,R,K,X,ee,ce,le,ve){const Qe=b.context,We=Qe.gl,et=b.transform,tt=X==="map",rt=ee==="map",Be=tt&&g.layout.get("symbol-placement")!=="point",Ye=tt&&!rt&&!Be,lt=g.layout.get("symbol-sort-key").constantOr(1)!==void 0;let At=!1;const It=b.depthModeForSublayer(0,s.DepthMode.ReadOnly),Tt=[s.mercatorXfromLng(et.center.lng),s.mercatorYfromLat(et.center.lat)],Mt=g.layout.get("text-variable-anchor"),Ht=et.projection.name==="globe",Nt=[],cn=[0,-1,0];let Nn=cn;!Ht&&!et.mercatorFromTransition||tt||(Nn=function(Vt){const Pn=Vt._camera.getWorldToCamera(Vt.worldSize,1),fn=s.multiply([],Pn,Vt.globeMatrix);s.invert(fn,fn);const Zn=[0,0,0],nn=[0,1,0,0];return s.transformMat4$1(nn,nn,fn),Zn[0]=nn[0],Zn[1]=nn[1],Zn[2]=nn[2],s.normalize(Zn,Zn),Zn}(et));for(const Vt of T){const Pn=l.getTile(Vt),fn=Pn.getBucket(g);if(!fn||fn.projection.name==="mercator"&&Ht)continue;const Zn=k?fn.text:fn.icon;if(!Zn||fn.fullyClipped||!Zn.segments.get().length)continue;const nn=Zn.programConfigurations.get(g.id),Mn=k||fn.sdfIcons,Yn=k?fn.textSizeData:fn.iconSizeData,Vn=rt||et.pitch!==0,si=s.evaluateSizeForZoom(Yn,et.zoom);let ar,Tr,Di,yr,ro=[0,0],co=null;if(k)Tr=Pn.glyphAtlasTexture,Di=We.LINEAR,ar=Pn.glyphAtlasTexture.size,fn.iconsInText&&(ro=Pn.imageAtlasTexture.size,co=Pn.imageAtlasTexture,yr=Vn||b.options.rotating||b.options.zooming||Yn.kind==="composite"||Yn.kind==="camera"?We.LINEAR:We.NEAREST);else{const Bu=g.layout.get("icon-size").constantOr(0)!==1||fn.iconsNeedLinear;Tr=Pn.imageAtlasTexture,Di=Mn||b.options.rotating||b.options.zooming||Bu||Vn?We.LINEAR:We.NEAREST,ar=Pn.imageAtlasTexture.size}const Yi=fn.projection.name==="globe",Ro=Yi?Nn:cn,gs=Yi?s.globeToMercatorTransition(et.zoom):0,qo=Ho(Vt,fn.getProjection(),et),Xo=et.calculatePixelsToTileUnitsMatrix(Pn),qa=hn(qo,Pn.tileID.canonical,rt,tt,et,fn.getProjection(),Xo),Oa=b.terrain&&rt&&Be?s.invert(s.create(),qa):vu,iu=Dr(qo,Pn.tileID.canonical,rt,tt,et,fn.getProjection(),Xo),Os=Mt&&fn.hasTextData(),ko=g.layout.get("icon-text-fit")!=="none"&&Os&&fn.hasIconData();if(Be){const Bu=et.elevation,Rh=Bu?Bu.getAtTileOffsetFunc(Vt,et.center.lat,et.worldSize,fn.getProjection()):null,Oh=Wr(qo,Pn.tileID.canonical,rt,tt,et,fn.getProjection(),Xo);sh(fn,qo,b,k,Oh,iu,rt,ce,Rh,Vt)}const ts=Be||k&&Mt||ko,No=b.translatePosMatrix(qo,Pn,R,K),Aa=ts?vu:qa,Na=b.translatePosMatrix(iu,Pn,R,K,!0),Fs=fn.getProjection().createInversionMatrix(et,Vt.canonical),Zl=[];b.terrainRenderModeElevated()&&rt&&Zl.push("PITCH_WITH_MAP_TERRAIN"),Yi&&Zl.push("PROJECTION_GLOBE_VIEW"),ts&&Zl.push("PROJECTED_POS_ON_VIEWPORT");const EA=Mn&&g.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Cu;Cu=Mn?fn.iconsInText?mh(Yn.kind,si,Ye,rt,b,No,Aa,Na,ar,ro,Vt,gs,Tt,Fs,Ro,fn.getProjection()):Tc(Yn.kind,si,Ye,rt,b,No,Aa,Na,k,ar,!0,Vt,gs,Tt,Fs,Ro,fn.getProjection()):$u(Yn.kind,si,Ye,rt,b,No,Aa,Na,k,ar,Vt,gs,Tt,Fs,Ro,fn.getProjection());const yd={program:b.useProgram(Wa(Mn,k,fn),nn,Zl),buffers:Zn,uniformValues:Cu,atlasTexture:Tr,atlasTextureIcon:co,atlasInterpolation:Di,atlasInterpolationIcon:yr,isSDF:Mn,hasHalo:EA,tile:Pn,labelPlaneMatrixInv:Oa};if(lt&&fn.canOverlap){At=!0;const Bu=Zn.segments.get();for(const Rh of Bu)Nt.push({segments:new s.SegmentVector([Rh]),sortKey:Rh.sortKey,state:yd})}else Nt.push({segments:Zn.segments,sortKey:0,state:yd})}At&&Nt.sort((Vt,Pn)=>Vt.sortKey-Pn.sortKey);for(const Vt of Nt){const Pn=Vt.state;if(b.terrain&&b.terrain.setupElevationDraw(Pn.tile,Pn.program,{useDepthForOcclusion:!Ht,labelPlaneMatrixInv:Pn.labelPlaneMatrixInv}),Qe.activeTexture.set(We.TEXTURE0),Pn.atlasTexture.bind(Pn.atlasInterpolation,We.CLAMP_TO_EDGE),Pn.atlasTextureIcon&&(Qe.activeTexture.set(We.TEXTURE1),Pn.atlasTextureIcon&&Pn.atlasTextureIcon.bind(Pn.atlasInterpolationIcon,We.CLAMP_TO_EDGE)),Pn.isSDF){const fn=Pn.uniformValues;Pn.hasHalo&&(fn.u_is_halo=1,Dn(Pn.buffers,Vt.segments,g,b,Pn.program,It,le,ve,fn)),fn.u_is_halo=0}Dn(Pn.buffers,Vt.segments,g,b,Pn.program,It,le,ve,Pn.uniformValues)}}function Dn(b,l,g,T,k,R,K,X,ee){const ce=T.context,le=[b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer,b.globeExtVertexBuffer];k.draw(ce,ce.gl.TRIANGLES,R,K,X,s.CullFaceMode.disabled,ee,g.id,b.layoutVertexBuffer,b.indexBuffer,l,g.paint,T.transform.zoom,b.programConfigurations.get(g.id),le)}function wn(b,l,g,T,k,R,K){const X=b.context.gl,ee=g.paint.get("fill-pattern"),ce=ee&&ee.constantOr(1);let le,ve,Qe,We,et;K?(ve=ce&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",le=X.LINES):(ve=ce?"fillPattern":"fill",le=X.TRIANGLES);for(const tt of T){const rt=l.getTile(tt);if(ce&&!rt.patternsLoaded())continue;const Be=rt.getBucket(g);if(!Be)continue;b.prepareDrawTile();const Ye=Be.programConfigurations.get(g.id),lt=b.useProgram(ve,Ye);ce&&(b.context.activeTexture.set(X.TEXTURE0),rt.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Ye.updatePaintBuffers());const At=ee.constantOr(null);if(At&&rt.imageAtlas){const Tt=rt.imageAtlas.patternPositions[At.toString()];Tt&&Ye.setConstantPatternPositions(Tt)}const It=b.translatePosMatrix(tt.projMatrix,rt,g.paint.get("fill-translate"),g.paint.get("fill-translate-anchor"));if(K){We=Be.indexBuffer2,et=Be.segments2;const Tt=b.terrain&&b.terrain.renderingToTexture?b.terrain.drapeBufferSize:[X.drawingBufferWidth,X.drawingBufferHeight];Qe=ve==="fillOutlinePattern"&&ce?va(It,b,rt,Tt):ms(It,Tt)}else We=Be.indexBuffer,et=Be.segments,Qe=ce?Nu(It,b,rt):Vc(It);b.prepareDrawProgram(b.context,lt,tt.toUnwrapped()),lt.draw(b.context,le,k,b.stencilModeForClipping(tt),R,s.CullFaceMode.disabled,Qe,g.id,Be.layoutVertexBuffer,We,et,g.paint,b.transform.zoom,Ye)}}function Ui(b,l,g,T,k,R,K){const X=b.context,ee=X.gl,ce=b.transform,le=g.paint.get("fill-extrusion-pattern"),ve=le.constantOr(1),Qe=g.paint.get("fill-extrusion-opacity"),We=[g.paint.get("fill-extrusion-ambient-occlusion-intensity"),g.paint.get("fill-extrusion-ambient-occlusion-radius")],et=g.layout.get("fill-extrusion-edge-radius"),tt=et>0&&!g.paint.get("fill-extrusion-rounded-roof"),rt=tt?0:et,Be=ce.projection.name==="globe"?s.fillExtrusionHeightLift():0,Ye=ce.projection.name==="globe",lt=Ye?s.globeToMercatorTransition(ce.zoom):0,At=[s.mercatorXfromLng(ce.center.lng),s.mercatorYfromLat(ce.center.lat)],It=[];Ye&&It.push("PROJECTION_GLOBE_VIEW"),We[0]>0&&It.push("FAUX_AO"),tt&&It.push("ZERO_ROOF_RADIUS");for(const Tt of T){const Mt=l.getTile(Tt),Ht=Mt.getBucket(g);if(!Ht||Ht.projection.name!==ce.projection.name)continue;const Nt=Ht.programConfigurations.get(g.id),cn=b.useProgram(ve?"fillExtrusionPattern":"fillExtrusion",Nt,It);if(b.terrain){const Mn=b.terrain;if(b.style.terrainSetForDrapingOnly())Mn.setupElevationDraw(Mt,cn,{useMeterToDem:!0});else{if(!Ht.enableTerrain)continue;if(Mn.setupElevationDraw(Mt,cn,{useMeterToDem:!0}),Br(X,l,Tt,Ht,g,Mn),!Ht.centroidVertexBuffer){const Yn=cn.attributes.a_centroid_pos;Yn!==void 0&&ee.vertexAttrib2f(Yn,0,0)}}}ve&&(b.context.activeTexture.set(ee.TEXTURE0),Mt.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),Nt.updatePaintBuffers());const Nn=le.constantOr(null);if(Nn&&Mt.imageAtlas){const Mn=Mt.imageAtlas.patternPositions[Nn.toString()];Mn&&Nt.setConstantPatternPositions(Mn)}const Vt=b.translatePosMatrix(Tt.projMatrix,Mt,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),Pn=ce.projection.createInversionMatrix(ce,Tt.canonical),fn=g.paint.get("fill-extrusion-vertical-gradient"),Zn=ve?fh(Vt,b,fn,Qe,We,rt,Tt,Mt,Be,lt,At,Pn):Hc(Vt,b,fn,Qe,We,rt,Tt,Be,lt,At,Pn);b.prepareDrawProgram(X,cn,Tt.toUnwrapped());const nn=[];b.terrain&&nn.push(Ht.centroidVertexBuffer),Ye&&nn.push(Ht.layoutVertexExtBuffer),cn.draw(X,X.gl.TRIANGLES,k,R,K,s.CullFaceMode.backCCW,Zn,g.id,Ht.layoutVertexBuffer,Ht.indexBuffer,Ht.segments,g.paint,b.transform.zoom,Nt,nn)}}function Br(b,l,g,T,k,R){const K=[Be=>{let Ye=Be.canonical.x-1,lt=Be.wrap;return Ye<0&&(Ye=(1<<Be.canonical.z)-1,lt--),new s.OverscaledTileID(Be.overscaledZ,lt,Be.canonical.z,Ye,Be.canonical.y)},Be=>{let Ye=Be.canonical.x+1,lt=Be.wrap;return Ye===1<<Be.canonical.z&&(Ye=0,lt++),new s.OverscaledTileID(Be.overscaledZ,lt,Be.canonical.z,Ye,Be.canonical.y)},Be=>new s.OverscaledTileID(Be.overscaledZ,Be.wrap,Be.canonical.z,Be.canonical.x,(Be.canonical.y===0?1<<Be.canonical.z:Be.canonical.y)-1),Be=>new s.OverscaledTileID(Be.overscaledZ,Be.wrap,Be.canonical.z,Be.canonical.x,Be.canonical.y===(1<<Be.canonical.z)-1?0:Be.canonical.y+1)],X=Be=>{const Ye=l.getSource().minzoom,lt=It=>{const Tt=l.getTileByID(It);if(Tt&&Tt.hasData())return Tt.getBucket(k)},At=[0,-1,1];for(const It of At){if(Be.overscaledZ+It<Ye)continue;const Tt=lt(Be.calculateScaledKey(Be.overscaledZ+It));if(Tt)return Tt}},ee=[0,0,0],ce=(Be,Ye)=>(ee[0]=Math.min(Be.min.y,Ye.min.y),ee[1]=Math.max(Be.max.y,Ye.max.y),ee[2]=s.EXTENT-Ye.min.x>Be.max.x?Ye.min.x-s.EXTENT:Be.max.x,ee),le=(Be,Ye)=>(ee[0]=Math.min(Be.min.x,Ye.min.x),ee[1]=Math.max(Be.max.x,Ye.max.x),ee[2]=s.EXTENT-Ye.min.y>Be.max.y?Ye.min.y-s.EXTENT:Be.max.y,ee),ve=[(Be,Ye)=>ce(Be,Ye),(Be,Ye)=>ce(Ye,Be),(Be,Ye)=>le(Be,Ye),(Be,Ye)=>le(Ye,Be)],Qe=new s.Point(0,0);let We,et,tt;const rt=(Be,Ye,lt,At,It)=>{const Tt=[[At?lt:Be,At?Be:lt,0],[At?lt:Ye,At?Ye:lt,0]],Mt=It<0?s.EXTENT+It:It,Ht=[At?Mt:(Be+Ye)/2,At?(Be+Ye)/2:Mt,0];return lt===0&&It<0||lt!==0&&It>0?R.getForTilePoints(tt,[Ht],!0,et):Tt.push(Ht),R.getForTilePoints(g,Tt,!0,We),Math.max(Tt[0][2],Tt[1][2],Ht[2])/R.exaggeration()};for(let Be=0;Be<4;Be++){const Ye=(Be<2?1:5)-Be,lt=T.borders[Be];if(lt.length===0)continue;const At=tt=K[Be](g),It=X(At);if(!(It&&It instanceof s.FillExtrusionBucket&&It.enableTerrain)||T.borderDoneWithNeighborZ[Be]===It.canonical.z&&It.borderDoneWithNeighborZ[Ye]===T.canonical.z||(et=R.findDEMTileFor(At),!et||!et.dem))continue;if(!We){const Nt=R.findDEMTileFor(g);if(!Nt||!Nt.dem)return;We=Nt}const Tt=It.borders[Ye];let Mt=0;const Ht=It.borderDoneWithNeighborZ[Ye]!==T.canonical.z;if(T.canonical.z===It.canonical.z){for(let Nt=0;Nt<lt.length;Nt++){const cn=T.featuresOnBorder[lt[Nt]],Nn=cn.borders[Be];let Vt;for(;Mt<Tt.length&&(Vt=It.featuresOnBorder[Tt[Mt]],!(Vt.borders[Ye][1]>Nn[0]+3));)Ht&&It.encodeCentroid(void 0,Vt,!1),Mt++;if(Vt&&Mt<Tt.length){const Pn=Mt;let fn=0;for(;!(Vt.borders[Ye][0]>Nn[1]-3)&&(fn++,++Mt!==Tt.length);)Vt=It.featuresOnBorder[Tt[Mt]];if(Vt=It.featuresOnBorder[Tt[Pn]],cn.intersectsCount()>1||Vt.intersectsCount()>1||fn!==1){fn!==1&&(Mt=Pn),T.encodeCentroid(void 0,cn,!1),Ht&&It.encodeCentroid(void 0,Vt,!1);continue}const Zn=ve[Be](cn,Vt),nn=Be%2?s.EXTENT-1:0;Qe.x=rt(Zn[0],Math.min(s.EXTENT-1,Zn[1]),nn,Be<2,Zn[2]),Qe.y=0,T.encodeCentroid(Qe,cn,!1),Ht&&It.encodeCentroid(Qe,Vt,!1)}else T.encodeCentroid(void 0,cn,!1)}T.borderDoneWithNeighborZ[Be]=It.canonical.z,T.needsCentroidUpdate=!0,Ht&&(It.borderDoneWithNeighborZ[Ye]=T.canonical.z,It.needsCentroidUpdate=!0)}else{for(const Nt of lt)T.encodeCentroid(void 0,T.featuresOnBorder[Nt],!1);if(Ht){for(const Nt of Tt)It.encodeCentroid(void 0,It.featuresOnBorder[Nt],!1);It.borderDoneWithNeighborZ[Ye]=T.canonical.z,It.needsCentroidUpdate=!0}T.borderDoneWithNeighborZ[Be]=It.canonical.z,T.needsCentroidUpdate=!0}}(T.needsCentroidUpdate||!T.centroidVertexBuffer&&T.centroidVertexArray.length!==0)&&T.uploadCentroid(b)}const po=new s.Color(1,0,0,1),qs=new s.Color(0,1,0,1),as=new s.Color(0,0,1,1),_d=new s.Color(1,0,1,1),wl=new s.Color(0,1,1,1);function ha(b,l,g){const T=b.context,k=b.transform,R=T.gl,K=k.projection.name==="globe",X=K?["PROJECTION_GLOBE_VIEW"]:null;let ee=g.projMatrix;if(K&&s.globeToMercatorTransition(k.zoom)>0){const cn=s.transitionTileAABBinECEF(g.canonical,k),Nn=s.globeDenormalizeECEF(cn);ee=s.multiply(new Float32Array(16),k.globeMatrix,Nn),s.multiply(ee,k.projMatrix,ee)}const ce=b.useProgram("debug",null,X),le=l.getTileByID(g.key);b.terrain&&b.terrain.setupElevationDraw(le,ce);const ve=s.DepthMode.disabled,Qe=s.StencilMode.disabled,We=b.colorModeForRenderPass(),et="$debug";T.activeTexture.set(R.TEXTURE0),b.emptyTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),K?le._makeGlobeTileDebugBuffers(b.context,k):le._makeDebugTileBoundsBuffers(b.context,k.projection);const tt=le._tileDebugBuffer||b.debugBuffer,rt=le._tileDebugIndexBuffer||b.debugIndexBuffer,Be=le._tileDebugSegments||b.debugSegments;ce.draw(T,R.LINE_STRIP,ve,Qe,We,s.CullFaceMode.disabled,yu(ee,s.Color.red),et,tt,rt,Be,null,null,null,[le._globeTileDebugBorderBuffer]);const Ye=le.latestRawTileData,lt=Math.floor((Ye&&Ye.byteLength||0)/1024),At=l.getTile(g).tileSize,It=512/Math.min(At,512)*(g.overscaledZ/k.zoom)*.5;let Tt=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(Tt+=` => ${g.overscaledZ}`),Tt+=` ${lt}kb`,function(cn,Nn){cn.initDebugOverlayCanvas();const Vt=cn.debugOverlayCanvas,Pn=cn.context.gl,fn=cn.debugOverlayCanvas.getContext("2d");fn.clearRect(0,0,Vt.width,Vt.height),fn.shadowColor="white",fn.shadowBlur=2,fn.lineWidth=1.5,fn.strokeStyle="white",fn.textBaseline="top",fn.font="bold 36px Open Sans, sans-serif",fn.fillText(Nn,5,5),fn.strokeText(Nn,5,5),cn.debugOverlayTexture.update(Vt),cn.debugOverlayTexture.bind(Pn.LINEAR,Pn.CLAMP_TO_EDGE)}(b,Tt);const Mt=le._tileDebugTextBuffer||b.debugBuffer,Ht=le._tileDebugTextIndexBuffer||b.quadTriangleIndexBuffer,Nt=le._tileDebugTextSegments||b.debugSegments;ce.draw(T,R.TRIANGLES,ve,Qe,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,yu(ee,s.Color.transparent,It),et,Mt,Ht,Nt,null,null,null,[le._globeTileDebugTextBuffer])}function Cl(b,l,g,T){Hl(b,0,l+g/2,b.transform.width,g,T)}function Mi(b,l,g,T){Hl(b,l-g/2,0,g,b.transform.height,T)}function Hl(b,l,g,T,k,R){const K=b.context,X=K.gl;X.enable(X.SCISSOR_TEST),X.scissor(l*s.exported.devicePixelRatio,g*s.exported.devicePixelRatio,T*s.exported.devicePixelRatio,k*s.exported.devicePixelRatio),K.clear({color:R}),X.disable(X.SCISSOR_TEST)}const Vl=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Gl}=Vl;function no(b,l,g,T){b.emplaceBack(l,g,T)}class wi{constructor(l){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,no(this.vertexArray,-1,-1,1),no(this.vertexArray,1,-1,1),no(this.vertexArray,-1,1,1),no(this.vertexArray,1,1,1),no(this.vertexArray,-1,-1,-1),no(this.vertexArray,1,-1,-1),no(this.vertexArray,-1,1,-1),no(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,Gl),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function Xs(b,l,g,T,k,R){const K=b.gl,X=l.paint.get("sky-atmosphere-color"),ee=l.paint.get("sky-atmosphere-halo-color"),ce=l.paint.get("sky-atmosphere-sun-intensity"),le=((ve,Qe,We,et,tt)=>({u_matrix_3f:ve,u_sun_direction:Qe,u_sun_intensity:We,u_color_tint_r:[et.r,et.g,et.b,et.a],u_color_tint_m:[tt.r,tt.g,tt.b,tt.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),T),k,ce,X,ee);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+R,l.skyboxTexture,0),g.draw(b,K.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,le,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const Zc=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Uh{constructor(l){const g=new s.StructArrayLayout5f20;g.emplaceBack(-1,1,1,0,0),g.emplaceBack(1,1,1,1,0),g.emplaceBack(1,-1,1,1,1),g.emplaceBack(-1,-1,1,0,1);const T=new s.StructArrayLayout3ui6;T.emplaceBack(0,1,2),T.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(g,Zc.members),this.indexBuffer=l.createIndexBuffer(T),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const qc={symbol:function(b,l,g,T,k){if(b.renderPass!=="translucent")return;const R=s.StencilMode.disabled,K=b.colorModeForRenderPass();g.layout.get("text-variable-anchor")&&function(X,ee,ce,le,ve,Qe,We){const et=ee.transform,tt=ve==="map",rt=Qe==="map";for(const Be of X){const Ye=le.getTile(Be),lt=Ye.getBucket(ce);if(!lt||!lt.text||!lt.text.segments.get().length)continue;const At=s.evaluateSizeForZoom(lt.textSizeData,et.zoom),It=Ho(Be,lt.getProjection(),et),Tt=et.calculatePixelsToTileUnitsMatrix(Ye),Mt=hn(It,Ye.tileID.canonical,rt,tt,et,lt.getProjection(),Tt),Ht=ce.layout.get("icon-text-fit")!=="none"&&lt.hasIconData();if(At){const Nt=Math.pow(2,et.zoom-Ye.tileID.overscaledZ);xa(lt,tt,rt,We,s.symbolSize,et,Mt,Be,Nt,At,Ht)}}}(T,b,g,l,g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),k),g.paint.get("icon-opacity").constantOr(1)!==0&&jt(b,l,g,T,!1,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),g.layout.get("icon-rotation-alignment"),g.layout.get("icon-pitch-alignment"),g.layout.get("icon-keep-upright"),R,K),g.paint.get("text-opacity").constantOr(1)!==0&&jt(b,l,g,T,!0,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),g.layout.get("text-keep-upright"),R,K),l.map.showCollisionBoxes&&(Kc(b,l,g,T,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),!0),Kc(b,l,g,T,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),!1))},circle:function(b,l,g,T){if(b.renderPass!=="translucent")return;const k=g.paint.get("circle-opacity"),R=g.paint.get("circle-stroke-width"),K=g.paint.get("circle-stroke-opacity"),X=g.layout.get("circle-sort-key").constantOr(1)!==void 0;if(k.constantOr(1)===0&&(R.constantOr(1)===0||K.constantOr(1)===0))return;const ee=b.context,ce=ee.gl,le=b.transform,ve=b.depthModeForSublayer(0,s.DepthMode.ReadOnly),Qe=s.StencilMode.disabled,We=b.colorModeForRenderPass(),et=le.projection.name==="globe",tt=[s.mercatorXfromLng(le.center.lng),s.mercatorYfromLat(le.center.lat)],rt=[];for(let Ye=0;Ye<T.length;Ye++){const lt=T[Ye],At=l.getTile(lt),It=At.getBucket(g);if(!It||It.projection.name!==le.projection.name)continue;const Tt=It.programConfigurations.get(g.id),Mt=Dh(g);et&&Mt.push("PROJECTION_GLOBE_VIEW");const Ht=b.useProgram("circle",Tt,Mt),Nt=It.layoutVertexBuffer,cn=It.globeExtVertexBuffer,Nn=It.indexBuffer,Vt=le.projection.createInversionMatrix(le,lt.canonical),Pn={programConfiguration:Tt,program:Ht,layoutVertexBuffer:Nt,globeExtVertexBuffer:cn,indexBuffer:Nn,uniformValues:sl(b,lt,At,Vt,tt,g),tile:At};if(X){const fn=It.segments.get();for(const Zn of fn)rt.push({segments:new s.SegmentVector([Zn]),sortKey:Zn.sortKey,state:Pn})}else rt.push({segments:It.segments,sortKey:0,state:Pn})}X&&rt.sort((Ye,lt)=>Ye.sortKey-lt.sortKey);const Be={useDepthForOcclusion:!et};for(const Ye of rt){const{programConfiguration:lt,program:At,layoutVertexBuffer:It,globeExtVertexBuffer:Tt,indexBuffer:Mt,uniformValues:Ht,tile:Nt}=Ye.state,cn=Ye.segments;b.terrain&&b.terrain.setupElevationDraw(Nt,At,Be),b.prepareDrawProgram(ee,At,Nt.tileID.toUnwrapped()),At.draw(ee,ce.TRIANGLES,ve,Qe,We,s.CullFaceMode.disabled,Ht,g.id,It,Mt,cn,g.paint,le.zoom,lt,[Tt])}},heatmap:function(b,l,g,T){if(g.paint.get("heatmap-opacity")!==0)if(b.renderPass==="offscreen"){const k=b.context,R=k.gl,K=s.StencilMode.disabled,X=new s.ColorMode([R.ONE,R.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(We,et,tt,rt){const Be=We.gl,Ye=et.width*rt,lt=et.height*rt;We.activeTexture.set(Be.TEXTURE1),We.viewport.set([0,0,Ye,lt]);let At=tt.heatmapFbo;if(!At||At&&(At.width!==Ye||At.height!==lt)){At&&At.destroy();const It=Be.createTexture();Be.bindTexture(Be.TEXTURE_2D,It),Be.texParameteri(Be.TEXTURE_2D,Be.TEXTURE_WRAP_S,Be.CLAMP_TO_EDGE),Be.texParameteri(Be.TEXTURE_2D,Be.TEXTURE_WRAP_T,Be.CLAMP_TO_EDGE),Be.texParameteri(Be.TEXTURE_2D,Be.TEXTURE_MIN_FILTER,Be.LINEAR),Be.texParameteri(Be.TEXTURE_2D,Be.TEXTURE_MAG_FILTER,Be.LINEAR),At=tt.heatmapFbo=We.createFramebuffer(Ye,lt,!1),function(Tt,Mt,Ht,Nt,cn,Nn){const Vt=Tt.gl;Vt.texImage2D(Vt.TEXTURE_2D,0,Tt.isWebGL2&&Tt.extRenderToTextureHalfFloat?Vt.RGBA16F:Vt.RGBA,cn,Nn,0,Vt.RGBA,Tt.extRenderToTextureHalfFloat?Tt.isWebGL2?Vt.HALF_FLOAT:Tt.extTextureHalfFloat.HALF_FLOAT_OES:Vt.UNSIGNED_BYTE,null),Nt.colorAttachment.set(Ht)}(We,0,It,At,Ye,lt)}else Be.bindTexture(Be.TEXTURE_2D,At.colorAttachment.get()),We.bindFramebuffer.set(At.framebuffer)})(k,b,g,b.transform.projection.name==="globe"?.5:.25),k.clear({color:s.Color.transparent});const ee=b.transform,ce=ee.projection.name==="globe",le=ce?["PROJECTION_GLOBE_VIEW"]:null,ve=ce?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,Qe=[s.mercatorXfromLng(ee.center.lng),s.mercatorYfromLat(ee.center.lat)];for(let We=0;We<T.length;We++){const et=T[We];if(l.hasRenderableParent(et))continue;const tt=l.getTile(et),rt=tt.getBucket(g);if(!rt||rt.projection.name!==ee.projection.name)continue;const Be=rt.programConfigurations.get(g.id),Ye=b.useProgram("heatmap",Be,le),{zoom:lt}=b.transform;b.terrain&&b.terrain.setupElevationDraw(tt,Ye),b.prepareDrawProgram(k,Ye,et.toUnwrapped());const At=ee.projection.createInversionMatrix(ee,et.canonical);Ye.draw(k,R.TRIANGLES,s.DepthMode.disabled,K,X,ve,gd(b,et,tt,At,Qe,lt,g.paint.get("heatmap-intensity")),g.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,g.paint,b.transform.zoom,Be,ce?[rt.globeExtVertexBuffer]:null)}k.viewport.set([0,0,b.width,b.height])}else b.renderPass==="translucent"&&(b.context.setColorMode(b.colorModeForRenderPass()),function(k,R){const K=k.context,X=K.gl,ee=R.heatmapFbo;if(!ee)return;K.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ee.colorAttachment.get()),K.activeTexture.set(X.TEXTURE1);let ce=R.colorRampTexture;ce||(ce=R.colorRampTexture=new s.Texture(K,R.colorRamp,X.RGBA)),ce.bind(X.LINEAR,X.CLAMP_TO_EDGE),k.useProgram("heatmapTexture").draw(K,X.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,k.colorModeForRenderPass(),s.CullFaceMode.disabled,((le,ve,Qe,We)=>({u_image:0,u_color_ramp:1,u_opacity:ve.paint.get("heatmap-opacity")}))(0,R),R.id,k.viewportBuffer,k.quadTriangleIndexBuffer,k.viewportSegments,R.paint,k.transform.zoom)}(b,g))},line:function(b,l,g,T){if(b.renderPass!=="translucent")return;const k=g.paint.get("line-opacity"),R=g.paint.get("line-width");if(k.constantOr(1)===0||R.constantOr(1)===0)return;const K=b.depthModeForSublayer(0,s.DepthMode.ReadOnly),X=b.colorModeForRenderPass(),ee=b.terrain&&b.terrain.renderingToTexture?1:s.exported.devicePixelRatio,ce=g.paint.get("line-dasharray"),le=ce.constantOr(1),ve=g.layout.get("line-cap"),Qe=g.paint.get("line-pattern"),We=Qe.constantOr(1),et=g.paint.get("line-gradient"),tt=We?"linePattern":"line",rt=b.context,Be=rt.gl,Ye=(At=>{const It=[];Gc(At)&&It.push("RENDER_LINE_DASH"),At.paint.get("line-gradient")&&It.push("RENDER_LINE_GRADIENT");const Tt=At.paint.get("line-trim-offset");Tt[0]===0&&Tt[1]===0||It.push("RENDER_LINE_TRIM_OFFSET");const Mt=At.paint.get("line-pattern").constantOr(1),Ht=At.paint.get("line-opacity").constantOr(1)!==1;return!Mt&&Ht&&It.push("RENDER_LINE_ALPHA_DISCARD"),It})(g);let lt=Ye.includes("RENDER_LINE_ALPHA_DISCARD");b.terrain&&b.terrain.clipOrMaskOverlapStencilType()&&(lt=!1);for(const At of T){const It=l.getTile(At);if(We&&!It.patternsLoaded())continue;const Tt=It.getBucket(g);if(!Tt)continue;b.prepareDrawTile();const Mt=Tt.programConfigurations.get(g.id),Ht=b.useProgram(tt,Mt,Ye),Nt=Qe.constantOr(null);if(Nt&&It.imageAtlas){const Mn=It.imageAtlas.patternPositions[Nt.toString()];Mn&&Mt.setConstantPatternPositions(Mn)}const cn=ce.constantOr(null),Nn=ve.constantOr(null);if(!We&&cn&&Nn&&It.lineAtlas){const Mn=It.lineAtlas.getDash(cn,Nn);Mn&&Mt.setConstantPatternPositions(Mn)}let[Vt,Pn]=g.paint.get("line-trim-offset");(Nn==="round"||Nn==="square")&&Vt!==Pn&&(Vt===0&&(Vt-=1),Pn===1&&(Pn+=1));const fn=b.terrain?At.projMatrix:null,Zn=We?lc(b,It,g,fn,ee):Qu(b,It,g,fn,Tt.lineClipsArray.length,ee,[Vt,Pn]);if(et){const Mn=Tt.gradients[g.id];let Yn=Mn.texture;if(g.gradientVersion!==Mn.version){let Vn=256;if(g.stepInterpolant){const si=l.getSource().maxzoom,ar=At.canonical.z===si?Math.ceil(1<<b.transform.maxZoom-At.canonical.z):1;Vn=s.clamp(s.nextPowerOfTwo(Tt.maxLineLength/s.EXTENT*1024*ar),256,rt.maxTextureSize)}Mn.gradient=s.renderColorRamp({expression:g.gradientExpression(),evaluationKey:"lineProgress",resolution:Vn,image:Mn.gradient||void 0,clips:Tt.lineClipsArray}),Mn.texture?Mn.texture.update(Mn.gradient):Mn.texture=new s.Texture(rt,Mn.gradient,Be.RGBA),Mn.version=g.gradientVersion,Yn=Mn.texture}rt.activeTexture.set(Be.TEXTURE1),Yn.bind(g.stepInterpolant?Be.NEAREST:Be.LINEAR,Be.CLAMP_TO_EDGE)}le&&(rt.activeTexture.set(Be.TEXTURE0),It.lineAtlasTexture.bind(Be.LINEAR,Be.REPEAT),Mt.updatePaintBuffers()),We&&(rt.activeTexture.set(Be.TEXTURE0),It.imageAtlasTexture.bind(Be.LINEAR,Be.CLAMP_TO_EDGE),Mt.updatePaintBuffers()),b.prepareDrawProgram(rt,Ht,At.toUnwrapped());const nn=Mn=>{Ht.draw(rt,Be.TRIANGLES,K,Mn,X,s.CullFaceMode.disabled,Zn,g.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,g.paint,b.transform.zoom,Mt,[Tt.layoutVertexBuffer2])};if(lt){const Mn=b.stencilModeForClipping(At).ref;Mn===0&&b.terrain&&rt.clear({stencil:0});const Yn={func:Be.EQUAL,mask:255};Zn.u_alpha_discard_threshold=.8,nn(new s.StencilMode(Yn,Mn,255,Be.KEEP,Be.KEEP,Be.INVERT)),Zn.u_alpha_discard_threshold=0,nn(new s.StencilMode(Yn,Mn,255,Be.KEEP,Be.KEEP,Be.KEEP))}else nn(b.stencilModeForClipping(At))}lt&&(b.resetStencilClippingMasks(),b.terrain&&rt.clear({stencil:0}))},fill:function(b,l,g,T){const k=g.paint.get("fill-color"),R=g.paint.get("fill-opacity");if(R.constantOr(1)===0)return;const K=b.colorModeForRenderPass(),X=g.paint.get("fill-pattern"),ee=b.opaquePassEnabledForLayer()&&!X.constantOr(1)&&k.constantOr(s.Color.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===ee){const ce=b.depthModeForSublayer(1,b.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);wn(b,l,g,T,ce,K,!1)}if(b.renderPass==="translucent"&&g.paint.get("fill-antialias")){const ce=b.depthModeForSublayer(g.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);wn(b,l,g,T,ce,K,!0)}},"fill-extrusion":function(b,l,g,T){const k=g.paint.get("fill-extrusion-opacity");if(k!==0&&b.renderPass==="translucent"){const R=new s.DepthMode(b.context.gl.LEQUAL,s.DepthMode.ReadWrite,b.depthRangeFor3D);if(k!==1||g.paint.get("fill-extrusion-pattern").constantOr(1))Ui(b,l,g,T,R,s.StencilMode.disabled,s.ColorMode.disabled),Ui(b,l,g,T,R,b.stencilModeFor3D(),b.colorModeForRenderPass()),b.resetStencilClippingMasks();else{const K=b.colorModeForRenderPass();Ui(b,l,g,T,R,s.StencilMode.disabled,K)}}},hillshade:function(b,l,g,T){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const k=b.context,R=b.depthModeForSublayer(0,s.DepthMode.ReadOnly),K=b.colorModeForRenderPass(),X=b.terrain&&b.terrain.renderingToTexture,[ee,ce]=b.renderPass!=="translucent"||X?[{},T]:b.stencilConfigForOverlap(T);for(const le of ce){const ve=l.getTile(le);if(ve.needsHillshadePrepare&&b.renderPass==="offscreen")Vo(b,ve,g,R,s.StencilMode.disabled,K);else if(b.renderPass==="translucent"){const Qe=X&&b.terrain?b.terrain.stencilModeForRTTOverlap(le):ee[le.overscaledZ];mu(b,le,ve,g,R,Qe,K)}}k.viewport.set([0,0,b.width,b.height]),b.resetStencilClippingMasks()},raster:function(b,l,g,T,k,R){if(b.renderPass!=="translucent"||g.paint.get("raster-opacity")===0||!T.length)return;const K=b.context,X=K.gl,ee=l.getSource(),ce=b.useProgram("raster"),le=b.colorModeForRenderPass(),ve=b.terrain&&b.terrain.renderingToTexture,[Qe,We]=ee instanceof Zi||ve?[{},T]:b.stencilConfigForOverlap(T),et=We[We.length-1].overscaledZ,tt=!b.options.moving;for(const rt of We){const Be=ve?s.DepthMode.disabled:b.depthModeForSublayer(rt.overscaledZ-et,g.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,X.LESS),Ye=rt.toUnwrapped(),lt=l.getTile(rt);if(ve&&(!lt||!lt.hasData()))continue;const At=ve?rt.projMatrix:b.transform.calculateProjMatrix(Ye,tt),It=b.terrain&&ve?b.terrain.stencilModeForRTTOverlap(rt):Qe[rt.overscaledZ],Tt=R?0:g.paint.get("raster-fade-duration");lt.registerFadeDuration(Tt);const Mt=l.findLoadedParent(rt,0),Ht=bl(lt,Mt,l,b.transform,Tt);let Nt,cn;b.terrain&&b.terrain.prepareDrawTile();const Nn=g.paint.get("raster-resampling")==="nearest"?X.NEAREST:X.LINEAR;K.activeTexture.set(X.TEXTURE0),lt.texture.bind(Nn,X.CLAMP_TO_EDGE),K.activeTexture.set(X.TEXTURE1),Mt?(Mt.texture.bind(Nn,X.CLAMP_TO_EDGE),Nt=Math.pow(2,Mt.tileID.overscaledZ-lt.tileID.overscaledZ),cn=[lt.tileID.canonical.x*Nt%1,lt.tileID.canonical.y*Nt%1]):lt.texture.bind(Nn,X.CLAMP_TO_EDGE),lt.texture.useMipmap&&K.extTextureFilterAnisotropic&&b.transform.pitch>20&&X.texParameterf(X.TEXTURE_2D,K.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,K.extTextureFilterAnisotropicMax);const Vt=Wc(At,cn||[0,0],Nt||1,Ht,g,ee instanceof Zi?ee.perspectiveTransform:[0,0]);if(b.prepareDrawProgram(K,ce,Ye),ee instanceof Zi)ee.boundsBuffer&&ee.boundsSegments&&ce.draw(K,X.TRIANGLES,Be,s.StencilMode.disabled,le,s.CullFaceMode.disabled,Vt,g.id,ee.boundsBuffer,b.quadTriangleIndexBuffer,ee.boundsSegments);else{const{tileBoundsBuffer:Pn,tileBoundsIndexBuffer:fn,tileBoundsSegments:Zn}=b.getTileBoundsBuffers(lt);ce.draw(K,X.TRIANGLES,Be,It,le,s.CullFaceMode.disabled,Vt,g.id,Pn,fn,Zn)}}b.resetStencilClippingMasks()},background:function(b,l,g,T){const k=g.paint.get("background-color"),R=g.paint.get("background-opacity");if(R===0)return;const K=b.context,X=K.gl,ee=b.transform,ce=ee.tileSize,le=g.paint.get("background-pattern");if(b.isPatternMissing(le))return;const ve=!le&&k.a===1&&R===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==ve)return;const Qe=s.StencilMode.disabled,We=b.depthModeForSublayer(0,ve==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),et=b.colorModeForRenderPass(),tt=b.useProgram(le?"backgroundPattern":"background");let rt,Be=T;Be||(rt=b.getBackgroundTiles(),Be=Object.values(rt).map(Ye=>Ye.tileID)),le&&(K.activeTexture.set(X.TEXTURE0),b.imageManager.bind(b.context));for(const Ye of Be){const lt=Ye.toUnwrapped(),At=T?Ye.projMatrix:b.transform.calculateProjMatrix(lt);b.prepareDrawTile();const It=l?l.getTile(Ye):rt?rt[Ye.key]:new s.Tile(Ye,ce,ee.zoom,b),Tt=le?Ga(At,R,b,le,{tileID:Ye,tileSize:ce}):Ia(At,R,k);b.prepareDrawProgram(K,tt,lt);const{tileBoundsBuffer:Mt,tileBoundsIndexBuffer:Ht,tileBoundsSegments:Nt}=b.getTileBoundsBuffers(It);tt.draw(K,X.TRIANGLES,We,Qe,et,s.CullFaceMode.disabled,Tt,g.id,Mt,Ht,Nt)}},sky:function(b,l,g){const T=b.transform,k=T.projection.name==="mercator"||T.projection.name==="globe"?1:s.smoothstep(7,8,T.zoom),R=g.paint.get("sky-opacity")*k;if(R===0)return;const K=b.context,X=g.paint.get("sky-type"),ee=new s.DepthMode(K.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),ce=b.frameCounter/1e3%1;X==="atmosphere"?b.renderPass==="offscreen"?g.needsSkyboxCapture(b)&&(function(le,ve,Qe,We){const et=le.context,tt=et.gl;let rt=ve.skyboxFbo;if(!rt){rt=ve.skyboxFbo=et.createFramebuffer(32,32,!1),ve.skyboxGeometry=new wi(et),ve.skyboxTexture=et.gl.createTexture(),tt.bindTexture(tt.TEXTURE_CUBE_MAP,ve.skyboxTexture),tt.texParameteri(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_WRAP_S,tt.CLAMP_TO_EDGE),tt.texParameteri(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_WRAP_T,tt.CLAMP_TO_EDGE),tt.texParameteri(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_MIN_FILTER,tt.LINEAR),tt.texParameteri(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_MAG_FILTER,tt.LINEAR);for(let At=0;At<6;++At)tt.texImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+At,0,tt.RGBA,32,32,0,tt.RGBA,tt.UNSIGNED_BYTE,null)}et.bindFramebuffer.set(rt.framebuffer),et.viewport.set([0,0,32,32]);const Be=ve.getCenter(le,!0),Ye=le.useProgram("skyboxCapture"),lt=new Float64Array(16);s.identity(lt),s.rotateY(lt,lt,.5*-Math.PI),Xs(et,ve,Ye,lt,Be,0),s.identity(lt),s.rotateY(lt,lt,.5*Math.PI),Xs(et,ve,Ye,lt,Be,1),s.identity(lt),s.rotateX(lt,lt,.5*-Math.PI),Xs(et,ve,Ye,lt,Be,2),s.identity(lt),s.rotateX(lt,lt,.5*Math.PI),Xs(et,ve,Ye,lt,Be,3),s.identity(lt),Xs(et,ve,Ye,lt,Be,4),s.identity(lt),s.rotateY(lt,lt,Math.PI),Xs(et,ve,Ye,lt,Be,5),et.viewport.set([0,0,le.width,le.height])}(b,g),g.markSkyboxValid(b)):b.renderPass==="sky"&&function(le,ve,Qe,We,et){const tt=le.context,rt=tt.gl,Be=le.transform,Ye=le.useProgram("skybox");tt.activeTexture.set(rt.TEXTURE0),rt.bindTexture(rt.TEXTURE_CUBE_MAP,ve.skyboxTexture);const lt=((At,It,Tt,Mt,Ht)=>({u_matrix:At,u_sun_direction:It,u_cubemap:0,u_opacity:Mt,u_temporal_offset:Ht}))(Be.skyboxMatrix,ve.getCenter(le,!1),0,We,et);le.prepareDrawProgram(tt,Ye),Ye.draw(tt,rt.TRIANGLES,Qe,s.StencilMode.disabled,le.colorModeForRenderPass(),s.CullFaceMode.backCW,lt,"skybox",ve.skyboxGeometry.vertexBuffer,ve.skyboxGeometry.indexBuffer,ve.skyboxGeometry.segment)}(b,g,ee,R,ce):X==="gradient"&&b.renderPass==="sky"&&function(le,ve,Qe,We,et){const tt=le.context,rt=tt.gl,Be=le.transform,Ye=le.useProgram("skyboxGradient");ve.skyboxGeometry||(ve.skyboxGeometry=new wi(tt)),tt.activeTexture.set(rt.TEXTURE0);let lt=ve.colorRampTexture;lt||(lt=ve.colorRampTexture=new s.Texture(tt,ve.colorRamp,rt.RGBA)),lt.bind(rt.LINEAR,rt.CLAMP_TO_EDGE);const At=((It,Tt,Mt,Ht,Nt)=>({u_matrix:It,u_color_ramp:0,u_center_direction:Tt,u_radius:s.degToRad(Mt),u_opacity:Ht,u_temporal_offset:Nt}))(Be.skyboxMatrix,ve.getCenter(le,!1),ve.paint.get("sky-gradient-radius"),We,et);le.prepareDrawProgram(tt,Ye),Ye.draw(tt,rt.TRIANGLES,Qe,s.StencilMode.disabled,le.colorModeForRenderPass(),s.CullFaceMode.backCW,At,"skyboxGradient",ve.skyboxGeometry.vertexBuffer,ve.skyboxGeometry.indexBuffer,ve.skyboxGeometry.segment)}(b,g,ee,R,ce)},debug:function(b,l,g){for(let T=0;T<g.length;T++)ha(b,l,g[T])},custom:function(b,l,g,T){const k=b.context,R=g.implementation;if(!b.transform.projection.unsupportedLayers||!b.transform.projection.unsupportedLayers.includes("custom")||b.terrain&&(b.terrain.renderingToTexture||b.renderPass==="offscreen")&&g.isLayerDraped()){if(b.renderPass==="offscreen"){const K=R.prerender;if(K){if(b.setCustomLayerDefaults(),k.setColorMode(b.colorModeForRenderPass()),b.transform.projection.name==="globe"){const X=b.transform.pointMerc;K.call(R,k.gl,b.transform.customLayerMatrix(),b.transform.getProjection(),b.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(b.transform.zoom),[X.x,X.y],b.transform.pixelsPerMeterRatio)}else K.call(R,k.gl,b.transform.customLayerMatrix());k.setDirty(),b.setBaseState()}}else if(b.renderPass==="translucent"){if(b.terrain&&b.terrain.renderingToTexture){const X=R.renderToTile;if(X){const ee=T[0].canonical,ce=new s.MercatorCoordinate(ee.x+T[0].wrap*(1<<ee.z),ee.y,ee.z);k.setDepthMode(s.DepthMode.disabled),k.setStencilMode(s.StencilMode.disabled),k.setColorMode(b.colorModeForRenderPass()),b.setCustomLayerDefaults(),X.call(R,k.gl,ce),k.setDirty(),b.setBaseState()}return}b.setCustomLayerDefaults(),k.setColorMode(b.colorModeForRenderPass()),k.setStencilMode(s.StencilMode.disabled);const K=R.renderingMode==="3d"?new s.DepthMode(b.context.gl.LEQUAL,s.DepthMode.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(k.setDepthMode(K),b.transform.projection.name==="globe"){const X=b.transform.pointMerc;R.render(k.gl,b.transform.customLayerMatrix(),b.transform.getProjection(),b.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(b.transform.zoom),[X.x,X.y],b.transform.pixelsPerMeterRatio)}else R.render(k.gl,b.transform.customLayerMatrix());k.setDirty(),b.setBaseState(),k.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Ka{constructor(l,g,T=!1){this.context=new Tn(l,T),this.transform=g,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,g){const T=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(T||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ah(this,l));const k=this._terrain;this.transform.elevation=T?k:null,k.update(l,this.transform,g)}_updateFog(l){const g=l.fog;if(!g||this.transform.projection.name==="globe"||g.getOpacity(this.transform.pitch)<1||g.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[T,k]=g.getFovAdjustedRange(this.transform._fov);if(T>k)return void(this.transform.fogCullDistSq=null);const R=T+.78*(k-T);this.transform.fogCullDistSq=R*R}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,g){if(this.width=l*s.exported.devicePixelRatio,this.height=g*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const T of this.style.order)this.style._layers[T].resize()}setup(){const l=this.context,g=new s.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(s.EXTENT,0),g.emplaceBack(0,s.EXTENT),g.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(g,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const T=new s.StructArrayLayout2i4;T.emplaceBack(0,0),T.emplaceBack(s.EXTENT,0),T.emplaceBack(0,s.EXTENT),T.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=l.createVertexBuffer(T,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const k=new s.StructArrayLayout2i4;k.emplaceBack(-1,-1),k.emplaceBack(1,-1),k.emplaceBack(-1,1),k.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(k,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const R=new s.StructArrayLayout4i8;R.emplaceBack(0,0,0,0),R.emplaceBack(s.EXTENT,0,s.EXTENT,0),R.emplaceBack(0,s.EXTENT,0,s.EXTENT),R.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(R,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const K=new s.StructArrayLayout3ui6;K.emplaceBack(0,1,2),K.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(K);const X=new s.StructArrayLayout1ui2;for(const ce of[0,1,3,2,0])X.emplaceBack(ce);this.debugIndexBuffer=l.createIndexBuffer(X),this.emptyTexture=new s.Texture(l,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=s.create();const ee=this.context.gl;this.stencilClearMode=new s.StencilMode({func:ee.ALWAYS,mask:0},0,255,ee.ZERO,ee.ZERO,ee.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new Uh(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,g=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,g.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,ya(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,g,T){if(!g||this.currentStencilSource===g.id||!l.isTileClipped()||!T||T.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let X=!1;for(const ee of T)if(this._tileClippingMaskIDs[ee.key]===void 0){X=!0;break}if(!X)return}this.currentStencilSource=g.id;const k=this.context,R=k.gl;this.nextStencilID+T.length>256&&this.clearStencil(),k.setColorMode(s.ColorMode.disabled),k.setDepthMode(s.DepthMode.disabled);const K=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const X of T){const ee=g.getTile(X),ce=this._tileClippingMaskIDs[X.key]=this.nextStencilID++,{tileBoundsBuffer:le,tileBoundsIndexBuffer:ve,tileBoundsSegments:Qe}=this.getTileBoundsBuffers(ee);K.draw(k,R.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:R.ALWAYS,mask:0},ce,255,R.KEEP,R.KEEP,R.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,ya(X.projMatrix),"$clipping",le,ve,Qe)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,g=this.context.gl;return new s.StencilMode({func:g.NOTEQUAL,mask:255},l,255,g.KEEP,g.KEEP,g.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const g=this.context.gl;return new s.StencilMode({func:g.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,g.KEEP,g.KEEP,g.REPLACE)}stencilConfigForOverlap(l){const g=this.context.gl,T=l.sort((K,X)=>X.overscaledZ-K.overscaledZ),k=T[T.length-1].overscaledZ,R=T[0].overscaledZ-k+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();const K={};for(let X=0;X<R;X++)K[X+k]=new s.StencilMode({func:g.GEQUAL,mask:255},X+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=R,[K,T]}return[{[k]:s.StencilMode.disabled},T]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([l.CONSTANT_COLOR,l.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(l,g,T){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const k=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new s.DepthMode(T||this.context.gl.LEQUAL,g,[k,k])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,g){this.style=l,this.options=g,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const T=this.style.order,k=this.style._sourceCaches;for(const ce in k){const le=k[ce];le.used&&le.prepare(this.context)}const R={},K={},X={};for(const ce in k){const le=k[ce];R[ce]=le.getVisibleCoordinates(),K[ce]=R[ce].slice().reverse(),X[ce]=le.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ce=0;ce<T.length;ce++)if(this.style._layers[T[ce]].is3D()){this.opaquePassCutoff=ce;break}if(this.terrain&&(this.terrain.updateTileBinding(X),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const ce of T){const le=this.style._layers[ce],ve=l._getLayerSourceCache(le);if(!le.hasOffscreenPass()||le.isHidden(this.transform.zoom))continue;const Qe=ve?K[ve.id]:void 0;(le.type==="custom"||le.isSky()||Qe&&Qe.length)&&this.renderLayer(this,ve,le,Qe)}this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon];const ee=this.terrain;if(ee&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&ee.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:g.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=g.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const ce=this.style._layers[T[this.currentLayer]],le=l._getLayerSourceCache(ce);if(ce.isSky())continue;const ve=le?K[le.id]:void 0;this._renderTileClippingMasks(ce,le,ve),this.renderLayer(this,le,ce,ve)}if(this.style.fog&&this.transform.projection.supportsFog&&function(ce,le){const ve=ce.context,Qe=ve.gl,We=ce.transform,et=new s.DepthMode(Qe.LEQUAL,s.DepthMode.ReadOnly,[0,1]),tt=ce.useProgram("globeAtmosphere",null,We.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),rt=s.globeToMercatorTransition(We.zoom),Be=le.properties.get("color").toArray01(),Ye=le.properties.get("high-color").toArray01(),lt=le.properties.get("space-color").toArray01PremultipliedAlpha(),At=s.identity$1([]);s.rotateY$1(At,At,-s.degToRad(We._center.lng)),s.rotateX$1(At,At,s.degToRad(We._center.lat)),s.rotateZ$1(At,At,We.angle),s.rotateX$1(At,At,-We._pitch);const It=s.fromQuat(new Float32Array(16),At),Tt=s.mapValue(le.properties.get("star-intensity"),0,1,0,.25),Mt=5e-4,Ht=s.mapValue(le.properties.get("horizon-blend"),0,1,Mt,.25),Nt=s.globeUseCustomAntiAliasing(ce,ve,We)&&Ht===Mt?We.worldSize/(2*Math.PI*1.025)-1:We.globeRadius,cn=ce.frameCounter/1e3%1,Nn=s.length(We.globeCenterInViewSpace),Vt=Math.sqrt(Math.pow(Nn,2)-Math.pow(Nt,2)),Pn=Math.acos(Vt/Nn),fn=((nn,Mn,Yn,Vn,si,ar,Tr,Di,yr,ro,co,Yi,Ro,gs)=>({u_frustum_tl:nn,u_frustum_tr:Mn,u_frustum_br:Yn,u_frustum_bl:Vn,u_horizon:si,u_transition:ar,u_fadeout_range:Tr,u_color:Di,u_high_color:yr,u_space_color:ro,u_star_intensity:co,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Yi,u_horizon_angle:Ro,u_rotation_matrix:gs}))(We.frustumCorners.TL,We.frustumCorners.TR,We.frustumCorners.BR,We.frustumCorners.BL,We.frustumCorners.horizon,rt,Ht,Be,Ye,lt,Tt,cn,Pn,It);ce.prepareDrawProgram(ve,tt);const Zn=ce.atmosphereBuffer;Zn&&tt.draw(ve,Qe.TRIANGLES,et,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,fn,"skybox",Zn.vertexBuffer,Zn.indexBuffer,Zn.segments)}(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const ce=this.style._layers[T[this.currentLayer]],le=l._getLayerSourceCache(ce);ce.isSky()&&this.renderLayer(this,le,ce,le?K[le.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<T.length;){const ce=this.style._layers[T[this.currentLayer]],le=l._getLayerSourceCache(ce);if(ce.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(ce)){if(ce.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const ve=le?(ce.type==="symbol"?X:K)[le.id]:void 0;this._renderTileClippingMasks(ce,le,le?R[le.id]:void 0),this.renderLayer(this,le,ce,ve),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let ce=null;s.values(this.style._layers).forEach(le=>{const ve=l._getLayerSourceCache(le);ve&&!le.isHidden(this.transform.zoom)&&(!ce||ce.getSource().maxzoom<ve.getSource().maxzoom)&&(ce=ve)}),ce&&this.options.showTileBoundaries&&qc.debug(this,ce,ce.getVisibleCoordinates())}this.options.showPadding&&function(ce){const le=ce.transform.padding;Cl(ce,ce.transform.height-(le.top||0),3,po),Cl(ce,le.bottom||0,3,qs),Mi(ce,le.left||0,3,as),Mi(ce,ce.transform.width-(le.right||0),3,_d);const ve=ce.transform.centerPoint;(function(Qe,We,et,tt){Hl(Qe,We-1,et-10,2,20,tt),Hl(Qe,We-10,et-1,20,2,tt)})(ce,ve.x,ce.transform.height-ve.y,wl)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(l,g,T,k){T.isHidden(this.transform.zoom)||(T.type==="background"||T.type==="sky"||T.type==="custom"||k&&k.length)&&(this.id=T.id,this.gpuTimingStart(T),(!l.transform.projection.unsupportedLayers||!l.transform.projection.unsupportedLayers.includes(T.type)||l.terrain&&T.type==="custom")&&qc[T.type](l,g,T,k,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const g=this.context.extTimerQuery;let T=this.gpuTimers[l.id];T||(T=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:g.createQueryEXT()}),T.calls++,g.beginQueryEXT(g.TIME_ELAPSED_EXT,T.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,g=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(g),l.beginQueryEXT(l.TIME_ELAPSED_EXT,g)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const g={};for(const T in l){const k=l[T],R=this.context.extTimerQuery,K=R.getQueryObjectEXT(k.query,R.QUERY_RESULT_EXT)/1e6;R.deleteQueryEXT(k.query),g[T]=K}return g}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const g=this.context.extTimerQuery;let T=0;for(const k of l)T+=g.getQueryObjectEXT(k,g.QUERY_RESULT_EXT)/1e6,g.deleteQueryEXT(k);return T}translatePosMatrix(l,g,T,k,R){if(!T[0]&&!T[1])return l;const K=R?k==="map"?this.transform.angle:0:k==="viewport"?-this.transform.angle:0;if(K){const ce=Math.sin(K),le=Math.cos(K);T=[T[0]*le-T[1]*ce,T[0]*ce+T[1]*le]}const X=[R?T[0]:Wn(g,T[0],this.transform.zoom),R?T[1]:Wn(g,T[1],this.transform.zoom),0],ee=new Float32Array(16);return s.translate(ee,l,X),ee}saveTileTexture(l){const g=this._tileTextures[l.size[0]];g?g.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const g=this._tileTextures[l];return g&&g.length>0?g.pop():null}isPatternMissing(l){return l===null||l!==void 0&&!this.imageManager.getPattern(l.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,g=this.terrain&&this.terrain.exaggeration()===0,T=this.style&&this.style.fog,k=[];return this.terrainRenderModeElevated()&&k.push("TERRAIN"),this.transform.projection.name==="globe"&&k.push("GLOBE"),g&&k.push("ZERO_EXAGGERATION"),T&&!l&&T.getOpacity(this.transform.pitch)!==0&&k.push("FOG"),l&&k.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&k.push("OVERDRAW_INSPECTOR"),k}useProgram(l,g,T){this.cache=this.cache||{};const k=T||[],R=this.currentGlobalDefines().concat(k),K=lo.cacheKey(dh[l],l,R,g);return this.cache[K]||(this.cache[K]=new lo(this.context,l,dh[l],g,gh[l],R)),this.cache[K]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,g,T){if(this.terrain&&this.terrain.renderingToTexture)return;const k=this.style.fog;if(k){const R=k.getOpacity(this.transform.pitch),K=((X,ee,ce,le,ve,Qe,We,et,tt,rt,Be)=>{const Ye=X.transform,lt=ee.properties.get("color").toArray01();lt[3]=le;const At=X.frameCounter/1e3%1;return{u_fog_matrix:ce?Ye.calculateFogTileMatrix(ce):X.identityMat,u_fog_range:ee.getFovAdjustedRange(Ye._fov),u_fog_color:lt,u_fog_horizon_blend:ee.properties.get("horizon-blend"),u_fog_temporal_offset:At,u_frustum_tl:ve,u_frustum_tr:Qe,u_frustum_br:We,u_frustum_bl:et,u_globe_pos:tt,u_globe_radius:rt,u_viewport:Be,u_globe_transition:s.globeToMercatorTransition(Ye.zoom),u_is_globe:+(Ye.projection.name==="globe")}})(this,k,T,R,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);g.setFogUniformValues(l,K)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,g=l.createTexture();return l.bindTexture(l.TEXTURE_2D,g),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),g}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,g=this._backgroundTiles={},T=this.transform.coveringTiles({tileSize:512});for(const k of T)g[k.key]=l[k.key]||new s.Tile(k,512,this.transform.tileZoom,this);return g}clearBackgroundTiles(){this._backgroundTiles={}}}class Xc{constructor(l=0,g=0,T=0,k=0){if(isNaN(l)||l<0||isNaN(g)||g<0||isNaN(T)||T<0||isNaN(k)||k<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=g,this.left=T,this.right=k}interpolate(l,g,T){return g.top!=null&&l.top!=null&&(this.top=s.number(l.top,g.top,T)),g.bottom!=null&&l.bottom!=null&&(this.bottom=s.number(l.bottom,g.bottom,T)),g.left!=null&&l.left!=null&&(this.left=s.number(l.left,g.left,T)),g.right!=null&&l.right!=null&&(this.right=s.number(l.right,g.right,T)),this}getCenter(l,g){const T=s.clamp((this.left+l-this.right)/2,0,l),k=s.clamp((this.top+g-this.bottom)/2,0,g);return new s.Point(T,k)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Xc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Wl(b,l){const g=s.getColumn(b,3);s.fromQuat(b,l),s.setColumn(b,3,g)}function qr(b,l){const g=s.identity$1([]);return s.rotateZ$1(g,g,-l),s.rotateX$1(g,g,-b),g}function xu(b,l){const g=[b[0],b[1],0],T=[l[0],l[1],0];if(s.length(g)>=1e-15){const K=s.normalize([],g);s.scale$2(T,K,s.dot(T,K)),l[0]=T[0],l[1]=T[1]}const k=s.cross([],l,b);if(s.len(k)<1e-15)return null;const R=Math.atan2(-k[1],k[0]);return qr(Math.atan2(Math.sqrt(b[0]*b[0]+b[1]*b[1]),-b[2]),R)}class Sc{constructor(l,g){this.position=l,this.orientation=g}get position(){return this._position}set position(l){if(l){const g=l instanceof s.MercatorCoordinate?l:new s.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(g.x=s.wrap(g.x,0,1)),this._position=g}else this._position=null}lookAtPoint(l,g){if(this.orientation=null,!this.position)return;const T=this.position,k=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(l)):0,R=s.MercatorCoordinate.fromLngLat(l,k),K=[R.x-T.x,R.y-T.y,R.z-T.z];g||(g=[0,0,1]),g[2]=Math.abs(g[2]),this.orientation=xu(K,g)}setPitchBearing(l,g){this.orientation=qr(s.degToRad(l),s.degToRad(-g))}}class uc{constructor(l,g){this._transform=s.identity([]),this.orientation=g,this.position=l}get mercatorPosition(){const l=this.position;return new s.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=s.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var g;l&&s.setColumn(this._transform,3,[(g=l)[0],g[1],g[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||s.identity$1([]),l&&Wl(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),g=this.right();return{bearing:Math.atan2(-g[1],g[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,g){this._orientation=qr(l,g),Wl(this._transform,this._orientation)}forward(){const l=s.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=s.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=s.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,g){const T=new Float64Array(16);return s.invert(T,this.getWorldToCamera(l,g)),T}getWorldToCameraPosition(l,g,T){const k=this.position;s.scale$2(k,k,-l);const R=new Float64Array(16);return s.fromScaling(R,[T,T,T]),s.translate(R,R,k),R[10]*=g,R}getWorldToCamera(l,g){const T=new Float64Array(16),k=new Float64Array(4),R=this.position;return s.conjugate(k,this._orientation),s.scale$2(R,R,-l),s.fromQuat(T,k),s.translate(T,T,R),T[1]*=-1,T[5]*=-1,T[9]*=-1,T[13]*=-1,T[8]*=g,T[9]*=g,T[10]*=g,T[11]*=g,T}getCameraToClipPerspective(l,g,T,k){const R=new Float64Array(16);return s.perspective(R,l,g,T,k),R}getDistanceToElevation(l,g=!1){const T=l===0?0:s.mercatorZfromAltitude(l,g?s.latFromMercatorY(this.position[1]):this.position[1]),k=this.forward();return(T-this.position[2])/k[2]}clone(){return new uc([...this.position],[...this.orientation])}}function Ic(b,l){const g=Kl(b.projection,b.zoom,b.width,b.height),T=function(R,K,X,ee,ce){const le=new s.LngLat(X.lng-180*Za,X.lat),ve=new s.LngLat(X.lng+180*Za,X.lat),Qe=R.project(le.lng,le.lat),We=R.project(ve.lng,ve.lat),et=-Math.atan2(We.y-Qe.y,We.x-Qe.x),tt=s.MercatorCoordinate.fromLngLat(X);tt.y=s.clamp(tt.y,-1+Za,1-Za);const rt=tt.toLngLat(),Be=R.project(rt.lng,rt.lat),Ye=s.MercatorCoordinate.fromLngLat(rt);Ye.x+=Za;const lt=Ye.toLngLat(),At=R.project(lt.lng,lt.lat),It=Mc(At.x-Be.x,At.y-Be.y,et),Tt=s.MercatorCoordinate.fromLngLat(rt);Tt.y+=Za;const Mt=Tt.toLngLat(),Ht=R.project(Mt.lng,Mt.lat),Nt=Mc(Ht.x-Be.x,Ht.y-Be.y,et),cn=Math.abs(It.x)/Math.abs(Nt.y),Nn=s.identity([]);s.rotateZ(Nn,Nn,-et*(1-(ce?0:ee)));const Vt=s.identity([]);return s.scale(Vt,Vt,[1,1-(1-cn)*ee,1]),Vt[4]=-Nt.x/Nt.y*ee,s.rotateZ(Vt,Vt,et),s.multiply(Vt,Nn,Vt),Vt}(b.projection,0,b.center,g,l),k=da(b);return s.scale(T,T,[k,k,1]),T}function da(b){const l=b.projection,g=Kl(b.projection,b.zoom,b.width,b.height),T=cl(l,b.center),k=cl(l,s.LngLat.convert(l.center));return Math.pow(2,T*g+(1-g)*k)}function Kl(b,l,g,T,k=1/0){const R=b.range;if(!R)return 0;const K=Math.min(k,Math.max(g,T)),X=Math.log(K/1024)/Math.LN2;return s.smoothstep(R[0]+X,R[1]+X,l)}const Za=1/4e4;function cl(b,l){const g=s.clamp(l.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),T=new s.LngLat(l.lng-180*Za,g),k=new s.LngLat(l.lng+180*Za,g),R=b.project(T.lng,g),K=b.project(k.lng,g),X=s.MercatorCoordinate.fromLngLat(T),ee=s.MercatorCoordinate.fromLngLat(k),ce=K.x-R.x,le=K.y-R.y,ve=ee.x-X.x,Qe=ee.y-X.y,We=Math.sqrt((ve*ve+Qe*Qe)/(ce*ce+le*le));return Math.log(We)/Math.LN2}function Mc(b,l,g){const T=Math.cos(g),k=Math.sin(g);return{x:b*T-l*k,y:b*k+l*T}}class hc{constructor(l,g,T,k,R,K,X){this.tileSize=512,this._renderWorldCopies=R===void 0||R,this._minZoom=l||0,this._maxZoom=g||22,this._minPitch=T??0,this._maxPitch=k??60,this.setProjection(K),this.setMaxBounds(X),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Xc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new uc,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new hc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l,g=!1){const T=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||T)&&this._updateCameraOnTerrain(),(l||T)&&this._constrainCamera(g),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const g=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const T=!U(g,this.getProjection());return T&&this._calcMatrices(),this.mercatorFromTransition=!1,T}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const g=l!==this.projection.name;return g&&this._calcMatrices(),g}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const g=-l*Math.PI/180;var T;this.angle!==g&&(this._unmodified=!1,this.angle=g,this._calcMatrices(),this.rotationMatrix=(T=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(T[1]=0,T[2]=0),T[0]=1,T[3]=1,T),function(k,R,K){var X=R[0],ee=R[1],ce=R[2],le=R[3],ve=Math.sin(K),Qe=Math.cos(K);k[0]=X*Qe+ce*ve,k[1]=ee*Qe+le*ve,k[2]=X*-ve+ce*Qe,k[3]=ee*-ve+le*Qe}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const g=s.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==g&&(this._unmodified=!1,this._pitch=g,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=s.degToRad(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const g=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==g&&(this._unmodified=!1,this._setZoom(g),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,g=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],T=this.horizonLineFromTop();let k=0,R=0;for(let K=0;K<g.length;K++){const X=new s.Point(g[K][0]*this.width,T+g[K][1]*(this.height-T)),ee=l.pointCoordinate(X);if(!ee)continue;const ce=1/Math.hypot(ee[0]-this._camera.position[0],ee[1]-this._camera.position[1]);k+=ee[3]*ce,R+=ce}return R===0?NaN:k/R}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,g=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),T=this.pixelsPerMeter/this.worldSize*g,k=this._mercatorZfromZoom(l),R=this._mercatorZfromZoom(this._maxZoom),K=Math.max(k-T,R);this._setZoom(this._zoomFromMercatorZ(K))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const g=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let T;T=l.z<this._camera.position[2]?[g.x,g.y,g.z]:[l.x,l.y,l.z];const k=s.length(s.sub([],this._camera.position,T));return s.clamp(this._zoomFromMercatorZ(k),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let g=!1;if(l.orientation&&!s.exactEquals(l.orientation,this._camera.orientation)&&(g=this._setCameraOrientation(l.orientation)),l.position){const T=[l.position.x,l.position.y,l.position.z];s.exactEquals$1(T,this._camera.position)||(this._setCameraPosition(T),g=!0)}g&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,g=new Sc;return g.position=new s.MercatorCoordinate(l[0],l[1],l[2]),g.orientation=this._camera.orientation,g._elevation=this.elevation,g._renderWorldCopies=this.renderWorldCopies,g}_setCameraOrientation(l){if(!s.length$1(l))return!1;s.normalize$1(l,l);const g=s.transformQuat([],[0,0,-1],l),T=s.transformQuat([],[0,-1,0],l);if(T[2]<0)return!1;const k=xu(g,T);return!!k&&(this._camera.orientation=k,!0)}_setCameraPosition(l){const g=this.zoomScale(this.minZoom)*this.tileSize,T=this.zoomScale(this.maxZoom)*this.tileSize,k=this.cameraToCenterDistance;l[2]=s.clamp(l[2],k/T,k/g),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,g,T){this._unmodified=!1,this._edgeInsets.interpolate(l,g,T),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const g=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,g)}getVisibleUnwrappedCoordinates(l){const g=[new s.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const T=this.pointCoordinate(new s.Point(0,0)),k=this.pointCoordinate(new s.Point(this.width,0)),R=this.pointCoordinate(new s.Point(this.width,this.height)),K=this.pointCoordinate(new s.Point(0,this.height)),X=Math.floor(Math.min(T.x,k.x,R.x,K.x)),ee=Math.floor(Math.max(T.x,k.x,R.x,K.x)),ce=1;for(let le=X-ce;le<=ee+ce;le++)le!==0&&g.push(new s.UnwrappedTileID(le,l))}return g}coveringTiles(l){let g=this.coveringZoomLevel(l);const T=g,k=this.elevation&&!l.isTerrainDEM,R=this.projection.name==="mercator";if(l.minzoom!==void 0&&g<l.minzoom)return[];l.maxzoom!==void 0&&g>l.maxzoom&&(g=l.maxzoom);const K=this.locationCoordinate(this.center),X=this.center.lat,ee=1<<g,ce=[ee*K.x,ee*K.y,0],le=this.projection.name==="globe",ve=!le,Qe=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g,ve),We=le?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),et=ee*s.mercatorZfromAltitude(1,this.center.lat),tt=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),rt=[ee*We.x,ee*We.y,tt*(ve?1:et)],Be=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),Ye=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?g:0,lt=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,At=l.isTerrainDEM?-lt:this._elevation?this._elevation.getMinElevationBelowMSL():0,It=this.projection.isReprojectedInTileSpace?da(this):1,Tt=nn=>{const Yn=new s.MercatorCoordinate(nn.x+25e-6,nn.y,nn.z),Vn=new s.MercatorCoordinate(nn.x,nn.y+25e-6,nn.z),si=nn.toLngLat(),ar=Yn.toLngLat(),Tr=Vn.toLngLat(),Di=this.locationCoordinate(si),yr=this.locationCoordinate(ar),ro=this.locationCoordinate(Tr),co=Math.hypot(yr.x-Di.x,yr.y-Di.y),Yi=Math.hypot(ro.x-Di.x,ro.y-Di.y);return Math.sqrt(co*Yi)*It/25e-6},Mt=nn=>{const Mn=lt,Yn=At;return{aabb:s.tileAABB(this,ee,0,0,0,nn,Yn,Mn,this.projection),zoom:0,x:0,y:0,minZ:Yn,maxZ:Mn,wrap:nn,fullyVisible:!1}},Ht=[];let Nt=[];const cn=g,Nn=l.reparseOverscaled?T:g,Vt=nn=>nn*nn,Pn=Vt((tt-this._centerAltitude)*et),fn=nn=>{if(!this._elevation||!nn.tileID||!R)return;const Mn=this._elevation.getMinMaxForTile(nn.tileID),Yn=nn.aabb;Mn?(Yn.min[2]=Mn.min,Yn.max[2]=Mn.max,Yn.center[2]=(Yn.min[2]+Yn.max[2])/2):(nn.shouldSplit=Zn(nn),nn.shouldSplit||(Yn.min[2]=Yn.max[2]=Yn.center[2]=this._centerAltitude))},Zn=nn=>{if(nn.zoom<Ye)return!0;if(nn.zoom===cn)return!1;if(nn.shouldSplit!=null)return nn.shouldSplit;const Mn=nn.aabb.distanceX(rt),Yn=nn.aabb.distanceY(rt);let Vn=Pn,si=1;if(le){Vn=Vt(nn.aabb.distanceZ(rt));const Di=Math.pow(2,nn.zoom),yr=s.latFromMercatorY((nn.y+1)/Di),ro=s.latFromMercatorY(nn.y/Di),co=Math.min(Math.max(X,yr),ro),Yi=s.circumferenceAtLatitude(co)/s.circumferenceAtLatitude(X);if(si=co===X?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Yi/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&nn.zoom===cn-1&&Yi>=.9)return!0}else if(k&&(Vn=Vt(nn.aabb.distanceZ(rt)*et)),this.projection.isReprojectedInTileSpace&&T<=5){const Di=Math.pow(2,nn.zoom),yr=Tt(new s.MercatorCoordinate((nn.x+.5)/Di,(nn.y+.5)/Di));si=yr>.85?1:yr}const ar=Mn*Mn+Yn*Yn+Vn,Tr=Vt((1<<cn-nn.zoom)*Be*si*((Di,yr)=>{if(yr*Vt(.707)<Di)return 1;const ro=Math.sqrt(yr/Di);return ro/(1.4144271570014144+(Math.pow(1.1,ro-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Vn,Pn),ar));return ar<Tr};if(this.renderWorldCopies)for(let nn=1;nn<=3;nn++)Ht.push(Mt(-nn)),Ht.push(Mt(nn));for(Ht.push(Mt(0));Ht.length>0;){const nn=Ht.pop(),Mn=nn.x,Yn=nn.y;let Vn=nn.fullyVisible;if(!Vn){const si=nn.aabb.intersects(Qe);if(si===0)continue;Vn=si===2}if(nn.zoom!==cn&&Zn(nn))for(let si=0;si<4;si++){const ar=(Mn<<1)+si%2,Tr=(Yn<<1)+(si>>1),Di={aabb:R?nn.aabb.quadrant(si):s.tileAABB(this,ee,nn.zoom+1,ar,Tr,nn.wrap,nn.minZ,nn.maxZ,this.projection),zoom:nn.zoom+1,x:ar,y:Tr,wrap:nn.wrap,fullyVisible:Vn,tileID:void 0,shouldSplit:void 0,minZ:nn.minZ,maxZ:nn.maxZ};k&&!le&&(Di.tileID=new s.OverscaledTileID(nn.zoom+1===cn?Nn:nn.zoom+1,nn.wrap,nn.zoom+1,ar,Tr),fn(Di)),Ht.push(Di)}else{const si=nn.zoom===cn?Nn:nn.zoom;if(l.minzoom&&l.minzoom>si)continue;const ar=ce[0]-(.5+Mn+(nn.wrap<<nn.zoom))*(1<<g-nn.zoom),Tr=ce[1]-.5-Yn,Di=nn.tileID?nn.tileID:new s.OverscaledTileID(si,nn.wrap,nn.zoom,Mn,Yn);Nt.push({tileID:Di,distanceSq:ar*ar+Tr*Tr})}}if(this.fogCullDistSq){const nn=this.fogCullDistSq,Mn=this.horizonLineFromTop();Nt=Nt.filter(Yn=>{const Vn=[0,0,0,1],si=[s.EXTENT,s.EXTENT,0,1],ar=this.calculateFogTileMatrix(Yn.tileID.toUnwrapped());s.transformMat4$1(Vn,Vn,ar),s.transformMat4$1(si,si,ar);const Tr=s.getAABBPointSquareDist(Vn,si);if(Tr===0)return!0;let Di=!1;const yr=this._elevation;if(yr&&Tr>nn&&Mn!==0){const ro=this.calculateProjMatrix(Yn.tileID.toUnwrapped());let co;l.isTerrainDEM||(co=yr.getMinMaxForTile(Yn.tileID)),co||(co={min:At,max:lt});const Yi=s.furthestTileCorner(this.rotation),Ro=[Yi[0]*s.EXTENT,Yi[1]*s.EXTENT,co.max];s.transformMat4(Ro,Ro,ro),Di=(1-Ro[1])*this.height*.5<Mn}return Tr<nn||Di})}return Nt.sort((nn,Mn)=>nn.distanceSq-Mn.distanceSq).map(nn=>nn.tileID)}resize(l,g){this.width=l,this.height=g,this.pixelsToGLUnits=[2/l,-2/g],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const g=s.clamp(l.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),T=this.projection.project(l.lng,g);return new s.Point(T.x*this.worldSize,T.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,g){let T,k;const R=this.centerPoint;if(this.projection.name==="globe"){const X=this.worldSize;T=(g.x-R.x)/X,k=(g.y-R.y)/X}else{const X=this.pointCoordinate(g),ee=this.pointCoordinate(R);T=X.x-ee.x,k=X.y-ee.y}const K=this.locationCoordinate(l);this.setLocation(new s.MercatorCoordinate(K.x-T,K.y-k))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,g){const T=g?s.mercatorZfromAltitude(g,l.lat):void 0,k=this.projection.project(l.lng,l.lat);return new s.MercatorCoordinate(k.x,k.y,T)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,g){const T=g??this._centerAltitude,k=[l.x,l.y,0,1],R=[l.x,l.y,1,1];s.transformMat4$1(k,k,this.pixelMatrixInverse),s.transformMat4$1(R,R,this.pixelMatrixInverse);const K=R[3];s.scale$1(k,k,1/k[3]),s.scale$1(R,R,1/K);const X=k[2],ee=R[2];return{p0:k,p1:R,t:X===ee?0:(T-X)/(ee-X)}}screenPointToMercatorRay(l){const g=[l.x,l.y,0,1],T=[l.x,l.y,1,1];return s.transformMat4$1(g,g,this.pixelMatrixInverse),s.transformMat4$1(T,T,this.pixelMatrixInverse),s.scale$1(g,g,1/g[3]),s.scale$1(T,T,1/T[3]),g[2]=s.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,T[2]=s.mercatorZfromAltitude(T[2],this._center.lat)*this.worldSize,s.scale$1(g,g,1/this.worldSize),s.scale$1(T,T,1/this.worldSize),new s.Ray([g[0],g[1],g[2]],s.normalize([],s.sub([],T,g)))}rayIntersectionCoordinate(l){const{p0:g,p1:T,t:k}=l,R=s.mercatorZfromAltitude(g[2],this._center.lat),K=s.mercatorZfromAltitude(T[2],this._center.lat);return new s.MercatorCoordinate(s.number(g[0],T[0],k)/this.worldSize,s.number(g[1],T[1],k)/this.worldSize,s.number(R,K,k))}pointCoordinate(l,g=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,g)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let g=this.projection.pointCoordinate3D(this,l.x,l.y);if(g)return new s.MercatorCoordinate(g[0],g[1],g[2]);let T=0,k=this.horizonLineFromTop();if(l.y>k)return this.pointCoordinate(l);const R=.02*k,K=l.clone();for(let X=0;X<10&&k-T>R;X++){K.y=s.number(T,k,.66);const ee=this.projection.pointCoordinate3D(this,K.x,K.y);ee?(k=K.y,g=ee):T=K.y}return g?new s.MercatorCoordinate(g[0],g[1],g[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(l);const g=this.pointCoordinate(l);return g.y>=0&&g.y<=1}_coordinatePoint(l,g){const T=g&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,k=[l.x*this.worldSize,l.y*this.worldSize,T+l.toAltitude(),1];return s.transformMat4$1(k,k,this.pixelMatrix),k[3]>0?new s.Point(k[0]/k[3],k[1]/k[3]):new s.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:g}=this._edgeInsets,T=this.height-this._edgeInsets.bottom,k=this.width-this._edgeInsets.right,R=this.pointLocation3D(new s.Point(g,l)),K=this.pointLocation3D(new s.Point(k,l)),X=this.pointLocation3D(new s.Point(k,T)),ee=this.pointLocation3D(new s.Point(g,T));let ce=Math.min(R.lng,K.lng,X.lng,ee.lng),le=Math.max(R.lng,K.lng,X.lng,ee.lng),ve=Math.min(R.lat,K.lat,X.lat,ee.lat),Qe=Math.max(R.lat,K.lat,X.lat,ee.lat);const We=Math.pow(2,-this.zoom)/16*270,et=this.projection.name==="globe"?1:4,tt=(rt,Be,Ye,lt,At)=>{const It=(rt+Ye)/2,Tt=(Be+lt)/2,Mt=new s.Point(It,Tt),{lng:Ht,lat:Nt}=this.pointLocation3D(Mt),cn=Math.max(0,ce-Ht,ve-Nt,Ht-le,Nt-Qe);ce=Math.min(ce,Ht),le=Math.max(le,Ht),ve=Math.min(ve,Nt),Qe=Math.max(Qe,Nt),(At<et||cn>We)&&(tt(rt,Be,It,Tt,At+1),tt(It,Tt,Ye,lt,At+1))};if(tt(g,l,k,l,1),tt(k,l,k,T,1),tt(k,T,g,T,1),tt(g,T,g,l,1),this.projection.name==="globe"){const[rt,Be]=s.polesInViewport(this);rt?(Qe=90,le=180,ce=-180):Be&&(ve=-90,le=180,ce=-180)}return new s.LngLatBounds(new s.LngLat(ce,ve),new s.LngLat(le,Qe))}_getBoundsRectangular(l,g){const{top:T,left:k}=this._edgeInsets,R=this.height-this._edgeInsets.bottom,K=this.width-this._edgeInsets.right,X=new s.Point(k,T),ee=new s.Point(K,T),ce=new s.Point(K,R),le=new s.Point(k,R);let ve=this.pointCoordinate(X,l),Qe=this.pointCoordinate(ee,l);const We=this.pointCoordinate(ce,g),et=this.pointCoordinate(le,g),tt=(rt,Be)=>(Be.y-rt.y)/(Be.x-rt.x);return ve.y>1&&Qe.y>=0?ve=new s.MercatorCoordinate((1-et.y)/tt(et,ve)+et.x,1):ve.y<0&&Qe.y<=1&&(ve=new s.MercatorCoordinate(-et.y/tt(et,ve)+et.x,0)),Qe.y>1&&ve.y>=0?Qe=new s.MercatorCoordinate((1-We.y)/tt(We,Qe)+We.x,1):Qe.y<0&&ve.y<=1&&(Qe=new s.MercatorCoordinate(-We.y/tt(We,Qe)+We.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(ve)).extend(this.coordinateLocation(Qe)).extend(this.coordinateLocation(et)).extend(this.coordinateLocation(We))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const g=l.visibleDemTiles.reduce((T,k)=>{if(k.dem){const R=k.dem.tree;T.min=Math.min(T.min,R.minimums[0]),T.max=Math.max(T.max,R.maximums[0])}return T},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(g.min*l.exaggeration(),g.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const g=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,T=this.height/2-g*(1-this._horizonShift);return l?Math.max(0,T):T}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,g){return this.projection.createTileMatrix(this,g,l)}calculateDistanceTileData(l){const g=l.key,T=this._distanceTileDataCache;if(T[g])return T[g];const k=l.canonical,R=1/this.height,K=this.cameraWorldSize,X=K/this.zoomScale(k.z),ee=(k.x+Math.pow(2,k.z)*l.wrap)*X,ce=k.y*X,le=this.point;le.x*=K/this.worldSize,le.y*=K/this.worldSize;const ve=this.angle,Qe=Math.sin(-ve),We=-Math.cos(-ve);return T[g]={bearing:[Qe,We],center:[(le.x-ee)*R,(le.y-ce)*R],scale:X/s.EXTENT*R},T[g]}calculateFogTileMatrix(l){const g=l.key,T=this._fogTileMatrixCache;if(T[g])return T[g];const k=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return s.multiply(k,this.worldToFogMatrix,k),T[g]=new Float32Array(k),T[g]}calculateProjMatrix(l,g=!1){const T=l.key,k=g?this._alignedProjMatrixCache:this._projMatrixCache;if(k[T])return k[T];const R=this.calculatePosMatrix(l,this.worldSize);return s.multiply(R,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:g?this.alignedProjMatrix:this.projMatrix,R),k[T]=new Float32Array(R),k[T]}calculatePixelsToTileUnitsMatrix(l){const g=l.tileID.key,T=this._pixelsToTileUnitsCache;if(T[g])return T[g];const k=function(R,K){const{scale:X}=R.tileTransform,ee=X*s.EXTENT/(R.tileSize*Math.pow(2,K.zoom-R.tileID.overscaledZ+R.tileID.canonical.z));return ce=new Float32Array(4),Qe=(le=K.inverseAdjustmentMatrix)[1],We=le[2],et=le[3],rt=(ve=[ee,ee])[1],ce[0]=le[0]*(tt=ve[0]),ce[1]=Qe*tt,ce[2]=We*rt,ce[3]=et*rt,ce;var ce,le,ve,Qe,We,et,tt,rt}(l,this);return T[g]=k,T[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,g=s.fromScaling([],[l,l,l]);return s.multiply(g,g,this.globeMatrix),g}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const g=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,T=this._computeCameraPosition(g),k=this._camera.forward(),R=s.mercatorZfromAltitude(1,this._center.lat);T[2]/=R,k[2]/=R,s.normalize(k,k);const K=l.raycast(T,k,l.exaggeration());if(K){const X=s.scaleAndAdd([],T,k,K),ee=new s.MercatorCoordinate(X[0],X[1],s.mercatorZfromAltitude(X[2],s.latFromMercatorY(X[1]))),ce=(ee.z+s.length([ee.x-T[0],ee.y-T[1],ee.z-T[2]*R]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(ce),this._centerAltitude=ee.toAltitude(),this._center=this.coordinateLocation(ee),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const g=this._elevation,T=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,k=this._computeCameraPosition(T),R=g.getAtPointOrZero(new s.MercatorCoordinate(...k)),K=this.pixelsPerMeter/this.worldSize*R,X=this._minimumHeightOverTerrain(),ee=k[2]-K;if(ee<=X)if(ee<0||l){const ce=this.locationCoordinate(this._center,this._centerAltitude),le=[k[0],k[1],ce.z-k[2]],ve=s.length(le);le[2]-=(X-ee)/this._pixelsPerMercatorPixel;const Qe=s.length(le);if(Qe===0)return;s.scale$2(le,le,ve/Qe*this._pixelsPerMercatorPixel),this._camera.position=[k[0],k[1],ce.z*this._pixelsPerMercatorPixel-le[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const Qe=this.center;return Qe.lat=s.clamp(Qe.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(Qe.lng=s.clamp(Qe.lng,this.minLng,this.maxLng)),this.center=Qe,void(this._constraining=!1)}const g=this._unmodified,{x:T,y:k}=this.point;let R=0,K=T,X=k;const ee=this.width/2,ce=this.height/2,le=this.worldMinY*this.scale,ve=this.worldMaxY*this.scale;if(k-ce<le&&(X=le+ce),k+ce>ve&&(X=ve-ce),ve-le<this.height&&(R=Math.max(R,this.height/(ve-le)),X=(ve+le)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Qe=this.worldMinX*this.scale,We=this.worldMaxX*this.scale,et=this.worldSize/2-(Qe+We)/2;K=(T+et+this.worldSize)%this.worldSize-et,K-ee<Qe&&(K=Qe+ee),K+ee>We&&(K=We-ee),We-Qe<this.width&&(R=Math.max(R,this.width/(We-Qe)),K=(We+Qe)/2)}K===T&&X===k||(this.center=this.unproject(new s.Point(K,X))),R&&(this.zoom+=this.scaleZoom(R)),this._constrainCamera(),this._unmodified=g,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,g=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const T=Kl(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,T),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const k=this.projection.zAxisUnit==="meters"?g:1,R=this._camera.getWorldToCamera(this.worldSize,k),K=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);K[8]=2*-l.x/this.width,K[9]=2*l.y/this.height;let X=s.mul([],K,R);if(this.projection.isReprojectedInTileSpace){const Tt=this.locationCoordinate(this.center),Mt=s.identity([]);s.translate(Mt,Mt,[Tt.x*this.worldSize,Tt.y*this.worldSize,0]),s.multiply(Mt,Mt,Ic(this)),s.translate(Mt,Mt,[-Tt.x*this.worldSize,-Tt.y*this.worldSize,0]),s.multiply(X,X,Mt),this.inverseAdjustmentMatrix=function(Ht){const Nt=Ic(Ht,!0);return Xe([],[Nt[0],Nt[1],Nt[4],Nt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],X,[this.worldSize,this.worldSize,this.worldSize/k,1]),this.projMatrix=X,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const ee=s.invert([],K);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(ee,this.horizonLineFromTop(),this.height);const ce=new Float32Array(16);s.identity(ce),s.scale(ce,ce,[1,-1,1]),s.rotateX(ce,ce,this._pitch),s.rotateZ(ce,ce,this.angle);const le=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),ve=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;le[8]=2*-l.x/this.width,le[9]=2*(l.y+ve)/this.height,this.skyboxMatrix=s.multiply(ce,le,ce);const Qe=this.point,We=Qe.x,et=Qe.y,tt=this.width%2/2,rt=this.height%2/2,Be=Math.cos(this.angle),Ye=Math.sin(this.angle),lt=We-Math.round(We)+Be*tt+Ye*rt,At=et-Math.round(et)+Be*rt+Ye*tt,It=new Float64Array(X);if(s.translate(It,It,[lt>.5?lt-1:lt,At>.5?At-1:At,0]),this.alignedProjMatrix=It,X=s.create(),s.scale(X,X,[this.width/2,-this.height/2,1]),s.translate(X,X,[1,-1,0]),this.labelPlaneMatrix=X,X=s.create(),s.scale(X,X,[1,-1,1]),s.translate(X,X,[-1,-1,0]),s.scale(X,X,[2/this.width,2/this.height,1]),this.glCoordMatrix=X,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},X=s.invert(new Float64Array(16),this.pixelMatrix),!X)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=X,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const Tt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(Tt,Tt,R),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=X;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,g=this.cameraPixelsPerMeter,T=this._camera.position,k=1/this.height/this._pixelsPerMercatorPixel,R=[l,l,g];s.scale$2(R,R,k),s.scale$2(T,T,-1),s.multiply$2(T,T,R);const K=s.create();s.translate(K,K,T),s.scale(K,K,R),this.mercatorFogMatrix=K,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,g,k)}_computeCameraPosition(l){const g=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,T=this._camera.forward(),k=this.point,R=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*g-l/this.worldSize*this._centerAltitude;return[k.x/this.worldSize-T[0]*R,k.y/this.worldSize-T[1]*R,l/this.worldSize*this._centerAltitude-T[2]*R]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const g=this._maxCameraBoundsDistance()*Math.cos(this._pitch),T=this._camera.position[2],k=l[2];let R=1;this.projection.wrap&&(this.center=this.center.wrap()),k>0&&(R=Math.min((g-T)/k,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,l,R),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,g=this._camera.forward(),{pitch:T,bearing:k}=this._camera.getPitchBearing(),R=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,K=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),X=Math.max((l[2]-R)/Math.cos(T),K),ee=this._zoomFromMercatorZ(X);s.scaleAndAdd(l,l,g,X),this._pitch=s.clamp(T,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(k,-Math.PI,Math.PI),this._setZoom(s.clamp(ee,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let g=0,T=s.GLOBE_ZOOM_THRESHOLD_MAX,k=0,R=1/0;for(;T-g>1e-6&&T>g;){const K=g+.5*(T-g),X=this.tileSize*Math.pow(2,K),ee=this.getCameraToCenterDistance(this.projection,K,X),ce=this.scaleZoom(ee/(l*this.tileSize)),le=Math.abs(K-ce);le<R&&(R=le,k=K),K<ce?g=K:T=K}return k}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,g){const T=Math.min(l.x,g.x),k=Math.max(l.x,g.x),R=Math.min(l.y,g.y),K=Math.max(l.y,g.y);if(R<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const X=[new s.Point(T,R),new s.Point(k,K),new s.Point(T,K),new s.Point(k,R)],ee=this.renderWorldCopies?-3:0,ce=this.renderWorldCopies?4:1;for(const le of X){const ve=this.pointRayIntersection(le);if(ve.t<0)return!0;const Qe=this.rayIntersectionCoordinate(ve);if(Qe.x<ee||Qe.y<0||Qe.x>ce||Qe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.Point(0,0),new s.Point(this.width,this.height))}zoomDeltaToMovement(l,g){const T=s.length(s.sub([],this._camera.position,l)),k=this._zoomFromMercatorZ(T)+g;return T-this._mercatorZfromZoom(k)}getCameraPoint(){if(this.projection.name==="globe"){const l=function([g,T,k],R){const K=[g,T,k,1];s.transformMat4$1(K,K,R);const X=K[3]=Math.max(K[3],1e-6);return K[0]/=X,K[1]/=X,K[2]/=X,K}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.Point(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,l))}}getCameraToCenterDistance(l,g=this.zoom,T=this.worldSize){const k=Kl(l,g,this.width,this.height,1024),R=l.pixelSpaceConversion(this.center.lat,T,k);return .5/Math.tan(.5*this._fov)*this.height*R}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(l,l,this.globeMatrix),l}}function bu(b,l){let g=!1,T=null;const k=()=>{T=null,g&&(b(),T=setTimeout(k,l),g=!1)};return()=>(g=!0,T||k(),T)}class ul{constructor(l){this._hashName=l&&encodeURIComponent(l),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=bu(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,s.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const g=Oo(l);if(this._hashName){const T=this._hashName;let k=!1;const R=s.window.location.hash.slice(1).split("&").map(K=>{const X=K.split("=")[0];return X===T?(k=!0,`${X}=${g}`):K}).filter(K=>K);return k||R.push(`${T}=${g}`),`#${R.join("&")}`}return`#${g}`}_getCurrentHash(){const l=s.window.location.hash.replace("#","");if(this._hashName){let g;return l.split("&").map(T=>T.split("=")).forEach(T=>{T[0]===this._hashName&&(g=T)}),(g&&g[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const g=this._getCurrentHash();if(g.length>=3&&!g.some(T=>isNaN(T))){const T=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(g[3]||0):l.getBearing();return l.jumpTo({center:[+g[2],+g[1]],zoom:+g[0],bearing:T,pitch:+(g[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,l)}}function Oo(b,l){const g=b.getCenter(),T=Math.round(100*b.getZoom())/100,k=Math.ceil((T*Math.LN2+Math.log(512/360/.5))/Math.LN10),R=Math.pow(10,k),K=Math.round(g.lng*R)/R,X=Math.round(g.lat*R)/R,ee=b.getBearing(),ce=b.getPitch();let le=l?`/${K}/${X}/${T}`:`${T}/${X}/${K}`;return(ee||ce)&&(le+="/"+Math.round(10*ee)/10),ce&&(le+=`/${Math.round(ce)}`),le}const Bl={linearity:.3,easing:s.bezier(0,0,.3,1)},Yc=s.extend({deceleration:2500,maxSpeed:1400},Bl),_=s.extend({deceleration:20,maxSpeed:1400},Bl),E=s.extend({deceleration:1e3,maxSpeed:360},Bl),G=s.extend({deceleration:1e3,maxSpeed:90},Bl);class ne{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,g=s.exported.now();for(;l.length>0&&g-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const g={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:R}of this._inertiaBuffer)g.zoom+=R.zoomDelta||0,g.bearing+=R.bearingDelta||0,g.pitch+=R.pitchDelta||0,R.panDelta&&g.pan._add(R.panDelta),R.around&&(g.around=R.around),R.pinchAround&&(g.pinchAround=R.pinchAround);const T=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(g.pan.mag()){const R=Ne(g.pan.mag(),T,s.extend({},Yc,l||{}));k.offset=g.pan.mult(R.amount/g.pan.mag()),k.center=this._map.transform.center,ge(k,R)}if(g.zoom){const R=Ne(g.zoom,T,_);k.zoom=this._map.transform.zoom+R.amount,ge(k,R)}if(g.bearing){const R=Ne(g.bearing,T,E);k.bearing=this._map.transform.bearing+s.clamp(R.amount,-179,179),ge(k,R)}if(g.pitch){const R=Ne(g.pitch,T,G);k.pitch=this._map.transform.pitch+R.amount,ge(k,R)}if(k.zoom||k.bearing){const R=g.pinchAround===void 0?g.around:g.pinchAround;k.around=R?this._map.unproject(R):this._map.getCenter()}return this.clear(),k.noMoveStart=!0,k}}function ge(b,l){(!b.duration||b.duration<l.duration)&&(b.duration=l.duration,b.easing=l.easing)}function Ne(b,l,g){const{maxSpeed:T,linearity:k,deceleration:R}=g,K=s.clamp(b*k/(l/1e3),-T,T),X=Math.abs(K)/(R*k);return{easing:g.easing,duration:1e3*X,amount:K*(X/2)}}class at extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,g,T,k={}){const R=Se(g.getCanvasContainer(),T),K=g.unproject(R);super(l,s.extend({point:R,lngLat:K,originalEvent:T},k)),this._defaultPrevented=!1,this.target=g}}class Dt extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,g,T){const k=l==="touchend"?T.changedTouches:T.touches,R=nt(g.getCanvasContainer(),k),K=R.map(ee=>g.unproject(ee)),X=R.reduce((ee,ce,le,ve)=>ee.add(ce.div(ve.length)),new s.Point(0,0));super(l,{points:R,point:X,lngLats:K,lngLat:g.unproject(X),originalEvent:T}),this._defaultPrevented=!1}}class _n extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,g,T){super(l,{originalEvent:T}),this._defaultPrevented=!1}}class ni{constructor(l,g){this._map=l,this._clickTolerance=g.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new _n(l.type,this._map,l))}mousedown(l,g){return this._mousedownPos=g,this._firePreventable(new at(l.type,this._map,l))}mouseup(l){this._map.fire(new at(l.type,this._map,l))}preclick(l){const g=s.extend({},l);g.type="preclick",this._map.fire(new at(g.type,this._map,g))}click(l,g){this._mousedownPos&&this._mousedownPos.dist(g)>=this._clickTolerance||(this.preclick(l),this._map.fire(new at(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new at(l.type,this._map,l))}mouseover(l){this._map.fire(new at(l.type,this._map,l))}mouseout(l){this._map.fire(new at(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Dt(l.type,this._map,l))}touchmove(l){this._map.fire(new Dt(l.type,this._map,l))}touchend(l){this._map.fire(new Dt(l.type,this._map,l))}touchcancel(l){this._map.fire(new Dt(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ti{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new at(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new at("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new at(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hi{constructor(l,g){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=g.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,g){this.isEnabled()&&l.shiftKey&&l.button===0&&(xe(),this._startPos=this._lastPos=g,this._active=!0)}mousemoveWindow(l,g){if(!this._active)return;const T=g,k=this._startPos,R=this._lastPos;if(!k||!R||R.equals(T)||!this._box&&T.dist(k)<this._clickTolerance)return;this._lastPos=T,this._box||(this._box=te("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const K=Math.min(k.x,T.x),X=Math.max(k.x,T.x),ee=Math.min(k.y,T.y),ce=Math.max(k.y,T.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${K}px,${ee}px)`,this._box.style.width=X-K+"px",this._box.style.height=ce-ee+"px")})}mouseupWindow(l,g){if(!this._active)return;const T=this._startPos,k=g;if(T&&l.button===0){if(this.reset(),Fe(),T.x!==k.x||T.y!==k.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:R=>R.fitScreenCoordinates(T,k,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Te(),delete this._startPos,delete this._lastPos}_fireEvent(l,g){return this._map.fire(new s.Event(l,{originalEvent:g}))}}function kr(b,l){const g={};for(let T=0;T<b.length;T++)g[b[T].identifier]=l[T];return g}class zo{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,g,T){(this.centroid||T.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),T.length===this.numTouches&&(this.centroid=function(k){const R=new s.Point(0,0);for(const K of k)R._add(K);return R.div(k.length)}(g),this.touches=kr(T,g)))}touchmove(l,g,T){if(this.aborted||!this.centroid)return;const k=kr(T,g);for(const R in this.touches){const K=k[R];(!K||K.dist(this.touches[R])>30)&&(this.aborted=!0)}}touchend(l,g,T){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),T.length===0){const k=!this.aborted&&this.centroid;if(this.reset(),k)return k}}}class ws{constructor(l){this.singleTap=new zo(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,g,T){this.singleTap.touchstart(l,g,T)}touchmove(l,g,T){this.singleTap.touchmove(l,g,T)}touchend(l,g,T){const k=this.singleTap.touchend(l,g,T);if(k){const R=l.timeStamp-this.lastTime<500,K=!this.lastTap||this.lastTap.dist(k)<30;if(R&&K||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=k,this.count===this.numTaps)return this.reset(),k}}}class Ps{constructor(){this._zoomIn=new ws({numTouches:1,numTaps:2}),this._zoomOut=new ws({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,g,T){this._zoomIn.touchstart(l,g,T),this._zoomOut.touchstart(l,g,T)}touchmove(l,g,T){this._zoomIn.touchmove(l,g,T),this._zoomOut.touchmove(l,g,T)}touchend(l,g,T){const k=this._zoomIn.touchend(l,g,T),R=this._zoomOut.touchend(l,g,T);return k?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:K=>K.easeTo({duration:300,zoom:K.getZoom()+1,around:K.unproject(k)},{originalEvent:l})}):R?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:K=>K.easeTo({duration:300,zoom:K.getZoom()-1,around:K.unproject(R)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Lo={0:1,2:2};class Uo{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,g){return!1}_move(l,g){return{}}mousedown(l,g){if(this._lastPoint)return;const T=xt(l);this._correctButton(l,T)&&(this._lastPoint=g,this._eventButton=T)}mousemoveWindow(l,g){const T=this._lastPoint;if(T){if(l.preventDefault(),this._eventButton!=null&&function(k,R){const K=Lo[R];return k.buttons===void 0||(k.buttons&K)!==K}(l,this._eventButton))this.reset();else if(this._moved||!(g.dist(T)<this._clickTolerance))return this._moved=!0,this._lastPoint=g,this._move(T,g)}}mouseupWindow(l){this._lastPoint&&xt(l)===this._eventButton&&(this._moved&&Fe(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zh extends Uo{mousedown(l,g){super.mousedown(l,g),this._lastPoint&&(this._active=!0)}_correctButton(l,g){return g===0&&!l.ctrlKey}_move(l,g){return{around:g,panDelta:g.sub(l)}}}class Jc extends Uo{_correctButton(l,g){return g===0&&l.ctrlKey||g===2}_move(l,g){const T=.8*(g.x-l.x);if(T)return this._active=!0,{bearingDelta:T}}contextmenu(l){l.preventDefault()}}class P extends Uo{_correctButton(l,g){return g===0&&l.ctrlKey||g===2}_move(l,g){const T=-.5*(g.y-l.y);if(T)return this._active=!0,{pitchDelta:T}}contextmenu(l){l.preventDefault()}}class u{constructor(l,g){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=g.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}touchstart(l,g,T){return this._calculateTransform(l,g,T)}touchmove(l,g,T){if(this._active&&!(T.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(T.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,g,T)}}touchend(l,g,T){this._calculateTransform(l,g,T),this._active&&T.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,g,T){T.length>0&&(this._active=!0);const k=kr(T,g),R=new s.Point(0,0),K=new s.Point(0,0);let X=0;for(const ce in k){const le=k[ce],ve=this._touches[ce];ve&&(R._add(le),K._add(le.sub(ve)),X++,k[ce]=le)}if(this._touches=k,X<this._minTouches||!K.mag())return;const ee=K.div(X);return this._sum._add(ee),this._sum.mag()<this._clickTolerance?void 0:{around:R.div(X),panDelta:ee}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=te("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class x{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,g,T){return{}}touchstart(l,g,T){this._firstTwoTouches||T.length<2||(this._firstTwoTouches=[T[0].identifier,T[1].identifier],this._start([g[0],g[1]]))}touchmove(l,g,T){const k=this._firstTwoTouches;if(!k)return;l.preventDefault();const[R,K]=k,X=I(T,g,R),ee=I(T,g,K);if(!X||!ee)return;const ce=this._aroundCenter?null:X.add(ee).div(2);return this._move([X,ee],ce,l)}touchend(l,g,T){if(!this._firstTwoTouches)return;const[k,R]=this._firstTwoTouches,K=I(T,g,k),X=I(T,g,R);K&&X||(this._active&&Fe(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function I(b,l,g){for(let T=0;T<b.length;T++)if(b[T].identifier===g)return l[T]}function F(b,l){return Math.log(b/l)/Math.LN2}class j extends x{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,g){const T=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(F(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:F(this._distance,T),pinchAround:g}}}function N(b,l){return 180*b.angleWith(l)/Math.PI}class oe extends x{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,g){const T=this._vector;if(this._vector=l[0].sub(l[1]),T&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:N(this._vector,T),pinchAround:g}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const g=25/(Math.PI*this._minDiameter)*360,T=this._startVector;if(!T)return!1;const k=N(l,T);return Math.abs(k)<g}}function ae(b){return Math.abs(b.y)>Math.abs(b.x)}class me extends x{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,ae(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,g,T){const k=this._lastPoints;if(!k)return;const R=l[0].sub(k[0]),K=l[1].sub(k[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&T.touches.length<3||(this._valid=this.gestureBeginsVertically(R,K,T.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(R.y+K.y)/2*-.5})}gestureBeginsVertically(l,g,T){if(this._valid!==void 0)return this._valid;const k=l.mag()>=2,R=g.mag()>=2;if(!k&&!R)return;if(!k||!R)return this._firstMove==null&&(this._firstMove=T),T-this._firstMove<100&&void 0;const K=l.y>0==g.y>0;return ae(l)&&ae(g)&&K}}const ye={panStep:100,bearingStep:15,pitchStep:10};class Re{constructor(){const l=ye;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let g=0,T=0,k=0,R=0,K=0;switch(l.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:l.shiftKey?T=-1:(l.preventDefault(),R=-1);break;case 39:l.shiftKey?T=1:(l.preventDefault(),R=1);break;case 38:l.shiftKey?k=1:(l.preventDefault(),K=-1);break;case 40:l.shiftKey?k=-1:(l.preventDefault(),K=1);break;default:return}return this._rotationDisabled&&(T=0,k=0),{cameraAnimation:X=>{const ee=X.getZoom();X.easeTo({duration:300,easeId:"keyboardHandler",easing:He,zoom:g?Math.round(ee)+g*(l.shiftKey?2:1):ee,bearing:X.getBearing()+T*this._bearingStep,pitch:X.getPitch()+k*this._pitchStep,offset:[-R*this._panStep,-K*this._panStep],center:X.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function He(b){return b*(2-b)}const gt=4.000244140625;class dt{constructor(l,g){this._map=l,this._el=l.getCanvasContainer(),this._handler=g,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let g=l.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const T=s.exported.now(),k=T-(this._lastWheelEventTime||0);this._lastWheelEventTime=T,g!==0&&g%gt==0?this._type="wheel":g!==0&&Math.abs(g)<4?this._type="trackpad":k>400?(this._type=null,this._lastValue=g,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(k*g)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,g+=this._lastValue)),l.shiftKey&&g&&(g/=4),this._type&&(this._lastWheelEvent=l,this._delta-=g,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const g=Se(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:g,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const g=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const ee=this._type==="wheel"&&Math.abs(this._delta)>gt?this._wheelZoomRate:this._defaultZoomRate;let ce=2/(1+Math.exp(-Math.abs(this._delta*ee)));this._delta<0&&ce!==0&&(ce=1/ce);const le=g(),ve=Math.pow(2,le),Qe=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):ve;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(Qe*ce))),this._type==="wheel"&&(this._startZoom=le,this._easing=this._smoothOutEasing(200)),this._delta=0}const T=typeof this._targetZoom=="number"?this._targetZoom:g(),k=this._startZoom,R=this._easing;let K,X=!1;if(this._type==="wheel"&&k&&R){const ee=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),ce=R(ee);K=s.number(k,T,ce),ee<1?this._frameId||(this._frameId=!0):X=!0}else K=T,X=!0;return this._active=!0,X&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!X,zoomDelta:K-g(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let g=s.ease;if(this._prevEase){const T=this._prevEase,k=(s.exported.now()-T.start)/T.duration,R=T.easing(k+.01)-T.easing(k),K=.27/Math.sqrt(R*R+1e-4)*.01,X=Math.sqrt(.0729-K*K);g=s.bezier(K,X,.25,1)}return this._prevEase={start:s.exported.now(),duration:l,easing:g},g}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=te("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class pt{constructor(l,g){this._clickZoom=l,this._tapZoom=g}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ft{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,g){return l.preventDefault(),{cameraAnimation:T=>{T.easeTo({duration:300,zoom:T.getZoom()+(l.shiftKey?-1:1),around:T.unproject(g)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wt{constructor(){this._tap=new ws({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,g,T){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?T.length>0&&(this._swipePoint=g[0],this._swipeTouch=T[0].identifier):this._tap.touchstart(l,g,T))}touchmove(l,g,T){if(this._tapTime){if(this._swipePoint){if(T[0].identifier!==this._swipeTouch)return;const k=g[0],R=k.y-this._swipePoint.y;return this._swipePoint=k,l.preventDefault(),this._active=!0,{zoomDelta:R/128}}}else this._tap.touchmove(l,g,T)}touchend(l,g,T){this._tapTime?this._swipePoint&&T.length===0&&this.reset():this._tap.touchend(l,g,T)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class on{constructor(l,g,T){this._el=l,this._mousePan=g,this._touchPan=T}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class bt{constructor(l,g,T){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=g,this._mousePitch=T}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class un{constructor(l,g,T,k){this._el=l,this._touchZoom=g,this._touchRotate=T,this._tapDragZoom=k,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const tn=b=>b.zoom||b.drag||b.pitch||b.rotate;class In extends s.Event{}class kn{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,g){const T=s.sub([],g,l);this.radius=s.length(T[2]<0?s.div([],T,this.constants):[T[0],T[1],0])}projectRay(l){s.div(l,l,this.constants),s.normalize(l,l),s.mul$1(l,l,this.constants);const g=s.scale$2([],l,this.radius);if(g[2]>0){const T=s.scale$2([],[0,0,1],s.dot(g,[0,0,1])),k=s.scale$2([],s.normalize([],[g[0],g[1],0]),this.radius),R=s.add([],g,s.scale$2([],s.sub([],s.add([],k,T),g),2));g[0]=R[0],g[1]=R[1]}return g}}function Kn(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta}class xn{constructor(l,g){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ne(l),this._bearingSnap=g.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new kn,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(g),s.bindAll(["handleEvent","handleWindowEvent"],this);const T=this._el;this._listeners=[[T,"touchstart",{passive:!0}],[T,"touchmove",{passive:!1}],[T,"touchend",void 0],[T,"touchcancel",void 0],[T,"mousedown",void 0],[T,"mousemove",void 0],[T,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[T,"mouseover",void 0],[T,"mouseout",void 0],[T,"dblclick",void 0],[T,"click",void 0],[T,"keydown",{capture:!1}],[T,"keyup",void 0],[T,"wheel",{passive:!1}],[T,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[k,R,K]of this._listeners)k.addEventListener(R,k===s.window.document?this.handleWindowEvent:this.handleEvent,K)}destroy(){for(const[l,g,T]of this._listeners)l.removeEventListener(g,l===s.window.document?this.handleWindowEvent:this.handleEvent,T)}_addDefaultHandlers(l){const g=this._map,T=g.getCanvasContainer();this._add("mapEvent",new ni(g,l));const k=g.boxZoom=new Hi(g,l);this._add("boxZoom",k);const R=new Ps,K=new Ft;g.doubleClickZoom=new pt(K,R),this._add("tapZoom",R),this._add("clickZoom",K);const X=new Wt;this._add("tapDragZoom",X);const ee=g.touchPitch=new me(g);this._add("touchPitch",ee);const ce=new Jc(l),le=new P(l);g.dragRotate=new bt(l,ce,le),this._add("mouseRotate",ce,["mousePitch"]),this._add("mousePitch",le,["mouseRotate"]);const ve=new zh(l),Qe=new u(g,l);g.dragPan=new on(T,ve,Qe),this._add("mousePan",ve),this._add("touchPan",Qe,["touchZoom","touchRotate"]);const We=new oe,et=new j;g.touchZoomRotate=new un(T,et,We,X),this._add("touchRotate",We,["touchPan","touchZoom"]),this._add("touchZoom",et,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ti(g));const tt=g.scrollZoom=new dt(g,this);this._add("scrollZoom",tt,["mousePan"]);const rt=g.keyboard=new Re;this._add("keyboard",rt);for(const Be of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[Be]&&g[Be].enable(l[Be])}_add(l,g,T){this._handlers.push({handlerName:l,handler:g,allowed:T}),this._handlersById[l]=g}stop(l){if(!this._updatingCamera){for(const{handler:g}of this._handlers)g.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!tn(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,g,T){for(const k in l)if(k!==T&&(!g||g.indexOf(k)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const g=[];for(const T of l)this._el.contains(T.target)&&g.push(T);return g}handleEvent(l,g){this._updatingCamera=!0;const T=l.type==="renderFrame",k=T?void 0:l,R={needsRenderFrame:!1},K={},X={},ee=l.touches?this._getMapTouches(l.touches):void 0,ce=ee?nt(this._el,ee):T?void 0:Se(this._el,l);for(const{handlerName:Qe,handler:We,allowed:et}of this._handlers){if(!We.isEnabled())continue;let tt;this._blockedByActive(X,et,Qe)?We.reset():We[g||l.type]&&(tt=We[g||l.type](l,ce,ee),this.mergeHandlerResult(R,K,tt,Qe,k),tt&&tt.needsRenderFrame&&this._triggerRenderFrame()),(tt||We.isActive())&&(X[Qe]=We)}const le={};for(const Qe in this._previousActiveHandlers)X[Qe]||(le[Qe]=k);this._previousActiveHandlers=X,(Object.keys(le).length||Kn(R))&&(this._changes.push([R,K,le]),this._triggerRenderFrame()),(Object.keys(X).length||Kn(R))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ve}=R;ve&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ve(this._map))}mergeHandlerResult(l,g,T,k,R){if(!T)return;s.extend(l,T);const K={handlerName:k,originalEvent:T.originalEvent||R};T.zoomDelta!==void 0&&(g.zoom=K),T.panDelta!==void 0&&(g.drag=K),T.pitchDelta!==void 0&&(g.pitch=K),T.bearingDelta!==void 0&&(g.rotate=K)}_applyChanges(){const l={},g={},T={};for(const[k,R,K]of this._changes)k.panDelta&&(l.panDelta=(l.panDelta||new s.Point(0,0))._add(k.panDelta)),k.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(l.around=k.around),k.aroundCoord!==void 0&&(l.aroundCoord=k.aroundCoord),k.pinchAround!==void 0&&(l.pinchAround=k.pinchAround),k.noInertia&&(l.noInertia=k.noInertia),s.extend(g,R),s.extend(T,K);this._updateMapTransform(l,g,T),this._changes=[]}_updateMapTransform(l,g,T){const k=this._map,R=k.transform,K=Ye=>[Ye.x,Ye.y,Ye.z];if((Ye=>{const lt=this._eventsInProgress.drag;return lt&&!this._handlersById[lt.handlerName].isActive()})()&&!Kn(l)){const Ye=R.zoom;R.cameraElevationReference="sea",R.recenterOnTerrain(),R.cameraElevationReference="ground",Ye!==R.zoom&&this._map._update(!0)}if(R._isCameraConstrained&&k._stop(!0),!Kn(l))return void this._fireEvents(g,T,!0);let{panDelta:X,zoomDelta:ee,bearingDelta:ce,pitchDelta:le,around:ve,aroundCoord:Qe,pinchAround:We}=l;R._isCameraConstrained&&(ee>0&&(ee=0),R._isCameraConstrained=!1),We!==void 0&&(ve=We),(ee||(Ye=>g[Ye]&&!this._eventsInProgress[Ye])("drag"))&&ve&&(this._dragOrigin=K(R.pointCoordinate3D(ve)),this._trackingEllipsoid.setup(R._camera.position,this._dragOrigin)),R.cameraElevationReference="sea",k._stop(!0),ve=ve||k.transform.centerPoint,ce&&(R.bearing+=ce),le&&(R.pitch+=le),R._updateCameraState();const et=[0,0,0];if(X)if(R.projection.name==="mercator"){const Ye=this._trackingEllipsoid.projectRay(R.screenPointToMercatorRay(ve).dir),lt=this._trackingEllipsoid.projectRay(R.screenPointToMercatorRay(ve.sub(X)).dir);et[0]=lt[0]-Ye[0],et[1]=lt[1]-Ye[1]}else{const Ye=R.pointCoordinate(ve);if(R.projection.name==="globe"){X=X.rotate(-R.angle);const lt=R._pixelsPerMercatorPixel/R.worldSize;et[0]=-X.x*s.mercatorScale(s.latFromMercatorY(Ye.y))*lt,et[1]=-X.y*s.mercatorScale(R.center.lat)*lt}else{const lt=R.pointCoordinate(ve.sub(X));Ye&&lt&&(et[0]=lt.x-Ye.x,et[1]=lt.y-Ye.y)}}const tt=R.zoom,rt=[0,0,0];if(ee){const Ye=K(Qe||R.pointCoordinate3D(ve)),lt={dir:s.normalize([],s.sub([],Ye,R._camera.position))};if(lt.dir[2]<0){const At=R.zoomDeltaToMovement(Ye,ee);s.scale$2(rt,lt.dir,At)}}const Be=s.add(et,et,rt);R._translateCameraConstrained(Be),ee&&Math.abs(R.zoom-tt)>1e-4&&R.recenterOnTerrain(),R.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(g,T,!0)}_fireEvents(l,g,T){const k=tn(this._eventsInProgress),R=tn(l),K={};for(const le in l){const{originalEvent:ve}=l[le];this._eventsInProgress[le]||(K[`${le}start`]=ve),this._eventsInProgress[le]=l[le]}!k&&R&&this._fireEvent("movestart",R.originalEvent);for(const le in K)this._fireEvent(le,K[le]);R&&this._fireEvent("move",R.originalEvent);for(const le in l){const{originalEvent:ve}=l[le];this._fireEvent(le,ve)}const X={};let ee;for(const le in this._eventsInProgress){const{handlerName:ve,originalEvent:Qe}=this._eventsInProgress[le];this._handlersById[ve].isActive()||(delete this._eventsInProgress[le],ee=g[ve]||Qe,X[`${le}end`]=ee)}for(const le in X)this._fireEvent(le,X[le]);const ce=tn(this._eventsInProgress);if(T&&(k||R)&&!ce){this._updatingCamera=!0;const le=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ve=Qe=>Qe!==0&&-this._bearingSnap<Qe&&Qe<this._bearingSnap;le?(ve(le.bearing||this._map.getBearing())&&(le.bearing=0),this._map.easeTo(le,{originalEvent:ee})):(this._map.fire(new s.Event("moveend",{originalEvent:ee})),ve(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,g){this._map.fire(new s.Event(l,g?{originalEvent:g}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new In("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const pi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class vi extends s.Evented{constructor(l,g){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=g.bearingSnap,this._respectPrefersReducedMotion=g.respectPrefersReducedMotion!==!1,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,g){return this.jumpTo({center:l},g)}panBy(l,g,T){return l=s.Point.convert(l).mult(-1),this.panTo(this.transform.center,s.extend({offset:l},g),T)}panTo(l,g,T){return this.easeTo(s.extend({center:l},g),T)}getZoom(){return this.transform.zoom}setZoom(l,g){return this.jumpTo({zoom:l},g),this}zoomTo(l,g,T){return this.easeTo(s.extend({zoom:l},g),T)}zoomIn(l,g){return this.zoomTo(this.getZoom()+1,l,g),this}zoomOut(l,g){return this.zoomTo(this.getZoom()-1,l,g),this}getBearing(){return this.transform.bearing}setBearing(l,g){return this.jumpTo({bearing:l},g),this}getPadding(){return this.transform.padding}setPadding(l,g){return this.jumpTo({padding:l},g),this}rotateTo(l,g,T){return this.easeTo(s.extend({bearing:l},g),T)}resetNorth(l,g){return this.rotateTo(0,s.extend({duration:1e3},l),g),this}resetNorthPitch(l,g){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},l),g),this}snapToNorth(l,g){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,g):this}getPitch(){return this.transform.pitch}setPitch(l,g){return this.jumpTo({pitch:l},g),this}cameraForBounds(l,g){l=s.LngLatBounds.convert(l);const T=g&&g.bearing||0,k=g&&g.pitch||0,R=l.getNorthWest(),K=l.getSouthEast();return this._cameraForBounds(this.transform,R,K,T,k,g)}_extendCameraOptions(l){const g={top:0,bottom:0,right:0,left:0};if(typeof(l=s.extend({padding:g,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){const T=l.padding;l.padding={top:T,bottom:T,right:T,left:T}}return l.padding=s.extend(g,l.padding),l}_minimumAABBFrustumDistance(l,g){const T=g.max[0]-g.min[0],k=g.max[1]-g.min[1];return T/k>l.aspect?T/(2*Math.tan(.5*l.fovX)*l.aspect):k/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,g,T,k,R,K){const X=l.clone(),ee=this._extendCameraOptions(K);X.bearing=k,X.pitch=R;const ce=s.LngLat.convert(g),le=s.LngLat.convert(T),ve=.5*(ce.lat+le.lat),Qe=.5*(ce.lng+le.lng),We=s.latLngToECEF(ve,Qe),et=s.normalize([],We),tt=s.normalize([],s.cross([],et,[0,1,0])),rt=s.cross([],tt,et),Be=[tt[0],tt[1],tt[2],0,rt[0],rt[1],rt[2],0,et[0],et[1],et[2],0,0,0,0,1],Ye=[We,s.latLngToECEF(ce.lat,ce.lng),s.latLngToECEF(le.lat,ce.lng),s.latLngToECEF(le.lat,le.lng),s.latLngToECEF(ce.lat,le.lng),s.latLngToECEF(ve,ce.lng),s.latLngToECEF(ve,le.lng),s.latLngToECEF(ce.lat,Qe),s.latLngToECEF(le.lat,Qe)];let lt=s.Aabb.fromPoints(Ye.map(Vn=>[s.dot(tt,Vn),s.dot(rt,Vn),s.dot(et,Vn)]));const At=s.transformMat4([],lt.center,Be);s.squaredLength(At)===0&&s.set(At,0,0,1),s.normalize(At,At),s.scale$2(At,At,s.GLOBE_RADIUS),X.center=s.ecefToLatLng(At);const It=X.getWorldToCameraMatrix(),Tt=s.invert(new Float64Array(16),It);lt=s.Aabb.applyTransform(lt,s.multiply([],It,Be)),s.transformMat4(At,At,It);const Mt=.5*(lt.max[2]-lt.min[2]),Ht=this._minimumAABBFrustumDistance(X,lt),Nt=s.scale$2([],[0,0,1],Mt),cn=s.add(Nt,At,Nt),Nn=Ht+(X.pitch===0?0:s.distance(At,cn)),Vt=X.globeCenterInViewSpace,Pn=s.sub([],At,[Vt[0],Vt[1],Vt[2]]);s.normalize(Pn,Pn),s.scale$2(Pn,Pn,Nn);const fn=s.add([],At,Pn);s.transformMat4(fn,fn,Tt);const Zn=s.earthRadius/s.GLOBE_RADIUS,nn=s.length(fn),Mn=s.mercatorZfromAltitude(Math.max(nn*Zn-s.earthRadius,Number.EPSILON),0),Yn=Math.min(X.zoomFromMercatorZAdjusted(Mn),ee.maxZoom);return Yn>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(X.setProjection({name:"mercator"}),X.zoom=Yn,this._cameraForBounds(X,g,T,k,R,K)):{center:X.center,zoom:Yn,bearing:k,pitch:R}}queryTerrainElevation(l,g){const T=this.transform.elevation;return T?(g=s.extend({},{exaggerated:!0},g),T.getAtPoint(s.MercatorCoordinate.fromLngLat(l),null,g.exaggerated)):null}_cameraForBounds(l,g,T,k,R,K){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,g,T,k,R,K);const X=l.clone(),ee=this._extendCameraOptions(K),ce=X.padding;X.bearing=k,X.pitch=R;const le=s.LngLat.convert(g),ve=s.LngLat.convert(T),Qe=new s.LngLat(le.lng,ve.lat),We=new s.LngLat(ve.lng,le.lat),et=X.project(le),tt=X.project(ve),rt=this.queryTerrainElevation(le),Be=this.queryTerrainElevation(ve),Ye=this.queryTerrainElevation(Qe),lt=this.queryTerrainElevation(We),At=[[et.x,et.y,Math.min(rt||0,Be||0,Ye||0,lt||0)],[tt.x,tt.y,Math.max(rt||0,Be||0,Ye||0,lt||0)]];let It=s.Aabb.fromPoints(At);const Tt=X.getWorldToCameraMatrix(),Mt=s.invert(new Float64Array(16),Tt);It=s.Aabb.applyTransform(It,Tt);const Ht=s.sub([],It.max,It.min),Nt=ce.left||0,cn=ce.right||0,Nn=ce.bottom||0,Vt=ce.top||0,{left:Pn,right:fn,top:Zn,bottom:nn}=ee.padding,Mn=.5*(Nt+cn),Yn=.5*(Vt+Nn),Vn=Math.min(X.scaleZoom(X.scale*Math.min((X.width-(Nt+cn+Pn+fn))/Ht[0],(X.height-(Nn+Vt+nn+Zn))/Ht[1])),ee.maxZoom),si=X.scale/X.zoomScale(Vn);It=new s.Aabb([It.min[0]-(Pn+Mn)*si,It.min[1]-(nn+Yn)*si,It.min[2]],[It.max[0]+(fn+Mn)*si,It.max[1]+(Zn+Yn)*si,It.max[2]]);const ar=.5*Ht[2],Tr=this._minimumAABBFrustumDistance(X,It),Di=[0,0,1,0];s.transformMat4$1(Di,Di,Tt),s.normalize$2(Di,Di);const yr=s.scale$2([],Di,Tr+ar),ro=s.add([],It.center,yr),co=(typeof ee.offset.x=="number"&&typeof ee.offset.y=="number"?new s.Point(ee.offset.x,ee.offset.y):s.Point.convert(ee.offset)).rotate(-s.degToRad(k));It.center[0]-=co.x*si,It.center[1]+=co.y*si,s.transformMat4(It.center,It.center,Mt),s.transformMat4(ro,ro,Mt);const Yi=[It.center[0],It.center[1],ro[2]*X.pixelsPerMeter];s.scale$2(Yi,Yi,1/X.worldSize);const Ro=s.lngFromMercatorX(Yi[0]),gs=s.latFromMercatorY(Yi[1]),qo=Math.min(X._zoomFromMercatorZ(Yi[2]),ee.maxZoom),Xo=new s.LngLat(Ro,gs);return X.mercatorFromTransition&&qo<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(X.setProjection({name:"globe"}),X.zoom=qo,this._cameraForBounds(X,g,T,k,R,K)):{center:Xo,zoom:qo,bearing:k,pitch:R}}fitBounds(l,g,T){const k=this.cameraForBounds(l,g);return this._fitInternal(k,g,T)}fitScreenCoordinates(l,g,T,k,R){const K=s.Point.convert(l),X=s.Point.convert(g),ee=new s.Point(Math.min(K.x,X.x),Math.min(K.y,X.y)),ce=new s.Point(Math.max(K.x,X.x),Math.max(K.y,X.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(K,X))return this;const le=this.transform.pointLocation3D(ee),ve=this.transform.pointLocation3D(ce),Qe=this.transform.pointLocation3D(new s.Point(ee.x,ce.y)),We=this.transform.pointLocation3D(new s.Point(ce.x,ee.y)),et=[Math.min(le.lng,ve.lng,Qe.lng,We.lng),Math.min(le.lat,ve.lat,Qe.lat,We.lat)],tt=[Math.max(le.lng,ve.lng,Qe.lng,We.lng),Math.max(le.lat,ve.lat,Qe.lat,We.lat)],rt=k&&k.pitch?k.pitch:this.getPitch(),Be=this._cameraForBounds(this.transform,et,tt,T,rt,k);return this._fitInternal(Be,k,R)}_fitInternal(l,g,T){return l?(delete(g=s.extend(l,g)).padding,g.linear?this.easeTo(g,T):this.flyTo(g,T)):this}jumpTo(l,g){this.stop();const T=l.preloadOnly?this.transform.clone():this.transform;let k=!1,R=!1,K=!1;return"zoom"in l&&T.zoom!==+l.zoom&&(k=!0,T.zoom=+l.zoom),l.center!==void 0&&(T.center=s.LngLat.convert(l.center)),"bearing"in l&&T.bearing!==+l.bearing&&(R=!0,T.bearing=+l.bearing),"pitch"in l&&T.pitch!==+l.pitch&&(K=!0,T.pitch=+l.pitch),l.padding==null||T.isPaddingEqual(l.padding)||(T.padding=l.padding),l.preloadOnly?(this._preloadTiles(T),this):(this.fire(new s.Event("movestart",g)).fire(new s.Event("move",g)),k&&this.fire(new s.Event("zoomstart",g)).fire(new s.Event("zoom",g)).fire(new s.Event("zoomend",g)),R&&this.fire(new s.Event("rotatestart",g)).fire(new s.Event("rotate",g)).fire(new s.Event("rotateend",g)),K&&this.fire(new s.Event("pitchstart",g)).fire(new s.Event("pitch",g)).fire(new s.Event("pitchend",g)),this.fire(new s.Event("moveend",g)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(pi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,g){const T=this.transform;if(!T.projection.supportsFreeCamera)return s.warnOnce(pi),this;this.stop();const k=T.zoom,R=T.pitch,K=T.bearing;T.setFreeCameraOptions(l);const X=k!==T.zoom,ee=R!==T.pitch,ce=K!==T.bearing;return this.fire(new s.Event("movestart",g)).fire(new s.Event("move",g)),X&&this.fire(new s.Event("zoomstart",g)).fire(new s.Event("zoom",g)).fire(new s.Event("zoomend",g)),ce&&this.fire(new s.Event("rotatestart",g)).fire(new s.Event("rotate",g)).fire(new s.Event("rotateend",g)),ee&&this.fire(new s.Event("pitchstart",g)).fire(new s.Event("pitch",g)).fire(new s.Event("pitchend",g)),this.fire(new s.Event("moveend",g)),this}easeTo(l,g){this._stop(!1,l.easeId),((l=s.extend({offset:[0,0],duration:500,easing:s.ease},l)).animate===!1||this._prefersReducedMotion(l))&&(l.duration=0);const T=this.transform,k=this.getZoom(),R=this.getBearing(),K=this.getPitch(),X=this.getPadding(),ee="zoom"in l?+l.zoom:k,ce="bearing"in l?this._normalizeBearing(l.bearing,R):R,le="pitch"in l?+l.pitch:K,ve="padding"in l?l.padding:T.padding,Qe=s.Point.convert(l.offset);let We,et,tt;if(T.projection.name==="globe"){const Nt=s.MercatorCoordinate.fromLngLat(T.center),cn=Qe.rotate(-T.angle);Nt.x+=cn.x/T.worldSize,Nt.y+=cn.y/T.worldSize;const Nn=Nt.toLngLat(),Vt=s.LngLat.convert(l.center||Nn);this._normalizeCenter(Vt),We=T.centerPoint.add(cn),et=new s.Point(Nt.x,Nt.y).mult(T.worldSize),tt=new s.Point(s.mercatorXfromLng(Vt.lng),s.mercatorYfromLat(Vt.lat)).mult(T.worldSize).sub(et)}else{We=T.centerPoint.add(Qe);const Nt=T.pointLocation(We),cn=s.LngLat.convert(l.center||Nt);this._normalizeCenter(cn),et=T.project(Nt),tt=T.project(cn).sub(et)}const rt=T.zoomScale(ee-k);let Be,Ye;l.around&&(Be=s.LngLat.convert(l.around),Ye=T.locationPoint(Be));const lt=this._zooming||ee!==k,At=this._rotating||R!==ce,It=this._pitching||le!==K,Tt=!T.isPaddingEqual(ve),Mt=Nt=>cn=>{if(lt&&(Nt.zoom=s.number(k,ee,cn)),At&&(Nt.bearing=s.number(R,ce,cn)),It&&(Nt.pitch=s.number(K,le,cn)),Tt&&(Nt.interpolatePadding(X,ve,cn),We=Nt.centerPoint.add(Qe)),Be)Nt.setLocationAtPoint(Be,Ye);else{const Nn=Nt.zoomScale(Nt.zoom-k),Vt=ee>k?Math.min(2,rt):Math.max(.5,rt),Pn=Math.pow(Vt,1-cn),fn=Nt.unproject(et.add(tt.mult(cn*Pn)).mult(Nn));Nt.setLocationAtPoint(Nt.renderWorldCopies?fn.wrap():fn,We)}return l.preloadOnly||this._fireMoveEvents(g),Nt};if(l.preloadOnly){const Nt=this._emulate(Mt,l.duration,T);return this._preloadTiles(Nt),this}const Ht={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=lt,this._rotating=At,this._pitching=It,this._padding=Tt,this._easeId=l.easeId,this._prepareEase(g,l.noMoveStart,Ht),this._ease(Mt(T),Nt=>{T.recenterOnTerrain(),this._afterEase(g,Nt)},l),this}_prepareEase(l,g,T={}){this._moving=!0,this.transform.cameraElevationReference="sea",g||T.moving||this.fire(new s.Event("movestart",l)),this._zooming&&!T.zooming&&this.fire(new s.Event("zoomstart",l)),this._rotating&&!T.rotating&&this.fire(new s.Event("rotatestart",l)),this._pitching&&!T.pitching&&this.fire(new s.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new s.Event("move",l)),this._zooming&&this.fire(new s.Event("zoom",l)),this._rotating&&this.fire(new s.Event("rotate",l)),this._pitching&&this.fire(new s.Event("pitch",l))}_afterEase(l,g){if(this._easeId&&g&&this._easeId===g)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const T=this._zooming,k=this._rotating,R=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,T&&this.fire(new s.Event("zoomend",l)),k&&this.fire(new s.Event("rotateend",l)),R&&this.fire(new s.Event("pitchend",l)),this.fire(new s.Event("moveend",l))}flyTo(l,g){if(this._prefersReducedMotion(l)){const Vn=s.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Vn,g)}this.stop(),l=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},l);const T=this.transform,k=this.getZoom(),R=this.getBearing(),K=this.getPitch(),X=this.getPadding(),ee="zoom"in l?s.clamp(+l.zoom,T.minZoom,T.maxZoom):k,ce="bearing"in l?this._normalizeBearing(l.bearing,R):R,le="pitch"in l?+l.pitch:K,ve="padding"in l?l.padding:T.padding,Qe=T.zoomScale(ee-k),We=s.Point.convert(l.offset);let et=T.centerPoint.add(We);const tt=T.pointLocation(et),rt=s.LngLat.convert(l.center||tt);this._normalizeCenter(rt);const Be=T.project(tt),Ye=T.project(rt).sub(Be);let lt=l.curve;const At=Math.max(T.width,T.height),It=At/Qe,Tt=Ye.mag();if("minZoom"in l){const Vn=s.clamp(Math.min(l.minZoom,k,ee),T.minZoom,T.maxZoom),si=At/T.zoomScale(Vn-k);lt=Math.sqrt(si/Tt*2)}const Mt=lt*lt;function Ht(Vn){const si=(It*It-At*At+(Vn?-1:1)*Mt*Mt*Tt*Tt)/(2*(Vn?It:At)*Mt*Tt);return Math.log(Math.sqrt(si*si+1)-si)}function Nt(Vn){return(Math.exp(Vn)-Math.exp(-Vn))/2}function cn(Vn){return(Math.exp(Vn)+Math.exp(-Vn))/2}const Nn=Ht(0);let Vt=function(Vn){return cn(Nn)/cn(Nn+lt*Vn)},Pn=function(Vn){return At*((cn(Nn)*(Nt(si=Nn+lt*Vn)/cn(si))-Nt(Nn))/Mt)/Tt;var si},fn=(Ht(1)-Nn)/lt;if(Math.abs(Tt)<1e-6||!isFinite(fn)){if(Math.abs(At-It)<1e-6)return this.easeTo(l,g);const Vn=It<At?-1:1;fn=Math.abs(Math.log(It/At))/lt,Pn=function(){return 0},Vt=function(si){return Math.exp(Vn*lt*si)}}l.duration="duration"in l?+l.duration:1e3*fn/("screenSpeed"in l?+l.screenSpeed/lt:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const Zn=R!==ce,nn=le!==K,Mn=!T.isPaddingEqual(ve),Yn=Vn=>si=>{const ar=si*fn,Tr=1/Vt(ar);Vn.zoom=si===1?ee:k+Vn.scaleZoom(Tr),Zn&&(Vn.bearing=s.number(R,ce,si)),nn&&(Vn.pitch=s.number(K,le,si)),Mn&&(Vn.interpolatePadding(X,ve,si),et=Vn.centerPoint.add(We));const Di=si===1?rt:Vn.unproject(Be.add(Ye.mult(Pn(ar))).mult(Tr));return Vn.setLocationAtPoint(Vn.renderWorldCopies?Di.wrap():Di,et),Vn._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(g),Vn};if(l.preloadOnly){const Vn=this._emulate(Yn,l.duration,T);return this._preloadTiles(Vn),this}return this._zooming=!0,this._rotating=Zn,this._pitching=nn,this._padding=Mn,this._prepareEase(g,!1),this._ease(Yn(T),()=>this._afterEase(g),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,g){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const T=this._onEaseEnd;this._onEaseEnd=void 0,T.call(this,g)}if(!l){const T=this.handlers;T&&T.stop(!1)}return this}_ease(l,g,T){T.animate===!1||T.duration===0?(l(1),g()):(this._easeStart=s.exported.now(),this._easeOptions=T,this._onEaseFrame=l,this._onEaseEnd=g,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),g=this._onEaseFrame;g&&g(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,g){l=s.wrap(l,-180,180);const T=Math.abs(l-g);return Math.abs(l-360-g)<T&&(l-=360),Math.abs(l+360-g)<T&&(l+=360),l}_normalizeCenter(l){const g=this.transform;if(!g.renderWorldCopies||g.maxBounds)return;const T=l.lng-g.center.lng;l.lng+=T>180?-360:T<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&s.exported.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,g,T){const k=Math.ceil(15*g/1e3),R=[],K=l(T.clone());for(let X=0;X<=k;X++){const ee=K(X/k);R.push(ee.clone())}return R}}class yn{constructor(l={}){this.options=l,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const g=this.options&&this.options.compact;return this._map=l,this._container=te("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=te("button","mapboxgl-ctrl-attrib-button",this._container),te("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=te("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),g&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),g===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,g){const T=this._map._getUIString(`AttributionControl.${g}`);l.setAttribute("aria-label",T),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",T)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const g=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(l){const T=g.reduce((k,R,K)=>(R.value&&(k+=`${R.key}=${R.value}${K<g.length-1?"&":""}`),k),"?");l.href=`${s.config.FEEDBACK_URL}/${T}#${Oo(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const k=this._map.style.stylesheet;this.styleOwner=k.owner,this.styleId=k.id}const g=this._map.style._sourceCaches;for(const k in g){const R=g[k];if(R.used){const K=R.getSource();K.attribution&&l.indexOf(K.attribution)<0&&l.push(K.attribution)}}l.sort((k,R)=>k.length-R.length),l=l.filter((k,R)=>{for(let K=R+1;K<l.length;K++)if(l[K].indexOf(k)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const T=l.join(" | ");T!==this._attribHTML&&(this._attribHTML=T,l.length?(this._innerContainer.innerHTML=T,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Nr{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=te("div","mapboxgl-ctrl");const g=te("a","mapboxgl-ctrl-logo");return g.target="_blank",g.rel="noopener nofollow",g.href="https://www.mapbox.com/",g.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),g.setAttribute("rel","noopener nofollow"),this._container.appendChild(g),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const g in l){const T=l[g].getSource();if(T.hasOwnProperty("mapbox_logo")&&!T.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const g=l[0];this._map.getCanvasContainer().offsetWidth<250?g.classList.add("mapboxgl-compact"):g.classList.remove("mapboxgl-compact")}}}class io{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const g=++this._id;return this._queue.push({callback:l,id:g,cancelled:!1}),g}remove(l){const g=this._currentlyRunning,T=g?this._queue.concat(g):this._queue;for(const k of T)if(k.id===l)return void(k.cancelled=!0)}run(l=0){const g=this._currentlyRunning=this._queue;this._queue=[];for(const T of g)if(!T.cancelled&&(T.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function or(b,l,g){if(b=new s.LngLat(b.lng,b.lat),l){const T=new s.LngLat(b.lng-360,b.lat),k=new s.LngLat(b.lng+360,b.lat),R=360*Math.ceil(Math.abs(b.lng-g.center.lng)/360),K=g.locationPoint(b).distSqr(l),X=l.x<0||l.y<0||l.x>g.width||l.y>g.height;g.locationPoint(T).distSqr(l)<K&&(X||Math.abs(T.lng-g.center.lng)<R)?b=T:g.locationPoint(k).distSqr(l)<K&&(X||Math.abs(k.lng-g.center.lng)<R)&&(b=k)}for(;Math.abs(b.lng-g.center.lng)>180;){const T=g.locationPoint(b);if(T.x>=0&&T.y>=0&&T.x<=g.width&&T.y<=g.height)break;b.lng>g.center.lng?b.lng-=360:b.lng+=360}return b}const mo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class qn extends s.Evented{constructor(l,g){if(super(),(l instanceof s.window.HTMLElement||g)&&(l=s.extend({element:l},g)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=s.Point.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=te("div");const k=41,R=27,K=he("svg",{display:"block",height:k*this._scale+"px",width:R*this._scale+"px",viewBox:`0 0 ${R} ${k}`},this._element),X=he("radialGradient",{id:"shadowGradient"},he("defs",{},K));he("stop",{offset:"10%","stop-opacity":.4},X),he("stop",{offset:"100%","stop-opacity":.05},X),he("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},K),he("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},K),he("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},K),he("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},K),this._offset=s.Point.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",k=>{k.preventDefault()}),this._element.addEventListener("mousedown",k=>{k.preventDefault()});const T=this._element.classList;for(const k in mo)T.remove(`mapboxgl-marker-anchor-${k}`);T.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=s.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const k=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[k,-1*(38.1-13.5+k)],"bottom-right":[-k,-1*(38.1-13.5+k)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const g=l.code,T=l.charCode||l.keyCode;g!=="Space"&&g!=="Enter"&&T!==32&&T!==13||this.togglePopup()}_onMapClick(l){const g=l.originalEvent.target,T=this._element;this._popup&&(g===T||T.contains(g))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,g=this._pos;if(!l||!g)return!1;const T=l.unproject(g),k=l.getFreeCameraOptions();if(!k.position)return!1;const R=k.position.toLngLat();return R.distanceTo(T)<.9*R.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const g=this._pos;if(!g||g.x<0||g.x>l.transform.width||g.y<0||g.y>l.transform.height)return void this._clearFadeTimer();const T=l.unproject(g);let k;l._showingGlobe()&&s.isLngLatBehindGlobe(l.transform,this._lngLat)?k=0:(k=1-l._queryFogOpacity(T),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(k*=this._occludedOpacity)),this._element.style.opacity=`${k}`,this._element.style.pointerEvents=k>0?"auto":"none",this._popup&&this._popup._setOpacity(k),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const g=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${mo[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${g.x}px,${g.y}px)
        `}_calculateXYTransform(){const l=this._pos,g=this._map,T=this.getPitchAlignment();if(!g||!l||T!=="map")return"";if(!g._showingGlobe()){const ee=g.getPitch();return ee?`rotateX(${ee}deg)`:""}const k=s.radToDeg(s.globeTiltAtLngLat(g.transform,this._lngLat)),R=l.sub(s.globeCenterToScreenPoint(g.transform)),K=Math.abs(R.x)+Math.abs(R.y);if(K===0)return"";const X=k/K;return`rotateX(${-R.y*X}deg) rotateY(${R.x*X}deg)`}_calculateZTransform(){const l=this._pos,g=this._map;if(!g||!l)return"";let T=0;const k=this.getRotationAlignment();if(k==="map")if(g._showingGlobe()){const R=g.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),K=g.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(R);T=s.radToDeg(Math.atan2(K.y,K.x))-90}else T=-g.getBearing();else if(k==="horizon"){const R=s.smoothstep(4,6,g.getZoom()),K=s.globeCenterToScreenPoint(g.transform);K.y+=R*g.transform.height;const X=l.sub(K),ee=s.radToDeg(Math.atan2(X.y,X.x));T=(ee>90?ee-270:ee+90)*(1-R)}return T+=this._rotation,T?`rotateZ(${T}deg)`:""}_update(l){s.window.cancelAnimationFrame(this._updateFrameId);const g=this._map;g&&(g.transform.renderWorldCopies&&(this._lngLat=or(this._lngLat,this._pos,g.transform)),this._pos=g.project(this._lngLat),l===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),g._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(g._showingGlobe()||g.getTerrain()||g.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=s.Point.convert(l),this._update(),this}_onMove(l){const g=this._map;if(!g)return;const T=this._pointerdownPos,k=this._positionDelta;if(T&&k){if(!this._isDragging){const R=this._clickTolerance||g._clickTolerance;if(l.point.dist(T)<R)return;this._isDragging=!0}this._pos=l.point.sub(k),this._lngLat=g.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(l){const g=this._map,T=this._pos;g&&T&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(T),this._pointerdownPos=l.point,this._state="pending",g.on("mousemove",this._onMove),g.on("touchmove",this._onMove),g.once("mouseup",this._onUp),g.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const g=this._map;return g&&(l?(g.on("mousedown",this._addDragHandler),g.on("touchstart",this._addDragHandler)):(g.off("mousedown",this._addDragHandler),g.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Po={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Xr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function os(b=new s.Point(0,0),l="bottom"){if(typeof b=="number"){const g=Math.round(Math.sqrt(.5*Math.pow(b,2)));switch(l){case"top":return new s.Point(0,b);case"top-left":return new s.Point(g,g);case"top-right":return new s.Point(-g,g);case"bottom":return new s.Point(0,-b);case"bottom-left":return new s.Point(g,-g);case"bottom-right":return new s.Point(-g,-g);case"left":return new s.Point(b,0);case"right":return new s.Point(-b,0)}return new s.Point(0,0)}return b instanceof s.Point||Array.isArray(b)?s.Point.convert(b):s.Point.convert(b[l]||[0,0])}class ba{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const g=s.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-g)+this._end*g}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,g,T){this._start=this.getValue(g),this._end=l,this._startTime=g,this._endTime=g+T}}const eu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Lc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},wu={showCompass:!0,showZoom:!0,visualizePitch:!1};class ju{constructor(l,g,T=!1){this._clickTolerance=10,this.element=g,this.mouseRotate=new Jc({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,T&&(this.mousePitch=new P({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),g.addEventListener("mousedown",this.mousedown),g.addEventListener("touchstart",this.touchstart,{passive:!1}),g.addEventListener("touchmove",this.touchmove),g.addEventListener("touchend",this.touchend),g.addEventListener("touchcancel",this.reset)}down(l,g){this.mouseRotate.mousedown(l,g),this.mousePitch&&this.mousePitch.mousedown(l,g),xe()}move(l,g){const T=this.map,k=this.mouseRotate.mousemoveWindow(l,g),R=k&&k.bearingDelta;if(R&&T.setBearing(T.getBearing()+R),this.mousePitch){const K=this.mousePitch.mousemoveWindow(l,g),X=K&&K.pitchDelta;X&&T.setPitch(T.getPitch()+X)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Te(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(s.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),Se(this.element,l)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,Se(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=nt(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=nt(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Tl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},hl={maxWidth:100,unit:"metric"},tu={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},nu={version:s.version,supported:$,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends vi{constructor(b){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(b=s.extend({},Lc,b)).minZoom!=null&&b.maxZoom!=null&&b.minZoom>b.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(b.minPitch!=null&&b.maxPitch!=null&&b.minPitch>b.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(b.minPitch!=null&&b.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(b.maxPitch!=null&&b.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(b.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(b.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new hc(b.minZoom,b.maxZoom,b.minPitch,b.maxPitch,b.renderWorldCopies),b),this._interactive=b.interactive,this._minTileCacheSize=b.minTileCacheSize,this._maxTileCacheSize=b.maxTileCacheSize,this._failIfMajorPerformanceCaveat=b.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=b.preserveDrawingBuffer,this._antialias=b.antialias,this._useWebGL2=b.useWebGL2,this._trackResize=b.trackResize,this._bearingSnap=b.bearingSnap,this._refreshExpiredTiles=b.refreshExpiredTiles,this._fadeDuration=b.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=b.crossSourceCollisions,this._collectResourceTiming=b.collectResourceTiming,this._optimizeForTerrain=b.optimizeForTerrain,this._language=this._parseLanguage(b.language),this._worldview=b.worldview,this._renderTaskQueue=new io,this._domRenderTaskQueue=new io,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},eu,b.locale),this._clickTolerance=b.clickTolerance,this._cooperativeGestures=b.cooperativeGestures,this._performanceMetricsCollection=b.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ba(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(b.transformRequest,b.accessToken,b.testMode),this._silenceAuthErrors=!!b.testMode,typeof b.container=="string"){if(this._container=s.window.document.getElementById(b.container),!this._container)throw new Error(`Container '${b.container}' not found.`)}else{if(!(b.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=b.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),b.maxBounds&&this.setMaxBounds(b.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new xn(this,b),this._localFontFamily=b.localFontFamily,this._localIdeographFontFamily=b.localIdeographFontFamily,b.style&&this.setStyle(b.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),b.projection&&this.setProjection(b.projection),this._hash=b.hash&&new ul(typeof b.hash=="string"&&b.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch}),b.bounds&&(this.resize(),this.fitBounds(b.bounds,s.extend({},b.fitBoundsOptions,{duration:0})))),this.resize(),b.attributionControl&&this.addControl(new yn({customAttribution:b.customAttribution})),this._logoControl=new Nr,this.addControl(this._logoControl,b.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new s.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new s.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(b,l){if(l===void 0&&(l=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const g=b.onAdd(this);this._controls.push(b);const T=this._controlPositions[l];return l.indexOf("bottom")!==-1?T.insertBefore(g,T.firstChild):T.appendChild(g),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(b);return l>-1&&this._controls.splice(l,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(b){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new s.Event("movestart",b)).fire(new s.Event("move",b)),this.fire(new s.Event("resize",b)),l&&this.fire(new s.Event("moveend",b)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(b){return this.transform.setMaxBounds(s.LngLatBounds.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.minZoom=b,this._update(),this.getZoom()<b?this.setZoom(b):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b?this.setZoom(b):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.minPitch=b,this._update(),this.getPitch()<b?this.setPitch(b):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(b>=this.transform.minPitch)return this.transform.maxPitch=b,this._update(),this.getPitch()>b?this.setPitch(b):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.renderWorldCopies=b,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(b){return b==="auto"?s.window.navigator.language:Array.isArray(b)?b.length===0?void 0:b.map(l=>l==="auto"?s.window.navigator.language:l):b}setLanguage(b){const l=this._parseLanguage(b);if(!this.style||l===this._language)return this;this._language=l,this.style._reloadSources();for(const g of this._controls)g._setLanguage&&g._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(b){return this.style&&b!==this._worldview?(this._worldview=b,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(b){return this._lazyInitEmptyStyle(),b?typeof b=="string"&&(b={name:b}):b=null,this._useExplicitProjection=!!b,this._prioritizeAndUpdateProjection(b,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const b=this.transform,l=b.projection.name;let g;l==="globe"&&b.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(b.setMercatorFromTransition(),g=!0):l==="mercator"&&b.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(b.setProjection({name:"globe"}),g=!0),g&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(b,l){return this._updateProjection(b||l||{name:"mercator"})}_updateProjection(b){let l;if(l=b.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(b),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const g in this.style._sourceCaches)this.style._sourceCaches[g].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(b){return this.transform.locationPoint3D(s.LngLat.convert(b))}unproject(b){return this.transform.pointLocation3D(s.Point.convert(b))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(b,l,g){if(b==="mouseenter"||b==="mouseover"){let T=!1;const k=K=>{const X=l.filter(ce=>this.getLayer(ce)),ee=X.length?this.queryRenderedFeatures(K.point,{layers:X}):[];ee.length?T||(T=!0,g.call(this,new at(b,this,K.originalEvent,{features:ee}))):T=!1},R=()=>{T=!1};return{layers:new Set(l),listener:g,delegates:{mousemove:k,mouseout:R}}}if(b==="mouseleave"||b==="mouseout"){let T=!1;const k=K=>{const X=l.filter(ee=>this.getLayer(ee));(X.length?this.queryRenderedFeatures(K.point,{layers:X}):[]).length?T=!0:T&&(T=!1,g.call(this,new at(b,this,K.originalEvent)))},R=K=>{T&&(T=!1,g.call(this,new at(b,this,K.originalEvent)))};return{layers:new Set(l),listener:g,delegates:{mousemove:k,mouseout:R}}}{const T=k=>{const R=l.filter(X=>this.getLayer(X)),K=R.length?this.queryRenderedFeatures(k.point,{layers:R}):[];K.length&&(k.features=K,g.call(this,k),delete k.features)};return{layers:new Set(l),listener:g,delegates:{[b]:T}}}}on(b,l,g){if(g===void 0)return super.on(b,l);Array.isArray(l)||(l=[l]);const T=this._createDelegatedListener(b,l,g);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(T);for(const k in T.delegates)this.on(k,T.delegates[k]);return this}once(b,l,g){if(g===void 0)return super.once(b,l);Array.isArray(l)||(l=[l]);const T=this._createDelegatedListener(b,l,g);for(const k in T.delegates)this.once(k,T.delegates[k]);return this}off(b,l,g){if(g===void 0)return super.off(b,l);l=new Set(Array.isArray(l)?l:[l]);const T=(R,K)=>{if(R.size!==K.size)return!1;for(const X of R)if(!K.has(X))return!1;return!0},k=this._delegatedListeners?this._delegatedListeners[b]:void 0;return k&&(R=>{for(let K=0;K<R.length;K++){const X=R[K];if(X.listener===g&&T(X.layers,l)){for(const ee in X.delegates)this.off(ee,X.delegates[ee]);return R.splice(K,1),this}}})(k),this}queryRenderedFeatures(b,l){return this.style?(l!==void 0||b===void 0||b instanceof s.Point||Array.isArray(b)||(l=b,b=void 0),this.style.queryRenderedFeatures(b=b||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(b,l){return this.style.querySourceFeatures(b,l)}isPointOnSurface(b){const{name:l}=this.transform.projection;return l!=="globe"&&l!=="mercator"&&s.warnOnce(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.Point.convert(b))}setStyle(b,l){return(l=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&b?(this._diffStyle(b,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(b,l))}_getUIString(b){const l=this._locale[b];if(l==null)throw new Error(`Missing UI string '${b}'`);return l}_updateStyle(b,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),b&&(this.style=new Is(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b):this.style.loadJSON(b)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Is(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,l){if(typeof b=="string"){const g=this._requestManager.normalizeStyleURL(b),T=this._requestManager.transformRequest(g,s.ResourceType.Style);s.getJSON(T,(k,R)=>{k?this.fire(new s.ErrorEvent(k)):R&&this._updateDiff(R,l)})}else typeof b=="object"&&this._updateDiff(b,l)}_updateDiff(b,l){try{this.style.setState(b)&&this._update(!0)}catch(g){s.warnOnce(`Unable to perform style diff: ${g.message||g.error||g}.  Rebuilding the style from scratch.`),this._updateStyle(b,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(b,l){return this._lazyInitEmptyStyle(),this.style.addSource(b,l),this._update(!0)}isSourceLoaded(b){return!!this.style&&this.style._isSourceCacheLoaded(b)}areTilesLoaded(){const b=this.style&&this.style._sourceCaches;for(const l in b){const g=b[l]._tiles;for(const T in g){const k=g[T];if(k.state!=="loaded"&&k.state!=="errored")return!1}}return!0}addSourceType(b,l,g){this._lazyInitEmptyStyle(),this.style.addSourceType(b,l,g)}removeSource(b){return this.style.removeSource(b),this._updateTerrain(),this._update(!0)}getSource(b){return this.style.getSource(b)}addImage(b,l,{pixelRatio:g=1,sdf:T=!1,stretchX:k,stretchY:R,content:K}={}){if(this._lazyInitEmptyStyle(),l instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&l instanceof s.window.ImageBitmap){const{width:X,height:ee,data:ce}=s.exported.getImageData(l);this.style.addImage(b,{data:new s.RGBAImage({width:X,height:ee},ce),pixelRatio:g,stretchX:k,stretchY:R,content:K,sdf:T,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:X,height:ee}=l,ce=l;this.style.addImage(b,{data:new s.RGBAImage({width:X,height:ee},new Uint8Array(ce.data)),pixelRatio:g,stretchX:k,stretchY:R,content:K,sdf:T,version:0,userImage:ce}),ce.onAdd&&ce.onAdd(this,b)}}updateImage(b,l){const g=this.style.getImage(b);if(!g)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=l instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&l instanceof s.window.ImageBitmap?s.exported.getImageData(l):l,{width:k,height:R}=T;k!==void 0&&R!==void 0?k===g.data.width&&R===g.data.height?(g.data.replace(T.data,!(l instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&l instanceof s.window.ImageBitmap)),this.style.updateImage(b,g)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${k}, ${R})
                must be that same as the previous version of the image
                (${g.data.width}, ${g.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b,l){s.getImage(this._requestManager.transformRequest(b,s.ResourceType.Image),(g,T)=>{l(g,T instanceof s.window.HTMLImageElement?s.exported.getImageData(T):T)})}listImages(){return this.style.listImages()}addLayer(b,l){return this._lazyInitEmptyStyle(),this.style.addLayer(b,l),this._update(!0)}moveLayer(b,l){return this.style.moveLayer(b,l),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}setLayerZoomRange(b,l,g){return this.style.setLayerZoomRange(b,l,g),this._update(!0)}setFilter(b,l,g={}){return this.style.setFilter(b,l,g),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,l,g,T={}){return this.style.setPaintProperty(b,l,g,T),this._update(!0)}getPaintProperty(b,l){return this.style.getPaintProperty(b,l)}setLayoutProperty(b,l,g,T={}){return this.style.setLayoutProperty(b,l,g,T),this._update(!0)}getLayoutProperty(b,l){return this.style.getLayoutProperty(b,l)}setLight(b,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(b){return this._lazyInitEmptyStyle(),!b&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(b),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(b){return this._lazyInitEmptyStyle(),this.style.setFog(b),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(b){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(b),this.transform):0}setFeatureState(b,l){return this.style.setFeatureState(b,l),this._update()}removeFeatureState(b,l){return this.style.removeFeatureState(b,l),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}_updateContainerDimensions(){if(!this._container)return;const b=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let g,T,k,R=this._container;for(;R&&(!T||!k);){const K=s.window.getComputedStyle(R).transform;K&&K!=="none"&&(g=K.match(/matrix.*\((.+)\)/)[1].split(", "),g[0]&&g[0]!=="0"&&g[0]!=="1"&&(T=g[0]),g[3]&&g[3]!=="0"&&g[3]!=="1"&&(k=g[3])),R=R.parentElement}this._containerWidth=T?Math.abs(b/T):b,this._containerHeight=k?Math.abs(l/k):l}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const b=this._container;b.classList.add("mapboxgl-map"),(this._missingCSSCanary=te("div","mapboxgl-canary",b)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=te("div","mapboxgl-canvas-container",b);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=te("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const g=this._controlContainer=te("div","mapboxgl-control-container",b),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(k=>{T[k]=te("div",`mapboxgl-ctrl-${k}`,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,l){const g=s.exported.devicePixelRatio||1;this._canvas.width=g*Math.ceil(b),this._canvas.height=g*Math.ceil(l),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${l}px`}_addMarker(b){this._markers.push(b)}_removeMarker(b){const l=this._markers.indexOf(b);l!==-1&&this._markers.splice(l,1)}_addPopup(b){this._popups.push(b)}_removePopup(b){const l=this._popups.indexOf(b);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const b=s.extend({},$.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._useWebGL2&&this._canvas.getContext("webgl2",b),g=l||this._canvas.getContext("webgl",b)||this._canvas.getContext("experimental-webgl",b);g?(this._useWebGL2&&!l&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(g,!0),this.painter=new Ka(g,this.transform,!!l),this.on("data",T=>{T.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(g)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(b){b.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:b}))}_contextRestored(b){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:b}))}_onMapScroll(b){if(b.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_requestDomTask(b){!this.loaded()||this.loaded()&&!this.isMoving()?b():this._domRenderTaskQueue.add(b)}_render(b){let l;const g=this.painter.context.extTimerQuery,T=s.exported.now();if(this.listens("gpu-timing-frame")&&(l=g.createQueryEXT(),g.beginQueryEXT(g.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(b),this._domRenderTaskQueue.run(b),this._removed)return;this._updateProjectionTransition();const k=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const X=this.transform.zoom,ee=this.transform.pitch,ce=s.exported.now(),le=new s.EvaluationParameters(X,{now:ce,fadeDuration:k,pitch:ee,transition:this.style.getTransition()});this.style.update(le)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let R=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),R=this._updateAverageElevation(T),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):R=this._updateAverageElevation(T),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,k,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:k,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const X=s.exported.now()-T;g.endQueryEXT(g.TIME_ELAPSED_EXT,l),setTimeout(()=>{const ee=g.getQueryObjectEXT(l,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(l),this.fire(new s.Event("gpu-timing-frame",{cpuTime:X,gpuTime:ee})),s.window.performance.mark("frame-gpu",{startTime:T,detail:{gpuTime:ee}})},50)}if(this.listens("gpu-timing-layer")){const X=this.painter.collectGpuTimers();setTimeout(()=>{const ee=this.painter.queryGpuTimers(X);this.fire(new s.Event("gpu-timing-layer",{layerTimes:ee}))},50)}if(this.listens("gpu-timing-deferred-render")){const X=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const ee=this.painter.queryGpuTimeDeferredRender(X);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:ee}))},50)}const K=this._sourcesDirty||this._styleDirty||this._placementDirty||R;if(K||this._repaint)this.triggerRepaint();else{const X=!this.isMoving()&&this.loaded();if(X&&(R=this._updateAverageElevation(T,!0)),R)this.triggerRepaint();else if(this._triggerFrame(!1),X&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const ee=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:ee})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||K||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(b){for(const l of this._markers)b&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!b||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(b,l=!1){const g=T=>(this.transform.averageElevation=T,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&g(0);if((l||b-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(b)){const T=this.transform.averageElevation;let k=this.transform.sampleAverageElevation(),R=!1;this.transform.elevation&&(R=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(k)?k=0:this._averageElevationLastSampledAt=b;const K=Math.abs(T-k);if(K>1){if(this._isInitialLoad||R)return this._averageElevation.jumpTo(k),g(k);this._averageElevation.easeTo(k,b,300)}else if(K>1e-4)return this._averageElevation.jumpTo(k),g(k)}return!!this._averageElevation.isEasing(b)&&g(this._averageElevation.getValue(b))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,b=>{if(b&&(b.message===s.AUTH_ERR_MSG||b.status===401)){const l=this.painter.context.gl;s.storeAuthState(l,!1),this._logoControl instanceof Nr&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const b=this._isDragging();this.painter.updateTerrain(this.style,b)}_calculateSpeedIndex(){const b=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const g=this.painter.context.gl,T=g.createFramebuffer();function k(R){g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,R,0);const K=new Uint8Array(g.drawingBufferWidth*g.drawingBufferHeight*4);return g.readPixels(0,0,g.drawingBufferWidth,g.drawingBufferHeight,g.RGBA,g.UNSIGNED_BYTE,K),K}return g.bindFramebuffer(g.FRAMEBUFFER,T),this._canvasPixelComparison(k(b),l.canvasCopies.map(k),l.timeStamps)}_canvasPixelComparison(b,l,g){let T=g[1]-g[0];const k=b.length/4;for(let R=0;R<l.length;R++){const K=l[R];let X=0;for(let ee=0;ee<K.length;ee+=4)K[ee]===b[ee]&&K[ee+1]===b[ee+1]&&K[ee+2]===b[ee+2]&&K[ee+3]===b[ee+3]&&(X+=1);T+=(g[R+2]-g[R+1])*(1-X/k)}return T}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const b=this.painter.context.gl.getExtension("WEBGL_lose_context");b&&b.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(b){this._renderNextFrame=this._renderNextFrame||b,this.style&&!this._frame&&(this._frame=s.exported.frame(l=>{const g=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,g&&this._render(l)}))}_preloadTiles(b){const l=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(l,(g,T)=>g._preloadTiles(b,T),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(b){this._trackResize&&this.resize({originalEvent:b})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(b){this._showTerrainWireframe!==b&&(this._showTerrainWireframe=b,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(b){this._speedIndexTiming!==b&&(this._speedIndexTiming=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(b){this._showTileAABBs!==b&&(this._showTileAABBs=b,b&&this._update())}_setCacheLimits(b,l){s.setCacheLimits(b,l)}get version(){return s.version}},NavigationControl:class{constructor(b){this.options=s.extend({},wu,b),this._container=te("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),te("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),te("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const g=this._map;g&&(this.options.visualizePitch?g.resetNorthPitch({},{originalEvent:l}):g.resetNorth({},{originalEvent:l}))}),this._compassIcon=te("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const b=this._map;if(!b)return;const l=b.getZoom(),g=l===b.getMaxZoom(),T=l===b.getMinZoom();this._zoomInButton.disabled=g,this._zoomOutButton.disabled=T,this._zoomInButton.setAttribute("aria-disabled",g.toString()),this._zoomOutButton.setAttribute("aria-disabled",T.toString())}_rotateCompassArrow(){const b=this._map;if(!b)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(b.transform.pitch*(Math.PI/180)),.5)}) rotateX(${b.transform.pitch}deg) rotateZ(${b.transform.angle*(180/Math.PI)}deg)`:`rotate(${b.transform.angle*(180/Math.PI)}deg)`;b._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),b.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&b.on("pitch",this._rotateCompassArrow),b.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ju(b,this._compass,this.options.visualizePitch)),this._container}onRemove(){const b=this._map;b&&(this._container.remove(),this.options.showZoom&&b.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&b.off("pitch",this._rotateCompassArrow),b.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(b,l){const g=te("button",b,this._container);return g.type="button",g.addEventListener("click",l),g}_setButtonTitle(b,l){if(!this._map)return;const g=this._map._getUIString(`NavigationControl.${l}`);b.setAttribute("aria-label",g),b.firstElementChild&&b.firstElementChild.setAttribute("title",g)}},GeolocateControl:class extends s.Evented{constructor(b){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},Tl,b),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=bu(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(b){return this._map=b,this._container=te("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(b){const l=(g=!!this.options.geolocation)=>{this._supportsGeolocation=g,b(g)};this._supportsGeolocation!==void 0?b(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(g=>l(g.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(b){const l=this._map.getMaxBounds(),g=b.coords;return!!l&&(g.longitude<l.getWest()||g.longitude>l.getEast()||g.latitude<l.getSouth()||g.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(b){if(this._map){if(this._isOutOfMapMaxBounds(b))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",b)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=b,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(b),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(b),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",b)),this._finish()}}_updateCamera(b){const l=new s.LngLat(b.coords.longitude,b.coords.latitude),g=b.coords.accuracy,T=this._map.getBearing(),k=s.extend({bearing:T},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(g),k,{geolocateSource:!0})}_updateMarker(b){if(b){const l=new s.LngLat(b.coords.longitude,b.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=b.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const b=this._map.transform,l=s.mercatorZfromAltitude(1,b._center.lat)*b.worldSize,g=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(b){if(this._map){if(this.options.trackUserLocation)if(b.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(b.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",b)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(b){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=te("button","mapboxgl-ctrl-geolocate",this._container),te("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",b===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=te("div","mapboxgl-user-location"),this._dotElement.appendChild(te("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(te("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new qn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=te("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}}_onDeviceOrientation(b){this._userLocationDotMarker&&(b.webkitCompassHeading?this._heading=b.webkitCompassHeading:b.absolute===!0&&(this._heading=-1*b.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(b={maximumAge:6e5,timeout:0},this._noTimeout=!0):(b=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,b),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const b=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&b()}).catch(console.error):b()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:yn,ScaleControl:class{constructor(b){this.options=s.extend({},hl,b),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const b=this.options.maxWidth||100,l=this._map,g=l._containerHeight/2,T=l._containerWidth/2-b/2,k=l.unproject([T,g]),R=l.unproject([T+b,g]),K=k.distanceTo(R);if(this.options.unit==="imperial"){const X=3.2808*K;X>5280?this._setScale(b,X/5280,"mile"):this._setScale(b,X,"foot")}else this.options.unit==="nautical"?this._setScale(b,K/1852,"nautical-mile"):K>=1e3?this._setScale(b,K/1e3,"kilometer"):this._setScale(b,K,"meter")}_setScale(b,l,g){this._map._requestDomTask(()=>{const T=function(R){const K=Math.pow(10,`${Math.floor(R)}`.length-1);let X=R/K;return X=X>=10?10:X>=5?5:X>=3?3:X>=2?2:X>=1?1:function(ee){const ce=Math.pow(10,Math.ceil(-Math.log(ee)/Math.LN10));return Math.round(ee*ce)/ce}(X),K*X}(l),k=T/l;this._container.innerHTML=this._isNumberFormatSupported&&g!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:g}).format(T):`${T}&nbsp;${tu[g]}`,this._container.style.width=b*k+"px"})}onAdd(b){return this._map=b,this._language=b.getLanguage(),this._container=te("div","mapboxgl-ctrl mapboxgl-ctrl-scale",b.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(b){this._language=b,this._update()}setUnit(b){this.options.unit=b,this._update()}},FullscreenControl:class{constructor(b){this._fullscreen=!1,b&&b.container&&(b.container instanceof s.window.HTMLElement?this._container=b.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=te("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const b=this._fullscreenButton=te("button","mapboxgl-ctrl-fullscreen",this._controlContainer);te("span","mapboxgl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",b)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(b){super(),this.options=s.extend(Object.create(Po),b),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(b&&b.className?b.className.trim().split(/\s+/):[])}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&b.on("preclick",this._onClose),this.options.closeOnMove&&b.on("move",this._onClose),b.on("remove",this.remove),this._update(),b._addPopup(this),this._focusFirstElement(),this._trackPointer?(b.on("mousemove",this._onMouseEvent),b.on("mouseup",this._onMouseEvent),b._canvasContainer.classList.add("mapboxgl-track-pointer")):b.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const b=this._map;return b&&(b.off("move",this._update),b.off("move",this._onClose),b.off("preclick",this._onClose),b.off("click",this._onClose),b.off("remove",this.remove),b.off("mousemove",this._onMouseEvent),b.off("mouseup",this._onMouseEvent),b.off("drag",this._onMouseEvent),b._canvasContainer&&b._canvasContainer.classList.remove("mapboxgl-track-pointer"),b._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(b){this._lngLat=s.LngLat.convert(b),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const b=this._map;return b&&(b.off("move",this._update),b.on("mousemove",this._onMouseEvent),b.on("drag",this._onMouseEvent),b._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(s.window.document.createTextNode(b))}setHTML(b){const l=s.window.document.createDocumentFragment(),g=s.window.document.createElement("body");let T;for(g.innerHTML=b;T=g.firstChild,T;)l.appendChild(T);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=te("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(b),this.options.closeButton){const g=this._closeButton=te("button","mapboxgl-popup-close-button",l);g.type="button",g.setAttribute("aria-label","Close popup"),g.setAttribute("aria-hidden","true"),g.innerHTML="&#215;",g.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(b){return this._classList.add(b),this._updateClassList(),this}removeClassName(b){return this._classList.delete(b),this._updateClassList(),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){let l;return this._classList.delete(b)?l=!1:(this._classList.add(b),l=!0),this._updateClassList(),l}_onMouseEvent(b){this._update(b.point)}_getAnchor(b){if(this.options.anchor)return this.options.anchor;const l=this._map,g=this._container,T=this._pos;if(!l||!g||!T)return"bottom";const k=g.offsetWidth,R=g.offsetHeight,K=T.x<k/2,X=T.x>l.transform.width-k/2;if(T.y+b<R)return K?"top-left":X?"top-right":"top";if(T.y>l.transform.height-R){if(K)return"bottom-left";if(X)return"bottom-right"}return K?"left":X?"right":"bottom"}_updateClassList(){const b=this._container;if(!b)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),b.className=l.join(" ")}_update(b){const l=this._map,g=this._content;if(!l||!this._lngLat&&!this._trackPointer||!g)return;let T=this._container;if(T||(T=this._container=te("div","mapboxgl-popup",l.getContainer()),this._tip=te("div","mapboxgl-popup-tip",T),T.appendChild(g)),this.options.maxWidth&&T.style.maxWidth!==this.options.maxWidth&&(T.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=or(this._lngLat,this._pos,l.transform)),!this._trackPointer||b){const k=this._pos=this._trackPointer&&b?b:l.project(this._lngLat),R=os(this.options.offset),K=this._anchor=this._getAnchor(R.y),X=os(this.options.offset,K),ee=k.add(X).round();l._requestDomTask(()=>{this._container&&K&&(this._container.style.transform=`${mo[K]} translate(${ee.x}px,${ee.y}px)`)})}if(!this._marker&&l._showingGlobe()){const k=s.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(k)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(Xr);b&&b.focus()}_onClose(){this.remove()}_setOpacity(b){this._container&&(this._container.style.opacity=`${b}`),this._content&&(this._content.style.pointerEvents=b?"auto":"none")}},Marker:qn,Style:Is,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:Sc,Evented:s.Evented,config:s.config,prewarm:function(){Jt().acquire(Oe)},clearPrewarmedResources:function(){const b=mt;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(Oe),mt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(b){s.config.ACCESS_TOKEN=b},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(b){s.config.API_URL=b},get workerCount(){return Je.workerCount},set workerCount(b){Je.workerCount=b},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(b){s.config.MAX_PARALLEL_IMAGE_REQUESTS=b},clearStorage(b){s.clearTileCache(b)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return nu});var h=f;return h})})(PI);var FI=PI.exports;const DI=Sm(FI),wO=kf({__proto__:null,default:DI},[FI]);var UI={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(hu,function(){var i,r,d;function f(h,s){if(!i)i=s;else if(!r)r=s;else{var U="var sharedChunk = {}; ("+i+")(sharedChunk); ("+r+")(sharedChunk);",$={};i($),d=s($),typeof window<"u"&&(d.workerUrl=window.URL.createObjectURL(new Blob([U],{type:"text/javascript"})))}}f(["exports"],function(h){var s=U;function U(A,c,m,B){this.cx=3*A,this.bx=3*(m-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(B-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=c,this.p2x=m,this.p2y=B}function $(A,c,m,B){const D=new s(A,c,m,B);return function(O){return D.solve(O)}}U.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,c){if(c===void 0&&(c=1e-6),A<0)return 0;if(A>1)return 1;for(var m=A,B=0;B<8;B++){var D=this.sampleCurveX(m)-A;if(Math.abs(D)<c)return m;var O=this.sampleCurveDerivativeX(m);if(Math.abs(O)<1e-6)break;m-=D/O}var H=0,Y=1;for(m=A,B=0;B<20&&(D=this.sampleCurveX(m),!(Math.abs(D-A)<c));B++)A>D?H=m:Y=m,m=.5*(Y-H)+H;return m},solve:function(A,c){return this.sampleCurveY(this.solveCurveX(A,c))}};const V=$(.25,.1,.25,1);function q(A,c,m){return Math.min(m,Math.max(c,A))}function te(A,c,m){const B=m-c,D=((A-c)%B+B)%B+c;return D===c?m:D}function he(A,...c){for(const m of c)for(const B in m)A[B]=m[B];return A}let Ae=1;function De(A,c){A.forEach(m=>{c[m]&&(c[m]=c[m].bind(c))})}function ke(A,c,m){const B={};for(const D in A)B[D]=c.call(m||this,A[D],D,A);return B}function xe(A,c,m){const B={};for(const D in A)c.call(m||this,A[D],D,A)&&(B[D]=A[D]);return B}function Te(A){return Array.isArray(A)?A.map(Te):typeof A=="object"&&A?ke(A,Te):A}const Ee={};function Fe(A){Ee[A]||(typeof console<"u"&&console.warn(A),Ee[A]=!0)}function Se(A,c,m){return(m.y-A.y)*(c.x-A.x)>(c.y-A.y)*(m.x-A.x)}function nt(A){let c=0;for(let m,B,D=0,O=A.length,H=O-1;D<O;H=D++)m=A[D],B=A[H],c+=(B.x-m.x)*(m.y+B.y);return c}function xt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Bt(A){const c={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(m,B,D,O)=>{const H=D||O;return c[B]=!H||H.toLowerCase(),""}),c["max-age"]){const m=parseInt(c["max-age"],10);isNaN(m)?delete c["max-age"]:c["max-age"]=m}return c}let Xe,qt,rn=null;function Ut(A){if(rn==null){const c=A.navigator?A.navigator.userAgent:null;rn=!!A.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return rn}function Kt(A){return typeof ImageBitmap<"u"&&A instanceof ImageBitmap}const On={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(A){const c=requestAnimationFrame(A);return{cancel:()=>cancelAnimationFrame(c)}},getImageData(A,c=0){const m=window.document.createElement("canvas"),B=m.getContext("2d");if(!B)throw new Error("failed to create canvas 2d context");return m.width=A.width,m.height=A.height,B.drawImage(A,0,0,A.width,A.height),B.getImageData(-c,-c,A.width+2*c,A.height+2*c)},resolveURL:A=>(Xe||(Xe=document.createElement("a")),Xe.href=A,Xe.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(qt==null&&(qt=matchMedia("(prefers-reduced-motion: reduce)")),qt.matches)}};var Gt=Rn;function Rn(A,c){this.x=A,this.y=c}Rn.prototype={clone:function(){return new Rn(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,c){return this.clone()._rotateAround(A,c)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var c=A.x-this.x,m=A.y-this.y;return c*c+m*m},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,c){return Math.atan2(this.x*c-this.y*A,this.x*A+this.y*c)},_matMult:function(A){var c=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=c,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var c=Math.cos(A),m=Math.sin(A),B=m*this.x+c*this.y;return this.x=c*this.x-m*this.y,this.y=B,this},_rotateAround:function(A,c){var m=Math.cos(A),B=Math.sin(A),D=c.y+B*(this.x-c.x)+m*(this.y-c.y);return this.x=c.x+m*(this.x-c.x)-B*(this.y-c.y),this.y=D,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Rn.convert=function(A){return A instanceof Rn?A:Array.isArray(A)?new Rn(A[0],A[1]):A};const mn={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Cn="mapbox-tiles";let Qt,Xn,Wn=500,Bi=50;function Bn(){typeof caches>"u"||Qt||(Qt=caches.open(Cn))}let Hn=1/0;const ei={supported:!1,testSupport:function(A){!zi&&ri&&(Vr?sr(A):tr=A)}};let tr,ri,zi=!1,Vr=!1;function sr(A){const c=A.createTexture();A.bindTexture(A.TEXTURE_2D,c);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,ri),A.isContextLost())return;ei.supported=!0}catch{}A.deleteTexture(c),zi=!0}typeof document<"u"&&(ri=document.createElement("img"),ri.onload=function(){tr&&sr(tr),tr=null,Vr=!0},ri.onerror=function(){zi=!0,tr=null},ri.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const li={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(li);class Qi extends Error{constructor(c,m,B,D){super(`AJAXError: ${m} (${c}): ${B}`),this.status=c,this.statusText=m,this.url=B,this.body=D}}const Ki=xt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ji(A,c){const m=new AbortController,B=new Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:Ki(),signal:m.signal});let D=!1,O=!1;return A.type==="json"&&B.headers.set("Accept","application/json"),((H,Y,re)=>{if(O)return;const de=Date.now();fetch(B).then(be=>be.ok?((Le,$e,Ge)=>{(A.type==="arrayBuffer"?Le.arrayBuffer():A.type==="json"?Le.json():Le.text()).then(Ze=>{O||($e&&Ge&&function(St,wt,Yt){if(Bn(),!Qt)return;const pn={status:wt.status,statusText:wt.statusText,headers:new Headers};wt.headers.forEach((dn,Gn)=>pn.headers.set(Gn,dn));const Zt=Bt(wt.headers.get("Cache-Control")||"");Zt["no-store"]||(Zt["max-age"]&&pn.headers.set("Expires",new Date(Yt+1e3*Zt["max-age"]).toUTCString()),new Date(pn.headers.get("Expires")).getTime()-Yt<42e4||function(dn,Gn){if(Xn===void 0)try{new Response(new ReadableStream),Xn=!0}catch{Xn=!1}Xn?Gn(dn.body):dn.blob().then(Gn)}(wt,dn=>{const Gn=new Response(dn,pn);Bn(),Qt&&Qt.then(Qn=>Qn.put(function(Ni){const Vi=Ni.indexOf("?");return Vi<0?Ni:Ni.slice(0,Vi)}(St.url),Gn)).catch(Qn=>Fe(Qn.message))}))}(B,$e,Ge),D=!0,c(null,Ze,Le.headers.get("Cache-Control"),Le.headers.get("Expires")))}).catch(Ze=>{O||c(new Error(Ze.message))})})(be,null,de):be.blob().then(Le=>c(new Qi(be.status,be.statusText,A.url,Le)))).catch(be=>{be.code!==20&&c(new Error(be.message))})})(),{cancel:()=>{O=!0,D||m.abort()}}}const di=function(A,c){if(/:\/\//.test(A.url)&&!/^https?:|^file:/.test(A.url)){if(xt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,c);if(!xt()){const B=A.url.substring(0,A.url.indexOf("://"));return(mn.REGISTERED_PROTOCOLS[B]||ji)(A,c)}}if(!(/^file:/.test(m=A.url)||/^file:/.test(Ki())&&!/^\w+:/.test(m))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ji(A,c);if(xt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,c,void 0,!0)}var m;return function(B,D){const O=new XMLHttpRequest;O.open(B.method||"GET",B.url,!0),B.type==="arrayBuffer"&&(O.responseType="arraybuffer");for(const H in B.headers)O.setRequestHeader(H,B.headers[H]);return B.type==="json"&&(O.responseType="text",O.setRequestHeader("Accept","application/json")),O.withCredentials=B.credentials==="include",O.onerror=()=>{D(new Error(O.statusText))},O.onload=()=>{if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){let H=O.response;if(B.type==="json")try{H=JSON.parse(O.response)}catch(Y){return D(Y)}D(null,H,O.getResponseHeader("Cache-Control"),O.getResponseHeader("Expires"))}else{const H=new Blob([O.response],{type:O.getResponseHeader("Content-Type")});D(new Qi(O.status,O.statusText,B.url,H))}},O.send(B.body),{cancel:()=>O.abort()}}(A,c)},Ir=function(A,c){return di(he(A,{type:"arrayBuffer"}),c)};function nr(A){const c=window.document.createElement("a");return c.href=A,c.protocol===window.document.location.protocol&&c.host===window.document.location.host}const Ri="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let hr,ir;hr=[],ir=0;const Ur=function(A,c){if(ei.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),ir>=mn.MAX_PARALLEL_IMAGE_REQUESTS){const O={requestParameters:A,callback:c,cancelled:!1,cancel(){this.cancelled=!0}};return hr.push(O),O}ir++;let m=!1;const B=()=>{if(!m)for(m=!0,ir--;hr.length&&ir<mn.MAX_PARALLEL_IMAGE_REQUESTS;){const O=hr.shift(),{requestParameters:H,callback:Y,cancelled:re}=O;re||(O.cancel=Ur(H,Y).cancel)}},D=Ir(A,(O,H,Y,re)=>{B(),O?c(O):H&&function(de,be){typeof createImageBitmap=="function"?function(Le,$e){const Ge=new Blob([new Uint8Array(Le)],{type:"image/png"});createImageBitmap(Ge).then(Ze=>{$e(null,Ze)}).catch(Ze=>{$e(new Error(`Could not load image because of ${Ze.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(de,be):function(Le,$e){const Ge=new Image;Ge.onload=()=>{$e(null,Ge),URL.revokeObjectURL(Ge.src),Ge.onload=null,window.requestAnimationFrame(()=>{Ge.src=Ri})},Ge.onerror=()=>$e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Ze=new Blob([new Uint8Array(Le)],{type:"image/png"});Ge.src=Le.byteLength?URL.createObjectURL(Ze):Ri}(de,be)}(H,(de,be)=>{de!=null?c(de):be!=null&&c(null,be,{cacheControl:Y,expires:re})})});return{cancel:()=>{D.cancel(),B()}}};function jr(A,c,m){m[A]&&m[A].indexOf(c)!==-1||(m[A]=m[A]||[],m[A].push(c))}function pr(A,c,m){if(m&&m[A]){const B=m[A].indexOf(c);B!==-1&&m[A].splice(B,1)}}class Zr{constructor(c,m={}){he(this,m),this.type=c}}class Eo extends Zr{constructor(c,m={}){super("error",he({error:c},m))}}class Ao{on(c,m){return this._listeners=this._listeners||{},jr(c,m,this._listeners),this}off(c,m){return pr(c,m,this._listeners),pr(c,m,this._oneTimeListeners),this}once(c,m){return this._oneTimeListeners=this._oneTimeListeners||{},jr(c,m,this._oneTimeListeners),this}fire(c,m){typeof c=="string"&&(c=new Zr(c,m||{}));const B=c.type;if(this.listens(B)){c.target=this;const D=this._listeners&&this._listeners[B]?this._listeners[B].slice():[];for(const Y of D)Y.call(this,c);const O=this._oneTimeListeners&&this._oneTimeListeners[B]?this._oneTimeListeners[B].slice():[];for(const Y of O)pr(B,Y,this._oneTimeListeners),Y.call(this,c);const H=this._eventedParent;H&&(he(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),H.fire(c))}else c instanceof Eo&&console.error(c.error);return this}listens(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)}setEventedParent(c,m){return this._eventedParent=c,this._eventedParentData=m,this}}var $t={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class en{constructor(c,m,B,D){this.message=(c?`${c}: `:"")+B,D&&(this.identifier=D),m!=null&&m.__line__&&(this.line=m.__line__)}}function Fr(A){const c=A.value;return c?[new en(A.key,c,"constants have been deprecated as of v8")]:[]}function So(A,...c){for(const m of c)for(const B in m)A[B]=m[B];return A}function er(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function xi(A){if(Array.isArray(A))return A.map(xi);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){const c={};for(const m in A)c[m]=xi(A[m]);return c}return er(A)}class Xi extends Error{constructor(c,m){super(m),this.message=m,this.key=c}}class Un{constructor(c,m=[]){this.parent=c,this.bindings={};for(const[B,D]of m)this.bindings[B]=D}concat(c){return new Un(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}const Oi={kind:"null"},bn={kind:"number"},bi={kind:"string"},fi={kind:"boolean"},ot={kind:"color"},Ie={kind:"object"},Ce={kind:"value"},st={kind:"collator"},ft={kind:"formatted"},kt={kind:"padding"},zt={kind:"resolvedImage"};function Rt(A,c){return{kind:"array",itemType:A,N:c}}function yt(A){if(A.kind==="array"){const c=yt(A.itemType);return typeof A.N=="number"?`array<${c}, ${A.N}>`:A.itemType.kind==="value"?"array":`array<${c}>`}return A.kind}const Xt=[Oi,bn,bi,fi,ot,ft,Ie,Rt(Ce),kt,zt];function Tn(A,c){if(c.kind==="error")return null;if(A.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!Tn(A.itemType,c.itemType))&&(typeof A.N!="number"||A.N===c.N))return null}else{if(A.kind===c.kind)return null;if(A.kind==="value"){for(const m of Xt)if(!Tn(m,c))return null}}return`Expected ${yt(A)} but found ${yt(c)} instead.`}function Fn(A,c){return c.some(m=>m.kind===A.kind)}function zn(A,c){return c.some(m=>m==="null"?A===null:m==="array"?Array.isArray(A):m==="object"?A&&!Array.isArray(A)&&typeof A=="object":m===typeof A)}var rr,Zi={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Pe(A){return(A=Math.round(A))<0?0:A>255?255:A}function pe(A){return Pe(A[A.length-1]==="%"?parseFloat(A)/100*255:parseInt(A))}function we(A){return(c=A[A.length-1]==="%"?parseFloat(A)/100:parseFloat(A))<0?0:c>1?1:c;var c}function je(A,c,m){return m<0?m+=1:m>1&&(m-=1),6*m<1?A+(c-A)*m*6:2*m<1?c:3*m<2?A+(c-A)*(2/3-m)*6:A}try{rr={}.parseCSSColor=function(A){var c,m=A.replace(/ /g,"").toLowerCase();if(m in Zi)return Zi[m].slice();if(m[0]==="#")return m.length===4?(c=parseInt(m.substr(1),16))>=0&&c<=4095?[(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1]:null:m.length===7&&(c=parseInt(m.substr(1),16))>=0&&c<=16777215?[(16711680&c)>>16,(65280&c)>>8,255&c,1]:null;var B=m.indexOf("("),D=m.indexOf(")");if(B!==-1&&D+1===m.length){var O=m.substr(0,B),H=m.substr(B+1,D-(B+1)).split(","),Y=1;switch(O){case"rgba":if(H.length!==4)return null;Y=we(H.pop());case"rgb":return H.length!==3?null:[pe(H[0]),pe(H[1]),pe(H[2]),Y];case"hsla":if(H.length!==4)return null;Y=we(H.pop());case"hsl":if(H.length!==3)return null;var re=(parseFloat(H[0])%360+360)%360/360,de=we(H[1]),be=we(H[2]),Le=be<=.5?be*(de+1):be+de-be*de,$e=2*be-Le;return[Pe(255*je($e,Le,re+1/3)),Pe(255*je($e,Le,re)),Pe(255*je($e,Le,re-1/3)),Y];default:return null}}return null}}catch{}class Ke{constructor(c,m,B,D=1){this.r=c,this.g=m,this.b=B,this.a=D}static parse(c){if(!c)return;if(c instanceof Ke)return c;if(typeof c!="string")return;const m=rr(c);return m?new Ke(m[0]/255*m[3],m[1]/255*m[3],m[2]/255*m[3],m[3]):void 0}toString(){const[c,m,B,D]=this.toArray();return`rgba(${Math.round(c)},${Math.round(m)},${Math.round(B)},${D})`}toArray(){const{r:c,g:m,b:B,a:D}=this;return D===0?[0,0,0,0]:[255*c/D,255*m/D,255*B/D,D]}}Ke.black=new Ke(0,0,0,1),Ke.white=new Ke(1,1,1,1),Ke.transparent=new Ke(0,0,0,0),Ke.red=new Ke(1,0,0,1);class _t{constructor(c,m,B){this.sensitivity=c?m?"variant":"case":m?"accent":"base",this.locale=B,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,m){return this.collator.compare(c,m)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class qe{constructor(c,m,B,D,O){this.text=c,this.image=m,this.scale=B,this.fontStack=D,this.textColor=O}}class Oe{constructor(c){this.sections=c}static fromString(c){return new Oe([new qe(c,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(c=>c.text.length!==0||c.image&&c.image.name.length!==0)}static factory(c){return c instanceof Oe?c:Oe.fromString(c)}toString(){return this.sections.length===0?"":this.sections.map(c=>c.text).join("")}}class Je{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof Je)return c;if(typeof c=="number")return new Je([c,c,c,c]);if(Array.isArray(c)&&!(c.length<1||c.length>4)){for(const m of c)if(typeof m!="number")return;switch(c.length){case 1:c=[c[0],c[0],c[0],c[0]];break;case 2:c=[c[0],c[1],c[0],c[1]];break;case 3:c=[c[0],c[1],c[2],c[1]]}return new Je(c)}}toString(){return JSON.stringify(this.values)}}class mt{constructor(c){this.name=c.name,this.available=c.available}toString(){return this.name}static fromString(c){return c?new mt({name:c,available:!1}):null}}function Jt(A,c,m,B){return typeof A=="number"&&A>=0&&A<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof m=="number"&&m>=0&&m<=255?B===void 0||typeof B=="number"&&B>=0&&B<=1?null:`Invalid rgba value [${[A,c,m,B].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof B=="number"?[A,c,m,B]:[A,c,m]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Sn(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof Ke||A instanceof _t||A instanceof Oe||A instanceof Je||A instanceof mt)return!0;if(Array.isArray(A)){for(const c of A)if(!Sn(c))return!1;return!0}if(typeof A=="object"){for(const c in A)if(!Sn(A[c]))return!1;return!0}return!1}function an(A){if(A===null)return Oi;if(typeof A=="string")return bi;if(typeof A=="boolean")return fi;if(typeof A=="number")return bn;if(A instanceof Ke)return ot;if(A instanceof _t)return st;if(A instanceof Oe)return ft;if(A instanceof Je)return kt;if(A instanceof mt)return zt;if(Array.isArray(A)){const c=A.length;let m;for(const B of A){const D=an(B);if(m){if(m===D)continue;m=Ce;break}m=D}return Rt(m||Ce,c)}return Ie}function gn(A){const c=typeof A;return A===null?"":c==="string"||c==="number"||c==="boolean"?String(A):A instanceof Ke||A instanceof Oe||A instanceof Je||A instanceof mt?A.toString():JSON.stringify(A)}class mi{constructor(c,m){this.type=c,this.value=m}static parse(c,m){if(c.length!==2)return m.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!Sn(c[1]))return m.error("invalid value");const B=c[1];let D=an(B);const O=m.expectedType;return D.kind!=="array"||D.N!==0||!O||O.kind!=="array"||typeof O.N=="number"&&O.N!==0||(D=O),new mi(D,B)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class yi{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}}const cr={string:bi,number:bn,boolean:fi,object:Ie};class xr{constructor(c,m){this.type=c,this.args=m}static parse(c,m){if(c.length<2)return m.error("Expected at least one argument.");let B,D=1;const O=c[0];if(O==="array"){let Y,re;if(c.length>2){const de=c[1];if(typeof de!="string"||!(de in cr)||de==="object")return m.error('The item type argument of "array" must be one of string, number, boolean',1);Y=cr[de],D++}else Y=Ce;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return m.error('The length argument to "array" must be a positive integer literal',2);re=c[2],D++}B=Rt(Y,re)}else{if(!cr[O])throw new Error(`Types doesn't contain name = ${O}`);B=cr[O]}const H=[];for(;D<c.length;D++){const Y=m.parse(c[D],D,Ce);if(!Y)return null;H.push(Y)}return new xr(B,H)}evaluate(c){for(let m=0;m<this.args.length;m++){const B=this.args[m].evaluate(c);if(!Tn(this.type,an(B)))return B;if(m===this.args.length-1)throw new yi(`Expected value to be of type ${yt(this.type)}, but found ${yt(an(B))} instead.`)}throw new Error}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const Gr={"to-boolean":fi,"to-color":ot,"to-number":bn,"to-string":bi};class mr{constructor(c,m){this.type=c,this.args=m}static parse(c,m){if(c.length<2)return m.error("Expected at least one argument.");const B=c[0];if(!Gr[B])throw new Error(`Can't parse ${B} as it is not part of the known types`);if((B==="to-boolean"||B==="to-string")&&c.length!==2)return m.error("Expected one argument.");const D=Gr[B],O=[];for(let H=1;H<c.length;H++){const Y=m.parse(c[H],H,Ce);if(!Y)return null;O.push(Y)}return new mr(D,O)}evaluate(c){if(this.type.kind==="boolean")return!!this.args[0].evaluate(c);if(this.type.kind==="color"){let m,B;for(const D of this.args){if(m=D.evaluate(c),B=null,m instanceof Ke)return m;if(typeof m=="string"){const O=c.parseColor(m);if(O)return O}else if(Array.isArray(m)&&(B=m.length<3||m.length>4?`Invalid rbga value ${JSON.stringify(m)}: expected an array containing either three or four numeric values.`:Jt(m[0],m[1],m[2],m[3]),!B))return new Ke(m[0]/255,m[1]/255,m[2]/255,m[3])}throw new yi(B||`Could not parse color from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}if(this.type.kind==="padding"){let m;for(const B of this.args){m=B.evaluate(c);const D=Je.parse(m);if(D)return D}throw new yi(`Could not parse padding from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}if(this.type.kind==="number"){let m=null;for(const B of this.args){if(m=B.evaluate(c),m===null)return 0;const D=Number(m);if(!isNaN(D))return D}throw new yi(`Could not convert ${JSON.stringify(m)} to number.`)}return this.type.kind==="formatted"?Oe.fromString(gn(this.args[0].evaluate(c))):this.type.kind==="resolvedImage"?mt.fromString(gn(this.args[0].evaluate(c))):gn(this.args[0].evaluate(c))}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const Hr=["Unknown","Point","LineString","Polygon"];class fo{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Hr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(c){let m=this._parseColorCache[c];return m||(m=this._parseColorCache[c]=Ke.parse(c)),m}}class xo{constructor(c,m,B,D){this.name=c,this.type=m,this._evaluate=B,this.args=D}evaluate(c){return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}static parse(c,m){const B=c[0],D=xo.definitions[B];if(!D)return m.error(`Unknown expression "${B}". If you wanted a literal array, use ["literal", [...]].`,0);const O=Array.isArray(D)?D[0]:D.type,H=Array.isArray(D)?[[D[1],D[2]]]:D.overloads,Y=H.filter(([de])=>!Array.isArray(de)||de.length===c.length-1);let re=null;for(const[de,be]of Y){re=new Ol(m.registry,m.path,null,m.scope);const Le=[];let $e=!1;for(let Ge=1;Ge<c.length;Ge++){const Ze=c[Ge],St=Array.isArray(de)?de[Ge-1]:de.type,wt=re.parse(Ze,1+Le.length,St);if(!wt){$e=!0;break}Le.push(wt)}if(!$e)if(Array.isArray(de)&&de.length!==Le.length)re.error(`Expected ${de.length} arguments, but found ${Le.length} instead.`);else{for(let Ge=0;Ge<Le.length;Ge++){const Ze=Array.isArray(de)?de[Ge]:de.type,St=Le[Ge];re.concat(Ge+1).checkSubtype(Ze,St.type)}if(re.errors.length===0)return new xo(B,O,be,Le)}}if(Y.length===1)m.errors.push(...re.errors);else{const de=(Y.length?Y:H).map(([Le])=>{return $e=Le,Array.isArray($e)?`(${$e.map(yt).join(", ")})`:`(${yt($e.type)}...)`;var $e}).join(" | "),be=[];for(let Le=1;Le<c.length;Le++){const $e=m.parse(c[Le],1+be.length);if(!$e)return null;be.push(yt($e.type))}m.error(`Expected arguments of type ${de}, but found (${be.join(", ")}) instead.`)}return null}static register(c,m){xo.definitions=m;for(const B in m)c[B]=xo}}class hs{constructor(c,m,B){this.type=st,this.locale=B,this.caseSensitive=c,this.diacriticSensitive=m}static parse(c,m){if(c.length!==2)return m.error("Expected one argument.");const B=c[1];if(typeof B!="object"||Array.isArray(B))return m.error("Collator options argument must be an object.");const D=m.parse(B["case-sensitive"]!==void 0&&B["case-sensitive"],1,fi);if(!D)return null;const O=m.parse(B["diacritic-sensitive"]!==void 0&&B["diacritic-sensitive"],1,fi);if(!O)return null;let H=null;return B.locale&&(H=m.parse(B.locale,1,bi),!H)?null:new hs(D,O,H)}evaluate(c){return new _t(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}}const Yo=8192;function hn(A,c){A[0]=Math.min(A[0],c[0]),A[1]=Math.min(A[1],c[1]),A[2]=Math.max(A[2],c[0]),A[3]=Math.max(A[3],c[1])}function Wr(A,c){return!(A[0]<=c[0]||A[2]>=c[2]||A[1]<=c[1]||A[3]>=c[3])}function Dr(A,c){const m=(180+A[0])/360,B=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,D=Math.pow(2,c.z);return[Math.round(m*D*Yo),Math.round(B*D*Yo)]}function Mr(A,c,m){const B=A[0]-c[0],D=A[1]-c[1],O=A[0]-m[0],H=A[1]-m[1];return B*H-O*D==0&&B*O<=0&&D*H<=0}function xc(A,c){let m=!1;for(let H=0,Y=c.length;H<Y;H++){const re=c[H];for(let de=0,be=re.length;de<be-1;de++){if(Mr(A,re[de],re[de+1]))return!1;(D=re[de])[1]>(B=A)[1]!=(O=re[de+1])[1]>B[1]&&B[0]<(O[0]-D[0])*(B[1]-D[1])/(O[1]-D[1])+D[0]&&(m=!m)}}var B,D,O;return m}function ca(A,c){for(let m=0;m<c.length;m++)if(xc(A,c[m]))return!0;return!1}function sh(A,c,m,B){const D=B[0]-m[0],O=B[1]-m[1],H=(A[0]-m[0])*O-D*(A[1]-m[1]),Y=(c[0]-m[0])*O-D*(c[1]-m[1]);return H>0&&Y<0||H<0&&Y>0}function Jr(A,c,m){for(const de of m)for(let be=0;be<de.length-1;++be)if((Y=[(H=de[be+1])[0]-(O=de[be])[0],H[1]-O[1]])[0]*(re=[(D=c)[0]-(B=A)[0],D[1]-B[1]])[1]-Y[1]*re[0]!=0&&sh(B,D,O,H)&&sh(O,H,B,D))return!0;var B,D,O,H,Y,re;return!1}function Wo(A,c){for(let m=0;m<A.length;++m)if(!xc(A[m],c))return!1;for(let m=0;m<A.length-1;++m)if(Jr(A[m],A[m+1],c))return!1;return!0}function gi(A,c){for(let m=0;m<c.length;m++)if(Wo(A,c[m]))return!0;return!1}function zr(A,c,m){const B=[];for(let D=0;D<A.length;D++){const O=[];for(let H=0;H<A[D].length;H++){const Y=Dr(A[D][H],m);hn(c,Y),O.push(Y)}B.push(O)}return B}function _r(A,c,m){const B=[];for(let D=0;D<A.length;D++){const O=zr(A[D],c,m);B.push(O)}return B}function Va(A,c,m,B){if(A[0]<m[0]||A[0]>m[2]){const D=.5*B;let O=A[0]-m[0]>D?-B:m[0]-A[0]>D?B:0;O===0&&(O=A[0]-m[2]>D?-B:m[2]-A[0]>D?B:0),A[0]+=O}hn(c,A)}function Ea(A,c,m,B){const D=Math.pow(2,B.z)*Yo,O=[B.x*Yo,B.y*Yo],H=[];for(const Y of A)for(const re of Y){const de=[re.x+O[0],re.y+O[1]];Va(de,c,m,D),H.push(de)}return H}function Lr(A,c,m,B){const D=Math.pow(2,B.z)*Yo,O=[B.x*Yo,B.y*Yo],H=[];for(const re of A){const de=[];for(const be of re){const Le=[be.x+O[0],be.y+O[1]];hn(c,Le),de.push(Le)}H.push(de)}if(c[2]-c[0]<=D/2){(Y=c)[0]=Y[1]=1/0,Y[2]=Y[3]=-1/0;for(const re of H)for(const de of re)Va(de,c,m,D)}var Y;return H}class Io{constructor(c,m){this.type=fi,this.geojson=c,this.geometries=m}static parse(c,m){if(c.length!==2)return m.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(Sn(c[1])){const B=c[1];if(B.type==="FeatureCollection")for(let D=0;D<B.features.length;++D){const O=B.features[D].geometry.type;if(O==="Polygon"||O==="MultiPolygon")return new Io(B,B.features[D].geometry)}else if(B.type==="Feature"){const D=B.geometry.type;if(D==="Polygon"||D==="MultiPolygon")return new Io(B,B.geometry)}else if(B.type==="Polygon"||B.type==="MultiPolygon")return new Io(B,B)}return m.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(m,B){const D=[1/0,1/0,-1/0,-1/0],O=[1/0,1/0,-1/0,-1/0],H=m.canonicalID();if(B.type==="Polygon"){const Y=zr(B.coordinates,O,H),re=Ea(m.geometry(),D,O,H);if(!Wr(D,O))return!1;for(const de of re)if(!xc(de,Y))return!1}if(B.type==="MultiPolygon"){const Y=_r(B.coordinates,O,H),re=Ea(m.geometry(),D,O,H);if(!Wr(D,O))return!1;for(const de of re)if(!ca(de,Y))return!1}return!0}(c,this.geometries);if(c.geometryType()==="LineString")return function(m,B){const D=[1/0,1/0,-1/0,-1/0],O=[1/0,1/0,-1/0,-1/0],H=m.canonicalID();if(B.type==="Polygon"){const Y=zr(B.coordinates,O,H),re=Lr(m.geometry(),D,O,H);if(!Wr(D,O))return!1;for(const de of re)if(!Wo(de,Y))return!1}if(B.type==="MultiPolygon"){const Y=_r(B.coordinates,O,H),re=Lr(m.geometry(),D,O,H);if(!Wr(D,O))return!1;for(const de of re)if(!gi(de,Y))return!1}return!0}(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Sa(A){if(A instanceof xo&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof Io)return!1;let c=!0;return A.eachChild(m=>{c&&!Sa(m)&&(c=!1)}),c}function _a(A){if(A instanceof xo&&A.name==="feature-state")return!1;let c=!0;return A.eachChild(m=>{c&&!_a(m)&&(c=!1)}),c}function Es(A,c){if(A instanceof xo&&c.indexOf(A.name)>=0)return!1;let m=!0;return A.eachChild(B=>{m&&!Es(B,c)&&(m=!1)}),m}class Ho{constructor(c,m){this.type=m.type,this.name=c,this.boundExpression=m}static parse(c,m){if(c.length!==2||typeof c[1]!="string")return m.error("'var' expression requires exactly one string literal argument.");const B=c[1];return m.scope.has(B)?new Ho(B,m.scope.get(B)):m.error(`Unknown variable "${B}". Make sure "${B}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}}class Ol{constructor(c,m=[],B,D=new Un,O=[]){this.registry=c,this.path=m,this.key=m.map(H=>`[${H}]`).join(""),this.scope=D,this.errors=O,this.expectedType=B}parse(c,m,B,D,O={}){return m?this.concat(m,B,D)._parse(c,O):this._parse(c,O)}_parse(c,m){function B(D,O,H){return H==="assert"?new xr(O,[D]):H==="coerce"?new mr(O,[D]):D}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const D=c[0];if(typeof D!="string")return this.error(`Expression name must be a string, but found ${typeof D} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const O=this.registry[D];if(O){let H=O.parse(c,this);if(!H)return null;if(this.expectedType){const Y=this.expectedType,re=H.type;if(Y.kind!=="string"&&Y.kind!=="number"&&Y.kind!=="boolean"&&Y.kind!=="object"&&Y.kind!=="array"||re.kind!=="value")if(Y.kind!=="color"&&Y.kind!=="formatted"&&Y.kind!=="resolvedImage"||re.kind!=="value"&&re.kind!=="string")if(Y.kind!=="padding"||re.kind!=="value"&&re.kind!=="number"&&re.kind!=="array"){if(this.checkSubtype(Y,re))return null}else H=B(H,Y,m.typeAnnotation||"coerce");else H=B(H,Y,m.typeAnnotation||"coerce");else H=B(H,Y,m.typeAnnotation||"assert")}if(!(H instanceof mi)&&H.type.kind!=="resolvedImage"&&gl(H)){const Y=new fo;try{H=new mi(H.type,H.evaluate(Y))}catch(re){return this.error(re.message),null}}return H}return this.error(`Unknown expression "${D}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,m,B){const D=typeof c=="number"?this.path.concat(c):this.path,O=B?this.scope.concat(B):this.scope;return new Ol(this.registry,D,m||null,O,this.errors)}error(c,...m){const B=`${this.key}${m.map(D=>`[${D}]`).join("")}`;this.errors.push(new Xi(B,c))}checkSubtype(c,m){const B=Tn(c,m);return B&&this.error(B),B}}function gl(A){if(A instanceof Ho)return gl(A.boundExpression);if(A instanceof xo&&A.name==="error"||A instanceof hs||A instanceof Io)return!1;const c=A instanceof mr||A instanceof xr;let m=!0;return A.eachChild(B=>{m=c?m&&gl(B):m&&B instanceof mi}),!!m&&Sa(A)&&Es(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function oc(A,c){const m=A.length-1;let B,D,O=0,H=m,Y=0;for(;O<=H;)if(Y=Math.floor((O+H)/2),B=A[Y],D=A[Y+1],B<=c){if(Y===m||c<D)return Y;O=Y+1}else{if(!(B>c))throw new yi("Input is not a number.");H=Y-1}return 0}class _l{constructor(c,m,B){this.type=c,this.input=m,this.labels=[],this.outputs=[];for(const[D,O]of B)this.labels.push(D),this.outputs.push(O)}static parse(c,m){if(c.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return m.error("Expected an even number of arguments.");const B=m.parse(c[1],1,bn);if(!B)return null;const D=[];let O=null;m.expectedType&&m.expectedType.kind!=="value"&&(O=m.expectedType);for(let H=1;H<c.length;H+=2){const Y=H===1?-1/0:c[H],re=c[H+1],de=H,be=H+1;if(typeof Y!="number")return m.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',de);if(D.length&&D[D.length-1][0]>=Y)return m.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',de);const Le=m.parse(re,be,O);if(!Le)return null;O=O||Le.type,D.push([Y,Le])}return new _l(O,B,D)}evaluate(c){const m=this.labels,B=this.outputs;if(m.length===1)return B[0].evaluate(c);const D=this.input.evaluate(c);if(D<=m[0])return B[0].evaluate(c);const O=m.length;return D>=m[O-1]?B[O-1].evaluate(c):B[oc(m,D)].evaluate(c)}eachChild(c){c(this.input);for(const m of this.outputs)c(m)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function Jo(A,c,m){return A*(1-m)+c*m}var Qc=Object.freeze({__proto__:null,number:Jo,color:function(A,c,m){return new Ke(Jo(A.r,c.r,m),Jo(A.g,c.g,m),Jo(A.b,c.b,m),Jo(A.a,c.a,m))},array:function(A,c,m){return A.map((B,D)=>Jo(B,c[D],m))},padding:function(A,c,m){const B=A.values,D=c.values;return new Je([Jo(B[0],D[0],m),Jo(B[1],D[1],m),Jo(B[2],D[2],m),Jo(B[3],D[3],m)])}});const $c=.95047,Uu=1.08883,fu=4/29,bc=6/29,br=3*bc*bc,Ko=Math.PI/180,ss=180/Math.PI;function ah(A){return A>.008856451679035631?Math.pow(A,1/3):A/br+fu}function ia(A){return A>bc?A*A*A:br*(A-fu)}function Da(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,1/2.4)-.055)}function lh(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function eo(A){const c=lh(A.r),m=lh(A.g),B=lh(A.b),D=ah((.4124564*c+.3575761*m+.1804375*B)/$c),O=ah((.2126729*c+.7151522*m+.072175*B)/1);return{l:116*O-16,a:500*(D-O),b:200*(O-ah((.0193339*c+.119192*m+.9503041*B)/Uu)),alpha:A.a}}function fs(A){let c=(A.l+16)/116,m=isNaN(A.a)?c:c+A.a/500,B=isNaN(A.b)?c:c-A.b/200;return c=1*ia(c),m=$c*ia(m),B=Uu*ia(B),new Ke(Da(3.2404542*m-1.5371385*c-.4985314*B),Da(-.969266*m+1.8760108*c+.041556*B),Da(.0556434*m-.2040259*c+1.0572252*B),A.alpha)}function jc(A,c,m){const B=c-A;return A+m*(B>180||B<-180?B-360*Math.round(B/360):B)}const Rr={forward:eo,reverse:fs,interpolate:function(A,c,m){return{l:Jo(A.l,c.l,m),a:Jo(A.a,c.a,m),b:Jo(A.b,c.b,m),alpha:Jo(A.alpha,c.alpha,m)}}},ao={forward:function(A){const{l:c,a:m,b:B}=eo(A),D=Math.atan2(B,m)*ss;return{h:D<0?D+360:D,c:Math.sqrt(m*m+B*B),l:c,alpha:A.a}},reverse:function(A){const c=A.h*Ko,m=A.c;return fs({l:A.l,a:Math.cos(c)*m,b:Math.sin(c)*m,alpha:A.alpha})},interpolate:function(A,c,m){return{h:jc(A.h,c.h,m),c:Jo(A.c,c.c,m),l:Jo(A.l,c.l,m),alpha:Jo(A.alpha,c.alpha,m)}}};var ua=Object.freeze({__proto__:null,lab:Rr,hcl:ao});class Ua{constructor(c,m,B,D,O){this.type=c,this.operator=m,this.interpolation=B,this.input=D,this.labels=[],this.outputs=[];for(const[H,Y]of O)this.labels.push(H),this.outputs.push(Y)}static interpolationFactor(c,m,B,D){let O=0;if(c.name==="exponential")O=Lh(m,c.base,B,D);else if(c.name==="linear")O=Lh(m,1,B,D);else if(c.name==="cubic-bezier"){const H=c.controlPoints;O=new s(H[0],H[1],H[2],H[3]).solve(Lh(m,1,B,D))}return O}static parse(c,m){let[B,D,O,...H]=c;if(!Array.isArray(D)||D.length===0)return m.error("Expected an interpolation type expression.",1);if(D[0]==="linear")D={name:"linear"};else if(D[0]==="exponential"){const de=D[1];if(typeof de!="number")return m.error("Exponential interpolation requires a numeric base.",1,1);D={name:"exponential",base:de}}else{if(D[0]!=="cubic-bezier")return m.error(`Unknown interpolation type ${String(D[0])}`,1,0);{const de=D.slice(1);if(de.length!==4||de.some(be=>typeof be!="number"||be<0||be>1))return m.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);D={name:"cubic-bezier",controlPoints:de}}}if(c.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return m.error("Expected an even number of arguments.");if(O=m.parse(O,2,bn),!O)return null;const Y=[];let re=null;B==="interpolate-hcl"||B==="interpolate-lab"?re=ot:m.expectedType&&m.expectedType.kind!=="value"&&(re=m.expectedType);for(let de=0;de<H.length;de+=2){const be=H[de],Le=H[de+1],$e=de+3,Ge=de+4;if(typeof be!="number")return m.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$e);if(Y.length&&Y[Y.length-1][0]>=be)return m.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$e);const Ze=m.parse(Le,Ge,re);if(!Ze)return null;re=re||Ze.type,Y.push([be,Ze])}return re.kind==="number"||re.kind==="color"||re.kind==="padding"||re.kind==="array"&&re.itemType.kind==="number"&&typeof re.N=="number"?new Ua(re,B,D,O,Y):m.error(`Type ${yt(re)} is not interpolatable.`)}evaluate(c){const m=this.labels,B=this.outputs;if(m.length===1)return B[0].evaluate(c);const D=this.input.evaluate(c);if(D<=m[0])return B[0].evaluate(c);const O=m.length;if(D>=m[O-1])return B[O-1].evaluate(c);const H=oc(m,D),Y=Ua.interpolationFactor(this.interpolation,D,m[H],m[H+1]),re=B[H].evaluate(c),de=B[H+1].evaluate(c);return this.operator==="interpolate"?Qc[this.type.kind.toLowerCase()](re,de,Y):this.operator==="interpolate-hcl"?ao.reverse(ao.interpolate(ao.forward(re),ao.forward(de),Y)):Rr.reverse(Rr.interpolate(Rr.forward(re),Rr.forward(de),Y))}eachChild(c){c(this.input);for(const m of this.outputs)c(m)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function Lh(A,c,m,B){const D=B-m,O=A-m;return D===0?0:c===1?O/D:(Math.pow(c,O)-1)/(Math.pow(c,D)-1)}class yl{constructor(c,m){this.type=c,this.args=m}static parse(c,m){if(c.length<2)return m.error("Expectected at least one argument.");let B=null;const D=m.expectedType;D&&D.kind!=="value"&&(B=D);const O=[];for(const Y of c.slice(1)){const re=m.parse(Y,1+O.length,B,void 0,{typeAnnotation:"omit"});if(!re)return null;B=B||re.type,O.push(re)}if(!B)throw new Error("No output type");const H=D&&O.some(Y=>Tn(D,Y.type));return new yl(H?Ce:B,O)}evaluate(c){let m,B=null,D=0;for(const O of this.args)if(D++,B=O.evaluate(c),B&&B instanceof mt&&!B.available&&(m||(m=B.name),B=null,D===this.args.length&&(B=m)),B!==null)break;return B}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}class vl{constructor(c,m){this.type=m.type,this.bindings=[].concat(c),this.result=m}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const m of this.bindings)c(m[1]);c(this.result)}static parse(c,m){if(c.length<4)return m.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const B=[];for(let O=1;O<c.length-1;O+=2){const H=c[O];if(typeof H!="string")return m.error(`Expected string, but found ${typeof H} instead.`,O);if(/[^a-zA-Z0-9_]/.test(H))return m.error("Variable names must contain only alphanumeric characters or '_'.",O);const Y=m.parse(c[O+1],O+1);if(!Y)return null;B.push([H,Y])}const D=m.parse(c[c.length-1],c.length-1,m.expectedType,B);return D?new vl(B,D):null}outputDefined(){return this.result.outputDefined()}}class ch{constructor(c,m,B){this.type=c,this.index=m,this.input=B}static parse(c,m){if(c.length!==3)return m.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const B=m.parse(c[1],1,bn),D=m.parse(c[2],2,Rt(m.expectedType||Ce));return B&&D?new ch(D.type.itemType,B,D):null}evaluate(c){const m=this.index.evaluate(c),B=this.input.evaluate(c);if(m<0)throw new yi(`Array index out of bounds: ${m} < 0.`);if(m>=B.length)throw new yi(`Array index out of bounds: ${m} > ${B.length-1}.`);if(m!==Math.floor(m))throw new yi(`Array index must be an integer, but found ${m} instead.`);return B[m]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}}class kh{constructor(c,m){this.type=fi,this.needle=c,this.haystack=m}static parse(c,m){if(c.length!==3)return m.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const B=m.parse(c[1],1,Ce),D=m.parse(c[2],2,Ce);return B&&D?Fn(B.type,[fi,bi,bn,Oi,Ce])?new kh(B,D):m.error(`Expected first argument to be of type boolean, string, number or null, but found ${yt(B.type)} instead`):null}evaluate(c){const m=this.needle.evaluate(c),B=this.haystack.evaluate(c);if(!B)return!1;if(!zn(m,["boolean","string","number","null"]))throw new yi(`Expected first argument to be of type boolean, string, number or null, but found ${yt(an(m))} instead.`);if(!zn(B,["string","array"]))throw new yi(`Expected second argument to be of type array or string, but found ${yt(an(B))} instead.`);return B.indexOf(m)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}}class Mo{constructor(c,m,B){this.type=bn,this.needle=c,this.haystack=m,this.fromIndex=B}static parse(c,m){if(c.length<=2||c.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const B=m.parse(c[1],1,Ce),D=m.parse(c[2],2,Ce);if(!B||!D)return null;if(!Fn(B.type,[fi,bi,bn,Oi,Ce]))return m.error(`Expected first argument to be of type boolean, string, number or null, but found ${yt(B.type)} instead`);if(c.length===4){const O=m.parse(c[3],3,bn);return O?new Mo(B,D,O):null}return new Mo(B,D)}evaluate(c){const m=this.needle.evaluate(c),B=this.haystack.evaluate(c);if(!zn(m,["boolean","string","number","null"]))throw new yi(`Expected first argument to be of type boolean, string, number or null, but found ${yt(an(m))} instead.`);if(!zn(B,["string","array"]))throw new yi(`Expected second argument to be of type array or string, but found ${yt(an(B))} instead.`);if(this.fromIndex){const D=this.fromIndex.evaluate(c);return B.indexOf(m,D)}return B.indexOf(m)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}}class Ss{constructor(c,m,B,D,O,H){this.inputType=c,this.type=m,this.input=B,this.cases=D,this.outputs=O,this.otherwise=H}static parse(c,m){if(c.length<5)return m.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return m.error("Expected an even number of arguments.");let B,D;m.expectedType&&m.expectedType.kind!=="value"&&(D=m.expectedType);const O={},H=[];for(let de=2;de<c.length-1;de+=2){let be=c[de];const Le=c[de+1];Array.isArray(be)||(be=[be]);const $e=m.concat(de);if(be.length===0)return $e.error("Expected at least one branch label.");for(const Ze of be){if(typeof Ze!="number"&&typeof Ze!="string")return $e.error("Branch labels must be numbers or strings.");if(typeof Ze=="number"&&Math.abs(Ze)>Number.MAX_SAFE_INTEGER)return $e.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ze=="number"&&Math.floor(Ze)!==Ze)return $e.error("Numeric branch labels must be integer values.");if(B){if($e.checkSubtype(B,an(Ze)))return null}else B=an(Ze);if(O[String(Ze)]!==void 0)return $e.error("Branch labels must be unique.");O[String(Ze)]=H.length}const Ge=m.parse(Le,de,D);if(!Ge)return null;D=D||Ge.type,H.push(Ge)}const Y=m.parse(c[1],1,Ce);if(!Y)return null;const re=m.parse(c[c.length-1],c.length-1,D);return re?Y.type.kind!=="value"&&m.concat(1).checkSubtype(B,Y.type)?null:new Ss(B,D,Y,O,H,re):null}evaluate(c){const m=this.input.evaluate(c);return(an(m)===this.inputType&&this.outputs[this.cases[m]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every(c=>c.outputDefined())&&this.otherwise.outputDefined()}}class Is{constructor(c,m,B){this.type=c,this.branches=m,this.otherwise=B}static parse(c,m){if(c.length<4)return m.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return m.error("Expected an odd number of arguments.");let B;m.expectedType&&m.expectedType.kind!=="value"&&(B=m.expectedType);const D=[];for(let H=1;H<c.length-1;H+=2){const Y=m.parse(c[H],H,fi);if(!Y)return null;const re=m.parse(c[H+1],H+1,B);if(!re)return null;D.push([Y,re]),B=B||re.type}const O=m.parse(c[c.length-1],c.length-1,B);if(!O)return null;if(!B)throw new Error("Can't infer output type");return new Is(B,D,O)}evaluate(c){for(const[m,B]of this.branches)if(m.evaluate(c))return B.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[m,B]of this.branches)c(m),c(B);c(this.otherwise)}outputDefined(){return this.branches.every(([c,m])=>m.outputDefined())&&this.otherwise.outputDefined()}}class za{constructor(c,m,B,D){this.type=c,this.input=m,this.beginIndex=B,this.endIndex=D}static parse(c,m){if(c.length<=2||c.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const B=m.parse(c[1],1,Ce),D=m.parse(c[2],2,bn);if(!B||!D)return null;if(!Fn(B.type,[Rt(Ce),bi,Ce]))return m.error(`Expected first argument to be of type array or string, but found ${yt(B.type)} instead`);if(c.length===4){const O=m.parse(c[3],3,bn);return O?new za(B.type,B,D,O):null}return new za(B.type,B,D)}evaluate(c){const m=this.input.evaluate(c),B=this.beginIndex.evaluate(c);if(!zn(m,["string","array"]))throw new yi(`Expected first argument to be of type array or string, but found ${yt(an(m))} instead.`);if(this.endIndex){const D=this.endIndex.evaluate(c);return m.slice(B,D)}return m.slice(B)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}}function wc(A,c){return A==="=="||A==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function Nl(A,c,m,B){return B.compare(c,m)===0}function ks(A,c,m){const B=A!=="=="&&A!=="!=";return class gz{constructor(O,H,Y){this.type=fi,this.lhs=O,this.rhs=H,this.collator=Y,this.hasUntypedArgument=O.type.kind==="value"||H.type.kind==="value"}static parse(O,H){if(O.length!==3&&O.length!==4)return H.error("Expected two or three arguments.");const Y=O[0];let re=H.parse(O[1],1,Ce);if(!re)return null;if(!wc(Y,re.type))return H.concat(1).error(`"${Y}" comparisons are not supported for type '${yt(re.type)}'.`);let de=H.parse(O[2],2,Ce);if(!de)return null;if(!wc(Y,de.type))return H.concat(2).error(`"${Y}" comparisons are not supported for type '${yt(de.type)}'.`);if(re.type.kind!==de.type.kind&&re.type.kind!=="value"&&de.type.kind!=="value")return H.error(`Cannot compare types '${yt(re.type)}' and '${yt(de.type)}'.`);B&&(re.type.kind==="value"&&de.type.kind!=="value"?re=new xr(de.type,[re]):re.type.kind!=="value"&&de.type.kind==="value"&&(de=new xr(re.type,[de])));let be=null;if(O.length===4){if(re.type.kind!=="string"&&de.type.kind!=="string"&&re.type.kind!=="value"&&de.type.kind!=="value")return H.error("Cannot use collator to compare non-string types.");if(be=H.parse(O[3],3,st),!be)return null}return new gz(re,de,be)}evaluate(O){const H=this.lhs.evaluate(O),Y=this.rhs.evaluate(O);if(B&&this.hasUntypedArgument){const re=an(H),de=an(Y);if(re.kind!==de.kind||re.kind!=="string"&&re.kind!=="number")throw new yi(`Expected arguments for "${A}" to be (string, string) or (number, number), but found (${re.kind}, ${de.kind}) instead.`)}if(this.collator&&!B&&this.hasUntypedArgument){const re=an(H),de=an(Y);if(re.kind!=="string"||de.kind!=="string")return c(O,H,Y)}return this.collator?m(O,H,Y,this.collator.evaluate(O)):c(O,H,Y)}eachChild(O){O(this.lhs),O(this.rhs),this.collator&&O(this.collator)}outputDefined(){return!0}}}const Cc=ks("==",function(A,c,m){return c===m},Nl),uh=ks("!=",function(A,c,m){return c!==m},function(A,c,m,B){return!Nl(0,c,m,B)}),zu=ks("<",function(A,c,m){return c<m},function(A,c,m,B){return B.compare(c,m)<0}),hh=ks(">",function(A,c,m){return c>m},function(A,c,m,B){return B.compare(c,m)>0}),Ph=ks("<=",function(A,c,m){return c<=m},function(A,c,m,B){return B.compare(c,m)<=0}),Fh=ks(">=",function(A,c,m){return c>=m},function(A,c,m,B){return B.compare(c,m)>=0});class ps{constructor(c,m,B,D,O){this.type=bi,this.number=c,this.locale=m,this.currency=B,this.minFractionDigits=D,this.maxFractionDigits=O}static parse(c,m){if(c.length!==3)return m.error("Expected two arguments.");const B=m.parse(c[1],1,bn);if(!B)return null;const D=c[2];if(typeof D!="object"||Array.isArray(D))return m.error("NumberFormat options argument must be an object.");let O=null;if(D.locale&&(O=m.parse(D.locale,1,bi),!O))return null;let H=null;if(D.currency&&(H=m.parse(D.currency,1,bi),!H))return null;let Y=null;if(D["min-fraction-digits"]&&(Y=m.parse(D["min-fraction-digits"],1,bn),!Y))return null;let re=null;return D["max-fraction-digits"]&&(re=m.parse(D["max-fraction-digits"],1,bn),!re)?null:new ps(B,O,H,Y,re)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}}class dh{constructor(c){this.type=ft,this.sections=c}static parse(c,m){if(c.length<2)return m.error("Expected at least one argument.");const B=c[1];if(!Array.isArray(B)&&typeof B=="object")return m.error("First argument must be an image or text section.");const D=[];let O=!1;for(let H=1;H<=c.length-1;++H){const Y=c[H];if(O&&typeof Y=="object"&&!Array.isArray(Y)){O=!1;let re=null;if(Y["font-scale"]&&(re=m.parse(Y["font-scale"],1,bn),!re))return null;let de=null;if(Y["text-font"]&&(de=m.parse(Y["text-font"],1,Rt(bi)),!de))return null;let be=null;if(Y["text-color"]&&(be=m.parse(Y["text-color"],1,ot),!be))return null;const Le=D[D.length-1];Le.scale=re,Le.font=de,Le.textColor=be}else{const re=m.parse(c[H],1,Ce);if(!re)return null;const de=re.type.kind;if(de!=="string"&&de!=="value"&&de!=="null"&&de!=="resolvedImage")return m.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");O=!0,D.push({content:re,scale:null,font:null,textColor:null})}}return new dh(D)}evaluate(c){return new Oe(this.sections.map(m=>{const B=m.content.evaluate(c);return an(B)===zt?new qe("",B,null,null,null):new qe(gn(B),null,m.scale?m.scale.evaluate(c):null,m.font?m.font.evaluate(c).join(","):null,m.textColor?m.textColor.evaluate(c):null)}))}eachChild(c){for(const m of this.sections)c(m.content),m.scale&&c(m.scale),m.font&&c(m.font),m.textColor&&c(m.textColor)}outputDefined(){return!1}}class ra{constructor(c){this.type=zt,this.input=c}static parse(c,m){if(c.length!==2)return m.error("Expected two arguments.");const B=m.parse(c[1],1,bi);return B?new ra(B):m.error("No image name provided.")}evaluate(c){const m=this.input.evaluate(c),B=mt.fromString(m);return B&&c.availableImages&&(B.available=c.availableImages.indexOf(m)>-1),B}eachChild(c){c(this.input)}outputDefined(){return!1}}class to{constructor(c){this.type=bn,this.input=c}static parse(c,m){if(c.length!==2)return m.error(`Expected 1 argument, but found ${c.length-1} instead.`);const B=m.parse(c[1],1);return B?B.type.kind!=="array"&&B.type.kind!=="string"&&B.type.kind!=="value"?m.error(`Expected argument of type string or array, but found ${yt(B.type)} instead.`):new to(B):null}evaluate(c){const m=this.input.evaluate(c);if(typeof m=="string"||Array.isArray(m))return m.length;throw new yi(`Expected value to be of type string or array, but found ${yt(an(m))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}}const pu={"==":Cc,"!=":uh,">":hh,"<":zu,">=":Fh,"<=":Ph,array:xr,at:ch,boolean:xr,case:Is,coalesce:yl,collator:hs,format:dh,image:ra,in:kh,"index-of":Mo,interpolate:Ua,"interpolate-hcl":Ua,"interpolate-lab":Ua,length:to,let:vl,literal:mi,match:Ss,number:xr,"number-format":ps,object:xr,slice:za,step:_l,string:xr,"to-boolean":mr,"to-color":mr,"to-number":mr,"to-string":mr,var:Ho,within:Io};function Ql(A,[c,m,B,D]){c=c.evaluate(A),m=m.evaluate(A),B=B.evaluate(A);const O=D?D.evaluate(A):1,H=Jt(c,m,B,O);if(H)throw new yi(H);return new Ke(c/255*O,m/255*O,B/255*O,O)}function mu(A,c){return A in c}function gu(A,c){const m=c[A];return m===void 0?null:m}function Vo(A){return{type:A}}function $l(A){return{result:"success",value:A}}function xl(A){return{result:"error",value:A}}function rs(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function sc(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function Or(A){return!!A.expression&&A.expression.interpolated}function bo(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function Zo(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function es(A){return A}function ya(A,c){const m=c.type==="color",B=A.stops&&typeof A.stops[0][0]=="object",D=B||!(B||A.property!==void 0),O=A.type||(Or(c)?"exponential":"interval");if(m||c.type==="padding"){const de=m?Ke.parse:Je.parse;(A=So({},A)).stops&&(A.stops=A.stops.map(be=>[be[0],de(be[1])])),A.default=de(A.default?A.default:c.default)}if(A.colorSpace&&A.colorSpace!=="rgb"&&!ua[A.colorSpace])throw new Error(`Unknown color space: ${A.colorSpace}`);let H,Y,re;if(O==="exponential")H=Ou;else if(O==="interval")H=Ra;else if(O==="categorical"){H=Ru,Y=Object.create(null);for(const de of A.stops)Y[de[0]]=de[1];re=typeof A.stops[0][0]}else{if(O!=="identity")throw new Error(`Unknown function type "${O}"`);H=Ah}if(B){const de={},be=[];for(let Ge=0;Ge<A.stops.length;Ge++){const Ze=A.stops[Ge],St=Ze[0].zoom;de[St]===void 0&&(de[St]={zoom:St,type:A.type,property:A.property,default:A.default,stops:[]},be.push(St)),de[St].stops.push([Ze[0].value,Ze[1]])}const Le=[];for(const Ge of be)Le.push([de[Ge].zoom,ya(de[Ge],c)]);const $e={name:"linear"};return{kind:"composite",interpolationType:$e,interpolationFactor:Ua.interpolationFactor.bind(void 0,$e),zoomStops:Le.map(Ge=>Ge[0]),evaluate:({zoom:Ge},Ze)=>Ou({stops:Le,base:A.base},c,Ge).evaluate(Ge,Ze)}}if(D){const de=O==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:de,interpolationFactor:Ua.interpolationFactor.bind(void 0,de),zoomStops:A.stops.map(be=>be[0]),evaluate:({zoom:be})=>H(A,c,be,Y,re)}}return{kind:"source",evaluate(de,be){const Le=be&&be.properties?be.properties[A.property]:void 0;return Le===void 0?bl(A.default,c.default):H(A,c,Le,Y,re)}}}function bl(A,c,m){return A!==void 0?A:c!==void 0?c:m!==void 0?m:void 0}function Ru(A,c,m,B,D){return bl(typeof m===D?B[m]:void 0,A.default,c.default)}function Ra(A,c,m){if(bo(m)!=="number")return bl(A.default,c.default);const B=A.stops.length;if(B===1||m<=A.stops[0][0])return A.stops[0][1];if(m>=A.stops[B-1][0])return A.stops[B-1][1];const D=oc(A.stops.map(O=>O[0]),m);return A.stops[D][1]}function Ou(A,c,m){const B=A.base!==void 0?A.base:1;if(bo(m)!=="number")return bl(A.default,c.default);const D=A.stops.length;if(D===1||m<=A.stops[0][0])return A.stops[0][1];if(m>=A.stops[D-1][0])return A.stops[D-1][1];const O=oc(A.stops.map(be=>be[0]),m),H=function(be,Le,$e,Ge){const Ze=Ge-$e,St=be-$e;return Ze===0?0:Le===1?St/Ze:(Math.pow(Le,St)-1)/(Math.pow(Le,Ze)-1)}(m,B,A.stops[O][0],A.stops[O+1][0]),Y=A.stops[O][1],re=A.stops[O+1][1];let de=Qc[c.type]||es;if(A.colorSpace&&A.colorSpace!=="rgb"){const be=ua[A.colorSpace];de=(Le,$e)=>be.reverse(be.interpolate(be.forward(Le),be.forward($e),H))}return typeof Y.evaluate=="function"?{evaluate(...be){const Le=Y.evaluate.apply(void 0,be),$e=re.evaluate.apply(void 0,be);if(Le!==void 0&&$e!==void 0)return de(Le,$e,H)}}:de(Y,re,H)}function Ah(A,c,m){switch(c.type){case"color":m=Ke.parse(m);break;case"formatted":m=Oe.fromString(m.toString());break;case"resolvedImage":m=mt.fromString(m.toString());break;case"padding":m=Je.parse(m);break;default:bo(m)===c.type||c.type==="enum"&&c.values[m]||(m=void 0)}return bl(m,A.default,c.default)}xo.register(pu,{error:[{kind:"error"},[bi],(A,[c])=>{throw new yi(c.evaluate(A))}],typeof:[bi,[Ce],(A,[c])=>yt(an(c.evaluate(A)))],"to-rgba":[Rt(bn,4),[ot],(A,[c])=>c.evaluate(A).toArray()],rgb:[ot,[bn,bn,bn],Ql],rgba:[ot,[bn,bn,bn,bn],Ql],has:{type:fi,overloads:[[[bi],(A,[c])=>mu(c.evaluate(A),A.properties())],[[bi,Ie],(A,[c,m])=>mu(c.evaluate(A),m.evaluate(A))]]},get:{type:Ce,overloads:[[[bi],(A,[c])=>gu(c.evaluate(A),A.properties())],[[bi,Ie],(A,[c,m])=>gu(c.evaluate(A),m.evaluate(A))]]},"feature-state":[Ce,[bi],(A,[c])=>gu(c.evaluate(A),A.featureState||{})],properties:[Ie,[],A=>A.properties()],"geometry-type":[bi,[],A=>A.geometryType()],id:[Ce,[],A=>A.id()],zoom:[bn,[],A=>A.globals.zoom],"heatmap-density":[bn,[],A=>A.globals.heatmapDensity||0],"line-progress":[bn,[],A=>A.globals.lineProgress||0],accumulated:[Ce,[],A=>A.globals.accumulated===void 0?null:A.globals.accumulated],"+":[bn,Vo(bn),(A,c)=>{let m=0;for(const B of c)m+=B.evaluate(A);return m}],"*":[bn,Vo(bn),(A,c)=>{let m=1;for(const B of c)m*=B.evaluate(A);return m}],"-":{type:bn,overloads:[[[bn,bn],(A,[c,m])=>c.evaluate(A)-m.evaluate(A)],[[bn],(A,[c])=>-c.evaluate(A)]]},"/":[bn,[bn,bn],(A,[c,m])=>c.evaluate(A)/m.evaluate(A)],"%":[bn,[bn,bn],(A,[c,m])=>c.evaluate(A)%m.evaluate(A)],ln2:[bn,[],()=>Math.LN2],pi:[bn,[],()=>Math.PI],e:[bn,[],()=>Math.E],"^":[bn,[bn,bn],(A,[c,m])=>Math.pow(c.evaluate(A),m.evaluate(A))],sqrt:[bn,[bn],(A,[c])=>Math.sqrt(c.evaluate(A))],log10:[bn,[bn],(A,[c])=>Math.log(c.evaluate(A))/Math.LN10],ln:[bn,[bn],(A,[c])=>Math.log(c.evaluate(A))],log2:[bn,[bn],(A,[c])=>Math.log(c.evaluate(A))/Math.LN2],sin:[bn,[bn],(A,[c])=>Math.sin(c.evaluate(A))],cos:[bn,[bn],(A,[c])=>Math.cos(c.evaluate(A))],tan:[bn,[bn],(A,[c])=>Math.tan(c.evaluate(A))],asin:[bn,[bn],(A,[c])=>Math.asin(c.evaluate(A))],acos:[bn,[bn],(A,[c])=>Math.acos(c.evaluate(A))],atan:[bn,[bn],(A,[c])=>Math.atan(c.evaluate(A))],min:[bn,Vo(bn),(A,c)=>Math.min(...c.map(m=>m.evaluate(A)))],max:[bn,Vo(bn),(A,c)=>Math.max(...c.map(m=>m.evaluate(A)))],abs:[bn,[bn],(A,[c])=>Math.abs(c.evaluate(A))],round:[bn,[bn],(A,[c])=>{const m=c.evaluate(A);return m<0?-Math.round(-m):Math.round(m)}],floor:[bn,[bn],(A,[c])=>Math.floor(c.evaluate(A))],ceil:[bn,[bn],(A,[c])=>Math.ceil(c.evaluate(A))],"filter-==":[fi,[bi,Ce],(A,[c,m])=>A.properties()[c.value]===m.value],"filter-id-==":[fi,[Ce],(A,[c])=>A.id()===c.value],"filter-type-==":[fi,[bi],(A,[c])=>A.geometryType()===c.value],"filter-<":[fi,[bi,Ce],(A,[c,m])=>{const B=A.properties()[c.value],D=m.value;return typeof B==typeof D&&B<D}],"filter-id-<":[fi,[Ce],(A,[c])=>{const m=A.id(),B=c.value;return typeof m==typeof B&&m<B}],"filter->":[fi,[bi,Ce],(A,[c,m])=>{const B=A.properties()[c.value],D=m.value;return typeof B==typeof D&&B>D}],"filter-id->":[fi,[Ce],(A,[c])=>{const m=A.id(),B=c.value;return typeof m==typeof B&&m>B}],"filter-<=":[fi,[bi,Ce],(A,[c,m])=>{const B=A.properties()[c.value],D=m.value;return typeof B==typeof D&&B<=D}],"filter-id-<=":[fi,[Ce],(A,[c])=>{const m=A.id(),B=c.value;return typeof m==typeof B&&m<=B}],"filter->=":[fi,[bi,Ce],(A,[c,m])=>{const B=A.properties()[c.value],D=m.value;return typeof B==typeof D&&B>=D}],"filter-id->=":[fi,[Ce],(A,[c])=>{const m=A.id(),B=c.value;return typeof m==typeof B&&m>=B}],"filter-has":[fi,[Ce],(A,[c])=>c.value in A.properties()],"filter-has-id":[fi,[],A=>A.id()!==null&&A.id()!==void 0],"filter-type-in":[fi,[Rt(bi)],(A,[c])=>c.value.indexOf(A.geometryType())>=0],"filter-id-in":[fi,[Rt(Ce)],(A,[c])=>c.value.indexOf(A.id())>=0],"filter-in-small":[fi,[bi,Rt(Ce)],(A,[c,m])=>m.value.indexOf(A.properties()[c.value])>=0],"filter-in-large":[fi,[bi,Rt(Ce)],(A,[c,m])=>function(B,D,O,H){for(;O<=H;){const Y=O+H>>1;if(D[Y]===B)return!0;D[Y]>B?H=Y-1:O=Y+1}return!1}(A.properties()[c.value],m.value,0,m.value.length-1)],all:{type:fi,overloads:[[[fi,fi],(A,[c,m])=>c.evaluate(A)&&m.evaluate(A)],[Vo(fi),(A,c)=>{for(const m of c)if(!m.evaluate(A))return!1;return!0}]]},any:{type:fi,overloads:[[[fi,fi],(A,[c,m])=>c.evaluate(A)||m.evaluate(A)],[Vo(fi),(A,c)=>{for(const m of c)if(m.evaluate(A))return!0;return!1}]]},"!":[fi,[fi],(A,[c])=>!c.evaluate(A)],"is-supported-script":[fi,[bi],(A,[c])=>{const m=A.globals&&A.globals.isSupportedScript;return!m||m(c.evaluate(A))}],upcase:[bi,[bi],(A,[c])=>c.evaluate(A).toUpperCase()],downcase:[bi,[bi],(A,[c])=>c.evaluate(A).toLowerCase()],concat:[bi,Vo(Ce),(A,c)=>c.map(m=>gn(m.evaluate(A))).join("")],"resolved-locale":[bi,[st],(A,[c])=>c.evaluate(A).resolvedLocale()]});class lo{constructor(c,m){this.expression=c,this._warningHistory={},this._evaluator=new fo,this._defaultValue=m?function(B){return B.type==="color"&&Zo(B.default)?new Ke(0,0,0,0):B.type==="color"?Ke.parse(B.default)||null:B.type==="padding"?Je.parse(B.default)||null:B.default===void 0?null:B.default}(m):null,this._enumValues=m&&m.type==="enum"?m.values:null}evaluateWithoutErrorHandling(c,m,B,D,O,H){return this._evaluator.globals=c,this._evaluator.feature=m,this._evaluator.featureState=B,this._evaluator.canonical=D,this._evaluator.availableImages=O||null,this._evaluator.formattedSection=H,this.expression.evaluate(this._evaluator)}evaluate(c,m,B,D,O,H){this._evaluator.globals=c,this._evaluator.feature=m||null,this._evaluator.featureState=B||null,this._evaluator.canonical=D,this._evaluator.availableImages=O||null,this._evaluator.formattedSection=H||null;try{const Y=this.expression.evaluate(this._evaluator);if(Y==null||typeof Y=="number"&&Y!=Y)return this._defaultValue;if(this._enumValues&&!(Y in this._enumValues))throw new yi(`Expected value to be one of ${Object.keys(this._enumValues).map(re=>JSON.stringify(re)).join(", ")}, but found ${JSON.stringify(Y)} instead.`);return Y}catch(Y){return this._warningHistory[Y.message]||(this._warningHistory[Y.message]=!0,typeof console<"u"&&console.warn(Y.message)),this._defaultValue}}}function jl(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in pu}function _u(A,c){const m=new Ol(pu,[],c?function(D){const O={color:ot,string:bi,number:bn,enum:bi,boolean:fi,formatted:ft,padding:kt,resolvedImage:zt};return D.type==="array"?Rt(O[D.value]||Ce,D.length):O[D.type]}(c):void 0),B=m.parse(A,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return B?$l(new lo(B,c)):xl(m.errors)}class Hc{constructor(c,m){this.kind=c,this._styleExpression=m,this.isStateDependent=c!=="constant"&&!_a(m.expression)}evaluateWithoutErrorHandling(c,m,B,D,O,H){return this._styleExpression.evaluateWithoutErrorHandling(c,m,B,D,O,H)}evaluate(c,m,B,D,O,H){return this._styleExpression.evaluate(c,m,B,D,O,H)}}class fh{constructor(c,m,B,D){this.kind=c,this.zoomStops=B,this._styleExpression=m,this.isStateDependent=c!=="camera"&&!_a(m.expression),this.interpolationType=D}evaluateWithoutErrorHandling(c,m,B,D,O,H){return this._styleExpression.evaluateWithoutErrorHandling(c,m,B,D,O,H)}evaluate(c,m,B,D,O,H){return this._styleExpression.evaluate(c,m,B,D,O,H)}interpolationFactor(c,m,B){return this.interpolationType?Ua.interpolationFactor(this.interpolationType,c,m,B):0}}function Vc(A,c){const m=_u(A,c);if(m.result==="error")return m;const B=m.value.expression,D=Sa(B);if(!D&&!rs(c))return xl([new Xi("","data expressions not supported")]);const O=Es(B,["zoom"]);if(!O&&!sc(c))return xl([new Xi("","zoom expressions not supported")]);const H=ms(B);return H||O?H instanceof Xi?xl([H]):H instanceof Ua&&!Or(c)?xl([new Xi("",'"interpolate" expressions cannot be used with this property')]):$l(H?new fh(D?"camera":"composite",m.value,H.labels,H instanceof Ua?H.interpolation:void 0):new Hc(D?"constant":"source",m.value)):xl([new Xi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Nu{constructor(c,m){this._parameters=c,this._specification=m,So(this,ya(this._parameters,this._specification))}static deserialize(c){return new Nu(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function ms(A){let c=null;if(A instanceof vl)c=ms(A.result);else if(A instanceof yl){for(const m of A.args)if(c=ms(m),c)break}else(A instanceof _l||A instanceof Ua)&&A.input instanceof xo&&A.input.name==="zoom"&&(c=A);return c instanceof Xi||A.eachChild(m=>{const B=ms(m);B instanceof Xi?c=B:!c&&B?c=new Xi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):c&&B&&c!==B&&(c=new Xi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),c}function va(A){const c=A.key,m=A.value,B=A.valueSpec||{},D=A.objectElementValidators||{},O=A.style,H=A.styleSpec;let Y=[];const re=bo(m);if(re!=="object")return[new en(c,m,`object expected, ${re} found`)];for(const de in m){const be=de.split(".")[0],Le=B[be]||B["*"];let $e;if(D[be])$e=D[be];else if(B[be])$e=jt;else if(D["*"])$e=D["*"];else{if(!B["*"]){Y.push(new en(c,m[de],`unknown property "${de}"`));continue}$e=jt}Y=Y.concat($e({key:(c&&`${c}.`)+de,value:m[de],valueSpec:Le,style:O,styleSpec:H,object:m,objectKey:de},m))}for(const de in B)D[de]||B[de].required&&B[de].default===void 0&&m[de]===void 0&&Y.push(new en(c,m,`missing required property "${de}"`));return Y}function ph(A){const c=A.value,m=A.valueSpec,B=A.style,D=A.styleSpec,O=A.key,H=A.arrayElementValidator||jt;if(bo(c)!=="array")return[new en(O,c,`array expected, ${bo(c)} found`)];if(m.length&&c.length!==m.length)return[new en(O,c,`array length ${m.length} expected, length ${c.length} found`)];if(m["min-length"]&&c.length<m["min-length"])return[new en(O,c,`array length at least ${m["min-length"]} expected, length ${c.length} found`)];let Y={type:m.value,values:m.values};D.$version<7&&(Y.function=m.function),bo(m.value)==="object"&&(Y=m.value);let re=[];for(let de=0;de<c.length;de++)re=re.concat(H({array:c,arrayIndex:de,value:c[de],valueSpec:Y,style:B,styleSpec:D,key:`${O}[${de}]`}));return re}function sl(A){const c=A.key,m=A.value,B=A.valueSpec;let D=bo(m);return D==="number"&&m!=m&&(D="NaN"),D!=="number"?[new en(c,m,`number expected, ${D} found`)]:"minimum"in B&&m<B.minimum?[new en(c,m,`${m} is less than the minimum value ${B.minimum}`)]:"maximum"in B&&m>B.maximum?[new en(c,m,`${m} is greater than the maximum value ${B.maximum}`)]:[]}function Dh(A){const c=A.valueSpec,m=er(A.value.type);let B,D,O,H={};const Y=m!=="categorical"&&A.value.property===void 0,re=!Y,de=bo(A.value.stops)==="array"&&bo(A.value.stops[0])==="array"&&bo(A.value.stops[0][0])==="object",be=va({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Ge){if(m==="identity")return[new en(Ge.key,Ge.value,'identity function may not have a "stops" property')];let Ze=[];const St=Ge.value;return Ze=Ze.concat(ph({key:Ge.key,value:St,valueSpec:Ge.valueSpec,style:Ge.style,styleSpec:Ge.styleSpec,arrayElementValidator:Le})),bo(St)==="array"&&St.length===0&&Ze.push(new en(Ge.key,St,"array must have at least one stop")),Ze},default:function(Ge){return jt({key:Ge.key,value:Ge.value,valueSpec:c,style:Ge.style,styleSpec:Ge.styleSpec})}}});return m==="identity"&&Y&&be.push(new en(A.key,A.value,'missing required property "property"')),m==="identity"||A.value.stops||be.push(new en(A.key,A.value,'missing required property "stops"')),m==="exponential"&&A.valueSpec.expression&&!Or(A.valueSpec)&&be.push(new en(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(re&&!rs(A.valueSpec)?be.push(new en(A.key,A.value,"property functions not supported")):Y&&!sc(A.valueSpec)&&be.push(new en(A.key,A.value,"zoom functions not supported"))),m!=="categorical"&&!de||A.value.property!==void 0||be.push(new en(A.key,A.value,'"property" property is required')),be;function Le(Ge){let Ze=[];const St=Ge.value,wt=Ge.key;if(bo(St)!=="array")return[new en(wt,St,`array expected, ${bo(St)} found`)];if(St.length!==2)return[new en(wt,St,`array length 2 expected, length ${St.length} found`)];if(de){if(bo(St[0])!=="object")return[new en(wt,St,`object expected, ${bo(St[0])} found`)];if(St[0].zoom===void 0)return[new en(wt,St,"object stop key must have zoom")];if(St[0].value===void 0)return[new en(wt,St,"object stop key must have value")];if(O&&O>er(St[0].zoom))return[new en(wt,St[0].zoom,"stop zoom values must appear in ascending order")];er(St[0].zoom)!==O&&(O=er(St[0].zoom),D=void 0,H={}),Ze=Ze.concat(va({key:`${wt}[0]`,value:St[0],valueSpec:{zoom:{}},style:Ge.style,styleSpec:Ge.styleSpec,objectElementValidators:{zoom:sl,value:$e}}))}else Ze=Ze.concat($e({key:`${wt}[0]`,value:St[0],valueSpec:{},style:Ge.style,styleSpec:Ge.styleSpec},St));return jl(xi(St[1]))?Ze.concat([new en(`${wt}[1]`,St[1],"expressions are not allowed in function stops.")]):Ze.concat(jt({key:`${wt}[1]`,value:St[1],valueSpec:c,style:Ge.style,styleSpec:Ge.styleSpec}))}function $e(Ge,Ze){const St=bo(Ge.value),wt=er(Ge.value),Yt=Ge.value!==null?Ge.value:Ze;if(B){if(St!==B)return[new en(Ge.key,Yt,`${St} stop domain type must match previous stop domain type ${B}`)]}else B=St;if(St!=="number"&&St!=="string"&&St!=="boolean")return[new en(Ge.key,Yt,"stop domain value must be a number, string, or boolean")];if(St!=="number"&&m!=="categorical"){let pn=`number expected, ${St} found`;return rs(c)&&m===void 0&&(pn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new en(Ge.key,Yt,pn)]}return m!=="categorical"||St!=="number"||isFinite(wt)&&Math.floor(wt)===wt?m!=="categorical"&&St==="number"&&D!==void 0&&wt<D?[new en(Ge.key,Yt,"stop domain values must appear in ascending order")]:(D=wt,m==="categorical"&&wt in H?[new en(Ge.key,Yt,"stop domain values must be unique")]:(H[wt]=!0,[])):[new en(Ge.key,Yt,`integer expected, found ${wt}`)]}}function al(A){const c=(A.expressionContext==="property"?Vc:_u)(xi(A.value),A.valueSpec);if(c.result==="error")return c.value.map(B=>new en(`${A.key}${B.key}`,A.value,B.message));const m=c.value.expression||c.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!m.outputDefined())return[new en(A.key,A.value,`Invalid data expression for "${A.propertyKey}". Output values must be contained as literals within the expression.`)];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!_a(m))return[new en(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!_a(m))return[new en(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!Es(m,["zoom","feature-state"]))return[new en(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!Sa(m))return[new en(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function yu(A){const c=A.key,m=A.value,B=A.valueSpec,D=[];return Array.isArray(B.values)?B.values.indexOf(er(m))===-1&&D.push(new en(c,m,`expected one of [${B.values.join(", ")}], ${JSON.stringify(m)} found`)):Object.keys(B.values).indexOf(er(m))===-1&&D.push(new en(c,m,`expected one of [${Object.keys(B.values).join(", ")}], ${JSON.stringify(m)} found`)),D}function ac(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(const c of A.slice(1))if(!ac(c)&&typeof c!="boolean")return!1;return!0;default:return!0}}const gd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Qu(A){if(A==null)return{filter:()=>!0,needGeometry:!1};ac(A)||(A=Bc(A));const c=_u(A,gd);if(c.result==="error")throw new Error(c.value.map(m=>`${m.key}: ${m.message}`).join(", "));return{filter:(m,B,D)=>c.value.evaluate(m,B,{},D),needGeometry:ll(A)}}function lc(A,c){return A<c?-1:A>c?1:0}function ll(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(let c=1;c<A.length;c++)if(ll(A[c]))return!0;return!1}function Bc(A){if(!A)return!0;const c=A[0];return A.length<=1?c!=="any":c==="=="?Gc(A[1],A[2],"=="):c==="!="?oa(Gc(A[1],A[2],"==")):c==="<"||c===">"||c==="<="||c===">="?Gc(A[1],A[2],c):c==="any"?(m=A.slice(1),["any"].concat(m.map(Bc))):c==="all"?["all"].concat(A.slice(1).map(Bc)):c==="none"?["all"].concat(A.slice(1).map(Bc).map(oa)):c==="in"?Wc(A[1],A.slice(2)):c==="!in"?oa(Wc(A[1],A.slice(2))):c==="has"?Zs(A[1]):c==="!has"?oa(Zs(A[1])):c!=="within"||A;var m}function Gc(A,c,m){switch(A){case"$type":return[`filter-type-${m}`,c];case"$id":return[`filter-id-${m}`,c];default:return[`filter-${m}`,A,c]}}function Wc(A,c){if(c.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(m=>typeof m!=typeof c[0])?["filter-in-large",A,["literal",c.sort(lc)]]:["filter-in-small",A,["literal",c]]}}function Zs(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function oa(A){return["!",A]}function $u(A){return ac(xi(A.value))?al(So({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Tc(A)}function Tc(A){const c=A.value,m=A.key;if(bo(c)!=="array")return[new en(m,c,`array expected, ${bo(c)} found`)];const B=A.styleSpec;let D,O=[];if(c.length<1)return[new en(m,c,"filter array must have at least 1 element")];switch(O=O.concat(yu({key:`${m}[0]`,value:c[0],valueSpec:B.filter_operator,style:A.style,styleSpec:A.styleSpec})),er(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&er(c[1])==="$type"&&O.push(new en(m,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&O.push(new en(m,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(D=bo(c[1]),D!=="string"&&O.push(new en(`${m}[1]`,c[1],`string expected, ${D} found`)));for(let H=2;H<c.length;H++)D=bo(c[H]),er(c[1])==="$type"?O=O.concat(yu({key:`${m}[${H}]`,value:c[H],valueSpec:B.geometry_type,style:A.style,styleSpec:A.styleSpec})):D!=="string"&&D!=="number"&&D!=="boolean"&&O.push(new en(`${m}[${H}]`,c[H],`string, number, or boolean expected, ${D} found`));break;case"any":case"all":case"none":for(let H=1;H<c.length;H++)O=O.concat(Tc({key:`${m}[${H}]`,value:c[H],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":D=bo(c[1]),c.length!==2?O.push(new en(m,c,`filter array for "${c[0]}" operator must have 2 elements`)):D!=="string"&&O.push(new en(`${m}[1]`,c[1],`string expected, ${D} found`));break;case"within":D=bo(c[1]),c.length!==2?O.push(new en(m,c,`filter array for "${c[0]}" operator must have 2 elements`)):D!=="object"&&O.push(new en(`${m}[1]`,c[1],`object expected, ${D} found`))}return O}function mh(A,c){const m=A.key,B=A.style,D=A.styleSpec,O=A.value,H=A.objectKey,Y=D[`${c}_${A.layerType}`];if(!Y)return[];const re=H.match(/^(.*)-transition$/);if(c==="paint"&&re&&Y[re[1]]&&Y[re[1]].transition)return jt({key:m,value:O,valueSpec:D.transition,style:B,styleSpec:D});const de=A.valueSpec||Y[H];if(!de)return[new en(m,O,`unknown property "${H}"`)];let be;if(bo(O)==="string"&&rs(de)&&!de.tokens&&(be=/^{([^}]+)}$/.exec(O)))return[new en(m,O,`"${H}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(be[1])} }\`.`)];const Le=[];return A.layerType==="symbol"&&(H==="text-field"&&B&&!B.glyphs&&Le.push(new en(m,O,'use of "text-field" requires a style "glyphs" property')),H==="text-font"&&Zo(xi(O))&&er(O.type)==="identity"&&Le.push(new en(m,O,'"text-font" does not support identity functions'))),Le.concat(jt({key:A.key,value:O,valueSpec:de,style:B,styleSpec:D,expressionContext:"property",propertyType:c,propertyKey:H}))}function Ia(A){return mh(A,"paint")}function Ga(A){return mh(A,"layout")}function gh(A){let c=[];const m=A.value,B=A.key,D=A.style,O=A.styleSpec;m.type||m.ref||c.push(new en(B,m,'either "type" or "ref" is required'));let H=er(m.type);const Y=er(m.ref);if(m.id){const re=er(m.id);for(let de=0;de<A.arrayIndex;de++){const be=D.layers[de];er(be.id)===re&&c.push(new en(B,m.id,`duplicate layer id "${m.id}", previously used at line ${be.id.__line__}`))}}if("ref"in m){let re;["type","source","source-layer","filter","layout"].forEach(de=>{de in m&&c.push(new en(B,m[de],`"${de}" is prohibited for ref layers`))}),D.layers.forEach(de=>{er(de.id)===Y&&(re=de)}),re?re.ref?c.push(new en(B,m.ref,"ref cannot reference another ref layer")):H=er(re.type):c.push(new en(B,m.ref,`ref layer "${Y}" not found`))}else if(H!=="background")if(m.source){const re=D.sources&&D.sources[m.source],de=re&&er(re.type);re?de==="vector"&&H==="raster"?c.push(new en(B,m.source,`layer "${m.id}" requires a raster source`)):de==="raster"&&H!=="raster"?c.push(new en(B,m.source,`layer "${m.id}" requires a vector source`)):de!=="vector"||m["source-layer"]?de==="raster-dem"&&H!=="hillshade"?c.push(new en(B,m.source,"raster-dem source can only be used with layer type 'hillshade'.")):H!=="line"||!m.paint||!m.paint["line-gradient"]||de==="geojson"&&re.lineMetrics||c.push(new en(B,m,`layer "${m.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new en(B,m,`layer "${m.id}" must specify a "source-layer"`)):c.push(new en(B,m.source,`source "${m.source}" not found`))}else c.push(new en(B,m,'missing required property "source"'));return c=c.concat(va({key:B,value:m,valueSpec:O.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":()=>[],type:()=>jt({key:`${B}.type`,value:m.type,valueSpec:O.layer.type,style:A.style,styleSpec:A.styleSpec,object:m,objectKey:"type"}),filter:$u,layout:re=>va({layer:m,key:re.key,value:re.value,style:re.style,styleSpec:re.styleSpec,objectElementValidators:{"*":de=>Ga(So({layerType:H},de))}}),paint:re=>va({layer:m,key:re.key,value:re.value,style:re.style,styleSpec:re.styleSpec,objectElementValidators:{"*":de=>Ia(So({layerType:H},de))}})}})),c}function cc(A){const c=A.value,m=A.key,B=bo(c);return B!=="string"?[new en(m,c,`string expected, ${B} found`)]:[]}const Kc={promoteId:function({key:A,value:c}){if(bo(c)==="string")return cc({key:A,value:c});{const m=[];for(const B in c)m.push(...cc({key:`${A}.${B}`,value:c[B]}));return m}}};function vu(A){const c=A.value,m=A.key,B=A.styleSpec,D=A.style;if(!c.type)return[new en(m,c,'"type" is required')];const O=er(c.type);let H;switch(O){case"vector":case"raster":case"raster-dem":return H=va({key:m,value:c,valueSpec:B[`source_${O.replace("-","_")}`],style:A.style,styleSpec:B,objectElementValidators:Kc}),H;case"geojson":if(H=va({key:m,value:c,valueSpec:B.source_geojson,style:D,styleSpec:B,objectElementValidators:Kc}),c.cluster)for(const Y in c.clusterProperties){const[re,de]=c.clusterProperties[Y],be=typeof re=="string"?[re,["accumulated"],["get",Y]]:re;H.push(...al({key:`${m}.${Y}.map`,value:de,expressionContext:"cluster-map"})),H.push(...al({key:`${m}.${Y}.reduce`,value:be,expressionContext:"cluster-reduce"}))}return H;case"video":return va({key:m,value:c,valueSpec:B.source_video,style:D,styleSpec:B});case"image":return va({key:m,value:c,valueSpec:B.source_image,style:D,styleSpec:B});case"canvas":return[new en(m,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return yu({key:`${m}.type`,value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:D,styleSpec:B})}}function Ec(A){const c=A.value,m=A.styleSpec,B=m.light,D=A.style;let O=[];const H=bo(c);if(c===void 0)return O;if(H!=="object")return O=O.concat([new en("light",c,`object expected, ${H} found`)]),O;for(const Y in c){const re=Y.match(/^(.*)-transition$/);O=O.concat(re&&B[re[1]]&&B[re[1]].transition?jt({key:Y,value:c[Y],valueSpec:m.transition,style:D,styleSpec:m}):B[Y]?jt({key:Y,value:c[Y],valueSpec:B[Y],style:D,styleSpec:m}):[new en(Y,c[Y],`unknown property "${Y}"`)])}return O}function xa(A){const c=A.value,m=A.styleSpec,B=m.terrain,D=A.style;let O=[];const H=bo(c);if(c===void 0)return O;if(H!=="object")return O=O.concat([new en("terrain",c,`object expected, ${H} found`)]),O;for(const Y in c)O=O.concat(B[Y]?jt({key:Y,value:c[Y],valueSpec:B[Y],style:D,styleSpec:m}):[new en(Y,c[Y],`unknown property "${Y}"`)]);return O}const Wa={"*":()=>[],array:ph,boolean:function(A){const c=A.value,m=A.key,B=bo(c);return B!=="boolean"?[new en(m,c,`boolean expected, ${B} found`)]:[]},number:sl,color:function(A){const c=A.key,m=A.value,B=bo(m);return B!=="string"?[new en(c,m,`color expected, ${B} found`)]:rr(m)===null?[new en(c,m,`color expected, "${m}" found`)]:[]},constants:Fr,enum:yu,filter:$u,function:Dh,layer:gh,object:va,source:vu,light:Ec,terrain:xa,string:cc,formatted:function(A){return cc(A).length===0?[]:al(A)},resolvedImage:function(A){return cc(A).length===0?[]:al(A)},padding:function(A){const c=A.key,m=A.value;if(bo(m)==="array"){if(m.length<1||m.length>4)return[new en(c,m,`padding requires 1 to 4 values; ${m.length} values found`)];const B={type:"number"};let D=[];for(let O=0;O<m.length;O++)D=D.concat(jt({key:`${c}[${O}]`,value:m[O],valueSpec:B}));return D}return sl({key:c,value:m,valueSpec:{}})}};function jt(A){const c=A.value,m=A.valueSpec,B=A.styleSpec;return m.expression&&Zo(er(c))?Dh(A):m.expression&&jl(xi(c))?al(A):m.type&&Wa[m.type]?Wa[m.type](A):va(So({},A,{valueSpec:m.type?B[m.type]:m}))}function Dn(A){const c=A.value,m=A.key,B=cc(A);return B.length||(c.indexOf("{fontstack}")===-1&&B.push(new en(m,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&B.push(new en(m,c,'"glyphs" url must include a "{range}" token'))),B}function wn(A,c=$t){let m=[];return m=m.concat(jt({key:"",value:A,valueSpec:c.$root,styleSpec:c,style:A,objectElementValidators:{glyphs:Dn,"*":()=>[]}})),A.constants&&(m=m.concat(Fr({key:"constants",value:A.constants,style:A,styleSpec:c}))),Ui(m)}function Ui(A){return[].concat(A).sort((c,m)=>c.line-m.line)}function Br(A){return function(...c){return Ui(A.apply(this,c))}}wn.source=Br(vu),wn.light=Br(Ec),wn.terrain=Br(xa),wn.layer=Br(gh),wn.filter=Br($u),wn.paintProperty=Br(Ia),wn.layoutProperty=Br(Ga);const po=wn,qs=po.light,as=po.paintProperty,_d=po.layoutProperty;function wl(A,c){let m=!1;if(c&&c.length)for(const B of c)A.fire(new Eo(new Error(B.message))),m=!0;return m}class ha{constructor(c,m,B){const D=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;const H=new Int32Array(this.arrayBuffer);c=H[0],this.d=(m=H[1])+2*(B=H[2]);for(let re=0;re<this.d*this.d;re++){const de=H[3+re],be=H[3+re+1];D.push(de===be?null:H.subarray(de,be))}const Y=H[3+D.length+1];this.keys=H.subarray(H[3+D.length],Y),this.bboxes=H.subarray(Y),this.insert=this._insertReadonly}else{this.d=m+2*B;for(let H=0;H<this.d*this.d;H++)D.push([]);this.keys=[],this.bboxes=[]}this.n=m,this.extent=c,this.padding=B,this.scale=m/c,this.uid=0;const O=B/m*c;this.min=-O,this.max=c+O}insert(c,m,B,D,O){this._forEachCell(m,B,D,O,this._insertCell,this.uid++,void 0,void 0),this.keys.push(c),this.bboxes.push(m),this.bboxes.push(B),this.bboxes.push(D),this.bboxes.push(O)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(c,m,B,D,O,H){this.cells[O].push(H)}query(c,m,B,D,O){const H=this.min,Y=this.max;if(c<=H&&m<=H&&Y<=B&&Y<=D&&!O)return Array.prototype.slice.call(this.keys);{const re=[];return this._forEachCell(c,m,B,D,this._queryCell,re,{},O),re}}_queryCell(c,m,B,D,O,H,Y,re){const de=this.cells[O];if(de!==null){const be=this.keys,Le=this.bboxes;for(let $e=0;$e<de.length;$e++){const Ge=de[$e];if(Y[Ge]===void 0){const Ze=4*Ge;(re?re(Le[Ze+0],Le[Ze+1],Le[Ze+2],Le[Ze+3]):c<=Le[Ze+2]&&m<=Le[Ze+3]&&B>=Le[Ze+0]&&D>=Le[Ze+1])?(Y[Ge]=!0,H.push(be[Ge])):Y[Ge]=!1}}}}_forEachCell(c,m,B,D,O,H,Y,re){const de=this._convertToCellCoord(c),be=this._convertToCellCoord(m),Le=this._convertToCellCoord(B),$e=this._convertToCellCoord(D);for(let Ge=de;Ge<=Le;Ge++)for(let Ze=be;Ze<=$e;Ze++){const St=this.d*Ze+Ge;if((!re||re(this._convertFromCellCoord(Ge),this._convertFromCellCoord(Ze),this._convertFromCellCoord(Ge+1),this._convertFromCellCoord(Ze+1)))&&O.call(this,c,m,B,D,St,H,Y,re))return}}_convertFromCellCoord(c){return(c-this.padding)/this.scale}_convertToCellCoord(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const c=this.cells,m=3+this.cells.length+1+1;let B=0;for(let H=0;H<this.cells.length;H++)B+=this.cells[H].length;const D=new Int32Array(m+B+this.keys.length+this.bboxes.length);D[0]=this.extent,D[1]=this.n,D[2]=this.padding;let O=m;for(let H=0;H<c.length;H++){const Y=c[H];D[3+H]=O,D.set(Y,O),O+=Y.length}return D[3+c.length]=O,D.set(this.keys,O),O+=this.keys.length,D[3+c.length+1]=O,D.set(this.bboxes,O),O+=this.bboxes.length,D.buffer}static serialize(c,m){const B=c.toArrayBuffer();return m&&m.push(B),{buffer:B}}static deserialize(c){return new ha(c.buffer)}}const Cl={};function Mi(A,c,m={}){if(Cl[A])throw new Error(`${A} is already registered.`);Object.defineProperty(c,"_classRegistryKey",{value:A,writeable:!1}),Cl[A]={klass:c,omit:m.omit||[],shallow:m.shallow||[]}}Mi("Object",Object),Mi("TransferableGridIndex",ha),Mi("Color",Ke),Mi("Error",Error),Mi("AJAXError",Qi),Mi("ResolvedImage",mt),Mi("StylePropertyFunction",Nu),Mi("StyleExpression",lo,{omit:["_evaluator"]}),Mi("ZoomDependentExpression",fh),Mi("ZoomConstantExpression",Hc),Mi("CompoundExpression",xo,{omit:["_evaluate"]});for(const A in pu)pu[A]._classRegistryKey||Mi(`Expression_${A}`,pu[A]);function Hl(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function Vl(A,c){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||A instanceof Blob)return A;if(Hl(A)||Kt(A))return c&&c.push(A),A;if(ArrayBuffer.isView(A)){const m=A;return c&&c.push(m.buffer),m}if(A instanceof ImageData)return c&&c.push(A.data.buffer),A;if(Array.isArray(A)){const m=[];for(const B of A)m.push(Vl(B,c));return m}if(typeof A=="object"){const m=A.constructor,B=m._classRegistryKey;if(!B)throw new Error("can't serialize object of unregistered class");if(!Cl[B])throw new Error(`${B} is not registered.`);const D=m.serialize?m.serialize(A,c):{};if(m.serialize){if(c&&D===c[c.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const O in A){if(!A.hasOwnProperty(O)||Cl[B].omit.indexOf(O)>=0)continue;const H=A[O];D[O]=Cl[B].shallow.indexOf(O)>=0?H:Vl(H,c)}A instanceof Error&&(D.message=A.message)}if(D.$name)throw new Error("$name property is reserved for worker serialization logic.");return B!=="Object"&&(D.$name=B),D}throw new Error("can't serialize object of type "+typeof A)}function Gl(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||A instanceof Blob||Hl(A)||Kt(A)||ArrayBuffer.isView(A)||A instanceof ImageData)return A;if(Array.isArray(A))return A.map(Gl);if(typeof A=="object"){const c=A.$name||"Object";if(!Cl[c])throw new Error(`can't deserialize unregistered class ${c}`);const{klass:m}=Cl[c];if(!m)throw new Error(`can't deserialize unregistered class ${c}`);if(m.deserialize)return m.deserialize(A);const B=Object.create(m.prototype);for(const D of Object.keys(A)){if(D==="$name")continue;const O=A[D];B[D]=Cl[c].shallow.indexOf(D)>=0?O:Gl(O)}return B}throw new Error("can't deserialize object of type "+typeof A)}class no{constructor(){this.first=!0}update(c,m){const B=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=B,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=B,!0):(this.lastFloorZoom>B?(this.lastIntegerZoom=B+1,this.lastIntegerZoomTime=m):this.lastFloorZoom<B&&(this.lastIntegerZoom=B,this.lastIntegerZoomTime=m),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=B,!0))}}const wi={"Latin-1 Supplement":A=>A>=128&&A<=255,Arabic:A=>A>=1536&&A<=1791,"Arabic Supplement":A=>A>=1872&&A<=1919,"Arabic Extended-A":A=>A>=2208&&A<=2303,"Hangul Jamo":A=>A>=4352&&A<=4607,"Unified Canadian Aboriginal Syllabics":A=>A>=5120&&A<=5759,Khmer:A=>A>=6016&&A<=6143,"Unified Canadian Aboriginal Syllabics Extended":A=>A>=6320&&A<=6399,"General Punctuation":A=>A>=8192&&A<=8303,"Letterlike Symbols":A=>A>=8448&&A<=8527,"Number Forms":A=>A>=8528&&A<=8591,"Miscellaneous Technical":A=>A>=8960&&A<=9215,"Control Pictures":A=>A>=9216&&A<=9279,"Optical Character Recognition":A=>A>=9280&&A<=9311,"Enclosed Alphanumerics":A=>A>=9312&&A<=9471,"Geometric Shapes":A=>A>=9632&&A<=9727,"Miscellaneous Symbols":A=>A>=9728&&A<=9983,"Miscellaneous Symbols and Arrows":A=>A>=11008&&A<=11263,"CJK Radicals Supplement":A=>A>=11904&&A<=12031,"Kangxi Radicals":A=>A>=12032&&A<=12255,"Ideographic Description Characters":A=>A>=12272&&A<=12287,"CJK Symbols and Punctuation":A=>A>=12288&&A<=12351,Hiragana:A=>A>=12352&&A<=12447,Katakana:A=>A>=12448&&A<=12543,Bopomofo:A=>A>=12544&&A<=12591,"Hangul Compatibility Jamo":A=>A>=12592&&A<=12687,Kanbun:A=>A>=12688&&A<=12703,"Bopomofo Extended":A=>A>=12704&&A<=12735,"CJK Strokes":A=>A>=12736&&A<=12783,"Katakana Phonetic Extensions":A=>A>=12784&&A<=12799,"Enclosed CJK Letters and Months":A=>A>=12800&&A<=13055,"CJK Compatibility":A=>A>=13056&&A<=13311,"CJK Unified Ideographs Extension A":A=>A>=13312&&A<=19903,"Yijing Hexagram Symbols":A=>A>=19904&&A<=19967,"CJK Unified Ideographs":A=>A>=19968&&A<=40959,"Yi Syllables":A=>A>=40960&&A<=42127,"Yi Radicals":A=>A>=42128&&A<=42191,"Hangul Jamo Extended-A":A=>A>=43360&&A<=43391,"Hangul Syllables":A=>A>=44032&&A<=55215,"Hangul Jamo Extended-B":A=>A>=55216&&A<=55295,"Private Use Area":A=>A>=57344&&A<=63743,"CJK Compatibility Ideographs":A=>A>=63744&&A<=64255,"Arabic Presentation Forms-A":A=>A>=64336&&A<=65023,"Vertical Forms":A=>A>=65040&&A<=65055,"CJK Compatibility Forms":A=>A>=65072&&A<=65103,"Small Form Variants":A=>A>=65104&&A<=65135,"Arabic Presentation Forms-B":A=>A>=65136&&A<=65279,"Halfwidth and Fullwidth Forms":A=>A>=65280&&A<=65519};function Xs(A){for(const c of A)if(qc(c.charCodeAt(0)))return!0;return!1}function Zc(A){for(const c of A)if(!Uh(c.charCodeAt(0)))return!1;return!0}function Uh(A){return!(wi.Arabic(A)||wi["Arabic Supplement"](A)||wi["Arabic Extended-A"](A)||wi["Arabic Presentation Forms-A"](A)||wi["Arabic Presentation Forms-B"](A))}function qc(A){return!(A!==746&&A!==747&&(A<4352||!(wi["Bopomofo Extended"](A)||wi.Bopomofo(A)||wi["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||wi["CJK Compatibility Ideographs"](A)||wi["CJK Compatibility"](A)||wi["CJK Radicals Supplement"](A)||wi["CJK Strokes"](A)||!(!wi["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||wi["CJK Unified Ideographs Extension A"](A)||wi["CJK Unified Ideographs"](A)||wi["Enclosed CJK Letters and Months"](A)||wi["Hangul Compatibility Jamo"](A)||wi["Hangul Jamo Extended-A"](A)||wi["Hangul Jamo Extended-B"](A)||wi["Hangul Jamo"](A)||wi["Hangul Syllables"](A)||wi.Hiragana(A)||wi["Ideographic Description Characters"](A)||wi.Kanbun(A)||wi["Kangxi Radicals"](A)||wi["Katakana Phonetic Extensions"](A)||wi.Katakana(A)&&A!==12540||!(!wi["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!wi["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||wi["Unified Canadian Aboriginal Syllabics"](A)||wi["Unified Canadian Aboriginal Syllabics Extended"](A)||wi["Vertical Forms"](A)||wi["Yijing Hexagram Symbols"](A)||wi["Yi Syllables"](A)||wi["Yi Radicals"](A))))}function Ka(A){return!(qc(A)||function(c){return!!(wi["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||wi["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||wi["Letterlike Symbols"](c)||wi["Number Forms"](c)||wi["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||wi["Control Pictures"](c)&&c!==9251||wi["Optical Character Recognition"](c)||wi["Enclosed Alphanumerics"](c)||wi["Geometric Shapes"](c)||wi["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||wi["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||wi["CJK Symbols and Punctuation"](c)||wi.Katakana(c)||wi["Private Use Area"](c)||wi["CJK Compatibility Forms"](c)||wi["Small Form Variants"](c)||wi["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(A))}function Xc(A){return A>=1424&&A<=2303||wi["Arabic Presentation Forms-A"](A)||wi["Arabic Presentation Forms-B"](A)}function Wl(A,c){return!(!c&&Xc(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||wi.Khmer(A))}function qr(A){for(const c of A)if(Xc(c.charCodeAt(0)))return!0;return!1}const xu="deferred",Sc="loading",uc="loaded";let Ic=null,da="unavailable",Kl=null;const Za=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(da="error"),Ic&&Ic(A)};function cl(){Mc.fire(new Zr("pluginStateChange",{pluginStatus:da,pluginURL:Kl}))}const Mc=new Ao,hc=function(){return da},bu=function(){if(da!==xu||!Kl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");da=Sc,cl(),Kl&&Ir({url:Kl},A=>{A?Za(A):(da=uc,cl())})},ul={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>da===uc||ul.applyArabicShaping!=null,isLoading:()=>da===Sc,setState(A){if(!xt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");da=A.pluginStatus,Kl=A.pluginURL},isParsed(){if(!xt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ul.applyArabicShaping!=null&&ul.processBidirectionalText!=null&&ul.processStyledBidirectionalText!=null},getPluginURL(){if(!xt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Kl}};class Oo{constructor(c,m){this.zoom=c,m?(this.now=m.now,this.fadeDuration=m.fadeDuration,this.zoomHistory=m.zoomHistory,this.transition=m.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new no,this.transition={})}isSupportedScript(c){return function(m,B){for(const D of m)if(!Wl(D.charCodeAt(0),B))return!1;return!0}(c,ul.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const c=this.zoom,m=c-Math.floor(c),B=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:m+(1-m)*B}:{fromScale:.5,toScale:1,t:1-(1-B)*m}}}class Bl{constructor(c,m){this.property=c,this.value=m,this.expression=function(B,D){if(Zo(B))return new Nu(B,D);if(jl(B)){const O=Vc(B,D);if(O.result==="error")throw new Error(O.value.map(H=>`${H.key}: ${H.message}`).join(", "));return O.value}{let O=B;return D.type==="color"&&typeof B=="string"?O=Ke.parse(B):D.type!=="padding"||typeof B!="number"&&!Array.isArray(B)||(O=Je.parse(B)),{kind:"constant",evaluate:()=>O}}}(m===void 0?c.specification.default:m,c.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(c,m,B){return this.property.possiblyEvaluate(this,c,m,B)}}class Yc{constructor(c){this.property=c,this.value=new Bl(c,void 0)}transitioned(c,m){return new E(this.property,this.value,m,he({},c.transition,this.transition),c.now)}untransitioned(){return new E(this.property,this.value,null,{},0)}}class _{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)}getValue(c){return Te(this._values[c].value.value)}setValue(c,m){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Yc(this._values[c].property)),this._values[c].value=new Bl(this._values[c].property,m===null?void 0:Te(m))}getTransition(c){return Te(this._values[c].transition)}setTransition(c,m){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Yc(this._values[c].property)),this._values[c].transition=Te(m)||void 0}serialize(){const c={};for(const m of Object.keys(this._values)){const B=this.getValue(m);B!==void 0&&(c[m]=B);const D=this.getTransition(m);D!==void 0&&(c[`${m}-transition`]=D)}return c}transitioned(c,m){const B=new G(this._properties);for(const D of Object.keys(this._values))B._values[D]=this._values[D].transitioned(c,m._values[D]);return B}untransitioned(){const c=new G(this._properties);for(const m of Object.keys(this._values))c._values[m]=this._values[m].untransitioned();return c}}class E{constructor(c,m,B,D,O){this.property=c,this.value=m,this.begin=O+D.delay||0,this.end=this.begin+D.duration||0,c.specification.transition&&(D.delay||D.duration)&&(this.prior=B)}possiblyEvaluate(c,m,B){const D=c.now||0,O=this.value.possiblyEvaluate(c,m,B),H=this.prior;if(H){if(D>this.end)return this.prior=null,O;if(this.value.isDataDriven())return this.prior=null,O;if(D<this.begin)return H.possiblyEvaluate(c,m,B);{const Y=(D-this.begin)/(this.end-this.begin);return this.property.interpolate(H.possiblyEvaluate(c,m,B),O,function(re){if(re<=0)return 0;if(re>=1)return 1;const de=re*re,be=de*re;return 4*(re<.5?be:3*(re-de)+be-.75)}(Y))}}return O}}class G{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,m,B){const D=new Ne(this._properties);for(const O of Object.keys(this._values))D._values[O]=this._values[O].possiblyEvaluate(c,m,B);return D}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class ne{constructor(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)}getValue(c){return Te(this._values[c].value)}setValue(c,m){this._values[c]=new Bl(this._values[c].property,m===null?void 0:Te(m))}serialize(){const c={};for(const m of Object.keys(this._values)){const B=this.getValue(m);B!==void 0&&(c[m]=B)}return c}possiblyEvaluate(c,m,B){const D=new Ne(this._properties);for(const O of Object.keys(this._values))D._values[O]=this._values[O].possiblyEvaluate(c,m,B);return D}}class ge{constructor(c,m,B){this.property=c,this.value=m,this.parameters=B}isConstant(){return this.value.kind==="constant"}constantOr(c){return this.value.kind==="constant"?this.value.value:c}evaluate(c,m,B,D){return this.property.evaluate(this.value,this.parameters,c,m,B,D)}}class Ne{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class at{constructor(c){this.specification=c}possiblyEvaluate(c,m){if(c.isDataDriven())throw new Error("Value should not be data driven");return c.expression.evaluate(m)}interpolate(c,m,B){const D=Qc[this.specification.type];return D?D(c,m,B):c}}class Dt{constructor(c,m){this.specification=c,this.overrides=m}possiblyEvaluate(c,m,B,D){return new ge(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(m,null,{},B,D)}:c.expression,m)}interpolate(c,m,B){if(c.value.kind!=="constant"||m.value.kind!=="constant")return c;if(c.value.value===void 0||m.value.value===void 0)return new ge(this,{kind:"constant",value:void 0},c.parameters);const D=Qc[this.specification.type];return D?new ge(this,{kind:"constant",value:D(c.value.value,m.value.value,B)},c.parameters):c}evaluate(c,m,B,D,O,H){return c.kind==="constant"?c.value:c.evaluate(m,B,D,O,H)}}class _n extends Dt{possiblyEvaluate(c,m,B,D){if(c.value===void 0)return new ge(this,{kind:"constant",value:void 0},m);if(c.expression.kind==="constant"){const O=c.expression.evaluate(m,null,{},B,D),H=c.property.specification.type==="resolvedImage"&&typeof O!="string"?O.name:O,Y=this._calculate(H,H,H,m);return new ge(this,{kind:"constant",value:Y},m)}if(c.expression.kind==="camera"){const O=this._calculate(c.expression.evaluate({zoom:m.zoom-1}),c.expression.evaluate({zoom:m.zoom}),c.expression.evaluate({zoom:m.zoom+1}),m);return new ge(this,{kind:"constant",value:O},m)}return new ge(this,c.expression,m)}evaluate(c,m,B,D,O,H){if(c.kind==="source"){const Y=c.evaluate(m,B,D,O,H);return this._calculate(Y,Y,Y,m)}return c.kind==="composite"?this._calculate(c.evaluate({zoom:Math.floor(m.zoom)-1},B,D),c.evaluate({zoom:Math.floor(m.zoom)},B,D),c.evaluate({zoom:Math.floor(m.zoom)+1},B,D),m):c.value}_calculate(c,m,B,D){return D.zoom>D.zoomHistory.lastIntegerZoom?{from:c,to:m}:{from:B,to:m}}interpolate(c){return c}}class ni{constructor(c){this.specification=c}possiblyEvaluate(c,m,B,D){if(c.value!==void 0){if(c.expression.kind==="constant"){const O=c.expression.evaluate(m,null,{},B,D);return this._calculate(O,O,O,m)}return this._calculate(c.expression.evaluate(new Oo(Math.floor(m.zoom-1),m)),c.expression.evaluate(new Oo(Math.floor(m.zoom),m)),c.expression.evaluate(new Oo(Math.floor(m.zoom+1),m)),m)}}_calculate(c,m,B,D){return D.zoom>D.zoomHistory.lastIntegerZoom?{from:c,to:m}:{from:B,to:m}}interpolate(c){return c}}class Ti{constructor(c){this.specification=c}possiblyEvaluate(c,m,B,D){return!!c.expression.evaluate(m,null,{},B,D)}interpolate(){return!1}}class Hi{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const m in c){const B=c[m];B.specification.overridable&&this.overridableProperties.push(m);const D=this.defaultPropertyValues[m]=new Bl(B,void 0),O=this.defaultTransitionablePropertyValues[m]=new Yc(B);this.defaultTransitioningPropertyValues[m]=O.untransitioned(),this.defaultPossiblyEvaluatedValues[m]=D.possiblyEvaluate({})}}}Mi("DataDrivenProperty",Dt),Mi("DataConstantProperty",at),Mi("CrossFadedDataDrivenProperty",_n),Mi("CrossFadedProperty",ni),Mi("ColorRampProperty",Ti);const kr="-transition";class zo extends Ao{constructor(c,m){if(super(),this.id=c.id,this.type=c.type,this._featureFilter={filter:()=>!0,needGeometry:!1},c.type!=="custom"&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),m.layout&&(this._unevaluatedLayout=new ne(m.layout)),m.paint)){this._transitionablePaint=new _(m.paint);for(const B in c.paint)this.setPaintProperty(B,c.paint[B],{validate:!1});for(const B in c.layout)this.setLayoutProperty(B,c.layout[B],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ne(m.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,m,B={}){m!=null&&this._validate(_d,`layers.${this.id}.layout.${c}`,c,m,B)||(c!=="visibility"?this._unevaluatedLayout.setValue(c,m):this.visibility=m)}getPaintProperty(c){return c.endsWith(kr)?this._transitionablePaint.getTransition(c.slice(0,-kr.length)):this._transitionablePaint.getValue(c)}setPaintProperty(c,m,B={}){if(m!=null&&this._validate(as,`layers.${this.id}.paint.${c}`,c,m,B))return!1;if(c.endsWith(kr))return this._transitionablePaint.setTransition(c.slice(0,-kr.length),m||void 0),!1;{const D=this._transitionablePaint._values[c],O=D.property.specification["property-type"]==="cross-faded-data-driven",H=D.value.isDataDriven(),Y=D.value;this._transitionablePaint.setValue(c,m),this._handleSpecialPaintPropertyUpdate(c);const re=this._transitionablePaint._values[c].value;return re.isDataDriven()||H||O||this._handleOverridablePaintPropertyUpdate(c,Y,re)}}_handleSpecialPaintPropertyUpdate(c){}_handleOverridablePaintPropertyUpdate(c,m,B){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,m){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,m)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,m)}serialize(){const c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),xe(c,(m,B)=>!(m===void 0||B==="layout"&&!Object.keys(m).length||B==="paint"&&!Object.keys(m).length))}_validate(c,m,B,D,O={}){return(!O||O.validate!==!1)&&wl(this,c.call(po,{key:m,layerType:this.type,objectKey:B,value:D,styleSpec:$t,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const c in this.paint._values){const m=this.paint.get(c);if(m instanceof ge&&rs(m.property.specification)&&(m.value.kind==="source"||m.value.kind==="composite")&&m.value.isStateDependent)return!0}return!1}}const ws={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ps{constructor(c,m){this._structArray=c,this._pos1=m*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Lo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,m){return c._trim(),m&&(c.isTransferred=!0,m.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const m=Object.create(this.prototype);return m.arrayBuffer=c.arrayBuffer,m.length=c.length,m.capacity=c.arrayBuffer.byteLength/m.bytesPerElement,m._refreshViews(),m}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const m=this.uint8;this._refreshViews(),m&&this.uint8.set(m)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Uo(A,c=1){let m=0,B=0;return{members:A.map(D=>{const O=ws[D.type].BYTES_PER_ELEMENT,H=m=zh(m,Math.max(c,O)),Y=D.components||1;return B=Math.max(B,O),m+=O*Y,{name:D.name,type:D.type,components:Y,offset:H}}),size:zh(m,Math.max(B,c)),alignment:c}}function zh(A,c){return Math.ceil(A/c)*c}class Jc extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m){const B=this.length;return this.resize(B+1),this.emplace(B,c,m)}emplace(c,m,B){const D=2*c;return this.int16[D+0]=m,this.int16[D+1]=B,c}}Jc.prototype.bytesPerElement=4,Mi("StructArrayLayout2i4",Jc);class P extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,B,D){const O=this.length;return this.resize(O+1),this.emplace(O,c,m,B,D)}emplace(c,m,B,D,O){const H=4*c;return this.int16[H+0]=m,this.int16[H+1]=B,this.int16[H+2]=D,this.int16[H+3]=O,c}}P.prototype.bytesPerElement=8,Mi("StructArrayLayout4i8",P);class u extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,B,D,O,H){const Y=this.length;return this.resize(Y+1),this.emplace(Y,c,m,B,D,O,H)}emplace(c,m,B,D,O,H,Y){const re=6*c;return this.int16[re+0]=m,this.int16[re+1]=B,this.int16[re+2]=D,this.int16[re+3]=O,this.int16[re+4]=H,this.int16[re+5]=Y,c}}u.prototype.bytesPerElement=12,Mi("StructArrayLayout2i4i12",u);class x extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,B,D,O,H){const Y=this.length;return this.resize(Y+1),this.emplace(Y,c,m,B,D,O,H)}emplace(c,m,B,D,O,H,Y){const re=4*c,de=8*c;return this.int16[re+0]=m,this.int16[re+1]=B,this.uint8[de+4]=D,this.uint8[de+5]=O,this.uint8[de+6]=H,this.uint8[de+7]=Y,c}}x.prototype.bytesPerElement=8,Mi("StructArrayLayout2i4ub8",x);class I extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m){const B=this.length;return this.resize(B+1),this.emplace(B,c,m)}emplace(c,m,B){const D=2*c;return this.float32[D+0]=m,this.float32[D+1]=B,c}}I.prototype.bytesPerElement=8,Mi("StructArrayLayout2f8",I);class F extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,B,D,O,H,Y,re,de,be){const Le=this.length;return this.resize(Le+1),this.emplace(Le,c,m,B,D,O,H,Y,re,de,be)}emplace(c,m,B,D,O,H,Y,re,de,be,Le){const $e=10*c;return this.uint16[$e+0]=m,this.uint16[$e+1]=B,this.uint16[$e+2]=D,this.uint16[$e+3]=O,this.uint16[$e+4]=H,this.uint16[$e+5]=Y,this.uint16[$e+6]=re,this.uint16[$e+7]=de,this.uint16[$e+8]=be,this.uint16[$e+9]=Le,c}}F.prototype.bytesPerElement=20,Mi("StructArrayLayout10ui20",F);class j extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,B,D,O,H,Y,re,de,be,Le,$e){const Ge=this.length;return this.resize(Ge+1),this.emplace(Ge,c,m,B,D,O,H,Y,re,de,be,Le,$e)}emplace(c,m,B,D,O,H,Y,re,de,be,Le,$e,Ge){const Ze=12*c;return this.int16[Ze+0]=m,this.int16[Ze+1]=B,this.int16[Ze+2]=D,this.int16[Ze+3]=O,this.uint16[Ze+4]=H,this.uint16[Ze+5]=Y,this.uint16[Ze+6]=re,this.uint16[Ze+7]=de,this.int16[Ze+8]=be,this.int16[Ze+9]=Le,this.int16[Ze+10]=$e,this.int16[Ze+11]=Ge,c}}j.prototype.bytesPerElement=24,Mi("StructArrayLayout4i4ui4i24",j);class N extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,B){const D=this.length;return this.resize(D+1),this.emplace(D,c,m,B)}emplace(c,m,B,D){const O=3*c;return this.float32[O+0]=m,this.float32[O+1]=B,this.float32[O+2]=D,c}}N.prototype.bytesPerElement=12,Mi("StructArrayLayout3f12",N);class oe extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const m=this.length;return this.resize(m+1),this.emplace(m,c)}emplace(c,m){return this.uint32[1*c+0]=m,c}}oe.prototype.bytesPerElement=4,Mi("StructArrayLayout1ul4",oe);class ae extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,B,D,O,H,Y,re,de){const be=this.length;return this.resize(be+1),this.emplace(be,c,m,B,D,O,H,Y,re,de)}emplace(c,m,B,D,O,H,Y,re,de,be){const Le=10*c,$e=5*c;return this.int16[Le+0]=m,this.int16[Le+1]=B,this.int16[Le+2]=D,this.int16[Le+3]=O,this.int16[Le+4]=H,this.int16[Le+5]=Y,this.uint32[$e+3]=re,this.uint16[Le+8]=de,this.uint16[Le+9]=be,c}}ae.prototype.bytesPerElement=20,Mi("StructArrayLayout6i1ul2ui20",ae);class me extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,B,D,O,H){const Y=this.length;return this.resize(Y+1),this.emplace(Y,c,m,B,D,O,H)}emplace(c,m,B,D,O,H,Y){const re=6*c;return this.int16[re+0]=m,this.int16[re+1]=B,this.int16[re+2]=D,this.int16[re+3]=O,this.int16[re+4]=H,this.int16[re+5]=Y,c}}me.prototype.bytesPerElement=12,Mi("StructArrayLayout2i2i2i12",me);class ye extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,B,D,O){const H=this.length;return this.resize(H+1),this.emplace(H,c,m,B,D,O)}emplace(c,m,B,D,O,H){const Y=4*c,re=8*c;return this.float32[Y+0]=m,this.float32[Y+1]=B,this.float32[Y+2]=D,this.int16[re+6]=O,this.int16[re+7]=H,c}}ye.prototype.bytesPerElement=16,Mi("StructArrayLayout2f1f2i16",ye);class Re extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,B,D){const O=this.length;return this.resize(O+1),this.emplace(O,c,m,B,D)}emplace(c,m,B,D,O){const H=12*c,Y=3*c;return this.uint8[H+0]=m,this.uint8[H+1]=B,this.float32[Y+1]=D,this.float32[Y+2]=O,c}}Re.prototype.bytesPerElement=12,Mi("StructArrayLayout2ub2f12",Re);class He extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,B){const D=this.length;return this.resize(D+1),this.emplace(D,c,m,B)}emplace(c,m,B,D){const O=3*c;return this.uint16[O+0]=m,this.uint16[O+1]=B,this.uint16[O+2]=D,c}}He.prototype.bytesPerElement=6,Mi("StructArrayLayout3ui6",He);class gt extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,B,D,O,H,Y,re,de,be,Le,$e,Ge,Ze,St,wt,Yt){const pn=this.length;return this.resize(pn+1),this.emplace(pn,c,m,B,D,O,H,Y,re,de,be,Le,$e,Ge,Ze,St,wt,Yt)}emplace(c,m,B,D,O,H,Y,re,de,be,Le,$e,Ge,Ze,St,wt,Yt,pn){const Zt=24*c,dn=12*c,Gn=48*c;return this.int16[Zt+0]=m,this.int16[Zt+1]=B,this.uint16[Zt+2]=D,this.uint16[Zt+3]=O,this.uint32[dn+2]=H,this.uint32[dn+3]=Y,this.uint32[dn+4]=re,this.uint16[Zt+10]=de,this.uint16[Zt+11]=be,this.uint16[Zt+12]=Le,this.float32[dn+7]=$e,this.float32[dn+8]=Ge,this.uint8[Gn+36]=Ze,this.uint8[Gn+37]=St,this.uint8[Gn+38]=wt,this.uint32[dn+10]=Yt,this.int16[Zt+22]=pn,c}}gt.prototype.bytesPerElement=48,Mi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",gt);class dt extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,B,D,O,H,Y,re,de,be,Le,$e,Ge,Ze,St,wt,Yt,pn,Zt,dn,Gn,Qn,Ni,Vi,Li,Ci,_i,Ei){const Ii=this.length;return this.resize(Ii+1),this.emplace(Ii,c,m,B,D,O,H,Y,re,de,be,Le,$e,Ge,Ze,St,wt,Yt,pn,Zt,dn,Gn,Qn,Ni,Vi,Li,Ci,_i,Ei)}emplace(c,m,B,D,O,H,Y,re,de,be,Le,$e,Ge,Ze,St,wt,Yt,pn,Zt,dn,Gn,Qn,Ni,Vi,Li,Ci,_i,Ei,Ii){const ci=34*c,dr=17*c;return this.int16[ci+0]=m,this.int16[ci+1]=B,this.int16[ci+2]=D,this.int16[ci+3]=O,this.int16[ci+4]=H,this.int16[ci+5]=Y,this.int16[ci+6]=re,this.int16[ci+7]=de,this.uint16[ci+8]=be,this.uint16[ci+9]=Le,this.uint16[ci+10]=$e,this.uint16[ci+11]=Ge,this.uint16[ci+12]=Ze,this.uint16[ci+13]=St,this.uint16[ci+14]=wt,this.uint16[ci+15]=Yt,this.uint16[ci+16]=pn,this.uint16[ci+17]=Zt,this.uint16[ci+18]=dn,this.uint16[ci+19]=Gn,this.uint16[ci+20]=Qn,this.uint16[ci+21]=Ni,this.uint16[ci+22]=Vi,this.uint32[dr+12]=Li,this.float32[dr+13]=Ci,this.float32[dr+14]=_i,this.float32[dr+15]=Ei,this.float32[dr+16]=Ii,c}}dt.prototype.bytesPerElement=68,Mi("StructArrayLayout8i15ui1ul4f68",dt);class pt extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const m=this.length;return this.resize(m+1),this.emplace(m,c)}emplace(c,m){return this.float32[1*c+0]=m,c}}pt.prototype.bytesPerElement=4,Mi("StructArrayLayout1f4",pt);class Ft extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,B){const D=this.length;return this.resize(D+1),this.emplace(D,c,m,B)}emplace(c,m,B,D){const O=3*c;return this.int16[O+0]=m,this.int16[O+1]=B,this.int16[O+2]=D,c}}Ft.prototype.bytesPerElement=6,Mi("StructArrayLayout3i6",Ft);class Wt extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,B){const D=this.length;return this.resize(D+1),this.emplace(D,c,m,B)}emplace(c,m,B,D){const O=4*c;return this.uint32[2*c+0]=m,this.uint16[O+2]=B,this.uint16[O+3]=D,c}}Wt.prototype.bytesPerElement=8,Mi("StructArrayLayout1ul2ui8",Wt);class on extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m){const B=this.length;return this.resize(B+1),this.emplace(B,c,m)}emplace(c,m,B){const D=2*c;return this.uint16[D+0]=m,this.uint16[D+1]=B,c}}on.prototype.bytesPerElement=4,Mi("StructArrayLayout2ui4",on);class bt extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const m=this.length;return this.resize(m+1),this.emplace(m,c)}emplace(c,m){return this.uint16[1*c+0]=m,c}}bt.prototype.bytesPerElement=2,Mi("StructArrayLayout1ui2",bt);class un extends Lo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,B,D){const O=this.length;return this.resize(O+1),this.emplace(O,c,m,B,D)}emplace(c,m,B,D,O){const H=4*c;return this.float32[H+0]=m,this.float32[H+1]=B,this.float32[H+2]=D,this.float32[H+3]=O,c}}un.prototype.bytesPerElement=16,Mi("StructArrayLayout4f16",un);class tn extends Ps{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Gt(this.anchorPointX,this.anchorPointY)}}tn.prototype.size=20;class In extends ae{get(c){return new tn(this,c)}}Mi("CollisionBoxArray",In);class kn extends Ps{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(c){this._structArray.uint8[this._pos1+37]=c}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(c){this._structArray.uint8[this._pos1+38]=c}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(c){this._structArray.uint32[this._pos4+10]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}kn.prototype.size=48;class Kn extends gt{get(c){return new kn(this,c)}}Mi("PlacedSymbolArray",Kn);class xn extends Ps{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(c){this._structArray.uint32[this._pos4+12]=c}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}xn.prototype.size=68;class pi extends dt{get(c){return new xn(this,c)}}Mi("SymbolInstanceArray",pi);class vi extends pt{getoffsetX(c){return this.float32[1*c+0]}}Mi("GlyphOffsetArray",vi);class yn extends Ft{getx(c){return this.int16[3*c+0]}gety(c){return this.int16[3*c+1]}gettileUnitDistanceFromAnchor(c){return this.int16[3*c+2]}}Mi("SymbolLineVertexArray",yn);class Nr extends Ps{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Nr.prototype.size=8;class io extends Wt{get(c){return new Nr(this,c)}}Mi("FeatureIndexArray",io);class or extends Jc{}class mo extends Jc{}class qn extends Jc{}class Po extends u{}class Xr extends x{}class os extends I{}class ba extends F{}class eu extends j{}class Lc extends N{}class wu extends oe{}class ju extends me{}class Tl extends Re{}class hl extends He{}class tu extends on{}const nu=Uo([{name:"a_pos",components:2,type:"Int16"}],4),{members:b}=nu;class l{constructor(c=[]){this.segments=c}prepareSegment(c,m,B,D){let O=this.segments[this.segments.length-1];return c>l.MAX_VERTEX_ARRAY_LENGTH&&Fe(`Max vertices per segment is ${l.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!O||O.vertexLength+c>l.MAX_VERTEX_ARRAY_LENGTH||O.sortKey!==D)&&(O={vertexOffset:m.length,primitiveOffset:B.length,vertexLength:0,primitiveLength:0},D!==void 0&&(O.sortKey=D),this.segments.push(O)),O}get(){return this.segments}destroy(){for(const c of this.segments)for(const m in c.vaos)c.vaos[m].destroy()}static simpleSegment(c,m,B,D){return new l([{vertexOffset:c,primitiveOffset:m,vertexLength:B,primitiveLength:D,vaos:{},sortKey:0}])}}function g(A,c){return 256*(A=q(Math.floor(A),0,255))+q(Math.floor(c),0,255)}l.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Mi("SegmentVector",l);const T=Uo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var k={exports:{}},R={exports:{}};R.exports=function(A,c){var m,B,D,O,H,Y,re,de;for(B=A.length-(m=3&A.length),D=c,H=3432918353,Y=461845907,de=0;de<B;)re=255&A.charCodeAt(de)|(255&A.charCodeAt(++de))<<8|(255&A.charCodeAt(++de))<<16|(255&A.charCodeAt(++de))<<24,++de,D=27492+(65535&(O=5*(65535&(D=(D^=re=(65535&(re=(re=(65535&re)*H+(((re>>>16)*H&65535)<<16)&4294967295)<<15|re>>>17))*Y+(((re>>>16)*Y&65535)<<16)&4294967295)<<13|D>>>19))+((5*(D>>>16)&65535)<<16)&4294967295))+((58964+(O>>>16)&65535)<<16);switch(re=0,m){case 3:re^=(255&A.charCodeAt(de+2))<<16;case 2:re^=(255&A.charCodeAt(de+1))<<8;case 1:D^=re=(65535&(re=(re=(65535&(re^=255&A.charCodeAt(de)))*H+(((re>>>16)*H&65535)<<16)&4294967295)<<15|re>>>17))*Y+(((re>>>16)*Y&65535)<<16)&4294967295}return D^=A.length,D=2246822507*(65535&(D^=D>>>16))+((2246822507*(D>>>16)&65535)<<16)&4294967295,D=3266489909*(65535&(D^=D>>>13))+((3266489909*(D>>>16)&65535)<<16)&4294967295,(D^=D>>>16)>>>0};var K={exports:{}};K.exports=function(A,c){for(var m,B=A.length,D=c^B,O=0;B>=4;)m=1540483477*(65535&(m=255&A.charCodeAt(O)|(255&A.charCodeAt(++O))<<8|(255&A.charCodeAt(++O))<<16|(255&A.charCodeAt(++O))<<24))+((1540483477*(m>>>16)&65535)<<16),D=1540483477*(65535&D)+((1540483477*(D>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),B-=4,++O;switch(B){case 3:D^=(255&A.charCodeAt(O+2))<<16;case 2:D^=(255&A.charCodeAt(O+1))<<8;case 1:D=1540483477*(65535&(D^=255&A.charCodeAt(O)))+((1540483477*(D>>>16)&65535)<<16)}return D=1540483477*(65535&(D^=D>>>13))+((1540483477*(D>>>16)&65535)<<16),(D^=D>>>15)>>>0};var X=R.exports,ee=K.exports;k.exports=X,k.exports.murmur3=X,k.exports.murmur2=ee;class ce{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(c,m,B,D){this.ids.push(le(c)),this.positions.push(m,B,D)}getPositions(c){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const m=le(c);let B=0,D=this.ids.length-1;for(;B<D;){const H=B+D>>1;this.ids[H]>=m?D=H:B=H+1}const O=[];for(;this.ids[B]===m;)O.push({index:this.positions[3*B],start:this.positions[3*B+1],end:this.positions[3*B+2]}),B++;return O}static serialize(c,m){const B=new Float64Array(c.ids),D=new Uint32Array(c.positions);return ve(B,D,0,B.length-1),m&&m.push(B.buffer,D.buffer),{ids:B,positions:D}}static deserialize(c){const m=new ce;return m.ids=c.ids,m.positions=c.positions,m.indexed=!0,m}}function le(A){const c=+A;return!isNaN(c)&&c<=Number.MAX_SAFE_INTEGER?c:k.exports(String(A))}function ve(A,c,m,B){for(;m<B;){const D=A[m+B>>1];let O=m-1,H=B+1;for(;;){do O++;while(A[O]<D);do H--;while(A[H]>D);if(O>=H)break;Qe(A,O,H),Qe(c,3*O,3*H),Qe(c,3*O+1,3*H+1),Qe(c,3*O+2,3*H+2)}H-m<B-H?(ve(A,c,m,H),m=H+1):(ve(A,c,H+1,B),B=H)}}function Qe(A,c,m){const B=A[c];A[c]=A[m],A[m]=B}Mi("FeaturePositionMap",ce);class We{constructor(c,m){this.gl=c.gl,this.location=m}}class et extends We{constructor(c,m){super(c,m),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class tt extends We{constructor(c,m){super(c,m),this.current=[0,0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))}}class rt extends We{constructor(c,m){super(c,m),this.current=Ke.transparent}set(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))}}const Be=new Float32Array(16);function Ye(A){return[g(255*A.r,255*A.g),g(255*A.b,255*A.a)]}class lt{constructor(c,m,B){this.value=c,this.uniformNames=m.map(D=>`u_${D}`),this.type=B}setUniform(c,m,B){c.set(B.constantOr(this.value))}getBinding(c,m,B){return this.type==="color"?new rt(c,m):new et(c,m)}}class At{constructor(c,m){this.uniformNames=m.map(B=>`u_${B}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(c,m){this.pixelRatioFrom=m.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=m.tlbr,this.patternTo=c.tlbr}setUniform(c,m,B,D){const O=D==="u_pattern_to"?this.patternTo:D==="u_pattern_from"?this.patternFrom:D==="u_pixel_ratio_to"?this.pixelRatioTo:D==="u_pixel_ratio_from"?this.pixelRatioFrom:null;O&&c.set(O)}getBinding(c,m,B){return B.substr(0,9)==="u_pattern"?new tt(c,m):new et(c,m)}}class It{constructor(c,m,B,D){this.expression=c,this.type=B,this.maxValue=0,this.paintVertexAttributes=m.map(O=>({name:`a_${O}`,type:"Float32",components:B==="color"?2:1,offset:0})),this.paintVertexArray=new D}populatePaintArray(c,m,B,D,O){const H=this.paintVertexArray.length,Y=this.expression.evaluate(new Oo(0),m,{},D,[],O);this.paintVertexArray.resize(c),this._setPaintValue(H,c,Y)}updatePaintArray(c,m,B,D){const O=this.expression.evaluate({zoom:0},B,D);this._setPaintValue(c,m,O)}_setPaintValue(c,m,B){if(this.type==="color"){const D=Ye(B);for(let O=c;O<m;O++)this.paintVertexArray.emplace(O,D[0],D[1])}else{for(let D=c;D<m;D++)this.paintVertexArray.emplace(D,B);this.maxValue=Math.max(this.maxValue,Math.abs(B))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Tt{constructor(c,m,B,D,O,H){this.expression=c,this.uniformNames=m.map(Y=>`u_${Y}_t`),this.type=B,this.useIntegerZoom=D,this.zoom=O,this.maxValue=0,this.paintVertexAttributes=m.map(Y=>({name:`a_${Y}`,type:"Float32",components:B==="color"?4:2,offset:0})),this.paintVertexArray=new H}populatePaintArray(c,m,B,D,O){const H=this.expression.evaluate(new Oo(this.zoom),m,{},D,[],O),Y=this.expression.evaluate(new Oo(this.zoom+1),m,{},D,[],O),re=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(re,c,H,Y)}updatePaintArray(c,m,B,D){const O=this.expression.evaluate({zoom:this.zoom},B,D),H=this.expression.evaluate({zoom:this.zoom+1},B,D);this._setPaintValue(c,m,O,H)}_setPaintValue(c,m,B,D){if(this.type==="color"){const O=Ye(B),H=Ye(D);for(let Y=c;Y<m;Y++)this.paintVertexArray.emplace(Y,O[0],O[1],H[0],H[1])}else{for(let O=c;O<m;O++)this.paintVertexArray.emplace(O,B,D);this.maxValue=Math.max(this.maxValue,Math.abs(B),Math.abs(D))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,m){const B=this.useIntegerZoom?Math.floor(m.zoom):m.zoom,D=q(this.expression.interpolationFactor(B,this.zoom,this.zoom+1),0,1);c.set(D)}getBinding(c,m,B){return new et(c,m)}}class Mt{constructor(c,m,B,D,O,H){this.expression=c,this.type=m,this.useIntegerZoom=B,this.zoom=D,this.layerId=H,this.zoomInPaintVertexArray=new O,this.zoomOutPaintVertexArray=new O}populatePaintArray(c,m,B){const D=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(D,c,m.patterns&&m.patterns[this.layerId],B)}updatePaintArray(c,m,B,D,O){this._setPaintValues(c,m,B.patterns&&B.patterns[this.layerId],O)}_setPaintValues(c,m,B,D){if(!D||!B)return;const{min:O,mid:H,max:Y}=B,re=D[O],de=D[H],be=D[Y];if(re&&de&&be)for(let Le=c;Le<m;Le++)this.zoomInPaintVertexArray.emplace(Le,de.tl[0],de.tl[1],de.br[0],de.br[1],re.tl[0],re.tl[1],re.br[0],re.br[1],de.pixelRatio,re.pixelRatio),this.zoomOutPaintVertexArray.emplace(Le,de.tl[0],de.tl[1],de.br[0],de.br[1],be.tl[0],be.tl[1],be.br[0],be.br[1],de.pixelRatio,be.pixelRatio)}upload(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,T.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,T.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ht{constructor(c,m,B){this.binders={},this._buffers=[];const D=[];for(const O in c.paint._values){if(!B(O))continue;const H=c.paint.get(O);if(!(H instanceof ge&&rs(H.property.specification)))continue;const Y=cn(O,c.type),re=H.value,de=H.property.specification.type,be=H.property.useIntegerZoom,Le=H.property.specification["property-type"],$e=Le==="cross-faded"||Le==="cross-faded-data-driven";if(re.kind==="constant")this.binders[O]=$e?new At(re.value,Y):new lt(re.value,Y,de),D.push(`/u_${O}`);else if(re.kind==="source"||$e){const Ge=Nn(O,de,"source");this.binders[O]=$e?new Mt(re,de,be,m,Ge,c.id):new It(re,Y,de,Ge),D.push(`/a_${O}`)}else{const Ge=Nn(O,de,"composite");this.binders[O]=new Tt(re,Y,de,be,m,Ge),D.push(`/z_${O}`)}}this.cacheKey=D.sort().join("")}getMaxValue(c){const m=this.binders[c];return m instanceof It||m instanceof Tt?m.maxValue:0}populatePaintArrays(c,m,B,D,O){for(const H in this.binders){const Y=this.binders[H];(Y instanceof It||Y instanceof Tt||Y instanceof Mt)&&Y.populatePaintArray(c,m,B,D,O)}}setConstantPatternPositions(c,m){for(const B in this.binders){const D=this.binders[B];D instanceof At&&D.setConstantPatternPositions(c,m)}}updatePaintArrays(c,m,B,D,O){let H=!1;for(const Y in c){const re=m.getPositions(Y);for(const de of re){const be=B.feature(de.index);for(const Le in this.binders){const $e=this.binders[Le];if(($e instanceof It||$e instanceof Tt||$e instanceof Mt)&&$e.expression.isStateDependent===!0){const Ge=D.paint.get(Le);$e.expression=Ge.value,$e.updatePaintArray(de.start,de.end,be,c[Y],O),H=!0}}}}return H}defines(){const c=[];for(const m in this.binders){const B=this.binders[m];(B instanceof lt||B instanceof At)&&c.push(...B.uniformNames.map(D=>`#define HAS_UNIFORM_${D}`))}return c}getBinderAttributes(){const c=[];for(const m in this.binders){const B=this.binders[m];if(B instanceof It||B instanceof Tt)for(let D=0;D<B.paintVertexAttributes.length;D++)c.push(B.paintVertexAttributes[D].name);else if(B instanceof Mt)for(let D=0;D<T.members.length;D++)c.push(T.members[D].name)}return c}getBinderUniforms(){const c=[];for(const m in this.binders){const B=this.binders[m];if(B instanceof lt||B instanceof At||B instanceof Tt)for(const D of B.uniformNames)c.push(D)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c,m){const B=[];for(const D in this.binders){const O=this.binders[D];if(O instanceof lt||O instanceof At||O instanceof Tt){for(const H of O.uniformNames)if(m[H]){const Y=O.getBinding(c,m[H],H);B.push({name:H,property:D,binding:Y})}}}return B}setUniforms(c,m,B,D){for(const{name:O,property:H,binding:Y}of m)this.binders[H].setUniform(Y,D,B.get(H),O)}updatePaintBuffers(c){this._buffers=[];for(const m in this.binders){const B=this.binders[m];if(c&&B instanceof Mt){const D=c.fromScale===2?B.zoomInPaintVertexBuffer:B.zoomOutPaintVertexBuffer;D&&this._buffers.push(D)}else(B instanceof It||B instanceof Tt)&&B.paintVertexBuffer&&this._buffers.push(B.paintVertexBuffer)}}upload(c){for(const m in this.binders){const B=this.binders[m];(B instanceof It||B instanceof Tt||B instanceof Mt)&&B.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const m=this.binders[c];(m instanceof It||m instanceof Tt||m instanceof Mt)&&m.destroy()}}}class Nt{constructor(c,m,B=()=>!0){this.programConfigurations={};for(const D of c)this.programConfigurations[D.id]=new Ht(D,m,B);this.needsUpload=!1,this._featureMap=new ce,this._bufferOffset=0}populatePaintArrays(c,m,B,D,O,H){for(const Y in this.programConfigurations)this.programConfigurations[Y].populatePaintArrays(c,m,D,O,H);m.id!==void 0&&this._featureMap.add(m.id,B,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,m,B,D){for(const O of B)this.needsUpload=this.programConfigurations[O.id].updatePaintArrays(c,this._featureMap,m,O,D)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const m in this.programConfigurations)this.programConfigurations[m].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}function cn(A,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(`${c}-`,"").replace(/-/g,"_")]}function Nn(A,c,m){const B={color:{source:I,composite:un},number:{source:pt,composite:I}},D=function(O){return{"line-pattern":{source:ba,composite:ba},"fill-pattern":{source:ba,composite:ba},"fill-extrusion-pattern":{source:ba,composite:ba}}[O]}(A);return D&&D[m]||B[c][m]}Mi("ConstantBinder",lt),Mi("CrossFadedConstantBinder",At),Mi("SourceExpressionBinder",It),Mi("CrossFadedCompositeBinder",Mt),Mi("CompositeExpressionBinder",Tt),Mi("ProgramConfiguration",Ht,{omit:["_buffers"]}),Mi("ProgramConfigurationSet",Nt);var Vt=8192;const Pn=Math.pow(2,14)-1,fn=-Pn-1;function Zn(A){const c=Vt/A.extent,m=A.loadGeometry();for(let B=0;B<m.length;B++){const D=m[B];for(let O=0;O<D.length;O++){const H=D[O],Y=Math.round(H.x*c),re=Math.round(H.y*c);H.x=q(Y,fn,Pn),H.y=q(re,fn,Pn),(Y<H.x||Y>H.x+1||re<H.y||re>H.y+1)&&Fe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return m}function nn(A,c){return{type:A.type,id:A.id,properties:A.properties,geometry:c?Zn(A):[]}}function Mn(A,c,m,B,D){A.emplaceBack(2*c+(B+1)/2,2*m+(D+1)/2)}class Yn{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(m=>m.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new mo,this.indexArray=new hl,this.segments=new l,this.programConfigurations=new Nt(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(c,m,B){const D=this.layers[0],O=[];let H=null,Y=!1;D.type==="circle"&&(H=D.layout.get("circle-sort-key"),Y=!H.isConstant());for(const{feature:re,id:de,index:be,sourceLayerIndex:Le}of c){const $e=this.layers[0]._featureFilter.needGeometry,Ge=nn(re,$e);if(!this.layers[0]._featureFilter.filter(new Oo(this.zoom),Ge,B))continue;const Ze=Y?H.evaluate(Ge,{},B):void 0,St={id:de,properties:re.properties,type:re.type,sourceLayerIndex:Le,index:be,geometry:$e?Ge.geometry:Zn(re),patterns:{},sortKey:Ze};O.push(St)}Y&&O.sort((re,de)=>re.sortKey-de.sortKey);for(const re of O){const{geometry:de,index:be,sourceLayerIndex:Le}=re,$e=c[be].feature;this.addFeature(re,de,be,B),m.featureIndex.insert($e,de,be,Le,this.index)}}update(c,m,B){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,B)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,b),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,m,B,D){for(const O of m)for(const H of O){const Y=H.x,re=H.y;if(Y<0||Y>=Vt||re<0||re>=Vt)continue;const de=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),be=de.vertexLength;Mn(this.layoutVertexArray,Y,re,-1,-1),Mn(this.layoutVertexArray,Y,re,1,-1),Mn(this.layoutVertexArray,Y,re,1,1),Mn(this.layoutVertexArray,Y,re,-1,1),this.indexArray.emplaceBack(be,be+1,be+2),this.indexArray.emplaceBack(be,be+3,be+2),de.vertexLength+=4,de.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,B,{},D)}}function Vn(A,c){for(let m=0;m<A.length;m++)if(Ro(c,A[m]))return!0;for(let m=0;m<c.length;m++)if(Ro(A,c[m]))return!0;return!!Di(A,c)}function si(A,c,m){return!!Ro(A,c)||!!ro(c,A,m)}function ar(A,c){if(A.length===1)return Yi(c,A[0]);for(let m=0;m<c.length;m++){const B=c[m];for(let D=0;D<B.length;D++)if(Ro(A,B[D]))return!0}for(let m=0;m<A.length;m++)if(Yi(c,A[m]))return!0;for(let m=0;m<c.length;m++)if(Di(A,c[m]))return!0;return!1}function Tr(A,c,m){if(A.length>1){if(Di(A,c))return!0;for(let B=0;B<c.length;B++)if(ro(c[B],A,m))return!0}for(let B=0;B<A.length;B++)if(ro(A[B],c,m))return!0;return!1}function Di(A,c){if(A.length===0||c.length===0)return!1;for(let m=0;m<A.length-1;m++){const B=A[m],D=A[m+1];for(let O=0;O<c.length-1;O++)if(yr(B,D,c[O],c[O+1]))return!0}return!1}function yr(A,c,m,B){return Se(A,m,B)!==Se(c,m,B)&&Se(A,c,m)!==Se(A,c,B)}function ro(A,c,m){const B=m*m;if(c.length===1)return A.distSqr(c[0])<B;for(let D=1;D<c.length;D++)if(co(A,c[D-1],c[D])<B)return!0;return!1}function co(A,c,m){const B=c.distSqr(m);if(B===0)return A.distSqr(c);const D=((A.x-c.x)*(m.x-c.x)+(A.y-c.y)*(m.y-c.y))/B;return A.distSqr(D<0?c:D>1?m:m.sub(c)._mult(D)._add(c))}function Yi(A,c){let m,B,D,O=!1;for(let H=0;H<A.length;H++){m=A[H];for(let Y=0,re=m.length-1;Y<m.length;re=Y++)B=m[Y],D=m[re],B.y>c.y!=D.y>c.y&&c.x<(D.x-B.x)*(c.y-B.y)/(D.y-B.y)+B.x&&(O=!O)}return O}function Ro(A,c){let m=!1;for(let B=0,D=A.length-1;B<A.length;D=B++){const O=A[B],H=A[D];O.y>c.y!=H.y>c.y&&c.x<(H.x-O.x)*(c.y-O.y)/(H.y-O.y)+O.x&&(m=!m)}return m}function gs(A,c,m){const B=m[0],D=m[2];if(A.x<B.x&&c.x<B.x||A.x>D.x&&c.x>D.x||A.y<B.y&&c.y<B.y||A.y>D.y&&c.y>D.y)return!1;const O=Se(A,c,m[0]);return O!==Se(A,c,m[1])||O!==Se(A,c,m[2])||O!==Se(A,c,m[3])}function qo(A,c,m){const B=c.paint.get(A).value;return B.kind==="constant"?B.value:m.programConfigurations.get(c.id).getMaxValue(A)}function Xo(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function qa(A,c,m,B,D){if(!c[0]&&!c[1])return A;const O=Gt.convert(c)._mult(D);m==="viewport"&&O._rotate(-B);const H=[];for(let Y=0;Y<A.length;Y++)H.push(A[Y].sub(O));return H}Mi("CircleBucket",Yn,{omit:["layers"]});const Oa=new Hi({"circle-sort-key":new Dt($t.layout_circle["circle-sort-key"])});var iu={paint:new Hi({"circle-radius":new Dt($t.paint_circle["circle-radius"]),"circle-color":new Dt($t.paint_circle["circle-color"]),"circle-blur":new Dt($t.paint_circle["circle-blur"]),"circle-opacity":new Dt($t.paint_circle["circle-opacity"]),"circle-translate":new at($t.paint_circle["circle-translate"]),"circle-translate-anchor":new at($t.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new at($t.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new at($t.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Dt($t.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Dt($t.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Dt($t.paint_circle["circle-stroke-opacity"])}),layout:Oa},Os=1e-6,ko=typeof Float32Array<"u"?Float32Array:Array;function ts(){var A=new ko(9);return ko!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A}function No(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function Aa(A,c,m){var B=c[0],D=c[1],O=c[2],H=c[3],Y=c[4],re=c[5],de=c[6],be=c[7],Le=c[8],$e=c[9],Ge=c[10],Ze=c[11],St=c[12],wt=c[13],Yt=c[14],pn=c[15],Zt=m[0],dn=m[1],Gn=m[2],Qn=m[3];return A[0]=Zt*B+dn*Y+Gn*Le+Qn*St,A[1]=Zt*D+dn*re+Gn*$e+Qn*wt,A[2]=Zt*O+dn*de+Gn*Ge+Qn*Yt,A[3]=Zt*H+dn*be+Gn*Ze+Qn*pn,A[4]=(Zt=m[4])*B+(dn=m[5])*Y+(Gn=m[6])*Le+(Qn=m[7])*St,A[5]=Zt*D+dn*re+Gn*$e+Qn*wt,A[6]=Zt*O+dn*de+Gn*Ge+Qn*Yt,A[7]=Zt*H+dn*be+Gn*Ze+Qn*pn,A[8]=(Zt=m[8])*B+(dn=m[9])*Y+(Gn=m[10])*Le+(Qn=m[11])*St,A[9]=Zt*D+dn*re+Gn*$e+Qn*wt,A[10]=Zt*O+dn*de+Gn*Ge+Qn*Yt,A[11]=Zt*H+dn*be+Gn*Ze+Qn*pn,A[12]=(Zt=m[12])*B+(dn=m[13])*Y+(Gn=m[14])*Le+(Qn=m[15])*St,A[13]=Zt*D+dn*re+Gn*$e+Qn*wt,A[14]=Zt*O+dn*de+Gn*Ge+Qn*Yt,A[15]=Zt*H+dn*be+Gn*Ze+Qn*pn,A}Math.hypot||(Math.hypot=function(){for(var A=0,c=arguments.length;c--;)A+=arguments[c]*arguments[c];return Math.sqrt(A)});var Na,Fs=Aa;function Zl(){var A=new ko(3);return ko!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A}function EA(A,c,m){var B=new ko(3);return B[0]=A,B[1]=c,B[2]=m,B}function Cu(A,c,m){var B=c[0],D=c[1],O=c[2],H=c[3];return A[0]=m[0]*B+m[4]*D+m[8]*O+m[12]*H,A[1]=m[1]*B+m[5]*D+m[9]*O+m[13]*H,A[2]=m[2]*B+m[6]*D+m[10]*O+m[14]*H,A[3]=m[3]*B+m[7]*D+m[11]*O+m[15]*H,A}function yd(){var A=new ko(4);return ko!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A[3]=1,A}function Bu(A,c){const m=Cu([],[A.x,A.y,0,1],c);return new Gt(m[0]/m[3],m[1]/m[3])}Zl(),Na=new ko(4),ko!=Float32Array&&(Na[0]=0,Na[1]=0,Na[2]=0,Na[3]=0),Zl(),EA(1,0,0),EA(0,1,0),yd(),yd(),ts(),function(){var A;A=new ko(2),ko!=Float32Array&&(A[0]=0,A[1]=0)}();class Rh extends Yn{}Mi("HeatmapBucket",Rh,{omit:["layers"]});var Oh={paint:new Hi({"heatmap-radius":new Dt($t.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Dt($t.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new at($t.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ti($t.paint_heatmap["heatmap-color"]),"heatmap-opacity":new at($t.paint_heatmap["heatmap-opacity"])})};function wo(A,{width:c,height:m},B,D){if(D){if(D instanceof Uint8ClampedArray)D=new Uint8Array(D.buffer);else if(D.length!==c*m*B)throw new RangeError(`mismatched image size. expected: ${D.length} but got: ${c*m*B}`)}else D=new Uint8Array(c*m*B);return A.width=c,A.height=m,A.data=D,A}function Xd(A,{width:c,height:m},B){if(c===A.width&&m===A.height)return;const D=wo({},{width:c,height:m},B);SA(A,D,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,c),height:Math.min(A.height,m)},B),A.width=c,A.height=m,A.data=D.data}function SA(A,c,m,B,D,O){if(D.width===0||D.height===0)return c;if(D.width>A.width||D.height>A.height||m.x>A.width-D.width||m.y>A.height-D.height)throw new RangeError("out of range source coordinates for image copy");if(D.width>c.width||D.height>c.height||B.x>c.width-D.width||B.y>c.height-D.height)throw new RangeError("out of range destination coordinates for image copy");const H=A.data,Y=c.data;if(H===Y)throw new Error("srcData equals dstData, so image is already copied");for(let re=0;re<D.height;re++){const de=((m.y+re)*A.width+m.x)*O,be=((B.y+re)*c.width+B.x)*O;for(let Le=0;Le<D.width*O;Le++)Y[be+Le]=H[de+Le]}return c}class Jh{constructor(c,m){wo(this,c,1,m)}resize(c){Xd(this,c,1)}clone(){return new Jh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,m,B,D,O){SA(c,m,B,D,O,1)}}class ru{constructor(c,m){wo(this,c,4,m)}resize(c){Xd(this,c,4)}replace(c,m){m?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new ru({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,m,B,D,O){SA(c,m,B,D,O,4)}}function Q_(A){const c={},m=A.resolution||256,B=A.clips?A.clips.length:1,D=A.image||new ru({width:m,height:B});if(Math.log(m)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${m}`);const O=(H,Y,re)=>{c[A.evaluationKey]=re;const de=A.expression.evaluate(c);D.data[H+Y+0]=Math.floor(255*de.r/de.a),D.data[H+Y+1]=Math.floor(255*de.g/de.a),D.data[H+Y+2]=Math.floor(255*de.b/de.a),D.data[H+Y+3]=Math.floor(255*de.a)};if(A.clips)for(let H=0,Y=0;H<B;++H,Y+=4*m)for(let re=0,de=0;re<m;re++,de+=4){const be=re/(m-1),{start:Le,end:$e}=A.clips[H];O(Y,de,Le*(1-be)+$e*be)}else for(let H=0,Y=0;H<m;H++,Y+=4)O(0,Y,H/(m-1));return D}Mi("AlphaImage",Jh),Mi("RGBAImage",ru);var Jm={paint:new Hi({"hillshade-illumination-direction":new at($t.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new at($t.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new at($t.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new at($t.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new at($t.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new at($t.paint_hillshade["hillshade-accent-color"])})};const ou=Uo([{name:"a_pos",components:2,type:"Int16"}],4),{members:$_}=ou;var vd={exports:{}};function xd(A,c,m){m=m||2;var B,D,O,H,Y,re,de,be=c&&c.length,Le=be?c[0]*m:A.length,$e=Nh(A,0,Le,m,!0),Ge=[];if(!$e||$e.next===$e.prev)return Ge;if(be&&($e=function(St,wt,Yt,pn){var Zt,dn,Gn,Qn=[];for(Zt=0,dn=wt.length;Zt<dn;Zt++)(Gn=Nh(St,wt[Zt]*pn,Zt<dn-1?wt[Zt+1]*pn:St.length,pn,!1))===Gn.next&&(Gn.steiner=!0),Qn.push(Vu(Gn));for(Qn.sort(Qp),Zt=0;Zt<Qn.length;Zt++)Yt=IA(Qn[Zt],Yt);return Yt}(A,c,$e,m)),A.length>80*m){B=O=A[0],D=H=A[1];for(var Ze=m;Ze<Le;Ze+=m)(Y=A[Ze])<B&&(B=Y),(re=A[Ze+1])<D&&(D=re),Y>O&&(O=Y),re>H&&(H=re);de=(de=Math.max(O-B,H-D))!==0?32767/de:0}return ql($e,Ge,m,B,D,de,0),Ge}function Nh(A,c,m,B,D){var O,H;if(D===sa(A,c,m,B)>0)for(O=c;O<m;O+=B)H=Gu(O,A[O],A[O+1],H);else for(O=m-B;O>=c;O-=B)H=Gu(O,A[O],A[O+1],H);return H&&Kf(H,H.next)&&(ff(H),H=H.next),H}function Qh(A,c){if(!A)return A;c||(c=A);var m,B=A;do if(m=!1,B.steiner||!Kf(B,B.next)&&ns(B.prev,B,B.next)!==0)B=B.next;else{if(ff(B),(B=c=B.prev)===B.next)break;m=!0}while(m||B!==c);return c}function ql(A,c,m,B,D,O,H){if(A){!H&&O&&function(be,Le,$e,Ge){var Ze=be;do Ze.z===0&&(Ze.z=Hu(Ze.x,Ze.y,Le,$e,Ge)),Ze.prevZ=Ze.prev,Ze.nextZ=Ze.next,Ze=Ze.next;while(Ze!==be);Ze.prevZ.nextZ=null,Ze.prevZ=null,function(St){var wt,Yt,pn,Zt,dn,Gn,Qn,Ni,Vi=1;do{for(Yt=St,St=null,dn=null,Gn=0;Yt;){for(Gn++,pn=Yt,Qn=0,wt=0;wt<Vi&&(Qn++,pn=pn.nextZ);wt++);for(Ni=Vi;Qn>0||Ni>0&&pn;)Qn!==0&&(Ni===0||!pn||Yt.z<=pn.z)?(Zt=Yt,Yt=Yt.nextZ,Qn--):(Zt=pn,pn=pn.nextZ,Ni--),dn?dn.nextZ=Zt:St=Zt,Zt.prevZ=dn,dn=Zt;Yt=pn}dn.nextZ=null,Vi*=2}while(Gn>1)}(Ze)}(A,B,D,O);for(var Y,re,de=A;A.prev!==A.next;)if(Y=A.prev,re=A.next,O?eg(A,B,D,O):bd(A))c.push(Y.i/m|0),c.push(A.i/m|0),c.push(re.i/m|0),ff(A),A=re.next,de=re.next;else if((A=re)===de){H?H===1?ql(A=j_(Qh(A),c,m),c,m,B,D,O,2):H===2&&Np(A,c,m,B,D,O):ql(Qh(A),c,m,B,D,O,1);break}}}function bd(A){var c=A.prev,m=A,B=A.next;if(ns(c,m,B)>=0)return!1;for(var D=c.x,O=m.x,H=B.x,Y=c.y,re=m.y,de=B.y,be=D<O?D<H?D:H:O<H?O:H,Le=Y<re?Y<de?Y:de:re<de?re:de,$e=D>O?D>H?D:H:O>H?O:H,Ge=Y>re?Y>de?Y:de:re>de?re:de,Ze=B.next;Ze!==c;){if(Ze.x>=be&&Ze.x<=$e&&Ze.y>=Le&&Ze.y<=Ge&&dl(D,Y,O,re,H,de,Ze.x,Ze.y)&&ns(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.next}return!0}function eg(A,c,m,B){var D=A.prev,O=A,H=A.next;if(ns(D,O,H)>=0)return!1;for(var Y=D.x,re=O.x,de=H.x,be=D.y,Le=O.y,$e=H.y,Ge=Y<re?Y<de?Y:de:re<de?re:de,Ze=be<Le?be<$e?be:$e:Le<$e?Le:$e,St=Y>re?Y>de?Y:de:re>de?re:de,wt=be>Le?be>$e?be:$e:Le>$e?Le:$e,Yt=Hu(Ge,Ze,c,m,B),pn=Hu(St,wt,c,m,B),Zt=A.prevZ,dn=A.nextZ;Zt&&Zt.z>=Yt&&dn&&dn.z<=pn;){if(Zt.x>=Ge&&Zt.x<=St&&Zt.y>=Ze&&Zt.y<=wt&&Zt!==D&&Zt!==H&&dl(Y,be,re,Le,de,$e,Zt.x,Zt.y)&&ns(Zt.prev,Zt,Zt.next)>=0||(Zt=Zt.prevZ,dn.x>=Ge&&dn.x<=St&&dn.y>=Ze&&dn.y<=wt&&dn!==D&&dn!==H&&dl(Y,be,re,Le,de,$e,dn.x,dn.y)&&ns(dn.prev,dn,dn.next)>=0))return!1;dn=dn.nextZ}for(;Zt&&Zt.z>=Yt;){if(Zt.x>=Ge&&Zt.x<=St&&Zt.y>=Ze&&Zt.y<=wt&&Zt!==D&&Zt!==H&&dl(Y,be,re,Le,de,$e,Zt.x,Zt.y)&&ns(Zt.prev,Zt,Zt.next)>=0)return!1;Zt=Zt.prevZ}for(;dn&&dn.z<=pn;){if(dn.x>=Ge&&dn.x<=St&&dn.y>=Ze&&dn.y<=wt&&dn!==D&&dn!==H&&dl(Y,be,re,Le,de,$e,dn.x,dn.y)&&ns(dn.prev,dn,dn.next)>=0)return!1;dn=dn.nextZ}return!0}function j_(A,c,m){var B=A;do{var D=B.prev,O=B.next.next;!Kf(D,O)&&tg(D,B,B.next,O)&&Af(D,O)&&Af(O,D)&&(c.push(D.i/m|0),c.push(B.i/m|0),c.push(O.i/m|0),ff(B),ff(B.next),B=A=O),B=B.next}while(B!==A);return Qh(B)}function Np(A,c,m,B,D,O){var H=A;do{for(var Y=H.next.next;Y!==H.prev;){if(H.i!==Y.i&&Yd(H,Y)){var re=ng(H,Y);return H=Qh(H,H.next),re=Qh(re,re.next),ql(H,c,m,B,D,O,0),void ql(re,c,m,B,D,O,0)}Y=Y.next}H=H.next}while(H!==A)}function Qp(A,c){return A.x-c.x}function IA(A,c){var m=function(D,O){var H,Y=O,re=D.x,de=D.y,be=-1/0;do{if(de<=Y.y&&de>=Y.next.y&&Y.next.y!==Y.y){var Le=Y.x+(de-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(Le<=re&&Le>be&&(be=Le,H=Y.x<Y.next.x?Y:Y.next,Le===re))return H}Y=Y.next}while(Y!==O);if(!H)return null;var $e,Ge=H,Ze=H.x,St=H.y,wt=1/0;Y=H;do re>=Y.x&&Y.x>=Ze&&re!==Y.x&&dl(de<St?re:be,de,Ze,St,de<St?be:re,de,Y.x,Y.y)&&($e=Math.abs(de-Y.y)/(re-Y.x),Af(Y,D)&&($e<wt||$e===wt&&(Y.x>H.x||Y.x===H.x&&MA(H,Y)))&&(H=Y,wt=$e)),Y=Y.next;while(Y!==Ge);return H}(A,c);if(!m)return c;var B=ng(m,A);return Qh(B,B.next),Qh(m,m.next)}function MA(A,c){return ns(A.prev,A,c.prev)<0&&ns(c.next,A,A.next)<0}function Hu(A,c,m,B,D){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-m)*D|0)|A<<8))|A<<4))|A<<2))|A<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-B)*D|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function Vu(A){var c=A,m=A;do(c.x<m.x||c.x===m.x&&c.y<m.y)&&(m=c),c=c.next;while(c!==A);return m}function dl(A,c,m,B,D,O,H,Y){return(D-H)*(c-Y)>=(A-H)*(O-Y)&&(A-H)*(B-Y)>=(m-H)*(c-Y)&&(m-H)*(O-Y)>=(D-H)*(B-Y)}function Yd(A,c){return A.next.i!==c.i&&A.prev.i!==c.i&&!function(m,B){var D=m;do{if(D.i!==m.i&&D.next.i!==m.i&&D.i!==B.i&&D.next.i!==B.i&&tg(D,D.next,m,B))return!0;D=D.next}while(D!==m);return!1}(A,c)&&(Af(A,c)&&Af(c,A)&&function(m,B){var D=m,O=!1,H=(m.x+B.x)/2,Y=(m.y+B.y)/2;do D.y>Y!=D.next.y>Y&&D.next.y!==D.y&&H<(D.next.x-D.x)*(Y-D.y)/(D.next.y-D.y)+D.x&&(O=!O),D=D.next;while(D!==m);return O}(A,c)&&(ns(A.prev,A,c.prev)||ns(A,c.prev,c))||Kf(A,c)&&ns(A.prev,A,A.next)>0&&ns(c.prev,c,c.next)>0)}function ns(A,c,m){return(c.y-A.y)*(m.x-c.x)-(c.x-A.x)*(m.y-c.y)}function Kf(A,c){return A.x===c.x&&A.y===c.y}function tg(A,c,m,B){var D=$p(ns(A,c,m)),O=$p(ns(A,c,B)),H=$p(ns(m,B,A)),Y=$p(ns(m,B,c));return D!==O&&H!==Y||!(D!==0||!df(A,m,c))||!(O!==0||!df(A,B,c))||!(H!==0||!df(m,A,B))||!(Y!==0||!df(m,c,B))}function df(A,c,m){return c.x<=Math.max(A.x,m.x)&&c.x>=Math.min(A.x,m.x)&&c.y<=Math.max(A.y,m.y)&&c.y>=Math.min(A.y,m.y)}function $p(A){return A>0?1:A<0?-1:0}function Af(A,c){return ns(A.prev,A,A.next)<0?ns(A,c,A.next)>=0&&ns(A,A.prev,c)>=0:ns(A,c,A.prev)<0||ns(A,A.next,c)<0}function ng(A,c){var m=new ig(A.i,A.x,A.y),B=new ig(c.i,c.x,c.y),D=A.next,O=c.prev;return A.next=c,c.prev=A,m.next=D,D.prev=m,B.next=m,m.prev=B,O.next=B,B.prev=O,B}function Gu(A,c,m,B){var D=new ig(A,c,m);return B?(D.next=B.next,D.prev=B,B.next.prev=D,B.next=D):(D.prev=D,D.next=D),D}function ff(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function ig(A,c,m){this.i=A,this.x=c,this.y=m,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sa(A,c,m,B){for(var D=0,O=c,H=m-B;O<m;O+=B)D+=(A[H]-A[O])*(A[O+1]+A[H+1]),H=O;return D}function Ar(A,c,m,B,D){Qa(A,c,m||0,B||A.length-1,D||Tu)}function Qa(A,c,m,B,D){for(;B>m;){if(B-m>600){var O=B-m+1,H=c-m+1,Y=Math.log(O),re=.5*Math.exp(2*Y/3),de=.5*Math.sqrt(Y*re*(O-re)/O)*(H-O/2<0?-1:1);Qa(A,c,Math.max(m,Math.floor(c-H*re/O+de)),Math.min(B,Math.floor(c+(O-H)*re/O+de)),D)}var be=A[c],Le=m,$e=B;for(dc(A,m,c),D(A[B],be)>0&&dc(A,m,B);Le<$e;){for(dc(A,Le,$e),Le++,$e--;D(A[Le],be)<0;)Le++;for(;D(A[$e],be)>0;)$e--}D(A[m],be)===0?dc(A,m,$e):dc(A,++$e,B),$e<=c&&(m=$e+1),c<=$e&&(B=$e-1)}}function dc(A,c,m){var B=A[c];A[c]=A[m],A[m]=B}function Tu(A,c){return A<c?-1:A>c?1:0}function jp(A,c){const m=A.length;if(m<=1)return[A];const B=[];let D,O;for(let H=0;H<m;H++){const Y=nt(A[H]);Y!==0&&(A[H].area=Math.abs(Y),O===void 0&&(O=Y<0),O===Y<0?(D&&B.push(D),D=[A[H]]):D.push(A[H]))}if(D&&B.push(D),c>1)for(let H=0;H<B.length;H++)B[H].length<=c||(Ar(B[H],c,1,B[H].length-1,Zf),B[H]=B[H].slice(0,c));return B}function Zf(A,c){return c.area-A.area}function Xl(A,c,m){const B=m.patternDependencies;let D=!1;for(const O of c){const H=O.paint.get(`${A}-pattern`);H.isConstant()||(D=!0);const Y=H.constantOr(null);Y&&(D=!0,B[Y.to]=!0,B[Y.from]=!0)}return D}function pf(A,c,m,B,D){const O=D.patternDependencies;for(const H of c){const Y=H.paint.get(`${A}-pattern`).value;if(Y.kind!=="constant"){let re=Y.evaluate({zoom:B-1},m,{},D.availableImages),de=Y.evaluate({zoom:B},m,{},D.availableImages),be=Y.evaluate({zoom:B+1},m,{},D.availableImages);re=re&&re.name?re.name:re,de=de&&de.name?de.name:de,be=be&&be.name?be.name:be,O[re]=!0,O[de]=!0,O[be]=!0,m.patterns[H.id]={min:re,mid:de,max:be}}}return m}vd.exports=xd,vd.exports.default=xd,xd.deviation=function(A,c,m,B){var D=c&&c.length,O=Math.abs(sa(A,0,D?c[0]*m:A.length,m));if(D)for(var H=0,Y=c.length;H<Y;H++)O-=Math.abs(sa(A,c[H]*m,H<Y-1?c[H+1]*m:A.length,m));var re=0;for(H=0;H<B.length;H+=3){var de=B[H]*m,be=B[H+1]*m,Le=B[H+2]*m;re+=Math.abs((A[de]-A[Le])*(A[be+1]-A[de+1])-(A[de]-A[be])*(A[Le+1]-A[de+1]))}return O===0&&re===0?0:Math.abs((re-O)/O)},xd.flatten=function(A){for(var c=A[0][0].length,m={vertices:[],holes:[],dimensions:c},B=0,D=0;D<A.length;D++){for(var O=0;O<A[D].length;O++)for(var H=0;H<c;H++)m.vertices.push(A[D][O][H]);D>0&&m.holes.push(B+=A[D-1].length)}return m};class ed{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(m=>m.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qn,this.indexArray=new hl,this.indexArray2=new tu,this.programConfigurations=new Nt(c.layers,c.zoom),this.segments=new l,this.segments2=new l,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(c,m,B){this.hasPattern=Xl("fill",this.layers,m);const D=this.layers[0].layout.get("fill-sort-key"),O=!D.isConstant(),H=[];for(const{feature:Y,id:re,index:de,sourceLayerIndex:be}of c){const Le=this.layers[0]._featureFilter.needGeometry,$e=nn(Y,Le);if(!this.layers[0]._featureFilter.filter(new Oo(this.zoom),$e,B))continue;const Ge=O?D.evaluate($e,{},B,m.availableImages):void 0,Ze={id:re,properties:Y.properties,type:Y.type,sourceLayerIndex:be,index:de,geometry:Le?$e.geometry:Zn(Y),patterns:{},sortKey:Ge};H.push(Ze)}O&&H.sort((Y,re)=>Y.sortKey-re.sortKey);for(const Y of H){const{geometry:re,index:de,sourceLayerIndex:be}=Y;if(this.hasPattern){const Le=pf("fill",this.layers,Y,this.zoom,m);this.patternFeatures.push(Le)}else this.addFeature(Y,re,de,B,{});m.featureIndex.insert(c[de].feature,re,de,be,this.index)}}update(c,m,B){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,B)}addFeatures(c,m,B){for(const D of this.patternFeatures)this.addFeature(D,D.geometry,D.index,m,B)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,$_),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,m,B,D,O){for(const H of jp(m,500)){let Y=0;for(const Ge of H)Y+=Ge.length;const re=this.segments.prepareSegment(Y,this.layoutVertexArray,this.indexArray),de=re.vertexLength,be=[],Le=[];for(const Ge of H){if(Ge.length===0)continue;Ge!==H[0]&&Le.push(be.length/2);const Ze=this.segments2.prepareSegment(Ge.length,this.layoutVertexArray,this.indexArray2),St=Ze.vertexLength;this.layoutVertexArray.emplaceBack(Ge[0].x,Ge[0].y),this.indexArray2.emplaceBack(St+Ge.length-1,St),be.push(Ge[0].x),be.push(Ge[0].y);for(let wt=1;wt<Ge.length;wt++)this.layoutVertexArray.emplaceBack(Ge[wt].x,Ge[wt].y),this.indexArray2.emplaceBack(St+wt-1,St+wt),be.push(Ge[wt].x),be.push(Ge[wt].y);Ze.vertexLength+=Ge.length,Ze.primitiveLength+=Ge.length}const $e=vd.exports(be,Le);for(let Ge=0;Ge<$e.length;Ge+=3)this.indexArray.emplaceBack(de+$e[Ge],de+$e[Ge+1],de+$e[Ge+2]);re.vertexLength+=Y,re.primitiveLength+=$e.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,B,O,D)}}Mi("FillBucket",ed,{omit:["layers","patternFeatures"]});const qf=new Hi({"fill-sort-key":new Dt($t.layout_fill["fill-sort-key"])});var Jd={paint:new Hi({"fill-antialias":new at($t.paint_fill["fill-antialias"]),"fill-opacity":new Dt($t.paint_fill["fill-opacity"]),"fill-color":new Dt($t.paint_fill["fill-color"]),"fill-outline-color":new Dt($t.paint_fill["fill-outline-color"]),"fill-translate":new at($t.paint_fill["fill-translate"]),"fill-translate-anchor":new at($t.paint_fill["fill-translate-anchor"]),"fill-pattern":new _n($t.paint_fill["fill-pattern"])}),layout:qf};const eA=Uo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),tA=Uo([{name:"a_centroid",components:2,type:"Int16"}],4),{members:H_}=eA;var td={},V_=Gt,LA=nA;function nA(A,c,m,B,D){this.properties={},this.extent=m,this.type=0,this._pbf=A,this._geometry=-1,this._keys=B,this._values=D,A.readFields(iA,this,c)}function iA(A,c,m){A==1?c.id=m.readVarint():A==2?function(B,D){for(var O=B.readVarint()+B.pos;B.pos<O;){var H=D._keys[B.readVarint()],Y=D._values[B.readVarint()];D.properties[H]=Y}}(m,c):A==3?c.type=m.readVarint():A==4&&(c._geometry=m.pos)}function rA(A){for(var c,m,B=0,D=0,O=A.length,H=O-1;D<O;H=D++)B+=((m=A[H]).x-(c=A[D]).x)*(c.y+m.y);return B}nA.types=["Unknown","Point","LineString","Polygon"],nA.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var c,m=A.readVarint()+A.pos,B=1,D=0,O=0,H=0,Y=[];A.pos<m;){if(D<=0){var re=A.readVarint();B=7&re,D=re>>3}if(D--,B===1||B===2)O+=A.readSVarint(),H+=A.readSVarint(),B===1&&(c&&Y.push(c),c=[]),c.push(new V_(O,H));else{if(B!==7)throw new Error("unknown command "+B);c&&c.push(c[0].clone())}}return c&&Y.push(c),Y},nA.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var c=A.readVarint()+A.pos,m=1,B=0,D=0,O=0,H=1/0,Y=-1/0,re=1/0,de=-1/0;A.pos<c;){if(B<=0){var be=A.readVarint();m=7&be,B=be>>3}if(B--,m===1||m===2)(D+=A.readSVarint())<H&&(H=D),D>Y&&(Y=D),(O+=A.readSVarint())<re&&(re=O),O>de&&(de=O);else if(m!==7)throw new Error("unknown command "+m)}return[H,re,Y,de]},nA.prototype.toGeoJSON=function(A,c,m){var B,D,O=this.extent*Math.pow(2,m),H=this.extent*A,Y=this.extent*c,re=this.loadGeometry(),de=nA.types[this.type];function be(Ge){for(var Ze=0;Ze<Ge.length;Ze++){var St=Ge[Ze];Ge[Ze]=[360*(St.x+H)/O-180,360/Math.PI*Math.atan(Math.exp((180-360*(St.y+Y)/O)*Math.PI/180))-90]}}switch(this.type){case 1:var Le=[];for(B=0;B<re.length;B++)Le[B]=re[B][0];be(re=Le);break;case 2:for(B=0;B<re.length;B++)be(re[B]);break;case 3:for(re=function(Ge){var Ze=Ge.length;if(Ze<=1)return[Ge];for(var St,wt,Yt=[],pn=0;pn<Ze;pn++){var Zt=rA(Ge[pn]);Zt!==0&&(wt===void 0&&(wt=Zt<0),wt===Zt<0?(St&&Yt.push(St),St=[Ge[pn]]):St.push(Ge[pn]))}return St&&Yt.push(St),Yt}(re),B=0;B<re.length;B++)for(D=0;D<re[B].length;D++)be(re[B][D])}re.length===1?re=re[0]:de="Multi"+de;var $e={type:"Feature",geometry:{type:de,coordinates:re},properties:this.properties};return"id"in this&&($e.id=this.id),$e};var _h=LA,Hp=Vp;function Vp(A,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(oA,this,c),this.length=this._features.length}function oA(A,c,m){A===15?c.version=m.readVarint():A===1?c.name=m.readString():A===5?c.extent=m.readVarint():A===2?c._features.push(m.pos):A===3?c._keys.push(m.readString()):A===4&&c._values.push(function(B){for(var D=null,O=B.readVarint()+B.pos;B.pos<O;){var H=B.readVarint()>>3;D=H===1?B.readString():H===2?B.readFloat():H===3?B.readDouble():H===4?B.readVarint64():H===5?B.readVarint():H===6?B.readSVarint():H===7?B.readBoolean():null}return D}(m))}Vp.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var c=this._pbf.readVarint()+this._pbf.pos;return new _h(this._pbf,c,this.extent,this._keys,this._values)};var mf=Hp;function su(A,c,m){if(A===3){var B=new mf(m,m.readVarint()+m.pos);B.length&&(c[B.name]=B)}}td.VectorTile=function(A,c){this.layers=A.readFields(su,{},c)},td.VectorTileFeature=LA,td.VectorTileLayer=Hp;const Xf=td.VectorTileFeature.types,El=Math.pow(2,13);function wa(A,c,m,B,D,O,H,Y){A.emplaceBack(c,m,2*Math.floor(B*El)+H,D*El*2,O*El*2,Math.round(Y))}class gf{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(m=>m.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new Po,this.centroidVertexArray=new or,this.indexArray=new hl,this.programConfigurations=new Nt(c.layers,c.zoom),this.segments=new l,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(c,m,B){this.features=[],this.hasPattern=Xl("fill-extrusion",this.layers,m);for(const{feature:D,id:O,index:H,sourceLayerIndex:Y}of c){const re=this.layers[0]._featureFilter.needGeometry,de=nn(D,re);if(!this.layers[0]._featureFilter.filter(new Oo(this.zoom),de,B))continue;const be={id:O,sourceLayerIndex:Y,index:H,geometry:re?de.geometry:Zn(D),properties:D.properties,type:D.type,patterns:{}};this.hasPattern?this.features.push(pf("fill-extrusion",this.layers,be,this.zoom,m)):this.addFeature(be,be.geometry,H,B,{}),m.featureIndex.insert(D,be.geometry,H,Y,this.index,!0)}}addFeatures(c,m,B){for(const D of this.features){const{geometry:O}=D;this.addFeature(D,O,D.index,m,B)}}update(c,m,B){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,B)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,H_),this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,tA.members,!0),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(c,m,B,D,O){const H={x:0,y:0,vertexCount:0};for(const Y of jp(m,500)){let re=0;for(const Ze of Y)re+=Ze.length;let de=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ze of Y){if(Ze.length===0||G_(Ze))continue;let St=0;for(let wt=0;wt<Ze.length;wt++){const Yt=Ze[wt];if(wt>=1){const pn=Ze[wt-1];if(!fa(Yt,pn)){de.vertexLength+4>l.MAX_VERTEX_ARRAY_LENGTH&&(de=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Zt=Yt.sub(pn)._perp()._unit(),dn=pn.dist(Yt);St+dn>32768&&(St=0),wa(this.layoutVertexArray,Yt.x,Yt.y,Zt.x,Zt.y,0,0,St),wa(this.layoutVertexArray,Yt.x,Yt.y,Zt.x,Zt.y,0,1,St),H.x+=2*Yt.x,H.y+=2*Yt.y,H.vertexCount+=2,St+=dn,wa(this.layoutVertexArray,pn.x,pn.y,Zt.x,Zt.y,0,0,St),wa(this.layoutVertexArray,pn.x,pn.y,Zt.x,Zt.y,0,1,St),H.x+=2*pn.x,H.y+=2*pn.y,H.vertexCount+=2;const Gn=de.vertexLength;this.indexArray.emplaceBack(Gn,Gn+2,Gn+1),this.indexArray.emplaceBack(Gn+1,Gn+2,Gn+3),de.vertexLength+=4,de.primitiveLength+=2}}}}if(de.vertexLength+re>l.MAX_VERTEX_ARRAY_LENGTH&&(de=this.segments.prepareSegment(re,this.layoutVertexArray,this.indexArray)),Xf[c.type]!=="Polygon")continue;const be=[],Le=[],$e=de.vertexLength;for(const Ze of Y)if(Ze.length!==0){Ze!==Y[0]&&Le.push(be.length/2);for(let St=0;St<Ze.length;St++){const wt=Ze[St];wa(this.layoutVertexArray,wt.x,wt.y,0,0,1,1,0),H.x+=wt.x,H.y+=wt.y,H.vertexCount+=1,be.push(wt.x),be.push(wt.y)}}const Ge=vd.exports(be,Le);for(let Ze=0;Ze<Ge.length;Ze+=3)this.indexArray.emplaceBack($e+Ge[Ze],$e+Ge[Ze+2],$e+Ge[Ze+1]);de.primitiveLength+=Ge.length/3,de.vertexLength+=re}for(let Y=0;Y<H.vertexCount;Y++)this.centroidVertexArray.emplaceBack(Math.floor(H.x/H.vertexCount),Math.floor(H.y/H.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,B,O,D)}}function fa(A,c){return A.x===c.x&&(A.x<0||A.x>Vt)||A.y===c.y&&(A.y<0||A.y>Vt)}function G_(A){return A.every(c=>c.x<0)||A.every(c=>c.x>Vt)||A.every(c=>c.y<0)||A.every(c=>c.y>Vt)}Mi("FillExtrusionBucket",gf,{omit:["layers","features"]});var _f={paint:new Hi({"fill-extrusion-opacity":new at($t["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Dt($t["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new at($t["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new at($t["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _n($t["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Dt($t["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Dt($t["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new at($t["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function au(A,c){return A.x*c.x+A.y*c.y}function W_(A,c){if(A.length===1){let m=0;const B=c[m++];let D;for(;!D||B.equals(D);)if(D=c[m++],!D)return 1/0;for(;m<c.length;m++){const O=c[m],H=A[0],Y=D.sub(B),re=O.sub(B),de=H.sub(B),be=au(Y,Y),Le=au(Y,re),$e=au(re,re),Ge=au(de,Y),Ze=au(de,re),St=be*$e-Le*Le,wt=($e*Ge-Le*Ze)/St,Yt=(be*Ze-Le*Ge)/St,pn=B.z*(1-wt-Yt)+D.z*wt+O.z*Yt;if(isFinite(pn))return pn}return 1/0}{let m=1/0;for(const B of c)m=Math.min(m,B.z);return m}}const wd=Uo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Gp}=wd,Wp=Uo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Cd}=Wp,Yf=td.VectorTileFeature.types,kA=Math.cos(Math.PI/180*37.5),Qr=Math.pow(2,14)/.5;class PA{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(m=>m.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(m=>{this.gradients[m.id]={}}),this.layoutVertexArray=new Xr,this.layoutVertexArray2=new os,this.indexArray=new hl,this.programConfigurations=new Nt(c.layers,c.zoom),this.segments=new l,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(c,m,B){this.hasPattern=Xl("line",this.layers,m);const D=this.layers[0].layout.get("line-sort-key"),O=!D.isConstant(),H=[];for(const{feature:Y,id:re,index:de,sourceLayerIndex:be}of c){const Le=this.layers[0]._featureFilter.needGeometry,$e=nn(Y,Le);if(!this.layers[0]._featureFilter.filter(new Oo(this.zoom),$e,B))continue;const Ge=O?D.evaluate($e,{},B):void 0,Ze={id:re,properties:Y.properties,type:Y.type,sourceLayerIndex:be,index:de,geometry:Le?$e.geometry:Zn(Y),patterns:{},sortKey:Ge};H.push(Ze)}O&&H.sort((Y,re)=>Y.sortKey-re.sortKey);for(const Y of H){const{geometry:re,index:de,sourceLayerIndex:be}=Y;if(this.hasPattern){const Le=pf("line",this.layers,Y,this.zoom,m);this.patternFeatures.push(Le)}else this.addFeature(Y,re,de,B,{});m.featureIndex.insert(c[de].feature,re,de,be,this.index)}}update(c,m,B){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,B)}addFeatures(c,m,B){for(const D of this.patternFeatures)this.addFeature(D,D.geometry,D.index,m,B)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,Cd)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Gp),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,m,B,D,O){const H=this.layers[0].layout,Y=H.get("line-join").evaluate(c,{}),re=H.get("line-cap"),de=H.get("line-miter-limit"),be=H.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const Le of m)this.addLine(Le,c,Y,re,de,be);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,B,O,D)}addLine(c,m,B,D,O,H){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Yt=0;Yt<c.length-1;Yt++)this.totalDistance+=c[Yt].dist(c[Yt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Y=Yf[m.type]==="Polygon";let re=c.length;for(;re>=2&&c[re-1].equals(c[re-2]);)re--;let de=0;for(;de<re-1&&c[de].equals(c[de+1]);)de++;if(re<(Y?3:2))return;B==="bevel"&&(O=1.05);const be=this.overscaling<=16?122880/(512*this.overscaling):0,Le=this.segments.prepareSegment(10*re,this.layoutVertexArray,this.indexArray);let $e,Ge,Ze,St,wt;this.e1=this.e2=-1,Y&&($e=c[re-2],wt=c[de].sub($e)._unit()._perp());for(let Yt=de;Yt<re;Yt++){if(Ze=Yt===re-1?Y?c[de+1]:void 0:c[Yt+1],Ze&&c[Yt].equals(Ze))continue;wt&&(St=wt),$e&&(Ge=$e),$e=c[Yt],wt=Ze?Ze.sub($e)._unit()._perp():St,St=St||wt;let pn=St.add(wt);pn.x===0&&pn.y===0||pn._unit();const Zt=St.x*wt.x+St.y*wt.y,dn=pn.x*wt.x+pn.y*wt.y,Gn=dn!==0?1/dn:1/0,Qn=2*Math.sqrt(2-2*dn),Ni=dn<kA&&Ge&&Ze,Vi=St.x*wt.y-St.y*wt.x>0;if(Ni&&Yt>de){const _i=$e.dist(Ge);if(_i>2*be){const Ei=$e.sub($e.sub(Ge)._mult(be/_i)._round());this.updateDistance(Ge,Ei),this.addCurrentVertex(Ei,St,0,0,Le),Ge=Ei}}const Li=Ge&&Ze;let Ci=Li?B:Y?"butt":D;if(Li&&Ci==="round"&&(Gn<H?Ci="miter":Gn<=2&&(Ci="fakeround")),Ci==="miter"&&Gn>O&&(Ci="bevel"),Ci==="bevel"&&(Gn>2&&(Ci="flipbevel"),Gn<O&&(Ci="miter")),Ge&&this.updateDistance(Ge,$e),Ci==="miter")pn._mult(Gn),this.addCurrentVertex($e,pn,0,0,Le);else if(Ci==="flipbevel"){if(Gn>100)pn=wt.mult(-1);else{const _i=Gn*St.add(wt).mag()/St.sub(wt).mag();pn._perp()._mult(_i*(Vi?-1:1))}this.addCurrentVertex($e,pn,0,0,Le),this.addCurrentVertex($e,pn.mult(-1),0,0,Le)}else if(Ci==="bevel"||Ci==="fakeround"){const _i=-Math.sqrt(Gn*Gn-1),Ei=Vi?_i:0,Ii=Vi?0:_i;if(Ge&&this.addCurrentVertex($e,St,Ei,Ii,Le),Ci==="fakeround"){const ci=Math.round(180*Qn/Math.PI/20);for(let dr=1;dr<ci;dr++){let Ji=dr/ci;if(Ji!==.5){const ys=Ji-.5;Ji+=Ji*ys*(Ji-1)*((1.0904+Zt*(Zt*(3.55645-1.43519*Zt)-3.2452))*ys*ys+(.848013+Zt*(.215638*Zt-1.06021)))}const Co=wt.sub(St)._mult(Ji)._add(St)._unit()._mult(Vi?-1:1);this.addHalfVertex($e,Co.x,Co.y,!1,Vi,0,Le)}}Ze&&this.addCurrentVertex($e,wt,-Ei,-Ii,Le)}else if(Ci==="butt")this.addCurrentVertex($e,pn,0,0,Le);else if(Ci==="square"){const _i=Ge?1:-1;this.addCurrentVertex($e,pn,_i,_i,Le)}else Ci==="round"&&(Ge&&(this.addCurrentVertex($e,St,0,0,Le),this.addCurrentVertex($e,St,1,1,Le,!0)),Ze&&(this.addCurrentVertex($e,wt,-1,-1,Le,!0),this.addCurrentVertex($e,wt,0,0,Le)));if(Ni&&Yt<re-1){const _i=$e.dist(Ze);if(_i>2*be){const Ei=$e.add(Ze.sub($e)._mult(be/_i)._round());this.updateDistance($e,Ei),this.addCurrentVertex(Ei,wt,0,0,Le),$e=Ei}}}}addCurrentVertex(c,m,B,D,O,H=!1){const Y=m.y*D-m.x,re=-m.y-m.x*D;this.addHalfVertex(c,m.x+m.y*B,m.y-m.x*B,H,!1,B,O),this.addHalfVertex(c,Y,re,H,!0,-D,O),this.distance>Qr/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(c,m,B,D,O,H))}addHalfVertex({x:c,y:m},B,D,O,H,Y,re){const de=.5*(this.lineClips?this.scaledDistance*(Qr-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c<<1)+(O?1:0),(m<<1)+(H?1:0),Math.round(63*B)+128,Math.round(63*D)+128,1+(Y===0?0:Y<0?-1:1)|(63&de)<<2,de>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const be=re.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,be),re.primitiveLength++),H?this.e2=be:this.e1=be}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(c,m){this.distance+=c.dist(m),this.updateScaledDistance()}}Mi("LineBucket",PA,{omit:["layers","patternFeatures"]});const rg=new Hi({"line-cap":new at($t.layout_line["line-cap"]),"line-join":new Dt($t.layout_line["line-join"]),"line-miter-limit":new at($t.layout_line["line-miter-limit"]),"line-round-limit":new at($t.layout_line["line-round-limit"]),"line-sort-key":new Dt($t.layout_line["line-sort-key"])});var sA={paint:new Hi({"line-opacity":new Dt($t.paint_line["line-opacity"]),"line-color":new Dt($t.paint_line["line-color"]),"line-translate":new at($t.paint_line["line-translate"]),"line-translate-anchor":new at($t.paint_line["line-translate-anchor"]),"line-width":new Dt($t.paint_line["line-width"]),"line-gap-width":new Dt($t.paint_line["line-gap-width"]),"line-offset":new Dt($t.paint_line["line-offset"]),"line-blur":new Dt($t.paint_line["line-blur"]),"line-dasharray":new ni($t.paint_line["line-dasharray"]),"line-pattern":new _n($t.paint_line["line-pattern"]),"line-gradient":new Ti($t.paint_line["line-gradient"])}),layout:rg};const og=new class extends Dt{possiblyEvaluate(A,c){return c=new Oo(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(A,c)}evaluate(A,c,m,B){return c=he({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(A,c,m,B)}}(sA.paint.properties["line-width"].specification);function Jf(A,c){return c>0?c+2*A:A}og.useIntegerZoom=!0;const yf=Uo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Yl=Uo([{name:"a_projected_pos",components:3,type:"Float32"}],4);Uo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const sg=Uo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Uo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Kp=Uo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ac=Uo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ag(A,c,m){return A.sections.forEach(B=>{B.text=function(D,O,H){const Y=O.layout.get("text-transform").evaluate(H,{});return Y==="uppercase"?D=D.toLocaleUpperCase():Y==="lowercase"&&(D=D.toLocaleLowerCase()),ul.applyArabicShaping&&(D=ul.applyArabicShaping(D)),D}(B.text,c,m)}),A}Uo([{name:"triangle",components:3,type:"Uint16"}]),Uo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Uo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Uo([{type:"Float32",name:"offsetX"}]),Uo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const FA={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Ns=24,lg=Pr,aA=function(A,c,m,B,D){var O,H,Y=8*D-B-1,re=(1<<Y)-1,de=re>>1,be=-7,Le=m?D-1:0,$e=m?-1:1,Ge=A[c+Le];for(Le+=$e,O=Ge&(1<<-be)-1,Ge>>=-be,be+=Y;be>0;O=256*O+A[c+Le],Le+=$e,be-=8);for(H=O&(1<<-be)-1,O>>=-be,be+=B;be>0;H=256*H+A[c+Le],Le+=$e,be-=8);if(O===0)O=1-de;else{if(O===re)return H?NaN:1/0*(Ge?-1:1);H+=Math.pow(2,B),O-=de}return(Ge?-1:1)*H*Math.pow(2,O-B)},Eu=function(A,c,m,B,D,O){var H,Y,re,de=8*O-D-1,be=(1<<de)-1,Le=be>>1,$e=D===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ge=B?0:O-1,Ze=B?1:-1,St=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(Y=isNaN(c)?1:0,H=be):(H=Math.floor(Math.log(c)/Math.LN2),c*(re=Math.pow(2,-H))<1&&(H--,re*=2),(c+=H+Le>=1?$e/re:$e*Math.pow(2,1-Le))*re>=2&&(H++,re/=2),H+Le>=be?(Y=0,H=be):H+Le>=1?(Y=(c*re-1)*Math.pow(2,D),H+=Le):(Y=c*Math.pow(2,Le-1)*Math.pow(2,D),H=0));D>=8;A[m+Ge]=255&Y,Ge+=Ze,Y/=256,D-=8);for(H=H<<D|Y,de+=D;de>0;A[m+Ge]=255&H,Ge+=Ze,H/=256,de-=8);A[m+Ge-Ze]|=128*St};function Pr(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}Pr.Varint=0,Pr.Fixed64=1,Pr.Bytes=2,Pr.Fixed32=5;var Xa,cg=4294967296,DA=1/cg,ug=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Bd(A){return A.type===Pr.Bytes?A.readVarint()+A.pos:A.pos+1}function yh(A,c,m){return m?4294967296*c+(A>>>0):4294967296*(c>>>0)+(A>>>0)}function vh(A,c,m){var B=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));m.realloc(B);for(var D=m.pos-1;D>=A;D--)m.buf[D+B]=m.buf[D]}function lA(A,c){for(var m=0;m<A.length;m++)c.writeVarint(A[m])}function K_(A,c){for(var m=0;m<A.length;m++)c.writeSVarint(A[m])}function Z_(A,c){for(var m=0;m<A.length;m++)c.writeFloat(A[m])}function Zv(A,c){for(var m=0;m<A.length;m++)c.writeDouble(A[m])}function Zp(A,c){for(var m=0;m<A.length;m++)c.writeBoolean(A[m])}function qp(A,c){for(var m=0;m<A.length;m++)c.writeFixed32(A[m])}function UA(A,c){for(var m=0;m<A.length;m++)c.writeSFixed32(A[m])}function vf(A,c){for(var m=0;m<A.length;m++)c.writeFixed64(A[m])}function zA(A,c){for(var m=0;m<A.length;m++)c.writeSFixed64(A[m])}function cA(A,c){return(A[c]|A[c+1]<<8|A[c+2]<<16)+16777216*A[c+3]}function $h(A,c,m){A[m]=c,A[m+1]=c>>>8,A[m+2]=c>>>16,A[m+3]=c>>>24}function uA(A,c){return(A[c]|A[c+1]<<8|A[c+2]<<16)+(A[c+3]<<24)}function Xp(A,c,m){A===1&&m.readMessage(hg,c)}function hg(A,c,m){if(A===3){const{id:B,bitmap:D,width:O,height:H,left:Y,top:re,advance:de}=m.readMessage(Td,{});c.push({id:B,bitmap:new Jh({width:O+6,height:H+6},D),metrics:{width:O,height:H,left:Y,top:re,advance:de}})}}function Td(A,c,m){A===1?c.id=m.readVarint():A===2?c.bitmap=m.readBytes():A===3?c.width=m.readVarint():A===4?c.height=m.readVarint():A===5?c.left=m.readSVarint():A===6?c.top=m.readSVarint():A===7&&(c.advance=m.readVarint())}function Yp(A){let c=0,m=0;for(const H of A)c+=H.w*H.h,m=Math.max(m,H.w);A.sort((H,Y)=>Y.h-H.h);const B=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),m),h:1/0}];let D=0,O=0;for(const H of A)for(let Y=B.length-1;Y>=0;Y--){const re=B[Y];if(!(H.w>re.w||H.h>re.h)){if(H.x=re.x,H.y=re.y,O=Math.max(O,H.y+H.h),D=Math.max(D,H.x+H.w),H.w===re.w&&H.h===re.h){const de=B.pop();Y<B.length&&(B[Y]=de)}else H.h===re.h?(re.x+=H.w,re.w-=H.w):H.w===re.w?(re.y+=H.h,re.h-=H.h):(B.push({x:re.x+H.w,y:re.y,w:re.w-H.w,h:H.h}),re.y+=H.h,re.h-=H.h);break}}return{w:D,h:O,fill:c/(D*O)||0}}Pr.prototype={destroy:function(){this.buf=null},readFields:function(A,c,m){for(m=m||this.length;this.pos<m;){var B=this.readVarint(),D=B>>3,O=this.pos;this.type=7&B,A(D,c,this),this.pos===O&&this.skip(B)}return c},readMessage:function(A,c){return this.readFields(A,c,this.readVarint()+this.pos)},readFixed32:function(){var A=cA(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=uA(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=cA(this.buf,this.pos)+cA(this.buf,this.pos+4)*cg;return this.pos+=8,A},readSFixed64:function(){var A=cA(this.buf,this.pos)+uA(this.buf,this.pos+4)*cg;return this.pos+=8,A},readFloat:function(){var A=aA(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=aA(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var c,m,B=this.buf;return c=127&(m=B[this.pos++]),m<128?c:(c|=(127&(m=B[this.pos++]))<<7,m<128?c:(c|=(127&(m=B[this.pos++]))<<14,m<128?c:(c|=(127&(m=B[this.pos++]))<<21,m<128?c:function(D,O,H){var Y,re,de=H.buf;if(Y=(112&(re=de[H.pos++]))>>4,re<128||(Y|=(127&(re=de[H.pos++]))<<3,re<128)||(Y|=(127&(re=de[H.pos++]))<<10,re<128)||(Y|=(127&(re=de[H.pos++]))<<17,re<128)||(Y|=(127&(re=de[H.pos++]))<<24,re<128)||(Y|=(1&(re=de[H.pos++]))<<31,re<128))return yh(D,Y,O);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(m=B[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,c=this.pos;return this.pos=A,A-c>=12&&ug?function(m,B,D){return ug.decode(m.subarray(B,D))}(this.buf,c,A):function(m,B,D){for(var O="",H=B;H<D;){var Y,re,de,be=m[H],Le=null,$e=be>239?4:be>223?3:be>191?2:1;if(H+$e>D)break;$e===1?be<128&&(Le=be):$e===2?(192&(Y=m[H+1]))==128&&(Le=(31&be)<<6|63&Y)<=127&&(Le=null):$e===3?(re=m[H+2],(192&(Y=m[H+1]))==128&&(192&re)==128&&((Le=(15&be)<<12|(63&Y)<<6|63&re)<=2047||Le>=55296&&Le<=57343)&&(Le=null)):$e===4&&(re=m[H+2],de=m[H+3],(192&(Y=m[H+1]))==128&&(192&re)==128&&(192&de)==128&&((Le=(15&be)<<18|(63&Y)<<12|(63&re)<<6|63&de)<=65535||Le>=1114112)&&(Le=null)),Le===null?(Le=65533,$e=1):Le>65535&&(Le-=65536,O+=String.fromCharCode(Le>>>10&1023|55296),Le=56320|1023&Le),O+=String.fromCharCode(Le),H+=$e}return O}(this.buf,c,A)},readBytes:function(){var A=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,A);return this.pos=A,c},readPackedVarint:function(A,c){if(this.type!==Pr.Bytes)return A.push(this.readVarint(c));var m=Bd(this);for(A=A||[];this.pos<m;)A.push(this.readVarint(c));return A},readPackedSVarint:function(A){if(this.type!==Pr.Bytes)return A.push(this.readSVarint());var c=Bd(this);for(A=A||[];this.pos<c;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==Pr.Bytes)return A.push(this.readBoolean());var c=Bd(this);for(A=A||[];this.pos<c;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==Pr.Bytes)return A.push(this.readFloat());var c=Bd(this);for(A=A||[];this.pos<c;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==Pr.Bytes)return A.push(this.readDouble());var c=Bd(this);for(A=A||[];this.pos<c;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==Pr.Bytes)return A.push(this.readFixed32());var c=Bd(this);for(A=A||[];this.pos<c;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==Pr.Bytes)return A.push(this.readSFixed32());var c=Bd(this);for(A=A||[];this.pos<c;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==Pr.Bytes)return A.push(this.readFixed64());var c=Bd(this);for(A=A||[];this.pos<c;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==Pr.Bytes)return A.push(this.readSFixed64());var c=Bd(this);for(A=A||[];this.pos<c;)A.push(this.readSFixed64());return A},skip:function(A){var c=7&A;if(c===Pr.Varint)for(;this.buf[this.pos++]>127;);else if(c===Pr.Bytes)this.pos=this.readVarint()+this.pos;else if(c===Pr.Fixed32)this.pos+=4;else{if(c!==Pr.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(A,c){this.writeVarint(A<<3|c)},realloc:function(A){for(var c=this.length||16;c<this.pos+A;)c*=2;if(c!==this.length){var m=new Uint8Array(c);m.set(this.buf),this.buf=m,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),$h(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),$h(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),$h(this.buf,-1&A,this.pos),$h(this.buf,Math.floor(A*DA),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),$h(this.buf,-1&A,this.pos),$h(this.buf,Math.floor(A*DA),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(c,m){var B,D;if(c>=0?(B=c%4294967296|0,D=c/4294967296|0):(D=~(-c/4294967296),4294967295^(B=~(-c%4294967296))?B=B+1|0:(B=0,D=D+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),function(O,H,Y){Y.buf[Y.pos++]=127&O|128,O>>>=7,Y.buf[Y.pos++]=127&O|128,O>>>=7,Y.buf[Y.pos++]=127&O|128,O>>>=7,Y.buf[Y.pos++]=127&O|128,Y.buf[Y.pos]=127&(O>>>=7)}(B,0,m),function(O,H){var Y=(7&O)<<4;H.buf[H.pos++]|=Y|((O>>>=3)?128:0),O&&(H.buf[H.pos++]=127&O|((O>>>=7)?128:0),O&&(H.buf[H.pos++]=127&O|((O>>>=7)?128:0),O&&(H.buf[H.pos++]=127&O|((O>>>=7)?128:0),O&&(H.buf[H.pos++]=127&O|((O>>>=7)?128:0),O&&(H.buf[H.pos++]=127&O)))))}(D,m)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var c=this.pos;this.pos=function(B,D,O){for(var H,Y,re=0;re<D.length;re++){if((H=D.charCodeAt(re))>55295&&H<57344){if(!Y){H>56319||re+1===D.length?(B[O++]=239,B[O++]=191,B[O++]=189):Y=H;continue}if(H<56320){B[O++]=239,B[O++]=191,B[O++]=189,Y=H;continue}H=Y-55296<<10|H-56320|65536,Y=null}else Y&&(B[O++]=239,B[O++]=191,B[O++]=189,Y=null);H<128?B[O++]=H:(H<2048?B[O++]=H>>6|192:(H<65536?B[O++]=H>>12|224:(B[O++]=H>>18|240,B[O++]=H>>12&63|128),B[O++]=H>>6&63|128),B[O++]=63&H|128)}return O}(this.buf,A,this.pos);var m=this.pos-c;m>=128&&vh(c,m,this),this.pos=c-1,this.writeVarint(m),this.pos+=m},writeFloat:function(A){this.realloc(4),Eu(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),Eu(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var c=A.length;this.writeVarint(c),this.realloc(c);for(var m=0;m<c;m++)this.buf[this.pos++]=A[m]},writeRawMessage:function(A,c){this.pos++;var m=this.pos;A(c,this);var B=this.pos-m;B>=128&&vh(m,B,this),this.pos=m-1,this.writeVarint(B),this.pos+=B},writeMessage:function(A,c,m){this.writeTag(A,Pr.Bytes),this.writeRawMessage(c,m)},writePackedVarint:function(A,c){c.length&&this.writeMessage(A,lA,c)},writePackedSVarint:function(A,c){c.length&&this.writeMessage(A,K_,c)},writePackedBoolean:function(A,c){c.length&&this.writeMessage(A,Zp,c)},writePackedFloat:function(A,c){c.length&&this.writeMessage(A,Z_,c)},writePackedDouble:function(A,c){c.length&&this.writeMessage(A,Zv,c)},writePackedFixed32:function(A,c){c.length&&this.writeMessage(A,qp,c)},writePackedSFixed32:function(A,c){c.length&&this.writeMessage(A,UA,c)},writePackedFixed64:function(A,c){c.length&&this.writeMessage(A,vf,c)},writePackedSFixed64:function(A,c){c.length&&this.writeMessage(A,zA,c)},writeBytesField:function(A,c){this.writeTag(A,Pr.Bytes),this.writeBytes(c)},writeFixed32Field:function(A,c){this.writeTag(A,Pr.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(A,c){this.writeTag(A,Pr.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(A,c){this.writeTag(A,Pr.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(A,c){this.writeTag(A,Pr.Fixed64),this.writeSFixed64(c)},writeVarintField:function(A,c){this.writeTag(A,Pr.Varint),this.writeVarint(c)},writeSVarintField:function(A,c){this.writeTag(A,Pr.Varint),this.writeSVarint(c)},writeStringField:function(A,c){this.writeTag(A,Pr.Bytes),this.writeString(c)},writeFloatField:function(A,c){this.writeTag(A,Pr.Fixed32),this.writeFloat(c)},writeDoubleField:function(A,c){this.writeTag(A,Pr.Fixed64),this.writeDouble(c)},writeBooleanField:function(A,c){this.writeVarintField(A,!!c)}};class Su{constructor(c,{pixelRatio:m,version:B,stretchX:D,stretchY:O,content:H}){this.paddedRect=c,this.pixelRatio=m,this.stretchX=D,this.stretchY=O,this.content=H,this.version=B}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Ed{constructor(c,m){const B={},D={};this.haveRenderCallbacks=[];const O=[];this.addImages(c,B,O),this.addImages(m,D,O);const{w:H,h:Y}=Yp(O),re=new ru({width:H||1,height:Y||1});for(const de in c){const be=c[de],Le=B[de].paddedRect;ru.copy(be.data,re,{x:0,y:0},{x:Le.x+1,y:Le.y+1},be.data)}for(const de in m){const be=m[de],Le=D[de].paddedRect,$e=Le.x+1,Ge=Le.y+1,Ze=be.data.width,St=be.data.height;ru.copy(be.data,re,{x:0,y:0},{x:$e,y:Ge},be.data),ru.copy(be.data,re,{x:0,y:St-1},{x:$e,y:Ge-1},{width:Ze,height:1}),ru.copy(be.data,re,{x:0,y:0},{x:$e,y:Ge+St},{width:Ze,height:1}),ru.copy(be.data,re,{x:Ze-1,y:0},{x:$e-1,y:Ge},{width:1,height:St}),ru.copy(be.data,re,{x:0,y:0},{x:$e+Ze,y:Ge},{width:1,height:St})}this.image=re,this.iconPositions=B,this.patternPositions=D}addImages(c,m,B){for(const D in c){const O=c[D],H={x:0,y:0,w:O.data.width+2,h:O.data.height+2};B.push(H),m[D]=new Su(H,O),O.hasRenderCallback&&this.haveRenderCallbacks.push(D)}}patchUpdatedImages(c,m){c.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const B in c.updatedImages)this.patchUpdatedImage(this.iconPositions[B],c.getImage(B),m),this.patchUpdatedImage(this.patternPositions[B],c.getImage(B),m)}patchUpdatedImage(c,m,B){if(!c||!m||c.version===m.version)return;c.version=m.version;const[D,O]=c.tl;B.update(m.data,void 0,{x:D,y:O})}}Mi("ImagePosition",Su),Mi("ImageAtlas",Ed),h.WritingMode=void 0,(Xa=h.WritingMode||(h.WritingMode={}))[Xa.none=0]="none",Xa[Xa.horizontal=1]="horizontal",Xa[Xa.vertical=2]="vertical",Xa[Xa.horizontalOnly=3]="horizontalOnly";const Jp=-17;class xf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,m){const B=new xf;return B.scale=c||1,B.fontStack=m,B}static forImage(c){const m=new xf;return m.imageName=c,m}}class nd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,m){const B=new nd;for(let D=0;D<c.sections.length;D++){const O=c.sections[D];O.image?B.addImageSection(O):B.addTextSection(O,m)}return B}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSectionIndex(c){return this.sectionIndex[c]}getCharCode(c){return this.text.charCodeAt(c)}verticalizePunctuation(){this.text=function(c){let m="";for(let B=0;B<c.length;B++){const D=c.charCodeAt(B+1)||null,O=c.charCodeAt(B-1)||null;m+=D&&Ka(D)&&!FA[c[B+1]]||O&&Ka(O)&&!FA[c[B-1]]||!FA[c[B]]?c[B]:FA[c[B]]}return m}(this.text)}trim(){let c=0;for(let B=0;B<this.text.length&&jh[this.text.charCodeAt(B)];B++)c++;let m=this.text.length;for(let B=this.text.length-1;B>=0&&B>=c&&jh[this.text.charCodeAt(B)];B--)m--;this.text=this.text.substring(c,m),this.sectionIndex=this.sectionIndex.slice(c,m)}substring(c,m){const B=new nd;return B.text=this.text.substring(c,m),B.sectionIndex=this.sectionIndex.slice(c,m),B.sections=this.sections,B}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((c,m)=>Math.max(c,this.sections[m].scale),0)}addTextSection(c,m){this.text+=c.text,this.sections.push(xf.forText(c.scale,c.fontStack||m));const B=this.sections.length-1;for(let D=0;D<c.text.length;++D)this.sectionIndex.push(B)}addImageSection(c){const m=c.image?c.image.name:"";if(m.length===0)return void Fe("Can't add FormattedSection with an empty image.");const B=this.getNextImageSectionCharCode();B?(this.text+=String.fromCharCode(B),this.sections.push(xf.forImage(m)),this.sectionIndex.push(this.sections.length-1)):Fe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ep(A,c,m,B,D,O,H,Y,re,de,be,Le,$e,Ge,Ze,St){const wt=nd.fromFeature(A,D);let Yt;Le===h.WritingMode.vertical&&wt.verticalizePunctuation();const{processBidirectionalText:pn,processStyledBidirectionalText:Zt}=ul;if(pn&&wt.sections.length===1){Yt=[];const Qn=pn(wt.toString(),Al(wt,de,O,c,B,Ge,Ze));for(const Ni of Qn){const Vi=new nd;Vi.text=Ni,Vi.sections=wt.sections;for(let Li=0;Li<Ni.length;Li++)Vi.sectionIndex.push(0);Yt.push(Vi)}}else if(Zt){Yt=[];const Qn=Zt(wt.text,wt.sectionIndex,Al(wt,de,O,c,B,Ge,Ze));for(const Ni of Qn){const Vi=new nd;Vi.text=Ni[0],Vi.sectionIndex=Ni[1],Vi.sections=wt.sections,Yt.push(Vi)}}else Yt=function(Qn,Ni){const Vi=[],Li=Qn.text;let Ci=0;for(const _i of Ni)Vi.push(Qn.substring(Ci,_i)),Ci=_i;return Ci<Li.length&&Vi.push(Qn.substring(Ci,Li.length)),Vi}(wt,Al(wt,de,O,c,B,Ge,Ze));const dn=[],Gn={positionedLines:dn,text:wt.toString(),top:be[1],bottom:be[1],left:be[0],right:be[0],writingMode:Le,iconsInText:!1,verticalizable:!1};return function(Qn,Ni,Vi,Li,Ci,_i,Ei,Ii,ci,dr,Ji,Co){let ys=0,Qs=Jp,Ya=0,Mu=0;const Il=Ii==="right"?1:Ii==="left"?0:.5;let Ma=0;for(const $a of Ci){$a.trim();const pa=$a.getMaxScale(),wr=(pa-1)*Ns,pc={positionedGlyphs:[],lineOffset:0};Qn.positionedLines[Ma]=pc;const Fo=pc.positionedGlyphs;let Qo=0;if(!$a.length()){Qs+=_i,++Ma;continue}for(let Bs=0;Bs<$a.length();Bs++){const Do=$a.getSection(Bs),cu=$a.getSectionIndex(Bs),Jl=$a.getCharCode(Bs);let mc=0,Ch=null,Ku=null,Wh=null,gc=Ns;const Pc=!(ci===h.WritingMode.horizontal||!Ji&&!qc(Jl)||Ji&&(jh[Jl]||(Ja=Jl,wi.Arabic(Ja)||wi["Arabic Supplement"](Ja)||wi["Arabic Extended-A"](Ja)||wi["Arabic Presentation Forms-A"](Ja)||wi["Arabic Presentation Forms-B"](Ja))));if(Do.imageName){const Fc=Li[Do.imageName];if(!Fc)continue;Wh=Do.imageName,Qn.iconsInText=Qn.iconsInText||!0,Ku=Fc.paddedRect;const Go=Fc.displaySize;Do.scale=Do.scale*Ns/Co,Ch={width:Go[0],height:Go[1],left:1,top:-3,advance:Pc?Go[1]:Go[0]},mc=wr+(Ns-Go[1]*Do.scale),gc=Ch.advance;const Ts=Pc?Go[0]*Do.scale-Ns*pa:Go[1]*Do.scale-Ns*pa;Ts>0&&Ts>Qo&&(Qo=Ts)}else{const Fc=Vi[Do.fontStack],Go=Fc&&Fc[Jl];if(Go&&Go.rect)Ku=Go.rect,Ch=Go.metrics;else{const Ts=Ni[Do.fontStack],$A=Ts&&Ts[Jl];if(!$A)continue;Ch=$A.metrics}mc=(pa-Do.scale)*Ns}Pc?(Qn.verticalizable=!0,Fo.push({glyph:Jl,imageName:Wh,x:ys,y:Qs+mc,vertical:Pc,scale:Do.scale,fontStack:Do.fontStack,sectionIndex:cu,metrics:Ch,rect:Ku}),ys+=gc*Do.scale+dr):(Fo.push({glyph:Jl,imageName:Wh,x:ys,y:Qs+mc,vertical:Pc,scale:Do.scale,fontStack:Do.fontStack,sectionIndex:cu,metrics:Ch,rect:Ku}),ys+=Ch.advance*Do.scale+dr)}Fo.length!==0&&(Ya=Math.max(ys-dr,Ya),Sl(Fo,0,Fo.length-1,Il,Qo)),ys=0;const Cs=_i*pa+Qo;pc.lineOffset=Math.max(Qo,wr),Qs+=Cs,Mu=Math.max(Cs,Mu),++Ma}var Ja;const Ml=Qs-Jp,{horizontalAlign:$s,verticalAlign:lu}=tm(Ei);(function($a,pa,wr,pc,Fo,Qo,Cs,Bs,Do){const cu=(pa-wr)*Fo;let Jl=0;Jl=Qo!==Cs?-Bs*pc-Jp:(-pc*Do+.5)*Cs;for(const mc of $a)for(const Ch of mc.positionedGlyphs)Ch.x+=cu,Ch.y+=Jl})(Qn.positionedLines,Il,$s,lu,Ya,Mu,_i,Ml,Ci.length),Qn.top+=-lu*Ml,Qn.bottom=Qn.top+Ml,Qn.left+=-$s*Ya,Qn.right=Qn.left+Ya}(Gn,c,m,B,Yt,H,Y,re,Le,de,$e,St),!function(Qn){for(const Ni of Qn)if(Ni.positionedGlyphs.length!==0)return!1;return!0}(dn)&&Gn}const jh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_s={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function em(A,c,m,B,D,O){if(c.imageName){const H=B[c.imageName];return H?H.displaySize[0]*c.scale*Ns/O+D:0}{const H=m[c.fontStack],Y=H&&H[A];return Y?Y.metrics.advance*c.scale+D:0}}function Hh(A,c,m,B){const D=Math.pow(A-c,2);return B?A<c?D/2:2*D:D+Math.abs(m)*m}function id(A,c,m){let B=0;return A===10&&(B-=1e4),m&&(B+=150),A!==40&&A!==65288||(B+=50),c!==41&&c!==65289||(B+=50),B}function xh(A,c,m,B,D,O){let H=null,Y=Hh(c,m,D,O);for(const re of B){const de=Hh(c-re.x,m,D,O)+re.badness;de<=Y&&(H=re,Y=de)}return{index:A,x:c,priorBreak:H,badness:Y}}function Iu(A){return A?Iu(A.priorBreak).concat(A.index):[]}function Al(A,c,m,B,D,O,H){if(O!=="point")return[];if(!A)return[];const Y=[],re=function($e,Ge,Ze,St,wt,Yt){let pn=0;for(let Zt=0;Zt<$e.length();Zt++){const dn=$e.getSection(Zt);pn+=em($e.getCharCode(Zt),dn,St,wt,Ge,Yt)}return pn/Math.max(1,Math.ceil(pn/Ze))}(A,c,m,B,D,H),de=A.text.indexOf("​")>=0;let be=0;for(let $e=0;$e<A.length();$e++){const Ge=A.getSection($e),Ze=A.getCharCode($e);if(jh[Ze]||(be+=em(Ze,Ge,B,D,c,H)),$e<A.length()-1){const St=!((Le=Ze)<11904||!(wi["Bopomofo Extended"](Le)||wi.Bopomofo(Le)||wi["CJK Compatibility Forms"](Le)||wi["CJK Compatibility Ideographs"](Le)||wi["CJK Compatibility"](Le)||wi["CJK Radicals Supplement"](Le)||wi["CJK Strokes"](Le)||wi["CJK Symbols and Punctuation"](Le)||wi["CJK Unified Ideographs Extension A"](Le)||wi["CJK Unified Ideographs"](Le)||wi["Enclosed CJK Letters and Months"](Le)||wi["Halfwidth and Fullwidth Forms"](Le)||wi.Hiragana(Le)||wi["Ideographic Description Characters"](Le)||wi["Kangxi Radicals"](Le)||wi["Katakana Phonetic Extensions"](Le)||wi.Katakana(Le)||wi["Vertical Forms"](Le)||wi["Yi Radicals"](Le)||wi["Yi Syllables"](Le)));(_s[Ze]||St||Ge.imageName)&&Y.push(xh($e+1,be,re,Y,id(Ze,A.getCharCode($e+1),St&&de),!1))}}var Le;return Iu(xh(A.length(),be,re,Y,0,!0))}function tm(A){let c=.5,m=.5;switch(A){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":m=1;break;case"top":case"top-right":case"top-left":m=0}return{horizontalAlign:c,verticalAlign:m}}function Sl(A,c,m,B,D){if(!B&&!D)return;const O=A[m],H=(A[m].x+O.metrics.advance*O.scale)*B;for(let Y=c;Y<=m;Y++)A[Y].x-=H,A[Y].y+=D}function dg(A,c,m){const{horizontalAlign:B,verticalAlign:D}=tm(m),O=c[0]-A.displaySize[0]*B,H=c[1]-A.displaySize[1]*D;return{image:A,top:H,bottom:H+A.displaySize[1],left:O,right:O+A.displaySize[0]}}function hA(A,c,m,B,D,O){const H=A.image;let Y;if(H.content){const wt=H.content,Yt=H.pixelRatio||1;Y=[wt[0]/Yt,wt[1]/Yt,H.displaySize[0]-wt[2]/Yt,H.displaySize[1]-wt[3]/Yt]}const re=c.left*O,de=c.right*O;let be,Le,$e,Ge;m==="width"||m==="both"?(Ge=D[0]+re-B[3],Le=D[0]+de+B[1]):(Ge=D[0]+(re+de-H.displaySize[0])/2,Le=Ge+H.displaySize[0]);const Ze=c.top*O,St=c.bottom*O;return m==="height"||m==="both"?(be=D[1]+Ze-B[0],$e=D[1]+St+B[2]):(be=D[1]+(Ze+St-H.displaySize[1])/2,$e=be+H.displaySize[1]),{image:H,top:be,right:Le,bottom:$e,left:Ge,collisionPadding:Y}}const Vh=128;function Ag(A,c){const{expression:m}=c;if(m.kind==="constant")return{kind:"constant",layoutSize:m.evaluate(new Oo(A+1))};if(m.kind==="source")return{kind:"source"};{const{zoomStops:B,interpolationType:D}=m;let O=0;for(;O<B.length&&B[O]<=A;)O++;O=Math.max(0,O-1);let H=O;for(;H<B.length&&B[H]<A+1;)H++;H=Math.min(B.length-1,H);const Y=B[O],re=B[H];return m.kind==="composite"?{kind:"composite",minZoom:Y,maxZoom:re,interpolationType:D}:{kind:"camera",minZoom:Y,maxZoom:re,minSize:m.evaluate(new Oo(Y)),maxSize:m.evaluate(new Oo(re)),interpolationType:D}}}class rd extends Gt{constructor(c,m,B,D){super(c,m),this.angle=B,D!==void 0&&(this.segment=D)}clone(){return new rd(this.x,this.y,this.angle,this.segment)}}function fg(A,c,m,B,D){if(c.segment===void 0)return!0;let O=c,H=c.segment+1,Y=0;for(;Y>-m/2;){if(H--,H<0)return!1;Y-=A[H].dist(O),O=A[H]}Y+=A[H].dist(A[H+1]),H++;const re=[];let de=0;for(;Y<m/2;){const be=A[H],Le=A[H+1];if(!Le)return!1;let $e=A[H-1].angleTo(be)-be.angleTo(Le);for($e=Math.abs(($e+3*Math.PI)%(2*Math.PI)-Math.PI),re.push({distance:Y,angleDelta:$e}),de+=$e;Y-re[0].distance>B;)de-=re.shift().angleDelta;if(de>D)return!1;H++,Y+=be.dist(Le)}return!0}function nm(A){let c=0;for(let m=0;m<A.length-1;m++)c+=A[m].dist(A[m+1]);return c}function pg(A,c,m){return A?.6*c*m:0}function q_(A,c){return Math.max(A?A.right-A.left:0,c?c.right-c.left:0)}function Sd(A,c,m,B,D,O){const H=pg(m,D,O),Y=q_(m,B)*O;let re=0;const de=nm(A)/2;for(let be=0;be<A.length-1;be++){const Le=A[be],$e=A[be+1],Ge=Le.dist($e);if(re+Ge>de){const Ze=(de-re)/Ge,St=Jo(Le.x,$e.x,Ze),wt=Jo(Le.y,$e.y,Ze),Yt=new rd(St,wt,$e.angleTo(Le),be);return Yt._round(),!H||fg(A,Yt,Y,H,c)?Yt:void 0}re+=Ge}}function RA(A,c,m,B,D,O,H,Y,re){const de=pg(B,O,H),be=q_(B,D),Le=be*H,$e=A[0].x===0||A[0].x===re||A[0].y===0||A[0].y===re;return c-Le<c/4&&(c=Le+c/4),tp(A,$e?c/2*Y%c:(be/2+2*O)*H*Y%c,c,de,m,Le,$e,!1,re)}function tp(A,c,m,B,D,O,H,Y,re){const de=O/2,be=nm(A);let Le=0,$e=c-m,Ge=[];for(let Ze=0;Ze<A.length-1;Ze++){const St=A[Ze],wt=A[Ze+1],Yt=St.dist(wt),pn=wt.angleTo(St);for(;$e+m<Le+Yt;){$e+=m;const Zt=($e-Le)/Yt,dn=Jo(St.x,wt.x,Zt),Gn=Jo(St.y,wt.y,Zt);if(dn>=0&&dn<re&&Gn>=0&&Gn<re&&$e-de>=0&&$e+de<=be){const Qn=new rd(dn,Gn,pn,Ze);Qn._round(),B&&!fg(A,Qn,O,B,D)||Ge.push(Qn)}}Le+=Yt}return Y||Ge.length||H||(Ge=tp(A,Le/2,m,B,D,O,H,!0,re)),Ge}function kc(A,c,m,B,D){const O=[];for(let H=0;H<A.length;H++){const Y=A[H];let re;for(let de=0;de<Y.length-1;de++){let be=Y[de],Le=Y[de+1];be.x<c&&Le.x<c||(be.x<c?be=new Gt(c,be.y+(c-be.x)/(Le.x-be.x)*(Le.y-be.y))._round():Le.x<c&&(Le=new Gt(c,be.y+(c-be.x)/(Le.x-be.x)*(Le.y-be.y))._round()),be.y<m&&Le.y<m||(be.y<m?be=new Gt(be.x+(m-be.y)/(Le.y-be.y)*(Le.x-be.x),m)._round():Le.y<m&&(Le=new Gt(be.x+(m-be.y)/(Le.y-be.y)*(Le.x-be.x),m)._round()),be.x>=B&&Le.x>=B||(be.x>=B?be=new Gt(B,be.y+(B-be.x)/(Le.x-be.x)*(Le.y-be.y))._round():Le.x>=B&&(Le=new Gt(B,be.y+(B-be.x)/(Le.x-be.x)*(Le.y-be.y))._round()),be.y>=D&&Le.y>=D||(be.y>=D?be=new Gt(be.x+(D-be.y)/(Le.y-be.y)*(Le.x-be.x),D)._round():Le.y>=D&&(Le=new Gt(be.x+(D-be.y)/(Le.y-be.y)*(Le.x-be.x),D)._round()),re&&be.equals(re[re.length-1])||(re=[be],O.push(re)),re.push(Le)))))}}return O}function im(A,c,m,B){const D=[],O=A.image,H=O.pixelRatio,Y=O.paddedRect.w-2,re=O.paddedRect.h-2,de=A.right-A.left,be=A.bottom-A.top,Le=O.stretchX||[[0,Y]],$e=O.stretchY||[[0,re]],Ge=(_i,Ei)=>_i+Ei[1]-Ei[0],Ze=Le.reduce(Ge,0),St=$e.reduce(Ge,0),wt=Y-Ze,Yt=re-St;let pn=0,Zt=Ze,dn=0,Gn=St,Qn=0,Ni=wt,Vi=0,Li=Yt;if(O.content&&B){const _i=O.content;pn=np(Le,0,_i[0]),dn=np($e,0,_i[1]),Zt=np(Le,_i[0],_i[2]),Gn=np($e,_i[1],_i[3]),Qn=_i[0]-pn,Vi=_i[1]-dn,Ni=_i[2]-_i[0]-Zt,Li=_i[3]-_i[1]-Gn}const Ci=(_i,Ei,Ii,ci)=>{const dr=bf(_i.stretch-pn,Zt,de,A.left),Ji=rm(_i.fixed-Qn,Ni,_i.stretch,Ze),Co=bf(Ei.stretch-dn,Gn,be,A.top),ys=rm(Ei.fixed-Vi,Li,Ei.stretch,St),Qs=bf(Ii.stretch-pn,Zt,de,A.left),Ya=rm(Ii.fixed-Qn,Ni,Ii.stretch,Ze),Mu=bf(ci.stretch-dn,Gn,be,A.top),Il=rm(ci.fixed-Vi,Li,ci.stretch,St),Ma=new Gt(dr,Co),Ja=new Gt(Qs,Co),Ml=new Gt(Qs,Mu),$s=new Gt(dr,Mu),lu=new Gt(Ji/H,ys/H),$a=new Gt(Ya/H,Il/H),pa=c*Math.PI/180;if(pa){const Fo=Math.sin(pa),Qo=Math.cos(pa),Cs=[Qo,-Fo,Fo,Qo];Ma._matMult(Cs),Ja._matMult(Cs),$s._matMult(Cs),Ml._matMult(Cs)}const wr=_i.stretch+_i.fixed,pc=Ei.stretch+Ei.fixed;return{tl:Ma,tr:Ja,bl:$s,br:Ml,tex:{x:O.paddedRect.x+1+wr,y:O.paddedRect.y+1+pc,w:Ii.stretch+Ii.fixed-wr,h:ci.stretch+ci.fixed-pc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:lu,pixelOffsetBR:$a,minFontScaleX:Ni/H/de,minFontScaleY:Li/H/be,isSDF:m}};if(B&&(O.stretchX||O.stretchY)){const _i=X_(Le,wt,Ze),Ei=X_($e,Yt,St);for(let Ii=0;Ii<_i.length-1;Ii++){const ci=_i[Ii],dr=_i[Ii+1];for(let Ji=0;Ji<Ei.length-1;Ji++)D.push(Ci(ci,Ei[Ji],dr,Ei[Ji+1]))}}else D.push(Ci({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Y+1},{fixed:0,stretch:re+1}));return D}function np(A,c,m){let B=0;for(const D of A)B+=Math.max(c,Math.min(m,D[1]))-Math.max(c,Math.min(m,D[0]));return B}function X_(A,c,m){const B=[{fixed:-1,stretch:0}];for(const[D,O]of A){const H=B[B.length-1];B.push({fixed:D-H.stretch,stretch:H.stretch}),B.push({fixed:D-H.stretch,stretch:H.stretch+(O-D)})}return B.push({fixed:c+1,stretch:m}),B}function bf(A,c,m,B){return A/c*m+B}function rm(A,c,m,B){return A-c*m/B}Mi("Anchor",rd);class wf{constructor(c,m,B,D,O,H,Y,re,de,be){if(this.boxStartIndex=c.length,de){let Le=H.top,$e=H.bottom;const Ge=H.collisionPadding;Ge&&(Le-=Ge[1],$e+=Ge[3]);let Ze=$e-Le;Ze>0&&(Ze=Math.max(10,Ze),this.circleDiameter=Ze)}else{let Le=H.top*Y-re[0],$e=H.bottom*Y+re[2],Ge=H.left*Y-re[3],Ze=H.right*Y+re[1];const St=H.collisionPadding;if(St&&(Ge-=St[0]*Y,Le-=St[1]*Y,Ze+=St[2]*Y,$e+=St[3]*Y),be){const wt=new Gt(Ge,Le),Yt=new Gt(Ze,Le),pn=new Gt(Ge,$e),Zt=new Gt(Ze,$e),dn=be*Math.PI/180;wt._rotate(dn),Yt._rotate(dn),pn._rotate(dn),Zt._rotate(dn),Ge=Math.min(wt.x,Yt.x,pn.x,Zt.x),Ze=Math.max(wt.x,Yt.x,pn.x,Zt.x),Le=Math.min(wt.y,Yt.y,pn.y,Zt.y),$e=Math.max(wt.y,Yt.y,pn.y,Zt.y)}c.emplaceBack(m.x,m.y,Ge,Le,Ze,$e,B,D,O)}this.boxEndIndex=c.length}}class qv{constructor(c=[],m=mg){if(this.data=c,this.length=this.data.length,this.compare=m,this.length>0)for(let B=(this.length>>1)-1;B>=0;B--)this._down(B)}push(c){this.data.push(c),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const c=this.data[0],m=this.data.pop();return this.length--,this.length>0&&(this.data[0]=m,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:m,compare:B}=this,D=m[c];for(;c>0;){const O=c-1>>1,H=m[O];if(B(D,H)>=0)break;m[c]=H,c=O}m[c]=D}_down(c){const{data:m,compare:B}=this,D=this.length>>1,O=m[c];for(;c<D;){let H=1+(c<<1),Y=m[H];const re=H+1;if(re<this.length&&B(m[re],Y)<0&&(H=re,Y=m[re]),B(Y,O)>=0)break;m[c]=Y,c=H}m[c]=O}}function mg(A,c){return A<c?-1:A>c?1:0}function om(A,c=1,m=!1){let B=1/0,D=1/0,O=-1/0,H=-1/0;const Y=A[0];for(let Ge=0;Ge<Y.length;Ge++){const Ze=Y[Ge];(!Ge||Ze.x<B)&&(B=Ze.x),(!Ge||Ze.y<D)&&(D=Ze.y),(!Ge||Ze.x>O)&&(O=Ze.x),(!Ge||Ze.y>H)&&(H=Ze.y)}const re=Math.min(O-B,H-D);let de=re/2;const be=new qv([],Y_);if(re===0)return new Gt(B,D);for(let Ge=B;Ge<O;Ge+=re)for(let Ze=D;Ze<H;Ze+=re)be.push(new bh(Ge+de,Ze+de,de,A));let Le=function(Ge){let Ze=0,St=0,wt=0;const Yt=Ge[0];for(let pn=0,Zt=Yt.length,dn=Zt-1;pn<Zt;dn=pn++){const Gn=Yt[pn],Qn=Yt[dn],Ni=Gn.x*Qn.y-Qn.x*Gn.y;St+=(Gn.x+Qn.x)*Ni,wt+=(Gn.y+Qn.y)*Ni,Ze+=3*Ni}return new bh(St/Ze,wt/Ze,0,Ge)}(A),$e=be.length;for(;be.length;){const Ge=be.pop();(Ge.d>Le.d||!Le.d)&&(Le=Ge,m&&console.log("found best %d after %d probes",Math.round(1e4*Ge.d)/1e4,$e)),Ge.max-Le.d<=c||(de=Ge.h/2,be.push(new bh(Ge.p.x-de,Ge.p.y-de,de,A)),be.push(new bh(Ge.p.x+de,Ge.p.y-de,de,A)),be.push(new bh(Ge.p.x-de,Ge.p.y+de,de,A)),be.push(new bh(Ge.p.x+de,Ge.p.y+de,de,A)),$e+=4)}return m&&(console.log(`num probes: ${$e}`),console.log(`best distance: ${Le.d}`)),Le.p}function Y_(A,c){return c.max-A.max}function bh(A,c,m,B){this.p=new Gt(A,c),this.h=m,this.d=function(D,O){let H=!1,Y=1/0;for(let re=0;re<O.length;re++){const de=O[re];for(let be=0,Le=de.length,$e=Le-1;be<Le;$e=be++){const Ge=de[be],Ze=de[$e];Ge.y>D.y!=Ze.y>D.y&&D.x<(Ze.x-Ge.x)*(D.y-Ge.y)/(Ze.y-Ge.y)+Ge.x&&(H=!H),Y=Math.min(Y,co(D,Ge,Ze))}}return(H?1:-1)*Math.sqrt(Y)}(this.p,B),this.max=this.d+this.h*Math.SQRT2}const sm=Number.POSITIVE_INFINITY;function J_(A,c){return c[1]!==sm?function(m,B,D){let O=0,H=0;switch(B=Math.abs(B),D=Math.abs(D),m){case"top-right":case"top-left":case"top":H=D-7;break;case"bottom-right":case"bottom-left":case"bottom":H=7-D}switch(m){case"top-right":case"bottom-right":case"right":O=-B;break;case"top-left":case"bottom-left":case"left":O=B}return[O,H]}(A,c[0],c[1]):function(m,B){let D=0,O=0;B<0&&(B=0);const H=B/Math.sqrt(2);switch(m){case"top-right":case"top-left":O=H-7;break;case"bottom-right":case"bottom-left":O=7-H;break;case"bottom":O=7-B;break;case"top":O=B-7}switch(m){case"top-right":case"bottom-right":D=-H;break;case"top-left":case"bottom-left":D=H;break;case"left":D=B;break;case"right":D=-B}return[D,O]}(A,c[0])}function dA(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function am(A,c,m,B,D,O,H,Y,re,de,be){let Le=O.textMaxSize.evaluate(c,{});Le===void 0&&(Le=H);const $e=A.layers[0].layout,Ge=$e.get("icon-offset").evaluate(c,{},be),Ze=ey(m.horizontal),St=H/24,wt=A.tilePixelRatio*St,Yt=A.tilePixelRatio*Le/24,pn=A.tilePixelRatio*Y,Zt=A.tilePixelRatio*$e.get("symbol-spacing"),dn=$e.get("text-padding")*A.tilePixelRatio,Gn=function(ci,dr,Ji,Co=1){const ys=ci.get("icon-padding").evaluate(dr,{},Ji),Qs=ys&&ys.values;return[Qs[0]*Co,Qs[1]*Co,Qs[2]*Co,Qs[3]*Co]}($e,c,be,A.tilePixelRatio),Qn=$e.get("text-max-angle")/180*Math.PI,Ni=$e.get("text-rotation-alignment")!=="viewport"&&$e.get("symbol-placement")!=="point",Vi=$e.get("icon-rotation-alignment")==="map"&&$e.get("symbol-placement")!=="point",Li=$e.get("symbol-placement"),Ci=Zt/2,_i=$e.get("icon-text-fit");let Ei;B&&_i!=="none"&&(A.allowVerticalPlacement&&m.vertical&&(Ei=hA(B,m.vertical,_i,$e.get("icon-text-fit-padding"),Ge,St)),Ze&&(B=hA(B,Ze,_i,$e.get("icon-text-fit-padding"),Ge,St)));const Ii=(ci,dr)=>{dr.x<0||dr.x>=Vt||dr.y<0||dr.y>=Vt||function(Ji,Co,ys,Qs,Ya,Mu,Il,Ma,Ja,Ml,$s,lu,$a,pa,wr,pc,Fo,Qo,Cs,Bs,Do,cu,Jl,mc,Ch){const Ku=Ji.addToLineVertexArray(Co,ys);let Wh,gc,Pc,Fc,Go=0,Ts=0,$A=0,sy=0,Eg=-1,Sg=-1;const Md={};let ay=k.exports(""),Am=0,fm=0;if(Ma._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Am,fm]=Ma.layout.get("text-offset").evaluate(Do,{},mc).map(_c=>_c*Ns):(Am=Ma.layout.get("text-radial-offset").evaluate(Do,{},mc)*Ns,fm=sm),Ji.allowVerticalPlacement&&Qs.vertical){const _c=Ma.layout.get("text-rotate").evaluate(Do,{},mc)+90;Pc=new wf(Ja,Co,Ml,$s,lu,Qs.vertical,$a,pa,wr,_c),Il&&(Fc=new wf(Ja,Co,Ml,$s,lu,Il,Fo,Qo,wr,_c))}if(Ya){const _c=Ma.layout.get("icon-rotate").evaluate(Do,{}),uo=Ma.layout.get("icon-text-fit")!=="none",go=im(Ya,_c,Jl,uo),jA=Il?im(Il,_c,Jl,uo):void 0;gc=new wf(Ja,Co,Ml,$s,lu,Ya,Fo,Qo,!1,_c),Go=4*go.length;const Lu=Ji.iconSizeData;let Dc=null;Lu.kind==="source"?(Dc=[Vh*Ma.layout.get("icon-size").evaluate(Do,{})],Dc[0]>Id&&Fe(`${Ji.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Lu.kind==="composite"&&(Dc=[Vh*cu.compositeIconSizes[0].evaluate(Do,{},mc),Vh*cu.compositeIconSizes[1].evaluate(Do,{},mc)],(Dc[0]>Id||Dc[1]>Id)&&Fe(`${Ji.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ji.addSymbols(Ji.icon,go,Dc,Bs,Cs,Do,h.WritingMode.none,Co,Ku.lineStartIndex,Ku.lineLength,-1,mc),Eg=Ji.icon.placedSymbolArray.length-1,jA&&(Ts=4*jA.length,Ji.addSymbols(Ji.icon,jA,Dc,Bs,Cs,Do,h.WritingMode.vertical,Co,Ku.lineStartIndex,Ku.lineLength,-1,mc),Sg=Ji.icon.placedSymbolArray.length-1)}const Ca=Object.keys(Qs.horizontal);for(const _c of Ca){const uo=Qs.horizontal[_c];if(!Wh){ay=k.exports(uo.text);const jA=Ma.layout.get("text-rotate").evaluate(Do,{},mc);Wh=new wf(Ja,Co,Ml,$s,lu,uo,$a,pa,wr,jA)}const go=uo.positionedLines.length===1;if($A+=gg(Ji,Co,uo,Mu,Ma,wr,Do,pc,Ku,Qs.vertical?h.WritingMode.horizontal:h.WritingMode.horizontalOnly,go?Ca:[_c],Md,Eg,cu,mc),go)break}Qs.vertical&&(sy+=gg(Ji,Co,Qs.vertical,Mu,Ma,wr,Do,pc,Ku,h.WritingMode.vertical,["vertical"],Md,Sg,cu,mc));const Zu=Wh?Wh.boxStartIndex:Ji.collisionBoxArray.length,Ig=Wh?Wh.boxEndIndex:Ji.collisionBoxArray.length,hp=Pc?Pc.boxStartIndex:Ji.collisionBoxArray.length,Ld=Pc?Pc.boxEndIndex:Ji.collisionBoxArray.length,qu=gc?gc.boxStartIndex:Ji.collisionBoxArray.length,Tf=gc?gc.boxEndIndex:Ji.collisionBoxArray.length,dp=Fc?Fc.boxStartIndex:Ji.collisionBoxArray.length,r0=Fc?Fc.boxEndIndex:Ji.collisionBoxArray.length;let Kh=-1;const Ap=(_c,uo)=>_c&&_c.circleDiameter?Math.max(_c.circleDiameter,uo):uo;Kh=Ap(Wh,Kh),Kh=Ap(Pc,Kh),Kh=Ap(gc,Kh),Kh=Ap(Fc,Kh);const Mg=Kh>-1?1:0;Mg&&(Kh*=Ch/Ns),Ji.glyphOffsetArray.length>=OA.MAX_GLYPHS&&Fe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Do.sortKey!==void 0&&Ji.addToSortKeyRanges(Ji.symbolInstances.length,Do.sortKey),Ji.symbolInstances.emplaceBack(Co.x,Co.y,Md.right>=0?Md.right:-1,Md.center>=0?Md.center:-1,Md.left>=0?Md.left:-1,Md.vertical||-1,Eg,Sg,ay,Zu,Ig,hp,Ld,qu,Tf,dp,r0,Ml,$A,sy,Go,Ts,Mg,0,$a,Am,fm,Kh)}(A,dr,ci,m,B,D,Ei,A.layers[0],A.collisionBoxArray,c.index,c.sourceLayerIndex,A.index,wt,[dn,dn,dn,dn],Ni,re,pn,Gn,Vi,Ge,c,O,de,be,H)};if(Li==="line")for(const ci of kc(c.geometry,0,0,Vt,Vt)){const dr=RA(ci,Zt,Qn,m.vertical||Ze,B,24,Yt,A.overscaling,Vt);for(const Ji of dr){const Co=Ze;Co&&Xv(A,Co.text,Ci,Ji)||Ii(ci,Ji)}}else if(Li==="line-center"){for(const ci of c.geometry)if(ci.length>1){const dr=Sd(ci,Qn,m.vertical||Ze,B,24,Yt);dr&&Ii(ci,dr)}}else if(c.type==="Polygon")for(const ci of jp(c.geometry,0)){const dr=om(ci,16);Ii(ci[0],new rd(dr.x,dr.y,0))}else if(c.type==="LineString")for(const ci of c.geometry)Ii(ci,new rd(ci[0].x,ci[0].y,0));else if(c.type==="Point")for(const ci of c.geometry)for(const dr of ci)Ii([dr],new rd(dr.x,dr.y,0))}const Id=32640;function gg(A,c,m,B,D,O,H,Y,re,de,be,Le,$e,Ge,Ze){const St=function(pn,Zt,dn,Gn,Qn,Ni,Vi,Li){const Ci=Gn.layout.get("text-rotate").evaluate(Ni,{})*Math.PI/180,_i=[];for(const Ei of Zt.positionedLines)for(const Ii of Ei.positionedGlyphs){if(!Ii.rect)continue;const ci=Ii.rect||{};let dr=4,Ji=!0,Co=1,ys=0;const Qs=(Qn||Li)&&Ii.vertical,Ya=Ii.metrics.advance*Ii.scale/2;if(Li&&Zt.verticalizable){const Cs=(Ii.scale-1)*Ns,Bs=(Ns-Ii.metrics.width*Ii.scale)/2;ys=Ei.lineOffset/2-(Ii.imageName?-Bs:Cs)}if(Ii.imageName){const Cs=Vi[Ii.imageName];Ji=Cs.sdf,Co=Cs.pixelRatio,dr=1/Co}const Mu=Qn?[Ii.x+Ya,Ii.y]:[0,0];let Il=Qn?[0,0]:[Ii.x+Ya+dn[0],Ii.y+dn[1]-ys],Ma=[0,0];Qs&&(Ma=Il,Il=[0,0]);const Ja=(Ii.metrics.left-dr)*Ii.scale-Ya+Il[0],Ml=(-Ii.metrics.top-dr)*Ii.scale+Il[1],$s=Ja+ci.w*Ii.scale/Co,lu=Ml+ci.h*Ii.scale/Co,$a=new Gt(Ja,Ml),pa=new Gt($s,Ml),wr=new Gt(Ja,lu),pc=new Gt($s,lu);if(Qs){const Cs=new Gt(-Ya,Ya-Jp),Bs=-Math.PI/2,Do=12-Ya,cu=new Gt(22-Do,-(Ii.imageName?Do:0)),Jl=new Gt(...Ma);$a._rotateAround(Bs,Cs)._add(cu)._add(Jl),pa._rotateAround(Bs,Cs)._add(cu)._add(Jl),wr._rotateAround(Bs,Cs)._add(cu)._add(Jl),pc._rotateAround(Bs,Cs)._add(cu)._add(Jl)}if(Ci){const Cs=Math.sin(Ci),Bs=Math.cos(Ci),Do=[Bs,-Cs,Cs,Bs];$a._matMult(Do),pa._matMult(Do),wr._matMult(Do),pc._matMult(Do)}const Fo=new Gt(0,0),Qo=new Gt(0,0);_i.push({tl:$a,tr:pa,bl:wr,br:pc,tex:ci,writingMode:Zt.writingMode,glyphOffset:Mu,sectionIndex:Ii.sectionIndex,isSDF:Ji,pixelOffsetTL:Fo,pixelOffsetBR:Qo,minFontScaleX:0,minFontScaleY:0})}return _i}(0,m,Y,D,O,H,B,A.allowVerticalPlacement),wt=A.textSizeData;let Yt=null;wt.kind==="source"?(Yt=[Vh*D.layout.get("text-size").evaluate(H,{})],Yt[0]>Id&&Fe(`${A.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):wt.kind==="composite"&&(Yt=[Vh*Ge.compositeTextSizes[0].evaluate(H,{},Ze),Vh*Ge.compositeTextSizes[1].evaluate(H,{},Ze)],(Yt[0]>Id||Yt[1]>Id)&&Fe(`${A.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),A.addSymbols(A.text,St,Yt,Y,O,H,de,c,re.lineStartIndex,re.lineLength,$e,Ze);for(const pn of be)Le[pn]=A.text.placedSymbolArray.length-1;return 4*St.length}function ey(A){for(const c in A)return A[c];return null}function Xv(A,c,m,B){const D=A.compareText;if(c in D){const O=D[c];for(let H=O.length-1;H>=0;H--)if(B.dist(O[H])<m)return!0}else D[c]=[];return D[c].push(B),!1}const ty=td.VectorTileFeature.types,Yv=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ip(A,c,m,B,D,O,H,Y,re,de,be,Le,$e){const Ge=Y?Math.min(Id,Math.round(Y[0])):0,Ze=Y?Math.min(Id,Math.round(Y[1])):0;A.emplaceBack(c,m,Math.round(32*B),Math.round(32*D),O,H,(Ge<<1)+(re?1:0),Ze,16*de,16*be,256*Le,256*$e)}function _g(A,c,m){A.emplaceBack(c.x,c.y,m),A.emplaceBack(c.x,c.y,m),A.emplaceBack(c.x,c.y,m),A.emplaceBack(c.x,c.y,m)}function Jv(A){for(const c of A.sections)if(qr(c.text))return!0;return!1}class lm{constructor(c){this.layoutVertexArray=new eu,this.indexArray=new hl,this.programConfigurations=c,this.segments=new l,this.dynamicLayoutVertexArray=new Lc,this.opacityVertexArray=new wu,this.placedSymbolArray=new Kn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(c,m,B,D){this.isEmpty()||(B&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,yf.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,m),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,Yl.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,Yv,!0),this.opacityVertexBuffer.itemSize=1),(B||D)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Mi("SymbolBuffers",lm);class cm{constructor(c,m,B){this.layoutVertexArray=new c,this.layoutAttributes=m,this.indexArray=new B,this.segments=new l,this.collisionVertexArray=new Tl}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,sg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Mi("CollisionBuffers",cm);class OA{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(H=>H.id),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=No([]),this.placementViewportMatrix=No([]);const m=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ag(this.zoom,m["text-size"]),this.iconSizeData=Ag(this.zoom,m["icon-size"]);const B=this.layers[0].layout,D=B.get("symbol-sort-key"),O=B.get("symbol-z-order");this.canOverlap=op(B,"text-overlap","text-allow-overlap")!=="never"||op(B,"icon-overlap","icon-allow-overlap")!=="never"||B.get("text-ignore-placement")||B.get("icon-ignore-placement"),this.sortFeaturesByKey=O!=="viewport-y"&&!D.isConstant(),this.sortFeaturesByY=(O==="viewport-y"||O==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,B.get("symbol-placement")==="point"&&(this.writingModes=B.get("text-writing-mode").map(H=>h.WritingMode[H])),this.stateDependentLayerIds=this.layers.filter(H=>H.isStateDependent()).map(H=>H.id),this.sourceID=c.sourceID}createArrays(){this.text=new lm(new Nt(this.layers,this.zoom,c=>/^text/.test(c))),this.icon=new lm(new Nt(this.layers,this.zoom,c=>/^icon/.test(c))),this.glyphOffsetArray=new vi,this.lineVertexArray=new yn,this.symbolInstances=new pi}calculateGlyphDependencies(c,m,B,D,O){for(let H=0;H<c.length;H++)if(m[c.charCodeAt(H)]=!0,(B||D)&&O){const Y=FA[c.charAt(H)];Y&&(m[Y.charCodeAt(0)]=!0)}}populate(c,m,B){const D=this.layers[0],O=D.layout,H=O.get("text-font"),Y=O.get("text-field"),re=O.get("icon-image"),de=(Y.value.kind!=="constant"||Y.value.value instanceof Oe&&!Y.value.value.isEmpty()||Y.value.value.toString().length>0)&&(H.value.kind!=="constant"||H.value.value.length>0),be=re.value.kind!=="constant"||!!re.value.value||Object.keys(re.parameters).length>0,Le=O.get("symbol-sort-key");if(this.features=[],!de&&!be)return;const $e=m.iconDependencies,Ge=m.glyphDependencies,Ze=m.availableImages,St=new Oo(this.zoom);for(const{feature:wt,id:Yt,index:pn,sourceLayerIndex:Zt}of c){const dn=D._featureFilter.needGeometry,Gn=nn(wt,dn);if(!D._featureFilter.filter(St,Gn,B))continue;let Qn,Ni;if(dn||(Gn.geometry=Zn(wt)),de){const Li=D.getValueAndResolveTokens("text-field",Gn,B,Ze),Ci=Oe.factory(Li);Jv(Ci)&&(this.hasRTLText=!0),(!this.hasRTLText||hc()==="unavailable"||this.hasRTLText&&ul.isParsed())&&(Qn=ag(Ci,D,Gn))}if(be){const Li=D.getValueAndResolveTokens("icon-image",Gn,B,Ze);Ni=Li instanceof mt?Li:mt.fromString(Li)}if(!Qn&&!Ni)continue;const Vi=this.sortFeaturesByKey?Le.evaluate(Gn,{},B):void 0;if(this.features.push({id:Yt,text:Qn,icon:Ni,index:pn,sourceLayerIndex:Zt,geometry:Gn.geometry,properties:wt.properties,type:ty[wt.type],sortKey:Vi}),Ni&&($e[Ni.name]=!0),Qn){const Li=H.evaluate(Gn,{},B).join(","),Ci=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.WritingMode.vertical)>=0;for(const _i of Qn.sections)if(_i.image)$e[_i.image.name]=!0;else{const Ei=Xs(Qn.toString()),Ii=_i.fontStack||Li,ci=Ge[Ii]=Ge[Ii]||{};this.calculateGlyphDependencies(_i.text,ci,Ci,this.allowVerticalPlacement,Ei)}}}O.get("symbol-placement")==="line"&&(this.features=function(wt){const Yt={},pn={},Zt=[];let dn=0;function Gn(Li){Zt.push(wt[Li]),dn++}function Qn(Li,Ci,_i){const Ei=pn[Li];return delete pn[Li],pn[Ci]=Ei,Zt[Ei].geometry[0].pop(),Zt[Ei].geometry[0]=Zt[Ei].geometry[0].concat(_i[0]),Ei}function Ni(Li,Ci,_i){const Ei=Yt[Ci];return delete Yt[Ci],Yt[Li]=Ei,Zt[Ei].geometry[0].shift(),Zt[Ei].geometry[0]=_i[0].concat(Zt[Ei].geometry[0]),Ei}function Vi(Li,Ci,_i){const Ei=_i?Ci[0][Ci[0].length-1]:Ci[0][0];return`${Li}:${Ei.x}:${Ei.y}`}for(let Li=0;Li<wt.length;Li++){const Ci=wt[Li],_i=Ci.geometry,Ei=Ci.text?Ci.text.toString():null;if(!Ei){Gn(Li);continue}const Ii=Vi(Ei,_i),ci=Vi(Ei,_i,!0);if(Ii in pn&&ci in Yt&&pn[Ii]!==Yt[ci]){const dr=Ni(Ii,ci,_i),Ji=Qn(Ii,ci,Zt[dr].geometry);delete Yt[Ii],delete pn[ci],pn[Vi(Ei,Zt[Ji].geometry,!0)]=Ji,Zt[dr].geometry=null}else Ii in pn?Qn(Ii,ci,_i):ci in Yt?Ni(Ii,ci,_i):(Gn(Li),Yt[Ii]=dn-1,pn[ci]=dn-1)}return Zt.filter(Li=>Li.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((wt,Yt)=>wt.sortKey-Yt.sortKey)}update(c,m,B){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,m,this.layers,B),this.icon.programConfigurations.updatePaintArrays(c,m,this.layers,B))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,m){const B=this.lineVertexArray.length;if(c.segment!==void 0){let D=c.dist(m[c.segment+1]),O=c.dist(m[c.segment]);const H={};for(let Y=c.segment+1;Y<m.length;Y++)H[Y]={x:m[Y].x,y:m[Y].y,tileUnitDistanceFromAnchor:D},Y<m.length-1&&(D+=m[Y+1].dist(m[Y]));for(let Y=c.segment||0;Y>=0;Y--)H[Y]={x:m[Y].x,y:m[Y].y,tileUnitDistanceFromAnchor:O},Y>0&&(O+=m[Y-1].dist(m[Y]));for(let Y=0;Y<m.length;Y++){const re=H[Y];this.lineVertexArray.emplaceBack(re.x,re.y,re.tileUnitDistanceFromAnchor)}}return{lineStartIndex:B,lineLength:this.lineVertexArray.length-B}}addSymbols(c,m,B,D,O,H,Y,re,de,be,Le,$e){const Ge=c.indexArray,Ze=c.layoutVertexArray,St=c.segments.prepareSegment(4*m.length,Ze,Ge,this.canOverlap?H.sortKey:void 0),wt=this.glyphOffsetArray.length,Yt=St.vertexLength,pn=this.allowVerticalPlacement&&Y===h.WritingMode.vertical?Math.PI/2:0,Zt=H.text&&H.text.sections;for(let dn=0;dn<m.length;dn++){const{tl:Gn,tr:Qn,bl:Ni,br:Vi,tex:Li,pixelOffsetTL:Ci,pixelOffsetBR:_i,minFontScaleX:Ei,minFontScaleY:Ii,glyphOffset:ci,isSDF:dr,sectionIndex:Ji}=m[dn],Co=St.vertexLength,ys=ci[1];ip(Ze,re.x,re.y,Gn.x,ys+Gn.y,Li.x,Li.y,B,dr,Ci.x,Ci.y,Ei,Ii),ip(Ze,re.x,re.y,Qn.x,ys+Qn.y,Li.x+Li.w,Li.y,B,dr,_i.x,Ci.y,Ei,Ii),ip(Ze,re.x,re.y,Ni.x,ys+Ni.y,Li.x,Li.y+Li.h,B,dr,Ci.x,_i.y,Ei,Ii),ip(Ze,re.x,re.y,Vi.x,ys+Vi.y,Li.x+Li.w,Li.y+Li.h,B,dr,_i.x,_i.y,Ei,Ii),_g(c.dynamicLayoutVertexArray,re,pn),Ge.emplaceBack(Co,Co+1,Co+2),Ge.emplaceBack(Co+1,Co+2,Co+3),St.vertexLength+=4,St.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ci[0]),dn!==m.length-1&&Ji===m[dn+1].sectionIndex||c.programConfigurations.populatePaintArrays(Ze.length,H,H.index,{},$e,Zt&&Zt[Ji])}c.placedSymbolArray.emplaceBack(re.x,re.y,wt,this.glyphOffsetArray.length-wt,Yt,de,be,re.segment,B?B[0]:0,B?B[1]:0,D[0],D[1],Y,0,!1,0,Le)}_addCollisionDebugVertex(c,m,B,D,O,H){return m.emplaceBack(0,0),c.emplaceBack(B.x,B.y,D,O,Math.round(H.x),Math.round(H.y))}addCollisionDebugVertices(c,m,B,D,O,H,Y){const re=O.segments.prepareSegment(4,O.layoutVertexArray,O.indexArray),de=re.vertexLength,be=O.layoutVertexArray,Le=O.collisionVertexArray,$e=Y.anchorX,Ge=Y.anchorY;this._addCollisionDebugVertex(be,Le,H,$e,Ge,new Gt(c,m)),this._addCollisionDebugVertex(be,Le,H,$e,Ge,new Gt(B,m)),this._addCollisionDebugVertex(be,Le,H,$e,Ge,new Gt(B,D)),this._addCollisionDebugVertex(be,Le,H,$e,Ge,new Gt(c,D)),re.vertexLength+=4;const Ze=O.indexArray;Ze.emplaceBack(de,de+1),Ze.emplaceBack(de+1,de+2),Ze.emplaceBack(de+2,de+3),Ze.emplaceBack(de+3,de),re.primitiveLength+=4}addDebugCollisionBoxes(c,m,B,D){for(let O=c;O<m;O++){const H=this.collisionBoxArray.get(O);this.addCollisionDebugVertices(H.x1,H.y1,H.x2,H.y2,D?this.textCollisionBox:this.iconCollisionBox,H.anchorPoint,B)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new cm(ju,Kp.members,tu),this.iconCollisionBox=new cm(ju,Kp.members,tu);for(let c=0;c<this.symbolInstances.length;c++){const m=this.symbolInstances.get(c);this.addDebugCollisionBoxes(m.textBoxStartIndex,m.textBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.iconBoxStartIndex,m.iconBoxEndIndex,m,!1),this.addDebugCollisionBoxes(m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m,!1)}}_deserializeCollisionBoxesForSymbol(c,m,B,D,O,H,Y,re,de){const be={};for(let Le=m;Le<B;Le++){const $e=c.get(Le);be.textBox={x1:$e.x1,y1:$e.y1,x2:$e.x2,y2:$e.y2,anchorPointX:$e.anchorPointX,anchorPointY:$e.anchorPointY},be.textFeatureIndex=$e.featureIndex;break}for(let Le=D;Le<O;Le++){const $e=c.get(Le);be.verticalTextBox={x1:$e.x1,y1:$e.y1,x2:$e.x2,y2:$e.y2,anchorPointX:$e.anchorPointX,anchorPointY:$e.anchorPointY},be.verticalTextFeatureIndex=$e.featureIndex;break}for(let Le=H;Le<Y;Le++){const $e=c.get(Le);be.iconBox={x1:$e.x1,y1:$e.y1,x2:$e.x2,y2:$e.y2,anchorPointX:$e.anchorPointX,anchorPointY:$e.anchorPointY},be.iconFeatureIndex=$e.featureIndex;break}for(let Le=re;Le<de;Le++){const $e=c.get(Le);be.verticalIconBox={x1:$e.x1,y1:$e.y1,x2:$e.x2,y2:$e.y2,anchorPointX:$e.anchorPointX,anchorPointY:$e.anchorPointY},be.verticalIconFeatureIndex=$e.featureIndex;break}return be}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let m=0;m<this.symbolInstances.length;m++){const B=this.symbolInstances.get(m);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,B.textBoxStartIndex,B.textBoxEndIndex,B.verticalTextBoxStartIndex,B.verticalTextBoxEndIndex,B.iconBoxStartIndex,B.iconBoxEndIndex,B.verticalIconBoxStartIndex,B.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(c,m){const B=c.placedSymbolArray.get(m),D=B.vertexStartIndex+4*B.numGlyphs;for(let O=B.vertexStartIndex;O<D;O+=4)c.indexArray.emplaceBack(O,O+1,O+2),c.indexArray.emplaceBack(O+1,O+2,O+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const m=Math.sin(c),B=Math.cos(c),D=[],O=[],H=[];for(let Y=0;Y<this.symbolInstances.length;++Y){H.push(Y);const re=this.symbolInstances.get(Y);D.push(0|Math.round(m*re.anchorX+B*re.anchorY)),O.push(re.featureIndex)}return H.sort((Y,re)=>D[Y]-D[re]||O[re]-O[Y]),H}addToSortKeyRanges(c,m){const B=this.sortKeyRanges[this.sortKeyRanges.length-1];B&&B.sortKey===m?B.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:m,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const m of this.symbolInstanceIndexes){const B=this.symbolInstances.get(m);this.featureSortOrder.push(B.featureIndex),[B.rightJustifiedTextSymbolIndex,B.centerJustifiedTextSymbolIndex,B.leftJustifiedTextSymbolIndex].forEach((D,O,H)=>{D>=0&&H.indexOf(D)===O&&this.addIndicesForPlacedSymbol(this.text,D)}),B.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,B.verticalPlacedTextSymbolIndex),B.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,B.placedIconSymbolIndex),B.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,B.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Mi("SymbolBucket",OA,{omit:["layers","collisionBoxArray","features","compareText"]}),OA.MAX_GLYPHS=65535,OA.addDynamicAttributes=_g;const yg=new Hi({"symbol-placement":new at($t.layout_symbol["symbol-placement"]),"symbol-spacing":new at($t.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new at($t.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Dt($t.layout_symbol["symbol-sort-key"]),"symbol-z-order":new at($t.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new at($t.layout_symbol["icon-allow-overlap"]),"icon-overlap":new at($t.layout_symbol["icon-overlap"]),"icon-ignore-placement":new at($t.layout_symbol["icon-ignore-placement"]),"icon-optional":new at($t.layout_symbol["icon-optional"]),"icon-rotation-alignment":new at($t.layout_symbol["icon-rotation-alignment"]),"icon-size":new Dt($t.layout_symbol["icon-size"]),"icon-text-fit":new at($t.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new at($t.layout_symbol["icon-text-fit-padding"]),"icon-image":new Dt($t.layout_symbol["icon-image"]),"icon-rotate":new Dt($t.layout_symbol["icon-rotate"]),"icon-padding":new Dt($t.layout_symbol["icon-padding"]),"icon-keep-upright":new at($t.layout_symbol["icon-keep-upright"]),"icon-offset":new Dt($t.layout_symbol["icon-offset"]),"icon-anchor":new Dt($t.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new at($t.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new at($t.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new at($t.layout_symbol["text-rotation-alignment"]),"text-field":new Dt($t.layout_symbol["text-field"]),"text-font":new Dt($t.layout_symbol["text-font"]),"text-size":new Dt($t.layout_symbol["text-size"]),"text-max-width":new Dt($t.layout_symbol["text-max-width"]),"text-line-height":new at($t.layout_symbol["text-line-height"]),"text-letter-spacing":new Dt($t.layout_symbol["text-letter-spacing"]),"text-justify":new Dt($t.layout_symbol["text-justify"]),"text-radial-offset":new Dt($t.layout_symbol["text-radial-offset"]),"text-variable-anchor":new at($t.layout_symbol["text-variable-anchor"]),"text-anchor":new Dt($t.layout_symbol["text-anchor"]),"text-max-angle":new at($t.layout_symbol["text-max-angle"]),"text-writing-mode":new at($t.layout_symbol["text-writing-mode"]),"text-rotate":new Dt($t.layout_symbol["text-rotate"]),"text-padding":new at($t.layout_symbol["text-padding"]),"text-keep-upright":new at($t.layout_symbol["text-keep-upright"]),"text-transform":new Dt($t.layout_symbol["text-transform"]),"text-offset":new Dt($t.layout_symbol["text-offset"]),"text-allow-overlap":new at($t.layout_symbol["text-allow-overlap"]),"text-overlap":new at($t.layout_symbol["text-overlap"]),"text-ignore-placement":new at($t.layout_symbol["text-ignore-placement"]),"text-optional":new at($t.layout_symbol["text-optional"])});var Gh={paint:new Hi({"icon-opacity":new Dt($t.paint_symbol["icon-opacity"]),"icon-color":new Dt($t.paint_symbol["icon-color"]),"icon-halo-color":new Dt($t.paint_symbol["icon-halo-color"]),"icon-halo-width":new Dt($t.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Dt($t.paint_symbol["icon-halo-blur"]),"icon-translate":new at($t.paint_symbol["icon-translate"]),"icon-translate-anchor":new at($t.paint_symbol["icon-translate-anchor"]),"text-opacity":new Dt($t.paint_symbol["text-opacity"]),"text-color":new Dt($t.paint_symbol["text-color"],{runtimeType:ot,getOverride:A=>A.textColor,hasOverride:A=>!!A.textColor}),"text-halo-color":new Dt($t.paint_symbol["text-halo-color"]),"text-halo-width":new Dt($t.paint_symbol["text-halo-width"]),"text-halo-blur":new Dt($t.paint_symbol["text-halo-blur"]),"text-translate":new at($t.paint_symbol["text-translate"]),"text-translate-anchor":new at($t.paint_symbol["text-translate-anchor"])}),layout:yg};class fc{constructor(c){if(c.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=c.property.overrides?c.property.overrides.runtimeType:Oi,this.defaultValue=c}evaluate(c){if(c.formattedSection){const m=this.defaultValue.property.overrides;if(m&&m.hasOverride(c.formattedSection))return m.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Mi("FormatSectionOverride",fc,{omit:["defaultValue"]});class rp extends zo{constructor(c){super(c,Gh)}recalculate(c,m){if(super.recalculate(c,m),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const B=this.layout.get("text-writing-mode");if(B){const D=[];for(const O of B)D.indexOf(O)<0&&D.push(O);this.layout._values["text-writing-mode"]=D}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(c,m,B,D){const O=this.layout.get(c).evaluate(m,{},B,D),H=this._unevaluatedLayout._values[c];return H.isDataDriven()||jl(H.value)||!O?O:function(Y,re){return re.replace(/{([^{}]+)}/g,(de,be)=>be in Y?String(Y[be]):"")}(m.properties,O)}createBucket(c){return new OA(c)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const c of Gh.paint.overridableProperties){if(!rp.hasPaintOverride(this.layout,c))continue;const m=this.paint.get(c),B=new fc(m),D=new lo(B,m.property.specification);let O=null;O=m.value.kind==="constant"||m.value.kind==="source"?new Hc("source",D):new fh("composite",D,m.value.zoomStops),this.paint._values[c]=new ge(m.property,O,m.parameters)}}_handleOverridablePaintPropertyUpdate(c,m,B){return!(!this.layout||m.isDataDriven()||B.isDataDriven())&&rp.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,m){const B=c.get("text-field"),D=Gh.paint.properties[m];let O=!1;const H=Y=>{for(const re of Y)if(D.overrides&&D.overrides.hasOverride(re))return void(O=!0)};if(B.value.kind==="constant"&&B.value.value instanceof Oe)H(B.value.value.sections);else if(B.value.kind==="source"){const Y=de=>{O||(de instanceof mi&&an(de.value)===ft?H(de.value.sections):de instanceof dh?H(de.sections):de.eachChild(Y))},re=B.value;re._styleExpression&&Y(re._styleExpression.expression)}return O}}function op(A,c,m){let B="never";const D=A.get(c);return D?B=D:A.get(m)&&(B="always"),B}var e0={paint:new Hi({"background-color":new at($t.paint_background["background-color"]),"background-pattern":new ni($t.paint_background["background-pattern"]),"background-opacity":new at($t.paint_background["background-opacity"])})},t0={paint:new Hi({"raster-opacity":new at($t.paint_raster["raster-opacity"]),"raster-hue-rotate":new at($t.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new at($t.paint_raster["raster-brightness-min"]),"raster-brightness-max":new at($t.paint_raster["raster-brightness-max"]),"raster-saturation":new at($t.paint_raster["raster-saturation"]),"raster-contrast":new at($t.paint_raster["raster-contrast"]),"raster-resampling":new at($t.paint_raster["raster-resampling"]),"raster-fade-duration":new at($t.paint_raster["raster-fade-duration"])})};class n0 extends zo{constructor(c){super(c,{}),this.onAdd=m=>{this.implementation.onAdd&&this.implementation.onAdd(m,m.painter.context.gl)},this.onRemove=m=>{this.implementation.onRemove&&this.implementation.onRemove(m,m.painter.context.gl)},this.implementation=c}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const vg={circle:class extends zo{constructor(A){super(A,iu)}createBucket(A){return new Yn(A)}queryRadius(A){const c=A;return qo("circle-radius",this,c)+qo("circle-stroke-width",this,c)+Xo(this.paint.get("circle-translate"))}queryIntersectsFeature(A,c,m,B,D,O,H,Y){const re=qa(A,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),O.angle,H),de=this.paint.get("circle-radius").evaluate(c,m)+this.paint.get("circle-stroke-width").evaluate(c,m),be=this.paint.get("circle-pitch-alignment")==="map",Le=be?re:function(Ge,Ze){return Ge.map(St=>Bu(St,Ze))}(re,Y),$e=be?de*H:de;for(const Ge of B)for(const Ze of Ge){const St=be?Ze:Bu(Ze,Y);let wt=$e;const Yt=Cu([],[Ze.x,Ze.y,0,1],Y);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?wt*=Yt[3]/O.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(wt*=O.cameraToCenterDistance/Yt[3]),si(Le,St,wt))return!0}return!1}},heatmap:class extends zo{constructor(A){super(A,Oh),this._updateColorRamp()}createBucket(A){return new Rh(A)}_handleSpecialPaintPropertyUpdate(A){A==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Q_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends zo{constructor(A){super(A,Jm)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends zo{constructor(A){super(A,Jd)}recalculate(A,c){super.recalculate(A,c);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(A){return new ed(A)}queryRadius(){return Xo(this.paint.get("fill-translate"))}queryIntersectsFeature(A,c,m,B,D,O,H){return ar(qa(A,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),O.angle,H),B)}isTileClipped(){return!0}},"fill-extrusion":class extends zo{constructor(A){super(A,_f)}createBucket(A){return new gf(A)}queryRadius(){return Xo(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(A,c,m,B,D,O,H,Y){const re=qa(A,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),O.angle,H),de=this.paint.get("fill-extrusion-height").evaluate(c,m),be=this.paint.get("fill-extrusion-base").evaluate(c,m),Le=function(Ge,Ze,St,wt){const Yt=[];for(const pn of Ge){const Zt=[pn.x,pn.y,0,1];Cu(Zt,Zt,Ze),Yt.push(new Gt(Zt[0]/Zt[3],Zt[1]/Zt[3]))}return Yt}(re,Y),$e=function(Ge,Ze,St,wt){const Yt=[],pn=[],Zt=wt[8]*Ze,dn=wt[9]*Ze,Gn=wt[10]*Ze,Qn=wt[11]*Ze,Ni=wt[8]*St,Vi=wt[9]*St,Li=wt[10]*St,Ci=wt[11]*St;for(const _i of Ge){const Ei=[],Ii=[];for(const ci of _i){const dr=ci.x,Ji=ci.y,Co=wt[0]*dr+wt[4]*Ji+wt[12],ys=wt[1]*dr+wt[5]*Ji+wt[13],Qs=wt[2]*dr+wt[6]*Ji+wt[14],Ya=wt[3]*dr+wt[7]*Ji+wt[15],Mu=Qs+Gn,Il=Ya+Qn,Ma=Co+Ni,Ja=ys+Vi,Ml=Qs+Li,$s=Ya+Ci,lu=new Gt((Co+Zt)/Il,(ys+dn)/Il);lu.z=Mu/Il,Ei.push(lu);const $a=new Gt(Ma/$s,Ja/$s);$a.z=Ml/$s,Ii.push($a)}Yt.push(Ei),pn.push(Ii)}return[Yt,pn]}(B,be,de,Y);return function(Ge,Ze,St){let wt=1/0;ar(St,Ze)&&(wt=W_(St,Ze[0]));for(let Yt=0;Yt<Ze.length;Yt++){const pn=Ze[Yt],Zt=Ge[Yt];for(let dn=0;dn<pn.length-1;dn++){const Gn=pn[dn],Qn=[Gn,pn[dn+1],Zt[dn+1],Zt[dn],Gn];Vn(St,Qn)&&(wt=Math.min(wt,W_(St,Qn)))}}return wt!==1/0&&wt}($e[0],$e[1],Le)}},line:class extends zo{constructor(A){super(A,sA),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(A){A==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof _l,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(A,c){super.recalculate(A,c),this.paint._values["line-floorwidth"]=og.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,A)}createBucket(A){return new PA(A)}queryRadius(A){const c=A,m=Jf(qo("line-width",this,c),qo("line-gap-width",this,c)),B=qo("line-offset",this,c);return m/2+Math.abs(B)+Xo(this.paint.get("line-translate"))}queryIntersectsFeature(A,c,m,B,D,O,H){const Y=qa(A,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),O.angle,H),re=H/2*Jf(this.paint.get("line-width").evaluate(c,m),this.paint.get("line-gap-width").evaluate(c,m)),de=this.paint.get("line-offset").evaluate(c,m);return de&&(B=function(be,Le){const $e=[];for(let Ge=0;Ge<be.length;Ge++){const Ze=be[Ge],St=[];for(let wt=0;wt<Ze.length;wt++){const Yt=Ze[wt-1],pn=Ze[wt],Zt=Ze[wt+1],dn=wt===0?new Gt(0,0):pn.sub(Yt)._unit()._perp(),Gn=wt===Ze.length-1?new Gt(0,0):Zt.sub(pn)._unit()._perp(),Qn=dn._add(Gn)._unit(),Ni=Qn.x*Gn.x+Qn.y*Gn.y;Ni!==0&&Qn._mult(1/Ni),St.push(Qn._mult(Le)._add(pn))}$e.push(St)}return $e}(B,de*H)),function(be,Le,$e){for(let Ge=0;Ge<Le.length;Ge++){const Ze=Le[Ge];if(be.length>=3){for(let St=0;St<Ze.length;St++)if(Ro(be,Ze[St]))return!0}if(Tr(be,Ze,$e))return!0}return!1}(Y,B,re)}isTileClipped(){return!0}},symbol:rp,background:class extends zo{constructor(A){super(A,e0)}},raster:class extends zo{constructor(A){super(A,t0)}}};class um{constructor(c){this._callback=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const xg=63710088e-1;class Ms{constructor(c,m){if(isNaN(c)||isNaN(m))throw new Error(`Invalid LngLat object: (${c}, ${m})`);if(this.lng=+c,this.lat=+m,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ms(te(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const m=Math.PI/180,B=this.lat*m,D=c.lat*m,O=Math.sin(B)*Math.sin(D)+Math.cos(B)*Math.cos(D)*Math.cos((c.lng-this.lng)*m);return xg*Math.acos(Math.min(O,1))}toBounds(c=0){const m=360*c/40075017,B=m/Math.cos(Math.PI/180*this.lat);return new wh(new Ms(this.lng-B,this.lat-m),new Ms(this.lng+B,this.lat+m))}static convert(c){if(c instanceof Ms)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new Ms(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new Ms(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class wh{constructor(c,m){c&&(m?this.setSouthWest(c).setNorthEast(m):c.length===4?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1]))}setNorthEast(c){return this._ne=c instanceof Ms?new Ms(c.lng,c.lat):Ms.convert(c),this}setSouthWest(c){return this._sw=c instanceof Ms?new Ms(c.lng,c.lat):Ms.convert(c),this}extend(c){const m=this._sw,B=this._ne;let D,O;if(c instanceof Ms)D=c,O=c;else{if(!(c instanceof wh))return Array.isArray(c)?c.length===4||c.every(Array.isArray)?this.extend(wh.convert(c)):this.extend(Ms.convert(c)):this;if(D=c._sw,O=c._ne,!D||!O)return this}return m||B?(m.lng=Math.min(D.lng,m.lng),m.lat=Math.min(D.lat,m.lat),B.lng=Math.max(O.lng,B.lng),B.lat=Math.max(O.lat,B.lat)):(this._sw=new Ms(D.lng,D.lat),this._ne=new Ms(O.lng,O.lat)),this}getCenter(){return new Ms((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ms(this.getWest(),this.getNorth())}getSouthEast(){return new Ms(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(c){const{lng:m,lat:B}=Ms.convert(c);let D=this._sw.lng<=m&&m<=this._ne.lng;return this._sw.lng>this._ne.lng&&(D=this._sw.lng>=m&&m>=this._ne.lng),this._sw.lat<=B&&B<=this._ne.lat&&D}static convert(c){return c instanceof wh?c:c&&new wh(c)}}const ny=2*Math.PI*xg;function sp(A){return ny*Math.cos(A*Math.PI/180)}function iy(A){return(180+A)/360}function ry(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function oy(A,c){return A/sp(c)}function bg(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}class hm{constructor(c,m,B=0){this.x=+c,this.y=+m,this.z=+B}static fromLngLat(c,m=0){const B=Ms.convert(c);return new hm(iy(B.lng),ry(B.lat),oy(m,B.lat))}toLngLat(){return new Ms(360*this.x-180,bg(this.y))}toAltitude(){return this.z*sp(bg(this.y))}meterInMercatorCoordinateUnits(){return 1/ny*(c=bg(this.y),1/Math.cos(c*Math.PI/180));var c}}function dm(A,c,m){var B=2*Math.PI*6378137/256/Math.pow(2,m);return[A*B-2*Math.PI*6378137/2,c*B-2*Math.PI*6378137/2]}class wg{constructor(c,m,B){if(c<0||c>25||B<0||B>=Math.pow(2,c)||m<0||m>=Math.pow(2,c))throw new Error(`x=${m}, y=${B}, z=${c} outside of bounds. 0<=x<${Math.pow(2,c)}, 0<=y<${Math.pow(2,c)} 0<=z<=25 `);this.z=c,this.x=m,this.y=B,this.key=Ys(0,c,c,m,B)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,m,B){const D=(H=this.y,Y=this.z,re=dm(256*(O=this.x),256*(H=Math.pow(2,Y)-H-1),Y),de=dm(256*(O+1),256*(H+1),Y),re[0]+","+re[1]+","+de[0]+","+de[1]);var O,H,Y,re,de;const be=function(Le,$e,Ge){let Ze,St="";for(let wt=Le;wt>0;wt--)Ze=1<<wt-1,St+=($e&Ze?1:0)+(Ge&Ze?2:0);return St}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(B==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,m>1?"@2x":"").replace(/{quadkey}/g,be).replace(/{bbox-epsg-3857}/g,D)}isChildOf(c){const m=this.z-c.z;return m>0&&c.x===this.x>>m&&c.y===this.y>>m}getTilePoint(c){const m=Math.pow(2,this.z);return new Gt((c.x*m-this.x)*Vt,(c.y*m-this.y)*Vt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class NA{constructor(c,m){this.wrap=c,this.canonical=m,this.key=Ys(c,m.z,m.z,m.x,m.y)}}class Wu{constructor(c,m,B,D,O){if(c<B)throw new Error(`overscaledZ should be >= z; overscaledZ = ${c}; z = ${B}`);this.overscaledZ=c,this.wrap=m,this.canonical=new wg(B,+D,+O),this.key=Ys(m,c,B,D,O)}clone(){return new Wu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-c;return c>this.canonical.z?new Wu(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wu(c,this.wrap,c,this.canonical.x>>m,this.canonical.y>>m)}calculateScaledKey(c,m){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const B=this.canonical.z-c;return c>this.canonical.z?Ys(this.wrap*+m,c,this.canonical.z,this.canonical.x,this.canonical.y):Ys(this.wrap*+m,c,c,this.canonical.x>>B,this.canonical.y>>B)}isChildOf(c){if(c.wrap!==this.wrap)return!1;const m=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>m&&c.canonical.y===this.canonical.y>>m}children(c){if(this.overscaledZ>=c)return[new Wu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const m=this.canonical.z+1,B=2*this.canonical.x,D=2*this.canonical.y;return[new Wu(m,this.wrap,m,B,D),new Wu(m,this.wrap,m,B+1,D),new Wu(m,this.wrap,m,B,D+1),new Wu(m,this.wrap,m,B+1,D+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new Wu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new Wu(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new NA(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(c){return this.canonical.getTilePoint(new hm(c.x-this.wrap,c.y))}}function Ys(A,c,m,B,D){(A*=2)<0&&(A=-1*A-1);const O=1<<m;return(O*O*A+O*D+B).toString(36)+m.toString(36)+c.toString(36)}Mi("CanonicalTileID",wg),Mi("OverscaledTileID",Wu,{omit:["posMatrix"]});class ap{constructor(c,m,B){if(this.uid=c,m.height!==m.width)throw new RangeError("DEM tiles must be square");if(B&&B!=="mapbox"&&B!=="terrarium")return void Fe(`"${B}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=m.height;const D=this.dim=m.height-2;this.data=new Uint32Array(m.data.buffer),this.encoding=B||"mapbox";for(let O=0;O<D;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(D,O)]=this.data[this._idx(D-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,D)]=this.data[this._idx(O,D-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(D,-1)]=this.data[this._idx(D-1,0)],this.data[this._idx(-1,D)]=this.data[this._idx(0,D-1)],this.data[this._idx(D,D)]=this.data[this._idx(D-1,D-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<D;O++)for(let H=0;H<D;H++){const Y=this.get(O,H);Y>this.max&&(this.max=Y),Y<this.min&&(this.min=Y)}}get(c,m){const B=new Uint8Array(this.data.buffer),D=4*this._idx(c,m);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(B[D],B[D+1],B[D+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(c,m){if(c<-1||c>=this.dim+1||m<-1||m>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(m+1)*this.stride+(c+1)}_unpackMapbox(c,m,B){return(256*c*256+256*m+B)/10-1e4}_unpackTerrarium(c,m,B){return 256*c+m+B/256-32768}getPixels(){return new ru({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(c,m,B){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let D=m*this.dim,O=m*this.dim+this.dim,H=B*this.dim,Y=B*this.dim+this.dim;switch(m){case-1:D=O-1;break;case 1:O=D+1}switch(B){case-1:H=Y-1;break;case 1:Y=H+1}const re=-m*this.dim,de=-B*this.dim;for(let be=H;be<Y;be++)for(let Le=D;Le<O;Le++)this.data[this._idx(Le,be)]=c.data[this._idx(Le+re,be+de)]}}Mi("DEMData",ap);class Cg{constructor(c){this._stringToNumber={},this._numberToString=[];for(let m=0;m<c.length;m++){const B=c[m];this._stringToNumber[B]=m,this._numberToString[m]=B}}encode(c){return this._stringToNumber[c]}decode(c){if(c>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${c} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[c]}}class lp{constructor(c,m,B,D,O){this.type="Feature",this._vectorTileFeature=c,c._z=m,c._x=B,c._y=D,this.properties=c.properties,this.id=O}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={geometry:this.geometry};for(const m in this)m!=="_geometry"&&m!=="_vectorTileFeature"&&(c[m]=this[m]);return c}}class cp{constructor(c,m){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new ha(Vt,16,0),this.grid3D=new ha(Vt,16,0),this.featureIndexArray=new io,this.promoteId=m}insert(c,m,B,D,O,H){const Y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(B,D,O);const re=H?this.grid3D:this.grid;for(let de=0;de<m.length;de++){const be=m[de],Le=[1/0,1/0,-1/0,-1/0];for(let $e=0;$e<be.length;$e++){const Ge=be[$e];Le[0]=Math.min(Le[0],Ge.x),Le[1]=Math.min(Le[1],Ge.y),Le[2]=Math.max(Le[2],Ge.x),Le[3]=Math.max(Le[3],Ge.y)}Le[0]<Vt&&Le[1]<Vt&&Le[2]>=0&&Le[3]>=0&&re.insert(Y,Le[0],Le[1],Le[2],Le[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new td.VectorTile(new lg(this.rawTileData)).layers,this.sourceLayerCoder=new Cg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(c,m,B,D){this.loadVTLayers();const O=c.params||{},H=Vt/c.tileSize/c.scale,Y=Qu(O.filter),re=c.queryGeometry,de=c.queryPadding*H,be=Bg(re),Le=this.grid.query(be.minX-de,be.minY-de,be.maxX+de,be.maxY+de),$e=Bg(c.cameraQueryGeometry),Ge=this.grid3D.query($e.minX-de,$e.minY-de,$e.maxX+de,$e.maxY+de,(wt,Yt,pn,Zt)=>function(dn,Gn,Qn,Ni,Vi){for(const Ci of dn)if(Gn<=Ci.x&&Qn<=Ci.y&&Ni>=Ci.x&&Vi>=Ci.y)return!0;const Li=[new Gt(Gn,Qn),new Gt(Gn,Vi),new Gt(Ni,Vi),new Gt(Ni,Qn)];if(dn.length>2){for(const Ci of Li)if(Ro(dn,Ci))return!0}for(let Ci=0;Ci<dn.length-1;Ci++)if(gs(dn[Ci],dn[Ci+1],Li))return!0;return!1}(c.cameraQueryGeometry,wt-de,Yt-de,pn+de,Zt+de));for(const wt of Ge)Le.push(wt);Le.sort(Tg);const Ze={};let St;for(let wt=0;wt<Le.length;wt++){const Yt=Le[wt];if(Yt===St)continue;St=Yt;const pn=this.featureIndexArray.get(Yt);let Zt=null;this.loadMatchingFeature(Ze,pn.bucketIndex,pn.sourceLayerIndex,pn.featureIndex,Y,O.layers,O.availableImages,m,B,D,(dn,Gn,Qn)=>(Zt||(Zt=Zn(dn)),Gn.queryIntersectsFeature(re,dn,Qn,Zt,this.z,c.transform,H,c.pixelPosMatrix)))}return Ze}loadMatchingFeature(c,m,B,D,O,H,Y,re,de,be,Le){const $e=this.bucketLayerIDs[m];if(H&&!function(wt,Yt){for(let pn=0;pn<wt.length;pn++)if(Yt.indexOf(wt[pn])>=0)return!0;return!1}(H,$e))return;const Ge=this.sourceLayerCoder.decode(B),Ze=this.vtLayers[Ge].feature(D);if(O.needGeometry){const wt=nn(Ze,!0);if(!O.filter(new Oo(this.tileID.overscaledZ),wt,this.tileID.canonical))return}else if(!O.filter(new Oo(this.tileID.overscaledZ),Ze))return;const St=this.getId(Ze,Ge);for(let wt=0;wt<$e.length;wt++){const Yt=$e[wt];if(H&&H.indexOf(Yt)<0)continue;const pn=re[Yt];if(!pn)continue;let Zt={};St&&be&&(Zt=be.getState(pn.sourceLayer||"_geojsonTileLayer",St));const dn=he({},de[Yt]);dn.paint=Cf(dn.paint,pn.paint,Ze,Zt,Y),dn.layout=Cf(dn.layout,pn.layout,Ze,Zt,Y);const Gn=!Le||Le(Ze,pn,Zt);if(!Gn)continue;const Qn=new lp(Ze,this.z,this.x,this.y,St);Qn.layer=dn;let Ni=c[Yt];Ni===void 0&&(Ni=c[Yt]=[]),Ni.push({featureIndex:D,feature:Qn,intersectionZ:Gn})}}lookupSymbolFeatures(c,m,B,D,O,H,Y,re){const de={};this.loadVTLayers();const be=Qu(O);for(const Le of c)this.loadMatchingFeature(de,B,D,Le,be,H,Y,re,m);return de}hasLayer(c){for(const m of this.bucketLayerIDs)for(const B of m)if(c===B)return!0;return!1}getId(c,m){let B=c.id;return this.promoteId&&(B=c.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[m]],typeof B=="boolean"&&(B=Number(B))),B}}function Cf(A,c,m,B,D){return ke(A,(O,H)=>{const Y=c instanceof Ne?c.get(H):null;return Y&&Y.evaluate?Y.evaluate(m,B,D):Y})}function Bg(A){let c=1/0,m=1/0,B=-1/0,D=-1/0;for(const O of A)c=Math.min(c,O.x),m=Math.min(m,O.y),B=Math.max(B,O.x),D=Math.max(D,O.y);return{minX:c,minY:m,maxX:B,maxY:D}}function Tg(A,c){return c-A}var AA;Mi("FeatureIndex",cp,{omit:["rawTileData","sourceLayerCoder"]}),h.PerformanceMarkers=void 0,(AA=h.PerformanceMarkers||(h.PerformanceMarkers={})).create="create",AA.load="load",AA.fullLoad="fullLoad";let Bf=null,QA=[];const up=1e3/30,i0={mark(A){performance.mark(A)},frame(A){const c=A;Bf!=null&&QA.push(c-Bf),Bf=c},clearMetrics(){Bf=null,QA=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const A in h.PerformanceMarkers)performance.clearMarks(h.PerformanceMarkers[A])},getPerformanceMetrics(){performance.measure("loadTime",h.PerformanceMarkers.create,h.PerformanceMarkers.load),performance.measure("fullLoadTime",h.PerformanceMarkers.create,h.PerformanceMarkers.fullLoad);const A=performance.getEntriesByName("loadTime")[0].duration,c=performance.getEntriesByName("fullLoadTime")[0].duration,m=QA.length,B=1/(QA.reduce((O,H)=>O+H,0)/m/1e3),D=QA.filter(O=>O>up).reduce((O,H)=>O+(H-up)/up,0);return{loadTime:A,fullLoadTime:c,fps:B,percentDroppedFrames:D/(m+D)*100}}};h.AJAXError=Qi,h.ARRAY_TYPE=ko,h.Actor=class{constructor(A,c,m){this.target=A,this.parent=c,this.mapId=m,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},De(["receive","process"],this),this.invoker=new um(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=xt()?A:window}send(A,c,m,B,D=!1){const O=Math.round(1e18*Math.random()).toString(36).substring(0,10);m&&(this.callbacks[O]=m);const H=Ut(this.globalScope)?void 0:[];return this.target.postMessage({id:O,type:A,hasCallback:!!m,targetMapId:B,mustQueue:D,sourceMapId:this.mapId,data:Vl(c,H)},H),{cancel:()=>{m&&delete this.callbacks[O],this.target.postMessage({id:O,type:"<cancel>",targetMapId:B,sourceMapId:this.mapId})}}}receive(A){const c=A.data,m=c.id;if(m&&(!c.targetMapId||this.mapId===c.targetMapId))if(c.type==="<cancel>"){delete this.tasks[m];const B=this.cancelCallbacks[m];delete this.cancelCallbacks[m],B&&B()}else xt()||c.mustQueue?(this.tasks[m]=c,this.taskQueue.push(m),this.invoker.trigger()):this.processTask(m,c)}process(){if(!this.taskQueue.length)return;const A=this.taskQueue.shift(),c=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),c&&this.processTask(A,c)}processTask(A,c){if(c.type==="<response>"){const m=this.callbacks[A];delete this.callbacks[A],m&&(c.error?m(Gl(c.error)):m(null,Gl(c.data)))}else{let m=!1;const B=Ut(this.globalScope)?void 0:[],D=c.hasCallback?(Y,re)=>{m=!0,delete this.cancelCallbacks[A],this.target.postMessage({id:A,type:"<response>",sourceMapId:this.mapId,error:Y?Vl(Y):null,data:Vl(re,B)},B)}:Y=>{m=!0};let O=null;const H=Gl(c.data);if(this.parent[c.type])O=this.parent[c.type](c.sourceMapId,H,D);else if(this.parent.getWorkerSource){const Y=c.type.split(".");O=this.parent.getWorkerSource(c.sourceMapId,Y[0],H.source)[Y[1]](H,D)}else D(new Error(`Could not find function ${c.type}`));!m&&O&&O.cancel&&(this.cancelCallbacks[A]=O.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},h.AlphaImage=Jh,h.CanonicalTileID=wg,h.CollisionBoxArray=In,h.CollisionCircleLayoutArray=class extends ye{},h.Color=Ke,h.DEMData=ap,h.DataConstantProperty=at,h.DictionaryCoder=Cg,h.EXTENT=Vt,h.ErrorEvent=Eo,h.EvaluationParameters=Oo,h.Event=Zr,h.Evented=Ao,h.FeatureIndex=cp,h.FillBucket=ed,h.FillExtrusionBucket=gf,h.GeoJSONFeature=lp,h.ImageAtlas=Ed,h.ImagePosition=Su,h.LineBucket=PA,h.LineStripIndexArray=class extends bt{},h.LngLat=Ms,h.LngLatBounds=wh,h.MercatorCoordinate=hm,h.ONE_EM=Ns,h.OverscaledTileID=Wu,h.PerformanceUtils=i0,h.PosArray=or,h.Properties=Hi,h.QuadTriangleArray=class extends He{},h.RGBAImage=ru,h.RasterBoundsArray=class extends P{},h.RequestPerformance=class{constructor(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let A=performance.getEntriesByName(this._marks.measure);return A.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),A=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),A}},h.ResourceType=li,h.SegmentVector=l,h.SymbolBucket=OA,h.Transitionable=_,h.TriangleIndexArray=hl,h.Uniform1f=et,h.Uniform1i=class extends We{constructor(A,c){super(A,c),this.current=0}set(A){this.current!==A&&(this.current=A,this.gl.uniform1i(this.location,A))}},h.Uniform2f=class extends We{constructor(A,c){super(A,c),this.current=[0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]||(this.current=A,this.gl.uniform2f(this.location,A[0],A[1]))}},h.Uniform3f=class extends We{constructor(A,c){super(A,c),this.current=[0,0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]||(this.current=A,this.gl.uniform3f(this.location,A[0],A[1],A[2]))}},h.Uniform4f=tt,h.UniformColor=rt,h.UniformMatrix4f=class extends We{constructor(A,c){super(A,c),this.current=Be}set(A){if(A[12]!==this.current[12]||A[0]!==this.current[0])return this.current=A,void this.gl.uniformMatrix4fv(this.location,!1,A);for(let c=1;c<16;c++)if(A[c]!==this.current[c]){this.current=A,this.gl.uniformMatrix4fv(this.location,!1,A);break}}},h.UnwrappedTileID=NA,h.ValidationError=en,h.ZoomHistory=no,h.add=function(A,c,m){return A[0]=c[0]+m[0],A[1]=c[1]+m[1],A[2]=c[2]+m[2],A},h.addDynamicAttributes=_g,h.asyncAll=function(A,c,m){if(!A.length)return m(null,[]);let B=A.length;const D=new Array(A.length);let O=null;A.forEach((H,Y)=>{c(H,(re,de)=>{re&&(O=re),D[Y]=de,--B==0&&m(O,D)})})},h.bezier=$,h.bindAll=De,h.cacheEntryPossiblyAdded=function(A){Hn++,Hn>Bi&&(A.getActor().send("enforceCacheSizeLimit",Wn),Hn=0)},h.clamp=q,h.clearTileCache=function(A){const c=caches.delete(Cn);A&&c.catch(A).then(()=>A())},h.clipLine=kc,h.clone=function(A){var c=new ko(16);return c[0]=A[0],c[1]=A[1],c[2]=A[2],c[3]=A[3],c[4]=A[4],c[5]=A[5],c[6]=A[6],c[7]=A[7],c[8]=A[8],c[9]=A[9],c[10]=A[10],c[11]=A[11],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15],c},h.clone$1=Te,h.clone$2=function(A){var c=new ko(3);return c[0]=A[0],c[1]=A[1],c[2]=A[2],c},h.collisionCircleLayout=Ac,h.config=mn,h.copy=function(A,c){return A[0]=c[0],A[1]=c[1],A[2]=c[2],A[3]=c[3],A[4]=c[4],A[5]=c[5],A[6]=c[6],A[7]=c[7],A[8]=c[8],A[9]=c[9],A[10]=c[10],A[11]=c[11],A[12]=c[12],A[13]=c[13],A[14]=c[14],A[15]=c[15],A},h.create=function(){var A=new ko(16);return ko!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},h.create$1=ts,h.createExpression=_u,h.createFilter=Qu,h.createLayout=Uo,h.createStyleLayer=function(A){return A.type==="custom"?new n0(A):new vg[A.type](A)},h.cross=function(A,c,m){var B=c[0],D=c[1],O=c[2],H=m[0],Y=m[1],re=m[2];return A[0]=D*re-O*Y,A[1]=O*H-B*re,A[2]=B*Y-D*H,A},h.dot=function(A,c){return A[0]*c[0]+A[1]*c[1]+A[2]*c[2]},h.dot$1=function(A,c){return A[0]*c[0]+A[1]*c[1]+A[2]*c[2]+A[3]*c[3]},h.ease=V,h.emitValidationErrors=wl,h.enforceCacheSizeLimit=function(A){Bn(),Qt&&Qt.then(c=>{c.keys().then(m=>{for(let B=0;B<m.length-A;B++)c.delete(m[B])})})},h.equals=function(A,c){var m=A[0],B=A[1],D=A[2],O=A[3],H=A[4],Y=A[5],re=A[6],de=A[7],be=A[8],Le=A[9],$e=A[10],Ge=A[11],Ze=A[12],St=A[13],wt=A[14],Yt=A[15],pn=c[0],Zt=c[1],dn=c[2],Gn=c[3],Qn=c[4],Ni=c[5],Vi=c[6],Li=c[7],Ci=c[8],_i=c[9],Ei=c[10],Ii=c[11],ci=c[12],dr=c[13],Ji=c[14],Co=c[15];return Math.abs(m-pn)<=Os*Math.max(1,Math.abs(m),Math.abs(pn))&&Math.abs(B-Zt)<=Os*Math.max(1,Math.abs(B),Math.abs(Zt))&&Math.abs(D-dn)<=Os*Math.max(1,Math.abs(D),Math.abs(dn))&&Math.abs(O-Gn)<=Os*Math.max(1,Math.abs(O),Math.abs(Gn))&&Math.abs(H-Qn)<=Os*Math.max(1,Math.abs(H),Math.abs(Qn))&&Math.abs(Y-Ni)<=Os*Math.max(1,Math.abs(Y),Math.abs(Ni))&&Math.abs(re-Vi)<=Os*Math.max(1,Math.abs(re),Math.abs(Vi))&&Math.abs(de-Li)<=Os*Math.max(1,Math.abs(de),Math.abs(Li))&&Math.abs(be-Ci)<=Os*Math.max(1,Math.abs(be),Math.abs(Ci))&&Math.abs(Le-_i)<=Os*Math.max(1,Math.abs(Le),Math.abs(_i))&&Math.abs($e-Ei)<=Os*Math.max(1,Math.abs($e),Math.abs(Ei))&&Math.abs(Ge-Ii)<=Os*Math.max(1,Math.abs(Ge),Math.abs(Ii))&&Math.abs(Ze-ci)<=Os*Math.max(1,Math.abs(Ze),Math.abs(ci))&&Math.abs(St-dr)<=Os*Math.max(1,Math.abs(St),Math.abs(dr))&&Math.abs(wt-Ji)<=Os*Math.max(1,Math.abs(wt),Math.abs(Ji))&&Math.abs(Yt-Co)<=Os*Math.max(1,Math.abs(Yt),Math.abs(Co))},h.evaluateSizeForFeature=function(A,{uSize:c,uSizeT:m},{lowerSize:B,upperSize:D}){return A.kind==="source"?B/Vh:A.kind==="composite"?Jo(B/Vh,D/Vh,m):c},h.evaluateSizeForZoom=function(A,c){let m=0,B=0;if(A.kind==="constant")B=A.layoutSize;else if(A.kind!=="source"){const{interpolationType:D,minZoom:O,maxZoom:H}=A,Y=D?q(Ua.interpolationFactor(D,c,O,H),0,1):0;A.kind==="camera"?B=Jo(A.minSize,A.maxSize,Y):m=Y}return{uSizeT:m,uSize:B}},h.evaluateVariableOffset=J_,h.evented=Mc,h.exported=On,h.exported$1=ei,h.extend=he,h.filterObject=xe,h.fromRotation=function(A,c){var m=Math.sin(c),B=Math.cos(c);return A[0]=B,A[1]=m,A[2]=0,A[3]=-m,A[4]=B,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},h.fromScaling=function(A,c){return A[0]=c[0],A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=c[1],A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=c[2],A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A},h.getAnchorAlignment=tm,h.getAnchorJustification=dA,h.getArrayBuffer=Ir,h.getImage=Ur,h.getJSON=function(A,c){return di(he(A,{type:"json"}),c)},h.getOverlapMode=op,h.getRTLTextPluginStatus=hc,h.getReferrer=Ki,h.getVideo=function(A,c){const m=window.document.createElement("video");m.muted=!0,m.onloadstart=function(){c(null,m)};for(let B=0;B<A.length;B++){const D=window.document.createElement("source");nr(A[B])||(m.crossOrigin="Anonymous"),D.src=A[B],m.appendChild(D)}return{cancel:()=>{}}},h.identity=No,h.invert=function(A,c){var m=c[0],B=c[1],D=c[2],O=c[3],H=c[4],Y=c[5],re=c[6],de=c[7],be=c[8],Le=c[9],$e=c[10],Ge=c[11],Ze=c[12],St=c[13],wt=c[14],Yt=c[15],pn=m*Y-B*H,Zt=m*re-D*H,dn=m*de-O*H,Gn=B*re-D*Y,Qn=B*de-O*Y,Ni=D*de-O*re,Vi=be*St-Le*Ze,Li=be*wt-$e*Ze,Ci=be*Yt-Ge*Ze,_i=Le*wt-$e*St,Ei=Le*Yt-Ge*St,Ii=$e*Yt-Ge*wt,ci=pn*Ii-Zt*Ei+dn*_i+Gn*Ci-Qn*Li+Ni*Vi;return ci?(A[0]=(Y*Ii-re*Ei+de*_i)*(ci=1/ci),A[1]=(D*Ei-B*Ii-O*_i)*ci,A[2]=(St*Ni-wt*Qn+Yt*Gn)*ci,A[3]=($e*Qn-Le*Ni-Ge*Gn)*ci,A[4]=(re*Ci-H*Ii-de*Li)*ci,A[5]=(m*Ii-D*Ci+O*Li)*ci,A[6]=(wt*dn-Ze*Ni-Yt*Zt)*ci,A[7]=(be*Ni-$e*dn+Ge*Zt)*ci,A[8]=(H*Ei-Y*Ci+de*Vi)*ci,A[9]=(B*Ci-m*Ei-O*Vi)*ci,A[10]=(Ze*Qn-St*dn+Yt*pn)*ci,A[11]=(Le*dn-be*Qn-Ge*pn)*ci,A[12]=(Y*Li-H*_i-re*Vi)*ci,A[13]=(m*_i-B*Li+D*Vi)*ci,A[14]=(St*Zt-Ze*Gn-wt*pn)*ci,A[15]=(be*Gn-Le*Zt+$e*pn)*ci,A):null},h.isImageBitmap=Kt,h.isSafari=Ut,h.isWorker=xt,h.keysDifference=function(A,c){const m=[];for(const B in A)B in c||m.push(B);return m},h.lazyLoadRTLTextPlugin=function(){ul.isLoading()||ul.isLoaded()||hc()!=="deferred"||bu()},h.makeRequest=di,h.mapObject=ke,h.mercatorXfromLng=iy,h.mercatorYfromLat=ry,h.mercatorZfromAltitude=oy,h.mul=Fs,h.mul$1=function(A,c,m){return A[0]=c[0]*m[0],A[1]=c[1]*m[1],A[2]=c[2]*m[2],A[3]=c[3]*m[3],A},h.multiply=Aa,h.nextPowerOfTwo=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},h.normalize=function(A,c){var m=c[0],B=c[1],D=c[2],O=m*m+B*B+D*D;return O>0&&(O=1/Math.sqrt(O)),A[0]=c[0]*O,A[1]=c[1]*O,A[2]=c[2]*O,A},h.number=Jo,h.ortho=function(A,c,m,B,D,O,H){var Y=1/(c-m),re=1/(B-D),de=1/(O-H);return A[0]=-2*Y,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*re,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*de,A[11]=0,A[12]=(c+m)*Y,A[13]=(D+B)*re,A[14]=(H+O)*de,A[15]=1,A},h.parseCacheControl=Bt,h.parseGlyphPbf=function(A){return new lg(A).readFields(Xp,[])},h.pbf=lg,h.performSymbolLayout=function(A){A.bucket.createArrays(),A.bucket.tilePixelRatio=Vt/(512*A.bucket.overscaling),A.bucket.compareText={},A.bucket.iconsNeedLinear=!1;const c=A.bucket.layers[0].layout,m=A.bucket.layers[0]._unevaluatedLayout._values,B={layoutIconSize:m["icon-size"].possiblyEvaluate(new Oo(A.bucket.zoom+1),A.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Oo(A.bucket.zoom+1),A.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Oo(18))};if(A.bucket.textSizeData.kind==="composite"){const{minZoom:re,maxZoom:de}=A.bucket.textSizeData;B.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Oo(re),A.canonical),m["text-size"].possiblyEvaluate(new Oo(de),A.canonical)]}if(A.bucket.iconSizeData.kind==="composite"){const{minZoom:re,maxZoom:de}=A.bucket.iconSizeData;B.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Oo(re),A.canonical),m["icon-size"].possiblyEvaluate(new Oo(de),A.canonical)]}const D=c.get("text-line-height")*Ns,O=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",H=c.get("text-keep-upright"),Y=c.get("text-size");for(const re of A.bucket.features){const de=c.get("text-font").evaluate(re,{},A.canonical).join(","),be=Y.evaluate(re,{},A.canonical),Le=B.layoutTextSize.evaluate(re,{},A.canonical),$e=B.layoutIconSize.evaluate(re,{},A.canonical),Ge={horizontal:{},vertical:void 0},Ze=re.text;let St,wt=[0,0];if(Ze){const Zt=Ze.toString(),dn=c.get("text-letter-spacing").evaluate(re,{},A.canonical)*Ns,Gn=Zc(Zt)?dn:0,Qn=c.get("text-anchor").evaluate(re,{},A.canonical),Ni=c.get("text-variable-anchor");if(!Ni){const Ei=c.get("text-radial-offset").evaluate(re,{},A.canonical);wt=Ei?J_(Qn,[Ei*Ns,sm]):c.get("text-offset").evaluate(re,{},A.canonical).map(Ii=>Ii*Ns)}let Vi=O?"center":c.get("text-justify").evaluate(re,{},A.canonical);const Li=c.get("symbol-placement"),Ci=Li==="point"?c.get("text-max-width").evaluate(re,{},A.canonical)*Ns:0,_i=()=>{A.bucket.allowVerticalPlacement&&Xs(Zt)&&(Ge.vertical=ep(Ze,A.glyphMap,A.glyphPositions,A.imagePositions,de,Ci,D,Qn,"left",Gn,wt,h.WritingMode.vertical,!0,Li,Le,be))};if(!O&&Ni){const Ei=Vi==="auto"?Ni.map(ci=>dA(ci)):[Vi];let Ii=!1;for(let ci=0;ci<Ei.length;ci++){const dr=Ei[ci];if(!Ge.horizontal[dr])if(Ii)Ge.horizontal[dr]=Ge.horizontal[0];else{const Ji=ep(Ze,A.glyphMap,A.glyphPositions,A.imagePositions,de,Ci,D,"center",dr,Gn,wt,h.WritingMode.horizontal,!1,Li,Le,be);Ji&&(Ge.horizontal[dr]=Ji,Ii=Ji.positionedLines.length===1)}}_i()}else{Vi==="auto"&&(Vi=dA(Qn));const Ei=ep(Ze,A.glyphMap,A.glyphPositions,A.imagePositions,de,Ci,D,Qn,Vi,Gn,wt,h.WritingMode.horizontal,!1,Li,Le,be);Ei&&(Ge.horizontal[Vi]=Ei),_i(),Xs(Zt)&&O&&H&&(Ge.vertical=ep(Ze,A.glyphMap,A.glyphPositions,A.imagePositions,de,Ci,D,Qn,Vi,Gn,wt,h.WritingMode.vertical,!1,Li,Le,be))}}let Yt=!1;if(re.icon&&re.icon.name){const Zt=A.imageMap[re.icon.name];Zt&&(St=dg(A.imagePositions[re.icon.name],c.get("icon-offset").evaluate(re,{},A.canonical),c.get("icon-anchor").evaluate(re,{},A.canonical)),Yt=!!Zt.sdf,A.bucket.sdfIcons===void 0?A.bucket.sdfIcons=Yt:A.bucket.sdfIcons!==Yt&&Fe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Zt.pixelRatio!==A.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(A.bucket.iconsNeedLinear=!0))}const pn=ey(Ge.horizontal)||Ge.vertical;A.bucket.iconsInText=!!pn&&pn.iconsInText,(pn||St)&&am(A.bucket,re,Ge,St,A.imageMap,B,Le,$e,wt,Yt,A.canonical)}A.showCollisionBoxes&&A.bucket.generateCollisionDebugBuffers()},h.perspective=function(A,c,m,B,D){var O,H=1/Math.tan(c/2);return A[0]=H/m,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=H,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,D!=null&&D!==1/0?(A[10]=(D+B)*(O=1/(B-D)),A[14]=2*D*B*O):(A[10]=-1,A[14]=-2*B),A},h.pick=function(A,c){const m={};for(let B=0;B<c.length;B++){const D=c[B];D in A&&(m[D]=A[D])}return m},h.plugin=ul,h.pointGeometry=Gt,h.polygonIntersectsPolygon=Vn,h.potpack=Yp,h.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],h.register=Mi,h.registerForPluginStateChange=function(A){return A({pluginStatus:da,pluginURL:Kl}),Mc.on("pluginStateChange",A),A},h.renderColorRamp=Q_,h.rotateX=function(A,c,m){var B=Math.sin(m),D=Math.cos(m),O=c[4],H=c[5],Y=c[6],re=c[7],de=c[8],be=c[9],Le=c[10],$e=c[11];return c!==A&&(A[0]=c[0],A[1]=c[1],A[2]=c[2],A[3]=c[3],A[12]=c[12],A[13]=c[13],A[14]=c[14],A[15]=c[15]),A[4]=O*D+de*B,A[5]=H*D+be*B,A[6]=Y*D+Le*B,A[7]=re*D+$e*B,A[8]=de*D-O*B,A[9]=be*D-H*B,A[10]=Le*D-Y*B,A[11]=$e*D-re*B,A},h.rotateZ=function(A,c,m){var B=Math.sin(m),D=Math.cos(m),O=c[0],H=c[1],Y=c[2],re=c[3],de=c[4],be=c[5],Le=c[6],$e=c[7];return c!==A&&(A[8]=c[8],A[9]=c[9],A[10]=c[10],A[11]=c[11],A[12]=c[12],A[13]=c[13],A[14]=c[14],A[15]=c[15]),A[0]=O*D+de*B,A[1]=H*D+be*B,A[2]=Y*D+Le*B,A[3]=re*D+$e*B,A[4]=de*D-O*B,A[5]=be*D-H*B,A[6]=Le*D-Y*B,A[7]=$e*D-re*B,A},h.scale=function(A,c,m){var B=m[0],D=m[1],O=m[2];return A[0]=c[0]*B,A[1]=c[1]*B,A[2]=c[2]*B,A[3]=c[3]*B,A[4]=c[4]*D,A[5]=c[5]*D,A[6]=c[6]*D,A[7]=c[7]*D,A[8]=c[8]*O,A[9]=c[9]*O,A[10]=c[10]*O,A[11]=c[11]*O,A[12]=c[12],A[13]=c[13],A[14]=c[14],A[15]=c[15],A},h.scale$1=function(A,c,m){return A[0]=c[0]*m,A[1]=c[1]*m,A[2]=c[2]*m,A},h.setCacheLimits=function(A,c){Wn=A,Bi=c},h.setRTLTextPlugin=function(A,c,m=!1){if(da===xu||da===Sc||da===uc)throw new Error("setRTLTextPlugin cannot be called multiple times.");Kl=On.resolveURL(A),da=xu,Ic=c,cl(),m||bu()},h.spec=$t,h.sphericalToCartesian=function([A,c,m]){return c+=90,c*=Math.PI/180,m*=Math.PI/180,{x:A*Math.cos(c)*Math.sin(m),y:A*Math.sin(c)*Math.sin(m),z:A*Math.cos(m)}},h.sqrLen=function(A){var c=A[0],m=A[1];return c*c+m*m},h.sub=function(A,c,m){return A[0]=c[0]-m[0],A[1]=c[1]-m[1],A[2]=c[2]-m[2],A},h.toEvaluationFeature=nn,h.transformMat3=function(A,c,m){var B=c[0],D=c[1],O=c[2];return A[0]=B*m[0]+D*m[3]+O*m[6],A[1]=B*m[1]+D*m[4]+O*m[7],A[2]=B*m[2]+D*m[5]+O*m[8],A},h.transformMat4=Cu,h.transformMat4$1=function(A,c,m){var B=c[0],D=c[1];return A[0]=m[0]*B+m[4]*D+m[12],A[1]=m[1]*B+m[5]*D+m[13],A},h.translate=function(A,c,m){var B,D,O,H,Y,re,de,be,Le,$e,Ge,Ze,St=m[0],wt=m[1],Yt=m[2];return c===A?(A[12]=c[0]*St+c[4]*wt+c[8]*Yt+c[12],A[13]=c[1]*St+c[5]*wt+c[9]*Yt+c[13],A[14]=c[2]*St+c[6]*wt+c[10]*Yt+c[14],A[15]=c[3]*St+c[7]*wt+c[11]*Yt+c[15]):(D=c[1],O=c[2],H=c[3],Y=c[4],re=c[5],de=c[6],be=c[7],Le=c[8],$e=c[9],Ge=c[10],Ze=c[11],A[0]=B=c[0],A[1]=D,A[2]=O,A[3]=H,A[4]=Y,A[5]=re,A[6]=de,A[7]=be,A[8]=Le,A[9]=$e,A[10]=Ge,A[11]=Ze,A[12]=B*St+Y*wt+Le*Yt+c[12],A[13]=D*St+re*wt+$e*Yt+c[13],A[14]=O*St+de*wt+Ge*Yt+c[14],A[15]=H*St+be*wt+Ze*Yt+c[15]),A},h.triggerPluginCompletionEvent=Za,h.unicodeBlockLookup=wi,h.uniqueId=function(){return Ae++},h.validateCustomStyleLayer=function(A){const c=[],m=A.id;return m===void 0&&c.push({message:`layers.${m}: missing required property "id"`}),A.render===void 0&&c.push({message:`layers.${m}: missing required method "render"`}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&c.push({message:`layers.${m}: property "renderingMode" must be either "2d" or "3d"`}),c},h.validateLight=qs,h.validateStyle=po,h.vectorTile=td,h.warnOnce=Fe,h.wrap=te}),f(["./shared"],function(h){function s(Pe){const pe=typeof Pe;if(pe==="number"||pe==="boolean"||pe==="string"||Pe==null)return JSON.stringify(Pe);if(Array.isArray(Pe)){let Ke="[";for(const _t of Pe)Ke+=`${s(_t)},`;return`${Ke}]`}const we=Object.keys(Pe).sort();let je="{";for(let Ke=0;Ke<we.length;Ke++)je+=`${JSON.stringify(we[Ke])}:${s(Pe[we[Ke]])},`;return`${je}}`}function U(Pe){let pe="";for(const we of h.refProperties)pe+=`/${s(Pe[we])}`;return pe}class ${constructor(pe){this.keyCache={},pe&&this.replace(pe)}replace(pe){this._layerConfigs={},this._layers={},this.update(pe,[])}update(pe,we){for(const Ke of pe){this._layerConfigs[Ke.id]=Ke;const _t=this._layers[Ke.id]=h.createStyleLayer(Ke);_t._featureFilter=h.createFilter(_t.filter),this.keyCache[Ke.id]&&delete this.keyCache[Ke.id]}for(const Ke of we)delete this.keyCache[Ke],delete this._layerConfigs[Ke],delete this._layers[Ke];this.familiesBySource={};const je=function(Ke,_t){const qe={};for(let Je=0;Je<Ke.length;Je++){const mt=_t&&_t[Ke[Je].id]||U(Ke[Je]);_t&&(_t[Ke[Je].id]=mt);let Jt=qe[mt];Jt||(Jt=qe[mt]=[]),Jt.push(Ke[Je])}const Oe=[];for(const Je in qe)Oe.push(qe[Je]);return Oe}(Object.values(this._layerConfigs),this.keyCache);for(const Ke of je){const _t=Ke.map(Sn=>this._layers[Sn.id]),qe=_t[0];if(qe.visibility==="none")continue;const Oe=qe.source||"";let Je=this.familiesBySource[Oe];Je||(Je=this.familiesBySource[Oe]={});const mt=qe.sourceLayer||"_geojsonTileLayer";let Jt=Je[mt];Jt||(Jt=Je[mt]=[]),Jt.push(_t)}}}class V{constructor(pe){const we={},je=[];for(const Oe in pe){const Je=pe[Oe],mt=we[Oe]={};for(const Jt in Je){const Sn=Je[+Jt];if(!Sn||Sn.bitmap.width===0||Sn.bitmap.height===0)continue;const an={x:0,y:0,w:Sn.bitmap.width+2,h:Sn.bitmap.height+2};je.push(an),mt[Jt]={rect:an,metrics:Sn.metrics}}}const{w:Ke,h:_t}=h.potpack(je),qe=new h.AlphaImage({width:Ke||1,height:_t||1});for(const Oe in pe){const Je=pe[Oe];for(const mt in Je){const Jt=Je[+mt];if(!Jt||Jt.bitmap.width===0||Jt.bitmap.height===0)continue;const Sn=we[Oe][mt].rect;h.AlphaImage.copy(Jt.bitmap,qe,{x:0,y:0},{x:Sn.x+1,y:Sn.y+1},Jt.bitmap)}}this.image=qe,this.positions=we}}h.register("GlyphAtlas",V);class q{constructor(pe){this.tileID=new h.OverscaledTileID(pe.tileID.overscaledZ,pe.tileID.wrap,pe.tileID.canonical.z,pe.tileID.canonical.x,pe.tileID.canonical.y),this.uid=pe.uid,this.zoom=pe.zoom,this.pixelRatio=pe.pixelRatio,this.tileSize=pe.tileSize,this.source=pe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=pe.showCollisionBoxes,this.collectResourceTiming=!!pe.collectResourceTiming,this.returnDependencies=!!pe.returnDependencies,this.promoteId=pe.promoteId}parse(pe,we,je,Ke,_t){this.status="parsing",this.data=pe,this.collisionBoxArray=new h.CollisionBoxArray;const qe=new h.DictionaryCoder(Object.keys(pe.layers).sort()),Oe=new h.FeatureIndex(this.tileID,this.promoteId);Oe.bucketLayerIDs=[];const Je={},mt={featureIndex:Oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:je},Jt=we.familiesBySource[this.source];for(const mr in Jt){const Hr=pe.layers[mr];if(!Hr)continue;Hr.version===1&&h.warnOnce(`Vector tile source "${this.source}" layer "${mr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const fo=qe.encode(mr),xo=[];for(let hs=0;hs<Hr.length;hs++){const Yo=Hr.feature(hs),hn=Oe.getId(Yo,mr);xo.push({feature:Yo,id:hn,index:hs,sourceLayerIndex:fo})}for(const hs of Jt[mr]){const Yo=hs[0];Yo.source!==this.source&&h.warnOnce(`layer.source = ${Yo.source} does not equal this.source = ${this.source}`),Yo.minzoom&&this.zoom<Math.floor(Yo.minzoom)||Yo.maxzoom&&this.zoom>=Yo.maxzoom||Yo.visibility!=="none"&&(te(hs,this.zoom,je),(Je[Yo.id]=Yo.createBucket({index:Oe.bucketLayerIDs.length,layers:hs,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:fo,sourceID:this.source})).populate(xo,mt,this.tileID.canonical),Oe.bucketLayerIDs.push(hs.map(hn=>hn.id)))}}let Sn,an,gn,mi;const yi=h.mapObject(mt.glyphDependencies,mr=>Object.keys(mr).map(Number));Object.keys(yi).length?Ke.send("getGlyphs",{uid:this.uid,stacks:yi},(mr,Hr)=>{Sn||(Sn=mr,an=Hr,Gr.call(this))}):an={};const cr=Object.keys(mt.iconDependencies);cr.length?Ke.send("getImages",{icons:cr,source:this.source,tileID:this.tileID,type:"icons"},(mr,Hr)=>{Sn||(Sn=mr,gn=Hr,Gr.call(this))}):gn={};const xr=Object.keys(mt.patternDependencies);function Gr(){if(Sn)return _t(Sn);if(an&&gn&&mi){const mr=new V(an),Hr=new h.ImageAtlas(gn,mi);for(const fo in Je){const xo=Je[fo];xo instanceof h.SymbolBucket?(te(xo.layers,this.zoom,je),h.performSymbolLayout({bucket:xo,glyphMap:an,glyphPositions:mr.positions,imageMap:gn,imagePositions:Hr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):xo.hasPattern&&(xo instanceof h.LineBucket||xo instanceof h.FillBucket||xo instanceof h.FillExtrusionBucket)&&(te(xo.layers,this.zoom,je),xo.addFeatures(mt,this.tileID.canonical,Hr.patternPositions))}this.status="done",_t(null,{buckets:Object.values(Je).filter(fo=>!fo.isEmpty()),featureIndex:Oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mr.image,imageAtlas:Hr,glyphMap:this.returnDependencies?an:null,iconMap:this.returnDependencies?gn:null,glyphPositions:this.returnDependencies?mr.positions:null})}}xr.length?Ke.send("getImages",{icons:xr,source:this.source,tileID:this.tileID,type:"patterns"},(mr,Hr)=>{Sn||(Sn=mr,mi=Hr,Gr.call(this))}):mi={},Gr.call(this)}}function te(Pe,pe,we){const je=new h.EvaluationParameters(pe);for(const Ke of Pe)Ke.recalculate(je,we)}function he(Pe,pe){const we=h.getArrayBuffer(Pe.request,(je,Ke,_t,qe)=>{je?pe(je):Ke&&pe(null,{vectorTile:new h.vectorTile.VectorTile(new h.pbf(Ke)),rawData:Ke,cacheControl:_t,expires:qe})});return()=>{we.cancel(),pe()}}class Ae{constructor(pe,we,je,Ke){this.actor=pe,this.layerIndex=we,this.availableImages=je,this.loadVectorData=Ke||he,this.loading={},this.loaded={}}loadTile(pe,we){const je=pe.uid;this.loading||(this.loading={});const Ke=!!(pe&&pe.request&&pe.request.collectResourceTiming)&&new h.RequestPerformance(pe.request),_t=this.loading[je]=new q(pe);_t.abort=this.loadVectorData(pe,(qe,Oe)=>{if(delete this.loading[je],qe||!Oe)return _t.status="done",this.loaded[je]=_t,we(qe);const Je=Oe.rawData,mt={};Oe.expires&&(mt.expires=Oe.expires),Oe.cacheControl&&(mt.cacheControl=Oe.cacheControl);const Jt={};if(Ke){const Sn=Ke.finish();Sn&&(Jt.resourceTiming=JSON.parse(JSON.stringify(Sn)))}_t.vectorTile=Oe.vectorTile,_t.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Sn,an)=>{if(Sn||!an)return we(Sn);we(null,h.extend({rawTileData:Je.slice(0)},an,mt,Jt))}),this.loaded=this.loaded||{},this.loaded[je]=_t})}reloadTile(pe,we){const je=this.loaded,Ke=pe.uid,_t=this;if(je&&je[Ke]){const qe=je[Ke];qe.showCollisionBoxes=pe.showCollisionBoxes;const Oe=(Je,mt)=>{const Jt=qe.reloadCallback;Jt&&(delete qe.reloadCallback,qe.parse(qe.vectorTile,_t.layerIndex,this.availableImages,_t.actor,Jt)),we(Je,mt)};qe.status==="parsing"?qe.reloadCallback=Oe:qe.status==="done"&&(qe.vectorTile?qe.parse(qe.vectorTile,this.layerIndex,this.availableImages,this.actor,Oe):Oe())}}abortTile(pe,we){const je=this.loading,Ke=pe.uid;je&&je[Ke]&&je[Ke].abort&&(je[Ke].abort(),delete je[Ke]),we()}removeTile(pe,we){const je=this.loaded,Ke=pe.uid;je&&je[Ke]&&delete je[Ke],we()}}class De{constructor(){this.loaded={}}loadTile(pe,we){const{uid:je,encoding:Ke,rawImageData:_t}=pe,qe=h.isImageBitmap(_t)?this.getImageData(_t):_t,Oe=new h.DEMData(je,qe,Ke);this.loaded=this.loaded||{},this.loaded[je]=Oe,we(null,Oe)}getImageData(pe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(pe.width,pe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=pe.width,this.offscreenCanvas.height=pe.height,this.offscreenCanvasContext.drawImage(pe,0,0,pe.width,pe.height);const we=this.offscreenCanvasContext.getImageData(-1,-1,pe.width+2,pe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new h.RGBAImage({width:we.width,height:we.height},we.data)}removeTile(pe){const we=this.loaded,je=pe.uid;we&&we[je]&&delete we[je]}}var ke=function Pe(pe,we){var je,Ke=pe&&pe.type;if(Ke==="FeatureCollection")for(je=0;je<pe.features.length;je++)Pe(pe.features[je],we);else if(Ke==="GeometryCollection")for(je=0;je<pe.geometries.length;je++)Pe(pe.geometries[je],we);else if(Ke==="Feature")Pe(pe.geometry,we);else if(Ke==="Polygon")xe(pe.coordinates,we);else if(Ke==="MultiPolygon")for(je=0;je<pe.coordinates.length;je++)xe(pe.coordinates[je],we);return pe};function xe(Pe,pe){if(Pe.length!==0){Te(Pe[0],pe);for(var we=1;we<Pe.length;we++)Te(Pe[we],!pe)}}function Te(Pe,pe){for(var we=0,je=0,Ke=0,_t=Pe.length,qe=_t-1;Ke<_t;qe=Ke++){var Oe=(Pe[Ke][0]-Pe[qe][0])*(Pe[qe][1]+Pe[Ke][1]),Je=we+Oe;je+=Math.abs(we)>=Math.abs(Oe)?we-Je+Oe:Oe-Je+we,we=Je}we+je>=0!=!!pe&&Pe.reverse()}const Ee=h.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Fe{constructor(pe){this._feature=pe,this.extent=h.EXTENT,this.type=pe.type,this.properties=pe.tags,"id"in pe&&!isNaN(pe.id)&&(this.id=parseInt(pe.id,10))}loadGeometry(){if(this._feature.type===1){const pe=[];for(const we of this._feature.geometry)pe.push([new h.pointGeometry(we[0],we[1])]);return pe}{const pe=[];for(const we of this._feature.geometry){const je=[];for(const Ke of we)je.push(new h.pointGeometry(Ke[0],Ke[1]));pe.push(je)}return pe}}toGeoJSON(pe,we,je){return Ee.call(this,pe,we,je)}}class Se{constructor(pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.EXTENT,this.length=pe.length,this._features=pe}feature(pe){return new Fe(this._features[pe])}}var nt={exports:{}},xt=h.pointGeometry,Bt=h.vectorTile.VectorTileFeature,Xe=qt;function qt(Pe,pe){this.options=pe||{},this.features=Pe,this.length=Pe.length}function rn(Pe,pe){this.id=typeof Pe.id=="number"?Pe.id:void 0,this.type=Pe.type,this.rawGeometry=Pe.type===1?[Pe.geometry]:Pe.geometry,this.properties=Pe.tags,this.extent=pe||4096}qt.prototype.feature=function(Pe){return new rn(this.features[Pe],this.options.extent)},rn.prototype.loadGeometry=function(){var Pe=this.rawGeometry;this.geometry=[];for(var pe=0;pe<Pe.length;pe++){for(var we=Pe[pe],je=[],Ke=0;Ke<we.length;Ke++)je.push(new xt(we[Ke][0],we[Ke][1]));this.geometry.push(je)}return this.geometry},rn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pe=this.geometry,pe=1/0,we=-1/0,je=1/0,Ke=-1/0,_t=0;_t<Pe.length;_t++)for(var qe=Pe[_t],Oe=0;Oe<qe.length;Oe++){var Je=qe[Oe];pe=Math.min(pe,Je.x),we=Math.max(we,Je.x),je=Math.min(je,Je.y),Ke=Math.max(Ke,Je.y)}return[pe,je,we,Ke]},rn.prototype.toGeoJSON=Bt.prototype.toGeoJSON;var Ut=h.pbf,Kt=Xe;function On(Pe){var pe=new Ut;return function(we,je){for(var Ke in we.layers)je.writeMessage(3,Gt,we.layers[Ke])}(Pe,pe),pe.finish()}function Gt(Pe,pe){var we;pe.writeVarintField(15,Pe.version||1),pe.writeStringField(1,Pe.name||""),pe.writeVarintField(5,Pe.extent||4096);var je={keys:[],values:[],keycache:{},valuecache:{}};for(we=0;we<Pe.length;we++)je.feature=Pe.feature(we),pe.writeMessage(2,Rn,je);var Ke=je.keys;for(we=0;we<Ke.length;we++)pe.writeStringField(3,Ke[we]);var _t=je.values;for(we=0;we<_t.length;we++)pe.writeMessage(4,Wn,_t[we])}function Rn(Pe,pe){var we=Pe.feature;we.id!==void 0&&pe.writeVarintField(1,we.id),pe.writeMessage(2,mn,Pe),pe.writeVarintField(3,we.type),pe.writeMessage(4,Xn,we)}function mn(Pe,pe){var we=Pe.feature,je=Pe.keys,Ke=Pe.values,_t=Pe.keycache,qe=Pe.valuecache;for(var Oe in we.properties){var Je=we.properties[Oe],mt=_t[Oe];if(Je!==null){mt===void 0&&(je.push(Oe),_t[Oe]=mt=je.length-1),pe.writeVarint(mt);var Jt=typeof Je;Jt!=="string"&&Jt!=="boolean"&&Jt!=="number"&&(Je=JSON.stringify(Je));var Sn=Jt+":"+Je,an=qe[Sn];an===void 0&&(Ke.push(Je),qe[Sn]=an=Ke.length-1),pe.writeVarint(an)}}}function Cn(Pe,pe){return(pe<<3)+(7&Pe)}function Qt(Pe){return Pe<<1^Pe>>31}function Xn(Pe,pe){for(var we=Pe.loadGeometry(),je=Pe.type,Ke=0,_t=0,qe=we.length,Oe=0;Oe<qe;Oe++){var Je=we[Oe],mt=1;je===1&&(mt=Je.length),pe.writeVarint(Cn(1,mt));for(var Jt=je===3?Je.length-1:Je.length,Sn=0;Sn<Jt;Sn++){Sn===1&&je!==1&&pe.writeVarint(Cn(2,Jt-1));var an=Je[Sn].x-Ke,gn=Je[Sn].y-_t;pe.writeVarint(Qt(an)),pe.writeVarint(Qt(gn)),Ke+=an,_t+=gn}je===3&&pe.writeVarint(Cn(7,1))}}function Wn(Pe,pe){var we=typeof Pe;we==="string"?pe.writeStringField(1,Pe):we==="boolean"?pe.writeBooleanField(7,Pe):we==="number"&&(Pe%1!=0?pe.writeDoubleField(3,Pe):Pe<0?pe.writeSVarintField(6,Pe):pe.writeVarintField(5,Pe))}function Bi(Pe,pe,we,je,Ke,_t){if(Ke-je<=we)return;const qe=je+Ke>>1;Bn(Pe,pe,qe,je,Ke,_t%2),Bi(Pe,pe,we,je,qe-1,_t+1),Bi(Pe,pe,we,qe+1,Ke,_t+1)}function Bn(Pe,pe,we,je,Ke,_t){for(;Ke>je;){if(Ke-je>600){const mt=Ke-je+1,Jt=we-je+1,Sn=Math.log(mt),an=.5*Math.exp(2*Sn/3),gn=.5*Math.sqrt(Sn*an*(mt-an)/mt)*(Jt-mt/2<0?-1:1);Bn(Pe,pe,we,Math.max(je,Math.floor(we-Jt*an/mt+gn)),Math.min(Ke,Math.floor(we+(mt-Jt)*an/mt+gn)),_t)}const qe=pe[2*we+_t];let Oe=je,Je=Ke;for(Hn(Pe,pe,je,we),pe[2*Ke+_t]>qe&&Hn(Pe,pe,je,Ke);Oe<Je;){for(Hn(Pe,pe,Oe,Je),Oe++,Je--;pe[2*Oe+_t]<qe;)Oe++;for(;pe[2*Je+_t]>qe;)Je--}pe[2*je+_t]===qe?Hn(Pe,pe,je,Je):(Je++,Hn(Pe,pe,Je,Ke)),Je<=we&&(je=Je+1),we<=Je&&(Ke=Je-1)}}function Hn(Pe,pe,we,je){ei(Pe,we,je),ei(pe,2*we,2*je),ei(pe,2*we+1,2*je+1)}function ei(Pe,pe,we){const je=Pe[pe];Pe[pe]=Pe[we],Pe[we]=je}function tr(Pe,pe,we,je){const Ke=Pe-we,_t=pe-je;return Ke*Ke+_t*_t}nt.exports=On,nt.exports.fromVectorTileJs=On,nt.exports.fromGeojsonVt=function(Pe,pe){pe=pe||{};var we={};for(var je in Pe)we[je]=new Kt(Pe[je].features,pe),we[je].name=je,we[je].version=pe.version,we[je].extent=pe.extent;return On({layers:we})},nt.exports.GeoJSONWrapper=Kt;const ri=Pe=>Pe[0],zi=Pe=>Pe[1];class Vr{constructor(pe,we=ri,je=zi,Ke=64,_t=Float64Array){this.nodeSize=Ke,this.points=pe;const qe=pe.length<65536?Uint16Array:Uint32Array,Oe=this.ids=new qe(pe.length),Je=this.coords=new _t(2*pe.length);for(let mt=0;mt<pe.length;mt++)Oe[mt]=mt,Je[2*mt]=we(pe[mt]),Je[2*mt+1]=je(pe[mt]);Bi(Oe,Je,Ke,0,Oe.length-1,0)}range(pe,we,je,Ke){return function(_t,qe,Oe,Je,mt,Jt,Sn){const an=[0,_t.length-1,0],gn=[];let mi,yi;for(;an.length;){const cr=an.pop(),xr=an.pop(),Gr=an.pop();if(xr-Gr<=Sn){for(let fo=Gr;fo<=xr;fo++)mi=qe[2*fo],yi=qe[2*fo+1],mi>=Oe&&mi<=mt&&yi>=Je&&yi<=Jt&&gn.push(_t[fo]);continue}const mr=Math.floor((Gr+xr)/2);mi=qe[2*mr],yi=qe[2*mr+1],mi>=Oe&&mi<=mt&&yi>=Je&&yi<=Jt&&gn.push(_t[mr]);const Hr=(cr+1)%2;(cr===0?Oe<=mi:Je<=yi)&&(an.push(Gr),an.push(mr-1),an.push(Hr)),(cr===0?mt>=mi:Jt>=yi)&&(an.push(mr+1),an.push(xr),an.push(Hr))}return gn}(this.ids,this.coords,pe,we,je,Ke,this.nodeSize)}within(pe,we,je){return function(Ke,_t,qe,Oe,Je,mt){const Jt=[0,Ke.length-1,0],Sn=[],an=Je*Je;for(;Jt.length;){const gn=Jt.pop(),mi=Jt.pop(),yi=Jt.pop();if(mi-yi<=mt){for(let Hr=yi;Hr<=mi;Hr++)tr(_t[2*Hr],_t[2*Hr+1],qe,Oe)<=an&&Sn.push(Ke[Hr]);continue}const cr=Math.floor((yi+mi)/2),xr=_t[2*cr],Gr=_t[2*cr+1];tr(xr,Gr,qe,Oe)<=an&&Sn.push(Ke[cr]);const mr=(gn+1)%2;(gn===0?qe-Je<=xr:Oe-Je<=Gr)&&(Jt.push(yi),Jt.push(cr-1),Jt.push(mr)),(gn===0?qe+Je>=xr:Oe+Je>=Gr)&&(Jt.push(cr+1),Jt.push(mi),Jt.push(mr))}return Sn}(this.ids,this.coords,pe,we,je,this.nodeSize)}}const sr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Pe=>Pe},li=Math.fround||(Qi=new Float32Array(1),Pe=>(Qi[0]=+Pe,Qi[0]));var Qi;class Ki{constructor(pe){this.options=Ur(Object.create(sr),pe),this.trees=new Array(this.options.maxZoom+1)}load(pe){const{log:we,minZoom:je,maxZoom:Ke,nodeSize:_t}=this.options;we&&console.time("total time");const qe=`prepare ${pe.length} points`;we&&console.time(qe),this.points=pe;let Oe=[];for(let Je=0;Je<pe.length;Je++)pe[Je].geometry&&Oe.push(di(pe[Je],Je));this.trees[Ke+1]=new Vr(Oe,jr,pr,_t,Float32Array),we&&console.timeEnd(qe);for(let Je=Ke;Je>=je;Je--){const mt=+Date.now();Oe=this._cluster(Oe,Je),this.trees[Je]=new Vr(Oe,jr,pr,_t,Float32Array),we&&console.log("z%d: %d clusters in %dms",Je,Oe.length,+Date.now()-mt)}return we&&console.timeEnd("total time"),this}getClusters(pe,we){let je=((pe[0]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,pe[1]));let _t=pe[2]===180?180:((pe[2]+180)%360+360)%360-180;const qe=Math.max(-90,Math.min(90,pe[3]));if(pe[2]-pe[0]>=360)je=-180,_t=180;else if(je>_t){const Jt=this.getClusters([je,Ke,180,qe],we),Sn=this.getClusters([-180,Ke,_t,qe],we);return Jt.concat(Sn)}const Oe=this.trees[this._limitZoom(we)],Je=Oe.range(Ri(je),hr(qe),Ri(_t),hr(Ke)),mt=[];for(const Jt of Je){const Sn=Oe.points[Jt];mt.push(Sn.numPoints?Ir(Sn):this.points[Sn.index])}return mt}getChildren(pe){const we=this._getOriginId(pe),je=this._getOriginZoom(pe),Ke="No cluster with the specified id.",_t=this.trees[je];if(!_t)throw new Error(Ke);const qe=_t.points[we];if(!qe)throw new Error(Ke);const Oe=this.options.radius/(this.options.extent*Math.pow(2,je-1)),Je=_t.within(qe.x,qe.y,Oe),mt=[];for(const Jt of Je){const Sn=_t.points[Jt];Sn.parentId===pe&&mt.push(Sn.numPoints?Ir(Sn):this.points[Sn.index])}if(mt.length===0)throw new Error(Ke);return mt}getLeaves(pe,we,je){const Ke=[];return this._appendLeaves(Ke,pe,we=we||10,je=je||0,0),Ke}getTile(pe,we,je){const Ke=this.trees[this._limitZoom(pe)],_t=Math.pow(2,pe),{extent:qe,radius:Oe}=this.options,Je=Oe/qe,mt=(je-Je)/_t,Jt=(je+1+Je)/_t,Sn={features:[]};return this._addTileFeatures(Ke.range((we-Je)/_t,mt,(we+1+Je)/_t,Jt),Ke.points,we,je,_t,Sn),we===0&&this._addTileFeatures(Ke.range(1-Je/_t,mt,1,Jt),Ke.points,_t,je,_t,Sn),we===_t-1&&this._addTileFeatures(Ke.range(0,mt,Je/_t,Jt),Ke.points,-1,je,_t,Sn),Sn.features.length?Sn:null}getClusterExpansionZoom(pe){let we=this._getOriginZoom(pe)-1;for(;we<=this.options.maxZoom;){const je=this.getChildren(pe);if(we++,je.length!==1)break;pe=je[0].properties.cluster_id}return we}_appendLeaves(pe,we,je,Ke,_t){const qe=this.getChildren(we);for(const Oe of qe){const Je=Oe.properties;if(Je&&Je.cluster?_t+Je.point_count<=Ke?_t+=Je.point_count:_t=this._appendLeaves(pe,Je.cluster_id,je,Ke,_t):_t<Ke?_t++:pe.push(Oe),pe.length===je)break}return _t}_addTileFeatures(pe,we,je,Ke,_t,qe){for(const Oe of pe){const Je=we[Oe],mt=Je.numPoints;let Jt,Sn,an;if(mt)Jt=nr(Je),Sn=Je.x,an=Je.y;else{const yi=this.points[Je.index];Jt=yi.properties,Sn=Ri(yi.geometry.coordinates[0]),an=hr(yi.geometry.coordinates[1])}const gn={type:1,geometry:[[Math.round(this.options.extent*(Sn*_t-je)),Math.round(this.options.extent*(an*_t-Ke))]],tags:Jt};let mi;mt?mi=Je.id:this.options.generateId?mi=Je.index:this.points[Je.index].id&&(mi=this.points[Je.index].id),mi!==void 0&&(gn.id=mi),qe.features.push(gn)}}_limitZoom(pe){return Math.max(this.options.minZoom,Math.min(Math.floor(+pe),this.options.maxZoom+1))}_cluster(pe,we){const je=[],{radius:Ke,extent:_t,reduce:qe,minPoints:Oe}=this.options,Je=Ke/(_t*Math.pow(2,we));for(let mt=0;mt<pe.length;mt++){const Jt=pe[mt];if(Jt.zoom<=we)continue;Jt.zoom=we;const Sn=this.trees[we+1],an=Sn.within(Jt.x,Jt.y,Je),gn=Jt.numPoints||1;let mi=gn;for(const yi of an){const cr=Sn.points[yi];cr.zoom>we&&(mi+=cr.numPoints||1)}if(mi>gn&&mi>=Oe){let yi=Jt.x*gn,cr=Jt.y*gn,xr=qe&&gn>1?this._map(Jt,!0):null;const Gr=(mt<<5)+(we+1)+this.points.length;for(const mr of an){const Hr=Sn.points[mr];if(Hr.zoom<=we)continue;Hr.zoom=we;const fo=Hr.numPoints||1;yi+=Hr.x*fo,cr+=Hr.y*fo,Hr.parentId=Gr,qe&&(xr||(xr=this._map(Jt,!0)),qe(xr,this._map(Hr)))}Jt.parentId=Gr,je.push(ji(yi/mi,cr/mi,Gr,mi,xr))}else if(je.push(Jt),mi>1)for(const yi of an){const cr=Sn.points[yi];cr.zoom<=we||(cr.zoom=we,je.push(cr))}}return je}_getOriginId(pe){return pe-this.points.length>>5}_getOriginZoom(pe){return(pe-this.points.length)%32}_map(pe,we){if(pe.numPoints)return we?Ur({},pe.properties):pe.properties;const je=this.points[pe.index].properties,Ke=this.options.map(je);return we&&Ke===je?Ur({},Ke):Ke}}function ji(Pe,pe,we,je,Ke){return{x:li(Pe),y:li(pe),zoom:1/0,id:we,parentId:-1,numPoints:je,properties:Ke}}function di(Pe,pe){const[we,je]=Pe.geometry.coordinates;return{x:li(Ri(we)),y:li(hr(je)),zoom:1/0,index:pe,parentId:-1}}function Ir(Pe){return{type:"Feature",id:Pe.id,properties:nr(Pe),geometry:{type:"Point",coordinates:[(pe=Pe.x,360*(pe-.5)),ir(Pe.y)]}};var pe}function nr(Pe){const pe=Pe.numPoints,we=pe>=1e4?`${Math.round(pe/1e3)}k`:pe>=1e3?Math.round(pe/100)/10+"k":pe;return Ur(Ur({},Pe.properties),{cluster:!0,cluster_id:Pe.id,point_count:pe,point_count_abbreviated:we})}function Ri(Pe){return Pe/360+.5}function hr(Pe){const pe=Math.sin(Pe*Math.PI/180),we=.5-.25*Math.log((1+pe)/(1-pe))/Math.PI;return we<0?0:we>1?1:we}function ir(Pe){const pe=(180-360*Pe)*Math.PI/180;return 360*Math.atan(Math.exp(pe))/Math.PI-90}function Ur(Pe,pe){for(const we in pe)Pe[we]=pe[we];return Pe}function jr(Pe){return Pe.x}function pr(Pe){return Pe.y}function Zr(Pe,pe,we,je){for(var Ke,_t=je,qe=we-pe>>1,Oe=we-pe,Je=Pe[pe],mt=Pe[pe+1],Jt=Pe[we],Sn=Pe[we+1],an=pe+3;an<we;an+=3){var gn=Eo(Pe[an],Pe[an+1],Je,mt,Jt,Sn);if(gn>_t)Ke=an,_t=gn;else if(gn===_t){var mi=Math.abs(an-qe);mi<Oe&&(Ke=an,Oe=mi)}}_t>je&&(Ke-pe>3&&Zr(Pe,pe,Ke,je),Pe[Ke+2]=_t,we-Ke>3&&Zr(Pe,Ke,we,je))}function Eo(Pe,pe,we,je,Ke,_t){var qe=Ke-we,Oe=_t-je;if(qe!==0||Oe!==0){var Je=((Pe-we)*qe+(pe-je)*Oe)/(qe*qe+Oe*Oe);Je>1?(we=Ke,je=_t):Je>0&&(we+=qe*Je,je+=Oe*Je)}return(qe=Pe-we)*qe+(Oe=pe-je)*Oe}function Ao(Pe,pe,we,je){var Ke={id:Pe===void 0?null:Pe,type:pe,geometry:we,tags:je,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(_t){var qe=_t.geometry,Oe=_t.type;if(Oe==="Point"||Oe==="MultiPoint"||Oe==="LineString")$t(_t,qe);else if(Oe==="Polygon"||Oe==="MultiLineString")for(var Je=0;Je<qe.length;Je++)$t(_t,qe[Je]);else if(Oe==="MultiPolygon")for(Je=0;Je<qe.length;Je++)for(var mt=0;mt<qe[Je].length;mt++)$t(_t,qe[Je][mt])}(Ke),Ke}function $t(Pe,pe){for(var we=0;we<pe.length;we+=3)Pe.minX=Math.min(Pe.minX,pe[we]),Pe.minY=Math.min(Pe.minY,pe[we+1]),Pe.maxX=Math.max(Pe.maxX,pe[we]),Pe.maxY=Math.max(Pe.maxY,pe[we+1])}function en(Pe,pe,we,je){if(pe.geometry){var Ke=pe.geometry.coordinates,_t=pe.geometry.type,qe=Math.pow(we.tolerance/((1<<we.maxZoom)*we.extent),2),Oe=[],Je=pe.id;if(we.promoteId?Je=pe.properties[we.promoteId]:we.generateId&&(Je=je||0),_t==="Point")Fr(Ke,Oe);else if(_t==="MultiPoint")for(var mt=0;mt<Ke.length;mt++)Fr(Ke[mt],Oe);else if(_t==="LineString")So(Ke,Oe,qe,!1);else if(_t==="MultiLineString"){if(we.lineMetrics){for(mt=0;mt<Ke.length;mt++)So(Ke[mt],Oe=[],qe,!1),Pe.push(Ao(Je,"LineString",Oe,pe.properties));return}er(Ke,Oe,qe,!1)}else if(_t==="Polygon")er(Ke,Oe,qe,!0);else{if(_t!=="MultiPolygon"){if(_t==="GeometryCollection"){for(mt=0;mt<pe.geometry.geometries.length;mt++)en(Pe,{id:Je,geometry:pe.geometry.geometries[mt],properties:pe.properties},we,je);return}throw new Error("Input data is not a valid GeoJSON object.")}for(mt=0;mt<Ke.length;mt++){var Jt=[];er(Ke[mt],Jt,qe,!0),Oe.push(Jt)}}Pe.push(Ao(Je,_t,Oe,pe.properties))}}function Fr(Pe,pe){pe.push(xi(Pe[0])),pe.push(Xi(Pe[1])),pe.push(0)}function So(Pe,pe,we,je){for(var Ke,_t,qe=0,Oe=0;Oe<Pe.length;Oe++){var Je=xi(Pe[Oe][0]),mt=Xi(Pe[Oe][1]);pe.push(Je),pe.push(mt),pe.push(0),Oe>0&&(qe+=je?(Ke*mt-Je*_t)/2:Math.sqrt(Math.pow(Je-Ke,2)+Math.pow(mt-_t,2))),Ke=Je,_t=mt}var Jt=pe.length-3;pe[2]=1,Zr(pe,0,Jt,we),pe[Jt+2]=1,pe.size=Math.abs(qe),pe.start=0,pe.end=pe.size}function er(Pe,pe,we,je){for(var Ke=0;Ke<Pe.length;Ke++){var _t=[];So(Pe[Ke],_t,we,je),pe.push(_t)}}function xi(Pe){return Pe/360+.5}function Xi(Pe){var pe=Math.sin(Pe*Math.PI/180),we=.5-.25*Math.log((1+pe)/(1-pe))/Math.PI;return we<0?0:we>1?1:we}function Un(Pe,pe,we,je,Ke,_t,qe,Oe){if(je/=pe,_t>=(we/=pe)&&qe<je)return Pe;if(qe<we||_t>=je)return null;for(var Je=[],mt=0;mt<Pe.length;mt++){var Jt=Pe[mt],Sn=Jt.geometry,an=Jt.type,gn=Ke===0?Jt.minX:Jt.minY,mi=Ke===0?Jt.maxX:Jt.maxY;if(gn>=we&&mi<je)Je.push(Jt);else if(!(mi<we||gn>=je)){var yi=[];if(an==="Point"||an==="MultiPoint")Oi(Sn,yi,we,je,Ke);else if(an==="LineString")bn(Sn,yi,we,je,Ke,!1,Oe.lineMetrics);else if(an==="MultiLineString")fi(Sn,yi,we,je,Ke,!1);else if(an==="Polygon")fi(Sn,yi,we,je,Ke,!0);else if(an==="MultiPolygon")for(var cr=0;cr<Sn.length;cr++){var xr=[];fi(Sn[cr],xr,we,je,Ke,!0),xr.length&&yi.push(xr)}if(yi.length){if(Oe.lineMetrics&&an==="LineString"){for(cr=0;cr<yi.length;cr++)Je.push(Ao(Jt.id,an,yi[cr],Jt.tags));continue}an!=="LineString"&&an!=="MultiLineString"||(yi.length===1?(an="LineString",yi=yi[0]):an="MultiLineString"),an!=="Point"&&an!=="MultiPoint"||(an=yi.length===3?"Point":"MultiPoint"),Je.push(Ao(Jt.id,an,yi,Jt.tags))}}}return Je.length?Je:null}function Oi(Pe,pe,we,je,Ke){for(var _t=0;_t<Pe.length;_t+=3){var qe=Pe[_t+Ke];qe>=we&&qe<=je&&(pe.push(Pe[_t]),pe.push(Pe[_t+1]),pe.push(Pe[_t+2]))}}function bn(Pe,pe,we,je,Ke,_t,qe){for(var Oe,Je,mt=bi(Pe),Jt=Ke===0?Ie:Ce,Sn=Pe.start,an=0;an<Pe.length-3;an+=3){var gn=Pe[an],mi=Pe[an+1],yi=Pe[an+2],cr=Pe[an+3],xr=Pe[an+4],Gr=Ke===0?gn:mi,mr=Ke===0?cr:xr,Hr=!1;qe&&(Oe=Math.sqrt(Math.pow(gn-cr,2)+Math.pow(mi-xr,2))),Gr<we?mr>we&&(Je=Jt(mt,gn,mi,cr,xr,we),qe&&(mt.start=Sn+Oe*Je)):Gr>je?mr<je&&(Je=Jt(mt,gn,mi,cr,xr,je),qe&&(mt.start=Sn+Oe*Je)):ot(mt,gn,mi,yi),mr<we&&Gr>=we&&(Je=Jt(mt,gn,mi,cr,xr,we),Hr=!0),mr>je&&Gr<=je&&(Je=Jt(mt,gn,mi,cr,xr,je),Hr=!0),!_t&&Hr&&(qe&&(mt.end=Sn+Oe*Je),pe.push(mt),mt=bi(Pe)),qe&&(Sn+=Oe)}var fo=Pe.length-3;gn=Pe[fo],mi=Pe[fo+1],yi=Pe[fo+2],(Gr=Ke===0?gn:mi)>=we&&Gr<=je&&ot(mt,gn,mi,yi),fo=mt.length-3,_t&&fo>=3&&(mt[fo]!==mt[0]||mt[fo+1]!==mt[1])&&ot(mt,mt[0],mt[1],mt[2]),mt.length&&pe.push(mt)}function bi(Pe){var pe=[];return pe.size=Pe.size,pe.start=Pe.start,pe.end=Pe.end,pe}function fi(Pe,pe,we,je,Ke,_t){for(var qe=0;qe<Pe.length;qe++)bn(Pe[qe],pe,we,je,Ke,_t,!1)}function ot(Pe,pe,we,je){Pe.push(pe),Pe.push(we),Pe.push(je)}function Ie(Pe,pe,we,je,Ke,_t){var qe=(_t-pe)/(je-pe);return Pe.push(_t),Pe.push(we+(Ke-we)*qe),Pe.push(1),qe}function Ce(Pe,pe,we,je,Ke,_t){var qe=(_t-we)/(Ke-we);return Pe.push(pe+(je-pe)*qe),Pe.push(_t),Pe.push(1),qe}function st(Pe,pe){for(var we=[],je=0;je<Pe.length;je++){var Ke,_t=Pe[je],qe=_t.type;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")Ke=ft(_t.geometry,pe);else if(qe==="MultiLineString"||qe==="Polygon"){Ke=[];for(var Oe=0;Oe<_t.geometry.length;Oe++)Ke.push(ft(_t.geometry[Oe],pe))}else if(qe==="MultiPolygon")for(Ke=[],Oe=0;Oe<_t.geometry.length;Oe++){for(var Je=[],mt=0;mt<_t.geometry[Oe].length;mt++)Je.push(ft(_t.geometry[Oe][mt],pe));Ke.push(Je)}we.push(Ao(_t.id,qe,Ke,_t.tags))}return we}function ft(Pe,pe){var we=[];we.size=Pe.size,Pe.start!==void 0&&(we.start=Pe.start,we.end=Pe.end);for(var je=0;je<Pe.length;je+=3)we.push(Pe[je]+pe,Pe[je+1],Pe[je+2]);return we}function kt(Pe,pe){if(Pe.transformed)return Pe;var we,je,Ke,_t=1<<Pe.z,qe=Pe.x,Oe=Pe.y;for(we=0;we<Pe.features.length;we++){var Je=Pe.features[we],mt=Je.geometry,Jt=Je.type;if(Je.geometry=[],Jt===1)for(je=0;je<mt.length;je+=2)Je.geometry.push(zt(mt[je],mt[je+1],pe,_t,qe,Oe));else for(je=0;je<mt.length;je++){var Sn=[];for(Ke=0;Ke<mt[je].length;Ke+=2)Sn.push(zt(mt[je][Ke],mt[je][Ke+1],pe,_t,qe,Oe));Je.geometry.push(Sn)}}return Pe.transformed=!0,Pe}function zt(Pe,pe,we,je,Ke,_t){return[Math.round(we*(Pe*je-Ke)),Math.round(we*(pe*je-_t))]}function Rt(Pe,pe,we,je,Ke){for(var _t=pe===Ke.maxZoom?0:Ke.tolerance/((1<<pe)*Ke.extent),qe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:we,y:je,z:pe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Oe=0;Oe<Pe.length;Oe++){qe.numFeatures++,yt(qe,Pe[Oe],_t,Ke);var Je=Pe[Oe].minX,mt=Pe[Oe].minY,Jt=Pe[Oe].maxX,Sn=Pe[Oe].maxY;Je<qe.minX&&(qe.minX=Je),mt<qe.minY&&(qe.minY=mt),Jt>qe.maxX&&(qe.maxX=Jt),Sn>qe.maxY&&(qe.maxY=Sn)}return qe}function yt(Pe,pe,we,je){var Ke=pe.geometry,_t=pe.type,qe=[];if(_t==="Point"||_t==="MultiPoint")for(var Oe=0;Oe<Ke.length;Oe+=3)qe.push(Ke[Oe]),qe.push(Ke[Oe+1]),Pe.numPoints++,Pe.numSimplified++;else if(_t==="LineString")Xt(qe,Ke,Pe,we,!1,!1);else if(_t==="MultiLineString"||_t==="Polygon")for(Oe=0;Oe<Ke.length;Oe++)Xt(qe,Ke[Oe],Pe,we,_t==="Polygon",Oe===0);else if(_t==="MultiPolygon")for(var Je=0;Je<Ke.length;Je++){var mt=Ke[Je];for(Oe=0;Oe<mt.length;Oe++)Xt(qe,mt[Oe],Pe,we,!0,Oe===0)}if(qe.length){var Jt=pe.tags||null;if(_t==="LineString"&&je.lineMetrics){for(var Sn in Jt={},pe.tags)Jt[Sn]=pe.tags[Sn];Jt.mapbox_clip_start=Ke.start/Ke.size,Jt.mapbox_clip_end=Ke.end/Ke.size}var an={geometry:qe,type:_t==="Polygon"||_t==="MultiPolygon"?3:_t==="LineString"||_t==="MultiLineString"?2:1,tags:Jt};pe.id!==null&&(an.id=pe.id),Pe.features.push(an)}}function Xt(Pe,pe,we,je,Ke,_t){var qe=je*je;if(je>0&&pe.size<(Ke?qe:je))we.numPoints+=pe.length/3;else{for(var Oe=[],Je=0;Je<pe.length;Je+=3)(je===0||pe[Je+2]>qe)&&(we.numSimplified++,Oe.push(pe[Je]),Oe.push(pe[Je+1])),we.numPoints++;Ke&&function(mt,Jt){for(var Sn=0,an=0,gn=mt.length,mi=gn-2;an<gn;mi=an,an+=2)Sn+=(mt[an]-mt[mi])*(mt[an+1]+mt[mi+1]);if(Sn>0===Jt)for(an=0,gn=mt.length;an<gn/2;an+=2){var yi=mt[an],cr=mt[an+1];mt[an]=mt[gn-2-an],mt[an+1]=mt[gn-1-an],mt[gn-2-an]=yi,mt[gn-1-an]=cr}}(Oe,_t),Pe.push(Oe)}}function Tn(Pe,pe){var we=(pe=this.options=function(Ke,_t){for(var qe in _t)Ke[qe]=_t[qe];return Ke}(Object.create(this.options),pe)).debug;if(we&&console.time("preprocess data"),pe.maxZoom<0||pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(pe.promoteId&&pe.generateId)throw new Error("promoteId and generateId cannot be used together.");var je=function(Ke,_t){var qe=[];if(Ke.type==="FeatureCollection")for(var Oe=0;Oe<Ke.features.length;Oe++)en(qe,Ke.features[Oe],_t,Oe);else en(qe,Ke.type==="Feature"?Ke:{geometry:Ke},_t);return qe}(Pe,pe);this.tiles={},this.tileCoords=[],we&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",pe.indexMaxZoom,pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),je=function(Ke,_t){var qe=_t.buffer/_t.extent,Oe=Ke,Je=Un(Ke,1,-1-qe,qe,0,-1,2,_t),mt=Un(Ke,1,1-qe,2+qe,0,-1,2,_t);return(Je||mt)&&(Oe=Un(Ke,1,-qe,1+qe,0,-1,2,_t)||[],Je&&(Oe=st(Je,1).concat(Oe)),mt&&(Oe=Oe.concat(st(mt,-1)))),Oe}(je,pe),je.length&&this.splitTile(je,0,0,0),we&&(je.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Fn(Pe,pe,we){return 32*((1<<Pe)*we+pe)+Pe}function zn(Pe,pe){const we=Pe.tileID.canonical;if(!this._geoJSONIndex)return pe(null,null);const je=this._geoJSONIndex.getTile(we.z,we.x,we.y);if(!je)return pe(null,null);const Ke=new Se(je.features);let _t=nt.exports(Ke);_t.byteOffset===0&&_t.byteLength===_t.buffer.byteLength||(_t=new Uint8Array(_t)),pe(null,{vectorTile:Ke,rawData:_t.buffer})}Tn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Tn.prototype.splitTile=function(Pe,pe,we,je,Ke,_t,qe){for(var Oe=[Pe,pe,we,je],Je=this.options,mt=Je.debug;Oe.length;){je=Oe.pop(),we=Oe.pop(),pe=Oe.pop(),Pe=Oe.pop();var Jt=1<<pe,Sn=Fn(pe,we,je),an=this.tiles[Sn];if(!an&&(mt>1&&console.time("creation"),an=this.tiles[Sn]=Rt(Pe,pe,we,je,Je),this.tileCoords.push({z:pe,x:we,y:je}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",pe,we,je,an.numFeatures,an.numPoints,an.numSimplified),console.timeEnd("creation"));var gn="z"+pe;this.stats[gn]=(this.stats[gn]||0)+1,this.total++}if(an.source=Pe,Ke){if(pe===Je.maxZoom||pe===Ke)continue;var mi=1<<Ke-pe;if(we!==Math.floor(_t/mi)||je!==Math.floor(qe/mi))continue}else if(pe===Je.indexMaxZoom||an.numPoints<=Je.indexMaxPoints)continue;if(an.source=null,Pe.length!==0){mt>1&&console.time("clipping");var yi,cr,xr,Gr,mr,Hr,fo=.5*Je.buffer/Je.extent,xo=.5-fo,hs=.5+fo,Yo=1+fo;yi=cr=xr=Gr=null,mr=Un(Pe,Jt,we-fo,we+hs,0,an.minX,an.maxX,Je),Hr=Un(Pe,Jt,we+xo,we+Yo,0,an.minX,an.maxX,Je),Pe=null,mr&&(yi=Un(mr,Jt,je-fo,je+hs,1,an.minY,an.maxY,Je),cr=Un(mr,Jt,je+xo,je+Yo,1,an.minY,an.maxY,Je),mr=null),Hr&&(xr=Un(Hr,Jt,je-fo,je+hs,1,an.minY,an.maxY,Je),Gr=Un(Hr,Jt,je+xo,je+Yo,1,an.minY,an.maxY,Je),Hr=null),mt>1&&console.timeEnd("clipping"),Oe.push(yi||[],pe+1,2*we,2*je),Oe.push(cr||[],pe+1,2*we,2*je+1),Oe.push(xr||[],pe+1,2*we+1,2*je),Oe.push(Gr||[],pe+1,2*we+1,2*je+1)}}},Tn.prototype.getTile=function(Pe,pe,we){var je=this.options,Ke=je.extent,_t=je.debug;if(Pe<0||Pe>24)return null;var qe=1<<Pe,Oe=Fn(Pe,pe=(pe%qe+qe)%qe,we);if(this.tiles[Oe])return kt(this.tiles[Oe],Ke);_t>1&&console.log("drilling down to z%d-%d-%d",Pe,pe,we);for(var Je,mt=Pe,Jt=pe,Sn=we;!Je&&mt>0;)mt--,Jt=Math.floor(Jt/2),Sn=Math.floor(Sn/2),Je=this.tiles[Fn(mt,Jt,Sn)];return Je&&Je.source?(_t>1&&console.log("found parent tile z%d-%d-%d",mt,Jt,Sn),_t>1&&console.time("drilling down"),this.splitTile(Je.source,mt,Jt,Sn,Pe,pe,we),_t>1&&console.timeEnd("drilling down"),this.tiles[Oe]?kt(this.tiles[Oe],Ke):null):null};class rr extends Ae{constructor(pe,we,je,Ke){super(pe,we,je,zn),Ke&&(this.loadGeoJSON=Ke)}loadData(pe,we){var je;(je=this._pendingRequest)===null||je===void 0||je.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ke=!!(pe&&pe.request&&pe.request.collectResourceTiming)&&new h.RequestPerformance(pe.request);this._pendingCallback=we,this._pendingRequest=this.loadGeoJSON(pe,(_t,qe)=>{if(delete this._pendingCallback,delete this._pendingRequest,_t||!qe)return we(_t);if(typeof qe!="object")return we(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`));{ke(qe,!0);try{if(pe.filter){const Je=h.createExpression(pe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Je.result==="error")throw new Error(Je.value.map(Jt=>`${Jt.key}: ${Jt.message}`).join(", "));qe={type:"FeatureCollection",features:qe.features.filter(Jt=>Je.value.evaluate({zoom:0},Jt))}}this._geoJSONIndex=pe.cluster?new Ki(function({superclusterOptions:Je,clusterProperties:mt}){if(!mt||!Je)return Je;const Jt={},Sn={},an={accumulated:null,zoom:0},gn={properties:null},mi=Object.keys(mt);for(const yi of mi){const[cr,xr]=mt[yi],Gr=h.createExpression(xr),mr=h.createExpression(typeof cr=="string"?[cr,["accumulated"],["get",yi]]:cr);Jt[yi]=Gr.value,Sn[yi]=mr.value}return Je.map=yi=>{gn.properties=yi;const cr={};for(const xr of mi)cr[xr]=Jt[xr].evaluate(an,gn);return cr},Je.reduce=(yi,cr)=>{gn.properties=cr;for(const xr of mi)an.accumulated=yi[xr],yi[xr]=Sn[xr].evaluate(an,gn)},Je}(pe)).load(qe.features):function(Je,mt){return new Tn(Je,mt)}(qe,pe.geojsonVtOptions)}catch(Je){return we(Je)}this.loaded={};const Oe={};if(Ke){const Je=Ke.finish();Je&&(Oe.resourceTiming={},Oe.resourceTiming[pe.source]=JSON.parse(JSON.stringify(Je)))}we(null,Oe)}})}reloadTile(pe,we){const je=this.loaded;return je&&je[pe.uid]?super.reloadTile(pe,we):this.loadTile(pe,we)}loadGeoJSON(pe,we){if(pe.request)return h.getJSON(pe.request,we);if(typeof pe.data=="string")try{we(null,JSON.parse(pe.data))}catch{we(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`))}else we(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(pe,we){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),we()}getClusterExpansionZoom(pe,we){try{we(null,this._geoJSONIndex.getClusterExpansionZoom(pe.clusterId))}catch(je){we(je)}}getClusterChildren(pe,we){try{we(null,this._geoJSONIndex.getChildren(pe.clusterId))}catch(je){we(je)}}getClusterLeaves(pe,we){try{we(null,this._geoJSONIndex.getLeaves(pe.clusterId,pe.limit,pe.offset))}catch(je){we(je)}}}class Zi{constructor(pe){this.self=pe,this.actor=new h.Actor(pe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Ae,geojson:rr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(we,je)=>{if(this.workerSourceTypes[we])throw new Error(`Worker source with name "${we}" already registered.`);this.workerSourceTypes[we]=je},this.self.registerRTLTextPlugin=we=>{if(h.plugin.isParsed())throw new Error("RTL text plugin already registered.");h.plugin.applyArabicShaping=we.applyArabicShaping,h.plugin.processBidirectionalText=we.processBidirectionalText,h.plugin.processStyledBidirectionalText=we.processStyledBidirectionalText}}setReferrer(pe,we){this.referrer=we}setImages(pe,we,je){this.availableImages[pe]=we;for(const Ke in this.workerSources[pe]){const _t=this.workerSources[pe][Ke];for(const qe in _t)_t[qe].availableImages=we}je()}setLayers(pe,we,je){this.getLayerIndex(pe).replace(we),je()}updateLayers(pe,we,je){this.getLayerIndex(pe).update(we.layers,we.removedIds),je()}loadTile(pe,we,je){this.getWorkerSource(pe,we.type,we.source).loadTile(we,je)}loadDEMTile(pe,we,je){this.getDEMWorkerSource(pe,we.source).loadTile(we,je)}reloadTile(pe,we,je){this.getWorkerSource(pe,we.type,we.source).reloadTile(we,je)}abortTile(pe,we,je){this.getWorkerSource(pe,we.type,we.source).abortTile(we,je)}removeTile(pe,we,je){this.getWorkerSource(pe,we.type,we.source).removeTile(we,je)}removeDEMTile(pe,we){this.getDEMWorkerSource(pe,we.source).removeTile(we)}removeSource(pe,we,je){if(!this.workerSources[pe]||!this.workerSources[pe][we.type]||!this.workerSources[pe][we.type][we.source])return;const Ke=this.workerSources[pe][we.type][we.source];delete this.workerSources[pe][we.type][we.source],Ke.removeSource!==void 0?Ke.removeSource(we,je):je()}loadWorkerSource(pe,we,je){try{this.self.importScripts(we.url),je()}catch(Ke){je(Ke.toString())}}syncRTLPluginState(pe,we,je){try{h.plugin.setState(we);const Ke=h.plugin.getPluginURL();if(h.plugin.isLoaded()&&!h.plugin.isParsed()&&Ke!=null){this.self.importScripts(Ke);const _t=h.plugin.isParsed();je(_t?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ke}`),_t)}}catch(Ke){je(Ke.toString())}}getAvailableImages(pe){let we=this.availableImages[pe];return we||(we=[]),we}getLayerIndex(pe){let we=this.layerIndexes[pe];return we||(we=this.layerIndexes[pe]=new $),we}getWorkerSource(pe,we,je){if(this.workerSources[pe]||(this.workerSources[pe]={}),this.workerSources[pe][we]||(this.workerSources[pe][we]={}),!this.workerSources[pe][we][je]){const Ke={send:(_t,qe,Oe)=>{this.actor.send(_t,qe,Oe,pe)}};this.workerSources[pe][we][je]=new this.workerSourceTypes[we](Ke,this.getLayerIndex(pe),this.getAvailableImages(pe))}return this.workerSources[pe][we][je]}getDEMWorkerSource(pe,we){return this.demWorkerSources[pe]||(this.demWorkerSources[pe]={}),this.demWorkerSources[pe][we]||(this.demWorkerSources[pe][we]=new De),this.demWorkerSources[pe][we]}enforceCacheSizeLimit(pe,we){h.enforceCacheSizeLimit(we)}}return h.isWorker()&&(self.worker=new Zi(self)),Zi}),f(["./shared"],function(h){var s=U;function U(P){return!function(u){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var I,F,j=new Blob([""],{type:"text/javascript"}),N=URL.createObjectURL(j);try{F=new Worker(N),I=!0}catch{I=!1}return F&&F.terminate(),URL.revokeObjectURL(N),I}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var I=document.createElement("canvas");I.width=I.height=1;var F=I.getContext("2d");if(!F)return!1;var j=F.getImageData(0,0,1,1);return j&&j.width===I.width}()?($[x=u&&u.failIfMajorPerformanceCaveat]===void 0&&($[x]=function(I){var F,j=function(N){var oe=document.createElement("canvas"),ae=Object.create(U.webGLContextAttributes);return ae.failIfMajorPerformanceCaveat=N,oe.getContext("webgl",ae)||oe.getContext("experimental-webgl",ae)}(I);if(!j)return!1;try{F=j.createShader(j.VERTEX_SHADER)}catch{return!1}return!(!F||j.isContextLost())&&(j.shaderSource(F,"void main() {}"),j.compileShader(F),j.getShaderParameter(F,j.COMPILE_STATUS)===!0)}(x)),$[x]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var x}(P)}var $={};function V(P,u){if(Array.isArray(P)){if(!Array.isArray(u)||P.length!==u.length)return!1;for(let x=0;x<P.length;x++)if(!V(P[x],u[x]))return!1;return!0}if(typeof P=="object"&&P!==null&&u!==null){if(typeof u!="object"||Object.keys(P).length!==Object.keys(u).length)return!1;for(const x in P)if(!V(P[x],u[x]))return!1;return!0}return P===u}U.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class q{static testProp(u){if(!q.docStyle)return u[0];for(let x=0;x<u.length;x++)if(u[x]in q.docStyle)return u[x];return u[0]}static create(u,x,I){const F=window.document.createElement(u);return x!==void 0&&(F.className=x),I&&I.appendChild(F),F}static createNS(u,x){return window.document.createElementNS(u,x)}static disableDrag(){q.docStyle&&q.selectProp&&(q.userSelect=q.docStyle[q.selectProp],q.docStyle[q.selectProp]="none")}static enableDrag(){q.docStyle&&q.selectProp&&(q.docStyle[q.selectProp]=q.userSelect)}static setTransform(u,x){u.style[q.transformProp]=x}static addEventListener(u,x,I,F={}){u.addEventListener(x,I,"passive"in F?F:F.capture)}static removeEventListener(u,x,I,F={}){u.removeEventListener(x,I,"passive"in F?F:F.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",q.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",q.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",q.suppressClickInternal,!0)},0)}static mousePos(u,x){const I=u.getBoundingClientRect();return new h.pointGeometry(x.clientX-I.left-u.clientLeft,x.clientY-I.top-u.clientTop)}static touchPos(u,x){const I=u.getBoundingClientRect(),F=[];for(let j=0;j<x.length;j++)F.push(new h.pointGeometry(x[j].clientX-I.left-u.clientLeft,x[j].clientY-I.top-u.clientTop));return F}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}q.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,q.selectProp=q.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),q.transformProp=q.testProp(["transform","WebkitTransform"]);class te{constructor(u){this._transformRequestFn=u}transformRequest(u,x){return this._transformRequestFn&&this._transformRequestFn(u,x)||{url:u}}normalizeSpriteURL(u,x,I){const F=function(j){const N=j.match(he);if(!N)throw new Error(`Unable to parse URL "${j}"`);return{protocol:N[1],authority:N[2],path:N[3]||"/",params:N[4]?N[4].split("&"):[]}}(u);return F.path+=`${x}${I}`,function(j){const N=j.params.length?`?${j.params.join("&")}`:"";return`${j.protocol}://${j.authority}${j.path}${N}`}(F)}setTransformRequest(u){this._transformRequestFn=u}}const he=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class Ae{constructor(u,x,I,F){this.context=u,this.format=I,this.texture=u.gl.createTexture(),this.update(x,F)}update(u,x,I){const{width:F,height:j}=u,N=!(this.size&&this.size[0]===F&&this.size[1]===j||I),{context:oe}=this,{gl:ae}=oe;if(this.useMipmap=!!(x&&x.useMipmap),ae.bindTexture(ae.TEXTURE_2D,this.texture),oe.pixelStoreUnpackFlipY.set(!1),oe.pixelStoreUnpack.set(1),oe.pixelStoreUnpackPremultiplyAlpha.set(this.format===ae.RGBA&&(!x||x.premultiply!==!1)),N)this.size=[F,j],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||h.isImageBitmap(u)?ae.texImage2D(ae.TEXTURE_2D,0,this.format,this.format,ae.UNSIGNED_BYTE,u):ae.texImage2D(ae.TEXTURE_2D,0,this.format,F,j,0,this.format,ae.UNSIGNED_BYTE,u.data);else{const{x:me,y:ye}=I||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||h.isImageBitmap(u)?ae.texSubImage2D(ae.TEXTURE_2D,0,me,ye,ae.RGBA,ae.UNSIGNED_BYTE,u):ae.texSubImage2D(ae.TEXTURE_2D,0,me,ye,F,j,ae.RGBA,ae.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ae.generateMipmap(ae.TEXTURE_2D)}bind(u,x,I){const{context:F}=this,{gl:j}=F;j.bindTexture(j.TEXTURE_2D,this.texture),I!==j.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(I=j.LINEAR),u!==this.filter&&(j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,u),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,I||u),this.filter=u),x!==this.wrap&&(j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,x),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,x),this.wrap=x)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function De(P){const{userImage:u}=P;return!!(u&&u.render&&u.render())&&(P.data.replace(new Uint8Array(u.data.buffer)),!0)}class ke extends h.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:x,callback:I}of this.requestors)this._notify(x,I);this.requestors=[]}}getImage(u){return this.images[u]}addImage(u,x){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,x)&&(this.images[u]=x)}_validate(u,x){let I=!0;return this._validateStretch(x.stretchX,x.data&&x.data.width)||(this.fire(new h.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),I=!1),this._validateStretch(x.stretchY,x.data&&x.data.height)||(this.fire(new h.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),I=!1),this._validateContent(x.content,x)||(this.fire(new h.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),I=!1),I}_validateStretch(u,x){if(!u)return!0;let I=0;for(const F of u){if(F[0]<I||F[1]<F[0]||x<F[1])return!1;I=F[1]}return!0}_validateContent(u,x){return!(u&&(u.length!==4||u[0]<0||x.data.width<u[0]||u[1]<0||x.data.height<u[1]||u[2]<0||x.data.width<u[2]||u[3]<0||x.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,x){const I=this.images[u];if(I.data.width!==x.data.width||I.data.height!==x.data.height)throw new Error(`size mismatch between old image (${I.data.width}x${I.data.height}) and new image (${x.data.width}x${x.data.height}).`);x.version=I.version+1,this.images[u]=x,this.updatedImages[u]=!0}removeImage(u){const x=this.images[u];delete this.images[u],delete this.patterns[u],x.userImage&&x.userImage.onRemove&&x.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,x){let I=!0;if(!this.isLoaded())for(const F of u)this.images[F]||(I=!1);this.isLoaded()||I?this._notify(u,x):this.requestors.push({ids:u,callback:x})}_notify(u,x){const I={};for(const F of u){this.images[F]||this.fire(new h.Event("styleimagemissing",{id:F}));const j=this.images[F];j?I[F]={data:j.data.clone(),pixelRatio:j.pixelRatio,sdf:j.sdf,version:j.version,stretchX:j.stretchX,stretchY:j.stretchY,content:j.content,hasRenderCallback:!!(j.userImage&&j.userImage.render)}:h.warnOnce(`Image "${F}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}x(null,I)}getPixelSize(){const{width:u,height:x}=this.atlasImage;return{width:u,height:x}}getPattern(u){const x=this.patterns[u],I=this.getImage(u);if(!I)return null;if(x&&x.position.version===I.version)return x.position;if(x)x.position.version=I.version;else{const F={w:I.data.width+2,h:I.data.height+2,x:0,y:0},j=new h.ImagePosition(F,I);this.patterns[u]={bin:F,position:j}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const x=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ae(u,this.atlasImage,x.RGBA),this.atlasTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const j in this.patterns)u.push(this.patterns[j].bin);const{w:x,h:I}=h.potpack(u),F=this.atlasImage;F.resize({width:x||1,height:I||1});for(const j in this.patterns){const{bin:N}=this.patterns[j],oe=N.x+1,ae=N.y+1,me=this.images[j].data,ye=me.width,Re=me.height;h.RGBAImage.copy(me,F,{x:0,y:0},{x:oe,y:ae},{width:ye,height:Re}),h.RGBAImage.copy(me,F,{x:0,y:Re-1},{x:oe,y:ae-1},{width:ye,height:1}),h.RGBAImage.copy(me,F,{x:0,y:0},{x:oe,y:ae+Re},{width:ye,height:1}),h.RGBAImage.copy(me,F,{x:ye-1,y:0},{x:oe-1,y:ae},{width:1,height:Re}),h.RGBAImage.copy(me,F,{x:0,y:0},{x:oe+ye,y:ae},{width:1,height:Re})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const x of u){if(this.callbackDispatchedThisFrame[x])continue;this.callbackDispatchedThisFrame[x]=!0;const I=this.images[x];I||h.warnOnce(`Image with ID: "${x}" was not found`),De(I)&&this.updateImage(x,I)}}}const xe=1e20;function Te(P,u,x,I,F,j,N,oe,ae){for(let me=u;me<u+I;me++)Ee(P,x*j+me,j,F,N,oe,ae);for(let me=x;me<x+F;me++)Ee(P,me*j+u,1,I,N,oe,ae)}function Ee(P,u,x,I,F,j,N){j[0]=0,N[0]=-xe,N[1]=xe,F[0]=P[u];for(let oe=1,ae=0,me=0;oe<I;oe++){F[oe]=P[u+oe*x];const ye=oe*oe;do{const Re=j[ae];me=(F[oe]-F[Re]+ye-Re*Re)/(oe-Re)/2}while(me<=N[ae]&&--ae>-1);ae++,j[ae]=oe,N[ae]=me,N[ae+1]=xe}for(let oe=0,ae=0;oe<I;oe++){for(;N[ae+1]<oe;)ae++;const me=j[ae],ye=oe-me;P[u+oe*x]=F[me]+ye*ye}}class Fe{constructor(u,x){this.requestManager=u,this.localIdeographFontFamily=x,this.entries={}}setURL(u){this.url=u}getGlyphs(u,x){const I=[];for(const F in u)for(const j of u[F])I.push({stack:F,id:j});h.asyncAll(I,({stack:F,id:j},N)=>{let oe=this.entries[F];oe||(oe=this.entries[F]={glyphs:{},requests:{},ranges:{}});let ae=oe.glyphs[j];if(ae!==void 0)return void N(null,{stack:F,id:j,glyph:ae});if(ae=this._tinySDF(oe,F,j),ae)return oe.glyphs[j]=ae,void N(null,{stack:F,id:j,glyph:ae});const me=Math.floor(j/256);if(256*me>65535)return void N(new Error("glyphs > 65535 not supported"));if(oe.ranges[me])return void N(null,{stack:F,id:j,glyph:ae});let ye=oe.requests[me];ye||(ye=oe.requests[me]=[],Fe.loadGlyphRange(F,me,this.url,this.requestManager,(Re,He)=>{if(He){for(const gt in He)this._doesCharSupportLocalGlyph(+gt)||(oe.glyphs[+gt]=He[+gt]);oe.ranges[me]=!0}for(const gt of ye)gt(Re,He);delete oe.requests[me]})),ye.push((Re,He)=>{Re?N(Re):He&&N(null,{stack:F,id:j,glyph:He[j]||null})})},(F,j)=>{if(F)x(F);else if(j){const N={};for(const{stack:oe,id:ae,glyph:me}of j)(N[oe]||(N[oe]={}))[ae]=me&&{id:me.id,bitmap:me.bitmap.clone(),metrics:me.metrics};x(null,N)}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(h.unicodeBlockLookup["CJK Unified Ideographs"](u)||h.unicodeBlockLookup["Hangul Syllables"](u)||h.unicodeBlockLookup.Hiragana(u)||h.unicodeBlockLookup.Katakana(u))}_tinySDF(u,x,I){const F=this.localIdeographFontFamily;if(!F||!this._doesCharSupportLocalGlyph(I))return;let j=u.tinySDF;if(!j){let oe="400";/bold/i.test(x)?oe="900":/medium/i.test(x)?oe="500":/light/i.test(x)&&(oe="200"),j=u.tinySDF=new Fe.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:F,fontWeight:oe})}const N=j.draw(String.fromCharCode(I));return{id:I,bitmap:new h.AlphaImage({width:N.width||30,height:N.height||30},N.data),metrics:{width:N.glyphWidth||24,height:N.glyphHeight||24,left:N.glyphLeft||0,top:N.glyphTop-27||-8,advance:N.glyphAdvance||24}}}}Fe.loadGlyphRange=function(P,u,x,I,F){const j=256*u,N=j+255,oe=I.transformRequest(x.replace("{fontstack}",P).replace("{range}",`${j}-${N}`),h.ResourceType.Glyphs);h.getArrayBuffer(oe,(ae,me)=>{if(ae)F(ae);else if(me){const ye={};for(const Re of h.parseGlyphPbf(me))ye[Re.id]=Re;F(null,ye)}})},Fe.TinySDF=class{constructor({fontSize:P=24,buffer:u=3,radius:x=8,cutoff:I=.25,fontFamily:F="sans-serif",fontWeight:j="normal",fontStyle:N="normal"}={}){this.buffer=u,this.cutoff=I,this.radius=x;const oe=this.size=P+4*u,ae=this._createCanvas(oe),me=this.ctx=ae.getContext("2d",{willReadFrequently:!0});me.font=`${N} ${j} ${P}px ${F}`,me.textBaseline="alphabetic",me.textAlign="left",me.fillStyle="black",this.gridOuter=new Float64Array(oe*oe),this.gridInner=new Float64Array(oe*oe),this.f=new Float64Array(oe),this.z=new Float64Array(oe+1),this.v=new Uint16Array(oe)}_createCanvas(P){const u=document.createElement("canvas");return u.width=u.height=P,u}draw(P){const{width:u,actualBoundingBoxAscent:x,actualBoundingBoxDescent:I,actualBoundingBoxLeft:F,actualBoundingBoxRight:j}=this.ctx.measureText(P),N=Math.ceil(x),oe=Math.min(this.size-this.buffer,Math.ceil(j-F)),ae=Math.min(this.size-this.buffer,N+Math.ceil(I)),me=oe+2*this.buffer,ye=ae+2*this.buffer,Re=Math.max(me*ye,0),He=new Uint8ClampedArray(Re),gt={data:He,width:me,height:ye,glyphWidth:oe,glyphHeight:ae,glyphTop:N,glyphLeft:0,glyphAdvance:u};if(oe===0||ae===0)return gt;const{ctx:dt,buffer:pt,gridInner:Ft,gridOuter:Wt}=this;dt.clearRect(pt,pt,oe,ae),dt.fillText(P,pt,pt+N);const on=dt.getImageData(pt,pt,oe,ae);Wt.fill(xe,0,Re),Ft.fill(0,0,Re);for(let bt=0;bt<ae;bt++)for(let un=0;un<oe;un++){const tn=on.data[4*(bt*oe+un)+3]/255;if(tn===0)continue;const In=(bt+pt)*me+un+pt;if(tn===1)Wt[In]=0,Ft[In]=xe;else{const kn=.5-tn;Wt[In]=kn>0?kn*kn:0,Ft[In]=kn<0?kn*kn:0}}Te(Wt,0,0,me,ye,me,this.f,this.v,this.z),Te(Ft,pt,pt,oe,ae,me,this.f,this.v,this.z);for(let bt=0;bt<Re;bt++){const un=Math.sqrt(Wt[bt])-Math.sqrt(Ft[bt]);He[bt]=Math.round(255-255*(un/this.radius+this.cutoff))}return gt}};const Se=new h.Properties({anchor:new h.DataConstantProperty(h.spec.light.anchor),position:new class{constructor(){this.specification=h.spec.light.position}possiblyEvaluate(P,u){return h.sphericalToCartesian(P.expression.evaluate(u))}interpolate(P,u,x){return{x:h.number(P.x,u.x,x),y:h.number(P.y,u.y,x),z:h.number(P.z,u.z,x)}}},color:new h.DataConstantProperty(h.spec.light.color),intensity:new h.DataConstantProperty(h.spec.light.intensity)}),nt="-transition";class xt extends h.Evented{constructor(u){super(),this._transitionable=new h.Transitionable(Se),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,x={}){if(!this._validate(h.validateLight,u,x))for(const I in u){const F=u[I];I.endsWith(nt)?this._transitionable.setTransition(I.slice(0,-nt.length),F):this._transitionable.setValue(I,F)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,x,I){return(!I||I.validate!==!1)&&h.emitValidationErrors(this,u.call(h.validateStyle,h.extend({value:x,style:{glyphs:!0,sprite:!0},styleSpec:h.spec})))}}class Bt{constructor(u,x){this.width=u,this.height=x,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,x){const I=u.join(",")+String(x);return this.dashEntry[I]||(this.dashEntry[I]=this.addDash(u,x)),this.dashEntry[I]}getDashRanges(u,x,I){const F=[];let j=u.length%2==1?-u[u.length-1]*I:0,N=u[0]*I,oe=!0;F.push({left:j,right:N,isDash:oe,zeroLength:u[0]===0});let ae=u[0];for(let me=1;me<u.length;me++){oe=!oe;const ye=u[me];j=ae*I,ae+=ye,N=ae*I,F.push({left:j,right:N,isDash:oe,zeroLength:ye===0})}return F}addRoundDash(u,x,I){const F=x/2;for(let j=-I;j<=I;j++){const N=this.width*(this.nextRow+I+j);let oe=0,ae=u[oe];for(let me=0;me<this.width;me++){me/ae.right>1&&(ae=u[++oe]);const ye=Math.abs(me-ae.left),Re=Math.abs(me-ae.right),He=Math.min(ye,Re);let gt;const dt=j/I*(F+1);if(ae.isDash){const pt=F-Math.abs(dt);gt=Math.sqrt(He*He+pt*pt)}else gt=F-Math.sqrt(He*He+dt*dt);this.data[N+me]=Math.max(0,Math.min(255,gt+128))}}}addRegularDash(u){for(let oe=u.length-1;oe>=0;--oe){const ae=u[oe],me=u[oe+1];ae.zeroLength?u.splice(oe,1):me&&me.isDash===ae.isDash&&(me.left=ae.left,u.splice(oe,1))}const x=u[0],I=u[u.length-1];x.isDash===I.isDash&&(x.left=I.left-this.width,I.right=x.right+this.width);const F=this.width*this.nextRow;let j=0,N=u[j];for(let oe=0;oe<this.width;oe++){oe/N.right>1&&(N=u[++j]);const ae=Math.abs(oe-N.left),me=Math.abs(oe-N.right),ye=Math.min(ae,me);this.data[F+oe]=Math.max(0,Math.min(255,(N.isDash?ye:-ye)+128))}}addDash(u,x){const I=x?7:0,F=2*I+1;if(this.nextRow+F>this.height)return h.warnOnce("LineAtlas out of space"),null;let j=0;for(let oe=0;oe<u.length;oe++)j+=u[oe];if(j!==0){const oe=this.width/j,ae=this.getDashRanges(u,this.width,oe);x?this.addRoundDash(ae,oe,I):this.addRegularDash(ae)}const N={y:(this.nextRow+I+.5)/this.height,height:2*I/this.height,width:j};return this.nextRow+=F,this.dirty=!0,N}bind(u){const x=u.gl;this.texture?(x.bindTexture(x.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,x.texSubImage2D(x.TEXTURE_2D,0,0,0,this.width,this.height,x.ALPHA,x.UNSIGNED_BYTE,this.data))):(this.texture=x.createTexture(),x.bindTexture(x.TEXTURE_2D,this.texture),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.REPEAT),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.REPEAT),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR),x.texImage2D(x.TEXTURE_2D,0,x.ALPHA,this.width,this.height,0,x.ALPHA,x.UNSIGNED_BYTE,this.data))}}class Xe{constructor(u,x){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=h.uniqueId();const I=this.workerPool.acquire(this.id);for(let F=0;F<I.length;F++){const j=new Xe.Actor(I[F],x,this.id);j.name=`Worker ${F}`,this.actors.push(j)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,x,I){h.asyncAll(this.actors,(F,j)=>{F.send(u,x,j)},I=I||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(u=>{u.remove()}),this.actors=[],this.workerPool.release(this.id)}}function qt(P,u,x){const I=function(F,j){if(F)return x(F);if(j){const N=h.pick(h.extend(j,P),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);j.vector_layers&&(N.vectorLayers=j.vector_layers,N.vectorLayerIds=N.vectorLayers.map(oe=>oe.id)),x(null,N)}};return P.url?h.getJSON(u.transformRequest(P.url,h.ResourceType.Source),I):h.exported.frame(()=>I(null,P))}Xe.Actor=h.Actor;class rn{constructor(u,x,I){this.bounds=h.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=x||0,this.maxzoom=I||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const x=Math.pow(2,u.z),I=Math.floor(h.mercatorXfromLng(this.bounds.getWest())*x),F=Math.floor(h.mercatorYfromLat(this.bounds.getNorth())*x),j=Math.ceil(h.mercatorXfromLng(this.bounds.getEast())*x),N=Math.ceil(h.mercatorYfromLat(this.bounds.getSouth())*x);return u.x>=I&&u.x<j&&u.y>=F&&u.y<N}}class Ut extends h.Evented{constructor(u,x,I,F){if(super(),this.id=u,this.dispatcher=I,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.extend(this,h.pick(x,["url","scheme","tileSize","promoteId"])),this._options=h.extend({type:"vector"},x),this._collectResourceTiming=x.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(F)}load(){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=qt(this._options,this.map._requestManager,(u,x)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u?this.fire(new h.ErrorEvent(u)):x&&(h.extend(this,x),x.bounds&&(this.tileBounds=new rn(x.bounds,this.minzoom,this.maxzoom)),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}loadTile(u,x){const I=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),F={request:this.map._requestManager.transformRequest(I,h.ResourceType.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function j(N,oe){return delete u.request,u.aborted?x(null):N&&N.status!==404?x(N):(oe&&oe.resourceTiming&&(u.resourceTiming=oe.resourceTiming),this.map._refreshExpiredTiles&&oe&&u.setExpiryData(oe),u.loadVectorData(oe,this.map.painter),h.cacheEntryPossiblyAdded(this.dispatcher),x(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}F.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired"?u.state==="loading"?u.reloadCallback=x:u.request=u.actor.send("reloadTile",F,j.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",F,j.bind(this)))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Kt extends h.Evented{constructor(u,x,I,F){super(),this.id=u,this.dispatcher=I,this.setEventedParent(F),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.extend({type:"raster"},x),h.extend(this,h.pick(x,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=qt(this._options,this.map._requestManager,(u,x)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new h.ErrorEvent(u)):x&&(h.extend(this,x),x.bounds&&(this.tileBounds=new rn(x.bounds,this.minzoom,this.maxzoom)),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,x){const I=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.request=h.getImage(this.map._requestManager.transformRequest(I,h.ResourceType.Tile),(F,j,N)=>{if(delete u.request,u.aborted)u.state="unloaded",x(null);else if(F)u.state="errored",x(F);else if(j){this.map._refreshExpiredTiles&&u.setExpiryData(N);const oe=this.map.painter.context,ae=oe.gl;u.texture=this.map.painter.getTileTexture(j.width),u.texture?u.texture.update(j,{useMipmap:!0}):(u.texture=new Ae(oe,j,ae.RGBA,{useMipmap:!0}),u.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST),oe.extTextureFilterAnisotropic&&ae.texParameterf(ae.TEXTURE_2D,oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,oe.extTextureFilterAnisotropicMax)),u.state="loaded",h.cacheEntryPossiblyAdded(this.dispatcher),x(null)}})}abortTile(u,x){u.request&&(u.request.cancel(),delete u.request),x()}unloadTile(u,x){u.texture&&this.map.painter.saveTileTexture(u.texture),x()}hasTransition(){return!1}}let On;class Gt extends Kt{constructor(u,x,I,F){super(u,x,I,F),this.type="raster-dem",this.maxzoom=22,this._options=h.extend({type:"raster-dem"},x),this.encoding=x.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(u,x){const I=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function F(j,N){j&&(u.state="errored",x(j)),N&&(u.dem=N,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded",x(null))}u.request=h.getImage(this.map._requestManager.transformRequest(I,h.ResourceType.Tile),(function(j,N){if(delete u.request,u.aborted)u.state="unloaded",x(null);else if(j)u.state="errored",x(j);else if(N){this.map._refreshExpiredTiles&&u.setExpiryData(N),delete N.cacheControl,delete N.expires;const oe=h.isImageBitmap(N)&&(On==null&&(On=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),On)?N:h.exported.getImageData(N,1),ae={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:oe,encoding:this.encoding};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",ae,F.bind(this)))}}).bind(this)),u.neighboringTiles=this._getNeighboringTiles(u.tileID)}_getNeighboringTiles(u){const x=u.canonical,I=Math.pow(2,x.z),F=(x.x-1+I)%I,j=x.x===0?u.wrap-1:u.wrap,N=(x.x+1+I)%I,oe=x.x+1===I?u.wrap+1:u.wrap,ae={};return ae[new h.OverscaledTileID(u.overscaledZ,j,x.z,F,x.y).key]={backfilled:!1},ae[new h.OverscaledTileID(u.overscaledZ,oe,x.z,N,x.y).key]={backfilled:!1},x.y>0&&(ae[new h.OverscaledTileID(u.overscaledZ,j,x.z,F,x.y-1).key]={backfilled:!1},ae[new h.OverscaledTileID(u.overscaledZ,u.wrap,x.z,x.x,x.y-1).key]={backfilled:!1},ae[new h.OverscaledTileID(u.overscaledZ,oe,x.z,N,x.y-1).key]={backfilled:!1}),x.y+1<I&&(ae[new h.OverscaledTileID(u.overscaledZ,j,x.z,F,x.y+1).key]={backfilled:!1},ae[new h.OverscaledTileID(u.overscaledZ,u.wrap,x.z,x.x,x.y+1).key]={backfilled:!1},ae[new h.OverscaledTileID(u.overscaledZ,oe,x.z,N,x.y+1).key]={backfilled:!1}),ae}unloadTile(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})}}class Rn extends h.Evented{constructor(u,x,I,F){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=I.getActor(),this.setEventedParent(F),this._data=x.data,this._options=h.extend({},x),this._collectResourceTiming=x.collectResourceTiming,x.maxzoom!==void 0&&(this.maxzoom=x.maxzoom),x.type&&(this.type=x.type),x.attribution&&(this.attribution=x.attribution),this.promoteId=x.promoteId;const j=h.EXTENT/this.tileSize;this.workerOptions=h.extend({source:this.id,cluster:x.cluster||!1,geojsonVtOptions:{buffer:(x.buffer!==void 0?x.buffer:128)*j,tolerance:(x.tolerance!==void 0?x.tolerance:.375)*j,extent:h.EXTENT,maxZoom:this.maxzoom,lineMetrics:x.lineMetrics||!1,generateId:x.generateId||!1},superclusterOptions:{maxZoom:x.clusterMaxZoom!==void 0?x.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,x.clusterMinPoints||2),extent:h.EXTENT,radius:(x.clusterRadius||50)*j,log:!1,generateId:x.generateId||!1},clusterProperties:x.clusterProperties,filter:x.filter},x.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData("content"),this}getClusterExpansionZoom(u,x){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},x),this}getClusterChildren(u,x){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},x),this}getClusterLeaves(u,x,I,F){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:x,offset:I},F),this}_updateWorkerData(u){const x=h.extend({},this.workerOptions),I=this._data;typeof I=="string"?(x.request=this.map._requestManager.transformRequest(h.exported.resolveURL(I),h.ResourceType.Source),x.request.collectResourceTiming=this._collectResourceTiming):x.data=JSON.stringify(I),this._pendingLoads++,this.fire(new h.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,x,(F,j)=>{if(this._pendingLoads--,this._removed||j&&j.abandoned)return void this.fire(new h.Event("dataabort",{dataType:"source",sourceDataType:u}));let N=null;if(j&&j.resourceTiming&&j.resourceTiming[this.id]&&(N=j.resourceTiming[this.id].slice(0)),F)return void this.fire(new h.ErrorEvent(F));const oe={dataType:"source",sourceDataType:u};this._collectResourceTiming&&N&&N.length>0&&h.extend(oe,{resourceTiming:N}),this.fire(new h.Event("data",oe))})}loaded(){return this._pendingLoads===0}loadTile(u,x){const I=u.actor?"reloadTile":"loadTile";u.actor=this.actor;const F={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.request=this.actor.send(I,F,(j,N)=>(delete u.request,u.unloadVectorData(),u.aborted?x(null):j?x(j):(u.loadVectorData(N,this.map.painter,I==="reloadTile"),x(null))))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0}unloadTile(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return h.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var mn=h.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Cn extends h.Evented{constructor(u,x,I,F){super(),this.id=u,this.dispatcher=I,this.coordinates=x.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(F),this.options=x}load(u,x){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this.url=this.options.url,h.getImage(this.map._requestManager.transformRequest(this.url,h.ResourceType.Image),(I,F)=>{this._loaded=!0,I?this.fire(new h.ErrorEvent(I)):F&&(this.image=F,u&&(this.coordinates=u),x&&x(),this._finishLoading())})}loaded(){return this._loaded}updateImage(u){return this.image&&u.url?(this.options.url=u.url,this.load(u.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}setCoordinates(u){this.coordinates=u;const x=u.map(h.MercatorCoordinate.fromLngLat);this.tileID=function(F){let j=1/0,N=1/0,oe=-1/0,ae=-1/0;for(const He of F)j=Math.min(j,He.x),N=Math.min(N,He.y),oe=Math.max(oe,He.x),ae=Math.max(ae,He.y);const me=Math.max(oe-j,ae-N),ye=Math.max(0,Math.floor(-Math.log(me)/Math.LN2)),Re=Math.pow(2,ye);return new h.CanonicalTileID(ye,Math.floor((j+oe)/2*Re),Math.floor((N+ae)/2*Re))}(x),this.minzoom=this.maxzoom=this.tileID.z;const I=x.map(F=>this.tileID.getTilePoint(F)._round());return this._boundsArray=new h.RasterBoundsArray,this._boundsArray.emplaceBack(I[0].x,I[0].y,0,0),this._boundsArray.emplaceBack(I[1].x,I[1].y,h.EXTENT,0),this._boundsArray.emplaceBack(I[3].x,I[3].y,0,h.EXTENT),this._boundsArray.emplaceBack(I[2].x,I[2].y,h.EXTENT,h.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,x=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,mn.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ae(u,this.image,x.RGBA),this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE));for(const I in this.tiles){const F=this.tiles[I];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}}loadTile(u,x){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},x(null)):(u.state="errored",x(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Qt extends Cn{constructor(u,x,I,F){super(u,x,I,F),this.roundZoom=!0,this.type="video",this.options=x}load(){this._loaded=!1;const u=this.options;this.urls=[];for(const x of u.urls)this.urls.push(this.map._requestManager.transformRequest(x,h.ResourceType.Source).url);h.getVideo(this.urls,(x,I)=>{this._loaded=!0,x?this.fire(new h.ErrorEvent(x)):I&&(this.video=I,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const x=this.video.seekable;u<x.start(0)||u>x.end(0)?this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${x.start(0)} and ${x.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,x=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,mn.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE),x.texSubImage2D(x.TEXTURE_2D,0,0,0,x.RGBA,x.UNSIGNED_BYTE,this.video)):(this.texture=new Ae(u,this.video,x.RGBA),this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE));for(const I in this.tiles){const F=this.tiles[I];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Xn extends Cn{constructor(u,x,I,F){super(u,x,I,F),x.coordinates?Array.isArray(x.coordinates)&&x.coordinates.length===4&&!x.coordinates.some(j=>!Array.isArray(j)||j.length!==2||j.some(N=>typeof N!="number"))||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${u}`,null,'missing required property "coordinates"'))),x.animate&&typeof x.animate!="boolean"&&this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),x.canvas?typeof x.canvas=="string"||x.canvas instanceof HTMLCanvasElement||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${u}`,null,'missing required property "canvas"'))),this.options=x,this.animate=x.animate===void 0||x.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const x=this.map.painter.context,I=x.gl;this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,mn.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ae(x,this.canvas,I.RGBA,{premultiply:!0});for(const F in this.tiles){const j=this.tiles[F];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const Wn={vector:Ut,raster:Kt,"raster-dem":Gt,geojson:Rn,video:Qt,image:Cn,canvas:Xn};function Bi(P,u){const x=h.create();return h.translate(x,x,[1,1,0]),h.scale(x,x,[.5*P.width,.5*P.height,1]),h.multiply(x,x,P.calculatePosMatrix(u.toUnwrapped()))}function Bn(P,u,x,I,F,j){const N=function(Re,He,gt){if(Re)for(const dt of Re){const pt=He[dt];if(pt&&pt.source===gt&&pt.type==="fill-extrusion")return!0}else for(const dt in He){const pt=He[dt];if(pt.source===gt&&pt.type==="fill-extrusion")return!0}return!1}(F&&F.layers,u,P.id),oe=j.maxPitchScaleFactor(),ae=P.tilesIn(I,oe,N);ae.sort(Hn);const me=[];for(const Re of ae)me.push({wrappedTileID:Re.tileID.wrapped().key,queryResults:Re.tile.queryRenderedFeatures(u,x,P._state,Re.queryGeometry,Re.cameraQueryGeometry,Re.scale,F,j,oe,Bi(P.transform,Re.tileID))});const ye=function(Re){const He={},gt={};for(const dt of Re){const pt=dt.queryResults,Ft=dt.wrappedTileID,Wt=gt[Ft]=gt[Ft]||{};for(const on in pt){const bt=pt[on],un=Wt[on]=Wt[on]||{},tn=He[on]=He[on]||[];for(const In of bt)un[In.featureIndex]||(un[In.featureIndex]=!0,tn.push(In))}}return He}(me);for(const Re in ye)ye[Re].forEach(He=>{const gt=He.feature,dt=P.getFeatureState(gt.layer["source-layer"],gt.id);gt.source=gt.layer.source,gt.layer["source-layer"]&&(gt.sourceLayer=gt.layer["source-layer"]),gt.state=dt});return ye}function Hn(P,u){const x=P.tileID,I=u.tileID;return x.overscaledZ-I.overscaledZ||x.canonical.y-I.canonical.y||x.wrap-I.wrap||x.canonical.x-I.canonical.x}class ei{constructor(u,x){this.tileID=u,this.uid=h.uniqueId(),this.uses=0,this.tileSize=x,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const x=u+this.timeAdded;x<h.exported.now()||this.fadeEndTime&&x<this.fadeEndTime||(this.fadeEndTime=x)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.textures.forEach(x=>u.saveTileTexture(x)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(u,x,I){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(F,j){const N={};if(!j)return N;for(const oe of F){const ae=oe.layerIds.map(me=>j.getLayer(me)).filter(Boolean);if(ae.length!==0){oe.layers=ae,oe.stateDependentLayerIds&&(oe.stateDependentLayers=oe.stateDependentLayerIds.map(me=>ae.filter(ye=>ye.id===me)[0]));for(const me of ae)N[me.id]=oe}}return N}(u.buckets,x.style),this.hasSymbolBuckets=!1;for(const F in this.buckets){const j=this.buckets[F];if(j instanceof h.SymbolBucket){if(this.hasSymbolBuckets=!0,!I)break;j.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const F in this.buckets){const j=this.buckets[F];if(j instanceof h.SymbolBucket&&j.hasRTLText){this.hasRTLText=!0,h.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const F in this.buckets){const j=this.buckets[F];this.queryPadding=Math.max(this.queryPadding,x.style.getLayer(F).queryRadius(j))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new h.CollisionBoxArray}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const I in this.buckets){const F=this.buckets[I];F.uploadPending()&&F.upload(u)}const x=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ae(u,this.imageAtlas.image,x.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ae(u,this.glyphAtlasImage,x.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,x,I,F,j,N,oe,ae,me,ye){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:F,cameraQueryGeometry:j,scale:N,tileSize:this.tileSize,pixelPosMatrix:ye,transform:ae,params:oe,queryPadding:this.queryPadding*me},u,x,I):{}}querySourceFeatures(u,x){const I=this.latestFeatureIndex;if(!I||!I.rawTileData)return;const F=I.loadVTLayers(),j=x?x.sourceLayer:"",N=F._geojsonTileLayer||F[j];if(!N)return;const oe=h.createFilter(x&&x.filter),{z:ae,x:me,y:ye}=this.tileID.canonical,Re={z:ae,x:me,y:ye};for(let He=0;He<N.length;He++){const gt=N.feature(He);if(oe.needGeometry){const Ft=h.toEvaluationFeature(gt,!0);if(!oe.filter(new h.EvaluationParameters(this.tileID.overscaledZ),Ft,this.tileID.canonical))continue}else if(!oe.filter(new h.EvaluationParameters(this.tileID.overscaledZ),gt))continue;const dt=I.getId(gt,j),pt=new h.GeoJSONFeature(gt,ae,me,ye,dt);pt.tile=Re,u.push(pt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const x=this.expirationTime;if(u.cacheControl){const I=h.parseCacheControl(u.cacheControl);I["max-age"]&&(this.expirationTime=Date.now()+1e3*I["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const I=Date.now();let F=!1;if(this.expirationTime>I)F=!1;else if(x)if(this.expirationTime<x)F=!0;else{const j=this.expirationTime-x;j?this.expirationTime=I+Math.max(j,3e4):F=!0}else F=!0;F?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,x){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const I=this.latestFeatureIndex.loadVTLayers();for(const F in this.buckets){if(!x.style.hasLayer(F))continue;const j=this.buckets[F],N=j.layers[0].sourceLayer||"_geojsonTileLayer",oe=I[N],ae=u[N];if(!oe||!ae||Object.keys(ae).length===0)continue;j.update(ae,oe,this.imageAtlas&&this.imageAtlas.patternPositions||{});const me=x&&x.style&&x.style.getLayer(F);me&&(this.queryPadding=Math.max(this.queryPadding,me.queryRadius(j)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<h.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=h.exported.now()+u}setDependencies(u,x){const I={};for(const F of x)I[F]=!0;this.dependencies[u]=I}hasDependency(u,x){for(const I of u){const F=this.dependencies[I];if(F){for(const j of x)if(F[j])return!0}}return!1}}class tr{constructor(u,x){this.max=u,this.onRemove=x,this.reset()}reset(){for(const u in this.data)for(const x of this.data[u])x.timeout&&clearTimeout(x.timeout),this.onRemove(x.value);return this.data={},this.order=[],this}add(u,x,I){const F=u.wrapped().key;this.data[F]===void 0&&(this.data[F]=[]);const j={value:x,timeout:void 0};if(I!==void 0&&(j.timeout=setTimeout(()=>{this.remove(u,j)},I)),this.data[F].push(j),this.order.push(F),this.order.length>this.max){const N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const x=this.data[u].shift();return x.timeout&&clearTimeout(x.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),x.value}getByKey(u){const x=this.data[u];return x?x[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,x){if(!this.has(u))return this;const I=u.wrapped().key,F=x===void 0?0:this.data[I].indexOf(x),j=this.data[I][F];return this.data[I].splice(F,1),j.timeout&&clearTimeout(j.timeout),this.data[I].length===0&&delete this.data[I],this.onRemove(j.value),this.order.splice(this.order.indexOf(I),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}filter(u){const x=[];for(const I in this.data)for(const F of this.data[I])u(F.value)||x.push(F);for(const I of x)this.remove(I.value.tileID,I)}}class ri{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,x,I){const F=String(x);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][F]=this.stateChanges[u][F]||{},h.extend(this.stateChanges[u][F],I),this.deletedStates[u]===null){this.deletedStates[u]={};for(const j in this.state[u])j!==F&&(this.deletedStates[u][j]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][F]===null){this.deletedStates[u][F]={};for(const j in this.state[u][F])I[j]||(this.deletedStates[u][F][j]=null)}else for(const j in I)this.deletedStates[u]&&this.deletedStates[u][F]&&this.deletedStates[u][F][j]===null&&delete this.deletedStates[u][F][j]}removeFeatureState(u,x,I){if(this.deletedStates[u]===null)return;const F=String(x);if(this.deletedStates[u]=this.deletedStates[u]||{},I&&x!==void 0)this.deletedStates[u][F]!==null&&(this.deletedStates[u][F]=this.deletedStates[u][F]||{},this.deletedStates[u][F][I]=null);else if(x!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][F])for(I in this.deletedStates[u][F]={},this.stateChanges[u][F])this.deletedStates[u][F][I]=null;else this.deletedStates[u][F]=null;else this.deletedStates[u]=null}getState(u,x){const I=String(x),F=h.extend({},(this.state[u]||{})[I],(this.stateChanges[u]||{})[I]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const j=this.deletedStates[u][x];if(j===null)return{};for(const N in j)delete F[N]}return F}initializeTileState(u,x){u.setFeatureState(this.state,x)}coalesceChanges(u,x){const I={};for(const F in this.stateChanges){this.state[F]=this.state[F]||{};const j={};for(const N in this.stateChanges[F])this.state[F][N]||(this.state[F][N]={}),h.extend(this.state[F][N],this.stateChanges[F][N]),j[N]=this.state[F][N];I[F]=j}for(const F in this.deletedStates){this.state[F]=this.state[F]||{};const j={};if(this.deletedStates[F]===null)for(const N in this.state[F])j[N]={},this.state[F][N]={};else for(const N in this.deletedStates[F]){if(this.deletedStates[F][N]===null)this.state[F][N]={};else for(const oe of Object.keys(this.deletedStates[F][N]))delete this.state[F][N][oe];j[N]=this.state[F][N]}I[F]=I[F]||{},h.extend(I[F],j)}if(this.stateChanges={},this.deletedStates={},Object.keys(I).length!==0)for(const F in u)u[F].setFeatureState(I,x)}}class zi extends h.Evented{constructor(u,x,I){super(),this.id=u,this.dispatcher=I,this.on("data",F=>{F.dataType==="source"&&F.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&F.dataType==="source"&&F.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(F,j,N,oe){const ae=new Wn[j.type](F,j,N,oe);if(ae.id!==F)throw new Error(`Expected Source id to be ${F} instead of ${ae.id}`);return h.bindAll(["load","abort","unload","serialize","prepare"],ae),ae}(u,x,I,this),this._tiles={},this._cache=new tr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ri}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const u in this._tiles){const x=this._tiles[u];if(x.state!=="loaded"&&x.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,x){return this._source.loadTile(u,x)}_unloadTile(u){if(this._source.unloadTile)return this._source.unloadTile(u,()=>{})}_abortTile(u){this._source.abortTile&&this._source.abortTile(u,()=>{}),this._source.fire(new h.Event("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const x in this._tiles){const I=this._tiles[x];I.upload(u),I.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(Vr).map(u=>u.key)}getRenderableIds(u){const x=[];for(const I in this._tiles)this._isIdRenderable(I,u)&&x.push(this._tiles[I]);return u?x.sort((I,F)=>{const j=I.tileID,N=F.tileID,oe=new h.pointGeometry(j.canonical.x,j.canonical.y)._rotate(this.transform.angle),ae=new h.pointGeometry(N.canonical.x,N.canonical.y)._rotate(this.transform.angle);return j.overscaledZ-N.overscaledZ||ae.y-oe.y||ae.x-oe.x}).map(I=>I.tileID.key):x.map(I=>I.tileID).sort(Vr).map(I=>I.key)}hasRenderableParent(u){const x=this.findLoadedParent(u,0);return!!x&&this._isIdRenderable(x.tileID.key)}_isIdRenderable(u,x){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(x||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,x){const I=this._tiles[u];I&&(I.state!=="loading"&&(I.state=x),this._loadTile(I,this._tileLoaded.bind(this,I,u,x)))}_tileLoaded(u,x,I,F){if(F)return u.state="errored",void(F.status!==404?this._source.fire(new h.ErrorEvent(F,{tile:u})):this.update(this.transform,this.terrain));u.timeAdded=h.exported.now(),I==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(x,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new h.Event("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const x=this.getRenderableIds();for(let F=0;F<x.length;F++){const j=x[F];if(u.neighboringTiles&&u.neighboringTiles[j]){const N=this.getTileByID(j);I(u,N),I(N,u)}}function I(F,j){F.needsHillshadePrepare=!0,F.needsTerrainPrepare=!0;let N=j.tileID.canonical.x-F.tileID.canonical.x;const oe=j.tileID.canonical.y-F.tileID.canonical.y,ae=Math.pow(2,F.tileID.canonical.z),me=j.tileID.key;N===0&&oe===0||Math.abs(oe)>1||(Math.abs(N)>1&&(Math.abs(N+ae)===1?N+=ae:Math.abs(N-ae)===1&&(N-=ae)),j.dem&&F.dem&&(F.dem.backfillBorder(j.dem,N,oe),F.neighboringTiles&&F.neighboringTiles[me]&&(F.neighboringTiles[me].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,x,I,F){for(const j in this._tiles){let N=this._tiles[j];if(F[j]||!N.hasData()||N.tileID.overscaledZ<=x||N.tileID.overscaledZ>I)continue;let oe=N.tileID;for(;N&&N.tileID.overscaledZ>x+1;){const me=N.tileID.scaledTo(N.tileID.overscaledZ-1);N=this._tiles[me.key],N&&N.hasData()&&(oe=me)}let ae=oe;for(;ae.overscaledZ>x;)if(ae=ae.scaledTo(ae.overscaledZ-1),u[ae.key]){F[oe.key]=oe;break}}}findLoadedParent(u,x){if(u.key in this._loadedParentTiles){const I=this._loadedParentTiles[u.key];return I&&I.tileID.overscaledZ>=x?I:null}for(let I=u.overscaledZ-1;I>=x;I--){const F=u.scaledTo(I),j=this._getLoadedTile(F);if(j)return j}}_getLoadedTile(u){const x=this._tiles[u.key];return x&&x.hasData()?x:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const x=Math.ceil(u.width/this._source.tileSize)+1,I=Math.ceil(u.height/this._source.tileSize)+1,F=Math.floor(x*I*5),j=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,F):F;this._cache.setMaxSize(j)}handleWrapJump(u){const x=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,x){const I={};for(const F in this._tiles){const j=this._tiles[F];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+x),I[j.tileID.key]=j}this._tiles=I;for(const F in this._timers)clearTimeout(this._timers[F]),delete this._timers[F];for(const F in this._tiles)this._setTileReloadTimer(F,this._tiles[F])}}update(u,x){if(this.transform=u,this.terrain=x,!this._sourceLoaded||this._paused)return;let I;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?I=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(me=>new h.OverscaledTileID(me.canonical.z,me.wrap,me.canonical.z,me.canonical.x,me.canonical.y)):(I=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:x}),this._source.hasTile&&(I=I.filter(me=>this._source.hasTile(me)))):I=[];const F=u.coveringZoomLevel(this._source),j=Math.max(F-zi.maxOverzooming,this._source.minzoom),N=Math.max(F+zi.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const me={};for(const ye of I)if(ye.canonical.z>this._source.minzoom){const Re=ye.scaledTo(ye.canonical.z-1);me[Re.key]=Re;const He=ye.scaledTo(Math.max(this._source.minzoom,Math.min(ye.canonical.z,5)));me[He.key]=He}I=I.concat(Object.values(me))}const oe=this._updateRetainedTiles(I,F);if(sr(this._source.type)){const me={},ye={},Re=Object.keys(oe);for(const He of Re){const gt=oe[He],dt=this._tiles[He];if(!dt||dt.fadeEndTime&&dt.fadeEndTime<=h.exported.now())continue;const pt=this.findLoadedParent(gt,j);pt&&(this._addTile(pt.tileID),me[pt.tileID.key]=pt.tileID),ye[He]=gt}this._retainLoadedChildren(ye,F,N,oe);for(const He in me)oe[He]||(this._coveredTiles[He]=!0,oe[He]=me[He]);if(x){const He={},gt={};for(const dt of I)this._tiles[dt.key].hasData()?He[dt.key]=dt:gt[dt.key]=dt;for(const dt in gt){const pt=gt[dt].children(this._source.maxzoom);this._tiles[pt[0].key]&&this._tiles[pt[1].key]&&this._tiles[pt[2].key]&&this._tiles[pt[3].key]&&(He[pt[0].key]=oe[pt[0].key]=pt[0],He[pt[1].key]=oe[pt[1].key]=pt[1],He[pt[2].key]=oe[pt[2].key]=pt[2],He[pt[3].key]=oe[pt[3].key]=pt[3],delete gt[dt])}for(const dt in gt){const pt=this.findLoadedParent(gt[dt],this._source.minzoom);if(pt){He[pt.tileID.key]=oe[pt.tileID.key]=pt.tileID;for(const Ft in He)He[Ft].isChildOf(pt.tileID)&&delete He[Ft]}}for(const dt in this._tiles)He[dt]||(this._coveredTiles[dt]=!0)}}for(const me in oe)this._tiles[me].clearFadeHold();const ae=h.keysDifference(this._tiles,oe);for(const me of ae){const ye=this._tiles[me];ye.hasSymbolBuckets&&!ye.holdingForFade()?ye.setHoldDuration(this.map._fadeDuration):ye.hasSymbolBuckets&&!ye.symbolFadeFinished()||this._removeTile(me)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,x){const I={},F={},j=Math.max(x-zi.maxOverzooming,this._source.minzoom),N=Math.max(x+zi.maxUnderzooming,this._source.minzoom),oe={};for(const ae of u){const me=this._addTile(ae);I[ae.key]=ae,me.hasData()||x<this._source.maxzoom&&(oe[ae.key]=ae)}this._retainLoadedChildren(oe,x,N,I);for(const ae of u){let me=this._tiles[ae.key];if(me.hasData())continue;if(x+1>this._source.maxzoom){const Re=ae.children(this._source.maxzoom)[0],He=this.getTile(Re);if(He&&He.hasData()){I[Re.key]=Re;continue}}else{const Re=ae.children(this._source.maxzoom);if(I[Re[0].key]&&I[Re[1].key]&&I[Re[2].key]&&I[Re[3].key])continue}let ye=me.wasRequested();for(let Re=ae.overscaledZ-1;Re>=j;--Re){const He=ae.scaledTo(Re);if(F[He.key]||(F[He.key]=!0,me=this.getTile(He),!me&&ye&&(me=this._addTile(He)),me&&(I[He.key]=He,ye=me.wasRequested(),me.hasData())))break}}return I}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const x=[];let I,F=this._tiles[u].tileID;for(;F.overscaledZ>0;){if(F.key in this._loadedParentTiles){I=this._loadedParentTiles[F.key];break}x.push(F.key);const j=F.scaledTo(F.overscaledZ-1);if(I=this._getLoadedTile(j),I)break;F=j}for(const j of x)this._loadedParentTiles[j]=I}}_addTile(u){let x=this._tiles[u.key];if(x)return x;x=this._cache.getAndRemove(u),x&&(this._setTileReloadTimer(u.key,x),x.tileID=u,this._state.initializeTileState(x,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,x)));const I=x;return x||(x=new ei(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(x,this._tileLoaded.bind(this,x,u.key,x.state))),x.uses++,this._tiles[u.key]=x,I||this._source.fire(new h.Event("dataloading",{tile:x,coord:x.tileID,dataType:"source"})),x}_setTileReloadTimer(u,x){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const I=x.getExpiryTimeout();I&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},I))}_removeTile(u){const x=this._tiles[u];x&&(x.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),x.uses>0||(x.hasData()&&x.state!=="reloading"?this._cache.add(x.tileID,x,x.getExpiryTimeout()):(x.aborted=!0,this._abortTile(x),this._unloadTile(x))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,x,I){const F=[],j=this.transform;if(!j)return F;const N=I?j.getCameraQueryGeometry(u):u,oe=u.map(dt=>j.pointCoordinate(dt,this.terrain)),ae=N.map(dt=>j.pointCoordinate(dt,this.terrain)),me=this.getIds();let ye=1/0,Re=1/0,He=-1/0,gt=-1/0;for(const dt of ae)ye=Math.min(ye,dt.x),Re=Math.min(Re,dt.y),He=Math.max(He,dt.x),gt=Math.max(gt,dt.y);for(let dt=0;dt<me.length;dt++){const pt=this._tiles[me[dt]];if(pt.holdingForFade())continue;const Ft=pt.tileID,Wt=Math.pow(2,j.zoom-pt.tileID.overscaledZ),on=x*pt.queryPadding*h.EXTENT/pt.tileSize/Wt,bt=[Ft.getTilePoint(new h.MercatorCoordinate(ye,Re)),Ft.getTilePoint(new h.MercatorCoordinate(He,gt))];if(bt[0].x-on<h.EXTENT&&bt[0].y-on<h.EXTENT&&bt[1].x+on>=0&&bt[1].y+on>=0){const un=oe.map(In=>Ft.getTilePoint(In)),tn=ae.map(In=>Ft.getTilePoint(In));F.push({tile:pt,tileID:Ft,queryGeometry:un,cameraQueryGeometry:tn,scale:Wt})}}return F}getVisibleCoordinates(u){const x=this.getRenderableIds(u).map(I=>this._tiles[I].tileID);for(const I of x)I.posMatrix=this.transform.calculatePosMatrix(I.toUnwrapped());return x}hasTransition(){if(this._source.hasTransition())return!0;if(sr(this._source.type))for(const u in this._tiles){const x=this._tiles[u];if(x.fadeEndTime!==void 0&&x.fadeEndTime>=h.exported.now())return!0}return!1}setFeatureState(u,x,I){this._state.updateState(u=u||"_geojsonTileLayer",x,I)}removeFeatureState(u,x,I){this._state.removeFeatureState(u=u||"_geojsonTileLayer",x,I)}getFeatureState(u,x){return this._state.getState(u=u||"_geojsonTileLayer",x)}setDependencies(u,x,I){const F=this._tiles[u];F&&F.setDependencies(x,I)}reloadTilesForDependencies(u,x){for(const I in this._tiles)this._tiles[I].hasDependency(u,x)&&this._reloadTile(I,"reloading");this._cache.filter(I=>!I.hasDependency(u,x))}}function Vr(P,u){const x=Math.abs(2*P.wrap)-+(P.wrap<0),I=Math.abs(2*u.wrap)-+(u.wrap<0);return P.overscaledZ-u.overscaledZ||I-x||u.canonical.y-P.canonical.y||u.canonical.x-P.canonical.x}function sr(P){return P==="raster"||P==="image"||P==="video"}zi.maxOverzooming=10,zi.maxUnderzooming=3;const li="mapboxgl_preloaded_worker_pool";class Qi{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<Qi.workerCount;)this.workers.push(new Worker(Jc.workerUrl));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(x=>{x.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[li]}numActive(){return Object.keys(this.active).length}}const Ki=Math.floor(h.exported.hardwareConcurrency/2);let ji;function di(){return ji||(ji=new Qi),ji}function Ir(P,u){const x={};for(const I in P)I!=="ref"&&(x[I]=P[I]);return h.refProperties.forEach(I=>{I in u&&(x[I]=u[I])}),x}function nr(P){P=P.slice();const u=Object.create(null);for(let x=0;x<P.length;x++)u[P[x].id]=P[x];for(let x=0;x<P.length;x++)"ref"in P[x]&&(P[x]=Ir(P[x],u[P[x].ref]));return P}Qi.workerCount=Math.max(Math.min(Ki,6),1);const Ri={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function hr(P,u,x){x.push({command:Ri.addSource,args:[P,u[P]]})}function ir(P,u,x){u.push({command:Ri.removeSource,args:[P]}),x[P]=!0}function Ur(P,u,x,I){ir(P,x,I),hr(P,u,x)}function jr(P,u,x){let I;for(I in P[x])if(Object.prototype.hasOwnProperty.call(P[x],I)&&I!=="data"&&!V(P[x][I],u[x][I]))return!1;for(I in u[x])if(Object.prototype.hasOwnProperty.call(u[x],I)&&I!=="data"&&!V(P[x][I],u[x][I]))return!1;return!0}function pr(P,u,x,I,F,j){let N;for(N in u=u||{},P=P||{})Object.prototype.hasOwnProperty.call(P,N)&&(V(P[N],u[N])||x.push({command:j,args:[I,N,u[N],F]}));for(N in u)Object.prototype.hasOwnProperty.call(u,N)&&!Object.prototype.hasOwnProperty.call(P,N)&&(V(P[N],u[N])||x.push({command:j,args:[I,N,u[N],F]}))}function Zr(P){return P.id}function Eo(P,u){return P[u.id]=u,P}class Ao{constructor(u,x){this.reset(u,x)}reset(u,x){this.points=u||[],this._distances=[0];for(let I=1;I<this.points.length;I++)this._distances[I]=this._distances[I-1]+this.points[I].dist(this.points[I-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(x||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=h.clamp(u,0,1);let x=1,I=this._distances[x];const F=u*this.paddedLength+this.padding;for(;I<F&&x<this._distances.length;)I=this._distances[++x];const j=x-1,N=this._distances[j],oe=I-N,ae=oe>0?(F-N)/oe:0;return this.points[j].mult(1-ae).add(this.points[x].mult(ae))}}function $t(P,u){let x=!0;return P==="always"||P!=="never"&&u!=="never"||(x=!1),x}class en{constructor(u,x,I){const F=this.boxCells=[],j=this.circleCells=[];this.xCellCount=Math.ceil(u/I),this.yCellCount=Math.ceil(x/I);for(let N=0;N<this.xCellCount*this.yCellCount;N++)F.push([]),j.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=x,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/x,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,x,I,F,j){this._forEachCell(x,I,F,j,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(x),this.bboxes.push(I),this.bboxes.push(F),this.bboxes.push(j)}insertCircle(u,x,I,F){this._forEachCell(x-F,I-F,x+F,I+F,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(x),this.circles.push(I),this.circles.push(F)}_insertBoxCell(u,x,I,F,j,N){this.boxCells[j].push(N)}_insertCircleCell(u,x,I,F,j,N){this.circleCells[j].push(N)}_query(u,x,I,F,j,N,oe){if(I<0||u>this.width||F<0||x>this.height)return[];const ae=[];if(u<=0&&x<=0&&this.width<=I&&this.height<=F){if(j)return[{key:null,x1:u,y1:x,x2:I,y2:F}];for(let me=0;me<this.boxKeys.length;me++)ae.push({key:this.boxKeys[me],x1:this.bboxes[4*me],y1:this.bboxes[4*me+1],x2:this.bboxes[4*me+2],y2:this.bboxes[4*me+3]});for(let me=0;me<this.circleKeys.length;me++){const ye=this.circles[3*me],Re=this.circles[3*me+1],He=this.circles[3*me+2];ae.push({key:this.circleKeys[me],x1:ye-He,y1:Re-He,x2:ye+He,y2:Re+He})}}else this._forEachCell(u,x,I,F,this._queryCell,ae,{hitTest:j,overlapMode:N,seenUids:{box:{},circle:{}}},oe);return ae}query(u,x,I,F){return this._query(u,x,I,F,!1,null)}hitTest(u,x,I,F,j,N){return this._query(u,x,I,F,!0,j,N).length>0}hitTestCircle(u,x,I,F,j){const N=u-I,oe=u+I,ae=x-I,me=x+I;if(oe<0||N>this.width||me<0||ae>this.height)return!1;const ye=[];return this._forEachCell(N,ae,oe,me,this._queryCellCircle,ye,{hitTest:!0,overlapMode:F,circle:{x:u,y:x,radius:I},seenUids:{box:{},circle:{}}},j),ye.length>0}_queryCell(u,x,I,F,j,N,oe,ae){const{seenUids:me,hitTest:ye,overlapMode:Re}=oe,He=this.boxCells[j];if(He!==null){const dt=this.bboxes;for(const pt of He)if(!me.box[pt]){me.box[pt]=!0;const Ft=4*pt,Wt=this.boxKeys[pt];if(u<=dt[Ft+2]&&x<=dt[Ft+3]&&I>=dt[Ft+0]&&F>=dt[Ft+1]&&(!ae||ae(Wt))&&(!ye||!$t(Re,Wt.overlapMode))&&(N.push({key:Wt,x1:dt[Ft],y1:dt[Ft+1],x2:dt[Ft+2],y2:dt[Ft+3]}),ye))return!0}}const gt=this.circleCells[j];if(gt!==null){const dt=this.circles;for(const pt of gt)if(!me.circle[pt]){me.circle[pt]=!0;const Ft=3*pt,Wt=this.circleKeys[pt];if(this._circleAndRectCollide(dt[Ft],dt[Ft+1],dt[Ft+2],u,x,I,F)&&(!ae||ae(Wt))&&(!ye||!$t(Re,Wt.overlapMode))){const on=dt[Ft],bt=dt[Ft+1],un=dt[Ft+2];if(N.push({key:Wt,x1:on-un,y1:bt-un,x2:on+un,y2:bt+un}),ye)return!0}}}return!1}_queryCellCircle(u,x,I,F,j,N,oe,ae){const{circle:me,seenUids:ye,overlapMode:Re}=oe,He=this.boxCells[j];if(He!==null){const dt=this.bboxes;for(const pt of He)if(!ye.box[pt]){ye.box[pt]=!0;const Ft=4*pt,Wt=this.boxKeys[pt];if(this._circleAndRectCollide(me.x,me.y,me.radius,dt[Ft+0],dt[Ft+1],dt[Ft+2],dt[Ft+3])&&(!ae||ae(Wt))&&!$t(Re,Wt.overlapMode))return N.push(!0),!0}}const gt=this.circleCells[j];if(gt!==null){const dt=this.circles;for(const pt of gt)if(!ye.circle[pt]){ye.circle[pt]=!0;const Ft=3*pt,Wt=this.circleKeys[pt];if(this._circlesCollide(dt[Ft],dt[Ft+1],dt[Ft+2],me.x,me.y,me.radius)&&(!ae||ae(Wt))&&!$t(Re,Wt.overlapMode))return N.push(!0),!0}}}_forEachCell(u,x,I,F,j,N,oe,ae){const me=this._convertToXCellCoord(u),ye=this._convertToYCellCoord(x),Re=this._convertToXCellCoord(I),He=this._convertToYCellCoord(F);for(let gt=me;gt<=Re;gt++)for(let dt=ye;dt<=He;dt++)if(j.call(this,u,x,I,F,this.xCellCount*dt+gt,N,oe,ae))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,x,I,F,j,N){const oe=F-u,ae=j-x,me=I+N;return me*me>oe*oe+ae*ae}_circleAndRectCollide(u,x,I,F,j,N,oe){const ae=(N-F)/2,me=Math.abs(u-(F+ae));if(me>ae+I)return!1;const ye=(oe-j)/2,Re=Math.abs(x-(j+ye));if(Re>ye+I)return!1;if(me<=ae||Re<=ye)return!0;const He=me-ae,gt=Re-ye;return He*He+gt*gt<=I*I}}function Fr(P,u,x,I,F){const j=h.create();return u?(h.scale(j,j,[1/F,1/F,1]),x||h.rotateZ(j,j,I.angle)):h.multiply(j,I.labelPlaneMatrix,P),j}function So(P,u,x,I,F){if(u){const j=h.clone(P);return h.scale(j,j,[F,F,1]),x||h.rotateZ(j,j,-I.angle),j}return I.glCoordMatrix}function er(P,u,x){let I;x?(I=[P.x,P.y,x(P.x,P.y),1],h.transformMat4(I,I,u)):(I=[P.x,P.y,0,1],st(I,I,u));const F=I[3];return{point:new h.pointGeometry(I[0]/F,I[1]/F),signedDistanceFromCamera:F}}function xi(P,u){return .5+P/u*.5}function Xi(P,u){const x=P[0]/P[3],I=P[1]/P[3];return x>=-u[0]&&x<=u[0]&&I>=-u[1]&&I<=u[1]}function Un(P,u,x,I,F,j,N,oe,ae,me){const ye=I?P.textSizeData:P.iconSizeData,Re=h.evaluateSizeForZoom(ye,x.transform.zoom),He=[256/x.width*2+1,256/x.height*2+1],gt=I?P.text.dynamicLayoutVertexArray:P.icon.dynamicLayoutVertexArray;gt.clear();const dt=P.lineVertexArray,pt=I?P.text.placedSymbolArray:P.icon.placedSymbolArray,Ft=x.transform.width/x.transform.height;let Wt=!1;for(let on=0;on<pt.length;on++){const bt=pt.get(on);if(bt.hidden||bt.writingMode===h.WritingMode.vertical&&!Wt){Ce(bt.numGlyphs,gt);continue}let un;if(Wt=!1,me?(un=[bt.anchorX,bt.anchorY,me(bt.anchorX,bt.anchorY),1],h.transformMat4(un,un,u)):(un=[bt.anchorX,bt.anchorY,0,1],st(un,un,u)),!Xi(un,He)){Ce(bt.numGlyphs,gt);continue}const tn=xi(x.transform.cameraToCenterDistance,un[3]),In=h.evaluateSizeForFeature(ye,Re,bt),kn=N?In/tn:In*tn,Kn=new h.pointGeometry(bt.anchorX,bt.anchorY),xn=er(Kn,F,me).point,pi={},vi=bi(bt,kn,!1,oe,u,F,j,P.glyphOffsetArray,dt,gt,xn,Kn,pi,Ft,ae,me);Wt=vi.useVertical,(vi.notEnoughRoom||Wt||vi.needsFlipping&&bi(bt,kn,!0,oe,u,F,j,P.glyphOffsetArray,dt,gt,xn,Kn,pi,Ft,ae,me).notEnoughRoom)&&Ce(bt.numGlyphs,gt)}I?P.text.dynamicLayoutVertexBuffer.updateData(gt):P.icon.dynamicLayoutVertexBuffer.updateData(gt)}function Oi(P,u,x,I,F,j,N,oe,ae,me,ye,Re,He){const gt=oe.glyphStartIndex+oe.numGlyphs,dt=oe.lineStartIndex,pt=oe.lineStartIndex+oe.lineLength,Ft=u.getoffsetX(oe.glyphStartIndex),Wt=u.getoffsetX(gt-1),on=ot(P*Ft,x,I,F,j,N,oe.segment,dt,pt,ae,me,ye,Re,He);if(!on)return null;const bt=ot(P*Wt,x,I,F,j,N,oe.segment,dt,pt,ae,me,ye,Re,He);return bt?{first:on,last:bt}:null}function bn(P,u,x,I){return P===h.WritingMode.horizontal&&Math.abs(x.y-u.y)>Math.abs(x.x-u.x)*I?{useVertical:!0}:(P===h.WritingMode.vertical?u.y<x.y:u.x>x.x)?{needsFlipping:!0}:null}function bi(P,u,x,I,F,j,N,oe,ae,me,ye,Re,He,gt,dt,pt){const Ft=u/24,Wt=P.lineOffsetX*Ft,on=P.lineOffsetY*Ft;let bt;if(P.numGlyphs>1){const un=P.glyphStartIndex+P.numGlyphs,tn=P.lineStartIndex,In=P.lineStartIndex+P.lineLength,kn=Oi(Ft,oe,Wt,on,x,ye,Re,P,ae,j,He,dt,pt);if(!kn)return{notEnoughRoom:!0};const Kn=er(kn.first.point,N,pt).point,xn=er(kn.last.point,N,pt).point;if(I&&!x){const pi=bn(P.writingMode,Kn,xn,gt);if(pi)return pi}bt=[kn.first];for(let pi=P.glyphStartIndex+1;pi<un-1;pi++)bt.push(ot(Ft*oe.getoffsetX(pi),Wt,on,x,ye,Re,P.segment,tn,In,ae,j,He,dt,pt));bt.push(kn.last)}else{if(I&&!x){const tn=er(Re,F,pt).point,In=P.lineStartIndex+P.segment+1,kn=new h.pointGeometry(ae.getx(In),ae.gety(In)),Kn=er(kn,F,pt),xn=Kn.signedDistanceFromCamera>0?Kn.point:fi(Re,kn,tn,1,F,pt),pi=bn(P.writingMode,tn,xn,gt);if(pi)return pi}const un=ot(Ft*oe.getoffsetX(P.glyphStartIndex),Wt,on,x,ye,Re,P.segment,P.lineStartIndex,P.lineStartIndex+P.lineLength,ae,j,He,dt,pt);if(!un)return{notEnoughRoom:!0};bt=[un]}for(const un of bt)h.addDynamicAttributes(me,un.point,un.angle);return{}}function fi(P,u,x,I,F,j){const N=er(P.add(P.sub(u)._unit()),F,j).point,oe=x.sub(N);return x.add(oe._mult(I/oe.mag()))}function ot(P,u,x,I,F,j,N,oe,ae,me,ye,Re,He,gt){const dt=I?P-u:P+u;let pt=dt>0?1:-1,Ft=0;I&&(pt*=-1,Ft=Math.PI),pt<0&&(Ft+=Math.PI);let Wt=pt>0?oe+N:oe+N+1,on=F,bt=F,un=0,tn=0;const In=Math.abs(dt),kn=[];for(;un+tn<=In;){if(Wt+=pt,Wt<oe||Wt>=ae)return null;if(bt=on,kn.push(on),on=Re[Wt],on===void 0){const yn=new h.pointGeometry(me.getx(Wt),me.gety(Wt)),Nr=er(yn,ye,gt);if(Nr.signedDistanceFromCamera>0)on=Re[Wt]=Nr.point;else{const io=Wt-pt;on=fi(un===0?j:new h.pointGeometry(me.getx(io),me.gety(io)),yn,bt,In-un+1,ye,gt)}}un+=tn,tn=bt.dist(on)}const Kn=(In-un)/tn,xn=on.sub(bt),pi=xn.mult(Kn)._add(bt);pi._add(xn._unit()._perp()._mult(x*pt));const vi=Ft+Math.atan2(on.y-bt.y,on.x-bt.x);return kn.push(pi),{point:pi,angle:He?vi:0,path:kn}}const Ie=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ce(P,u){for(let x=0;x<P;x++){const I=u.length;u.resize(I+4),u.float32.set(Ie,3*I)}}function st(P,u,x){const I=u[0],F=u[1];return P[0]=x[0]*I+x[4]*F+x[12],P[1]=x[1]*I+x[5]*F+x[13],P[3]=x[3]*I+x[7]*F+x[15],P}const ft=100;class kt{constructor(u,x=new en(u.width+200,u.height+200,25),I=new en(u.width+200,u.height+200,25)){this.transform=u,this.grid=x,this.ignoredGrid=I,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+ft,this.screenBottomBoundary=u.height+ft,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,x,I,F,j,N){const oe=this.projectAndGetPerspectiveRatio(F,u.anchorPointX,u.anchorPointY,N),ae=I*oe.perspectiveRatio,me=u.x1*ae+oe.point.x,ye=u.y1*ae+oe.point.y,Re=u.x2*ae+oe.point.x,He=u.y2*ae+oe.point.y;return!this.isInsideGrid(me,ye,Re,He)||x!=="always"&&this.grid.hitTest(me,ye,Re,He,x,j)||oe.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[me,ye,Re,He],offscreen:this.isOffscreen(me,ye,Re,He)}}placeCollisionCircles(u,x,I,F,j,N,oe,ae,me,ye,Re,He,gt,dt){const pt=[],Ft=new h.pointGeometry(x.anchorX,x.anchorY),Wt=er(Ft,N,dt),on=xi(this.transform.cameraToCenterDistance,Wt.signedDistanceFromCamera),bt=(ye?j/on:j*on)/h.ONE_EM,un=er(Ft,oe,dt).point,tn=Oi(bt,F,x.lineOffsetX*bt,x.lineOffsetY*bt,!1,un,Ft,x,I,oe,{},!1,dt);let In=!1,kn=!1,Kn=!0;if(tn){const xn=.5*He*on+gt,pi=new h.pointGeometry(-100,-100),vi=new h.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),yn=new Ao,Nr=tn.first,io=tn.last;let or=[];for(let Po=Nr.path.length-1;Po>=1;Po--)or.push(Nr.path[Po]);for(let Po=1;Po<io.path.length;Po++)or.push(io.path[Po]);const mo=2.5*xn;if(ae){const Po=or.map(Xr=>er(Xr,ae,dt));or=Po.some(Xr=>Xr.signedDistanceFromCamera<=0)?[]:Po.map(Xr=>Xr.point)}let qn=[];if(or.length>0){const Po=or[0].clone(),Xr=or[0].clone();for(let os=1;os<or.length;os++)Po.x=Math.min(Po.x,or[os].x),Po.y=Math.min(Po.y,or[os].y),Xr.x=Math.max(Xr.x,or[os].x),Xr.y=Math.max(Xr.y,or[os].y);qn=Po.x>=pi.x&&Xr.x<=vi.x&&Po.y>=pi.y&&Xr.y<=vi.y?[or]:Xr.x<pi.x||Po.x>vi.x||Xr.y<pi.y||Po.y>vi.y?[]:h.clipLine([or],pi.x,pi.y,vi.x,vi.y)}for(const Po of qn){yn.reset(Po,.25*xn);let Xr=0;Xr=yn.length<=.5*xn?1:Math.ceil(yn.paddedLength/mo)+1;for(let os=0;os<Xr;os++){const ba=os/Math.max(Xr-1,1),eu=yn.lerp(ba),Lc=eu.x+ft,wu=eu.y+ft;pt.push(Lc,wu,xn,0);const ju=Lc-xn,Tl=wu-xn,hl=Lc+xn,tu=wu+xn;if(Kn=Kn&&this.isOffscreen(ju,Tl,hl,tu),kn=kn||this.isInsideGrid(ju,Tl,hl,tu),u!=="always"&&this.grid.hitTestCircle(Lc,wu,xn,u,Re)&&(In=!0,!me))return{circles:[],offscreen:!1,collisionDetected:In}}}}return{circles:!me&&In||!kn||on<this.perspectiveRatioCutoff?[]:pt,offscreen:Kn,collisionDetected:In}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const x=[];let I=1/0,F=1/0,j=-1/0,N=-1/0;for(const ye of u){const Re=new h.pointGeometry(ye.x+ft,ye.y+ft);I=Math.min(I,Re.x),F=Math.min(F,Re.y),j=Math.max(j,Re.x),N=Math.max(N,Re.y),x.push(Re)}const oe=this.grid.query(I,F,j,N).concat(this.ignoredGrid.query(I,F,j,N)),ae={},me={};for(const ye of oe){const Re=ye.key;if(ae[Re.bucketInstanceId]===void 0&&(ae[Re.bucketInstanceId]={}),ae[Re.bucketInstanceId][Re.featureIndex])continue;const He=[new h.pointGeometry(ye.x1,ye.y1),new h.pointGeometry(ye.x2,ye.y1),new h.pointGeometry(ye.x2,ye.y2),new h.pointGeometry(ye.x1,ye.y2)];h.polygonIntersectsPolygon(x,He)&&(ae[Re.bucketInstanceId][Re.featureIndex]=!0,me[Re.bucketInstanceId]===void 0&&(me[Re.bucketInstanceId]=[]),me[Re.bucketInstanceId].push(Re.featureIndex))}return me}insertCollisionBox(u,x,I,F,j,N){(I?this.ignoredGrid:this.grid).insert({bucketInstanceId:F,featureIndex:j,collisionGroupID:N,overlapMode:x},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,x,I,F,j,N){const oe=I?this.ignoredGrid:this.grid,ae={bucketInstanceId:F,featureIndex:j,collisionGroupID:N,overlapMode:x};for(let me=0;me<u.length;me+=4)oe.insertCircle(ae,u[me],u[me+1],u[me+2])}projectAndGetPerspectiveRatio(u,x,I,F){let j;return F?(j=[x,I,F(x,I),1],h.transformMat4(j,j,u)):(j=[x,I,0,1],st(j,j,u)),{point:new h.pointGeometry((j[0]/j[3]+1)/2*this.transform.width+ft,(-j[1]/j[3]+1)/2*this.transform.height+ft),perspectiveRatio:.5+this.transform.cameraToCenterDistance/j[3]*.5}}isOffscreen(u,x,I,F){return I<ft||u>=this.screenRightBoundary||F<ft||x>this.screenBottomBoundary}isInsideGrid(u,x,I,F){return I>=0&&u<this.gridRightBoundary&&F>=0&&x<this.gridBottomBoundary}getViewportMatrix(){const u=h.identity([]);return h.translate(u,u,[-100,-100,0]),u}}function zt(P,u,x){return u*(h.EXTENT/(P.tileSize*Math.pow(2,x-P.tileID.overscaledZ)))}class Rt{constructor(u,x,I,F){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?x:-x))):F&&I?1:0,this.placed=I}isHidden(){return this.opacity===0&&!this.placed}}class yt{constructor(u,x,I,F,j){this.text=new Rt(u?u.text:null,x,I,j),this.icon=new Rt(u?u.icon:null,x,F,j)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Xt{constructor(u,x,I){this.text=u,this.icon=x,this.skipFade=I}}class Tn{constructor(){this.invProjMatrix=h.create(),this.viewportMatrix=h.create(),this.circles=[]}}class Fn{constructor(u,x,I,F,j){this.bucketInstanceId=u,this.featureIndex=x,this.sourceLayerIndex=I,this.bucketIndex=F,this.tileID=j}}class zn{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const x=++this.maxGroupID;this.collisionGroups[u]={ID:x,predicate:I=>I.collisionGroupID===x}}return this.collisionGroups[u]}}function rr(P,u,x,I,F){const{horizontalAlign:j,verticalAlign:N}=h.getAnchorAlignment(P),oe=-(j-.5)*u,ae=-(N-.5)*x,me=h.evaluateVariableOffset(P,I);return new h.pointGeometry(oe+me[0]*F,ae+me[1]*F)}function Zi(P,u,x,I,F,j){const{x1:N,x2:oe,y1:ae,y2:me,anchorPointX:ye,anchorPointY:Re}=P,He=new h.pointGeometry(u,x);return I&&He._rotate(F?j:-j),{x1:N+He.x,y1:ae+He.y,x2:oe+He.x,y2:me+He.y,anchorPointX:ye,anchorPointY:Re}}class Pe{constructor(u,x,I,F,j){this.transform=u.clone(),this.terrain=x,this.collisionIndex=new kt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=I,this.retainedQueryData={},this.collisionGroups=new zn(F),this.collisionCircleArrays={},this.prevPlacement=j,j&&(j.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,x,I,F){const j=I.getBucket(x),N=I.latestFeatureIndex;if(!j||!N||x.id!==j.layerIds[0])return;const oe=I.collisionBoxArray,ae=j.layers[0].layout,me=Math.pow(2,this.transform.zoom-I.tileID.overscaledZ),ye=I.tileSize/h.EXTENT,Re=this.transform.calculatePosMatrix(I.tileID.toUnwrapped()),He=ae.get("text-pitch-alignment")==="map",gt=ae.get("text-rotation-alignment")==="map",dt=zt(I,1,this.transform.zoom),pt=Fr(Re,He,gt,this.transform,dt);let Ft=null;if(He){const on=So(Re,He,gt,this.transform,dt);Ft=h.multiply([],this.transform.labelPlaneMatrix,on)}this.retainedQueryData[j.bucketInstanceId]=new Fn(j.bucketInstanceId,N,j.sourceLayerIndex,j.index,I.tileID);const Wt={bucket:j,layout:ae,posMatrix:Re,textLabelPlaneMatrix:pt,labelToScreenMatrix:Ft,scale:me,textPixelRatio:ye,holdingForFade:I.holdingForFade(),collisionBoxArray:oe,partiallyEvaluatedTextSize:h.evaluateSizeForZoom(j.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(j.sourceID)};if(F)for(const on of j.sortKeyRanges){const{sortKey:bt,symbolInstanceStart:un,symbolInstanceEnd:tn}=on;u.push({sortKey:bt,symbolInstanceStart:un,symbolInstanceEnd:tn,parameters:Wt})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:j.symbolInstances.length,parameters:Wt})}attemptAnchorPlacement(u,x,I,F,j,N,oe,ae,me,ye,Re,He,gt,dt,pt,Ft){const Wt=[He.textOffset0,He.textOffset1],on=rr(u,I,F,Wt,j),bt=this.collisionIndex.placeCollisionBox(Zi(x,on.x,on.y,N,oe,this.transform.angle),Re,ae,me,ye.predicate,Ft);if((!pt||this.collisionIndex.placeCollisionBox(Zi(pt,on.x,on.y,N,oe,this.transform.angle),Re,ae,me,ye.predicate,Ft).box.length!==0)&&bt.box.length>0){let un;if(this.prevPlacement&&this.prevPlacement.variableOffsets[He.crossTileID]&&this.prevPlacement.placements[He.crossTileID]&&this.prevPlacement.placements[He.crossTileID].text&&(un=this.prevPlacement.variableOffsets[He.crossTileID].anchor),He.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[He.crossTileID]={textOffset:Wt,width:I,height:F,anchor:u,textBoxScale:j,prevAnchor:un},this.markUsedJustification(gt,u,He,dt),gt.allowVerticalPlacement&&(this.markUsedOrientation(gt,dt,He),this.placedOrientations[He.crossTileID]=dt),{shift:on,placedGlyphBoxes:bt}}}placeLayerBucketPart(u,x,I){const{bucket:F,layout:j,posMatrix:N,textLabelPlaneMatrix:oe,labelToScreenMatrix:ae,textPixelRatio:me,holdingForFade:ye,collisionBoxArray:Re,partiallyEvaluatedTextSize:He,collisionGroup:gt}=u.parameters,dt=j.get("text-optional"),pt=j.get("icon-optional"),Ft=h.getOverlapMode(j,"text-overlap","text-allow-overlap"),Wt=Ft==="always",on=h.getOverlapMode(j,"icon-overlap","icon-allow-overlap"),bt=on==="always",un=j.get("text-rotation-alignment")==="map",tn=j.get("text-pitch-alignment")==="map",In=j.get("icon-text-fit")!=="none",kn=j.get("symbol-z-order")==="viewport-y",Kn=Wt&&(bt||!F.hasIconData()||pt),xn=bt&&(Wt||!F.hasTextData()||dt);!F.collisionArrays&&Re&&F.deserializeCollisionBoxes(Re);const pi=(vi,yn)=>{if(x[vi.crossTileID])return;if(ye)return void(this.placements[vi.crossTileID]=new Xt(!1,!1,!1));let Nr=!1,io=!1,or=!0,mo=null,qn={box:null,offscreen:null},Po={box:null,offscreen:null},Xr=null,os=null,ba=null,eu=0,Lc=0,wu=0;yn.textFeatureIndex?eu=yn.textFeatureIndex:vi.useRuntimeCollisionCircles&&(eu=vi.featureIndex),yn.verticalTextFeatureIndex&&(Lc=yn.verticalTextFeatureIndex);const ju=this.retainedQueryData[F.bucketInstanceId].tileID,Tl=this.terrain?(b,l)=>this.terrain.getElevation(ju,b,l):null;for(const b of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const l=yn[b];l&&(l.elevation=Tl?Tl(l.anchorPointX,l.anchorPointY):0)}const hl=yn.textBox;if(hl){const b=g=>{let T=h.WritingMode.horizontal;if(F.allowVerticalPlacement&&!g&&this.prevPlacement){const k=this.prevPlacement.placedOrientations[vi.crossTileID];k&&(this.placedOrientations[vi.crossTileID]=k,T=k,this.markUsedOrientation(F,T,vi))}return T},l=(g,T)=>{if(F.allowVerticalPlacement&&vi.numVerticalGlyphVertices>0&&yn.verticalTextBox){for(const k of F.writingModes)if(k===h.WritingMode.vertical?(qn=T(),Po=qn):qn=g(),qn&&qn.box&&qn.box.length)break}else qn=g()};if(j.get("text-variable-anchor")){let g=j.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[vi.crossTileID]){const R=this.prevPlacement.variableOffsets[vi.crossTileID];g.indexOf(R.anchor)>0&&(g=g.filter(K=>K!==R.anchor),g.unshift(R.anchor))}const T=(R,K,X)=>{const ee=R.x2-R.x1,ce=R.y2-R.y1,le=vi.textBoxScale,ve=In&&on==="never"?K:null;let Qe={box:[],offscreen:!1};const We=Ft!=="never"?2*g.length:g.length;for(let et=0;et<We;++et){const tt=this.attemptAnchorPlacement(g[et%g.length],R,ee,ce,le,un,tn,me,N,gt,et>=g.length?Ft:"never",vi,F,X,ve,Tl);if(tt&&(Qe=tt.placedGlyphBoxes,Qe&&Qe.box&&Qe.box.length)){Nr=!0,mo=tt.shift;break}}return Qe};l(()=>T(hl,yn.iconBox,h.WritingMode.horizontal),()=>{const R=yn.verticalTextBox;return F.allowVerticalPlacement&&!(qn&&qn.box&&qn.box.length)&&vi.numVerticalGlyphVertices>0&&R?T(R,yn.verticalIconBox,h.WritingMode.vertical):{box:null,offscreen:null}}),qn&&(Nr=qn.box,or=qn.offscreen);const k=b(qn&&qn.box);if(!Nr&&this.prevPlacement){const R=this.prevPlacement.variableOffsets[vi.crossTileID];R&&(this.variableOffsets[vi.crossTileID]=R,this.markUsedJustification(F,R.anchor,vi,k))}}else{const g=(T,k)=>{const R=this.collisionIndex.placeCollisionBox(T,Ft,me,N,gt.predicate,Tl);return R&&R.box&&R.box.length&&(this.markUsedOrientation(F,k,vi),this.placedOrientations[vi.crossTileID]=k),R};l(()=>g(hl,h.WritingMode.horizontal),()=>{const T=yn.verticalTextBox;return F.allowVerticalPlacement&&vi.numVerticalGlyphVertices>0&&T?g(T,h.WritingMode.vertical):{box:null,offscreen:null}}),b(qn&&qn.box&&qn.box.length)}}if(Xr=qn,Nr=Xr&&Xr.box&&Xr.box.length>0,or=Xr&&Xr.offscreen,vi.useRuntimeCollisionCircles){const b=F.text.placedSymbolArray.get(vi.centerJustifiedTextSymbolIndex),l=h.evaluateSizeForFeature(F.textSizeData,He,b),g=j.get("text-padding");os=this.collisionIndex.placeCollisionCircles(Ft,b,F.lineVertexArray,F.glyphOffsetArray,l,N,oe,ae,I,tn,gt.predicate,vi.collisionCircleDiameter,g,Tl),os.circles.length&&os.collisionDetected&&!I&&h.warnOnce("Collisions detected, but collision boxes are not shown"),Nr=Wt||os.circles.length>0&&!os.collisionDetected,or=or&&os.offscreen}if(yn.iconFeatureIndex&&(wu=yn.iconFeatureIndex),yn.iconBox){const b=l=>{const g=In&&mo?Zi(l,mo.x,mo.y,un,tn,this.transform.angle):l;return this.collisionIndex.placeCollisionBox(g,on,me,N,gt.predicate,Tl)};Po&&Po.box&&Po.box.length&&yn.verticalIconBox?(ba=b(yn.verticalIconBox),io=ba.box.length>0):(ba=b(yn.iconBox),io=ba.box.length>0),or=or&&ba.offscreen}const tu=dt||vi.numHorizontalGlyphVertices===0&&vi.numVerticalGlyphVertices===0,nu=pt||vi.numIconVertices===0;if(tu||nu?nu?tu||(io=io&&Nr):Nr=io&&Nr:io=Nr=io&&Nr,Nr&&Xr&&Xr.box&&this.collisionIndex.insertCollisionBox(Xr.box,Ft,j.get("text-ignore-placement"),F.bucketInstanceId,Po&&Po.box&&Lc?Lc:eu,gt.ID),io&&ba&&this.collisionIndex.insertCollisionBox(ba.box,on,j.get("icon-ignore-placement"),F.bucketInstanceId,wu,gt.ID),os&&(Nr&&this.collisionIndex.insertCollisionCircles(os.circles,Ft,j.get("text-ignore-placement"),F.bucketInstanceId,eu,gt.ID),I)){const b=F.bucketInstanceId;let l=this.collisionCircleArrays[b];l===void 0&&(l=this.collisionCircleArrays[b]=new Tn);for(let g=0;g<os.circles.length;g+=4)l.circles.push(os.circles[g+0]),l.circles.push(os.circles[g+1]),l.circles.push(os.circles[g+2]),l.circles.push(os.collisionDetected?1:0)}if(vi.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(F.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[vi.crossTileID]=new Xt(Nr||Kn,io||xn,or||F.justReloaded),x[vi.crossTileID]=!0};if(kn){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const vi=F.getSortedSymbolIndexes(this.transform.angle);for(let yn=vi.length-1;yn>=0;--yn){const Nr=vi[yn];pi(F.symbolInstances.get(Nr),F.collisionArrays[Nr])}}else for(let vi=u.symbolInstanceStart;vi<u.symbolInstanceEnd;vi++)pi(F.symbolInstances.get(vi),F.collisionArrays[vi]);if(I&&F.bucketInstanceId in this.collisionCircleArrays){const vi=this.collisionCircleArrays[F.bucketInstanceId];h.invert(vi.invProjMatrix,N),vi.viewportMatrix=this.collisionIndex.getViewportMatrix()}F.justReloaded=!1}markUsedJustification(u,x,I,F){let j;j=F===h.WritingMode.vertical?I.verticalPlacedTextSymbolIndex:{left:I.leftJustifiedTextSymbolIndex,center:I.centerJustifiedTextSymbolIndex,right:I.rightJustifiedTextSymbolIndex}[h.getAnchorJustification(x)];const N=[I.leftJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.rightJustifiedTextSymbolIndex,I.verticalPlacedTextSymbolIndex];for(const oe of N)oe>=0&&(u.text.placedSymbolArray.get(oe).crossTileID=j>=0&&oe!==j?0:I.crossTileID)}markUsedOrientation(u,x,I){const F=x===h.WritingMode.horizontal||x===h.WritingMode.horizontalOnly?x:0,j=x===h.WritingMode.vertical?x:0,N=[I.leftJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.rightJustifiedTextSymbolIndex];for(const oe of N)u.text.placedSymbolArray.get(oe).placedOrientation=F;I.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(I.verticalPlacedTextSymbolIndex).placedOrientation=j)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const x=this.prevPlacement;let I=!1;this.prevZoomAdjustment=x?x.zoomAdjustment(this.transform.zoom):0;const F=x?x.symbolFadeChange(u):1,j=x?x.opacities:{},N=x?x.variableOffsets:{},oe=x?x.placedOrientations:{};for(const ae in this.placements){const me=this.placements[ae],ye=j[ae];ye?(this.opacities[ae]=new yt(ye,F,me.text,me.icon),I=I||me.text!==ye.text.placed||me.icon!==ye.icon.placed):(this.opacities[ae]=new yt(null,F,me.text,me.icon,me.skipFade),I=I||me.text||me.icon)}for(const ae in j){const me=j[ae];if(!this.opacities[ae]){const ye=new yt(me,F,!1,!1);ye.isHidden()||(this.opacities[ae]=ye,I=I||me.text.placed||me.icon.placed)}}for(const ae in N)this.variableOffsets[ae]||!this.opacities[ae]||this.opacities[ae].isHidden()||(this.variableOffsets[ae]=N[ae]);for(const ae in oe)this.placedOrientations[ae]||!this.opacities[ae]||this.opacities[ae].isHidden()||(this.placedOrientations[ae]=oe[ae]);if(x&&x.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");I?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=x?x.lastPlacementChangeTime:u)}updateLayerOpacities(u,x){const I={};for(const F of x){const j=F.getBucket(u);j&&F.latestFeatureIndex&&u.id===j.layerIds[0]&&this.updateBucketOpacities(j,I,F.collisionBoxArray)}}updateBucketOpacities(u,x,I){u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const F=u.layers[0].layout,j=new yt(null,0,!1,!1,!0),N=F.get("text-allow-overlap"),oe=F.get("icon-allow-overlap"),ae=F.get("text-variable-anchor"),me=F.get("text-rotation-alignment")==="map",ye=F.get("text-pitch-alignment")==="map",Re=F.get("icon-text-fit")!=="none",He=new yt(null,0,N&&(oe||!u.hasIconData()||F.get("icon-optional")),oe&&(N||!u.hasTextData()||F.get("text-optional")),!0);!u.collisionArrays&&I&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(I);const gt=(dt,pt,Ft)=>{for(let Wt=0;Wt<pt/4;Wt++)dt.opacityVertexArray.emplaceBack(Ft)};for(let dt=0;dt<u.symbolInstances.length;dt++){const pt=u.symbolInstances.get(dt),{numHorizontalGlyphVertices:Ft,numVerticalGlyphVertices:Wt,crossTileID:on}=pt;let bt=this.opacities[on];x[on]?bt=j:bt||(bt=He,this.opacities[on]=bt),x[on]=!0;const un=pt.numIconVertices>0,tn=this.placedOrientations[pt.crossTileID],In=tn===h.WritingMode.vertical,kn=tn===h.WritingMode.horizontal||tn===h.WritingMode.horizontalOnly;if(Ft>0||Wt>0){const Kn=mt(bt.text);gt(u.text,Ft,In?Jt:Kn),gt(u.text,Wt,kn?Jt:Kn);const xn=bt.text.isHidden();[pt.rightJustifiedTextSymbolIndex,pt.centerJustifiedTextSymbolIndex,pt.leftJustifiedTextSymbolIndex].forEach(yn=>{yn>=0&&(u.text.placedSymbolArray.get(yn).hidden=xn||In?1:0)}),pt.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(pt.verticalPlacedTextSymbolIndex).hidden=xn||kn?1:0);const pi=this.variableOffsets[pt.crossTileID];pi&&this.markUsedJustification(u,pi.anchor,pt,tn);const vi=this.placedOrientations[pt.crossTileID];vi&&(this.markUsedJustification(u,"left",pt,vi),this.markUsedOrientation(u,vi,pt))}if(un){const Kn=mt(bt.icon),xn=!(Re&&pt.verticalPlacedIconSymbolIndex&&In);pt.placedIconSymbolIndex>=0&&(gt(u.icon,pt.numIconVertices,xn?Kn:Jt),u.icon.placedSymbolArray.get(pt.placedIconSymbolIndex).hidden=bt.icon.isHidden()),pt.verticalPlacedIconSymbolIndex>=0&&(gt(u.icon,pt.numVerticalIconVertices,xn?Jt:Kn),u.icon.placedSymbolArray.get(pt.verticalPlacedIconSymbolIndex).hidden=bt.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const Kn=u.collisionArrays[dt];if(Kn){let xn=new h.pointGeometry(0,0);if(Kn.textBox||Kn.verticalTextBox){let vi=!0;if(ae){const yn=this.variableOffsets[on];yn?(xn=rr(yn.anchor,yn.width,yn.height,yn.textOffset,yn.textBoxScale),me&&xn._rotate(ye?this.transform.angle:-this.transform.angle)):vi=!1}Kn.textBox&&pe(u.textCollisionBox.collisionVertexArray,bt.text.placed,!vi||In,xn.x,xn.y),Kn.verticalTextBox&&pe(u.textCollisionBox.collisionVertexArray,bt.text.placed,!vi||kn,xn.x,xn.y)}const pi=!!(!kn&&Kn.verticalIconBox);Kn.iconBox&&pe(u.iconCollisionBox.collisionVertexArray,bt.icon.placed,pi,Re?xn.x:0,Re?xn.y:0),Kn.verticalIconBox&&pe(u.iconCollisionBox.collisionVertexArray,bt.icon.placed,!pi,Re?xn.x:0,Re?xn.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const dt=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=dt.invProjMatrix,u.placementViewportMatrix=dt.viewportMatrix,u.collisionCircleArray=dt.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,x){const I=this.zoomAtLastRecencyCheck===x?1-this.zoomAdjustment(x):1;return this.zoomAtLastRecencyCheck=x,this.commitTime+this.fadeDuration*I>u}setStale(){this.stale=!0}}function pe(P,u,x,I,F){P.emplaceBack(u?1:0,x?1:0,I||0,F||0),P.emplaceBack(u?1:0,x?1:0,I||0,F||0),P.emplaceBack(u?1:0,x?1:0,I||0,F||0),P.emplaceBack(u?1:0,x?1:0,I||0,F||0)}const we=Math.pow(2,25),je=Math.pow(2,24),Ke=Math.pow(2,17),_t=Math.pow(2,16),qe=Math.pow(2,9),Oe=Math.pow(2,8),Je=Math.pow(2,1);function mt(P){if(P.opacity===0&&!P.placed)return 0;if(P.opacity===1&&P.placed)return 4294967295;const u=P.placed?1:0,x=Math.floor(127*P.opacity);return x*we+u*je+x*Ke+u*_t+x*qe+u*Oe+x*Je+u}const Jt=0;class Sn{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,x,I,F,j){const N=this._bucketParts;for(;this._currentTileIndex<u.length;)if(x.getBucketParts(N,F,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,j())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort((oe,ae)=>oe.sortKey-ae.sortKey));this._currentPartIndex<N.length;)if(x.placeLayerBucketPart(N[this._currentPartIndex],this._seenCrossTileIDs,I),this._currentPartIndex++,j())return!0;return!1}}class an{constructor(u,x,I,F,j,N,oe,ae){this.placement=new Pe(u,x,N,oe,ae),this._currentPlacementIndex=I.length-1,this._forceFullPlacement=F,this._showCollisionBoxes=j,this._done=!1}isDone(){return this._done}continuePlacement(u,x,I){const F=h.exported.now(),j=()=>{const N=h.exported.now()-F;return!this._forceFullPlacement&&N>2};for(;this._currentPlacementIndex>=0;){const N=x[u[this._currentPlacementIndex]],oe=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&(!N.minzoom||N.minzoom<=oe)&&(!N.maxzoom||N.maxzoom>oe)){if(this._inProgressLayer||(this._inProgressLayer=new Sn(N)),this._inProgressLayer.continuePlacement(I[N.source],this.placement,this._showCollisionBoxes,N,j))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const gn=512/h.EXTENT/2;class mi{constructor(u,x,I){this.tileID=u,this.indexedSymbolInstances={},this.bucketInstanceId=I;for(let F=0;F<x.length;F++){const j=x.get(F),N=j.key;this.indexedSymbolInstances[N]||(this.indexedSymbolInstances[N]=[]),this.indexedSymbolInstances[N].push({crossTileID:j.crossTileID,coord:this.getScaledCoordinates(j,u)})}}getScaledCoordinates(u,x){const I=gn/Math.pow(2,x.canonical.z-this.tileID.canonical.z);return{x:Math.floor((x.canonical.x*h.EXTENT+u.anchorX)*I),y:Math.floor((x.canonical.y*h.EXTENT+u.anchorY)*I)}}findMatches(u,x,I){const F=this.tileID.canonical.z<x.canonical.z?1:Math.pow(2,this.tileID.canonical.z-x.canonical.z);for(let j=0;j<u.length;j++){const N=u.get(j);if(N.crossTileID)continue;const oe=this.indexedSymbolInstances[N.key];if(!oe)continue;const ae=this.getScaledCoordinates(N,x);for(const me of oe)if(Math.abs(me.coord.x-ae.x)<=F&&Math.abs(me.coord.y-ae.y)<=F&&!I[me.crossTileID]){I[me.crossTileID]=!0,N.crossTileID=me.crossTileID;break}}}}class yi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class cr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const x=Math.round((u-this.lng)/360);if(x!==0)for(const I in this.indexes){const F=this.indexes[I],j={};for(const N in F){const oe=F[N];oe.tileID=oe.tileID.unwrapTo(oe.tileID.wrap+x),j[oe.tileID.key]=oe}this.indexes[I]=j}this.lng=u}addBucket(u,x,I){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===x.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let j=0;j<x.symbolInstances.length;j++)x.symbolInstances.get(j).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const F=this.usedCrossTileIDs[u.overscaledZ];for(const j in this.indexes){const N=this.indexes[j];if(Number(j)>u.overscaledZ)for(const oe in N){const ae=N[oe];ae.tileID.isChildOf(u)&&ae.findMatches(x.symbolInstances,u,F)}else{const oe=N[u.scaledTo(Number(j)).key];oe&&oe.findMatches(x.symbolInstances,u,F)}}for(let j=0;j<x.symbolInstances.length;j++){const N=x.symbolInstances.get(j);N.crossTileID||(N.crossTileID=I.generate(),F[N.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new mi(u,x.symbolInstances,x.bucketInstanceId),!0}removeBucketCrossTileIDs(u,x){for(const I in x.indexedSymbolInstances)for(const F of x.indexedSymbolInstances[I])delete this.usedCrossTileIDs[u][F.crossTileID]}removeStaleBuckets(u){let x=!1;for(const I in this.indexes){const F=this.indexes[I];for(const j in F)u[F[j].bucketInstanceId]||(this.removeBucketCrossTileIDs(I,F[j]),delete F[j],x=!0)}return x}}class xr{constructor(){this.layerIndexes={},this.crossTileIDs=new yi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,x,I){let F=this.layerIndexes[u.id];F===void 0&&(F=this.layerIndexes[u.id]=new cr);let j=!1;const N={};F.handleWrapJump(I);for(const oe of x){const ae=oe.getBucket(u);ae&&u.id===ae.layerIds[0]&&(ae.bucketInstanceId||(ae.bucketInstanceId=++this.maxBucketInstanceId),F.addBucket(oe.tileID,ae,this.crossTileIDs)&&(j=!0),N[ae.bucketInstanceId]=!0)}return F.removeStaleBuckets(N)&&(j=!0),j}pruneUnusedLayers(u){const x={};u.forEach(I=>{x[I]=!0});for(const I in this.layerIndexes)x[I]||delete this.layerIndexes[I]}}var Gr=h.createLayout([{name:"a_pos",type:"Int16",components:2}]);class mr extends h.Evented{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=u._cache.max,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const u in this._tiles){const x=this._tiles[u];x.textures.forEach(I=>I.destroy()),x.textures=[]}}update(u,x){this.sourceCache.update(u,x),this._renderableTilesKeys=[];for(const I of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:x}))this._renderableTilesKeys.push(I.key),this._tiles[I.key]||(I.posMatrix=new Float64Array(16),h.ortho(I.posMatrix,0,h.EXTENT,0,h.EXTENT,0,1),this._tiles[I.key]=new ei(I,this.tileSize))}removeOutdated(u){const x={};this.renderHistory=this.renderHistory.filter((I,F)=>this.renderHistory.indexOf(I)===F).slice(0,this.renderHistorySize);for(const I of this._renderableTilesKeys)x[I]=!0;for(const I of this.renderHistory)x[I]=!0;for(const I in this._tiles)x[I]||(this._tiles[I].clearTextures(u),delete this._tiles[I])}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const x={};for(const I of this._renderableTilesKeys){const F=this._tiles[I].tileID;if(F.canonical.equals(u.canonical)){const j=u.clone();j.posMatrix=new Float64Array(16),h.ortho(j.posMatrix,0,h.EXTENT,0,h.EXTENT,0,1),x[I]=j}else if(F.canonical.isChildOf(u.canonical)){const j=u.clone();j.posMatrix=new Float64Array(16);const N=F.canonical.z-u.canonical.z,oe=F.canonical.x-(F.canonical.x>>N<<N),ae=F.canonical.y-(F.canonical.y>>N<<N),me=h.EXTENT>>N;h.ortho(j.posMatrix,0,me,0,me,0,1),h.translate(j.posMatrix,j.posMatrix,[-oe*me,-ae*me,0]),x[I]=j}else if(u.canonical.isChildOf(F.canonical)){const j=u.clone();j.posMatrix=new Float64Array(16);const N=u.canonical.z-F.canonical.z,oe=u.canonical.x-(u.canonical.x>>N<<N),ae=u.canonical.y-(u.canonical.y>>N<<N),me=h.EXTENT>>N;h.ortho(j.posMatrix,0,h.EXTENT,0,h.EXTENT,0,1),h.translate(j.posMatrix,j.posMatrix,[oe*me,ae*me,0]),h.scale(j.posMatrix,j.posMatrix,[1/2**N,1/2**N,0]),x[I]=j}}return x}getSourceTile(u,x){const I=this.sourceCache._source;let F=u.overscaledZ-this.deltaZoom;if(F>I.maxzoom&&(F=I.maxzoom),F<I.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(F).key);let j=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!j||!j.dem)&&x)for(;F>=I.minzoom&&(!j||!j.dem);)j=this.sourceCache.getTileByID(u.scaledTo(F--).key);return j}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter(x=>x.timeLoaded>=u)}}class Hr{constructor(u,x,I){this.style=u,this.sourceCache=new mr(x),this.options=I,this.exaggeration=typeof I.exaggeration=="number"?I.exaggeration:1,this.elevationOffset=typeof I.elevationOffset=="number"?I.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(u,x,I,F=h.EXTENT){if(!(x>=0&&x<F&&I>=0&&I<F))return this.elevationOffset;let j=0;const N=this.getTerrainData(u);if(N.tile&&N.tile.dem){const oe=h.transformMat4$1([],[x/F*h.EXTENT,I/F*h.EXTENT],N.u_terrain_matrix),ae=[oe[0]*N.tile.dem.dim,oe[1]*N.tile.dem.dim],me=[Math.floor(ae[0]),Math.floor(ae[1])],ye=N.tile.dem.get(me[0],me[1]),Re=N.tile.dem.get(me[0],me[1]+1),He=N.tile.dem.get(me[0]+1,me[1]),gt=N.tile.dem.get(me[0]+1,me[1]+1);j=h.number(h.number(ye,Re,ae[0]-me[0]),h.number(He,gt,ae[0]-me[0]),ae[1]-me[1])}return j}rememberForRerender(u,x){for(const I in this.sourceCache._tiles){const F=this.sourceCache._tiles[I];(F.tileID.equals(x)||F.tileID.isChildOf(x))&&(u===this.sourceCache.sourceCache.id&&(F.timeLoaded=Date.now()),this._rerender[u]=this._rerender[u]||{},this._rerender[u][F.tileID.key]=!0)}}needsRerender(u,x){return this._rerender[u]&&this._rerender[u][x.key]}clearRerenderCache(){this._rerender={}}getElevation(u,x,I,F=h.EXTENT){return(this.getDEMElevation(u,x,I,F)+this.elevationOffset)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const F=this.style.map.painter.context,j=new h.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ae(F,j,F.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ae(F,new h.RGBAImage({width:1,height:1}),F.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(F.gl.NEAREST,F.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=h.identity([])}const x=this.sourceCache.getSourceTile(u,!0);if(x&&x.dem&&(!x.demTexture||x.needsTerrainPrepare)){const F=this.style.map.painter.context;x.demTexture=this.style.map.painter.getTileTexture(x.dem.stride),x.demTexture?x.demTexture.update(x.dem.getPixels(),{premultiply:!1}):x.demTexture=new Ae(F,x.dem.getPixels(),F.gl.RGBA,{premultiply:!1}),x.demTexture.bind(F.gl.NEAREST,F.gl.CLAMP_TO_EDGE),x.needsTerrainPrepare=!1}const I=x&&x+x.tileID.key+u.key;if(I&&!this._demMatrixCache[I]){const F=this.sourceCache.sourceCache._source.maxzoom;let j=u.canonical.z-x.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=F?j=u.canonical.z-F:h.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const N=u.canonical.x-(u.canonical.x>>j<<j),oe=u.canonical.y-(u.canonical.y>>j<<j),ae=h.fromScaling(new Float64Array(16),[1/(h.EXTENT<<j),1/(h.EXTENT<<j),0]);h.translate(ae,ae,[N*h.EXTENT,oe*h.EXTENT,0]),this._demMatrixCache[u.key]={matrix:ae,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:x&&x.dem&&x.dem.dim||1,u_terrain_matrix:I?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:x&&x.dem&&x.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(x&&x.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:x}}getRTTFramebuffer(){const u=this.style.map.painter;if(!this._rttFramebuffer){const x=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=u.context.createFramebuffer(x,x,!0),this._rttFramebuffer.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,x,x))}return this._rttFramebuffer}getFramebuffer(u){const x=this.style.map.painter,I=x.width/devicePixelRatio,F=x.height/devicePixelRatio;return!this._fbo||this._fbo.width===I&&this._fbo.height===F||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ae(x.context,{width:I,height:F,data:null},x.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(x.context.gl.NEAREST,x.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ae(x.context,{width:I,height:F,data:null},x.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(x.context.gl.NEAREST,x.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=x.context.createFramebuffer(I,F,!0),this._fbo.depthAttachment.set(x.context.createRenderbuffer(x.context.gl.DEPTH_COMPONENT16,I,F))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const x=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let j=0,N=0;j<this._coordsTextureSize;j++)for(let oe=0;oe<this._coordsTextureSize;oe++,N+=4)x[N+0]=255&oe,x[N+1]=255&j,x[N+2]=oe>>8<<4|j>>8,x[N+3]=0;const I=new h.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(x.buffer)),F=new Ae(u,I,u.gl.RGBA,{premultiply:!1});return F.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=F,F}pointCoordinate(u){const x=new Uint8Array(4),I=this.style.map.painter,F=I.context,j=F.gl;F.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),j.readPixels(u.x,I.height/devicePixelRatio-u.y-1,1,1,j.RGBA,j.UNSIGNED_BYTE,x),F.bindFramebuffer.set(null);const N=x[0]+(x[2]>>4<<8),oe=x[1]+((15&x[2])<<8),ae=this.coordsIndex[255-x[3]],me=ae&&this.sourceCache.getTileByID(ae);if(!me)return null;const ye=this._coordsTextureSize,Re=(1<<me.tileID.canonical.z)*ye;return new h.MercatorCoordinate((me.tileID.canonical.x*ye+N)/Re,(me.tileID.canonical.y*ye+oe)/Re,this.getElevation(me.tileID,N,oe,ye))}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.style.map.painter.context,x=new h.PosArray,I=new h.TriangleIndexArray,F=this.meshSize,j=h.EXTENT/F,N=F*F;for(let oe=0;oe<=F;oe++)for(let ae=0;ae<=F;ae++)x.emplaceBack(ae*j,oe*j);for(let oe=0;oe<N;oe+=F+1)for(let ae=0;ae<F;ae++)I.emplaceBack(ae+oe,F+ae+oe+1,F+ae+oe+2),I.emplaceBack(ae+oe,F+ae+oe+2,ae+oe+1);return this._mesh={indexBuffer:u.createIndexBuffer(I),vertexBuffer:u.createVertexBuffer(x,Gr.members),segments:h.SegmentVector.simpleSegment(0,0,x.length,I.length)},this._mesh}getMinMaxElevation(u){const x=this.getTerrainData(u).tile,I={minElevation:null,maxElevation:null};return x&&x.dem&&(I.minElevation=(x.dem.min+this.elevationOffset)*this.exaggeration,I.maxElevation=(x.dem.max+this.elevationOffset)*this.exaggeration),I}}const fo=(P,u)=>h.emitValidationErrors(P,u&&u.filter(x=>x.identifier!=="source.canvas")),xo=h.pick(Ri,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),hs=h.pick(Ri,["setCenter","setZoom","setBearing","setPitch"]),Yo=function(){const P={},u=h.spec.$version;for(const x in h.spec.$root){const I=h.spec.$root[x];if(I.required){let F=null;F=x==="version"?u:I.type==="array"?[]:{},F!=null&&(P[x]=F)}}return P}();class hn extends h.Evented{constructor(u,x={}){super(),this.map=u,this.dispatcher=new Xe(di(),this),this.imageManager=new ke,this.imageManager.setEventedParent(this),this.glyphManager=new Fe(u._requestManager,x.localIdeographFontFamily),this.lineAtlas=new Bt(256,512),this.crossTileSymbolIndex=new xr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new h.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",h.getReferrer());const I=this;this._rtlTextPluginCallback=hn.registerForPluginStateChange(F=>{I.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:F.pluginStatus,pluginURL:F.pluginURL},(j,N)=>{if(h.triggerPluginCompletionEvent(j),N&&N.every(oe=>oe))for(const oe in I.sourceCaches)I.sourceCaches[oe].reload()})}),this.on("data",F=>{if(F.dataType!=="source"||F.sourceDataType!=="metadata")return;const j=this.sourceCaches[F.sourceId];if(!j)return;const N=j.getSource();if(N&&N.vectorLayerIds)for(const oe in this._layers){const ae=this._layers[oe];ae.source===N.id&&this._validateLayer(ae)}})}loadURL(u,x={}){this.fire(new h.Event("dataloading",{dataType:"style"}));const I=typeof x.validate!="boolean"||x.validate,F=this.map._requestManager.transformRequest(u,h.ResourceType.Style);this._request=h.getJSON(F,(j,N)=>{this._request=null,j?this.fire(new h.ErrorEvent(j)):N&&this._load(N,I)})}loadJSON(u,x={}){this.fire(new h.Event("dataloading",{dataType:"style"})),this._request=h.exported.frame(()=>{this._request=null,this._load(u,x.validate!==!1)})}loadEmpty(){this.fire(new h.Event("dataloading",{dataType:"style"})),this._load(Yo,!1)}_load(u,x){if(x&&fo(this,h.validateStyle(u)))return;this._loaded=!0,this.stylesheet=u;for(const F in u.sources)this.addSource(F,u.sources[F],{validate:!1});u.sprite?this._loadSprite(u.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(u.glyphs);const I=nr(this.stylesheet.layers);this._order=I.map(F=>F.id),this._layers={},this._serializedLayers={};for(let F of I)F=h.createStyleLayer(F),F.setEventedParent(this,{layer:{id:F.id}}),this._layers[F.id]=F,this._serializedLayers[F.id]=F.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new xt(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new h.Event("data",{dataType:"style"})),this.fire(new h.Event("style.load"))}_loadSprite(u){this._spriteRequest=function(x,I,F,j){let N,oe,ae;const me=F>1?"@2x":"";let ye=h.getJSON(I.transformRequest(I.normalizeSpriteURL(x,me,".json"),h.ResourceType.SpriteJSON),(gt,dt)=>{ye=null,ae||(ae=gt,N=dt,He())}),Re=h.getImage(I.transformRequest(I.normalizeSpriteURL(x,me,".png"),h.ResourceType.SpriteImage),(gt,dt)=>{Re=null,ae||(ae=gt,oe=dt,He())});function He(){if(ae)j(ae);else if(N&&oe){const gt=h.exported.getImageData(oe),dt={};for(const pt in N){const{width:Ft,height:Wt,x:on,y:bt,sdf:un,pixelRatio:tn,stretchX:In,stretchY:kn,content:Kn}=N[pt],xn=new h.RGBAImage({width:Ft,height:Wt});h.RGBAImage.copy(gt,xn,{x:on,y:bt},{x:0,y:0},{width:Ft,height:Wt}),dt[pt]={data:xn,pixelRatio:tn,sdf:un,stretchX:In,stretchY:kn,content:Kn}}j(null,dt)}}return{cancel(){ye&&(ye.cancel(),ye=null),Re&&(Re.cancel(),Re=null)}}}(u,this.map._requestManager,this.map.getPixelRatio(),(x,I)=>{if(this._spriteRequest=null,x)this.fire(new h.ErrorEvent(x));else if(I)for(const F in I)this.imageManager.addImage(F,I[F]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.Event("data",{dataType:"style"}))})}_validateLayer(u){const x=this.sourceCaches[u.source];if(!x)return;const I=u.sourceLayer;if(!I)return;const F=x.getSource();(F.type==="geojson"||F.vectorLayerIds&&F.vectorLayerIds.indexOf(I)===-1)&&this.fire(new h.ErrorEvent(new Error(`Source layer "${I}" does not exist on source "${F.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(u){const x=[];for(const I of u){const F=this._layers[I];F.type!=="custom"&&x.push(F.serialize())}return x}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const x=this._changed;if(this._changed){const F=Object.keys(this._updatedLayers),j=Object.keys(this._removedLayers);(F.length||j.length)&&this._updateWorkerLayers(F,j);for(const N in this._updatedSources){const oe=this._updatedSources[N];if(oe==="reload")this._reloadSource(N);else{if(oe!=="clear")throw new Error(`Invalid action ${oe}`);this._clearSource(N)}}this._updateTilesForChangedImages();for(const N in this._updatedPaintProps)this._layers[N].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const I={};for(const F in this.sourceCaches){const j=this.sourceCaches[F];I[F]=j.used,j.used=!1}for(const F of this._order){const j=this._layers[F];j.recalculate(u,this._availableImages),!j.isHidden(u.zoom)&&j.source&&(this.sourceCaches[j.source].used=!0)}for(const F in I){const j=this.sourceCaches[F];I[F]!==j.used&&j.fire(new h.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:F}))}this.light.recalculate(u),this.z=u.zoom,x&&this.fire(new h.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const x in this.sourceCaches)this.sourceCaches[x].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateWorkerLayers(u,x){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:x})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(u){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),u){const x=this.sourceCaches[u.source];if(!x)throw new Error(`cannot load terrain, because there exists no source with ID: ${u.source}`);this.terrain=new Hr(this,x,u),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=I=>{I.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=I=>{I.tile&&(I.sourceId===u.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(I.sourceId,I.tile.tileID)):I.source.type==="geojson"&&this.terrain.rememberForRerender(I.sourceId,I.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new h.Event("terrain",{terrain:u}))}setState(u){if(this._checkLoaded(),fo(this,h.validateStyle(u)))return!1;(u=h.clone$1(u)).layers=nr(u.layers);const x=function(F,j){if(!F)return[{command:Ri.setStyle,args:[j]}];let N=[];try{if(!V(F.version,j.version))return[{command:Ri.setStyle,args:[j]}];V(F.center,j.center)||N.push({command:Ri.setCenter,args:[j.center]}),V(F.zoom,j.zoom)||N.push({command:Ri.setZoom,args:[j.zoom]}),V(F.bearing,j.bearing)||N.push({command:Ri.setBearing,args:[j.bearing]}),V(F.pitch,j.pitch)||N.push({command:Ri.setPitch,args:[j.pitch]}),V(F.sprite,j.sprite)||N.push({command:Ri.setSprite,args:[j.sprite]}),V(F.glyphs,j.glyphs)||N.push({command:Ri.setGlyphs,args:[j.glyphs]}),V(F.transition,j.transition)||N.push({command:Ri.setTransition,args:[j.transition]}),V(F.light,j.light)||N.push({command:Ri.setLight,args:[j.light]});const oe={},ae=[];(function(ye,Re,He,gt){let dt;for(dt in Re=Re||{},ye=ye||{})Object.prototype.hasOwnProperty.call(ye,dt)&&(Object.prototype.hasOwnProperty.call(Re,dt)||ir(dt,He,gt));for(dt in Re)Object.prototype.hasOwnProperty.call(Re,dt)&&(Object.prototype.hasOwnProperty.call(ye,dt)?V(ye[dt],Re[dt])||(ye[dt].type==="geojson"&&Re[dt].type==="geojson"&&jr(ye,Re,dt)?He.push({command:Ri.setGeoJSONSourceData,args:[dt,Re[dt].data]}):Ur(dt,Re,He,gt)):hr(dt,Re,He))})(F.sources,j.sources,ae,oe);const me=[];F.layers&&F.layers.forEach(ye=>{oe[ye.source]?N.push({command:Ri.removeLayer,args:[ye.id]}):me.push(ye)}),N=N.concat(ae),function(ye,Re,He){Re=Re||[];const gt=(ye=ye||[]).map(Zr),dt=Re.map(Zr),pt=ye.reduce(Eo,{}),Ft=Re.reduce(Eo,{}),Wt=gt.slice(),on=Object.create(null);let bt,un,tn,In,kn,Kn,xn;for(bt=0,un=0;bt<gt.length;bt++)tn=gt[bt],Object.prototype.hasOwnProperty.call(Ft,tn)?un++:(He.push({command:Ri.removeLayer,args:[tn]}),Wt.splice(Wt.indexOf(tn,un),1));for(bt=0,un=0;bt<dt.length;bt++)tn=dt[dt.length-1-bt],Wt[Wt.length-1-bt]!==tn&&(Object.prototype.hasOwnProperty.call(pt,tn)?(He.push({command:Ri.removeLayer,args:[tn]}),Wt.splice(Wt.lastIndexOf(tn,Wt.length-un),1)):un++,Kn=Wt[Wt.length-bt],He.push({command:Ri.addLayer,args:[Ft[tn],Kn]}),Wt.splice(Wt.length-bt,0,tn),on[tn]=!0);for(bt=0;bt<dt.length;bt++)if(tn=dt[bt],In=pt[tn],kn=Ft[tn],!on[tn]&&!V(In,kn))if(V(In.source,kn.source)&&V(In["source-layer"],kn["source-layer"])&&V(In.type,kn.type)){for(xn in pr(In.layout,kn.layout,He,tn,null,Ri.setLayoutProperty),pr(In.paint,kn.paint,He,tn,null,Ri.setPaintProperty),V(In.filter,kn.filter)||He.push({command:Ri.setFilter,args:[tn,kn.filter]}),V(In.minzoom,kn.minzoom)&&V(In.maxzoom,kn.maxzoom)||He.push({command:Ri.setLayerZoomRange,args:[tn,kn.minzoom,kn.maxzoom]}),In)Object.prototype.hasOwnProperty.call(In,xn)&&xn!=="layout"&&xn!=="paint"&&xn!=="filter"&&xn!=="metadata"&&xn!=="minzoom"&&xn!=="maxzoom"&&(xn.indexOf("paint.")===0?pr(In[xn],kn[xn],He,tn,xn.slice(6),Ri.setPaintProperty):V(In[xn],kn[xn])||He.push({command:Ri.setLayerProperty,args:[tn,xn,kn[xn]]}));for(xn in kn)Object.prototype.hasOwnProperty.call(kn,xn)&&!Object.prototype.hasOwnProperty.call(In,xn)&&xn!=="layout"&&xn!=="paint"&&xn!=="filter"&&xn!=="metadata"&&xn!=="minzoom"&&xn!=="maxzoom"&&(xn.indexOf("paint.")===0?pr(In[xn],kn[xn],He,tn,xn.slice(6),Ri.setPaintProperty):V(In[xn],kn[xn])||He.push({command:Ri.setLayerProperty,args:[tn,xn,kn[xn]]}))}else He.push({command:Ri.removeLayer,args:[tn]}),Kn=Wt[Wt.lastIndexOf(tn)+1],He.push({command:Ri.addLayer,args:[kn,Kn]})}(me,j.layers,N)}catch(oe){console.warn("Unable to compute style diff:",oe),N=[{command:Ri.setStyle,args:[j]}]}return N}(this.serialize(),u).filter(F=>!(F.command in hs));if(x.length===0)return!1;const I=x.filter(F=>!(F.command in xo));if(I.length>0)throw new Error(`Unimplemented: ${I.map(F=>F.command).join(", ")}.`);return x.forEach(F=>{F.command!=="setTransition"&&this[F.command].apply(this,F.args)}),this.stylesheet=u,!0}addImage(u,x){if(this.getImage(u))return this.fire(new h.ErrorEvent(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,x),this._afterImageUpdated(u)}updateImage(u,x){this.imageManager.updateImage(u,x)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new h.ErrorEvent(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,x,I={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!x.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(x).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(x.type)>=0&&this._validate(h.validateStyle.source,`sources.${u}`,x,null,I))return;this.map&&this.map._collectResourceTiming&&(x.collectResourceTiming=!0);const F=this.sourceCaches[u]=new zi(u,x,this.dispatcher);F.style=this,F.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:F.serialize(),sourceId:u})),F.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const I in this._layers)if(this._layers[I].source===u)return this.fire(new h.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${I}" is using it.`)));const x=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],x.fire(new h.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),x.setEventedParent(null),x.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,x){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const I=this.sourceCaches[u].getSource();if(I.type!=="geojson")throw new Error(`geojsonSource.type is ${I.type}, which is !== 'geojson`);I.setData(x),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,x,I={}){this._checkLoaded();const F=u.id;if(this.getLayer(F))return void this.fire(new h.ErrorEvent(new Error(`Layer "${F}" already exists on this map.`)));let j;if(u.type==="custom"){if(fo(this,h.validateCustomStyleLayer(u)))return;j=h.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(F,u.source),u=h.clone$1(u),u=h.extend(u,{source:F})),this._validate(h.validateStyle.layer,`layers.${F}`,u,{arrayIndex:-1},I))return;j=h.createStyleLayer(u),this._validateLayer(j),j.setEventedParent(this,{layer:{id:F}}),this._serializedLayers[j.id]=j.serialize()}const N=x?this._order.indexOf(x):this._order.length;if(x&&N===-1)this.fire(new h.ErrorEvent(new Error(`Cannot add layer "${F}" before non-existing layer "${x}".`)));else{if(this._order.splice(N,0,F),this._layerOrderChanged=!0,this._layers[F]=j,this._removedLayers[F]&&j.source&&j.type!=="custom"){const oe=this._removedLayers[F];delete this._removedLayers[F],oe.type!==j.type?this._updatedSources[j.source]="clear":(this._updatedSources[j.source]="reload",this.sourceCaches[j.source].pause())}this._updateLayer(j),j.onAdd&&j.onAdd(this.map)}}moveLayer(u,x){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new h.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===x)return;const I=this._order.indexOf(u);this._order.splice(I,1);const F=x?this._order.indexOf(x):this._order.length;x&&F===-1?this.fire(new h.ErrorEvent(new Error(`Cannot move layer "${u}" before non-existing layer "${x}".`))):(this._order.splice(F,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const x=this._layers[u];if(!x)return void this.fire(new h.ErrorEvent(new Error(`Cannot remove non-existing layer "${u}".`)));x.setEventedParent(null);const I=this._order.indexOf(u);this._order.splice(I,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=x,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],x.onRemove&&x.onRemove(this.map)}getLayer(u){return this._layers[u]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,x,I){this._checkLoaded();const F=this.getLayer(u);F?F.minzoom===x&&F.maxzoom===I||(x!=null&&(F.minzoom=x),I!=null&&(F.maxzoom=I),this._updateLayer(F)):this.fire(new h.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,x,I={}){this._checkLoaded();const F=this.getLayer(u);if(F){if(!V(F.filter,x))return x==null?(F.filter=void 0,void this._updateLayer(F)):void(this._validate(h.validateStyle.filter,`layers.${F.id}.filter`,x,null,I)||(F.filter=h.clone$1(x),this._updateLayer(F)))}else this.fire(new h.ErrorEvent(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return h.clone$1(this.getLayer(u).filter)}setLayoutProperty(u,x,I,F={}){this._checkLoaded();const j=this.getLayer(u);j?V(j.getLayoutProperty(x),I)||(j.setLayoutProperty(x,I,F),this._updateLayer(j)):this.fire(new h.ErrorEvent(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,x){const I=this.getLayer(u);if(I)return I.getLayoutProperty(x);this.fire(new h.ErrorEvent(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,x,I,F={}){this._checkLoaded();const j=this.getLayer(u);j?V(j.getPaintProperty(x),I)||(j.setPaintProperty(x,I,F)&&this._updateLayer(j),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new h.ErrorEvent(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,x){return this.getLayer(u).getPaintProperty(x)}setFeatureState(u,x){this._checkLoaded();const I=u.source,F=u.sourceLayer,j=this.sourceCaches[I];if(j===void 0)return void this.fire(new h.ErrorEvent(new Error(`The source '${I}' does not exist in the map's style.`)));const N=j.getSource().type;N==="geojson"&&F?this.fire(new h.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):N!=="vector"||F?(u.id===void 0&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),j.setFeatureState(F,u.id,x)):this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,x){this._checkLoaded();const I=u.source,F=this.sourceCaches[I];if(F===void 0)return void this.fire(new h.ErrorEvent(new Error(`The source '${I}' does not exist in the map's style.`)));const j=F.getSource().type,N=j==="vector"?u.sourceLayer:void 0;j!=="vector"||N?x&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new h.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):F.removeFeatureState(N,u.id,x):this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const x=u.source,I=u.sourceLayer,F=this.sourceCaches[x];if(F!==void 0)return F.getSource().type!=="vector"||I?(u.id===void 0&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),F.getFeatureState(I,u.id)):void this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new h.ErrorEvent(new Error(`The source '${x}' does not exist in the map's style.`)))}getTransition(){return h.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return h.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:h.mapObject(this.sourceCaches,u=>u.serialize()),layers:this._serializeLayers(this._order)},u=>u!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(u){const x=N=>this._layers[N].type==="fill-extrusion",I={},F=[];for(let N=this._order.length-1;N>=0;N--){const oe=this._order[N];if(x(oe)){I[oe]=N;for(const ae of u){const me=ae[oe];if(me)for(const ye of me)F.push(ye)}}}F.sort((N,oe)=>oe.intersectionZ-N.intersectionZ);const j=[];for(let N=this._order.length-1;N>=0;N--){const oe=this._order[N];if(x(oe))for(let ae=F.length-1;ae>=0;ae--){const me=F[ae].feature;if(I[me.layer.id]<N)break;j.push(me),F.pop()}else for(const ae of u){const me=ae[oe];if(me)for(const ye of me)j.push(ye.feature)}}return j}queryRenderedFeatures(u,x,I){x&&x.filter&&this._validate(h.validateStyle.filter,"queryRenderedFeatures.filter",x.filter,null,x);const F={};if(x&&x.layers){if(!Array.isArray(x.layers))return this.fire(new h.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const N of x.layers){const oe=this._layers[N];if(!oe)return this.fire(new h.ErrorEvent(new Error(`The layer '${N}' does not exist in the map's style and cannot be queried for features.`))),[];F[oe.source]=!0}}const j=[];x.availableImages=this._availableImages;for(const N in this.sourceCaches)x.layers&&!F[N]||j.push(Bn(this.sourceCaches[N],this._layers,this._serializedLayers,u,x,I));return this.placement&&j.push(function(N,oe,ae,me,ye,Re,He){const gt={},dt=Re.queryRenderedSymbols(me),pt=[];for(const Ft of Object.keys(dt).map(Number))pt.push(He[Ft]);pt.sort(Hn);for(const Ft of pt){const Wt=Ft.featureIndex.lookupSymbolFeatures(dt[Ft.bucketInstanceId],oe,Ft.bucketIndex,Ft.sourceLayerIndex,ye.filter,ye.layers,ye.availableImages,N);for(const on in Wt){const bt=gt[on]=gt[on]||[],un=Wt[on];un.sort((tn,In)=>{const kn=Ft.featureSortOrder;if(kn){const Kn=kn.indexOf(tn.featureIndex);return kn.indexOf(In.featureIndex)-Kn}return In.featureIndex-tn.featureIndex});for(const tn of un)bt.push(tn)}}for(const Ft in gt)gt[Ft].forEach(Wt=>{const on=Wt.feature,bt=ae[N[Ft].source].getFeatureState(on.layer["source-layer"],on.id);on.source=on.layer.source,on.layer["source-layer"]&&(on.sourceLayer=on.layer["source-layer"]),on.state=bt});return gt}(this._layers,this._serializedLayers,this.sourceCaches,u,x,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(j)}querySourceFeatures(u,x){x&&x.filter&&this._validate(h.validateStyle.filter,"querySourceFeatures.filter",x.filter,null,x);const I=this.sourceCaches[u];return I?function(F,j){const N=F.getRenderableIds().map(me=>F.getTileByID(me)),oe=[],ae={};for(let me=0;me<N.length;me++){const ye=N[me],Re=ye.tileID.canonical.key;ae[Re]||(ae[Re]=!0,ye.querySourceFeatures(oe,j))}return oe}(I,x):[]}addSourceType(u,x,I){return hn.getSourceType(u)?I(new Error(`A source type called "${u}" already exists.`)):(hn.setSourceType(u,x),x.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:x.workerSourceURL},I):I(null,null))}getLight(){return this.light.getLight()}setLight(u,x={}){this._checkLoaded();const I=this.light.getLight();let F=!1;for(const N in u)if(!V(u[N],I[N])){F=!0;break}if(!F)return;const j={now:h.exported.now(),transition:h.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,x),this.light.updateTransitions(j)}_validate(u,x,I,F,j={}){return(!j||j.validate!==!1)&&fo(this,u.call(h.validateStyle,h.extend({key:x,style:this.serialize(),value:I,styleSpec:h.spec},F)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),h.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const x=this.sourceCaches[u];x.setEventedParent(null),x.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const x in this.sourceCaches)this.sourceCaches[x].update(u,this.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,x,I,F,j=!1){let N=!1,oe=!1;const ae={};for(const me of this._order){const ye=this._layers[me];if(ye.type!=="symbol")continue;if(!ae[ye.source]){const He=this.sourceCaches[ye.source];ae[ye.source]=He.getRenderableIds(!0).map(gt=>He.getTileByID(gt)).sort((gt,dt)=>dt.tileID.overscaledZ-gt.tileID.overscaledZ||(gt.tileID.isLessThan(dt.tileID)?-1:1))}const Re=this.crossTileSymbolIndex.addLayer(ye,ae[ye.source],u.center.lng);N=N||Re}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((j=j||this._layerOrderChanged||I===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.exported.now(),u.zoom))&&(this.pauseablePlacement=new an(u,this.terrain,this._order,j,x,I,F,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ae),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.exported.now()),oe=!0),N&&this.pauseablePlacement.placement.setStale()),oe||N)for(const me of this._order){const ye=this._layers[me];ye.type==="symbol"&&this.placement.updateLayerOpacities(ye,ae[ye.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.exported.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,x,I){this.imageManager.getImages(x.icons,I),this._updateTilesForChangedImages();const F=this.sourceCaches[x.source];F&&F.setDependencies(x.tileID.key,x.type,x.icons)}getGlyphs(u,x,I){this.glyphManager.getGlyphs(x.stacks,I)}getResource(u,x,I){return h.makeRequest(x,I)}}hn.getSourceType=function(P){return Wn[P]},hn.setSourceType=function(P,u){Wn[P]=u},hn.registerForPluginStateChange=h.registerForPluginStateChange;var Wr="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Dr={prelude:Mr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Mr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Mr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Mr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Mr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Mr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Mr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Mr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Mr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Mr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Mr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Mr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Mr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Mr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Mr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Mr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Mr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Mr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Mr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Mr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Mr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Mr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Mr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Mr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Wr),terrainDepth:Mr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Wr),terrainCoords:Mr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Wr)};function Mr(P,u){const x=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=u.match(/attribute ([\w]+) ([\w]+)/g),F=P.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),j=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),N=j?j.concat(F):F,oe={};return{fragmentSource:P=P.replace(x,(ae,me,ye,Re,He)=>(oe[He]=!0,me==="define"?`
#ifndef HAS_UNIFORM_u_${He}
varying ${ye} ${Re} ${He};
#else
uniform ${ye} ${Re} u_${He};
#endif
`:`
#ifdef HAS_UNIFORM_u_${He}
    ${ye} ${Re} ${He} = u_${He};
#endif
`)),vertexSource:u=u.replace(x,(ae,me,ye,Re,He)=>{const gt=Re==="float"?"vec2":"vec4",dt=He.match(/color/)?"color":gt;return oe[He]?me==="define"?`
#ifndef HAS_UNIFORM_u_${He}
uniform lowp float u_${He}_t;
attribute ${ye} ${gt} a_${He};
varying ${ye} ${Re} ${He};
#else
uniform ${ye} ${Re} u_${He};
#endif
`:dt==="vec4"?`
#ifndef HAS_UNIFORM_u_${He}
    ${He} = a_${He};
#else
    ${ye} ${Re} ${He} = u_${He};
#endif
`:`
#ifndef HAS_UNIFORM_u_${He}
    ${He} = unpack_mix_${dt}(a_${He}, u_${He}_t);
#else
    ${ye} ${Re} ${He} = u_${He};
#endif
`:me==="define"?`
#ifndef HAS_UNIFORM_u_${He}
uniform lowp float u_${He}_t;
attribute ${ye} ${gt} a_${He};
#else
uniform ${ye} ${Re} u_${He};
#endif
`:dt==="vec4"?`
#ifndef HAS_UNIFORM_u_${He}
    ${ye} ${Re} ${He} = a_${He};
#else
    ${ye} ${Re} ${He} = u_${He};
#endif
`:`
#ifndef HAS_UNIFORM_u_${He}
    ${ye} ${Re} ${He} = unpack_mix_${dt}(a_${He}, u_${He}_t);
#else
    ${ye} ${Re} ${He} = u_${He};
#endif
`}),staticAttributes:I,staticUniforms:N}}class xc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,x,I,F,j,N,oe,ae,me){this.context=u;let ye=this.boundPaintVertexBuffers.length!==F.length;for(let Re=0;!ye&&Re<F.length;Re++)this.boundPaintVertexBuffers[Re]!==F[Re]&&(ye=!0);u.extVertexArrayObject&&this.vao&&this.boundProgram===x&&this.boundLayoutVertexBuffer===I&&!ye&&this.boundIndexBuffer===j&&this.boundVertexOffset===N&&this.boundDynamicVertexBuffer===oe&&this.boundDynamicVertexBuffer2===ae&&this.boundDynamicVertexBuffer3===me?(u.bindVertexArrayOES.set(this.vao),oe&&oe.bind(),j&&j.dynamicDraw&&j.bind(),ae&&ae.bind(),me&&me.bind()):this.freshBind(x,I,F,j,N,oe,ae,me)}freshBind(u,x,I,F,j,N,oe,ae){let me;const ye=u.numAttributes,Re=this.context,He=Re.gl;if(Re.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Re.extVertexArrayObject.createVertexArrayOES(),Re.bindVertexArrayOES.set(this.vao),me=0,this.boundProgram=u,this.boundLayoutVertexBuffer=x,this.boundPaintVertexBuffers=I,this.boundIndexBuffer=F,this.boundVertexOffset=j,this.boundDynamicVertexBuffer=N,this.boundDynamicVertexBuffer2=oe,this.boundDynamicVertexBuffer3=ae;else{me=Re.currentNumAttributes||0;for(let gt=ye;gt<me;gt++)He.disableVertexAttribArray(gt)}x.enableAttributes(He,u);for(const gt of I)gt.enableAttributes(He,u);N&&N.enableAttributes(He,u),oe&&oe.enableAttributes(He,u),ae&&ae.enableAttributes(He,u),x.bind(),x.setVertexAttribPointers(He,u,j);for(const gt of I)gt.bind(),gt.setVertexAttribPointers(He,u,j);N&&(N.bind(),N.setVertexAttribPointers(He,u,j)),F&&F.bind(),oe&&(oe.bind(),oe.setVertexAttribPointers(He,u,j)),ae&&(ae.bind(),ae.setVertexAttribPointers(He,u,j)),Re.currentNumAttributes=ye}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ca(P){const u=[];for(let x=0;x<P.length;x++){if(P[x]===null)continue;const I=P[x].split(" ");u.push(I.pop())}return u}class sh{constructor(u,x,I,F,j,N,oe){const ae=u.gl;this.program=ae.createProgram();const me=ca(I.staticAttributes),ye=F?F.getBinderAttributes():[],Re=me.concat(ye),He=Dr.prelude.staticUniforms?ca(Dr.prelude.staticUniforms):[],gt=I.staticUniforms?ca(I.staticUniforms):[],dt=F?F.getBinderUniforms():[],pt=He.concat(gt).concat(dt),Ft=[];for(const kn of pt)Ft.indexOf(kn)<0&&Ft.push(kn);const Wt=F?F.defines():[];N&&Wt.push("#define OVERDRAW_INSPECTOR;"),oe&&Wt.push("#define TERRAIN3D;");const on=Wt.concat(Dr.prelude.fragmentSource,I.fragmentSource).join(`
`),bt=Wt.concat(Dr.prelude.vertexSource,I.vertexSource).join(`
`),un=ae.createShader(ae.FRAGMENT_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);ae.shaderSource(un,on),ae.compileShader(un),ae.attachShader(this.program,un);const tn=ae.createShader(ae.VERTEX_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);ae.shaderSource(tn,bt),ae.compileShader(tn),ae.attachShader(this.program,tn),this.attributes={};const In={};this.numAttributes=Re.length;for(let kn=0;kn<this.numAttributes;kn++)Re[kn]&&(ae.bindAttribLocation(this.program,kn,Re[kn]),this.attributes[Re[kn]]=kn);ae.linkProgram(this.program),ae.deleteShader(tn),ae.deleteShader(un);for(let kn=0;kn<Ft.length;kn++){const Kn=Ft[kn];if(Kn&&!In[Kn]){const xn=ae.getUniformLocation(this.program,Kn);xn&&(In[Kn]=xn)}}this.fixedUniforms=j(u,In),this.terrainUniforms=((kn,Kn)=>({u_depth:new h.Uniform1i(kn,Kn.u_depth),u_terrain:new h.Uniform1i(kn,Kn.u_terrain),u_terrain_dim:new h.Uniform1f(kn,Kn.u_terrain_dim),u_terrain_matrix:new h.UniformMatrix4f(kn,Kn.u_terrain_matrix),u_terrain_unpack:new h.Uniform4f(kn,Kn.u_terrain_unpack),u_terrain_offset:new h.Uniform1f(kn,Kn.u_terrain_offset),u_terrain_exaggeration:new h.Uniform1f(kn,Kn.u_terrain_exaggeration)}))(u,In),this.binderUniforms=F?F.getUniforms(u,In):[]}draw(u,x,I,F,j,N,oe,ae,me,ye,Re,He,gt,dt,pt,Ft,Wt,on){const bt=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(I),u.setStencilMode(F),u.setColorMode(j),u.setCullFace(N),ae){u.activeTexture.set(bt.TEXTURE2),bt.bindTexture(bt.TEXTURE_2D,ae.depthTexture),u.activeTexture.set(bt.TEXTURE3),bt.bindTexture(bt.TEXTURE_2D,ae.texture);for(const tn in this.terrainUniforms)this.terrainUniforms[tn].set(ae[tn])}for(const tn in this.fixedUniforms)this.fixedUniforms[tn].set(oe[tn]);pt&&pt.setUniforms(u,this.binderUniforms,gt,{zoom:dt});let un=0;switch(x){case bt.LINES:un=2;break;case bt.TRIANGLES:un=3;break;case bt.LINE_STRIP:un=1}for(const tn of He.get()){const In=tn.vaos||(tn.vaos={});(In[me]||(In[me]=new xc)).bind(u,this,ye,pt?pt.getPaintVertexBuffers():[],Re,tn.vertexOffset,Ft,Wt,on),bt.drawElements(x,tn.primitiveLength*un,bt.UNSIGNED_SHORT,tn.primitiveOffset*un*2)}}}function Jr(P,u,x){const I=1/zt(x,1,u.transform.tileZoom),F=Math.pow(2,x.tileID.overscaledZ),j=x.tileSize*Math.pow(2,u.transform.tileZoom)/F,N=j*(x.tileID.canonical.x+x.tileID.wrap*F),oe=j*x.tileID.canonical.y;return{u_image:0,u_texsize:x.imageAtlasTexture.size,u_scale:[I,P.fromScale,P.toScale],u_fade:P.t,u_pixel_coord_upper:[N>>16,oe>>16],u_pixel_coord_lower:[65535&N,65535&oe]}}const Wo=(P,u,x,I)=>{const F=u.style.light,j=F.properties.get("position"),N=[j.x,j.y,j.z],oe=h.create$1();F.properties.get("anchor")==="viewport"&&h.fromRotation(oe,-u.transform.angle),h.transformMat3(N,N,oe);const ae=F.properties.get("color");return{u_matrix:P,u_lightpos:N,u_lightintensity:F.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+x,u_opacity:I}},gi=(P,u,x,I,F,j,N)=>h.extend(Wo(P,u,x,I),Jr(j,u,N),{u_height_factor:-Math.pow(2,F.overscaledZ)/N.tileSize/8}),zr=P=>({u_matrix:P}),_r=(P,u,x,I)=>h.extend(zr(P),Jr(x,u,I)),Va=(P,u)=>({u_matrix:P,u_world:u}),Ea=(P,u,x,I,F)=>h.extend(_r(P,u,x,I),{u_world:F}),Lr=(P,u,x,I)=>{const F=P.transform;let j,N;if(I.paint.get("circle-pitch-alignment")==="map"){const oe=zt(x,1,F.zoom);j=!0,N=[oe,oe]}else j=!1,N=F.pixelsToGLUnits;return{u_camera_to_center_distance:F.cameraToCenterDistance,u_scale_with_map:+(I.paint.get("circle-pitch-scale")==="map"),u_matrix:P.translatePosMatrix(u.posMatrix,x,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_pitch_with_map:+j,u_device_pixel_ratio:P.pixelRatio,u_extrude_scale:N}},Io=(P,u,x)=>{const I=zt(x,1,u.zoom),F=Math.pow(2,u.zoom-x.tileID.overscaledZ),j=x.tileID.overscaleFactor();return{u_matrix:P,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:I,u_extrude_scale:[u.pixelsToGLUnits[0]/(I*F),u.pixelsToGLUnits[1]/(I*F)],u_overscale_factor:j}},Sa=(P,u,x=1)=>({u_matrix:P,u_color:u,u_overlay:0,u_overlay_scale:x}),_a=P=>({u_matrix:P}),Es=(P,u,x,I)=>({u_matrix:P,u_extrude_scale:zt(u,1,x),u_intensity:I});function Ho(P,u){const x=Math.pow(2,u.canonical.z),I=u.canonical.y;return[new h.MercatorCoordinate(0,I/x).toLngLat().lat,new h.MercatorCoordinate(0,(I+1)/x).toLngLat().lat]}const Ol=(P,u,x,I)=>{const F=P.transform;return{u_matrix:Qc(P,u,x,I),u_ratio:1/zt(u,1,F.zoom),u_device_pixel_ratio:P.pixelRatio,u_units_to_pixels:[1/F.pixelsToGLUnits[0],1/F.pixelsToGLUnits[1]]}},gl=(P,u,x,I,F)=>h.extend(Ol(P,u,x,F),{u_image:0,u_image_height:I}),oc=(P,u,x,I,F)=>{const j=P.transform,N=Jo(u,j);return{u_matrix:Qc(P,u,x,F),u_texsize:u.imageAtlasTexture.size,u_ratio:1/zt(u,1,j.zoom),u_device_pixel_ratio:P.pixelRatio,u_image:0,u_scale:[N,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/j.pixelsToGLUnits[0],1/j.pixelsToGLUnits[1]]}},_l=(P,u,x,I,F,j)=>{const N=P.lineAtlas,oe=Jo(u,P.transform),ae=x.layout.get("line-cap")==="round",me=N.getDash(I.from,ae),ye=N.getDash(I.to,ae),Re=me.width*F.fromScale,He=ye.width*F.toScale;return h.extend(Ol(P,u,x,j),{u_patternscale_a:[oe/Re,-me.height/2],u_patternscale_b:[oe/He,-ye.height/2],u_sdfgamma:N.width/(256*Math.min(Re,He)*P.pixelRatio)/2,u_image:0,u_tex_y_a:me.y,u_tex_y_b:ye.y,u_mix:F.t})};function Jo(P,u){return 1/zt(P,1,u.tileZoom)}function Qc(P,u,x,I){return P.translatePosMatrix(I?I.posMatrix:u.tileID.posMatrix,u,x.paint.get("line-translate"),x.paint.get("line-translate-anchor"))}const $c=(P,u,x,I,F)=>{return{u_matrix:P,u_tl_parent:u,u_scale_parent:x,u_buffer_scale:1,u_fade_t:I.mix,u_opacity:I.opacity*F.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:F.paint.get("raster-brightness-min"),u_brightness_high:F.paint.get("raster-brightness-max"),u_saturation_factor:(N=F.paint.get("raster-saturation"),N>0?1-1/(1.001-N):-N),u_contrast_factor:(j=F.paint.get("raster-contrast"),j>0?1/(1-j):1+j),u_spin_weights:Uu(F.paint.get("raster-hue-rotate"))};var j,N};function Uu(P){P*=Math.PI/180;const u=Math.sin(P),x=Math.cos(P);return[(2*x+1)/3,(-Math.sqrt(3)*u-x+1)/3,(Math.sqrt(3)*u-x+1)/3]}const fu=(P,u,x,I,F,j,N,oe,ae,me)=>{const ye=F.transform;return{u_is_size_zoom_constant:+(P==="constant"||P==="source"),u_is_size_feature_constant:+(P==="constant"||P==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:ye.cameraToCenterDistance,u_pitch:ye.pitch/360*2*Math.PI,u_rotate_symbol:+x,u_aspect_ratio:ye.width/ye.height,u_fade_change:F.options.fadeDuration?F.symbolFadeChange:1,u_matrix:j,u_label_plane_matrix:N,u_coord_matrix:oe,u_is_text:+ae,u_pitch_with_map:+I,u_texsize:me,u_texture:0}},bc=(P,u,x,I,F,j,N,oe,ae,me,ye)=>{const Re=F.transform;return h.extend(fu(P,u,x,I,F,j,N,oe,ae,me),{u_gamma_scale:I?Math.cos(Re._pitch)*Re.cameraToCenterDistance:1,u_device_pixel_ratio:F.pixelRatio,u_is_halo:+ye})},br=(P,u,x,I,F,j,N,oe,ae,me)=>h.extend(bc(P,u,x,I,F,j,N,oe,!0,ae,!0),{u_texsize_icon:me,u_texture_icon:1}),Ko=(P,u,x)=>({u_matrix:P,u_opacity:u,u_color:x}),ss=(P,u,x,I,F,j)=>h.extend(function(N,oe,ae,me){const ye=ae.imageManager.getPattern(N.from.toString()),Re=ae.imageManager.getPattern(N.to.toString()),{width:He,height:gt}=ae.imageManager.getPixelSize(),dt=Math.pow(2,me.tileID.overscaledZ),pt=me.tileSize*Math.pow(2,ae.transform.tileZoom)/dt,Ft=pt*(me.tileID.canonical.x+me.tileID.wrap*dt),Wt=pt*me.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ye.tl,u_pattern_br_a:ye.br,u_pattern_tl_b:Re.tl,u_pattern_br_b:Re.br,u_texsize:[He,gt],u_mix:oe.t,u_pattern_size_a:ye.displaySize,u_pattern_size_b:Re.displaySize,u_scale_a:oe.fromScale,u_scale_b:oe.toScale,u_tile_units_to_pixels:1/zt(me,1,ae.transform.tileZoom),u_pixel_coord_upper:[Ft>>16,Wt>>16],u_pixel_coord_lower:[65535&Ft,65535&Wt]}}(I,j,x,F),{u_matrix:P,u_opacity:u}),ah={fillExtrusion:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_lightpos:new h.Uniform3f(P,u.u_lightpos),u_lightintensity:new h.Uniform1f(P,u.u_lightintensity),u_lightcolor:new h.Uniform3f(P,u.u_lightcolor),u_vertical_gradient:new h.Uniform1f(P,u.u_vertical_gradient),u_opacity:new h.Uniform1f(P,u.u_opacity)}),fillExtrusionPattern:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_lightpos:new h.Uniform3f(P,u.u_lightpos),u_lightintensity:new h.Uniform1f(P,u.u_lightintensity),u_lightcolor:new h.Uniform3f(P,u.u_lightcolor),u_vertical_gradient:new h.Uniform1f(P,u.u_vertical_gradient),u_height_factor:new h.Uniform1f(P,u.u_height_factor),u_image:new h.Uniform1i(P,u.u_image),u_texsize:new h.Uniform2f(P,u.u_texsize),u_pixel_coord_upper:new h.Uniform2f(P,u.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(P,u.u_pixel_coord_lower),u_scale:new h.Uniform3f(P,u.u_scale),u_fade:new h.Uniform1f(P,u.u_fade),u_opacity:new h.Uniform1f(P,u.u_opacity)}),fill:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix)}),fillPattern:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_image:new h.Uniform1i(P,u.u_image),u_texsize:new h.Uniform2f(P,u.u_texsize),u_pixel_coord_upper:new h.Uniform2f(P,u.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(P,u.u_pixel_coord_lower),u_scale:new h.Uniform3f(P,u.u_scale),u_fade:new h.Uniform1f(P,u.u_fade)}),fillOutline:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_world:new h.Uniform2f(P,u.u_world)}),fillOutlinePattern:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_world:new h.Uniform2f(P,u.u_world),u_image:new h.Uniform1i(P,u.u_image),u_texsize:new h.Uniform2f(P,u.u_texsize),u_pixel_coord_upper:new h.Uniform2f(P,u.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(P,u.u_pixel_coord_lower),u_scale:new h.Uniform3f(P,u.u_scale),u_fade:new h.Uniform1f(P,u.u_fade)}),circle:(P,u)=>({u_camera_to_center_distance:new h.Uniform1f(P,u.u_camera_to_center_distance),u_scale_with_map:new h.Uniform1i(P,u.u_scale_with_map),u_pitch_with_map:new h.Uniform1i(P,u.u_pitch_with_map),u_extrude_scale:new h.Uniform2f(P,u.u_extrude_scale),u_device_pixel_ratio:new h.Uniform1f(P,u.u_device_pixel_ratio),u_matrix:new h.UniformMatrix4f(P,u.u_matrix)}),collisionBox:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_camera_to_center_distance:new h.Uniform1f(P,u.u_camera_to_center_distance),u_pixels_to_tile_units:new h.Uniform1f(P,u.u_pixels_to_tile_units),u_extrude_scale:new h.Uniform2f(P,u.u_extrude_scale),u_overscale_factor:new h.Uniform1f(P,u.u_overscale_factor)}),collisionCircle:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_inv_matrix:new h.UniformMatrix4f(P,u.u_inv_matrix),u_camera_to_center_distance:new h.Uniform1f(P,u.u_camera_to_center_distance),u_viewport_size:new h.Uniform2f(P,u.u_viewport_size)}),debug:(P,u)=>({u_color:new h.UniformColor(P,u.u_color),u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_overlay:new h.Uniform1i(P,u.u_overlay),u_overlay_scale:new h.Uniform1f(P,u.u_overlay_scale)}),clippingMask:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix)}),heatmap:(P,u)=>({u_extrude_scale:new h.Uniform1f(P,u.u_extrude_scale),u_intensity:new h.Uniform1f(P,u.u_intensity),u_matrix:new h.UniformMatrix4f(P,u.u_matrix)}),heatmapTexture:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_world:new h.Uniform2f(P,u.u_world),u_image:new h.Uniform1i(P,u.u_image),u_color_ramp:new h.Uniform1i(P,u.u_color_ramp),u_opacity:new h.Uniform1f(P,u.u_opacity)}),hillshade:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_image:new h.Uniform1i(P,u.u_image),u_latrange:new h.Uniform2f(P,u.u_latrange),u_light:new h.Uniform2f(P,u.u_light),u_shadow:new h.UniformColor(P,u.u_shadow),u_highlight:new h.UniformColor(P,u.u_highlight),u_accent:new h.UniformColor(P,u.u_accent)}),hillshadePrepare:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_image:new h.Uniform1i(P,u.u_image),u_dimension:new h.Uniform2f(P,u.u_dimension),u_zoom:new h.Uniform1f(P,u.u_zoom),u_unpack:new h.Uniform4f(P,u.u_unpack)}),line:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_ratio:new h.Uniform1f(P,u.u_ratio),u_device_pixel_ratio:new h.Uniform1f(P,u.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(P,u.u_units_to_pixels)}),lineGradient:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_ratio:new h.Uniform1f(P,u.u_ratio),u_device_pixel_ratio:new h.Uniform1f(P,u.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(P,u.u_units_to_pixels),u_image:new h.Uniform1i(P,u.u_image),u_image_height:new h.Uniform1f(P,u.u_image_height)}),linePattern:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_texsize:new h.Uniform2f(P,u.u_texsize),u_ratio:new h.Uniform1f(P,u.u_ratio),u_device_pixel_ratio:new h.Uniform1f(P,u.u_device_pixel_ratio),u_image:new h.Uniform1i(P,u.u_image),u_units_to_pixels:new h.Uniform2f(P,u.u_units_to_pixels),u_scale:new h.Uniform3f(P,u.u_scale),u_fade:new h.Uniform1f(P,u.u_fade)}),lineSDF:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_ratio:new h.Uniform1f(P,u.u_ratio),u_device_pixel_ratio:new h.Uniform1f(P,u.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(P,u.u_units_to_pixels),u_patternscale_a:new h.Uniform2f(P,u.u_patternscale_a),u_patternscale_b:new h.Uniform2f(P,u.u_patternscale_b),u_sdfgamma:new h.Uniform1f(P,u.u_sdfgamma),u_image:new h.Uniform1i(P,u.u_image),u_tex_y_a:new h.Uniform1f(P,u.u_tex_y_a),u_tex_y_b:new h.Uniform1f(P,u.u_tex_y_b),u_mix:new h.Uniform1f(P,u.u_mix)}),raster:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_tl_parent:new h.Uniform2f(P,u.u_tl_parent),u_scale_parent:new h.Uniform1f(P,u.u_scale_parent),u_buffer_scale:new h.Uniform1f(P,u.u_buffer_scale),u_fade_t:new h.Uniform1f(P,u.u_fade_t),u_opacity:new h.Uniform1f(P,u.u_opacity),u_image0:new h.Uniform1i(P,u.u_image0),u_image1:new h.Uniform1i(P,u.u_image1),u_brightness_low:new h.Uniform1f(P,u.u_brightness_low),u_brightness_high:new h.Uniform1f(P,u.u_brightness_high),u_saturation_factor:new h.Uniform1f(P,u.u_saturation_factor),u_contrast_factor:new h.Uniform1f(P,u.u_contrast_factor),u_spin_weights:new h.Uniform3f(P,u.u_spin_weights)}),symbolIcon:(P,u)=>({u_is_size_zoom_constant:new h.Uniform1i(P,u.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(P,u.u_is_size_feature_constant),u_size_t:new h.Uniform1f(P,u.u_size_t),u_size:new h.Uniform1f(P,u.u_size),u_camera_to_center_distance:new h.Uniform1f(P,u.u_camera_to_center_distance),u_pitch:new h.Uniform1f(P,u.u_pitch),u_rotate_symbol:new h.Uniform1i(P,u.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(P,u.u_aspect_ratio),u_fade_change:new h.Uniform1f(P,u.u_fade_change),u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(P,u.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(P,u.u_coord_matrix),u_is_text:new h.Uniform1i(P,u.u_is_text),u_pitch_with_map:new h.Uniform1i(P,u.u_pitch_with_map),u_texsize:new h.Uniform2f(P,u.u_texsize),u_texture:new h.Uniform1i(P,u.u_texture)}),symbolSDF:(P,u)=>({u_is_size_zoom_constant:new h.Uniform1i(P,u.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(P,u.u_is_size_feature_constant),u_size_t:new h.Uniform1f(P,u.u_size_t),u_size:new h.Uniform1f(P,u.u_size),u_camera_to_center_distance:new h.Uniform1f(P,u.u_camera_to_center_distance),u_pitch:new h.Uniform1f(P,u.u_pitch),u_rotate_symbol:new h.Uniform1i(P,u.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(P,u.u_aspect_ratio),u_fade_change:new h.Uniform1f(P,u.u_fade_change),u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(P,u.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(P,u.u_coord_matrix),u_is_text:new h.Uniform1i(P,u.u_is_text),u_pitch_with_map:new h.Uniform1i(P,u.u_pitch_with_map),u_texsize:new h.Uniform2f(P,u.u_texsize),u_texture:new h.Uniform1i(P,u.u_texture),u_gamma_scale:new h.Uniform1f(P,u.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(P,u.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(P,u.u_is_halo)}),symbolTextAndIcon:(P,u)=>({u_is_size_zoom_constant:new h.Uniform1i(P,u.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(P,u.u_is_size_feature_constant),u_size_t:new h.Uniform1f(P,u.u_size_t),u_size:new h.Uniform1f(P,u.u_size),u_camera_to_center_distance:new h.Uniform1f(P,u.u_camera_to_center_distance),u_pitch:new h.Uniform1f(P,u.u_pitch),u_rotate_symbol:new h.Uniform1i(P,u.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(P,u.u_aspect_ratio),u_fade_change:new h.Uniform1f(P,u.u_fade_change),u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(P,u.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(P,u.u_coord_matrix),u_is_text:new h.Uniform1i(P,u.u_is_text),u_pitch_with_map:new h.Uniform1i(P,u.u_pitch_with_map),u_texsize:new h.Uniform2f(P,u.u_texsize),u_texsize_icon:new h.Uniform2f(P,u.u_texsize_icon),u_texture:new h.Uniform1i(P,u.u_texture),u_texture_icon:new h.Uniform1i(P,u.u_texture_icon),u_gamma_scale:new h.Uniform1f(P,u.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(P,u.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(P,u.u_is_halo)}),background:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_opacity:new h.Uniform1f(P,u.u_opacity),u_color:new h.UniformColor(P,u.u_color)}),backgroundPattern:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_opacity:new h.Uniform1f(P,u.u_opacity),u_image:new h.Uniform1i(P,u.u_image),u_pattern_tl_a:new h.Uniform2f(P,u.u_pattern_tl_a),u_pattern_br_a:new h.Uniform2f(P,u.u_pattern_br_a),u_pattern_tl_b:new h.Uniform2f(P,u.u_pattern_tl_b),u_pattern_br_b:new h.Uniform2f(P,u.u_pattern_br_b),u_texsize:new h.Uniform2f(P,u.u_texsize),u_mix:new h.Uniform1f(P,u.u_mix),u_pattern_size_a:new h.Uniform2f(P,u.u_pattern_size_a),u_pattern_size_b:new h.Uniform2f(P,u.u_pattern_size_b),u_scale_a:new h.Uniform1f(P,u.u_scale_a),u_scale_b:new h.Uniform1f(P,u.u_scale_b),u_pixel_coord_upper:new h.Uniform2f(P,u.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(P,u.u_pixel_coord_lower),u_tile_units_to_pixels:new h.Uniform1f(P,u.u_tile_units_to_pixels)}),terrain:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_texture:new h.Uniform1i(P,u.u_texture)}),terrainDepth:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix)}),terrainCoords:(P,u)=>({u_matrix:new h.UniformMatrix4f(P,u.u_matrix),u_texture:new h.Uniform1i(P,u.u_texture),u_terrain_coords_id:new h.Uniform1f(P,u.u_terrain_coords_id)})};class ia{constructor(u,x,I){this.context=u;const F=u.gl;this.buffer=F.createBuffer(),this.dynamicDraw=!!I,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),F.bufferData(F.ELEMENT_ARRAY_BUFFER,x.arrayBuffer,this.dynamicDraw?F.DYNAMIC_DRAW:F.STATIC_DRAW),this.dynamicDraw||delete x.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const x=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),x.bufferSubData(x.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Da={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class lh{constructor(u,x,I,F){this.length=x.length,this.attributes=I,this.itemSize=x.bytesPerElement,this.dynamicDraw=F,this.context=u;const j=u.gl;this.buffer=j.createBuffer(),u.bindVertexBuffer.set(this.buffer),j.bufferData(j.ARRAY_BUFFER,x.arrayBuffer,this.dynamicDraw?j.DYNAMIC_DRAW:j.STATIC_DRAW),this.dynamicDraw||delete x.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const x=this.context.gl;this.bind(),x.bufferSubData(x.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,x){for(let I=0;I<this.attributes.length;I++){const F=x.attributes[this.attributes[I].name];F!==void 0&&u.enableVertexAttribArray(F)}}setVertexAttribPointers(u,x,I){for(let F=0;F<this.attributes.length;F++){const j=this.attributes[F],N=x.attributes[j.name];N!==void 0&&u.vertexAttribPointer(N,j.components,u[Da[j.type]],!1,this.itemSize,j.offset+this.itemSize*(I||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class eo{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class fs extends eo{getDefault(){return h.Color.transparent}set(u){const x=this.current;(u.r!==x.r||u.g!==x.g||u.b!==x.b||u.a!==x.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class jc extends eo{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Rr extends eo{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class ao extends eo{getDefault(){return[!0,!0,!0,!0]}set(u){const x=this.current;(u[0]!==x[0]||u[1]!==x[1]||u[2]!==x[2]||u[3]!==x[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class ua extends eo{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Ua extends eo{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class Lh extends eo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const x=this.current;(u.func!==x.func||u.ref!==x.ref||u.mask!==x.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class yl extends eo{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const x=this.current;(u[0]!==x[0]||u[1]!==x[1]||u[2]!==x[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class vl extends eo{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const x=this.gl;u?x.enable(x.STENCIL_TEST):x.disable(x.STENCIL_TEST),this.current=u,this.dirty=!1}}class ch extends eo{getDefault(){return[0,1]}set(u){const x=this.current;(u[0]!==x[0]||u[1]!==x[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class kh extends eo{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const x=this.gl;u?x.enable(x.DEPTH_TEST):x.disable(x.DEPTH_TEST),this.current=u,this.dirty=!1}}class Mo extends eo{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class Ss extends eo{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const x=this.gl;u?x.enable(x.BLEND):x.disable(x.BLEND),this.current=u,this.dirty=!1}}class Is extends eo{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const x=this.current;(u[0]!==x[0]||u[1]!==x[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class za extends eo{getDefault(){return h.Color.transparent}set(u){const x=this.current;(u.r!==x.r||u.g!==x.g||u.b!==x.b||u.a!==x.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class wc extends eo{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Nl extends eo{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const x=this.gl;u?x.enable(x.CULL_FACE):x.disable(x.CULL_FACE),this.current=u,this.dirty=!1}}class ks extends eo{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class Cc extends eo{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class uh extends eo{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class zu extends eo{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class hh extends eo{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const x=this.current;(u[0]!==x[0]||u[1]!==x[1]||u[2]!==x[2]||u[3]!==x[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Ph extends eo{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const x=this.gl;x.bindFramebuffer(x.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class Fh extends eo{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const x=this.gl;x.bindRenderbuffer(x.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class ps extends eo{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const x=this.gl;x.bindTexture(x.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class dh extends eo{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const x=this.gl;x.bindBuffer(x.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class ra extends eo{getDefault(){return null}set(u){const x=this.gl;x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class to extends eo{constructor(u){super(u),this.vao=u.extVertexArrayObject}getDefault(){return null}set(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class pu extends eo{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const x=this.gl;x.pixelStorei(x.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Ql extends eo{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const x=this.gl;x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class mu extends eo{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const x=this.gl;x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class gu extends eo{constructor(u,x){super(u),this.context=u,this.parent=x}getDefault(){return null}}class Vo extends gu{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const x=this.gl;x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class $l extends gu{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const x=this.gl;x.framebufferRenderbuffer(x.FRAMEBUFFER,x.DEPTH_ATTACHMENT,x.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class xl{constructor(u,x,I,F){this.context=u,this.width=x,this.height=I;const j=u.gl,N=this.framebuffer=j.createFramebuffer();if(this.colorAttachment=new Vo(u,N),F&&(this.depthAttachment=new $l(u,N)),j.checkFramebufferStatus(j.FRAMEBUFFER)!==j.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,x=this.colorAttachment.get();if(x&&u.deleteTexture(x),this.depthAttachment){const I=this.depthAttachment.get();I&&u.deleteRenderbuffer(I)}u.deleteFramebuffer(this.framebuffer)}}class rs{constructor(u,x,I){this.blendFunction=u,this.blendColor=x,this.mask=I}}rs.Replace=[1,0],rs.disabled=new rs(rs.Replace,h.Color.transparent,[!1,!1,!1,!1]),rs.unblended=new rs(rs.Replace,h.Color.transparent,[!0,!0,!0,!0]),rs.alphaBlended=new rs([1,771],h.Color.transparent,[!0,!0,!0,!0]);class sc{constructor(u){this.gl=u,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new fs(this),this.clearDepth=new jc(this),this.clearStencil=new Rr(this),this.colorMask=new ao(this),this.depthMask=new ua(this),this.stencilMask=new Ua(this),this.stencilFunc=new Lh(this),this.stencilOp=new yl(this),this.stencilTest=new vl(this),this.depthRange=new ch(this),this.depthTest=new kh(this),this.depthFunc=new Mo(this),this.blend=new Ss(this),this.blendFunc=new Is(this),this.blendColor=new za(this),this.blendEquation=new wc(this),this.cullFace=new Nl(this),this.cullFaceSide=new ks(this),this.frontFace=new Cc(this),this.program=new uh(this),this.activeTexture=new zu(this),this.viewport=new hh(this),this.bindFramebuffer=new Ph(this),this.bindRenderbuffer=new Fh(this),this.bindTexture=new ps(this),this.bindVertexBuffer=new dh(this),this.bindElementBuffer=new ra(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new to(this),this.pixelStoreUnpack=new pu(this),this.pixelStoreUnpackPremultiplyAlpha=new Ql(this),this.pixelStoreUnpackFlipY=new mu(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=u.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(u.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,x){return new ia(this,u,x)}createVertexBuffer(u,x,I){return new lh(this,u,x,I)}createRenderbuffer(u,x,I){const F=this.gl,j=F.createRenderbuffer();return this.bindRenderbuffer.set(j),F.renderbufferStorage(F.RENDERBUFFER,u,x,I),this.bindRenderbuffer.set(null),j}createFramebuffer(u,x,I){return new xl(this,u,x,I)}clear({color:u,depth:x}){const I=this.gl;let F=0;u&&(F|=I.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),x!==void 0&&(F|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(x),this.depthMask.set(!0)),I.clear(F)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){V(u.blendFunction,rs.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Or{constructor(u,x,I){this.func=u,this.mask=x,this.range=I}}Or.ReadOnly=!1,Or.ReadWrite=!0,Or.disabled=new Or(519,Or.ReadOnly,[0,1]);const bo=7680;class Zo{constructor(u,x,I,F,j,N){this.test=u,this.ref=x,this.mask=I,this.fail=F,this.depthFail=j,this.pass=N}}Zo.disabled=new Zo({func:519,mask:0},0,0,bo,bo,bo);class es{constructor(u,x,I){this.enable=u,this.mode=x,this.frontFace=I}}let ya;function bl(P,u,x,I,F,j,N){const oe=P.context,ae=oe.gl,me=P.useProgram("collisionBox"),ye=[];let Re=0,He=0;for(let bt=0;bt<I.length;bt++){const un=I[bt],tn=u.getTile(un),In=tn.getBucket(x);if(!In)continue;let kn=un.posMatrix;F[0]===0&&F[1]===0||(kn=P.translatePosMatrix(un.posMatrix,tn,F,j));const Kn=N?In.textCollisionBox:In.iconCollisionBox,xn=In.collisionCircleArray;if(xn.length>0){const pi=h.create(),vi=kn;h.mul(pi,In.placementInvProjMatrix,P.transform.glCoordMatrix),h.mul(pi,pi,In.placementViewportMatrix),ye.push({circleArray:xn,circleOffset:He,transform:vi,invTransform:pi,coord:un}),Re+=xn.length/4,He=Re}Kn&&me.draw(oe,ae.LINES,Or.disabled,Zo.disabled,P.colorModeForRenderPass(),es.disabled,Io(kn,P.transform,tn),P.style.terrain&&P.style.terrain.getTerrainData(un),x.id,Kn.layoutVertexBuffer,Kn.indexBuffer,Kn.segments,null,P.transform.zoom,null,null,Kn.collisionVertexBuffer)}if(!N||!ye.length)return;const gt=P.useProgram("collisionCircle"),dt=new h.CollisionCircleLayoutArray;dt.resize(4*Re),dt._trim();let pt=0;for(const bt of ye)for(let un=0;un<bt.circleArray.length/4;un++){const tn=4*un,In=bt.circleArray[tn+0],kn=bt.circleArray[tn+1],Kn=bt.circleArray[tn+2],xn=bt.circleArray[tn+3];dt.emplace(pt++,In,kn,Kn,xn,0),dt.emplace(pt++,In,kn,Kn,xn,1),dt.emplace(pt++,In,kn,Kn,xn,2),dt.emplace(pt++,In,kn,Kn,xn,3)}(!ya||ya.length<2*Re)&&(ya=function(bt){const un=2*bt,tn=new h.QuadTriangleArray;tn.resize(un),tn._trim();for(let In=0;In<un;In++){const kn=6*In;tn.uint16[kn+0]=4*In+0,tn.uint16[kn+1]=4*In+1,tn.uint16[kn+2]=4*In+2,tn.uint16[kn+3]=4*In+2,tn.uint16[kn+4]=4*In+3,tn.uint16[kn+5]=4*In+0}return tn}(Re));const Ft=oe.createIndexBuffer(ya,!0),Wt=oe.createVertexBuffer(dt,h.collisionCircleLayout.members,!0);for(const bt of ye){const un={u_matrix:bt.transform,u_inv_matrix:bt.invTransform,u_camera_to_center_distance:(on=P.transform).cameraToCenterDistance,u_viewport_size:[on.width,on.height]};gt.draw(oe,ae.TRIANGLES,Or.disabled,Zo.disabled,P.colorModeForRenderPass(),es.disabled,un,P.style.terrain&&P.style.terrain.getTerrainData(bt.coord),x.id,Wt,Ft,h.SegmentVector.simpleSegment(0,2*bt.circleOffset,bt.circleArray.length,bt.circleArray.length/2),null,P.transform.zoom,null,null,null)}var on;Wt.destroy(),Ft.destroy()}es.disabled=new es(!1,1029,2305),es.backCCW=new es(!0,1029,2305);const Ru=h.identity(new Float32Array(16));function Ra(P,u,x,I,F,j){const{horizontalAlign:N,verticalAlign:oe}=h.getAnchorAlignment(P),ae=-(N-.5)*u,me=-(oe-.5)*x,ye=h.evaluateVariableOffset(P,I);return new h.pointGeometry((ae/F+ye[0])*j,(me/F+ye[1])*j)}function Ou(P,u,x,I,F,j,N,oe,ae,me,ye){const Re=P.text.placedSymbolArray,He=P.text.dynamicLayoutVertexArray,gt=P.icon.dynamicLayoutVertexArray,dt={};He.clear();for(let pt=0;pt<Re.length;pt++){const Ft=Re.get(pt),Wt=P.allowVerticalPlacement&&!Ft.placedOrientation,on=Ft.hidden||!Ft.crossTileID||Wt?null:I[Ft.crossTileID];if(on){const bt=new h.pointGeometry(Ft.anchorX,Ft.anchorY),un=er(bt,x?N:j,ye),tn=xi(F.cameraToCenterDistance,un.signedDistanceFromCamera);let In=h.evaluateSizeForFeature(P.textSizeData,ae,Ft)*tn/h.ONE_EM;x&&(In*=P.tilePixelRatio/oe);const{width:kn,height:Kn,anchor:xn,textOffset:pi,textBoxScale:vi}=on,yn=Ra(xn,kn,Kn,pi,vi,In),Nr=x?er(bt.add(yn),j,ye).point:un.point.add(u?yn.rotate(-F.angle):yn),io=P.allowVerticalPlacement&&Ft.placedOrientation===h.WritingMode.vertical?Math.PI/2:0;for(let or=0;or<Ft.numGlyphs;or++)h.addDynamicAttributes(He,Nr,io);me&&Ft.associatedIconIndex>=0&&(dt[Ft.associatedIconIndex]={shiftedAnchor:Nr,angle:io})}else Ce(Ft.numGlyphs,He)}if(me){gt.clear();const pt=P.icon.placedSymbolArray;for(let Ft=0;Ft<pt.length;Ft++){const Wt=pt.get(Ft);if(Wt.hidden)Ce(Wt.numGlyphs,gt);else{const on=dt[Ft];if(on)for(let bt=0;bt<Wt.numGlyphs;bt++)h.addDynamicAttributes(gt,on.shiftedAnchor,on.angle);else Ce(Wt.numGlyphs,gt)}}P.icon.dynamicLayoutVertexBuffer.updateData(gt)}P.text.dynamicLayoutVertexBuffer.updateData(He)}function Ah(P,u,x){return x.iconsInText&&u?"symbolTextAndIcon":P?"symbolSDF":"symbolIcon"}function lo(P,u,x,I,F,j,N,oe,ae,me,ye,Re){const He=P.context,gt=He.gl,dt=P.transform,pt=oe==="map",Ft=ae==="map",Wt=oe!=="viewport"&&x.layout.get("symbol-placement")!=="point",on=pt&&!Ft&&!Wt,bt=!x.layout.get("symbol-sort-key").isConstant();let un=!1;const tn=P.depthModeForSublayer(0,Or.ReadOnly),In=x.layout.get("text-variable-anchor"),kn=[];for(const Kn of I){const xn=u.getTile(Kn),pi=xn.getBucket(x);if(!pi)continue;const vi=F?pi.text:pi.icon;if(!vi||!vi.segments.get().length)continue;const yn=vi.programConfigurations.get(x.id),Nr=F||pi.sdfIcons,io=F?pi.textSizeData:pi.iconSizeData,or=Ft||dt.pitch!==0,mo=P.useProgram(Ah(Nr,F,pi),yn),qn=h.evaluateSizeForZoom(io,dt.zoom),Po=P.style.terrain&&P.style.terrain.getTerrainData(Kn);let Xr,os,ba,eu,Lc=[0,0],wu=null;if(F){if(os=xn.glyphAtlasTexture,ba=gt.LINEAR,Xr=xn.glyphAtlasTexture.size,pi.iconsInText){Lc=xn.imageAtlasTexture.size,wu=xn.imageAtlasTexture;const K=io.kind==="composite"||io.kind==="camera";eu=or||P.options.rotating||P.options.zooming||K?gt.LINEAR:gt.NEAREST}}else{const K=x.layout.get("icon-size").constantOr(0)!==1||pi.iconsNeedLinear;os=xn.imageAtlasTexture,ba=Nr||P.options.rotating||P.options.zooming||K||or?gt.LINEAR:gt.NEAREST,Xr=xn.imageAtlasTexture.size}const ju=zt(xn,1,P.transform.zoom),Tl=Fr(Kn.posMatrix,Ft,pt,P.transform,ju),hl=So(Kn.posMatrix,Ft,pt,P.transform,ju),tu=In&&pi.hasTextData(),nu=x.layout.get("icon-text-fit")!=="none"&&tu&&pi.hasIconData();if(Wt){const K=P.style.terrain?(ee,ce)=>P.style.terrain.getElevation(Kn,ee,ce):null,X=x.layout.get("text-rotation-alignment")==="map";Un(pi,Kn.posMatrix,P,F,Tl,hl,Ft,me,X,K)}const b=P.translatePosMatrix(Kn.posMatrix,xn,j,N),l=Wt||F&&In||nu?Ru:Tl,g=P.translatePosMatrix(hl,xn,j,N,!0),T=Nr&&x.paint.get(F?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let k;k=Nr?pi.iconsInText?br(io.kind,qn,on,Ft,P,b,l,g,Xr,Lc):bc(io.kind,qn,on,Ft,P,b,l,g,F,Xr,!0):fu(io.kind,qn,on,Ft,P,b,l,g,F,Xr);const R={program:mo,buffers:vi,uniformValues:k,atlasTexture:os,atlasTextureIcon:wu,atlasInterpolation:ba,atlasInterpolationIcon:eu,isSDF:Nr,hasHalo:T};if(bt&&pi.canOverlap){un=!0;const K=vi.segments.get();for(const X of K)kn.push({segments:new h.SegmentVector([X]),sortKey:X.sortKey,state:R,terrainData:Po})}else kn.push({segments:vi.segments,sortKey:0,state:R,terrainData:Po})}un&&kn.sort((Kn,xn)=>Kn.sortKey-xn.sortKey);for(const Kn of kn){const xn=Kn.state;if(He.activeTexture.set(gt.TEXTURE0),xn.atlasTexture.bind(xn.atlasInterpolation,gt.CLAMP_TO_EDGE),xn.atlasTextureIcon&&(He.activeTexture.set(gt.TEXTURE1),xn.atlasTextureIcon&&xn.atlasTextureIcon.bind(xn.atlasInterpolationIcon,gt.CLAMP_TO_EDGE)),xn.isSDF){const pi=xn.uniformValues;xn.hasHalo&&(pi.u_is_halo=1,jl(xn.buffers,Kn.segments,x,P,xn.program,tn,ye,Re,pi,Kn.terrainData)),pi.u_is_halo=0}jl(xn.buffers,Kn.segments,x,P,xn.program,tn,ye,Re,xn.uniformValues,Kn.terrainData)}}function jl(P,u,x,I,F,j,N,oe,ae,me){const ye=I.context;F.draw(ye,ye.gl.TRIANGLES,j,N,oe,es.disabled,ae,me,x.id,P.layoutVertexBuffer,P.indexBuffer,u,x.paint,I.transform.zoom,P.programConfigurations.get(x.id),P.dynamicLayoutVertexBuffer,P.opacityVertexBuffer)}function _u(P,u,x,I,F,j,N){const oe=P.context.gl,ae=x.paint.get("fill-pattern"),me=ae&&ae.constantOr(1),ye=x.getCrossfadeParameters();let Re,He,gt,dt,pt;N?(He=me&&!x.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Re=oe.LINES):(He=me?"fillPattern":"fill",Re=oe.TRIANGLES);for(const Ft of I){const Wt=u.getTile(Ft);if(me&&!Wt.patternsLoaded())continue;const on=Wt.getBucket(x);if(!on)continue;const bt=on.programConfigurations.get(x.id),un=P.useProgram(He,bt),tn=P.style.terrain&&P.style.terrain.getTerrainData(Ft);me&&(P.context.activeTexture.set(oe.TEXTURE0),Wt.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),bt.updatePaintBuffers(ye));const In=ae.constantOr(null);if(In&&Wt.imageAtlas){const xn=Wt.imageAtlas,pi=xn.patternPositions[In.to.toString()],vi=xn.patternPositions[In.from.toString()];pi&&vi&&bt.setConstantPatternPositions(pi,vi)}const kn=tn?Ft:null,Kn=P.translatePosMatrix(kn?kn.posMatrix:Ft.posMatrix,Wt,x.paint.get("fill-translate"),x.paint.get("fill-translate-anchor"));if(N){dt=on.indexBuffer2,pt=on.segments2;const xn=[oe.drawingBufferWidth,oe.drawingBufferHeight];gt=He==="fillOutlinePattern"&&me?Ea(Kn,P,ye,Wt,xn):Va(Kn,xn)}else dt=on.indexBuffer,pt=on.segments,gt=me?_r(Kn,P,ye,Wt):zr(Kn);un.draw(P.context,Re,F,P.stencilModeForClipping(Ft),j,es.disabled,gt,tn,x.id,on.layoutVertexBuffer,dt,pt,x.paint,P.transform.zoom,bt)}}function Hc(P,u,x,I,F,j,N){const oe=P.context,ae=oe.gl,me=x.paint.get("fill-extrusion-pattern"),ye=me.constantOr(1),Re=x.getCrossfadeParameters(),He=x.paint.get("fill-extrusion-opacity");for(const gt of I){const dt=u.getTile(gt),pt=dt.getBucket(x);if(!pt)continue;const Ft=P.style.terrain&&P.style.terrain.getTerrainData(gt),Wt=pt.programConfigurations.get(x.id),on=P.useProgram(ye?"fillExtrusionPattern":"fillExtrusion",Wt);ye&&(P.context.activeTexture.set(ae.TEXTURE0),dt.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Wt.updatePaintBuffers(Re));const bt=me.constantOr(null);if(bt&&dt.imageAtlas){const kn=dt.imageAtlas,Kn=kn.patternPositions[bt.to.toString()],xn=kn.patternPositions[bt.from.toString()];Kn&&xn&&Wt.setConstantPatternPositions(Kn,xn)}const un=P.translatePosMatrix(gt.posMatrix,dt,x.paint.get("fill-extrusion-translate"),x.paint.get("fill-extrusion-translate-anchor")),tn=x.paint.get("fill-extrusion-vertical-gradient"),In=ye?gi(un,P,tn,He,gt,Re,dt):Wo(un,P,tn,He);on.draw(oe,oe.gl.TRIANGLES,F,j,N,es.backCCW,In,Ft,x.id,pt.layoutVertexBuffer,pt.indexBuffer,pt.segments,x.paint,P.transform.zoom,Wt,P.style.terrain&&pt.centroidVertexBuffer)}}function fh(P,u,x,I,F,j,N){const oe=P.context,ae=oe.gl,me=x.fbo;if(!me)return;const ye=P.useProgram("hillshade"),Re=P.style.terrain&&P.style.terrain.getTerrainData(u);oe.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,me.colorAttachment.get()),ye.draw(oe,ae.TRIANGLES,F,j,N,es.disabled,((He,gt,dt,pt)=>{const Ft=dt.paint.get("hillshade-shadow-color"),Wt=dt.paint.get("hillshade-highlight-color"),on=dt.paint.get("hillshade-accent-color");let bt=dt.paint.get("hillshade-illumination-direction")*(Math.PI/180);dt.paint.get("hillshade-illumination-anchor")==="viewport"&&(bt-=He.transform.angle);const un=!He.options.moving;return{u_matrix:pt?pt.posMatrix:He.transform.calculatePosMatrix(gt.tileID.toUnwrapped(),un),u_image:0,u_latrange:Ho(0,gt.tileID),u_light:[dt.paint.get("hillshade-exaggeration"),bt],u_shadow:Ft,u_highlight:Wt,u_accent:on}})(P,x,I,Re?u:null),Re,I.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments)}function Vc(P,u,x,I,F,j){const N=P.context,oe=N.gl,ae=u.dem;if(ae&&ae.data){const me=ae.dim,ye=ae.stride,Re=ae.getPixels();if(N.activeTexture.set(oe.TEXTURE1),N.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||P.getTileTexture(ye),u.demTexture){const gt=u.demTexture;gt.update(Re,{premultiply:!1}),gt.bind(oe.NEAREST,oe.CLAMP_TO_EDGE)}else u.demTexture=new Ae(N,Re,oe.RGBA,{premultiply:!1}),u.demTexture.bind(oe.NEAREST,oe.CLAMP_TO_EDGE);N.activeTexture.set(oe.TEXTURE0);let He=u.fbo;if(!He){const gt=new Ae(N,{width:me,height:me,data:null},oe.RGBA);gt.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),He=u.fbo=N.createFramebuffer(me,me,!0),He.colorAttachment.set(gt.texture)}N.bindFramebuffer.set(He.framebuffer),N.viewport.set([0,0,me,me]),P.useProgram("hillshadePrepare").draw(N,oe.TRIANGLES,I,F,j,es.disabled,((gt,dt)=>{const pt=dt.stride,Ft=h.create();return h.ortho(Ft,0,h.EXTENT,-h.EXTENT,0,0,1),h.translate(Ft,Ft,[0,-h.EXTENT,0]),{u_matrix:Ft,u_image:1,u_dimension:[pt,pt],u_zoom:gt.overscaledZ,u_unpack:dt.getUnpackVector()}})(u.tileID,ae),null,x.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function Nu(P,u,x,I,F,j){const N=I.paint.get("raster-fade-duration");if(!j&&N>0){const oe=h.exported.now(),ae=(oe-P.timeAdded)/N,me=u?(oe-u.timeAdded)/N:-1,ye=x.getSource(),Re=F.coveringZoomLevel({tileSize:ye.tileSize,roundZoom:ye.roundZoom}),He=!u||Math.abs(u.tileID.overscaledZ-Re)>Math.abs(P.tileID.overscaledZ-Re),gt=He&&P.refreshedUponExpiration?1:h.clamp(He?ae:1-me,0,1);return P.refreshedUponExpiration&&ae>=1&&(P.refreshedUponExpiration=!1),u?{opacity:1,mix:1-gt}:{opacity:gt,mix:0}}return{opacity:1,mix:0}}const ms=new h.Color(1,0,0,1),va=new h.Color(0,1,0,1),ph=new h.Color(0,0,1,1),sl=new h.Color(1,0,1,1),Dh=new h.Color(0,1,1,1);function al(P,u,x,I){ac(P,0,u+x/2,P.transform.width,x,I)}function yu(P,u,x,I){ac(P,u-x/2,0,x,P.transform.height,I)}function ac(P,u,x,I,F,j){const N=P.context,oe=N.gl;oe.enable(oe.SCISSOR_TEST),oe.scissor(u*P.pixelRatio,x*P.pixelRatio,I*P.pixelRatio,F*P.pixelRatio),N.clear({color:j}),oe.disable(oe.SCISSOR_TEST)}function gd(P,u,x){const I=P.context,F=I.gl,j=x.posMatrix,N=P.useProgram("debug"),oe=Or.disabled,ae=Zo.disabled,me=P.colorModeForRenderPass(),ye="$debug",Re=P.style.terrain&&P.style.terrain.getTerrainData(x);I.activeTexture.set(F.TEXTURE0),P.emptyTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE);const He=u.getTileByID(x.key).latestRawTileData,gt=Math.floor((He&&He.byteLength||0)/1024),dt=u.getTile(x).tileSize,pt=512/Math.min(dt,512)*(x.overscaledZ/P.transform.zoom)*.5;let Ft=x.canonical.toString();x.overscaledZ!==x.canonical.z&&(Ft+=` => ${x.overscaledZ}`),function(Wt,on){Wt.initDebugOverlayCanvas();const bt=Wt.debugOverlayCanvas,un=Wt.context.gl,tn=Wt.debugOverlayCanvas.getContext("2d");tn.clearRect(0,0,bt.width,bt.height),tn.shadowColor="white",tn.shadowBlur=2,tn.lineWidth=1.5,tn.strokeStyle="white",tn.textBaseline="top",tn.font="bold 36px Open Sans, sans-serif",tn.fillText(on,5,5),tn.strokeText(on,5,5),Wt.debugOverlayTexture.update(bt),Wt.debugOverlayTexture.bind(un.LINEAR,un.CLAMP_TO_EDGE)}(P,`${Ft} ${gt}kB`),N.draw(I,F.TRIANGLES,oe,ae,rs.alphaBlended,es.disabled,Sa(j,h.Color.transparent,pt),null,ye,P.debugBuffer,P.quadTriangleIndexBuffer,P.debugSegments),N.draw(I,F.LINE_STRIP,oe,ae,me,es.disabled,Sa(j,h.Color.red),Re,ye,P.debugBuffer,P.tileBorderIndexBuffer,P.debugSegments)}function Qu(P,u,x){const I=P.context,F=I.gl,j=P.colorModeForRenderPass(),N=new Or(F.LEQUAL,Or.ReadWrite,P.depthRangeFor3D),oe=P.useProgram("terrain"),ae=u.getTerrainMesh(),me=u.getTerrainData(x.tileID);I.bindFramebuffer.set(null),I.viewport.set([0,0,P.width,P.height]),I.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,u.getRTTFramebuffer().colorAttachment.get());const ye=P.transform.calculatePosMatrix(x.tileID.toUnwrapped());oe.draw(I,F.TRIANGLES,N,Zo.disabled,j,es.backCCW,{u_matrix:ye,u_texture:0},me,"terrain",ae.vertexBuffer,ae.indexBuffer,ae.segments)}function lc(P,u,x,I){const F=P.context,j=x.tileSize*u.qualityFactor;x.textures[I]||(x.textures[I]=P.getTileTexture(j)||new Ae(F,{width:j,height:j,data:null},F.gl.RGBA),x.textures[I].bind(F.gl.LINEAR,F.gl.CLAMP_TO_EDGE),I===0&&u.sourceCache.renderHistory.unshift(x.tileID.key));const N=u.getRTTFramebuffer();N.colorAttachment.set(x.textures[I].texture),F.bindFramebuffer.set(N.framebuffer),F.viewport.set([0,0,j,j])}class ll{constructor(u){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=u,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=u.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const u=this.painter.style,x=u.terrain;for(const I in u.sourceCaches){this._coordsDescendingInv[I]={};const F=u.sourceCaches[I].getVisibleCoordinates();for(const j of F){const N=x.sourceCache.getTerrainCoords(j);for(const oe in N)this._coordsDescendingInv[I][oe]||(this._coordsDescendingInv[I][oe]=[]),this._coordsDescendingInv[I][oe].push(N[oe])}}for(const I of u._order){const F=u._layers[I],j=F.source;if(this._renderToTexture[F.type]&&!this._coordsDescendingInvStr[j]){this._coordsDescendingInvStr[j]={};for(const N in this._coordsDescendingInv[j])this._coordsDescendingInvStr[j][N]=this._coordsDescendingInv[j][N].map(oe=>oe.key).sort().join()}}return this._renderableTiles.forEach(I=>{for(const F in this._coordsDescendingInvStr){const j=this._coordsDescendingInvStr[F][I.tileID.key];j&&j!==I.textureCoords[F]&&I.clearTextures(this.painter),x.needsRerender(F,I.tileID)&&I.clearTextures(this.painter)}this._rerender[I.tileID.key]=!I.textures.length}),x.clearRerenderCache(),x.sourceCache.removeOutdated(this.painter),this}renderLayer(u){const x=u.type,I=this.painter,F=I.style._order,j=I.currentLayer,N=j+1===F.length;if(this._renderToTexture[x]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=x,this._stacks[this._stacks.length-1].push(F[j]),!N))return!0;if(this._renderToTexture[this._prevType]||x==="hillshade"||this._renderToTexture[x]&&N){this._prevType=x;const oe=this._stacks.length-1,ae=this._stacks[oe]||[];for(const me of this._renderableTiles){if(lc(I,I.style.terrain,me,oe),this._rerender[me.tileID.key]){I.context.clear({color:h.Color.transparent});for(let ye=0;ye<ae.length;ye++){const Re=I.style._layers[ae[ye]],He=Re.source?this._coordsDescendingInv[Re.source][me.tileID.key]:[me.tileID];I._renderTileClippingMasks(Re,He),I.renderLayer(I,I.style.sourceCaches[Re.source],Re,He),Re.source&&(me.textureCoords[Re.source]=this._coordsDescendingInvStr[Re.source][me.tileID.key])}}Qu(I,I.style.terrain,me)}if(x==="hillshade"){this._stacks.push([F[j]]);for(const me of this._renderableTiles){const ye=this._coordsDescendingInv[u.source][me.tileID.key];lc(I,I.style.terrain,me,this._stacks.length-1),I.context.clear({color:h.Color.transparent}),I._renderTileClippingMasks(u,ye),I.renderLayer(I,I.style.sourceCaches[u.source],u,ye),Qu(I,I.style.terrain,me)}return!0}return this._renderToTexture[x]}return!1}}const Bc={symbol:function(P,u,x,I,F){if(P.renderPass!=="translucent")return;const j=Zo.disabled,N=P.colorModeForRenderPass();x.layout.get("text-variable-anchor")&&function(oe,ae,me,ye,Re,He,gt){const dt=ae.transform,pt=Re==="map",Ft=He==="map";for(const Wt of oe){const on=ye.getTile(Wt),bt=on.getBucket(me);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const un=h.evaluateSizeForZoom(bt.textSizeData,dt.zoom),tn=zt(on,1,ae.transform.zoom),In=Fr(Wt.posMatrix,Ft,pt,ae.transform,tn),kn=me.layout.get("icon-text-fit")!=="none"&&bt.hasIconData();if(un){const Kn=Math.pow(2,dt.zoom-on.tileID.overscaledZ);Ou(bt,pt,Ft,gt,dt,In,Wt.posMatrix,Kn,un,kn,ae.style.terrain?(xn,pi)=>ae.style.terrain.getElevation(Wt,xn,pi):null)}}}(I,P,x,u,x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),F),x.paint.get("icon-opacity").constantOr(1)!==0&&lo(P,u,x,I,!1,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),x.layout.get("icon-rotation-alignment"),x.layout.get("icon-pitch-alignment"),x.layout.get("icon-keep-upright"),j,N),x.paint.get("text-opacity").constantOr(1)!==0&&lo(P,u,x,I,!0,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),x.layout.get("text-keep-upright"),j,N),u.map.showCollisionBoxes&&(bl(P,u,x,I,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),!0),bl(P,u,x,I,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),!1))},circle:function(P,u,x,I){if(P.renderPass!=="translucent")return;const F=x.paint.get("circle-opacity"),j=x.paint.get("circle-stroke-width"),N=x.paint.get("circle-stroke-opacity"),oe=!x.layout.get("circle-sort-key").isConstant();if(F.constantOr(1)===0&&(j.constantOr(1)===0||N.constantOr(1)===0))return;const ae=P.context,me=ae.gl,ye=P.depthModeForSublayer(0,Or.ReadOnly),Re=Zo.disabled,He=P.colorModeForRenderPass(),gt=[];for(let dt=0;dt<I.length;dt++){const pt=I[dt],Ft=u.getTile(pt),Wt=Ft.getBucket(x);if(!Wt)continue;const on=Wt.programConfigurations.get(x.id),bt=P.useProgram("circle",on),un=Wt.layoutVertexBuffer,tn=Wt.indexBuffer,In=P.style.terrain&&P.style.terrain.getTerrainData(pt),kn={programConfiguration:on,program:bt,layoutVertexBuffer:un,indexBuffer:tn,uniformValues:Lr(P,pt,Ft,x),terrainData:In};if(oe){const Kn=Wt.segments.get();for(const xn of Kn)gt.push({segments:new h.SegmentVector([xn]),sortKey:xn.sortKey,state:kn})}else gt.push({segments:Wt.segments,sortKey:0,state:kn})}oe&&gt.sort((dt,pt)=>dt.sortKey-pt.sortKey);for(const dt of gt){const{programConfiguration:pt,program:Ft,layoutVertexBuffer:Wt,indexBuffer:on,uniformValues:bt,terrainData:un}=dt.state;Ft.draw(ae,me.TRIANGLES,ye,Re,He,es.disabled,bt,un,x.id,Wt,on,dt.segments,x.paint,P.transform.zoom,pt)}},heatmap:function(P,u,x,I){if(x.paint.get("heatmap-opacity")!==0)if(P.renderPass==="offscreen"){const F=P.context,j=F.gl,N=Zo.disabled,oe=new rs([j.ONE,j.ONE],h.Color.transparent,[!0,!0,!0,!0]);(function(ae,me,ye){const Re=ae.gl;ae.activeTexture.set(Re.TEXTURE1),ae.viewport.set([0,0,me.width/4,me.height/4]);let He=ye.heatmapFbo;if(He)Re.bindTexture(Re.TEXTURE_2D,He.colorAttachment.get()),ae.bindFramebuffer.set(He.framebuffer);else{const gt=Re.createTexture();Re.bindTexture(Re.TEXTURE_2D,gt),Re.texParameteri(Re.TEXTURE_2D,Re.TEXTURE_WRAP_S,Re.CLAMP_TO_EDGE),Re.texParameteri(Re.TEXTURE_2D,Re.TEXTURE_WRAP_T,Re.CLAMP_TO_EDGE),Re.texParameteri(Re.TEXTURE_2D,Re.TEXTURE_MIN_FILTER,Re.LINEAR),Re.texParameteri(Re.TEXTURE_2D,Re.TEXTURE_MAG_FILTER,Re.LINEAR),He=ye.heatmapFbo=ae.createFramebuffer(me.width/4,me.height/4,!1),function(dt,pt,Ft,Wt){const on=dt.gl;on.texImage2D(on.TEXTURE_2D,0,on.RGBA,pt.width/4,pt.height/4,0,on.RGBA,dt.extRenderToTextureHalfFloat?dt.extTextureHalfFloat.HALF_FLOAT_OES:on.UNSIGNED_BYTE,null),Wt.colorAttachment.set(Ft)}(ae,me,gt,He)}})(F,P,x),F.clear({color:h.Color.transparent});for(let ae=0;ae<I.length;ae++){const me=I[ae];if(u.hasRenderableParent(me))continue;const ye=u.getTile(me),Re=ye.getBucket(x);if(!Re)continue;const He=Re.programConfigurations.get(x.id),gt=P.useProgram("heatmap",He),{zoom:dt}=P.transform;gt.draw(F,j.TRIANGLES,Or.disabled,N,oe,es.disabled,Es(me.posMatrix,ye,dt,x.paint.get("heatmap-intensity")),null,x.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,x.paint,P.transform.zoom,He)}F.viewport.set([0,0,P.width,P.height])}else P.renderPass==="translucent"&&(P.context.setColorMode(P.colorModeForRenderPass()),function(F,j){const N=F.context,oe=N.gl,ae=j.heatmapFbo;if(!ae)return;N.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,ae.colorAttachment.get()),N.activeTexture.set(oe.TEXTURE1);let me=j.colorRampTexture;me||(me=j.colorRampTexture=new Ae(N,j.colorRamp,oe.RGBA)),me.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),F.useProgram("heatmapTexture").draw(N,oe.TRIANGLES,Or.disabled,Zo.disabled,F.colorModeForRenderPass(),es.disabled,((ye,Re,He,gt)=>{const dt=h.create();h.ortho(dt,0,ye.width,ye.height,0,0,1);const pt=ye.context.gl;return{u_matrix:dt,u_world:[pt.drawingBufferWidth,pt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Re.paint.get("heatmap-opacity")}})(F,j),null,j.id,F.viewportBuffer,F.quadTriangleIndexBuffer,F.viewportSegments,j.paint,F.transform.zoom)}(P,x))},line:function(P,u,x,I){if(P.renderPass!=="translucent")return;const F=x.paint.get("line-opacity"),j=x.paint.get("line-width");if(F.constantOr(1)===0||j.constantOr(1)===0)return;const N=P.depthModeForSublayer(0,Or.ReadOnly),oe=P.colorModeForRenderPass(),ae=x.paint.get("line-dasharray"),me=x.paint.get("line-pattern"),ye=me.constantOr(1),Re=x.paint.get("line-gradient"),He=x.getCrossfadeParameters(),gt=ye?"linePattern":ae?"lineSDF":Re?"lineGradient":"line",dt=P.context,pt=dt.gl;let Ft=!0;for(const Wt of I){const on=u.getTile(Wt);if(ye&&!on.patternsLoaded())continue;const bt=on.getBucket(x);if(!bt)continue;const un=bt.programConfigurations.get(x.id),tn=P.context.program.get(),In=P.useProgram(gt,un),kn=Ft||In.program!==tn,Kn=P.style.terrain&&P.style.terrain.getTerrainData(Wt),xn=me.constantOr(null);if(xn&&on.imageAtlas){const yn=on.imageAtlas,Nr=yn.patternPositions[xn.to.toString()],io=yn.patternPositions[xn.from.toString()];Nr&&io&&un.setConstantPatternPositions(Nr,io)}const pi=Kn?Wt:null,vi=ye?oc(P,on,x,He,pi):ae?_l(P,on,x,ae,He,pi):Re?gl(P,on,x,bt.lineClipsArray.length,pi):Ol(P,on,x,pi);if(ye)dt.activeTexture.set(pt.TEXTURE0),on.imageAtlasTexture.bind(pt.LINEAR,pt.CLAMP_TO_EDGE),un.updatePaintBuffers(He);else if(ae&&(kn||P.lineAtlas.dirty))dt.activeTexture.set(pt.TEXTURE0),P.lineAtlas.bind(dt);else if(Re){const yn=bt.gradients[x.id];let Nr=yn.texture;if(x.gradientVersion!==yn.version){let io=256;if(x.stepInterpolant){const or=u.getSource().maxzoom,mo=Wt.canonical.z===or?Math.ceil(1<<P.transform.maxZoom-Wt.canonical.z):1;io=h.clamp(h.nextPowerOfTwo(bt.maxLineLength/h.EXTENT*1024*mo),256,dt.maxTextureSize)}yn.gradient=h.renderColorRamp({expression:x.gradientExpression(),evaluationKey:"lineProgress",resolution:io,image:yn.gradient||void 0,clips:bt.lineClipsArray}),yn.texture?yn.texture.update(yn.gradient):yn.texture=new Ae(dt,yn.gradient,pt.RGBA),yn.version=x.gradientVersion,Nr=yn.texture}dt.activeTexture.set(pt.TEXTURE0),Nr.bind(x.stepInterpolant?pt.NEAREST:pt.LINEAR,pt.CLAMP_TO_EDGE)}In.draw(dt,pt.TRIANGLES,N,P.stencilModeForClipping(Wt),oe,es.disabled,vi,Kn,x.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,x.paint,P.transform.zoom,un,bt.layoutVertexBuffer2),Ft=!1}},fill:function(P,u,x,I){const F=x.paint.get("fill-color"),j=x.paint.get("fill-opacity");if(j.constantOr(1)===0)return;const N=P.colorModeForRenderPass(),oe=x.paint.get("fill-pattern"),ae=P.opaquePassEnabledForLayer()&&!oe.constantOr(1)&&F.constantOr(h.Color.transparent).a===1&&j.constantOr(0)===1?"opaque":"translucent";if(P.renderPass===ae){const me=P.depthModeForSublayer(1,P.renderPass==="opaque"?Or.ReadWrite:Or.ReadOnly);_u(P,u,x,I,me,N,!1)}if(P.renderPass==="translucent"&&x.paint.get("fill-antialias")){const me=P.depthModeForSublayer(x.getPaintProperty("fill-outline-color")?2:0,Or.ReadOnly);_u(P,u,x,I,me,N,!0)}},"fill-extrusion":function(P,u,x,I){const F=x.paint.get("fill-extrusion-opacity");if(F!==0&&P.renderPass==="translucent"){const j=new Or(P.context.gl.LEQUAL,Or.ReadWrite,P.depthRangeFor3D);if(F!==1||x.paint.get("fill-extrusion-pattern").constantOr(1))Hc(P,u,x,I,j,Zo.disabled,rs.disabled),Hc(P,u,x,I,j,P.stencilModeFor3D(),P.colorModeForRenderPass());else{const N=P.colorModeForRenderPass();Hc(P,u,x,I,j,Zo.disabled,N)}}},hillshade:function(P,u,x,I){if(P.renderPass!=="offscreen"&&P.renderPass!=="translucent")return;const F=P.context,j=P.depthModeForSublayer(0,Or.ReadOnly),N=P.colorModeForRenderPass(),[oe,ae]=P.renderPass==="translucent"?P.stencilConfigForOverlap(I):[{},I];for(const me of ae){const ye=u.getTile(me);ye.needsHillshadePrepare!==void 0&&ye.needsHillshadePrepare&&P.renderPass==="offscreen"?Vc(P,ye,x,j,Zo.disabled,N):P.renderPass==="translucent"&&fh(P,me,ye,x,j,oe[me.overscaledZ],N)}F.viewport.set([0,0,P.width,P.height])},raster:function(P,u,x,I){if(P.renderPass!=="translucent"||x.paint.get("raster-opacity")===0||!I.length)return;const F=P.context,j=F.gl,N=u.getSource(),oe=P.useProgram("raster"),ae=P.colorModeForRenderPass(),[me,ye]=N instanceof Cn?[{},I]:P.stencilConfigForOverlap(I),Re=ye[ye.length-1].overscaledZ,He=!P.options.moving;for(const gt of ye){const dt=P.depthModeForSublayer(gt.overscaledZ-Re,x.paint.get("raster-opacity")===1?Or.ReadWrite:Or.ReadOnly,j.LESS),pt=u.getTile(gt);pt.registerFadeDuration(x.paint.get("raster-fade-duration"));const Ft=u.findLoadedParent(gt,0),Wt=Nu(pt,Ft,u,x,P.transform,P.style.terrain);let on,bt;const un=x.paint.get("raster-resampling")==="nearest"?j.NEAREST:j.LINEAR;F.activeTexture.set(j.TEXTURE0),pt.texture.bind(un,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),F.activeTexture.set(j.TEXTURE1),Ft?(Ft.texture.bind(un,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),on=Math.pow(2,Ft.tileID.overscaledZ-pt.tileID.overscaledZ),bt=[pt.tileID.canonical.x*on%1,pt.tileID.canonical.y*on%1]):pt.texture.bind(un,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST);const tn=P.style.terrain&&P.style.terrain.getTerrainData(gt),In=tn?gt:null,kn=In?In.posMatrix:P.transform.calculatePosMatrix(gt.toUnwrapped(),He),Kn=$c(kn,bt||[0,0],on||1,Wt,x);N instanceof Cn?oe.draw(F,j.TRIANGLES,dt,Zo.disabled,ae,es.disabled,Kn,tn,x.id,N.boundsBuffer,P.quadTriangleIndexBuffer,N.boundsSegments):oe.draw(F,j.TRIANGLES,dt,me[gt.overscaledZ],ae,es.disabled,Kn,tn,x.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments)}},background:function(P,u,x,I){const F=x.paint.get("background-color"),j=x.paint.get("background-opacity");if(j===0)return;const N=P.context,oe=N.gl,ae=P.transform,me=ae.tileSize,ye=x.paint.get("background-pattern");if(P.isPatternMissing(ye))return;const Re=!ye&&F.a===1&&j===1&&P.opaquePassEnabledForLayer()?"opaque":"translucent";if(P.renderPass!==Re)return;const He=Zo.disabled,gt=P.depthModeForSublayer(0,Re==="opaque"?Or.ReadWrite:Or.ReadOnly),dt=P.colorModeForRenderPass(),pt=P.useProgram(ye?"backgroundPattern":"background"),Ft=I||ae.coveringTiles({tileSize:me,terrain:P.style.terrain});ye&&(N.activeTexture.set(oe.TEXTURE0),P.imageManager.bind(P.context));const Wt=x.getCrossfadeParameters();for(const on of Ft){const bt=I?on.posMatrix:P.transform.calculatePosMatrix(on.toUnwrapped()),un=ye?ss(bt,j,P,ye,{tileID:on,tileSize:me},Wt):Ko(bt,j,F),tn=P.style.terrain&&P.style.terrain.getTerrainData(on);pt.draw(N,oe.TRIANGLES,gt,He,dt,es.disabled,un,tn,x.id,P.tileExtentBuffer,P.quadTriangleIndexBuffer,P.tileExtentSegments)}},debug:function(P,u,x){for(let I=0;I<x.length;I++)gd(P,u,x[I])},custom:function(P,u,x){const I=P.context,F=x.implementation;if(P.renderPass==="offscreen"){const j=F.prerender;j&&(P.setCustomLayerDefaults(),I.setColorMode(P.colorModeForRenderPass()),j.call(F,I.gl,P.transform.customLayerMatrix()),I.setDirty(),P.setBaseState())}else if(P.renderPass==="translucent"){P.setCustomLayerDefaults(),I.setColorMode(P.colorModeForRenderPass()),I.setStencilMode(Zo.disabled);const j=F.renderingMode==="3d"?new Or(P.context.gl.LEQUAL,Or.ReadWrite,P.depthRangeFor3D):P.depthModeForSublayer(0,Or.ReadOnly);I.setDepthMode(j),F.render(I.gl,P.transform.customLayerMatrix()),I.setDirty(),P.setBaseState(),I.bindFramebuffer.set(null)}}};class Gc{constructor(u,x){this.context=new sc(u),this.transform=x,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:h.create(),renderTime:0},this.setup(),this.numSublayers=zi.maxUnderzooming+zi.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new xr,this.gpuTimers={}}resize(u,x,I){if(this.width=u*I,this.height=x*I,this.pixelRatio=I,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const F of this.style._order)this.style._layers[F].resize()}setup(){const u=this.context,x=new h.PosArray;x.emplaceBack(0,0),x.emplaceBack(h.EXTENT,0),x.emplaceBack(0,h.EXTENT),x.emplaceBack(h.EXTENT,h.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(x,Gr.members),this.tileExtentSegments=h.SegmentVector.simpleSegment(0,0,4,2);const I=new h.PosArray;I.emplaceBack(0,0),I.emplaceBack(h.EXTENT,0),I.emplaceBack(0,h.EXTENT),I.emplaceBack(h.EXTENT,h.EXTENT),this.debugBuffer=u.createVertexBuffer(I,Gr.members),this.debugSegments=h.SegmentVector.simpleSegment(0,0,4,5);const F=new h.RasterBoundsArray;F.emplaceBack(0,0,0,0),F.emplaceBack(h.EXTENT,0,h.EXTENT,0),F.emplaceBack(0,h.EXTENT,0,h.EXTENT),F.emplaceBack(h.EXTENT,h.EXTENT,h.EXTENT,h.EXTENT),this.rasterBoundsBuffer=u.createVertexBuffer(F,mn.members),this.rasterBoundsSegments=h.SegmentVector.simpleSegment(0,0,4,2);const j=new h.PosArray;j.emplaceBack(0,0),j.emplaceBack(1,0),j.emplaceBack(0,1),j.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(j,Gr.members),this.viewportSegments=h.SegmentVector.simpleSegment(0,0,4,2);const N=new h.LineStripIndexArray;N.emplaceBack(0),N.emplaceBack(1),N.emplaceBack(3),N.emplaceBack(2),N.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(N);const oe=new h.TriangleIndexArray;oe.emplaceBack(0,1,2),oe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(oe),this.emptyTexture=new Ae(u,{width:1,height:1,data:new Uint8Array([0,0,0,0])},u.gl.RGBA);const ae=this.context.gl;this.stencilClearMode=new Zo({func:ae.ALWAYS,mask:0},0,255,ae.ZERO,ae.ZERO,ae.ZERO)}clearStencil(){const u=this.context,x=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const I=h.create();h.ortho(I,0,this.width,this.height,0,0,1),h.scale(I,I,[x.drawingBufferWidth,x.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,x.TRIANGLES,Or.disabled,this.stencilClearMode,rs.disabled,es.disabled,_a(I),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,x){if(this.currentStencilSource===u.source||!u.isTileClipped()||!x||!x.length)return;this.currentStencilSource=u.source;const I=this.context,F=I.gl;this.nextStencilID+x.length>256&&this.clearStencil(),I.setColorMode(rs.disabled),I.setDepthMode(Or.disabled);const j=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const N of x){const oe=this._tileClippingMaskIDs[N.key]=this.nextStencilID++,ae=this.style.terrain&&this.style.terrain.getTerrainData(N);j.draw(I,F.TRIANGLES,Or.disabled,new Zo({func:F.ALWAYS,mask:0},oe,255,F.KEEP,F.KEEP,F.REPLACE),rs.disabled,es.disabled,_a(N.posMatrix),ae,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,x=this.context.gl;return new Zo({func:x.NOTEQUAL,mask:255},u,255,x.KEEP,x.KEEP,x.REPLACE)}stencilModeForClipping(u){const x=this.context.gl;return new Zo({func:x.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,x.KEEP,x.KEEP,x.REPLACE)}stencilConfigForOverlap(u){const x=this.context.gl,I=u.sort((N,oe)=>oe.overscaledZ-N.overscaledZ),F=I[I.length-1].overscaledZ,j=I[0].overscaledZ-F+1;if(j>1){this.currentStencilSource=void 0,this.nextStencilID+j>256&&this.clearStencil();const N={};for(let oe=0;oe<j;oe++)N[oe+F]=new Zo({func:x.GEQUAL,mask:255},oe+this.nextStencilID,255,x.KEEP,x.KEEP,x.REPLACE);return this.nextStencilID+=j,[N,I]}return[{[F]:Zo.disabled},I]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new rs([u.CONSTANT_COLOR,u.ONE],new h.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?rs.unblended:rs.alphaBlended}depthModeForSublayer(u,x,I){if(!this.opaquePassEnabledForLayer())return Or.disabled;const F=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new Or(I||this.context.gl.LEQUAL,x,[F,F])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,x){this.style=u,this.options=x,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(h.exported.now()),this.imageManager.beginFrame();const I=this.style._order,F=this.style.sourceCaches,j=this.style.terrain&&new ll(this);for(const me in F){const ye=F[me];ye.used&&ye.prepare(this.context)}const N={},oe={},ae={};for(const me in F){const ye=F[me];N[me]=ye.getVisibleCoordinates(),oe[me]=N[me].slice().reverse(),ae[me]=ye.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let me=0;me<I.length;me++)if(this.style._layers[I[me]].is3D()){this.opaquePassCutoff=me;break}if(j){this.opaquePassCutoff=0;const me=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!h.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||me.length)&&(h.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ye,Re){const He=ye.context,gt=He.gl,dt=rs.unblended,pt=new Or(gt.LEQUAL,Or.ReadWrite,[0,1]),Ft=Re.getTerrainMesh(),Wt=Re.sourceCache.getRenderableTiles(),on=ye.useProgram("terrainDepth");He.bindFramebuffer.set(Re.getFramebuffer("depth").framebuffer),He.viewport.set([0,0,ye.width/devicePixelRatio,ye.height/devicePixelRatio]),He.clear({color:h.Color.transparent,depth:1});for(const bt of Wt){const un=Re.getTerrainData(bt.tileID),tn=ye.transform.calculatePosMatrix(bt.tileID.toUnwrapped());on.draw(He,gt.TRIANGLES,pt,Zo.disabled,dt,es.backCCW,{u_matrix:tn},un,"terrain",Ft.vertexBuffer,Ft.indexBuffer,Ft.segments)}He.bindFramebuffer.set(null),He.viewport.set([0,0,ye.width,ye.height])}(this,this.style.terrain),function(ye,Re){const He=ye.context,gt=He.gl,dt=rs.unblended,pt=new Or(gt.LEQUAL,Or.ReadWrite,[0,1]),Ft=Re.getTerrainMesh(),Wt=Re.getCoordsTexture(),on=Re.sourceCache.getRenderableTiles(),bt=ye.useProgram("terrainCoords");He.bindFramebuffer.set(Re.getFramebuffer("coords").framebuffer),He.viewport.set([0,0,ye.width/devicePixelRatio,ye.height/devicePixelRatio]),He.clear({color:h.Color.transparent,depth:1}),Re.coordsIndex=[];for(const un of on){const tn=Re.getTerrainData(un.tileID);He.activeTexture.set(gt.TEXTURE0),gt.bindTexture(gt.TEXTURE_2D,Wt.texture);const In=ye.transform.calculatePosMatrix(un.tileID.toUnwrapped());bt.draw(He,gt.TRIANGLES,pt,Zo.disabled,dt,es.backCCW,{u_matrix:In,u_terrain_coords_id:(255-Re.coordsIndex.length)/255,u_texture:0},tn,"terrain",Ft.vertexBuffer,Ft.indexBuffer,Ft.segments),Re.coordsIndex.push(un.tileID.key)}He.bindFramebuffer.set(null),He.viewport.set([0,0,ye.width,ye.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const me of I){const ye=this.style._layers[me];if(!ye.hasOffscreenPass()||ye.isHidden(this.transform.zoom))continue;const Re=oe[ye.source];(ye.type==="custom"||Re.length)&&this.renderLayer(this,F[ye.source],ye,Re)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:x.showOverdrawInspector?h.Color.black:h.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=x.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!j)for(this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const me=this.style._layers[I[this.currentLayer]],ye=F[me.source],Re=N[me.source];this._renderTileClippingMasks(me,Re),this.renderLayer(this,ye,me,Re)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const me=this.style._layers[I[this.currentLayer]],ye=F[me.source];if(j&&j.renderLayer(me))continue;const Re=(me.type==="symbol"?ae:oe)[me.source];this._renderTileClippingMasks(me,N[me.source]),this.renderLayer(this,ye,me,Re)}if(this.options.showTileBoundaries){let me,ye;Object.values(this.style._layers).forEach(Re=>{Re.source&&!Re.isHidden(this.transform.zoom)&&(Re.source!==(ye&&ye.id)&&(ye=this.style.sourceCaches[Re.source]),(!me||me.getSource().maxzoom<ye.getSource().maxzoom)&&(me=ye))}),me&&Bc.debug(this,me,me.getVisibleCoordinates())}this.options.showPadding&&function(me){const ye=me.transform.padding;al(me,me.transform.height-(ye.top||0),3,ms),al(me,ye.bottom||0,3,va),yu(me,ye.left||0,3,ph),yu(me,me.transform.width-(ye.right||0),3,sl);const Re=me.transform.centerPoint;(function(He,gt,dt,pt){ac(He,gt-1,dt-10,2,20,pt),ac(He,gt-10,dt-1,20,2,pt)})(me,Re.x,me.transform.height-Re.y,Dh)}(this),this.context.setDefault()}renderLayer(u,x,I,F){I.isHidden(this.transform.zoom)||(I.type==="background"||I.type==="custom"||(F||[]).length)&&(this.id=I.id,this.gpuTimingStart(I),Bc[I.type](u,x,I,F,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(u){if(!this.options.gpuTiming)return;const x=this.context.extTimerQuery;let I=this.gpuTimers[u.id];I||(I=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:x.createQueryEXT()}),I.calls++,x.beginQueryEXT(x.TIME_ELAPSED_EXT,I.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}collectGpuTimers(){const u=this.gpuTimers;return this.gpuTimers={},u}queryGpuTimers(u){const x={};for(const I in u){const F=u[I],j=this.context.extTimerQuery,N=j.getQueryObjectEXT(F.query,j.QUERY_RESULT_EXT)/1e6;j.deleteQueryEXT(F.query),x[I]=N}return x}translatePosMatrix(u,x,I,F,j){if(!I[0]&&!I[1])return u;const N=j?F==="map"?this.transform.angle:0:F==="viewport"?-this.transform.angle:0;if(N){const me=Math.sin(N),ye=Math.cos(N);I=[I[0]*ye-I[1]*me,I[0]*me+I[1]*ye]}const oe=[j?I[0]:zt(x,I[0],this.transform.zoom),j?I[1]:zt(x,I[1],this.transform.zoom),0],ae=new Float32Array(16);return h.translate(ae,u,oe),ae}saveTileTexture(u){const x=this._tileTextures[u.size[0]];x?x.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const x=this._tileTextures[u];return x&&x.length>0?x.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const x=this.imageManager.getPattern(u.from.toString()),I=this.imageManager.getPattern(u.to.toString());return!x||!I}useProgram(u,x){this.cache=this.cache||{};const I=u+(x?x.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[I]||(this.cache[I]=new sh(this.context,u,Dr[u],x,ah[u],this._showOverdrawInspector,this.style.terrain)),this.cache[I]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ae(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Wc{constructor(u,x){this.points=u,this.planes=x}static fromInvProjectionMatrix(u,x,I){const F=Math.pow(2,I),j=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(oe=>{const ae=1/(oe=h.transformMat4([],oe,u))[3]/x*F;return h.mul$1(oe,oe,[ae,ae,1/oe[3],ae])}),N=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(oe=>{const ae=h.sub([],j[oe[0]],j[oe[1]]),me=h.sub([],j[oe[2]],j[oe[1]]),ye=h.normalize([],h.cross([],ae,me)),Re=-h.dot(ye,j[oe[1]]);return ye.concat(Re)});return new Wc(j,N)}}class Zs{constructor(u,x){this.min=u,this.max=x,this.center=h.scale$1([],h.add([],this.min,this.max),.5)}quadrant(u){const x=[u%2==0,u<2],I=h.clone$2(this.min),F=h.clone$2(this.max);for(let j=0;j<x.length;j++)I[j]=x[j]?this.min[j]:this.center[j],F[j]=x[j]?this.center[j]:this.max[j];return F[2]=this.max[2],new Zs(I,F)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const x=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let I=!0;for(let F=0;F<u.planes.length;F++){const j=u.planes[F];let N=0;for(let oe=0;oe<x.length;oe++)h.dot$1(j,x[oe])>=0&&N++;if(N===0)return 0;N!==x.length&&(I=!1)}if(I)return 2;for(let F=0;F<3;F++){let j=Number.MAX_VALUE,N=-Number.MAX_VALUE;for(let oe=0;oe<u.points.length;oe++){const ae=u.points[oe][F]-this.min[F];j=Math.min(j,ae),N=Math.max(N,ae)}if(N<0||j>this.max[F]-this.min[F])return 0}return 1}}class oa{constructor(u=0,x=0,I=0,F=0){if(isNaN(u)||u<0||isNaN(x)||x<0||isNaN(I)||I<0||isNaN(F)||F<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=x,this.left=I,this.right=F}interpolate(u,x,I){return x.top!=null&&u.top!=null&&(this.top=h.number(u.top,x.top,I)),x.bottom!=null&&u.bottom!=null&&(this.bottom=h.number(u.bottom,x.bottom,I)),x.left!=null&&u.left!=null&&(this.left=h.number(u.left,x.left,I)),x.right!=null&&u.right!=null&&(this.right=h.number(u.right,x.right,I)),this}getCenter(u,x){const I=h.clamp((this.left+u-this.right)/2,0,u),F=h.clamp((this.top+x-this.bottom)/2,0,x);return new h.pointGeometry(I,F)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new oa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class $u{constructor(u,x,I,F,j){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=j===void 0||!!j,this._minZoom=u||0,this._maxZoom=x||22,this._minPitch=I??0,this._maxPitch=F??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new h.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new oa,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const u=new $u(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.tileSize=this.tileSize,u.latRange=this.latRange,u.width=this.width,u.height=this.height,u._center=this._center,u._elevation=this._elevation,u.zoom=this.zoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new h.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const x=-h.wrap(u,-180,180)*Math.PI/180;var I;this.angle!==x&&(this._unmodified=!1,this.angle=x,this._calcMatrices(),this.rotationMatrix=(I=new h.ARRAY_TYPE(4),h.ARRAY_TYPE!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I),function(F,j,N){var oe=j[0],ae=j[1],me=j[2],ye=j[3],Re=Math.sin(N),He=Math.cos(N);F[0]=oe*He+me*Re,F[1]=ae*He+ye*Re,F[2]=oe*-Re+me*He,F[3]=ae*-Re+ye*He}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const x=h.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==x&&(this._unmodified=!1,this._pitch=x,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const x=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==x&&(this._unmodified=!1,this._zoom=x,this.scale=this.zoomScale(x),this.tileZoom=Math.floor(x),this.zoomFraction=x-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,x,I){this._unmodified=!1,this._edgeInsets.interpolate(u,x,I),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const x=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,x)}getVisibleUnwrappedCoordinates(u){const x=[new h.UnwrappedTileID(0,u)];if(this._renderWorldCopies){const I=this.pointCoordinate(new h.pointGeometry(0,0)),F=this.pointCoordinate(new h.pointGeometry(this.width,0)),j=this.pointCoordinate(new h.pointGeometry(this.width,this.height)),N=this.pointCoordinate(new h.pointGeometry(0,this.height)),oe=Math.floor(Math.min(I.x,F.x,j.x,N.x)),ae=Math.floor(Math.max(I.x,F.x,j.x,N.x)),me=1;for(let ye=oe-me;ye<=ae+me;ye++)ye!==0&&x.push(new h.UnwrappedTileID(ye,u))}return x}coveringTiles(u){var x,I;let F=this.coveringZoomLevel(u);const j=F;if(u.minzoom!==void 0&&F<u.minzoom)return[];u.maxzoom!==void 0&&F>u.maxzoom&&(F=u.maxzoom);const N=this.pointCoordinate(this.getCameraPoint()),oe=h.MercatorCoordinate.fromLngLat(this.center),ae=Math.pow(2,F),me=[ae*N.x,ae*N.y,0],ye=[ae*oe.x,ae*oe.y,0],Re=Wc.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,F);let He=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(He=F);const gt=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,dt=bt=>({aabb:new Zs([bt*ae,0,0],[(bt+1)*ae,ae,0]),zoom:0,x:0,y:0,wrap:bt,fullyVisible:!1}),pt=[],Ft=[],Wt=F,on=u.reparseOverscaled?j:F;if(this._renderWorldCopies)for(let bt=1;bt<=3;bt++)pt.push(dt(-bt)),pt.push(dt(bt));for(pt.push(dt(0));pt.length>0;){const bt=pt.pop(),un=bt.x,tn=bt.y;let In=bt.fullyVisible;if(!In){const yn=bt.aabb.intersects(Re);if(yn===0)continue;In=yn===2}const kn=u.terrain?me:ye,Kn=bt.aabb.distanceX(kn),xn=bt.aabb.distanceY(kn),pi=Math.max(Math.abs(Kn),Math.abs(xn)),vi=gt+(1<<Wt-bt.zoom)-2;if(bt.zoom===Wt||pi>vi&&bt.zoom>=He){const yn=Wt-bt.zoom,Nr=me[0]-.5-(un<<yn),io=me[1]-.5-(tn<<yn);Ft.push({tileID:new h.OverscaledTileID(bt.zoom===Wt?on:bt.zoom,bt.wrap,bt.zoom,un,tn),distanceSq:h.sqrLen([ye[0]-.5-un,ye[1]-.5-tn]),tileDistanceToCamera:Math.sqrt(Nr*Nr+io*io)})}else for(let yn=0;yn<4;yn++){const Nr=(un<<1)+yn%2,io=(tn<<1)+(yn>>1),or=bt.zoom+1;let mo=bt.aabb.quadrant(yn);if(u.terrain){const qn=new h.OverscaledTileID(or,bt.wrap,or,Nr,io),Po=u.terrain.getMinMaxElevation(qn),Xr=(x=Po.minElevation)!==null&&x!==void 0?x:this.elevation,os=(I=Po.maxElevation)!==null&&I!==void 0?I:this.elevation;mo=new Zs([mo.min[0],mo.min[1],Xr],[mo.max[0],mo.max[1],os])}pt.push({aabb:mo,zoom:or,x:Nr,y:io,wrap:bt.wrap,fullyVisible:In})}}return Ft.sort((bt,un)=>bt.distanceSq-un.distanceSq).map(bt=>bt.tileID)}resize(u,x){this.width=u,this.height=x,this.pixelsToGLUnits=[2/u,-2/x],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const x=h.clamp(u.lat,-this.maxValidLatitude,this.maxValidLatitude);return new h.pointGeometry(h.mercatorXfromLng(u.lng)*this.worldSize,h.mercatorYfromLat(x)*this.worldSize)}unproject(u){return new h.MercatorCoordinate(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(u){this.freezeElevation||(this.elevation=u?this.getElevation(this._center,u):0)}getElevation(u,x){const I=h.MercatorCoordinate.fromLngLat(u),F=(1<<this.tileZoom)*h.EXTENT,j=I.x*F,N=I.y*F,oe=Math.floor(j/h.EXTENT),ae=Math.floor(N/h.EXTENT),me=new h.OverscaledTileID(this.tileZoom,0,this.tileZoom,oe,ae);return x.getElevation(me,j%h.EXTENT,N%h.EXTENT,h.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const x=this.pointLocation(this.centerPoint,u),I=this.getElevation(x,u);if(!(this.elevation-I))return;const F=this.getCameraPosition(),j=h.MercatorCoordinate.fromLngLat(F.lngLat,F.altitude),N=h.MercatorCoordinate.fromLngLat(x,I),oe=j.x-N.x,ae=j.y-N.y,me=j.z-N.z,ye=Math.sqrt(oe*oe+ae*ae+me*me),Re=this.scaleZoom(this.cameraToCenterDistance/ye/this.tileSize);this._elevation=I,this._center=x,this.zoom=Re}setLocationAtPoint(u,x){const I=this.pointCoordinate(x),F=this.pointCoordinate(this.centerPoint),j=this.locationCoordinate(u),N=new h.MercatorCoordinate(j.x-(I.x-F.x),j.y-(I.y-F.y));this.center=this.coordinateLocation(N),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,x){return x?this.coordinatePoint(this.locationCoordinate(u),this.getElevation(u,x),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,x){return this.coordinateLocation(this.pointCoordinate(u,x))}locationCoordinate(u){return h.MercatorCoordinate.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,x){if(x){const He=x.pointCoordinate(u);if(He!=null)return He}const I=[u.x,u.y,0,1],F=[u.x,u.y,1,1];h.transformMat4(I,I,this.pixelMatrixInverse),h.transformMat4(F,F,this.pixelMatrixInverse);const j=I[3],N=F[3],oe=I[1]/j,ae=F[1]/N,me=I[2]/j,ye=F[2]/N,Re=me===ye?0:(0-me)/(ye-me);return new h.MercatorCoordinate(h.number(I[0]/j,F[0]/N,Re)/this.worldSize,h.number(oe,ae,Re)/this.worldSize)}coordinatePoint(u,x=0,I=this.pixelMatrix){const F=[u.x*this.worldSize,u.y*this.worldSize,x,1];return h.transformMat4(F,F,I),new h.pointGeometry(F[0]/F[3],F[1]/F[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new h.LngLatBounds().extend(this.pointLocation(new h.pointGeometry(0,u))).extend(this.pointLocation(new h.pointGeometry(this.width,u))).extend(this.pointLocation(new h.pointGeometry(this.width,this.height))).extend(this.pointLocation(new h.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new h.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(u,x=!1){const I=u.key,F=x?this._alignedPosMatrixCache:this._posMatrixCache;if(F[I])return F[I];const j=u.canonical,N=this.worldSize/this.zoomScale(j.z),oe=j.x+Math.pow(2,j.z)*u.wrap,ae=h.identity(new Float64Array(16));return h.translate(ae,ae,[oe*N,j.y*N,0]),h.scale(ae,ae,[N/h.EXTENT,N/h.EXTENT,1]),h.multiply(ae,x?this.alignedProjMatrix:this.projMatrix,ae),F[I]=new Float32Array(ae),F[I]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let u,x,I,F,j=-90,N=90,oe=-180,ae=180;const me=this.size,ye=this._unmodified;if(this.latRange){const gt=this.latRange;j=h.mercatorYfromLat(gt[1])*this.worldSize,N=h.mercatorYfromLat(gt[0])*this.worldSize,u=N-j<me.y?me.y/(N-j):0}if(this.lngRange){const gt=this.lngRange;oe=h.wrap(h.mercatorXfromLng(gt[0])*this.worldSize,0,this.worldSize),ae=h.wrap(h.mercatorXfromLng(gt[1])*this.worldSize,0,this.worldSize),ae<oe&&(ae+=this.worldSize),x=ae-oe<me.x?me.x/(ae-oe):0}const Re=this.point,He=Math.max(x||0,u||0);if(He)return this.center=this.unproject(new h.pointGeometry(x?(ae+oe)/2:Re.x,u?(N+j)/2:Re.y)),this.zoom+=this.scaleZoom(He),this._unmodified=ye,void(this._constraining=!1);if(this.latRange){const gt=Re.y,dt=me.y/2;gt-dt<j&&(F=j+dt),gt+dt>N&&(F=N-dt)}if(this.lngRange){const gt=(oe+ae)/2,dt=h.wrap(Re.x,gt-this.worldSize/2,gt+this.worldSize/2),pt=me.x/2;dt-pt<oe&&(I=oe+pt),dt+pt>ae&&(I=ae-pt)}I===void 0&&F===void 0||(this.center=this.unproject(new h.pointGeometry(I!==void 0?I:Re.x,F!==void 0?F:Re.y)).wrap()),this._unmodified=ye,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,x=this.point.x,I=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=h.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let F=h.identity(new Float64Array(16));h.scale(F,F,[this.width/2,-this.height/2,1]),h.translate(F,F,[1,-1,0]),this.labelPlaneMatrix=F,F=h.identity(new Float64Array(16)),h.scale(F,F,[1,-1,1]),h.translate(F,F,[-1,-1,0]),h.scale(F,F,[2/this.width,2/this.height,1]),this.glCoordMatrix=F,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const j=Math.PI/2+this._pitch,N=this._fov*(.5+u.y/this.height),oe=Math.sin(N)*this.cameraToSeaLevelDistance/Math.sin(h.clamp(Math.PI-j-N,.01,Math.PI-.01)),ae=this.getHorizon(),me=2*Math.atan(ae/this.cameraToCenterDistance)*(.5+u.y/(2*ae)),ye=Math.sin(me)*this.cameraToSeaLevelDistance/Math.sin(h.clamp(Math.PI-j-me,.01,Math.PI-.01)),Re=Math.cos(Math.PI/2-this._pitch)*oe+this.cameraToSeaLevelDistance,He=Math.cos(Math.PI/2-this._pitch)*ye+this.cameraToSeaLevelDistance,gt=1.01*Math.min(Re,He),dt=this.height/50;F=new Float64Array(16),h.perspective(F,this._fov,this.width/this.height,dt,gt),F[8]=2*-u.x/this.width,F[9]=2*u.y/this.height,h.scale(F,F,[1,-1,1]),h.translate(F,F,[0,0,-this.cameraToCenterDistance]),h.rotateX(F,F,this._pitch),h.rotateZ(F,F,this.angle),h.translate(F,F,[-x,-I,0]),this.mercatorMatrix=h.scale([],F,[this.worldSize,this.worldSize,this.worldSize]),h.scale(F,F,[1,1,this._pixelPerMeter]),this.pixelMatrix=h.multiply(new Float64Array(16),this.labelPlaneMatrix,F),h.translate(F,F,[0,0,-this.elevation]),this.projMatrix=F,this.invProjMatrix=h.invert([],F),this.pixelMatrix3D=h.multiply(new Float64Array(16),this.labelPlaneMatrix,F);const pt=this.width%2/2,Ft=this.height%2/2,Wt=Math.cos(this.angle),on=Math.sin(this.angle),bt=x-Math.round(x)+Wt*pt+on*Ft,un=I-Math.round(I)+Wt*Ft+on*pt,tn=new Float64Array(F);if(h.translate(tn,tn,[bt>.5?bt-1:bt,un>.5?un-1:un,0]),this.alignedProjMatrix=tn,F=h.invert(new Float64Array(16),this.pixelMatrix),!F)throw new Error("failed to invert matrix");this.pixelMatrixInverse=F,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new h.pointGeometry(0,0)),x=[u.x*this.worldSize,u.y*this.worldSize,0,1];return h.transformMat4(x,x,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.pointGeometry(0,u))}getCameraQueryGeometry(u){const x=this.getCameraPoint();if(u.length===1)return[u[0],x];{let I=x.x,F=x.y,j=x.x,N=x.y;for(const oe of u)I=Math.min(I,oe.x),F=Math.min(F,oe.y),j=Math.max(j,oe.x),N=Math.max(N,oe.y);return[new h.pointGeometry(I,F),new h.pointGeometry(j,F),new h.pointGeometry(j,N),new h.pointGeometry(I,N),new h.pointGeometry(I,F)]}}}class Tc{constructor(u){this._hashName=u&&encodeURIComponent(u),h.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(x,I){let F=!1,j=null;const N=()=>{j=null,F&&(x(),j=setTimeout(N,300),F=!1)};return()=>(F=!0,j||N(),j)}(this._updateHashUnthrottled.bind(this))}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const x=this._map.getCenter(),I=Math.round(100*this._map.getZoom())/100,F=Math.ceil((I*Math.LN2+Math.log(512/360/.5))/Math.LN10),j=Math.pow(10,F),N=Math.round(x.lng*j)/j,oe=Math.round(x.lat*j)/j,ae=this._map.getBearing(),me=this._map.getPitch();let ye="";if(ye+=u?`/${N}/${oe}/${I}`:`${I}/${oe}/${N}`,(ae||me)&&(ye+="/"+Math.round(10*ae)/10),me&&(ye+=`/${Math.round(me)}`),this._hashName){const Re=this._hashName;let He=!1;const gt=window.location.hash.slice(1).split("&").map(dt=>{const pt=dt.split("=")[0];return pt===Re?(He=!0,`${pt}=${ye}`):dt}).filter(dt=>dt);return He||gt.push(`${Re}=${ye}`),`#${gt.join("&")}`}return`#${ye}`}_getCurrentHash(){const u=window.location.hash.replace("#","");if(this._hashName){let x;return u.split("&").map(I=>I.split("=")).forEach(I=>{I[0]===this._hashName&&(x=I)}),(x&&x[1]||"").split("/")}return u.split("/")}_onHashChange(){const u=this._getCurrentHash();if(u.length>=3&&!u.some(x=>isNaN(x))){const x=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:x,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}}}const mh={linearity:.3,easing:h.bezier(0,0,.3,1)},Ia=h.extend({deceleration:2500,maxSpeed:1400},mh),Ga=h.extend({deceleration:20,maxSpeed:1400},mh),gh=h.extend({deceleration:1e3,maxSpeed:360},mh),cc=h.extend({deceleration:1e3,maxSpeed:90},mh);class Kc{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.exported.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,x=h.exported.now();for(;u.length>0&&x-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const x={zoom:0,bearing:0,pitch:0,pan:new h.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:j}of this._inertiaBuffer)x.zoom+=j.zoomDelta||0,x.bearing+=j.bearingDelta||0,x.pitch+=j.pitchDelta||0,j.panDelta&&x.pan._add(j.panDelta),j.around&&(x.around=j.around),j.pinchAround&&(x.pinchAround=j.pinchAround);const I=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,F={};if(x.pan.mag()){const j=Ec(x.pan.mag(),I,h.extend({},Ia,u||{}));F.offset=x.pan.mult(j.amount/x.pan.mag()),F.center=this._map.transform.center,vu(F,j)}if(x.zoom){const j=Ec(x.zoom,I,Ga);F.zoom=this._map.transform.zoom+j.amount,vu(F,j)}if(x.bearing){const j=Ec(x.bearing,I,gh);F.bearing=this._map.transform.bearing+h.clamp(j.amount,-179,179),vu(F,j)}if(x.pitch){const j=Ec(x.pitch,I,cc);F.pitch=this._map.transform.pitch+j.amount,vu(F,j)}if(F.zoom||F.bearing){const j=x.pinchAround===void 0?x.around:x.pinchAround;F.around=j?this._map.unproject(j):this._map.getCenter()}return this.clear(),h.extend(F,{noMoveStart:!0})}}function vu(P,u){(!P.duration||P.duration<u.duration)&&(P.duration=u.duration,P.easing=u.easing)}function Ec(P,u,x){const{maxSpeed:I,linearity:F,deceleration:j}=x,N=h.clamp(P*F/(u/1e3),-I,I),oe=Math.abs(N)/(j*F);return{easing:x.easing,duration:1e3*oe,amount:N*(oe/2)}}class xa extends h.Event{constructor(u,x,I,F={}){const j=q.mousePos(x.getCanvasContainer(),I),N=x.unproject(j);super(u,h.extend({point:j,lngLat:N,originalEvent:I},F)),this._defaultPrevented=!1,this.target=x}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Wa extends h.Event{constructor(u,x,I){const F=u==="touchend"?I.changedTouches:I.touches,j=q.touchPos(x.getCanvasContainer(),F),N=j.map(ae=>x.unproject(ae)),oe=j.reduce((ae,me,ye,Re)=>ae.add(me.div(Re.length)),new h.pointGeometry(0,0));super(u,{points:j,point:oe,lngLats:N,lngLat:x.unproject(oe),originalEvent:I}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class jt extends h.Event{constructor(u,x,I){super(u,{originalEvent:I}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Dn{constructor(u,x){this._map=u,this._clickTolerance=x.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new jt(u.type,this._map,u))}mousedown(u,x){return this._mousedownPos=x,this._firePreventable(new xa(u.type,this._map,u))}mouseup(u){this._map.fire(new xa(u.type,this._map,u))}click(u,x){this._mousedownPos&&this._mousedownPos.dist(x)>=this._clickTolerance||this._map.fire(new xa(u.type,this._map,u))}dblclick(u){return this._firePreventable(new xa(u.type,this._map,u))}mouseover(u){this._map.fire(new xa(u.type,this._map,u))}mouseout(u){this._map.fire(new xa(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Wa(u.type,this._map,u))}touchmove(u){this._map.fire(new Wa(u.type,this._map,u))}touchend(u){this._map.fire(new Wa(u.type,this._map,u))}touchcancel(u){this._map.fire(new Wa(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wn{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new xa(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new xa(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ui{constructor(u,x){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=x.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,x){this.isEnabled()&&u.shiftKey&&u.button===0&&(q.disableDrag(),this._startPos=this._lastPos=x,this._active=!0)}mousemoveWindow(u,x){if(!this._active)return;const I=x;if(this._lastPos.equals(I)||!this._box&&I.dist(this._startPos)<this._clickTolerance)return;const F=this._startPos;this._lastPos=I,this._box||(this._box=q.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));const j=Math.min(F.x,I.x),N=Math.max(F.x,I.x),oe=Math.min(F.y,I.y),ae=Math.max(F.y,I.y);q.setTransform(this._box,`translate(${j}px,${oe}px)`),this._box.style.width=N-j+"px",this._box.style.height=ae-oe+"px"}mouseupWindow(u,x){if(!this._active||u.button!==0)return;const I=this._startPos,F=x;if(this.reset(),q.suppressClick(),I.x!==F.x||I.y!==F.y)return this._map.fire(new h.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:j=>j.fitScreenCoordinates(I,F,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(q.remove(this._box),this._box=null),q.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,x){return this._map.fire(new h.Event(u,{originalEvent:x}))}}function Br(P,u){if(P.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${P.length}, points ${u.length}`);const x={};for(let I=0;I<P.length;I++)x[P[I].identifier]=u[I];return x}class po{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,x,I){(this.centroid||I.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),I.length===this.numTouches&&(this.centroid=function(F){const j=new h.pointGeometry(0,0);for(const N of F)j._add(N);return j.div(F.length)}(x),this.touches=Br(I,x)))}touchmove(u,x,I){if(this.aborted||!this.centroid)return;const F=Br(I,x);for(const j in this.touches){const N=this.touches[j],oe=F[j];(!oe||oe.dist(N)>30)&&(this.aborted=!0)}}touchend(u,x,I){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),I.length===0){const F=!this.aborted&&this.centroid;if(this.reset(),F)return F}}}class qs{constructor(u){this.singleTap=new po(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,x,I){this.singleTap.touchstart(u,x,I)}touchmove(u,x,I){this.singleTap.touchmove(u,x,I)}touchend(u,x,I){const F=this.singleTap.touchend(u,x,I);if(F){const j=u.timeStamp-this.lastTime<500,N=!this.lastTap||this.lastTap.dist(F)<30;if(j&&N||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=F,this.count===this.numTaps)return this.reset(),F}}}class as{constructor(){this._zoomIn=new qs({numTouches:1,numTaps:2}),this._zoomOut=new qs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,x,I){this._zoomIn.touchstart(u,x,I),this._zoomOut.touchstart(u,x,I)}touchmove(u,x,I){this._zoomIn.touchmove(u,x,I),this._zoomOut.touchmove(u,x,I)}touchend(u,x,I){const F=this._zoomIn.touchend(u,x,I),j=this._zoomOut.touchend(u,x,I);return F?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:N.getZoom()+1,around:N.unproject(F)},{originalEvent:u})}):j?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:N.getZoom()-1,around:N.unproject(j)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const _d={0:1,2:2};class wl{constructor(u){this.reset(),this._clickTolerance=u.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(u,x){return!1}_move(u,x){return{}}mousedown(u,x){if(this._lastPoint)return;const I=q.mouseButton(u);this._correctButton(u,I)&&(this._lastPoint=x,this._eventButton=I)}mousemoveWindow(u,x){const I=this._lastPoint;if(I){if(u.preventDefault(),function(F,j){const N=_d[j];return F.buttons===void 0||(F.buttons&N)!==N}(u,this._eventButton))this.reset();else if(this._moved||!(x.dist(I)<this._clickTolerance))return this._moved=!0,this._lastPoint=x,this._move(I,x)}}mouseupWindow(u){this._lastPoint&&q.mouseButton(u)===this._eventButton&&(this._moved&&q.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ha extends wl{mousedown(u,x){super.mousedown(u,x),this._lastPoint&&(this._active=!0)}_correctButton(u,x){return x===0&&!u.ctrlKey}_move(u,x){return{around:x,panDelta:x.sub(u)}}}class Cl extends wl{_correctButton(u,x){return x===0&&u.ctrlKey||x===2}_move(u,x){const I=.8*(x.x-u.x);if(I)return this._active=!0,{bearingDelta:I}}contextmenu(u){u.preventDefault()}}class Mi extends wl{_correctButton(u,x){return x===0&&u.ctrlKey||x===2}_move(u,x){const I=-.5*(x.y-u.y);if(I)return this._active=!0,{pitchDelta:I}}contextmenu(u){u.preventDefault()}}class Hl{constructor(u,x){this._minTouches=u.cooperativeGestures?2:1,this._clickTolerance=u.clickTolerance||1,this._map=x,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new h.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(u,x,I){return this._calculateTransform(u,x,I)}touchmove(u,x,I){if(this._map._cooperativeGestures&&(this._minTouches===2&&I.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(u,!1,I.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(I.length<this._minTouches))return u.preventDefault(),this._calculateTransform(u,x,I)}touchend(u,x,I){this._calculateTransform(u,x,I),this._active&&I.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,x,I){I.length>0&&(this._active=!0);const F=Br(I,x),j=new h.pointGeometry(0,0),N=new h.pointGeometry(0,0);let oe=0;for(const me in F){const ye=F[me],Re=this._touches[me];Re&&(j._add(ye),N._add(ye.sub(Re)),oe++,F[me]=ye)}if(this._touches=F,oe<this._minTouches||!N.mag())return;const ae=N.div(oe);return this._sum._add(ae),this._sum.mag()<this._clickTolerance?void 0:{around:j.div(oe),panDelta:ae}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(u){}_move(u,x,I){return{}}touchstart(u,x,I){this._firstTwoTouches||I.length<2||(this._firstTwoTouches=[I[0].identifier,I[1].identifier],this._start([x[0],x[1]]))}touchmove(u,x,I){if(!this._firstTwoTouches)return;u.preventDefault();const[F,j]=this._firstTwoTouches,N=Gl(I,x,F),oe=Gl(I,x,j);if(!N||!oe)return;const ae=this._aroundCenter?null:N.add(oe).div(2);return this._move([N,oe],ae,u)}touchend(u,x,I){if(!this._firstTwoTouches)return;const[F,j]=this._firstTwoTouches,N=Gl(I,x,F),oe=Gl(I,x,j);N&&oe||(this._active&&q.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Gl(P,u,x){for(let I=0;I<P.length;I++)if(P[I].identifier===x)return u[I]}function no(P,u){return Math.log(P/u)/Math.LN2}class wi extends Vl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,x){const I=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(no(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:no(this._distance,I),pinchAround:x}}}function Xs(P,u){return 180*P.angleWith(u)/Math.PI}class Zc extends Vl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,x){const I=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xs(this._vector,I),pinchAround:x}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const x=25/(Math.PI*this._minDiameter)*360,I=Xs(u,this._startVector);return Math.abs(I)<x}}function Uh(P){return Math.abs(P.y)>Math.abs(P.x)}class qc extends Vl{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,x,I){super.touchstart(u,x,I),this._currentTouchCount=I.length}_start(u){this._lastPoints=u,Uh(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,x,I){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const F=u[0].sub(this._lastPoints[0]),j=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(F,j,I.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(F.y+j.y)/2*-.5}):void 0}gestureBeginsVertically(u,x,I){if(this._valid!==void 0)return this._valid;const F=u.mag()>=2,j=x.mag()>=2;if(!F&&!j)return;if(!F||!j)return this._firstMove===void 0&&(this._firstMove=I),I-this._firstMove<100&&void 0;const N=u.y>0==x.y>0;return Uh(u)&&Uh(x)&&N}}const Ka={panStep:100,bearingStep:15,pitchStep:10};class Xc{constructor(){const u=Ka;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let x=0,I=0,F=0,j=0,N=0;switch(u.keyCode){case 61:case 107:case 171:case 187:x=1;break;case 189:case 109:case 173:x=-1;break;case 37:u.shiftKey?I=-1:(u.preventDefault(),j=-1);break;case 39:u.shiftKey?I=1:(u.preventDefault(),j=1);break;case 38:u.shiftKey?F=1:(u.preventDefault(),N=-1);break;case 40:u.shiftKey?F=-1:(u.preventDefault(),N=1);break;default:return}return this._rotationDisabled&&(I=0,F=0),{cameraAnimation:oe=>{const ae=oe.getZoom();oe.easeTo({duration:300,easeId:"keyboardHandler",easing:Wl,zoom:x?Math.round(ae)+x*(u.shiftKey?2:1):ae,bearing:oe.getBearing()+I*this._bearingStep,pitch:oe.getPitch()+F*this._pitchStep,offset:[-j*this._panStep,-N*this._panStep],center:oe.getCenter()},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Wl(P){return P*(2-P)}const qr=4.000244140625;class xu{constructor(u,x){this._map=u,this._el=u.getCanvasContainer(),this._handler=x,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,h.bindAll(["_onTimeout"],this)}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;u.preventDefault()}let x=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const I=h.exported.now(),F=I-(this._lastWheelEventTime||0);this._lastWheelEventTime=I,x!==0&&x%qr==0?this._type="wheel":x!==0&&Math.abs(x)<4?this._type="trackpad":F>400?(this._type=null,this._lastValue=x,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(F*x)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,x+=this._lastValue)),u.shiftKey&&x&&(x/=4),this._type&&(this._lastWheelEvent=u,this._delta-=x,this._active||this._start(u)),u.preventDefault()}_onTimeout(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const x=q.mousePos(this._el,u);this._around=h.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(x)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._map.transform;if(this._delta!==0){const oe=this._type==="wheel"&&Math.abs(this._delta)>qr?this._wheelZoomRate:this._defaultZoomRate;let ae=2/(1+Math.exp(-Math.abs(this._delta*oe)));this._delta<0&&ae!==0&&(ae=1/ae);const me=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(me*ae))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const x=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,I=this._startZoom,F=this._easing;let j,N=!1;if(this._type==="wheel"&&I&&F){const oe=Math.min((h.exported.now()-this._lastWheelEventTime)/200,1),ae=F(oe);j=h.number(I,x,ae),oe<1?this._frameId||(this._frameId=!0):N=!0}else j=x,N=!0;return this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!N,zoomDelta:j-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let x=h.ease;if(this._prevEase){const I=this._prevEase,F=(h.exported.now()-I.start)/I.duration,j=I.easing(F+.01)-I.easing(F),N=.27/Math.sqrt(j*j+1e-4)*.01,oe=Math.sqrt(.0729-N*N);x=h.bezier(N,oe,.25,1)}return this._prevEase={start:h.exported.now(),duration:u,easing:x},x}reset(){this._active=!1}}class Sc{constructor(u,x){this._clickZoom=u,this._tapZoom=x}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class uc{constructor(){this.reset()}reset(){this._active=!1}dblclick(u,x){return u.preventDefault(),{cameraAnimation:I=>{I.easeTo({duration:300,zoom:I.getZoom()+(u.shiftKey?-1:1),around:I.unproject(x)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ic{constructor(){this._tap=new qs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(u,x,I){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?I.length>0&&(this._swipePoint=x[0],this._swipeTouch=I[0].identifier):this._tap.touchstart(u,x,I))}touchmove(u,x,I){if(this._tapTime){if(this._swipePoint){if(I[0].identifier!==this._swipeTouch)return;const F=x[0],j=F.y-this._swipePoint.y;return this._swipePoint=F,u.preventDefault(),this._active=!0,{zoomDelta:j/128}}}else this._tap.touchmove(u,x,I)}touchend(u,x,I){this._tapTime?this._swipePoint&&I.length===0&&this.reset():this._tap.touchend(u,x,I)&&(this._tapTime=u.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class da{constructor(u,x,I){this._el=u,this._mousePan=x,this._touchPan=I}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Kl{constructor(u,x,I){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=x,this._mousePitch=I}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Za{constructor(u,x,I,F){this._el=u,this._touchZoom=x,this._touchRotate=I,this._tapDragZoom=F,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const cl=P=>P.zoom||P.drag||P.pitch||P.rotate;class Mc extends h.Event{}function hc(P){return P.panDelta&&P.panDelta.mag()||P.zoomDelta||P.bearingDelta||P.pitchDelta}class bu{constructor(u,x){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Kc(u),this._bearingSnap=x.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(x),h.bindAll(["handleEvent","handleWindowEvent"],this);const I=this._el;this._listeners=[[I,"touchstart",{passive:!0}],[I,"touchmove",{passive:!1}],[I,"touchend",void 0],[I,"touchcancel",void 0],[I,"mousedown",void 0],[I,"mousemove",void 0],[I,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[I,"mouseover",void 0],[I,"mouseout",void 0],[I,"dblclick",void 0],[I,"click",void 0],[I,"keydown",{capture:!1}],[I,"keyup",void 0],[I,"wheel",{passive:!1}],[I,"contextmenu",void 0],[window,"blur",void 0]];for(const[F,j,N]of this._listeners)q.addEventListener(F,j,F===document?this.handleWindowEvent:this.handleEvent,N)}destroy(){for(const[u,x,I]of this._listeners)q.removeEventListener(u,x,u===document?this.handleWindowEvent:this.handleEvent,I)}_addDefaultHandlers(u){const x=this._map,I=x.getCanvasContainer();this._add("mapEvent",new Dn(x,u));const F=x.boxZoom=new Ui(x,u);this._add("boxZoom",F);const j=new as,N=new uc;x.doubleClickZoom=new Sc(N,j),this._add("tapZoom",j),this._add("clickZoom",N);const oe=new Ic;this._add("tapDragZoom",oe);const ae=x.touchPitch=new qc(x);this._add("touchPitch",ae);const me=new Cl(u),ye=new Mi(u);x.dragRotate=new Kl(u,me,ye),this._add("mouseRotate",me,["mousePitch"]),this._add("mousePitch",ye,["mouseRotate"]);const Re=new ha(u),He=new Hl(u,x);x.dragPan=new da(I,Re,He),this._add("mousePan",Re),this._add("touchPan",He,["touchZoom","touchRotate"]);const gt=new Zc,dt=new wi;x.touchZoomRotate=new Za(I,dt,gt,oe),this._add("touchRotate",gt,["touchPan","touchZoom"]),this._add("touchZoom",dt,["touchPan","touchRotate"]);const pt=x.scrollZoom=new xu(x,this);this._add("scrollZoom",pt,["mousePan"]);const Ft=x.keyboard=new Xc;this._add("keyboard",Ft),this._add("blockableMapEvent",new wn(x));for(const Wt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])u.interactive&&u[Wt]&&x[Wt].enable(u[Wt])}_add(u,x,I){this._handlers.push({handlerName:u,handler:x,allowed:I}),this._handlersById[u]=x}stop(u){if(!this._updatingCamera){for(const{handler:x}of this._handlers)x.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!cl(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,x,I){for(const F in u)if(F!==I&&(!x||x.indexOf(F)<0))return!0;return!1}handleWindowEvent(u){this.handleEvent(u,`${u.type}Window`)}_getMapTouches(u){const x=[];for(const I of u)this._el.contains(I.target)&&x.push(I);return x}handleEvent(u,x){if(u.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const I=u.type==="renderFrame"?void 0:u,F={needsRenderFrame:!1},j={},N={},oe=u.touches,ae=oe?this._getMapTouches(oe):void 0,me=ae?q.touchPos(this._el,ae):q.mousePos(this._el,u);for(const{handlerName:He,handler:gt,allowed:dt}of this._handlers){if(!gt.isEnabled())continue;let pt;this._blockedByActive(N,dt,He)?gt.reset():gt[x||u.type]&&(pt=gt[x||u.type](u,me,ae),this.mergeHandlerResult(F,j,pt,He,I),pt&&pt.needsRenderFrame&&this._triggerRenderFrame()),(pt||gt.isActive())&&(N[He]=gt)}const ye={};for(const He in this._previousActiveHandlers)N[He]||(ye[He]=I);this._previousActiveHandlers=N,(Object.keys(ye).length||hc(F))&&(this._changes.push([F,j,ye]),this._triggerRenderFrame()),(Object.keys(N).length||hc(F))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Re}=F;Re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Re(this._map))}mergeHandlerResult(u,x,I,F,j){if(!I)return;h.extend(u,I);const N={handlerName:F,originalEvent:I.originalEvent||j};I.zoomDelta!==void 0&&(x.zoom=N),I.panDelta!==void 0&&(x.drag=N),I.pitchDelta!==void 0&&(x.pitch=N),I.bearingDelta!==void 0&&(x.rotate=N)}_applyChanges(){const u={},x={},I={};for(const[F,j,N]of this._changes)F.panDelta&&(u.panDelta=(u.panDelta||new h.pointGeometry(0,0))._add(F.panDelta)),F.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+F.zoomDelta),F.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+F.bearingDelta),F.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+F.pitchDelta),F.around!==void 0&&(u.around=F.around),F.pinchAround!==void 0&&(u.pinchAround=F.pinchAround),F.noInertia&&(u.noInertia=F.noInertia),h.extend(x,j),h.extend(I,N);this._updateMapTransform(u,x,I),this._changes=[]}_updateMapTransform(u,x,I){const F=this._map,j=F.transform,N=F.style&&F.style.terrain;if(!(hc(u)||N&&this._drag))return this._fireEvents(x,I,!0);let{panDelta:oe,zoomDelta:ae,bearingDelta:me,pitchDelta:ye,around:Re,pinchAround:He}=u;He!==void 0&&(Re=He),F._stop(!0),Re=Re||F.transform.centerPoint;const gt=j.pointLocation(oe?Re.sub(oe):Re);me&&(j.bearing+=me),ye&&(j.pitch+=ye),ae&&(j.zoom+=ae),N?x.drag&&!this._drag?(this._drag={center:j.centerPoint,lngLat:j.pointLocation(Re),point:Re,handlerName:x.drag.handlerName},F.fire(new h.Event("freezeElevation",{freeze:!0}))):this._drag&&I[this._drag.handlerName]?(F.fire(new h.Event("freezeElevation",{freeze:!1})),this._drag=null):x.drag&&this._drag&&(j.center=j.pointLocation(j.centerPoint.sub(oe))):j.setLocationAtPoint(gt,Re),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(x,I,!0)}_fireEvents(u,x,I){const F=cl(this._eventsInProgress),j=cl(u),N={};for(const ye in u){const{originalEvent:Re}=u[ye];this._eventsInProgress[ye]||(N[`${ye}start`]=Re),this._eventsInProgress[ye]=u[ye]}!F&&j&&this._fireEvent("movestart",j.originalEvent);for(const ye in N)this._fireEvent(ye,N[ye]);j&&this._fireEvent("move",j.originalEvent);for(const ye in u){const{originalEvent:Re}=u[ye];this._fireEvent(ye,Re)}const oe={};let ae;for(const ye in this._eventsInProgress){const{handlerName:Re,originalEvent:He}=this._eventsInProgress[ye];this._handlersById[Re].isActive()||(delete this._eventsInProgress[ye],ae=x[Re]||He,oe[`${ye}end`]=ae)}for(const ye in oe)this._fireEvent(ye,oe[ye]);const me=cl(this._eventsInProgress);if(I&&(F||j)&&!me){this._updatingCamera=!0;const ye=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Re=He=>He!==0&&-this._bearingSnap<He&&He<this._bearingSnap;ye?(Re(ye.bearing||this._map.getBearing())&&(ye.bearing=0),this._map.easeTo(ye,{originalEvent:ae})):(this._map.fire(new h.Event("moveend",{originalEvent:ae})),Re(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(u,x){this._map.fire(new h.Event(u,x?{originalEvent:x}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new Mc("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const ul={extend:(P,...u)=>h.extend(P,...u),run(P){P()},logToElement(P,u=!1,x="log"){const I=window.document.getElementById(x);I&&(u&&(I.innerHTML=""),I.innerHTML+=`<br>${P}`)}};class Oo extends h.Evented{constructor(u,x){super(),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=x.bearingSnap,h.bindAll(["_renderFrameCallback"],this)}getCenter(){return new h.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,x){return this.jumpTo({center:u},x)}panBy(u,x,I){return u=h.pointGeometry.convert(u).mult(-1),this.panTo(this.transform.center,h.extend({offset:u},x),I)}panTo(u,x,I){return this.easeTo(h.extend({center:u},x),I)}getZoom(){return this.transform.zoom}setZoom(u,x){return this.jumpTo({zoom:u},x),this}zoomTo(u,x,I){return this.easeTo(h.extend({zoom:u},x),I)}zoomIn(u,x){return this.zoomTo(this.getZoom()+1,u,x),this}zoomOut(u,x){return this.zoomTo(this.getZoom()-1,u,x),this}getBearing(){return this.transform.bearing}setBearing(u,x){return this.jumpTo({bearing:u},x),this}getPadding(){return this.transform.padding}setPadding(u,x){return this.jumpTo({padding:u},x),this}rotateTo(u,x,I){return this.easeTo(h.extend({bearing:u},x),I)}resetNorth(u,x){return this.rotateTo(0,h.extend({duration:1e3},u),x),this}resetNorthPitch(u,x){return this.easeTo(h.extend({bearing:0,pitch:0,duration:1e3},u),x),this}snapToNorth(u,x){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,x):this}getPitch(){return this.transform.pitch}setPitch(u,x){return this.jumpTo({pitch:u},x),this}cameraForBounds(u,x){u=h.LngLatBounds.convert(u);const I=x&&x.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),I,x)}_cameraForBoxAndBearing(u,x,I,F){const j={top:0,bottom:0,right:0,left:0};if(typeof(F=h.extend({padding:j,offset:[0,0],maxZoom:this.transform.maxZoom},F)).padding=="number"){const tn=F.padding;F.padding={top:tn,bottom:tn,right:tn,left:tn}}F.padding=h.extend(j,F.padding);const N=this.transform,oe=N.padding,ae=N.project(h.LngLat.convert(u)),me=N.project(h.LngLat.convert(x)),ye=ae.rotate(-I*Math.PI/180),Re=me.rotate(-I*Math.PI/180),He=new h.pointGeometry(Math.max(ye.x,Re.x),Math.max(ye.y,Re.y)),gt=new h.pointGeometry(Math.min(ye.x,Re.x),Math.min(ye.y,Re.y)),dt=He.sub(gt),pt=(N.width-(oe.left+oe.right+F.padding.left+F.padding.right))/dt.x,Ft=(N.height-(oe.top+oe.bottom+F.padding.top+F.padding.bottom))/dt.y;if(Ft<0||pt<0)return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Wt=Math.min(N.scaleZoom(N.scale*Math.min(pt,Ft)),F.maxZoom),on=h.pointGeometry.convert(F.offset),bt=new h.pointGeometry((F.padding.left-F.padding.right)/2,(F.padding.top-F.padding.bottom)/2).rotate(I*Math.PI/180),un=on.add(bt).mult(N.scale/N.zoomScale(Wt));return{center:N.unproject(ae.add(me).div(2).sub(un)),zoom:Wt,bearing:I}}fitBounds(u,x,I){return this._fitInternal(this.cameraForBounds(u,x),x,I)}fitScreenCoordinates(u,x,I,F,j){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(h.pointGeometry.convert(u)),this.transform.pointLocation(h.pointGeometry.convert(x)),I,F),F,j)}_fitInternal(u,x,I){return u?(delete(x=h.extend(u,x)).padding,x.linear?this.easeTo(x,I):this.flyTo(x,I)):this}jumpTo(u,x){this.stop();const I=this.transform;let F=!1,j=!1,N=!1;return"zoom"in u&&I.zoom!==+u.zoom&&(F=!0,I.zoom=+u.zoom),u.center!==void 0&&(I.center=h.LngLat.convert(u.center)),"bearing"in u&&I.bearing!==+u.bearing&&(j=!0,I.bearing=+u.bearing),"pitch"in u&&I.pitch!==+u.pitch&&(N=!0,I.pitch=+u.pitch),u.padding==null||I.isPaddingEqual(u.padding)||(I.padding=u.padding),this.fire(new h.Event("movestart",x)).fire(new h.Event("move",x)),F&&this.fire(new h.Event("zoomstart",x)).fire(new h.Event("zoom",x)).fire(new h.Event("zoomend",x)),j&&this.fire(new h.Event("rotatestart",x)).fire(new h.Event("rotate",x)).fire(new h.Event("rotateend",x)),N&&this.fire(new h.Event("pitchstart",x)).fire(new h.Event("pitch",x)).fire(new h.Event("pitchend",x)),this.fire(new h.Event("moveend",x))}calculateCameraOptionsFromTo(u,x,I,F=0){const j=h.MercatorCoordinate.fromLngLat(u,x),N=h.MercatorCoordinate.fromLngLat(I,F),oe=N.x-j.x,ae=N.y-j.y,me=N.z-j.z,ye=Math.hypot(oe,ae,me);if(ye===0)throw new Error("Can't calculate camera options with same From and To");const Re=Math.hypot(oe,ae),He=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ye/this.transform.tileSize),gt=180*Math.atan2(oe,-ae)/Math.PI;let dt=180*Math.acos(Re/ye)/Math.PI;return dt=me<0?90-dt:90+dt,{center:N.toLngLat(),zoom:He,pitch:dt,bearing:gt}}easeTo(u,x){this._stop(!1,u.easeId),((u=h.extend({offset:[0,0],duration:500,easing:h.ease},u)).animate===!1||!u.essential&&h.exported.prefersReducedMotion)&&(u.duration=0);const I=this.transform,F=this.getZoom(),j=this.getBearing(),N=this.getPitch(),oe=this.getPadding(),ae="zoom"in u?+u.zoom:F,me="bearing"in u?this._normalizeBearing(u.bearing,j):j,ye="pitch"in u?+u.pitch:N,Re="padding"in u?u.padding:I.padding,He=h.pointGeometry.convert(u.offset);let gt=I.centerPoint.add(He);const dt=I.pointLocation(gt),pt=h.LngLat.convert(u.center||dt);this._normalizeCenter(pt);const Ft=I.project(dt),Wt=I.project(pt).sub(Ft),on=I.zoomScale(ae-F);let bt,un;u.around&&(bt=h.LngLat.convert(u.around),un=I.locationPoint(bt));const tn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ae!==F,this._rotating=this._rotating||j!==me,this._pitching=this._pitching||ye!==N,this._padding=!I.isPaddingEqual(Re),this._easeId=u.easeId,this._prepareEase(x,u.noMoveStart,tn),this._ease(In=>{if(this._zooming&&(I.zoom=h.number(F,ae,In)),this._rotating&&(I.bearing=h.number(j,me,In)),this._pitching&&(I.pitch=h.number(N,ye,In)),this._padding&&(I.interpolatePadding(oe,Re,In),gt=I.centerPoint.add(He)),bt)I.setLocationAtPoint(bt,un);else{const kn=I.zoomScale(I.zoom-F),Kn=ae>F?Math.min(2,on):Math.max(.5,on),xn=Math.pow(Kn,1-In),pi=I.unproject(Ft.add(Wt.mult(In*xn)).mult(kn));I.setLocationAtPoint(I.renderWorldCopies?pi.wrap():pi,gt)}this._fireMoveEvents(x)},In=>{this._afterEase(x,In)},u),this}_prepareEase(u,x,I={}){this._moving=!0,this.fire(new h.Event("freezeElevation",{freeze:!0})),x||I.moving||this.fire(new h.Event("movestart",u)),this._zooming&&!I.zooming&&this.fire(new h.Event("zoomstart",u)),this._rotating&&!I.rotating&&this.fire(new h.Event("rotatestart",u)),this._pitching&&!I.pitching&&this.fire(new h.Event("pitchstart",u))}_fireMoveEvents(u){this.fire(new h.Event("move",u)),this._zooming&&this.fire(new h.Event("zoom",u)),this._rotating&&this.fire(new h.Event("rotate",u)),this._pitching&&this.fire(new h.Event("pitch",u))}_afterEase(u,x){if(this._easeId&&x&&this._easeId===x)return;delete this._easeId,this.fire(new h.Event("freezeElevation",{freeze:!1}));const I=this._zooming,F=this._rotating,j=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,I&&this.fire(new h.Event("zoomend",u)),F&&this.fire(new h.Event("rotateend",u)),j&&this.fire(new h.Event("pitchend",u)),this.fire(new h.Event("moveend",u))}flyTo(u,x){if(!u.essential&&h.exported.prefersReducedMotion){const or=h.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(or,x)}this.stop(),u=h.extend({offset:[0,0],speed:1.2,curve:1.42,easing:h.ease},u);const I=this.transform,F=this.getZoom(),j=this.getBearing(),N=this.getPitch(),oe=this.getPadding(),ae="zoom"in u?h.clamp(+u.zoom,I.minZoom,I.maxZoom):F,me="bearing"in u?this._normalizeBearing(u.bearing,j):j,ye="pitch"in u?+u.pitch:N,Re="padding"in u?u.padding:I.padding,He=I.zoomScale(ae-F),gt=h.pointGeometry.convert(u.offset);let dt=I.centerPoint.add(gt);const pt=I.pointLocation(dt),Ft=h.LngLat.convert(u.center||pt);this._normalizeCenter(Ft);const Wt=I.project(pt),on=I.project(Ft).sub(Wt);let bt=u.curve;const un=Math.max(I.width,I.height),tn=un/He,In=on.mag();if("minZoom"in u){const or=h.clamp(Math.min(u.minZoom,F,ae),I.minZoom,I.maxZoom),mo=un/I.zoomScale(or-F);bt=Math.sqrt(mo/In*2)}const kn=bt*bt;function Kn(or){const mo=(tn*tn-un*un+(or?-1:1)*kn*kn*In*In)/(2*(or?tn:un)*kn*In);return Math.log(Math.sqrt(mo*mo+1)-mo)}function xn(or){return(Math.exp(or)-Math.exp(-or))/2}function pi(or){return(Math.exp(or)+Math.exp(-or))/2}const vi=Kn(0);let yn=function(or){return pi(vi)/pi(vi+bt*or)},Nr=function(or){return un*((pi(vi)*(xn(mo=vi+bt*or)/pi(mo))-xn(vi))/kn)/In;var mo},io=(Kn(1)-vi)/bt;if(Math.abs(In)<1e-6||!isFinite(io)){if(Math.abs(un-tn)<1e-6)return this.easeTo(u,x);const or=tn<un?-1:1;io=Math.abs(Math.log(tn/un))/bt,Nr=function(){return 0},yn=function(mo){return Math.exp(or*bt*mo)}}return u.duration="duration"in u?+u.duration:1e3*io/("screenSpeed"in u?+u.screenSpeed/bt:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=j!==me,this._pitching=ye!==N,this._padding=!I.isPaddingEqual(Re),this._prepareEase(x,!1),this._ease(or=>{const mo=or*io,qn=1/yn(mo);I.zoom=or===1?ae:F+I.scaleZoom(qn),this._rotating&&(I.bearing=h.number(j,me,or)),this._pitching&&(I.pitch=h.number(N,ye,or)),this._padding&&(I.interpolatePadding(oe,Re,or),dt=I.centerPoint.add(gt));const Po=or===1?Ft:I.unproject(Wt.add(on.mult(Nr(mo))).mult(qn));I.setLocationAtPoint(I.renderWorldCopies?Po.wrap():Po,dt),this._fireMoveEvents(x)},()=>this._afterEase(x),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,x){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const I=this._onEaseEnd;delete this._onEaseEnd,I.call(this,x)}if(!u){const I=this.handlers;I&&I.stop(!1)}return this}_ease(u,x,I){I.animate===!1||I.duration===0?(u(1),x()):(this._easeStart=h.exported.now(),this._easeOptions=I,this._onEaseFrame=u,this._onEaseEnd=x,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const u=Math.min((h.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(u,x){u=h.wrap(u,-180,180);const I=Math.abs(u-x);return Math.abs(u-360-x)<I&&(u-=360),Math.abs(u+360-x)<I&&(u+=360),u}_normalizeCenter(u){const x=this.transform;if(!x.renderWorldCopies||x.lngRange)return;const I=u.lng-x.center.lng;u.lng+=I>180?-360:I<-180?360:0}}class Bl{constructor(u={}){this.options=u,h.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options&&this.options.compact,this._container=q.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=q.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=q.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){q.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,x){const I=this._map._getUIString(`AttributionControl.${x}`);u.title=I,u.setAttribute("aria-label",I)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(F=>typeof F!="string"?"":F)):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const F=this._map.style.stylesheet;this.styleOwner=F.owner,this.styleId=F.id}const x=this._map.style.sourceCaches;for(const F in x){const j=x[F];if(j.used||j.usedForTerrain){const N=j.getSource();N.attribution&&u.indexOf(N.attribution)<0&&u.push(N.attribution)}}u=u.filter(F=>String(F).trim()),u.sort((F,j)=>F.length-j.length),u=u.filter((F,j)=>{for(let N=j+1;N<u.length;N++)if(u[N].indexOf(F)>=0)return!1;return!0});const I=u.join(" | ");I!==this._attribHTML&&(this._attribHTML=I,u.length?(this._innerContainer.innerHTML=I,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Yc{constructor(u={}){this.options=u,h.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=q.create("div","maplibregl-ctrl mapboxgl-ctrl");const x=q.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return x.target="_blank",x.rel="noopener nofollow",x.href="https://maplibre.org/",x.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),x.setAttribute("rel","noopener nofollow"),this._container.appendChild(x),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){q.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const u=this._container.children;if(u.length){const x=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&x.classList.add("maplibregl-compact","mapboxgl-compact"):x.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class _{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const x=++this._id;return this._queue.push({callback:u,id:x,cancelled:!1}),x}remove(u){const x=this._currentlyRunning,I=x?this._queue.concat(x):this._queue;for(const F of I)if(F.id===u)return void(F.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const x=this._currentlyRunning=this._queue;this._queue=[];for(const I of x)if(!I.cancelled&&(I.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const E={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},G={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},ne={showCompass:!0,showZoom:!0,visualizePitch:!1};class ge{constructor(u,x,I=!1){this._clickTolerance=10,this.element=x,this.mouseRotate=new Cl({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,I&&(this.mousePitch=new Mi({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),h.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),q.addEventListener(x,"mousedown",this.mousedown),q.addEventListener(x,"touchstart",this.touchstart,{passive:!1}),q.addEventListener(x,"touchmove",this.touchmove),q.addEventListener(x,"touchend",this.touchend),q.addEventListener(x,"touchcancel",this.reset)}down(u,x){this.mouseRotate.mousedown(u,x),this.mousePitch&&this.mousePitch.mousedown(u,x),q.disableDrag()}move(u,x){const I=this.map,F=this.mouseRotate.mousemoveWindow(u,x);if(F&&F.bearingDelta&&I.setBearing(I.getBearing()+F.bearingDelta),this.mousePitch){const j=this.mousePitch.mousemoveWindow(u,x);j&&j.pitchDelta&&I.setPitch(I.getPitch()+j.pitchDelta)}}off(){const u=this.element;q.removeEventListener(u,"mousedown",this.mousedown),q.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),q.removeEventListener(u,"touchmove",this.touchmove),q.removeEventListener(u,"touchend",this.touchend),q.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){q.enableDrag(),q.removeEventListener(window,"mousemove",this.mousemove),q.removeEventListener(window,"mouseup",this.mouseup)}mousedown(u){this.down(h.extend({},u,{ctrlKey:!0,preventDefault:()=>u.preventDefault()}),q.mousePos(this.element,u)),q.addEventListener(window,"mousemove",this.mousemove),q.addEventListener(window,"mouseup",this.mouseup)}mousemove(u){this.move(u,q.mousePos(this.element,u))}mouseup(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()}touchstart(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=q.touchPos(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>u.preventDefault()},this._startPos))}touchmove(u){u.targetTouches.length!==1?this.reset():(this._lastPos=q.touchPos(this.element,u.targetTouches)[0],this.move({preventDefault:()=>u.preventDefault()},this._lastPos))}touchend(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Ne(P,u,x){if(P=new h.LngLat(P.lng,P.lat),u){const I=new h.LngLat(P.lng-360,P.lat),F=new h.LngLat(P.lng+360,P.lat),j=x.locationPoint(P).distSqr(u);x.locationPoint(I).distSqr(u)<j?P=I:x.locationPoint(F).distSqr(u)<j&&(P=F)}for(;Math.abs(P.lng-x.center.lng)>180;){const I=x.locationPoint(P);if(I.x>=0&&I.y>=0&&I.x<=x.width&&I.y<=x.height)break;P.lng>x.center.lng?P.lng-=360:P.lng+=360}return P}const at={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Dt(P,u,x){const I=P.classList;for(const F in at)I.remove(`maplibregl-${x}-anchor-${F}`,`mapboxgl-${x}-anchor-${F}`);I.add(`maplibregl-${x}-anchor-${u}`,`mapboxgl-${x}-anchor-${u}`)}class _n extends h.Evented{constructor(u,x){if(super(),(u instanceof HTMLElement||x)&&(u=h.extend({element:u},x)),h.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=h.pointGeometry.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=q.create("div"),this._element.setAttribute("aria-label","Map marker");const I=q.createNS("http://www.w3.org/2000/svg","svg"),F=41,j=27;I.setAttributeNS(null,"display","block"),I.setAttributeNS(null,"height",`${F}px`),I.setAttributeNS(null,"width",`${j}px`),I.setAttributeNS(null,"viewBox",`0 0 ${j} ${F}`);const N=q.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"stroke","none"),N.setAttributeNS(null,"stroke-width","1"),N.setAttributeNS(null,"fill","none"),N.setAttributeNS(null,"fill-rule","evenodd");const oe=q.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"fill-rule","nonzero");const ae=q.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ae.setAttributeNS(null,"fill","#000000");const me=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const on of me){const bt=q.createNS("http://www.w3.org/2000/svg","ellipse");bt.setAttributeNS(null,"opacity","0.04"),bt.setAttributeNS(null,"cx","10.5"),bt.setAttributeNS(null,"cy","5.80029008"),bt.setAttributeNS(null,"rx",on.rx),bt.setAttributeNS(null,"ry",on.ry),ae.appendChild(bt)}const ye=q.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"fill",this._color);const Re=q.createNS("http://www.w3.org/2000/svg","path");Re.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ye.appendChild(Re);const He=q.createNS("http://www.w3.org/2000/svg","g");He.setAttributeNS(null,"opacity","0.25"),He.setAttributeNS(null,"fill","#000000");const gt=q.createNS("http://www.w3.org/2000/svg","path");gt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),He.appendChild(gt);const dt=q.createNS("http://www.w3.org/2000/svg","g");dt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),dt.setAttributeNS(null,"fill","#FFFFFF");const pt=q.createNS("http://www.w3.org/2000/svg","g");pt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ft=q.createNS("http://www.w3.org/2000/svg","circle");Ft.setAttributeNS(null,"fill","#000000"),Ft.setAttributeNS(null,"opacity","0.25"),Ft.setAttributeNS(null,"cx","5.5"),Ft.setAttributeNS(null,"cy","5.5"),Ft.setAttributeNS(null,"r","5.4999962");const Wt=q.createNS("http://www.w3.org/2000/svg","circle");Wt.setAttributeNS(null,"fill","#FFFFFF"),Wt.setAttributeNS(null,"cx","5.5"),Wt.setAttributeNS(null,"cy","5.5"),Wt.setAttributeNS(null,"r","5.4999962"),pt.appendChild(Ft),pt.appendChild(Wt),oe.appendChild(ae),oe.appendChild(ye),oe.appendChild(He),oe.appendChild(dt),oe.appendChild(pt),I.appendChild(oe),I.setAttributeNS(null,"height",F*this._scale+"px"),I.setAttributeNS(null,"width",j*this._scale+"px"),this._element.appendChild(I),this._offset=h.pointGeometry.convert(u&&u.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",I=>{I.preventDefault()}),this._element.addEventListener("mousedown",I=>{I.preventDefault()}),Dt(this._element,this._anchor,"marker"),this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),q.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=h.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const F=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[F,-1*(38.1-13.5+F)],"bottom-right":[-F,-1*(38.1-13.5+F)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(u){const x=u.code,I=u.charCode||u.keyCode;x!=="Space"&&x!=="Enter"&&I!==32&&I!==13||this.togglePopup()}_onMapClick(u){const x=u.originalEvent.target,I=this._element;this._popup&&(x===I||I.contains(x))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this}_update(u){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Ne(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),q.setTransform(this._element,`${at[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${x}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const F=this._map.unproject(this._pos),j=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=F.distanceTo(this._lngLat)>20*j?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(u){return this._offset=h.pointGeometry.convert(u),this._update(),this}_onMove(u){if(!this._isDragging){const x=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=x}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new h.Event("dragstart"))),this.fire(new h.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new h.Event("dragend")),this._state="inactive"}_addDragHandler(u){this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const ni={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ti,Hi=0,kr=!1;const zo={maxWidth:100,unit:"metric"};function ws(P,u,x){const I=x&&x.maxWidth||100,F=P._container.clientHeight/2,j=P.unproject([0,F]),N=P.unproject([I,F]),oe=j.distanceTo(N);if(x&&x.unit==="imperial"){const ae=3.2808*oe;ae>5280?Ps(u,I,ae/5280,P._getUIString("ScaleControl.Miles")):Ps(u,I,ae,P._getUIString("ScaleControl.Feet"))}else x&&x.unit==="nautical"?Ps(u,I,oe/1852,P._getUIString("ScaleControl.NauticalMiles")):oe>=1e3?Ps(u,I,oe/1e3,P._getUIString("ScaleControl.Kilometers")):Ps(u,I,oe,P._getUIString("ScaleControl.Meters"))}function Ps(P,u,x,I){const F=function(j){const N=Math.pow(10,`${Math.floor(j)}`.length-1);let oe=j/N;return oe=oe>=10?10:oe>=5?5:oe>=3?3:oe>=2?2:oe>=1?1:function(ae){const me=Math.pow(10,Math.ceil(-Math.log(ae)/Math.LN10));return Math.round(ae*me)/me}(oe),N*oe}(x);P.style.width=u*(F/x)+"px",P.innerHTML=`${F}&nbsp;${I}`}const Lo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Uo=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function zh(P){if(P){if(typeof P=="number"){const u=Math.round(Math.sqrt(.5*Math.pow(P,2)));return{center:new h.pointGeometry(0,0),top:new h.pointGeometry(0,P),"top-left":new h.pointGeometry(u,u),"top-right":new h.pointGeometry(-u,u),bottom:new h.pointGeometry(0,-P),"bottom-left":new h.pointGeometry(u,-u),"bottom-right":new h.pointGeometry(-u,-u),left:new h.pointGeometry(P,0),right:new h.pointGeometry(-P,0)}}if(P instanceof h.pointGeometry||Array.isArray(P)){const u=h.pointGeometry.convert(P);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:h.pointGeometry.convert(P.center||[0,0]),top:h.pointGeometry.convert(P.top||[0,0]),"top-left":h.pointGeometry.convert(P["top-left"]||[0,0]),"top-right":h.pointGeometry.convert(P["top-right"]||[0,0]),bottom:h.pointGeometry.convert(P.bottom||[0,0]),"bottom-left":h.pointGeometry.convert(P["bottom-left"]||[0,0]),"bottom-right":h.pointGeometry.convert(P["bottom-right"]||[0,0]),left:h.pointGeometry.convert(P.left||[0,0]),right:h.pointGeometry.convert(P.right||[0,0])}}return zh(new h.pointGeometry(0,0))}const Jc={supported:s,setRTLTextPlugin:h.setRTLTextPlugin,getRTLTextPluginStatus:h.getRTLTextPluginStatus,Map:class extends Oo{constructor(P){var u;if(h.PerformanceUtils.mark(h.PerformanceMarkers.create),(P=h.extend({},G,P)).minZoom!=null&&P.maxZoom!=null&&P.minZoom>P.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(P.minPitch!=null&&P.maxPitch!=null&&P.minPitch>P.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(P.minPitch!=null&&P.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(P.maxPitch!=null&&P.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new $u(P.minZoom,P.maxZoom,P.minPitch,P.maxPitch,P.renderWorldCopies),{bearingSnap:P.bearingSnap}),this._interactive=P.interactive,this._cooperativeGestures=P.cooperativeGestures,this._maxTileCacheSize=P.maxTileCacheSize,this._failIfMajorPerformanceCaveat=P.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=P.preserveDrawingBuffer,this._antialias=P.antialias,this._trackResize=P.trackResize,this._bearingSnap=P.bearingSnap,this._refreshExpiredTiles=P.refreshExpiredTiles,this._fadeDuration=P.fadeDuration,this._crossSourceCollisions=P.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=P.collectResourceTiming,this._renderTaskQueue=new _,this._controls=[],this._mapId=h.uniqueId(),this._locale=h.extend({},E,P.locale),this._clickTolerance=P.clickTolerance,this._pixelRatio=(u=P.pixelRatio)!==null&&u!==void 0?u:devicePixelRatio,this._requestManager=new te(P.transformRequest),typeof P.container=="string"){if(this._container=document.getElementById(P.container),!this._container)throw new Error(`Container '${P.container}' not found.`)}else{if(!(P.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=P.container}if(P.maxBounds&&this.setMaxBounds(P.maxBounds),h.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new bu(this,P),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=P.hash&&new Tc(typeof P.hash=="string"&&P.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:P.center,zoom:P.zoom,bearing:P.bearing,pitch:P.pitch}),P.bounds&&(this.resize(),this.fitBounds(P.bounds,h.extend({},P.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=P.localIdeographFontFamily,P.style&&this.setStyle(P.style,{localIdeographFontFamily:P.localIdeographFontFamily}),P.attributionControl&&this.addControl(new Bl({customAttribution:P.customAttribution})),P.maplibreLogo&&this.addControl(new Yc,P.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",x=>{this._update(x.dataType==="style"),this.fire(new h.Event(`${x.dataType}data`,x))}),this.on("dataloading",x=>{this.fire(new h.Event(`${x.dataType}dataloading`,x))}),this.on("dataabort",x=>{this.fire(new h.Event("sourcedataabort",x))})}_getMapId(){return this._mapId}addControl(P,u){if(u===void 0&&(u=P.getDefaultPosition?P.getDefaultPosition():"top-right"),!P||!P.onAdd)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const x=P.onAdd(this);this._controls.push(P);const I=this._controlPositions[u];return u.indexOf("bottom")!==-1?I.insertBefore(x,I.firstChild):I.appendChild(x),this}removeControl(P){if(!P||!P.onRemove)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(P);return u>-1&&this._controls.splice(u,1),P.onRemove(this),this}hasControl(P){return this._controls.indexOf(P)>-1}calculateCameraOptionsFromTo(P,u,x,I){return I==null&&this.style.terrain&&(I=this.transform.getElevation(x,this.style.terrain)),super.calculateCameraOptionsFromTo(P,u,x,I)}resize(P){const u=this._containerDimensions(),x=u[0],I=u[1];this._resizeCanvas(x,I,this.getPixelRatio()),this.transform.resize(x,I),this.painter.resize(x,I,this.getPixelRatio());const F=!this._moving;return F&&(this.stop(),this.fire(new h.Event("movestart",P)).fire(new h.Event("move",P))),this.fire(new h.Event("resize",P)),F&&this.fire(new h.Event("moveend",P)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(P){const[u,x]=this._containerDimensions();this._pixelRatio=P,this._resizeCanvas(u,x,P),this.painter.resize(u,x,P)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(P){return this.transform.setMaxBounds(h.LngLatBounds.convert(P)),this._update()}setMinZoom(P){if((P=P??-2)>=-2&&P<=this.transform.maxZoom)return this.transform.minZoom=P,this._update(),this.getZoom()<P&&this.setZoom(P),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(P){if((P=P??22)>=this.transform.minZoom)return this.transform.maxZoom=P,this._update(),this.getZoom()>P&&this.setZoom(P),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(P){if((P=P??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(P>=0&&P<=this.transform.maxPitch)return this.transform.minPitch=P,this._update(),this.getPitch()<P&&this.setPitch(P),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(P){if((P=P??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(P>=this.transform.minPitch)return this.transform.maxPitch=P,this._update(),this.getPitch()>P&&this.setPitch(P),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(P){return this.transform.renderWorldCopies=P,this._update()}project(P){return this.transform.locationPoint(h.LngLat.convert(P),this.style&&this.style.terrain)}unproject(P){return this.transform.pointLocation(h.pointGeometry.convert(P),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(P,u,x){if(P==="mouseenter"||P==="mouseover"){let I=!1;return{layer:u,listener:x,delegates:{mousemove:j=>{const N=this.getLayer(u)?this.queryRenderedFeatures(j.point,{layers:[u]}):[];N.length?I||(I=!0,x.call(this,new xa(P,this,j.originalEvent,{features:N}))):I=!1},mouseout:()=>{I=!1}}}}if(P==="mouseleave"||P==="mouseout"){let I=!1;return{layer:u,listener:x,delegates:{mousemove:N=>{(this.getLayer(u)?this.queryRenderedFeatures(N.point,{layers:[u]}):[]).length?I=!0:I&&(I=!1,x.call(this,new xa(P,this,N.originalEvent)))},mouseout:N=>{I&&(I=!1,x.call(this,new xa(P,this,N.originalEvent)))}}}}{const I=F=>{const j=this.getLayer(u)?this.queryRenderedFeatures(F.point,{layers:[u]}):[];j.length&&(F.features=j,x.call(this,F),delete F.features)};return{layer:u,listener:x,delegates:{[P]:I}}}}on(P,u,x){if(x===void 0)return super.on(P,u);const I=this._createDelegatedListener(P,u,x);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[P]=this._delegatedListeners[P]||[],this._delegatedListeners[P].push(I);for(const F in I.delegates)this.on(F,I.delegates[F]);return this}once(P,u,x){if(x===void 0)return super.once(P,u);const I=this._createDelegatedListener(P,u,x);for(const F in I.delegates)this.once(F,I.delegates[F]);return this}off(P,u,x){return x===void 0?super.off(P,u):(this._delegatedListeners&&this._delegatedListeners[P]&&(I=>{const F=this._delegatedListeners[P];for(let j=0;j<F.length;j++){const N=F[j];if(N.layer===u&&N.listener===x){for(const oe in N.delegates)this.off(oe,N.delegates[oe]);return F.splice(j,1),this}}})(),this)}queryRenderedFeatures(P,u){if(!this.style)return[];let x;if(u!==void 0||P===void 0||P instanceof h.pointGeometry||Array.isArray(P)||(u=P,P=void 0),u=u||{},(P=P||[[0,0],[this.transform.width,this.transform.height]])instanceof h.pointGeometry||typeof P[0]=="number")x=[h.pointGeometry.convert(P)];else{const I=h.pointGeometry.convert(P[0]),F=h.pointGeometry.convert(P[1]);x=[I,new h.pointGeometry(F.x,I.y),F,new h.pointGeometry(I.x,F.y),I]}return this.style.queryRenderedFeatures(x,u,this.transform)}querySourceFeatures(P,u){return this.style.querySourceFeatures(P,u)}setStyle(P,u){return(u=h.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&P?(this._diffStyle(P,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(P,u))}setTransformRequest(P){return this._requestManager.setTransformRequest(P),this}_getUIString(P){const u=this._locale[P];if(u==null)throw new Error(`Missing UI string '${P}'`);return u}_updateStyle(P,u){return this.style&&(this.style.setEventedParent(null),this.style._remove()),P?(this.style=new hn(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof P=="string"?this.style.loadURL(P):this.style.loadJSON(P),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new hn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(P,u){if(typeof P=="string"){const x=this._requestManager.transformRequest(P,h.ResourceType.Style);h.getJSON(x,(I,F)=>{I?this.fire(new h.ErrorEvent(I)):F&&this._updateDiff(F,u)})}else typeof P=="object"&&this._updateDiff(P,u)}_updateDiff(P,u){try{this.style.setState(P)&&this._update(!0)}catch(x){h.warnOnce(`Unable to perform style diff: ${x.message||x.error||x}.  Rebuilding the style from scratch.`),this._updateStyle(P,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():h.warnOnce("There is no style added to the map.")}addSource(P,u){return this._lazyInitEmptyStyle(),this.style.addSource(P,u),this._update(!0)}isSourceLoaded(P){const u=this.style&&this.style.sourceCaches[P];if(u!==void 0)return u.loaded();this.fire(new h.ErrorEvent(new Error(`There is no source with ID '${P}'`)))}setTerrain(P){return this.style.setTerrain(P),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const P=this.style&&this.style.sourceCaches;for(const u in P){const x=P[u]._tiles;for(const I in x){const F=x[I];if(F.state!=="loaded"&&F.state!=="errored")return!1}}return!0}addSourceType(P,u,x){return this._lazyInitEmptyStyle(),this.style.addSourceType(P,u,x)}removeSource(P){return this.style.removeSource(P),this._update(!0)}getSource(P){return this.style.getSource(P)}addImage(P,u,{pixelRatio:x=1,sdf:I=!1,stretchX:F,stretchY:j,content:N}={}){if(this._lazyInitEmptyStyle(),u instanceof HTMLImageElement||h.isImageBitmap(u)){const{width:oe,height:ae,data:me}=h.exported.getImageData(u);this.style.addImage(P,{data:new h.RGBAImage({width:oe,height:ae},me),pixelRatio:x,stretchX:F,stretchY:j,content:N,sdf:I,version:0})}else{if(u.width===void 0||u.height===void 0)return this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:oe,height:ae,data:me}=u,ye=u;this.style.addImage(P,{data:new h.RGBAImage({width:oe,height:ae},new Uint8Array(me)),pixelRatio:x,stretchX:F,stretchY:j,content:N,sdf:I,version:0,userImage:ye}),ye.onAdd&&ye.onAdd(this,P)}}}updateImage(P,u){const x=this.style.getImage(P);if(!x)return this.fire(new h.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const I=u instanceof HTMLImageElement||h.isImageBitmap(u)?h.exported.getImageData(u):u,{width:F,height:j,data:N}=I;if(F===void 0||j===void 0)return this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(F!==x.data.width||j!==x.data.height)return this.fire(new h.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const oe=!(u instanceof HTMLImageElement||h.isImageBitmap(u));x.data.replace(N,oe),this.style.updateImage(P,x)}hasImage(P){return P?!!this.style.getImage(P):(this.fire(new h.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(P){this.style.removeImage(P)}loadImage(P,u){h.getImage(this._requestManager.transformRequest(P,h.ResourceType.Image),u)}listImages(){return this.style.listImages()}addLayer(P,u){return this._lazyInitEmptyStyle(),this.style.addLayer(P,u),this._update(!0)}moveLayer(P,u){return this.style.moveLayer(P,u),this._update(!0)}removeLayer(P){return this.style.removeLayer(P),this._update(!0)}getLayer(P){return this.style.getLayer(P)}setLayerZoomRange(P,u,x){return this.style.setLayerZoomRange(P,u,x),this._update(!0)}setFilter(P,u,x={}){return this.style.setFilter(P,u,x),this._update(!0)}getFilter(P){return this.style.getFilter(P)}setPaintProperty(P,u,x,I={}){return this.style.setPaintProperty(P,u,x,I),this._update(!0)}getPaintProperty(P,u){return this.style.getPaintProperty(P,u)}setLayoutProperty(P,u,x,I={}){return this.style.setLayoutProperty(P,u,x,I),this._update(!0)}getLayoutProperty(P,u){return this.style.getLayoutProperty(P,u)}setLight(P,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(P,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(P,u){return this.style.setFeatureState(P,u),this._update()}removeFeatureState(P,u){return this.style.removeFeatureState(P,u),this._update()}getFeatureState(P){return this.style.getFeatureState(P)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let P=0,u=0;return this._container&&(P=this._container.clientWidth||400,u=this._container.clientHeight||300),[P,u]}_setupContainer(){const P=this._container;P.classList.add("maplibregl-map","mapboxgl-map");const u=this._canvasContainer=q.create("div","maplibregl-canvas-container mapboxgl-canvas-container",P);this._interactive&&u.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=q.create("canvas","maplibregl-canvas mapboxgl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const x=this._containerDimensions();this._resizeCanvas(x[0],x[1],this.getPixelRatio());const I=this._controlContainer=q.create("div","maplibregl-control-container mapboxgl-control-container",P),F=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(j=>{F[j]=q.create("div",`maplibregl-ctrl-${j} mapboxgl-ctrl-${j}`,I)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const P=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=q.create("div","maplibregl-cooperative-gesture-screen",P);let u="Control",x=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(x=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",u="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${x}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",I=>{I.key===u&&(this._metaPress=!0)}),document.addEventListener("keyup",I=>{I.key===u&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",I=>{this._onCooperativeGesture(I,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(P,u,x){this._canvas.width=x*P,this._canvas.height=x*u,this._canvas.style.width=`${P}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const P=h.extend({},s.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),u=this._canvas.getContext("webgl",P)||this._canvas.getContext("experimental-webgl",P);u?(this.painter=new Gc(u,this.transform),h.exported$1.testSupport(u)):this.fire(new h.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(P){P.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new h.Event("webglcontextlost",{originalEvent:P}))}_contextRestored(P){this._setupPainter(),this.resize(),this._update(),this.fire(new h.Event("webglcontextrestored",{originalEvent:P}))}_onMapScroll(P){if(P.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(P,u,x){return!u&&x<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(P){return this.style?(this._styleDirty=this._styleDirty||P,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(P){return this._update(),this._renderTaskQueue.add(P)}_cancelRenderFrame(P){this._renderTaskQueue.remove(P)}_render(P){let u,x=0;const I=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(u=I.createQueryEXT(),I.beginQueryEXT(I.TIME_ELAPSED_EXT,u),x=h.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(P),this._removed)return;let F=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const N=this.transform.zoom,oe=h.exported.now();this.style.zoomHistory.update(N,oe);const ae=new h.EvaluationParameters(N,{now:oe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),me=ae.crossFadingFactor();me===1&&me===this._crossFadingFactor||(F=!0,this._crossFadingFactor=me),this.style.update(ae)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new h.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,h.PerformanceUtils.mark(h.PerformanceMarkers.load),this.fire(new h.Event("load"))),this.style&&(this.style.hasTransitions()||F)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const N=h.exported.now()-x;I.endQueryEXT(I.TIME_ELAPSED_EXT,u),setTimeout(()=>{const oe=I.getQueryObjectEXT(u,I.QUERY_RESULT_EXT)/1e6;I.deleteQueryEXT(u),this.fire(new h.Event("gpu-timing-frame",{cpuTime:N,gpuTime:oe}))},50)}if(this.listens("gpu-timing-layer")){const N=this.painter.collectGpuTimers();setTimeout(()=>{const oe=this.painter.queryGpuTimers(N);this.fire(new h.Event("gpu-timing-layer",{layerTimes:oe}))},50)}const j=this._sourcesDirty||this._styleDirty||this._placementDirty;return j||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new h.Event("idle")),!this._loaded||this._fullyLoaded||j||(this._fullyLoaded=!0,h.PerformanceUtils.mark(h.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const P=this.painter.context.gl.getExtension("WEBGL_lose_context");P&&P.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),q.remove(this._canvasContainer),q.remove(this._controlContainer),this._cooperativeGestures&&q.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),h.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new h.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=h.exported.frame(P=>{h.PerformanceUtils.frame(P),this._frame=null,this._render(P)}))}_onWindowOnline(){this._update()}_onWindowResize(P){this._trackResize&&this.resize({originalEvent:P})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(P){this._showTileBoundaries!==P&&(this._showTileBoundaries=P,this._update())}get showPadding(){return!!this._showPadding}set showPadding(P){this._showPadding!==P&&(this._showPadding=P,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(P){this._showCollisionBoxes!==P&&(this._showCollisionBoxes=P,P?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(P){this._showOverdrawInspector!==P&&(this._showOverdrawInspector=P,this._update())}get repaint(){return!!this._repaint}set repaint(P){this._repaint!==P&&(this._repaint=P,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(P){this._vertices=P,this._update()}_setCacheLimits(P,u){h.setCacheLimits(P,u)}get version(){return"2.4.0"}},NavigationControl:class{constructor(P){this.options=h.extend({},ne,P),this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(h.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(h.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const P=this._map.getZoom(),u=P===this._map.getMaxZoom(),x=P===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())}_rotateCompassArrow(){const P=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=P}onAdd(P){return this._map=P,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ge(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){q.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(P,u){const x=q.create("button",P,this._container);return x.type="button",x.addEventListener("click",u),x}_setButtonTitle(P,u){const x=this._map._getUIString(`NavigationControl.${u}`);P.title=x,P.setAttribute("aria-label",x)}},GeolocateControl:class extends h.Evented{constructor(P){super(),this.options=h.extend({},ni,P),h.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(P){var u;return this._map=P,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),u=this._setupUI,Ti!==void 0?u(Ti):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(x=>{Ti=x.state!=="denied",u(Ti)}):(Ti=!!window.navigator.geolocation,u(Ti)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),q.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Hi=0,kr=!1}_isOutOfMapMaxBounds(P){const u=this._map.getMaxBounds(),x=P.coords;return u&&(x.longitude<u.getWest()||x.longitude>u.getEast()||x.latitude<u.getSouth()||x.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(P){if(this._map){if(this._isOutOfMapMaxBounds(P))return this._setErrorState(),this.fire(new h.Event("outofmaxbounds",P)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=P,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(P),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(P),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new h.Event("geolocate",P)),this._finish()}}_updateCamera(P){const u=new h.LngLat(P.coords.longitude,P.coords.latitude),x=P.coords.accuracy,I=this._map.getBearing(),F=h.extend({bearing:I},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(x),F,{geolocateSource:!0})}_updateMarker(P){if(P){const u=new h.LngLat(P.coords.longitude,P.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=P.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const P=this._map._container.clientHeight/2,u=this._map.unproject([0,P]),x=this._map.unproject([1,P]),I=u.distanceTo(x),F=Math.ceil(2*this._accuracy/I);this._circleElement.style.width=`${F}px`,this._circleElement.style.height=`${F}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(P){if(this._map){if(this.options.trackUserLocation)if(P.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(P.code===3&&kr)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new h.Event("error",P)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(P){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=q.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",P===!1){h.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=q.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new _n(this._dotElement),this._circleElement=q.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new _n({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new h.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return h.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Hi--,kr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new h.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let P;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Hi++,Hi>1?(P={maximumAge:6e5,timeout:0},kr=!0):(P=this.options.positionOptions,kr=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,P)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Bl,LogoControl:Yc,ScaleControl:class{constructor(P){this.options=h.extend({},zo,P),h.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){ws(this._map,this._container,this.options)}onAdd(P){return this._map=P,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",P.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){q.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(P){this.options.unit=P,ws(this._map,this._container,this.options)}},FullscreenControl:class{constructor(P){this._fullscreen=!1,P&&P.container&&(P.container instanceof HTMLElement?this._container=P.container:h.warnOnce("Full screen control 'container' must be a DOM element.")),h.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(P){return this._map=P,this._container||(this._container=this._map.getContainer()),this._controlContainer=q.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",h.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){q.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const P=this._fullscreenButton=q.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",P).setAttribute("aria-hidden","true"),P.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const P=this._getTitle();this._fullscreenButton.setAttribute("aria-label",P),this._fullscreenButton.title=P}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(P){this.options=P,h.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(P){return this._map=P,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=q.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),q.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){q.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends h.Evented{constructor(P){super(),this.options=h.extend(Object.create(Lo),P),h.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(P){return this._map&&this.remove(),this._map=P,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new h.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&q.remove(this._content),this._container&&(q.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new h.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(P){return this._lngLat=h.LngLat.convert(P),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(P){return this.setDOMContent(document.createTextNode(P))}setHTML(P){const u=document.createDocumentFragment(),x=document.createElement("body");let I;for(x.innerHTML=P;I=x.firstChild,I;)u.appendChild(I);return this.setDOMContent(u)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(P){return this.options.maxWidth=P,this._update(),this}setDOMContent(P){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=q.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(P),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(P){this._container&&this._container.classList.add(P)}removeClassName(P){this._container&&this._container.classList.remove(P)}setOffset(P){return this.options.offset=P,this._update(),this}toggleClassName(P){if(this._container)return this._container.classList.toggle(P)}_createCloseButton(){this.options.closeButton&&(this._closeButton=q.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(P){this._update(P.point)}_onMouseMove(P){this._update(P.point)}_onDrag(P){this._update(P.point)}_update(P){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=q.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=q.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(j=>this._container.classList.add(j)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ne(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!P))return;const u=this._pos=this._trackPointer&&P?P:this._map.project(this._lngLat);let x=this.options.anchor;const I=zh(this.options.offset);if(!x){const j=this._container.offsetWidth,N=this._container.offsetHeight;let oe;oe=u.y+I.bottom.y<N?["top"]:u.y>this._map.transform.height-N?["bottom"]:[],u.x<j/2?oe.push("left"):u.x>this._map.transform.width-j/2&&oe.push("right"),x=oe.length===0?"bottom":oe.join("-")}const F=u.add(I[x]).round();q.setTransform(this._container,`${at[x]} translate(${F.x}px,${F.y}px)`),Dt(this._container,x,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const P=this._container.querySelector(Uo);P&&P.focus()}_onClose(){this.remove()}},Marker:_n,Style:hn,LngLat:h.LngLat,LngLatBounds:h.LngLatBounds,Point:h.pointGeometry,MercatorCoordinate:h.MercatorCoordinate,Evented:h.Evented,AJAXError:h.AJAXError,config:h.config,CanvasSource:Xn,GeoJSONSource:Rn,ImageSource:Cn,RasterDEMTileSource:Gt,RasterTileSource:Kt,VectorTileSource:Ut,VideoSource:Qt,prewarm:function(){di().acquire(li)},clearPrewarmedResources:function(){const P=ji;P&&(P.isPreloaded()&&P.numActive()===1?(P.release(li),ji=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Qi.workerCount},set workerCount(P){Qi.workerCount=P},get maxParallelImageRequests(){return h.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(P){h.config.MAX_PARALLEL_IMAGE_REQUESTS=P},clearStorage(P){h.clearTileCache(P)},workerUrl:"",addProtocol(P,u){h.config.REGISTERED_PROTOCOLS[P]=u},removeProtocol(P){delete h.config.REGISTERED_PROTOCOLS[P]}};return ul.extend(Jc,{isSafari:h.isSafari,getPerformanceMetrics:h.PerformanceUtils.getPerformanceMetrics}),Jc});var v=d;return v})})(UI);var CO=UI.exports;const BO=Sm(CO);var P1={};const TO=s1(LR);var zI={exports:{}};(function(e,t){(function(i,r){r(t)})(hu,function(i){var r=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(f){L.Util.setOptions(this,f),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var v=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,v?this._withAnimation:this._noAnimation),this._markerCluster=v?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(f){if(f instanceof L.LayerGroup)return this.addLayers([f]);if(!f.getLatLng)return this._nonPointGroup.addLayer(f),this.fire("layeradd",{layer:f}),this;if(!this._map)return this._needsClustering.push(f),this.fire("layeradd",{layer:f}),this;if(this.hasLayer(f))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(f,this._maxZoom),this.fire("layeradd",{layer:f}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var v=f,h=this._zoom;if(f.__parent)for(;v.__parent._zoom>=h;)v=v.__parent;return this._currentShownBounds.contains(v.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(f,v):this._animationAddLayerNonAnimated(f,v)),this},removeLayer:function(f){return f instanceof L.LayerGroup?this.removeLayers([f]):f.getLatLng?this._map?f.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(f)),this._removeLayer(f,!0),this.fire("layerremove",{layer:f}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),f.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(f)&&(this._featureGroup.removeLayer(f),f.clusterShow&&f.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,f)&&this.hasLayer(f)&&this._needsRemoving.push({layer:f,latlng:f._latlng}),this.fire("layerremove",{layer:f}),this):(this._nonPointGroup.removeLayer(f),this.fire("layerremove",{layer:f}),this)},addLayers:function(f,v){if(!L.Util.isArray(f))return this.addLayer(f);var h=this._featureGroup,s=this._nonPointGroup,U=this.options.chunkedLoading,$=this.options.chunkInterval,V=this.options.chunkProgress,q=f.length,te=0,he=!0,Ae;if(this._map){var De=new Date().getTime(),ke=L.bind(function(){var Te=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();te<q;te++){if(U&&te%200===0){var Ee=new Date().getTime()-Te;if(Ee>$)break}if(Ae=f[te],Ae instanceof L.LayerGroup){he&&(f=f.slice(),he=!1),this._extractNonGroupLayers(Ae,f),q=f.length;continue}if(!Ae.getLatLng){s.addLayer(Ae),v||this.fire("layeradd",{layer:Ae});continue}if(!this.hasLayer(Ae)&&(this._addLayer(Ae,this._maxZoom),v||this.fire("layeradd",{layer:Ae}),Ae.__parent&&Ae.__parent.getChildCount()===2)){var Fe=Ae.__parent.getAllChildMarkers(),Se=Fe[0]===Ae?Fe[1]:Fe[0];h.removeLayer(Se)}}V&&V(te,q,new Date().getTime()-De),te===q?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(ke,this.options.chunkDelay)},this);ke()}else for(var xe=this._needsClustering;te<q;te++){if(Ae=f[te],Ae instanceof L.LayerGroup){he&&(f=f.slice(),he=!1),this._extractNonGroupLayers(Ae,f),q=f.length;continue}if(!Ae.getLatLng){s.addLayer(Ae);continue}this.hasLayer(Ae)||xe.push(Ae)}return this},removeLayers:function(f){var v,h,s=f.length,U=this._featureGroup,$=this._nonPointGroup,V=!0;if(!this._map){for(v=0;v<s;v++){if(h=f[v],h instanceof L.LayerGroup){V&&(f=f.slice(),V=!1),this._extractNonGroupLayers(h,f),s=f.length;continue}this._arraySplice(this._needsClustering,h),$.removeLayer(h),this.hasLayer(h)&&this._needsRemoving.push({layer:h,latlng:h._latlng}),this.fire("layerremove",{layer:h})}return this}if(this._unspiderfy){this._unspiderfy();var q=f.slice(),te=s;for(v=0;v<te;v++){if(h=q[v],h instanceof L.LayerGroup){this._extractNonGroupLayers(h,q),te=q.length;continue}this._unspiderfyLayer(h)}}for(v=0;v<s;v++){if(h=f[v],h instanceof L.LayerGroup){V&&(f=f.slice(),V=!1),this._extractNonGroupLayers(h,f),s=f.length;continue}if(!h.__parent){$.removeLayer(h),this.fire("layerremove",{layer:h});continue}this._removeLayer(h,!0,!0),this.fire("layerremove",{layer:h}),U.hasLayer(h)&&(U.removeLayer(h),h.clusterShow&&h.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(f){f.off(this._childMarkerEventHandlers,this),delete f.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var f=new L.LatLngBounds;this._topClusterLevel&&f.extend(this._topClusterLevel._bounds);for(var v=this._needsClustering.length-1;v>=0;v--)f.extend(this._needsClustering[v].getLatLng());return f.extend(this._nonPointGroup.getBounds()),f},eachLayer:function(f,v){var h=this._needsClustering.slice(),s=this._needsRemoving,U,$,V;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(h),$=h.length-1;$>=0;$--){for(U=!0,V=s.length-1;V>=0;V--)if(s[V].layer===h[$]){U=!1;break}U&&f.call(v,h[$])}this._nonPointGroup.eachLayer(f,v)},getLayers:function(){var f=[];return this.eachLayer(function(v){f.push(v)}),f},getLayer:function(f){var v=null;return f=parseInt(f,10),this.eachLayer(function(h){L.stamp(h)===f&&(v=h)}),v},hasLayer:function(f){if(!f)return!1;var v,h=this._needsClustering;for(v=h.length-1;v>=0;v--)if(h[v]===f)return!0;for(h=this._needsRemoving,v=h.length-1;v>=0;v--)if(h[v].layer===f)return!1;return!!(f.__parent&&f.__parent._group===this)||this._nonPointGroup.hasLayer(f)},zoomToShowLayer:function(f,v){var h=this._map;typeof v!="function"&&(v=function(){});var s=function(){(h.hasLayer(f)||h.hasLayer(f.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",s,this),this.off("animationend",s,this),h.hasLayer(f)?v():f.__parent._icon&&(this.once("spiderfied",v,this),f.__parent.spiderfy()))};f._icon&&this._map.getBounds().contains(f.getLatLng())?v():f.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",s,this),this._map.panTo(f.getLatLng())):(this._map.on("moveend",s,this),this.on("animationend",s,this),f.__parent.zoomToBounds())},onAdd:function(f){this._map=f;var v,h,s;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(f),this._nonPointGroup.addTo(f),this._gridClusters||this._generateInitialClusters(),this._maxLat=f.options.crs.projection.MAX_LATITUDE,v=0,h=this._needsRemoving.length;v<h;v++)s=this._needsRemoving[v],s.newlatlng=s.layer._latlng,s.layer._latlng=s.latlng;for(v=0,h=this._needsRemoving.length;v<h;v++)s=this._needsRemoving[v],this._removeLayer(s.layer,!0),s.layer._latlng=s.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),h=this._needsClustering,this._needsClustering=[],this.addLayers(h,!0)},onRemove:function(f){f.off("zoomend",this._zoomEnd,this),f.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(f){for(var v=f;v&&!v._icon;)v=v.__parent;return v||null},_arraySplice:function(f,v){for(var h=f.length-1;h>=0;h--)if(f[h]===v)return f.splice(h,1),!0},_removeFromGridUnclustered:function(f,v){for(var h=this._map,s=this._gridUnclustered,U=Math.floor(this._map.getMinZoom());v>=U&&s[v].removeObject(f,h.project(f.getLatLng(),v));v--);},_childMarkerDragStart:function(f){f.target.__dragStart=f.target._latlng},_childMarkerMoved:function(f){if(!this._ignoreMove&&!f.target.__dragStart){var v=f.target._popup&&f.target._popup.isOpen();this._moveChild(f.target,f.oldLatLng,f.latlng),v&&f.target.openPopup()}},_moveChild:function(f,v,h){f._latlng=v,this.removeLayer(f),f._latlng=h,this.addLayer(f)},_childMarkerDragEnd:function(f){var v=f.target.__dragStart;delete f.target.__dragStart,v&&this._moveChild(f.target,v,f.target._latlng)},_removeLayer:function(f,v,h){var s=this._gridClusters,U=this._gridUnclustered,$=this._featureGroup,V=this._map,q=Math.floor(this._map.getMinZoom());v&&this._removeFromGridUnclustered(f,this._maxZoom);var te=f.__parent,he=te._markers,Ae;for(this._arraySplice(he,f);te&&(te._childCount--,te._boundsNeedUpdate=!0,!(te._zoom<q));)v&&te._childCount<=1?(Ae=te._markers[0]===f?te._markers[1]:te._markers[0],s[te._zoom].removeObject(te,V.project(te._cLatLng,te._zoom)),U[te._zoom].addObject(Ae,V.project(Ae.getLatLng(),te._zoom)),this._arraySplice(te.__parent._childClusters,te),te.__parent._markers.push(Ae),Ae.__parent=te.__parent,te._icon&&($.removeLayer(te),h||$.addLayer(Ae))):te._iconNeedsUpdate=!0,te=te.__parent;delete f.__parent},_isOrIsParent:function(f,v){for(;v;){if(f===v)return!0;v=v.parentNode}return!1},fire:function(f,v,h){if(v&&v.layer instanceof L.MarkerCluster){if(v.originalEvent&&this._isOrIsParent(v.layer._icon,v.originalEvent.relatedTarget))return;f="cluster"+f}L.FeatureGroup.prototype.fire.call(this,f,v,h)},listens:function(f,v){return L.FeatureGroup.prototype.listens.call(this,f,v)||L.FeatureGroup.prototype.listens.call(this,"cluster"+f,v)},_defaultIconCreateFunction:function(f){var v=f.getChildCount(),h=" marker-cluster-";return v<10?h+="small":v<100?h+="medium":h+="large",new L.DivIcon({html:"<div><span>"+v+"</span></div>",className:"marker-cluster"+h,iconSize:new L.Point(40,40)})},_bindEvents:function(){var f=this._map,v=this.options.spiderfyOnMaxZoom,h=this.options.showCoverageOnHover,s=this.options.zoomToBoundsOnClick,U=this.options.spiderfyOnEveryZoom;(v||s||U)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),h&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),f.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(f){var v=f.layer,h=v;if(!(f.type==="clusterkeypress"&&f.originalEvent&&f.originalEvent.keyCode!==13)){for(;h._childClusters.length===1;)h=h._childClusters[0];h._zoom===this._maxZoom&&h._childCount===v._childCount&&this.options.spiderfyOnMaxZoom?v.spiderfy():this.options.zoomToBoundsOnClick&&v.zoomToBounds(),this.options.spiderfyOnEveryZoom&&v.spiderfy(),f.originalEvent&&f.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(f){var v=this._map;this._inZoomAnimation||(this._shownPolygon&&v.removeLayer(this._shownPolygon),f.layer.getChildCount()>2&&f.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(f.layer.getConvexHull(),this.options.polygonOptions),v.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var f=this.options.spiderfyOnMaxZoom,v=this.options.showCoverageOnHover,h=this.options.zoomToBoundsOnClick,s=this.options.spiderfyOnEveryZoom,U=this._map;(f||h||s)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),v&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),U.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var f=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,f),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),f),this._currentShownBounds=f}},_generateInitialClusters:function(){var f=Math.ceil(this._map.getMaxZoom()),v=Math.floor(this._map.getMinZoom()),h=this.options.maxClusterRadius,s=h;typeof h!="function"&&(s=function(){return h}),this.options.disableClusteringAtZoom!==null&&(f=this.options.disableClusteringAtZoom-1),this._maxZoom=f,this._gridClusters={},this._gridUnclustered={};for(var U=f;U>=v;U--)this._gridClusters[U]=new L.DistanceGrid(s(U)),this._gridUnclustered[U]=new L.DistanceGrid(s(U));this._topClusterLevel=new this._markerCluster(this,v-1)},_addLayer:function(f,v){var h=this._gridClusters,s=this._gridUnclustered,U=Math.floor(this._map.getMinZoom()),$,V;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(f),f.on(this._childMarkerEventHandlers,this);v>=U;v--){$=this._map.project(f.getLatLng(),v);var q=h[v].getNearObject($);if(q){q._addChild(f),f.__parent=q;return}if(q=s[v].getNearObject($),q){var te=q.__parent;te&&this._removeLayer(q,!1);var he=new this._markerCluster(this,v,q,f);h[v].addObject(he,this._map.project(he._cLatLng,v)),q.__parent=he,f.__parent=he;var Ae=he;for(V=v-1;V>te._zoom;V--)Ae=new this._markerCluster(this,V,Ae),h[V].addObject(Ae,this._map.project(q.getLatLng(),V));te._addChild(Ae),this._removeFromGridUnclustered(q,v);return}s[v].addObject(f,$)}this._topClusterLevel._addChild(f),f.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(f){f instanceof L.MarkerCluster&&f._iconNeedsUpdate&&f._updateIcon()})},_enqueue:function(f){this._queue.push(f),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var f=0;f<this._queue.length;f++)this._queue[f].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var f=Math.round(this._map._zoom);this._processQueue(),this._zoom<f&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,f)):this._zoom>f?(this._animationStart(),this._animationZoomOut(this._zoom,f)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(f){var v=this._maxLat;return v!==void 0&&(f.getNorth()>=v&&(f._northEast.lat=1/0),f.getSouth()<=-v&&(f._southWest.lat=-1/0)),f},_animationAddLayerNonAnimated:function(f,v){if(v===f)this._featureGroup.addLayer(f);else if(v._childCount===2){v._addToMap();var h=v.getAllChildMarkers();this._featureGroup.removeLayer(h[0]),this._featureGroup.removeLayer(h[1])}else v._updateIcon()},_extractNonGroupLayers:function(f,v){var h=f.getLayers(),s=0,U;for(v=v||[];s<h.length;s++){if(U=h[s],U instanceof L.LayerGroup){this._extractNonGroupLayers(U,v);continue}v.push(U)}return v},_overrideMarkerIcon:function(f){var v=f.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[f]}});return v}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(f,v){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),f),this._topClusterLevel._recursivelyAddChildrenToMap(null,v,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(f,v){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),f),this._topClusterLevel._recursivelyAddChildrenToMap(null,v,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(f,v){this._animationAddLayerNonAnimated(f,v)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(f,v){var h=this._getExpandedVisibleBounds(),s=this._featureGroup,U=Math.floor(this._map.getMinZoom()),$;this._ignoreMove=!0,this._topClusterLevel._recursively(h,f,U,function(V){var q=V._latlng,te=V._markers,he;for(h.contains(q)||(q=null),V._isSingleParent()&&f+1===v?(s.removeLayer(V),V._recursivelyAddChildrenToMap(null,v,h)):(V.clusterHide(),V._recursivelyAddChildrenToMap(q,v,h)),$=te.length-1;$>=0;$--)he=te[$],h.contains(he._latlng)||s.removeLayer(he)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(h,v),s.eachLayer(function(V){!(V instanceof L.MarkerCluster)&&V._icon&&V.clusterShow()}),this._topClusterLevel._recursively(h,f,v,function(V){V._recursivelyRestoreChildPositions(v)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(h,f,U,function(V){s.removeLayer(V),V.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(f,v){this._animationZoomOutSingle(this._topClusterLevel,f-1,v),this._topClusterLevel._recursivelyAddChildrenToMap(null,v,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),f,this._getExpandedVisibleBounds())},_animationAddLayer:function(f,v){var h=this,s=this._featureGroup;s.addLayer(f),v!==f&&(v._childCount>2?(v._updateIcon(),this._forceLayout(),this._animationStart(),f._setPos(this._map.latLngToLayerPoint(v.getLatLng())),f.clusterHide(),this._enqueue(function(){s.removeLayer(f),f.clusterShow(),h._animationEnd()})):(this._forceLayout(),h._animationStart(),h._animationZoomOutSingle(v,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(f,v,h){var s=this._getExpandedVisibleBounds(),U=Math.floor(this._map.getMinZoom());f._recursivelyAnimateChildrenInAndAddSelfToMap(s,U,v+1,h);var $=this;this._forceLayout(),f._recursivelyBecomeVisible(s,h),this._enqueue(function(){if(f._childCount===1){var V=f._markers[0];this._ignoreMove=!0,V.setLatLng(V.getLatLng()),this._ignoreMove=!1,V.clusterShow&&V.clusterShow()}else f._recursively(s,h,U,function(q){q._recursivelyRemoveChildrenFromMap(s,U,v+1)});$._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(f){return new L.MarkerClusterGroup(f)};var d=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(f,v,h,s){L.Marker.prototype.initialize.call(this,h?h._cLatLng||h.getLatLng():new L.LatLng(0,0),{icon:this,pane:f.options.clusterPane}),this._group=f,this._zoom=v,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,h&&this._addChild(h),s&&this._addChild(s)},getAllChildMarkers:function(f,v){f=f||[];for(var h=this._childClusters.length-1;h>=0;h--)this._childClusters[h].getAllChildMarkers(f,v);for(var s=this._markers.length-1;s>=0;s--)v&&this._markers[s].__dragStart||f.push(this._markers[s]);return f},getChildCount:function(){return this._childCount},zoomToBounds:function(f){for(var v=this._childClusters.slice(),h=this._group._map,s=h.getBoundsZoom(this._bounds),U=this._zoom+1,$=h.getZoom(),V;v.length>0&&s>U;){U++;var q=[];for(V=0;V<v.length;V++)q=q.concat(v[V]._childClusters);v=q}s>U?this._group._map.setView(this._latlng,U):s<=$?this._group._map.setView(this._latlng,$+1):this._group._map.fitBounds(this._bounds,f)},getBounds:function(){var f=new L.LatLngBounds;return f.extend(this._bounds),f},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(f,v){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(f),f instanceof L.MarkerCluster?(v||(this._childClusters.push(f),f.__parent=this),this._childCount+=f._childCount):(v||this._markers.push(f),this._childCount++),this.__parent&&this.__parent._addChild(f,!0)},_setClusterCenter:function(f){this._cLatLng||(this._cLatLng=f._cLatLng||f._latlng)},_resetBounds:function(){var f=this._bounds;f._southWest&&(f._southWest.lat=1/0,f._southWest.lng=1/0),f._northEast&&(f._northEast.lat=-1/0,f._northEast.lng=-1/0)},_recalculateBounds:function(){var f=this._markers,v=this._childClusters,h=0,s=0,U=this._childCount,$,V,q,te;if(U!==0){for(this._resetBounds(),$=0;$<f.length;$++)q=f[$]._latlng,this._bounds.extend(q),h+=q.lat,s+=q.lng;for($=0;$<v.length;$++)V=v[$],V._boundsNeedUpdate&&V._recalculateBounds(),this._bounds.extend(V._bounds),q=V._wLatLng,te=V._childCount,h+=q.lat*te,s+=q.lng*te;this._latlng=this._wLatLng=new L.LatLng(h/U,s/U),this._boundsNeedUpdate=!1}},_addToMap:function(f){f&&(this._backupLatlng=this._latlng,this.setLatLng(f)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(f,v,h){this._recursively(f,this._group._map.getMinZoom(),h-1,function(s){var U=s._markers,$,V;for($=U.length-1;$>=0;$--)V=U[$],V._icon&&(V._setPos(v),V.clusterHide())},function(s){var U=s._childClusters,$,V;for($=U.length-1;$>=0;$--)V=U[$],V._icon&&(V._setPos(v),V.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(f,v,h,s){this._recursively(f,s,v,function(U){U._recursivelyAnimateChildrenIn(f,U._group._map.latLngToLayerPoint(U.getLatLng()).round(),h),U._isSingleParent()&&h-1===s?(U.clusterShow(),U._recursivelyRemoveChildrenFromMap(f,v,h)):U.clusterHide(),U._addToMap()})},_recursivelyBecomeVisible:function(f,v){this._recursively(f,this._group._map.getMinZoom(),v,null,function(h){h.clusterShow()})},_recursivelyAddChildrenToMap:function(f,v,h){this._recursively(h,this._group._map.getMinZoom()-1,v,function(s){if(v!==s._zoom)for(var U=s._markers.length-1;U>=0;U--){var $=s._markers[U];h.contains($._latlng)&&(f&&($._backupLatlng=$.getLatLng(),$.setLatLng(f),$.clusterHide&&$.clusterHide()),s._group._featureGroup.addLayer($))}},function(s){s._addToMap(f)})},_recursivelyRestoreChildPositions:function(f){for(var v=this._markers.length-1;v>=0;v--){var h=this._markers[v];h._backupLatlng&&(h.setLatLng(h._backupLatlng),delete h._backupLatlng)}if(f-1===this._zoom)for(var s=this._childClusters.length-1;s>=0;s--)this._childClusters[s]._restorePosition();else for(var U=this._childClusters.length-1;U>=0;U--)this._childClusters[U]._recursivelyRestoreChildPositions(f)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(f,v,h,s){var U,$;this._recursively(f,v-1,h-1,function(V){for($=V._markers.length-1;$>=0;$--)U=V._markers[$],(!s||!s.contains(U._latlng))&&(V._group._featureGroup.removeLayer(U),U.clusterShow&&U.clusterShow())},function(V){for($=V._childClusters.length-1;$>=0;$--)U=V._childClusters[$],(!s||!s.contains(U._latlng))&&(V._group._featureGroup.removeLayer(U),U.clusterShow&&U.clusterShow())})},_recursively:function(f,v,h,s,U){var $=this._childClusters,V=this._zoom,q,te;if(v<=V&&(s&&s(this),U&&V===h&&U(this)),V<v||V<h)for(q=$.length-1;q>=0;q--)te=$[q],te._boundsNeedUpdate&&te._recalculateBounds(),f.intersects(te._bounds)&&te._recursively(f,v,h,s,U)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var f=this.options.opacity;return this.setOpacity(0),this.options.opacity=f,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(f){this._cellSize=f,this._sqCellSize=f*f,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(f,v){var h=this._getCoord(v.x),s=this._getCoord(v.y),U=this._grid,$=U[s]=U[s]||{},V=$[h]=$[h]||[],q=L.Util.stamp(f);this._objectPoint[q]=v,V.push(f)},updateObject:function(f,v){this.removeObject(f),this.addObject(f,v)},removeObject:function(f,v){var h=this._getCoord(v.x),s=this._getCoord(v.y),U=this._grid,$=U[s]=U[s]||{},V=$[h]=$[h]||[],q,te;for(delete this._objectPoint[L.Util.stamp(f)],q=0,te=V.length;q<te;q++)if(V[q]===f)return V.splice(q,1),te===1&&delete $[h],!0},eachObject:function(f,v){var h,s,U,$,V,q,te,he=this._grid;for(h in he){V=he[h];for(s in V)for(q=V[s],U=0,$=q.length;U<$;U++)te=f.call(v,q[U]),te&&(U--,$--)}},getNearObject:function(f){var v=this._getCoord(f.x),h=this._getCoord(f.y),s,U,$,V,q,te,he,Ae,De=this._objectPoint,ke=this._sqCellSize,xe=null;for(s=h-1;s<=h+1;s++)if(V=this._grid[s],V){for(U=v-1;U<=v+1;U++)if(q=V[U],q)for($=0,te=q.length;$<te;$++)he=q[$],Ae=this._sqDist(De[L.Util.stamp(he)],f),(Ae<ke||Ae<=ke&&xe===null)&&(ke=Ae,xe=he)}return xe},_getCoord:function(f){var v=Math.floor(f/this._cellSize);return isFinite(v)?v:f},_sqDist:function(f,v){var h=v.x-f.x,s=v.y-f.y;return h*h+s*s}},function(){L.QuickHull={getDistant:function(f,v){var h=v[1].lat-v[0].lat,s=v[0].lng-v[1].lng;return s*(f.lat-v[0].lat)+h*(f.lng-v[0].lng)},findMostDistantPointFromBaseLine:function(f,v){var h=0,s=null,U=[],$,V,q;for($=v.length-1;$>=0;$--){if(V=v[$],q=this.getDistant(V,f),q>0)U.push(V);else continue;q>h&&(h=q,s=V)}return{maxPoint:s,newPoints:U}},buildConvexHull:function(f,v){var h=[],s=this.findMostDistantPointFromBaseLine(f,v);return s.maxPoint?(h=h.concat(this.buildConvexHull([f[0],s.maxPoint],s.newPoints)),h=h.concat(this.buildConvexHull([s.maxPoint,f[1]],s.newPoints)),h):[f[0]]},getConvexHull:function(f){var v=!1,h=!1,s=!1,U=!1,$=null,V=null,q=null,te=null,he=null,Ae=null,De;for(De=f.length-1;De>=0;De--){var ke=f[De];(v===!1||ke.lat>v)&&($=ke,v=ke.lat),(h===!1||ke.lat<h)&&(V=ke,h=ke.lat),(s===!1||ke.lng>s)&&(q=ke,s=ke.lng),(U===!1||ke.lng<U)&&(te=ke,U=ke.lng)}h!==v?(Ae=V,he=$):(Ae=te,he=q);var xe=[].concat(this.buildConvexHull([Ae,he],f),this.buildConvexHull([he,Ae],f));return xe}}}(),L.MarkerCluster.include({getConvexHull:function(){var f=this.getAllChildMarkers(),v=[],h,s;for(s=f.length-1;s>=0;s--)h=f[s].getLatLng(),v.push(h);return L.QuickHull.getConvexHull(v)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var f=this.getAllChildMarkers(null,!0),v=this._group,h=v._map,s=h.latLngToLayerPoint(this._latlng),U;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?U=this._group.options.spiderfyShapePositions(f.length,s):f.length>=this._circleSpiralSwitchover?U=this._generatePointsSpiral(f.length,s):(s.y+=10,U=this._generatePointsCircle(f.length,s)),this._animationSpiderfy(f,U)}},unspiderfy:function(f){this._group._inZoomAnimation||(this._animationUnspiderfy(f),this._group._spiderfied=null)},_generatePointsCircle:function(f,v){var h=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+f),s=h/this._2PI,U=this._2PI/f,$=[],V,q;for(s=Math.max(s,35),$.length=f,V=0;V<f;V++)q=this._circleStartAngle+V*U,$[V]=new L.Point(v.x+s*Math.cos(q),v.y+s*Math.sin(q))._round();return $},_generatePointsSpiral:function(f,v){var h=this._group.options.spiderfyDistanceMultiplier,s=h*this._spiralLengthStart,U=h*this._spiralFootSeparation,$=h*this._spiralLengthFactor*this._2PI,V=0,q=[],te;for(q.length=f,te=f;te>=0;te--)te<f&&(q[te]=new L.Point(v.x+s*Math.cos(V),v.y+s*Math.sin(V))._round()),V+=U/s+te*5e-4,s+=$/V;return q},_noanimationUnspiderfy:function(){var f=this._group,v=f._map,h=f._featureGroup,s=this.getAllChildMarkers(null,!0),U,$;for(f._ignoreMove=!0,this.setOpacity(1),$=s.length-1;$>=0;$--)U=s[$],h.removeLayer(U),U._preSpiderfyLatlng&&(U.setLatLng(U._preSpiderfyLatlng),delete U._preSpiderfyLatlng),U.setZIndexOffset&&U.setZIndexOffset(0),U._spiderLeg&&(v.removeLayer(U._spiderLeg),delete U._spiderLeg);f.fire("unspiderfied",{cluster:this,markers:s}),f._ignoreMove=!1,f._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(f,v){var h=this._group,s=h._map,U=h._featureGroup,$=this._group.options.spiderLegPolylineOptions,V,q,te,he;for(h._ignoreMove=!0,V=0;V<f.length;V++)he=s.layerPointToLatLng(v[V]),q=f[V],te=new L.Polyline([this._latlng,he],$),s.addLayer(te),q._spiderLeg=te,q._preSpiderfyLatlng=q._latlng,q.setLatLng(he),q.setZIndexOffset&&q.setZIndexOffset(1e6),U.addLayer(q);this.setOpacity(.3),h._ignoreMove=!1,h.fire("spiderfied",{cluster:this,markers:f})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(f,v){var h=this,s=this._group,U=s._map,$=s._featureGroup,V=this._latlng,q=U.latLngToLayerPoint(V),te=L.Path.SVG,he=L.extend({},this._group.options.spiderLegPolylineOptions),Ae=he.opacity,De,ke,xe,Te,Ee,Fe;for(Ae===void 0&&(Ae=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),te?(he.opacity=0,he.className=(he.className||"")+" leaflet-cluster-spider-leg"):he.opacity=Ae,s._ignoreMove=!0,De=0;De<f.length;De++)ke=f[De],Fe=U.layerPointToLatLng(v[De]),xe=new L.Polyline([V,Fe],he),U.addLayer(xe),ke._spiderLeg=xe,te&&(Te=xe._path,Ee=Te.getTotalLength()+.1,Te.style.strokeDasharray=Ee,Te.style.strokeDashoffset=Ee),ke.setZIndexOffset&&ke.setZIndexOffset(1e6),ke.clusterHide&&ke.clusterHide(),$.addLayer(ke),ke._setPos&&ke._setPos(q);for(s._forceLayout(),s._animationStart(),De=f.length-1;De>=0;De--)Fe=U.layerPointToLatLng(v[De]),ke=f[De],ke._preSpiderfyLatlng=ke._latlng,ke.setLatLng(Fe),ke.clusterShow&&ke.clusterShow(),te&&(xe=ke._spiderLeg,Te=xe._path,Te.style.strokeDashoffset=0,xe.setStyle({opacity:Ae}));this.setOpacity(.3),s._ignoreMove=!1,setTimeout(function(){s._animationEnd(),s.fire("spiderfied",{cluster:h,markers:f})},200)},_animationUnspiderfy:function(f){var v=this,h=this._group,s=h._map,U=h._featureGroup,$=f?s._latLngToNewLayerPoint(this._latlng,f.zoom,f.center):s.latLngToLayerPoint(this._latlng),V=this.getAllChildMarkers(null,!0),q=L.Path.SVG,te,he,Ae,De,ke,xe;for(h._ignoreMove=!0,h._animationStart(),this.setOpacity(1),he=V.length-1;he>=0;he--)te=V[he],te._preSpiderfyLatlng&&(te.closePopup(),te.setLatLng(te._preSpiderfyLatlng),delete te._preSpiderfyLatlng,xe=!0,te._setPos&&(te._setPos($),xe=!1),te.clusterHide&&(te.clusterHide(),xe=!1),xe&&U.removeLayer(te),q&&(Ae=te._spiderLeg,De=Ae._path,ke=De.getTotalLength()+.1,De.style.strokeDashoffset=ke,Ae.setStyle({opacity:0})));h._ignoreMove=!1,setTimeout(function(){var Te=0;for(he=V.length-1;he>=0;he--)te=V[he],te._spiderLeg&&Te++;for(he=V.length-1;he>=0;he--)te=V[he],te._spiderLeg&&(te.clusterShow&&te.clusterShow(),te.setZIndexOffset&&te.setZIndexOffset(0),Te>1&&U.removeLayer(te),s.removeLayer(te._spiderLeg),delete te._spiderLeg);h._animationEnd(),h.fire("unspiderfied",{cluster:v,markers:V})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(f){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(f))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(f){this._spiderfied&&this._spiderfied.unspiderfy(f)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(f){f._spiderLeg&&(this._featureGroup.removeLayer(f),f.clusterShow&&f.clusterShow(),f.setZIndexOffset&&f.setZIndexOffset(0),this._map.removeLayer(f._spiderLeg),delete f._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(f){return f?f instanceof L.MarkerClusterGroup?f=f._topClusterLevel.getAllChildMarkers():f instanceof L.LayerGroup?f=f._layers:f instanceof L.MarkerCluster?f=f.getAllChildMarkers():f instanceof L.Marker&&(f=[f]):f=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(f),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(f),this},_flagParentsIconsNeedUpdate:function(f){var v,h;for(v in f)for(h=f[v].__parent;h;)h._iconNeedsUpdate=!0,h=h.__parent},_refreshSingleMarkerModeMarkers:function(f){var v,h;for(v in f)h=f[v],this.hasLayer(h)&&h.setIcon(this._overrideMarkerIcon(h))}}),L.Marker.include({refreshIconOptions:function(f,v){var h=this.options.icon;return L.setOptions(h,f),this.setIcon(h),v&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),i.MarkerClusterGroup=r,i.MarkerCluster=d,Object.defineProperty(i,"__esModule",{value:!0})})})(zI,zI.exports),Object.defineProperty(P1,"__esModule",{value:!0});var RI=P1.default=void 0,EO=TO,SO=IO(gA);function IO(e){return e&&e.__esModule?e:{default:e}}function OI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,r)}return i}function NI(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?OI(Object(i),!0).forEach(function(r){MO(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):OI(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function MO(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function QI(e,t){return FO(e)||PO(e,t)||kO(e,t)||LO()}function LO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kO(e,t){if(e){if(typeof e=="string")return $I(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $I(e,t)}}function $I(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function PO(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var i=[],r=!0,d=!1,f=void 0;try{for(var v=e[Symbol.iterator](),h;!(r=(h=v.next()).done)&&(i.push(h.value),!(t&&i.length===t));r=!0);}catch(s){d=!0,f=s}finally{try{!r&&v.return!=null&&v.return()}finally{if(d)throw f}}return i}}function FO(e){if(Array.isArray(e))return e}function DO(e,t){if(e==null)return{};var i=UO(e,t),r,d;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(d=0;d<f.length;d++)r=f[d],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function UO(e,t){if(e==null)return{};var i={},r=Object.keys(e),d,f;for(f=0;f<r.length;f++)d=r[f],!(t.indexOf(d)>=0)&&(i[d]=e[d]);return i}var zO=(0,EO.createPathComponent)(function(e,t){e.children;var i=DO(e,["children"]),r={},d={};Object.entries(i).forEach(function(v){var h=QI(v,2),s=h[0],U=h[1];return s.startsWith("on")?d[s]=U:r[s]=U});var f=new SO.default.markerClusterGroup(r);return Object.entries(d).forEach(function(v){var h=QI(v,2),s=h[0],U=h[1],$="cluster".concat(s.substring(2).toLowerCase());f.on($,U)}),{instance:f,context:NI(NI({},t),{},{layerContainer:f})}}),RO=zO;RI=P1.default=RO;var OO={exports:{}};(function(e,t){(function(i,r){r()})(hu,function(){function i(U,$){return typeof $>"u"?$={autoBom:!1}:typeof $!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),$={autoBom:!$}),$.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(U.type)?new Blob(["\uFEFF",U],{type:U.type}):U}function r(U,$,V){var q=new XMLHttpRequest;q.open("GET",U),q.responseType="blob",q.onload=function(){s(q.response,$,V)},q.onerror=function(){console.error("could not download file")},q.send()}function d(U){var $=new XMLHttpRequest;$.open("HEAD",U,!1);try{$.send()}catch{}return 200<=$.status&&299>=$.status}function f(U){try{U.dispatchEvent(new MouseEvent("click"))}catch{var $=document.createEvent("MouseEvents");$.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),U.dispatchEvent($)}}var v=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof hu=="object"&&hu.global===hu?hu:void 0,h=v.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=v.saveAs||(typeof window!="object"||window!==v?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(U,$,V){var q=v.URL||v.webkitURL,te=document.createElement("a");$=$||U.name||"download",te.download=$,te.rel="noopener",typeof U=="string"?(te.href=U,te.origin===location.origin?f(te):d(te.href)?r(U,$,V):f(te,te.target="_blank")):(te.href=q.createObjectURL(U),setTimeout(function(){q.revokeObjectURL(te.href)},4e4),setTimeout(function(){f(te)},0))}:"msSaveOrOpenBlob"in navigator?function(U,$,V){if($=$||U.name||"download",typeof U!="string")navigator.msSaveOrOpenBlob(i(U,V),$);else if(d(U))r(U,$,V);else{var q=document.createElement("a");q.href=U,q.target="_blank",setTimeout(function(){f(q)})}}:function(U,$,V,q){if(q=q||open("","_blank"),q&&(q.document.title=q.document.body.innerText="downloading..."),typeof U=="string")return r(U,$,V);var te=U.type==="application/octet-stream",he=/constructor/i.test(v.HTMLElement)||v.safari,Ae=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ae||te&&he||h)&&typeof FileReader<"u"){var De=new FileReader;De.onloadend=function(){var Te=De.result;Te=Ae?Te:Te.replace(/^data:[^;]*;/,"data:attachment/file;"),q?q.location.href=Te:location=Te,q=null},De.readAsDataURL(U)}else{var ke=v.URL||v.webkitURL,xe=ke.createObjectURL(U);q?q.location=xe:location.href=xe,q=null,setTimeout(function(){ke.revokeObjectURL(xe)},4e4)}});v.saveAs=s.saveAs=s,e.exports=s})})(OO);const il={},Ta=window.ENV;typeof window<"u"&&(il.API_URL=(Ta==null?void 0:Ta.API_URL)||"http://localhost:5100/",il.API_VERSION=(Ta==null?void 0:Ta.API_VERSION)||"v0.1",il.EXTERNAL_STORAGE=(Ta==null?void 0:Ta.EXTERNAL_STORAGE)||"https://minio.dev.devqube.io/uninfo-staging-main/",il.MVP_URL=(Ta==null?void 0:Ta.MVP_URL)||"http://localhost:3000",il.PORTAL_URL=(Ta==null?void 0:Ta.PORTAL_URL)||"http://localhost:8080",il.NODE_ENV=Ta==null?void 0:Ta.NODE_ENV,il.API_MAPBOX="https://api.mapbox.com/styles/v1/aftab84/cklsfquhs1fja17o8n0348xf8/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoiYWZ0YWI4NCIsImEiOiJjamtrdngyc2owYWhjM3Btc2VwbWIzc3BsIn0.5pTKwhoNucAt2l0nHTPpYg",il.MAPBOX_TOKEN="pk.eyJ1IjoiYWZ0YWI4NCIsImEiOiJjamtrdngyc2owYWhjM3Btc2VwbWIzc3BsIn0.5pTKwhoNucAt2l0nHTPpYg",il.MAPBOX_MAPSTYLE="mapbox://styles/aftab84/cklsfquhs1fja17o8n0348xf8",il.MAPTILER_MAPSTYLE="https://api.maptiler.com/maps/4263e235-ce91-4b64-801b-2133ec296371/style.json?key=WfjG9RAdMzcvfhNJWk11",il.HOLDING_PAGE=(Ta==null?void 0:Ta.HOLDING_PAGE)??!1,il.MAPPING_LIBRARY=(Ta==null?void 0:Ta.MAPPING_LIBRARY)??"MAPBOXGL",il.TABLEAU_URL=(Ta==null?void 0:Ta.TABLEAU_URL)??"https://data.uninfo.org");var jI={},NO=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),HI="%[a-f0-9]{2}",VI=new RegExp("("+HI+")|([^%]+?)","gi"),GI=new RegExp("("+HI+")+","gi");function F1(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var i=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],F1(i),F1(r))}function QO(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(VI)||[],i=1;i<t.length;i++)e=F1(t,i).join(""),t=e.match(VI)||[];return e}}function $O(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},i=GI.exec(e);i;){try{t[i[0]]=decodeURIComponent(i[0])}catch{var r=QO(i[0]);r!==i[0]&&(t[i[0]]=r)}i=GI.exec(e)}t["%C2"]="�";for(var d=Object.keys(t),f=0;f<d.length;f++){var v=d[f];e=e.replace(new RegExp(v,"g"),t[v])}return e}var jO=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return $O(e)}},HO=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const i=e.indexOf(t);return i===-1?[e]:[e.slice(0,i),e.slice(i+t.length)]},VO=function(e,t){for(var i={},r=Object.keys(e),d=Array.isArray(t),f=0;f<r.length;f++){var v=r[f],h=e[v];(d?t.indexOf(v)!==-1:t(v,h,e))&&(i[v]=h)}return i};(function(e){const t=NO,i=jO,r=HO,d=VO,f=xe=>xe==null,v=Symbol("encodeFragmentIdentifier");function h(xe){switch(xe.arrayFormat){case"index":return Te=>(Ee,Fe)=>{const Se=Ee.length;return Fe===void 0||xe.skipNull&&Fe===null||xe.skipEmptyString&&Fe===""?Ee:Fe===null?[...Ee,[$(Te,xe),"[",Se,"]"].join("")]:[...Ee,[$(Te,xe),"[",$(Se,xe),"]=",$(Fe,xe)].join("")]};case"bracket":return Te=>(Ee,Fe)=>Fe===void 0||xe.skipNull&&Fe===null||xe.skipEmptyString&&Fe===""?Ee:Fe===null?[...Ee,[$(Te,xe),"[]"].join("")]:[...Ee,[$(Te,xe),"[]=",$(Fe,xe)].join("")];case"colon-list-separator":return Te=>(Ee,Fe)=>Fe===void 0||xe.skipNull&&Fe===null||xe.skipEmptyString&&Fe===""?Ee:Fe===null?[...Ee,[$(Te,xe),":list="].join("")]:[...Ee,[$(Te,xe),":list=",$(Fe,xe)].join("")];case"comma":case"separator":case"bracket-separator":{const Te=xe.arrayFormat==="bracket-separator"?"[]=":"=";return Ee=>(Fe,Se)=>Se===void 0||xe.skipNull&&Se===null||xe.skipEmptyString&&Se===""?Fe:(Se=Se===null?"":Se,Fe.length===0?[[$(Ee,xe),Te,$(Se,xe)].join("")]:[[Fe,$(Se,xe)].join(xe.arrayFormatSeparator)])}default:return Te=>(Ee,Fe)=>Fe===void 0||xe.skipNull&&Fe===null||xe.skipEmptyString&&Fe===""?Ee:Fe===null?[...Ee,$(Te,xe)]:[...Ee,[$(Te,xe),"=",$(Fe,xe)].join("")]}}function s(xe){let Te;switch(xe.arrayFormat){case"index":return(Ee,Fe,Se)=>{if(Te=/\[(\d*)\]$/.exec(Ee),Ee=Ee.replace(/\[\d*\]$/,""),!Te){Se[Ee]=Fe;return}Se[Ee]===void 0&&(Se[Ee]={}),Se[Ee][Te[1]]=Fe};case"bracket":return(Ee,Fe,Se)=>{if(Te=/(\[\])$/.exec(Ee),Ee=Ee.replace(/\[\]$/,""),!Te){Se[Ee]=Fe;return}if(Se[Ee]===void 0){Se[Ee]=[Fe];return}Se[Ee]=[].concat(Se[Ee],Fe)};case"colon-list-separator":return(Ee,Fe,Se)=>{if(Te=/(:list)$/.exec(Ee),Ee=Ee.replace(/:list$/,""),!Te){Se[Ee]=Fe;return}if(Se[Ee]===void 0){Se[Ee]=[Fe];return}Se[Ee]=[].concat(Se[Ee],Fe)};case"comma":case"separator":return(Ee,Fe,Se)=>{const nt=typeof Fe=="string"&&Fe.includes(xe.arrayFormatSeparator),xt=typeof Fe=="string"&&!nt&&V(Fe,xe).includes(xe.arrayFormatSeparator);Fe=xt?V(Fe,xe):Fe;const Bt=nt||xt?Fe.split(xe.arrayFormatSeparator).map(Xe=>V(Xe,xe)):Fe===null?Fe:V(Fe,xe);Se[Ee]=Bt};case"bracket-separator":return(Ee,Fe,Se)=>{const nt=/(\[\])$/.test(Ee);if(Ee=Ee.replace(/\[\]$/,""),!nt){Se[Ee]=Fe&&V(Fe,xe);return}const xt=Fe===null?[]:Fe.split(xe.arrayFormatSeparator).map(Bt=>V(Bt,xe));if(Se[Ee]===void 0){Se[Ee]=xt;return}Se[Ee]=[].concat(Se[Ee],xt)};default:return(Ee,Fe,Se)=>{if(Se[Ee]===void 0){Se[Ee]=Fe;return}Se[Ee]=[].concat(Se[Ee],Fe)}}}function U(xe){if(typeof xe!="string"||xe.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function $(xe,Te){return Te.encode?Te.strict?t(xe):encodeURIComponent(xe):xe}function V(xe,Te){return Te.decode?i(xe):xe}function q(xe){return Array.isArray(xe)?xe.sort():typeof xe=="object"?q(Object.keys(xe)).sort((Te,Ee)=>Number(Te)-Number(Ee)).map(Te=>xe[Te]):xe}function te(xe){const Te=xe.indexOf("#");return Te!==-1&&(xe=xe.slice(0,Te)),xe}function he(xe){let Te="";const Ee=xe.indexOf("#");return Ee!==-1&&(Te=xe.slice(Ee)),Te}function Ae(xe){xe=te(xe);const Te=xe.indexOf("?");return Te===-1?"":xe.slice(Te+1)}function De(xe,Te){return Te.parseNumbers&&!Number.isNaN(Number(xe))&&typeof xe=="string"&&xe.trim()!==""?xe=Number(xe):Te.parseBooleans&&xe!==null&&(xe.toLowerCase()==="true"||xe.toLowerCase()==="false")&&(xe=xe.toLowerCase()==="true"),xe}function ke(xe,Te){Te=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},Te),U(Te.arrayFormatSeparator);const Ee=s(Te),Fe=Object.create(null);if(typeof xe!="string"||(xe=xe.trim().replace(/^[?#&]/,""),!xe))return Fe;for(const Se of xe.split("&")){if(Se==="")continue;let[nt,xt]=r(Te.decode?Se.replace(/\+/g," "):Se,"=");xt=xt===void 0?null:["comma","separator","bracket-separator"].includes(Te.arrayFormat)?xt:V(xt,Te),Ee(V(nt,Te),xt,Fe)}for(const Se of Object.keys(Fe)){const nt=Fe[Se];if(typeof nt=="object"&&nt!==null)for(const xt of Object.keys(nt))nt[xt]=De(nt[xt],Te);else Fe[Se]=De(nt,Te)}return Te.sort===!1?Fe:(Te.sort===!0?Object.keys(Fe).sort():Object.keys(Fe).sort(Te.sort)).reduce((Se,nt)=>{const xt=Fe[nt];return xt&&typeof xt=="object"&&!Array.isArray(xt)?Se[nt]=q(xt):Se[nt]=xt,Se},Object.create(null))}e.extract=Ae,e.parse=ke,e.stringify=(xe,Te)=>{if(!xe)return"";Te=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},Te),U(Te.arrayFormatSeparator);const Ee=xt=>Te.skipNull&&f(xe[xt])||Te.skipEmptyString&&xe[xt]==="",Fe=h(Te),Se={};for(const xt of Object.keys(xe))Ee(xt)||(Se[xt]=xe[xt]);const nt=Object.keys(Se);return Te.sort!==!1&&nt.sort(Te.sort),nt.map(xt=>{const Bt=xe[xt];return Bt===void 0?"":Bt===null?$(xt,Te):Array.isArray(Bt)?Bt.length===0&&Te.arrayFormat==="bracket-separator"?$(xt,Te)+"[]":Bt.reduce(Fe(xt),[]).join("&"):$(xt,Te)+"="+$(Bt,Te)}).filter(xt=>xt.length>0).join("&")},e.parseUrl=(xe,Te)=>{Te=Object.assign({decode:!0},Te);const[Ee,Fe]=r(xe,"#");return Object.assign({url:Ee.split("?")[0]||"",query:ke(Ae(xe),Te)},Te&&Te.parseFragmentIdentifier&&Fe?{fragmentIdentifier:V(Fe,Te)}:{})},e.stringifyUrl=(xe,Te)=>{Te=Object.assign({encode:!0,strict:!0,[v]:!0},Te);const Ee=te(xe.url).split("?")[0]||"",Fe=e.extract(xe.url),Se=e.parse(Fe,{sort:!1}),nt=Object.assign(Se,xe.query);let xt=e.stringify(nt,Te);xt&&(xt=`?${xt}`);let Bt=he(xe.url);return xe.fragmentIdentifier&&(Bt=`#${Te[v]?$(xe.fragmentIdentifier,Te):xe.fragmentIdentifier}`),`${Ee}${xt}${Bt}`},e.pick=(xe,Te,Ee)=>{Ee=Object.assign({parseFragmentIdentifier:!0,[v]:!1},Ee);const{url:Fe,query:Se,fragmentIdentifier:nt}=e.parseUrl(xe,Ee);return e.stringifyUrl({url:Fe,query:d(Se,Te),fragmentIdentifier:nt},Ee)},e.exclude=(xe,Te,Ee)=>{const Fe=Array.isArray(Te)?Se=>!Te.includes(Se):(Se,nt)=>!Te(Se,nt);return e.pick(xe,Fe,Ee)}})(jI);const GO=Sm(jI),WO=7,KO=3,ZO=8,qO=9,WI=10,XO=5,YO=7,Dd=`${il.API_URL}${il.API_VERSION}`,Uf=(e={},t={})=>({method:"POST",headers:{...t,"Content-Type":"application/json"},body:JSON.stringify(e)}),KI=()=>({Authorization:`Bearer ${localStorage==null?void 0:localStorage.getItem("token")}`});class H0 extends Error{constructor(t){super(...t),Object.setPrototypeOf(this,H0.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,H0),this.message="Unauthorized"}}const _A=(e,t)=>{if(e.status===401)throw new H0(e);return t!=null&&t.xlsx?e.blob():e.json()},JO=async(e={})=>fetch(`${Dd}/blueprint/search`,Uf({...e,sort:[["name","ASC"]],limit:50})).then(_A),e4=async e=>fetch(`${Dd}/workspace/${e}`,{method:"GET"}).then(_A),ZI=async e=>{const t=`${Dd}/plan/search`,i=`${Dd}/plan/public/search`,r=_S("planOverrideId");return r!=="noValue"?(e.planIds=[JSON.parse(r)],fetch(t,Uf(e,KI())).then(_A)):fetch(i,Uf(e)).then(_A)},t4=async e=>{var d,f;const t=await ZI(e),i=(d=t==null?void 0:t.results)==null?void 0:d.map(v=>v.blueprintId),r=await JO({blueprintIds:i,exclude:["plans"]});return(f=t==null?void 0:t.results)==null?void 0:f.map(v=>{var s;const h=(s=r==null?void 0:r.results)==null?void 0:s.find(U=>U.id===v.blueprintId);return h?{...v,planType:h.planType}:v})},n4=async e=>{const t=`${Dd}/plan/entity/search`,i=`${Dd}/plan/public/entity/search`;return _S("planAccessLevel")==="latestVersion"?fetch(t,Uf({...e,sort:e.sort??[["planEntityVersion.code","ASC"],["planEntityVersion.name","ASC"]],limit:2500},KI())).then(_A):fetch(i,Uf({...e,sort:e.sort??[["planEntityVersion.code","ASC"],["planEntityVersion.name","ASC"]],limit:2500})).then(_A)},i4=async e=>fetch(`${Dd}/dataitem/search`,Uf({datasourceIds:[7],q:e})).then(_A),D1=async e=>fetch(`${Dd}/timeframe/search`,Uf({...e,limit:100})).then(_A),V0=async({sort:e,includeMetrics:t,workspaceIds:i,planIds:r,planEntityOptions:d,year:f,entityPrototypeId:v=qO,includeChildren:h=!1})=>{const{results:s}=await ZI({workspaceIds:i,planIds:r,planTypeIds:[KO,WO],sort:[["planVersion.startDate","DESC"]],exclude:["assessments","planDocuments","planSubmissions","planSurveys","planTags","workspace"],limit:r?r.length:1}),$=Kr.flatten(s.map(te=>te.entityPrototypes)).filter(te=>te.coreentityTypeId===v);let V;return d&&d.length>0&&(V={$and:[...d]}),(await n4({includeChildren:h,includeMetrics:t,year:f,sort:e,entityPrototypeIds:$.map(te=>te.id),exclude:["children","planEntityCells","planEntityDataitems","planEntityLocations","plan","planEntityVersions","planSubmissions","sustainableDevelopmentTargets","dataitems","sustainableDevelopmentGoals","users","focalUsers","supportedBy","supporting","agencies","implementingPartners","contributingPartners","planSubmissions","entityPrototype","compound","premises","occupants"],where:V})).results},U1=async e=>fetch(`${Dd}/location/search`,Uf({...e,limit:1500})).then(_A),r4=`${Dd}/sustainableDevelopmentGoal/overviewReport?`,o4=async e=>{if((e==null?void 0:e.grouping)==="organization"&&!e.organizationType)throw new Error('When grouping by "organization" organizationType must be specified');const t={Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},i=GO.stringify(e??{});return fetch(`${r4}${i}`,{method:"GET",headers:t}).then(r=>_A(r,{xlsx:!0}))},s4=async e=>{const t={Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};return fetch(`${Dd}/${e.endpoint}`,Uf(e,t)).then(i=>_A(i,{xlsx:!0}))};function ct(){return ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},ct.apply(this,arguments)}var qI={exports:{}},a4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",l4=a4,c4=l4;function XI(){}function YI(){}YI.resetWarningCache=XI;var u4=function(){function e(r,d,f,v,h,s){if(s!==c4){var U=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw U.name="Invariant Violation",U}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:YI,resetWarningCache:XI};return i.PropTypes=i,i};qI.exports=u4();var Ud=qI.exports;function JI(e){var t,i,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=JI(e[t]))&&(r&&(r+=" "),r+=i);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function $r(){for(var e,t,i=0,r="";i<arguments.length;)(e=arguments[i++])&&(t=JI(e))&&(r&&(r+=" "),r+=t);return r}function zf(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function eM(e){if(!zf(e))return e;const t={};return Object.keys(e).forEach(i=>{t[i]=eM(e[i])}),t}function eh(e,t,i={clone:!0}){const r=i.clone?ct({},e):e;return zf(e)&&zf(t)&&Object.keys(t).forEach(d=>{d!=="__proto__"&&(zf(t[d])&&d in e&&zf(e[d])?r[d]=eh(e[d],t[d],i):i.clone?r[d]=zf(t[d])?eM(t[d]):t[d]:r[d]=t[d])}),r}function _p(e){let t="https://mui.com/production-error/?code="+e;for(let i=1;i<arguments.length;i+=1)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function qi(e){if(typeof e!="string")throw new Error(_p(7));return e.charAt(0).toUpperCase()+e.slice(1)}function z1(...e){return e.reduce((t,i)=>i==null?t:function(...d){t.apply(this,d),i.apply(this,d)},()=>{})}function R1(e,t=166){let i;function r(...d){const f=()=>{e.apply(this,d)};clearTimeout(i),i=setTimeout(f,t)}return r.clear=()=>{clearTimeout(i)},r}function h4(e,t){return()=>null}function G0(e,t){var i,r;return Ha(e)&&t.indexOf((i=e.type.muiName)!=null?i:(r=e.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function th(e){return e&&e.ownerDocument||document}function yp(e){return th(e).defaultView||window}function d4(e,t){return()=>null}function Iy(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const yA=typeof window<"u"?gp:$i;let tM=0;function A4(e){const[t,i]=ur(e),r=e||t;return $i(()=>{t==null&&(tM+=1,i(`mui-${tM}`))},[t]),r}const nM=f1.useId;function My(e){if(nM!==void 0){const t=nM();return e??t}return A4(e)}function f4(e,t,i,r,d){return null}function Mm({controlled:e,default:t,name:i,state:r="value"}){const{current:d}=Pi(e!==void 0),[f,v]=ur(t),h=d?e:f,s=xs(U=>{d||v(U)},[]);return[h,s]}function zd(e){const t=Pi(e);return yA(()=>{t.current=e}),Pi((...i)=>(0,t.current)(...i)).current}function Ul(...e){return tl(()=>e.every(t=>t==null)?null:t=>{e.forEach(i=>{Iy(i,t)})},e)}let W0=!0,O1=!1,iM;const p4={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function m4(e){const{type:t,tagName:i}=e;return!!(i==="INPUT"&&p4[t]&&!e.readOnly||i==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function g4(e){e.metaKey||e.altKey||e.ctrlKey||(W0=!0)}function N1(){W0=!1}function _4(){this.visibilityState==="hidden"&&O1&&(W0=!0)}function y4(e){e.addEventListener("keydown",g4,!0),e.addEventListener("mousedown",N1,!0),e.addEventListener("pointerdown",N1,!0),e.addEventListener("touchstart",N1,!0),e.addEventListener("visibilitychange",_4,!0)}function v4(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return W0||m4(t)}function K0(){const e=xs(d=>{d!=null&&y4(d.ownerDocument)},[]),t=Pi(!1);function i(){return t.current?(O1=!0,window.clearTimeout(iM),iM=window.setTimeout(()=>{O1=!1},100),t.current=!1,!0):!1}function r(d){return v4(d)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:r,onBlur:i,ref:e}}function rM(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const x4=e=>{const t=Pi({});return $i(()=>{t.current=e}),t.current};function oM(e,t){const i=ct({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))i[r]=ct({},e[r],i[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const d=e[r]||{},f=t[r];i[r]={},!f||!Object.keys(f)?i[r]=d:!d||!Object.keys(d)?i[r]=f:(i[r]=ct({},f),Object.keys(d).forEach(v=>{i[r][v]=oM(d[v],f[v])}))}else i[r]===void 0&&(i[r]=e[r])}),i}function Us(e,t,i=void 0){const r={};return Object.keys(e).forEach(d=>{r[d]=e[d].reduce((f,v)=>{if(v){const h=t(v);h!==""&&f.push(h),i&&i[v]&&f.push(i[v])}return f},[]).join(" ")}),r}const sM=e=>e,aM=(()=>{let e=sM;return{configure(t){e=t},generate(t){return e(t)},reset(){e=sM}}})(),b4={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ls(e,t,i="Mui"){const r=b4[t];return r?`${i}-${r}`:`${aM.generate(e)}-${t}`}function bs(e,t,i="Mui"){const r={};return t.forEach(d=>{r[d]=Ls(e,d,i)}),r}function lM(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var w4=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,C4=lM(function(e){return w4.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function B4(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function T4(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var E4=function(){function e(i){var r=this;this._insertTag=function(d){var f;r.tags.length===0?r.insertionPoint?f=r.insertionPoint.nextSibling:r.prepend?f=r.container.firstChild:f=r.before:f=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(d,f),r.tags.push(d)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(T4(this));var d=this.tags[this.tags.length-1];if(this.isSpeedy){var f=B4(d);try{f.insertRule(r,f.cssRules.length)}catch{}}else d.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),nh="-ms-",Z0="-moz-",Ws="-webkit-",cM="comm",Q1="rule",$1="decl",S4="@import",uM="@keyframes",I4="@layer",M4=Math.abs,q0=String.fromCharCode,L4=Object.assign;function k4(e,t){return Pu(e,0)^45?(((t<<2^Pu(e,0))<<2^Pu(e,1))<<2^Pu(e,2))<<2^Pu(e,3):0}function hM(e){return e.trim()}function P4(e,t){return(e=t.exec(e))?e[0]:e}function Ks(e,t,i){return e.replace(t,i)}function j1(e,t){return e.indexOf(t)}function Pu(e,t){return e.charCodeAt(t)|0}function Ly(e,t,i){return e.slice(t,i)}function YA(e){return e.length}function H1(e){return e.length}function X0(e,t){return t.push(e),e}function F4(e,t){return e.map(t).join("")}var Y0=1,Yg=1,dM=0,Zh=0,yc=0,Jg="";function J0(e,t,i,r,d,f,v){return{value:e,root:t,parent:i,type:r,props:d,children:f,line:Y0,column:Yg,length:v,return:""}}function ky(e,t){return L4(J0("",null,null,"",null,null,0),e,{length:-e.length},t)}function D4(){return yc}function U4(){return yc=Zh>0?Pu(Jg,--Zh):0,Yg--,yc===10&&(Yg=1,Y0--),yc}function cd(){return yc=Zh<dM?Pu(Jg,Zh++):0,Yg++,yc===10&&(Yg=1,Y0++),yc}function JA(){return Pu(Jg,Zh)}function ex(){return Zh}function Py(e,t){return Ly(Jg,e,t)}function Fy(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function AM(e){return Y0=Yg=1,dM=YA(Jg=e),Zh=0,[]}function fM(e){return Jg="",e}function tx(e){return hM(Py(Zh-1,V1(e===91?e+2:e===40?e+1:e)))}function z4(e){for(;(yc=JA())&&yc<33;)cd();return Fy(e)>2||Fy(yc)>3?"":" "}function R4(e,t){for(;--t&&cd()&&!(yc<48||yc>102||yc>57&&yc<65||yc>70&&yc<97););return Py(e,ex()+(t<6&&JA()==32&&cd()==32))}function V1(e){for(;cd();)switch(yc){case e:return Zh;case 34:case 39:e!==34&&e!==39&&V1(yc);break;case 40:e===41&&V1(e);break;case 92:cd();break}return Zh}function O4(e,t){for(;cd()&&e+yc!==57;)if(e+yc===84&&JA()===47)break;return"/*"+Py(t,Zh-1)+"*"+q0(e===47?e:cd())}function N4(e){for(;!Fy(JA());)cd();return Py(e,Zh)}function Q4(e){return fM(nx("",null,null,null,[""],e=AM(e),0,[0],e))}function nx(e,t,i,r,d,f,v,h,s){for(var U=0,$=0,V=v,q=0,te=0,he=0,Ae=1,De=1,ke=1,xe=0,Te="",Ee=d,Fe=f,Se=r,nt=Te;De;)switch(he=xe,xe=cd()){case 40:if(he!=108&&Pu(nt,V-1)==58){j1(nt+=Ks(tx(xe),"&","&\f"),"&\f")!=-1&&(ke=-1);break}case 34:case 39:case 91:nt+=tx(xe);break;case 9:case 10:case 13:case 32:nt+=z4(he);break;case 92:nt+=R4(ex()-1,7);continue;case 47:switch(JA()){case 42:case 47:X0($4(O4(cd(),ex()),t,i),s);break;default:nt+="/"}break;case 123*Ae:h[U++]=YA(nt)*ke;case 125*Ae:case 59:case 0:switch(xe){case 0:case 125:De=0;case 59+$:ke==-1&&(nt=Ks(nt,/\f/g,"")),te>0&&YA(nt)-V&&X0(te>32?mM(nt+";",r,i,V-1):mM(Ks(nt," ","")+";",r,i,V-2),s);break;case 59:nt+=";";default:if(X0(Se=pM(nt,t,i,U,$,d,h,Te,Ee=[],Fe=[],V),f),xe===123)if($===0)nx(nt,t,Se,Se,Ee,f,V,h,Fe);else switch(q===99&&Pu(nt,3)===110?100:q){case 100:case 108:case 109:case 115:nx(e,Se,Se,r&&X0(pM(e,Se,Se,0,0,d,h,Te,d,Ee=[],V),Fe),d,Fe,V,h,r?Ee:Fe);break;default:nx(nt,Se,Se,Se,[""],Fe,0,h,Fe)}}U=$=te=0,Ae=ke=1,Te=nt="",V=v;break;case 58:V=1+YA(nt),te=he;default:if(Ae<1){if(xe==123)--Ae;else if(xe==125&&Ae++==0&&U4()==125)continue}switch(nt+=q0(xe),xe*Ae){case 38:ke=$>0?1:(nt+="\f",-1);break;case 44:h[U++]=(YA(nt)-1)*ke,ke=1;break;case 64:JA()===45&&(nt+=tx(cd())),q=JA(),$=V=YA(Te=nt+=N4(ex())),xe++;break;case 45:he===45&&YA(nt)==2&&(Ae=0)}}return f}function pM(e,t,i,r,d,f,v,h,s,U,$){for(var V=d-1,q=d===0?f:[""],te=H1(q),he=0,Ae=0,De=0;he<r;++he)for(var ke=0,xe=Ly(e,V+1,V=M4(Ae=v[he])),Te=e;ke<te;++ke)(Te=hM(Ae>0?q[ke]+" "+xe:Ks(xe,/&\f/g,q[ke])))&&(s[De++]=Te);return J0(e,t,i,d===0?Q1:h,s,U,$)}function $4(e,t,i){return J0(e,t,i,cM,q0(D4()),Ly(e,2,-2),0)}function mM(e,t,i,r){return J0(e,t,i,$1,Ly(e,0,r),Ly(e,r+1,-1),r)}function e_(e,t){for(var i="",r=H1(e),d=0;d<r;d++)i+=t(e[d],d,e,t)||"";return i}function j4(e,t,i,r){switch(e.type){case I4:if(e.children.length)break;case S4:case $1:return e.return=e.return||e.value;case cM:return"";case uM:return e.return=e.value+"{"+e_(e.children,r)+"}";case Q1:e.value=e.props.join(",")}return YA(i=e_(e.children,r))?e.return=e.value+"{"+i+"}":""}function H4(e){var t=H1(e);return function(i,r,d,f){for(var v="",h=0;h<t;h++)v+=e[h](i,r,d,f)||"";return v}}function V4(e){return function(t){t.root||(t=t.return)&&e(t)}}var G4=function(t,i,r){for(var d=0,f=0;d=f,f=JA(),d===38&&f===12&&(i[r]=1),!Fy(f);)cd();return Py(t,Zh)},W4=function(t,i){var r=-1,d=44;do switch(Fy(d)){case 0:d===38&&JA()===12&&(i[r]=1),t[r]+=G4(Zh-1,i,r);break;case 2:t[r]+=tx(d);break;case 4:if(d===44){t[++r]=JA()===58?"&\f":"",i[r]=t[r].length;break}default:t[r]+=q0(d)}while(d=cd());return t},K4=function(t,i){return fM(W4(AM(t),i))},gM=new WeakMap,Z4=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,r=t.parent,d=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!gM.get(r))&&!d){gM.set(t,!0);for(var f=[],v=K4(i,f),h=r.props,s=0,U=0;s<v.length;s++)for(var $=0;$<h.length;$++,U++)t.props[U]=f[s]?v[s].replace(/&\f/g,h[$]):h[$]+" "+v[s]}}},q4=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function _M(e,t){switch(k4(e,t)){case 5103:return Ws+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ws+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ws+e+Z0+e+nh+e+e;case 6828:case 4268:return Ws+e+nh+e+e;case 6165:return Ws+e+nh+"flex-"+e+e;case 5187:return Ws+e+Ks(e,/(\w+).+(:[^]+)/,Ws+"box-$1$2"+nh+"flex-$1$2")+e;case 5443:return Ws+e+nh+"flex-item-"+Ks(e,/flex-|-self/,"")+e;case 4675:return Ws+e+nh+"flex-line-pack"+Ks(e,/align-content|flex-|-self/,"")+e;case 5548:return Ws+e+nh+Ks(e,"shrink","negative")+e;case 5292:return Ws+e+nh+Ks(e,"basis","preferred-size")+e;case 6060:return Ws+"box-"+Ks(e,"-grow","")+Ws+e+nh+Ks(e,"grow","positive")+e;case 4554:return Ws+Ks(e,/([^-])(transform)/g,"$1"+Ws+"$2")+e;case 6187:return Ks(Ks(Ks(e,/(zoom-|grab)/,Ws+"$1"),/(image-set)/,Ws+"$1"),e,"")+e;case 5495:case 3959:return Ks(e,/(image-set\([^]*)/,Ws+"$1$`$1");case 4968:return Ks(Ks(e,/(.+:)(flex-)?(.*)/,Ws+"box-pack:$3"+nh+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ws+e+e;case 4095:case 3583:case 4068:case 2532:return Ks(e,/(.+)-inline(.+)/,Ws+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(YA(e)-1-t>6)switch(Pu(e,t+1)){case 109:if(Pu(e,t+4)!==45)break;case 102:return Ks(e,/(.+:)(.+)-([^]+)/,"$1"+Ws+"$2-$3$1"+Z0+(Pu(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~j1(e,"stretch")?_M(Ks(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Pu(e,t+1)!==115)break;case 6444:switch(Pu(e,YA(e)-3-(~j1(e,"!important")&&10))){case 107:return Ks(e,":",":"+Ws)+e;case 101:return Ks(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ws+(Pu(e,14)===45?"inline-":"")+"box$3$1"+Ws+"$2$3$1"+nh+"$2box$3")+e}break;case 5936:switch(Pu(e,t+11)){case 114:return Ws+e+nh+Ks(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ws+e+nh+Ks(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ws+e+nh+Ks(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ws+e+nh+e+e}return e}var X4=function(t,i,r,d){if(t.length>-1&&!t.return)switch(t.type){case $1:t.return=_M(t.value,t.length);break;case uM:return e_([ky(t,{value:Ks(t.value,"@","@"+Ws)})],d);case Q1:if(t.length)return F4(t.props,function(f){switch(P4(f,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return e_([ky(t,{props:[Ks(f,/:(read-\w+)/,":"+Z0+"$1")]})],d);case"::placeholder":return e_([ky(t,{props:[Ks(f,/:(plac\w+)/,":"+Ws+"input-$1")]}),ky(t,{props:[Ks(f,/:(plac\w+)/,":"+Z0+"$1")]}),ky(t,{props:[Ks(f,/:(plac\w+)/,nh+"input-$1")]})],d)}return""})}},Y4=[X4],yM=function(t){var i=t.key;if(i==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(Ae){var De=Ae.getAttribute("data-emotion");De.indexOf(" ")!==-1&&(document.head.appendChild(Ae),Ae.setAttribute("data-s",""))})}var d=t.stylisPlugins||Y4,f={},v,h=[];v=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(Ae){for(var De=Ae.getAttribute("data-emotion").split(" "),ke=1;ke<De.length;ke++)f[De[ke]]=!0;h.push(Ae)});var s,U=[Z4,q4];{var $,V=[j4,V4(function(Ae){$.insert(Ae)})],q=H4(U.concat(d,V)),te=function(De){return e_(Q4(De),q)};s=function(De,ke,xe,Te){$=xe,te(De?De+"{"+ke.styles+"}":ke.styles),Te&&(he.inserted[ke.name]=!0)}}var he={key:i,sheet:new E4({key:i,container:v,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:f,registered:{},insert:s};return he.sheet.hydrate(h),he},vM={exports:{}},la={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var du=typeof Symbol=="function"&&Symbol.for,G1=du?Symbol.for("react.element"):60103,W1=du?Symbol.for("react.portal"):60106,ix=du?Symbol.for("react.fragment"):60107,rx=du?Symbol.for("react.strict_mode"):60108,ox=du?Symbol.for("react.profiler"):60114,sx=du?Symbol.for("react.provider"):60109,ax=du?Symbol.for("react.context"):60110,K1=du?Symbol.for("react.async_mode"):60111,lx=du?Symbol.for("react.concurrent_mode"):60111,cx=du?Symbol.for("react.forward_ref"):60112,ux=du?Symbol.for("react.suspense"):60113,J4=du?Symbol.for("react.suspense_list"):60120,hx=du?Symbol.for("react.memo"):60115,dx=du?Symbol.for("react.lazy"):60116,e3=du?Symbol.for("react.block"):60121,t3=du?Symbol.for("react.fundamental"):60117,n3=du?Symbol.for("react.responder"):60118,i3=du?Symbol.for("react.scope"):60119;function ud(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case G1:switch(e=e.type,e){case K1:case lx:case ix:case ox:case rx:case ux:return e;default:switch(e=e&&e.$$typeof,e){case ax:case cx:case dx:case hx:case sx:return e;default:return t}}case W1:return t}}}function xM(e){return ud(e)===lx}la.AsyncMode=K1,la.ConcurrentMode=lx,la.ContextConsumer=ax,la.ContextProvider=sx,la.Element=G1,la.ForwardRef=cx,la.Fragment=ix,la.Lazy=dx,la.Memo=hx,la.Portal=W1,la.Profiler=ox,la.StrictMode=rx,la.Suspense=ux,la.isAsyncMode=function(e){return xM(e)||ud(e)===K1},la.isConcurrentMode=xM,la.isContextConsumer=function(e){return ud(e)===ax},la.isContextProvider=function(e){return ud(e)===sx},la.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===G1},la.isForwardRef=function(e){return ud(e)===cx},la.isFragment=function(e){return ud(e)===ix},la.isLazy=function(e){return ud(e)===dx},la.isMemo=function(e){return ud(e)===hx},la.isPortal=function(e){return ud(e)===W1},la.isProfiler=function(e){return ud(e)===ox},la.isStrictMode=function(e){return ud(e)===rx},la.isSuspense=function(e){return ud(e)===ux},la.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ix||e===lx||e===ox||e===rx||e===ux||e===J4||typeof e=="object"&&e!==null&&(e.$$typeof===dx||e.$$typeof===hx||e.$$typeof===sx||e.$$typeof===ax||e.$$typeof===cx||e.$$typeof===t3||e.$$typeof===n3||e.$$typeof===i3||e.$$typeof===e3)},la.typeOf=ud,vM.exports=la;var r3=vM.exports,Z1=r3,o3={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s3={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a3={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},bM={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},q1={};q1[Z1.ForwardRef]=a3,q1[Z1.Memo]=bM;function wM(e){return Z1.isMemo(e)?bM:q1[e.$$typeof]||o3}var l3=Object.defineProperty,c3=Object.getOwnPropertyNames,CM=Object.getOwnPropertySymbols,u3=Object.getOwnPropertyDescriptor,h3=Object.getPrototypeOf,BM=Object.prototype;function TM(e,t,i){if(typeof t!="string"){if(BM){var r=h3(t);r&&r!==BM&&TM(e,r,i)}var d=c3(t);CM&&(d=d.concat(CM(t)));for(var f=wM(e),v=wM(t),h=0;h<d.length;++h){var s=d[h];if(!s3[s]&&!(i&&i[s])&&!(v&&v[s])&&!(f&&f[s])){var U=u3(t,s);try{l3(e,s,U)}catch{}}}}return e}var d3=TM;const A3=Sm(d3);var f3=!0;function p3(e,t,i){var r="";return i.split(" ").forEach(function(d){e[d]!==void 0?t.push(e[d]+";"):r+=d+" "}),r}var EM=function(t,i,r){var d=t.key+"-"+i.name;(r===!1||f3===!1)&&t.registered[d]===void 0&&(t.registered[d]=i.styles)},SM=function(t,i,r){EM(t,i,r);var d=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var f=i;do t.insert(i===f?"."+d:"",f,t.sheet,!0),f=f.next;while(f!==void 0)}};function m3(e){for(var t=0,i,r=0,d=e.length;d>=4;++r,d-=4)i=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(d){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var g3={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_3=/[A-Z]|^ms/g,y3=/_EMO_([^_]+?)_([^]*?)_EMO_/g,IM=function(t){return t.charCodeAt(1)===45},MM=function(t){return t!=null&&typeof t!="boolean"},X1=lM(function(e){return IM(e)?e:e.replace(_3,"-$&").toLowerCase()}),LM=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(y3,function(r,d,f){return ef={name:d,styles:f,next:ef},d})}return g3[t]!==1&&!IM(t)&&typeof i=="number"&&i!==0?i+"px":i},Vte="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Dy(e,t,i){if(i==null)return"";if(i.__emotion_styles!==void 0)return i;switch(typeof i){case"boolean":return"";case"object":{if(i.anim===1)return ef={name:i.name,styles:i.styles,next:ef},i.name;if(i.styles!==void 0){var r=i.next;if(r!==void 0)for(;r!==void 0;)ef={name:r.name,styles:r.styles,next:ef},r=r.next;var d=i.styles+";";return d}return v3(e,t,i)}case"function":{if(e!==void 0){var f=ef,v=i(e);return ef=f,Dy(e,t,v)}break}}if(t==null)return i;var h=t[i];return h!==void 0?h:i}function v3(e,t,i){var r="";if(Array.isArray(i))for(var d=0;d<i.length;d++)r+=Dy(e,t,i[d])+";";else for(var f in i){var v=i[f];if(typeof v!="object")t!=null&&t[v]!==void 0?r+=f+"{"+t[v]+"}":MM(v)&&(r+=X1(f)+":"+LM(f,v)+";");else if(Array.isArray(v)&&typeof v[0]=="string"&&(t==null||t[v[0]]===void 0))for(var h=0;h<v.length;h++)MM(v[h])&&(r+=X1(f)+":"+LM(f,v[h])+";");else{var s=Dy(e,t,v);switch(f){case"animation":case"animationName":{r+=X1(f)+":"+s+";";break}default:r+=f+"{"+s+"}"}}}return r}var kM=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ef,Y1=function(t,i,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var d=!0,f="";ef=void 0;var v=t[0];v==null||v.raw===void 0?(d=!1,f+=Dy(r,i,v)):f+=v[0];for(var h=1;h<t.length;h++)f+=Dy(r,i,t[h]),d&&(f+=v[h]);kM.lastIndex=0;for(var s="",U;(U=kM.exec(f))!==null;)s+="-"+U[1];var $=m3(f)+s;return{name:$,styles:f,next:ef}},x3=function(t){return t()},PM=f1.useInsertionEffect?f1.useInsertionEffect:!1,b3=PM||x3,FM=PM||gp,DM=Sh(typeof HTMLElement<"u"?yM({key:"css"}):null),w3=DM.Provider,UM=function(t){return Yr(function(i,r){var d=nl(DM);return t(i,d,r)})},Ax=Sh({}),C3=UM(function(e,t){var i=e.styles,r=Y1([i],void 0,nl(Ax)),d=Pi();return FM(function(){var f=t.key+"-global",v=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),h=!1,s=document.querySelector('style[data-emotion="'+f+" "+r.name+'"]');return t.sheet.tags.length&&(v.before=t.sheet.tags[0]),s!==null&&(h=!0,s.setAttribute("data-emotion",f),v.hydrate([s])),d.current=[v,h],function(){v.flush()}},[t]),FM(function(){var f=d.current,v=f[0],h=f[1];if(h){f[1]=!1;return}if(r.next!==void 0&&SM(t,r.next,!0),v.tags.length){var s=v.tags[v.tags.length-1].nextElementSibling;v.before=s,v.flush()}t.insert("",r,v,!1)},[t,r.name]),null});function J1(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Y1(t)}var Uy=function(){var t=J1.apply(void 0,arguments),i="animation-"+t.name;return{name:i,styles:"@keyframes "+i+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},B3=C4,T3=function(t){return t!=="theme"},zM=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?B3:T3},RM=function(t,i,r){var d;if(i){var f=i.shouldForwardProp;d=t.__emotion_forwardProp&&f?function(v){return t.__emotion_forwardProp(v)&&f(v)}:f}return typeof d!="function"&&r&&(d=t.__emotion_forwardProp),d},E3=function(t){var i=t.cache,r=t.serialized,d=t.isStringTag;return EM(i,r,d),b3(function(){return SM(i,r,d)}),null},S3=function e(t,i){var r=t.__emotion_real===t,d=r&&t.__emotion_base||t,f,v;i!==void 0&&(f=i.label,v=i.target);var h=RM(t,i,r),s=h||zM(d),U=!s("as");return function(){var $=arguments,V=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(f!==void 0&&V.push("label:"+f+";"),$[0]==null||$[0].raw===void 0)V.push.apply(V,$);else{V.push($[0][0]);for(var q=$.length,te=1;te<q;te++)V.push($[te],$[0][te])}var he=UM(function(Ae,De,ke){var xe=U&&Ae.as||d,Te="",Ee=[],Fe=Ae;if(Ae.theme==null){Fe={};for(var Se in Ae)Fe[Se]=Ae[Se];Fe.theme=nl(Ax)}typeof Ae.className=="string"?Te=p3(De.registered,Ee,Ae.className):Ae.className!=null&&(Te=Ae.className+" ");var nt=Y1(V.concat(Ee),De.registered,Fe);Te+=De.key+"-"+nt.name,v!==void 0&&(Te+=" "+v);var xt=U&&h===void 0?zM(xe):s,Bt={};for(var Xe in Ae)U&&Xe==="as"||xt(Xe)&&(Bt[Xe]=Ae[Xe]);return Bt.className=Te,Bt.ref=ke,Dl(vs,null,Dl(E3,{cache:De,serialized:nt,isStringTag:typeof xe=="string"}),Dl(xe,Bt))});return he.displayName=f!==void 0?f:"Styled("+(typeof d=="string"?d:d.displayName||d.name||"Component")+")",he.defaultProps=t.defaultProps,he.__emotion_real=he,he.__emotion_base=d,he.__emotion_styles=V,he.__emotion_forwardProp=h,Object.defineProperty(he,"toString",{value:function(){return"."+v}}),he.withComponent=function(Ae,De){return e(Ae,ct({},i,De,{shouldForwardProp:RM(he,De,!0)})).apply(void 0,V)},he}},I3=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],eC=S3.bind();I3.forEach(function(e){eC[e]=eC(e)});const M3=Object.freeze(Object.defineProperty({__proto__:null,Fragment:vs,jsx:ze,jsxAttr:Pz,jsxDEV:ze,jsxEscape:gS,jsxTemplate:Lz,jsxs:ze},Symbol.toStringTag,{value:"Module"}));let tC;typeof document=="object"&&(tC=yM({key:"css",prepend:!0}));function L3(e){const{injectFirst:t,children:i}=e;return t&&tC?ze(w3,{value:tC,children:i}):i}function k3(e){return e==null||Object.keys(e).length===0}function P3(e){const{styles:t,defaultTheme:i={}}=e;return ze(C3,{styles:typeof t=="function"?d=>t(k3(d)?i:d):t})}function F3(e,t){return eC(e,t)}const D3=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},U3=["values","unit","step"],z3=e=>{const t=Object.keys(e).map(i=>({key:i,val:e[i]}))||[];return t.sort((i,r)=>i.val-r.val),t.reduce((i,r)=>ct({},i,{[r.key]:r.val}),{})};function R3(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:r=5}=e,d=gr(e,U3),f=z3(t),v=Object.keys(f);function h(q){return`@media (min-width:${typeof t[q]=="number"?t[q]:q}${i})`}function s(q){return`@media (max-width:${(typeof t[q]=="number"?t[q]:q)-r/100}${i})`}function U(q,te){const he=v.indexOf(te);return`@media (min-width:${typeof t[q]=="number"?t[q]:q}${i}) and (max-width:${(he!==-1&&typeof t[v[he]]=="number"?t[v[he]]:te)-r/100}${i})`}function $(q){return v.indexOf(q)+1<v.length?U(q,v[v.indexOf(q)+1]):h(q)}function V(q){const te=v.indexOf(q);return te===0?h(v[1]):te===v.length-1?s(v[te]):U(q,v[v.indexOf(q)+1]).replace("@media","@media not all and")}return ct({keys:v,values:f,up:h,down:s,between:U,only:$,not:V,unit:i},d)}const O3={borderRadius:4};function zy(e,t){return t?eh(e,t,{clone:!1}):e}const nC={xs:0,sm:600,md:900,lg:1200,xl:1536},OM={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${nC[e]}px)`};function Rd(e,t,i){const r=e.theme||{};if(Array.isArray(t)){const f=r.breakpoints||OM;return t.reduce((v,h,s)=>(v[f.up(f.keys[s])]=i(t[s]),v),{})}if(typeof t=="object"){const f=r.breakpoints||OM;return Object.keys(t).reduce((v,h)=>{if(Object.keys(f.values||nC).indexOf(h)!==-1){const s=f.up(h);v[s]=i(t[h],h)}else{const s=h;v[s]=t[s]}return v},{})}return i(t)}function N3(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((r,d)=>{const f=e.up(d);return r[f]={},r},{}))||{}}function Q3(e,t){return e.reduce((i,r)=>{const d=i[r];return(!d||Object.keys(d).length===0)&&delete i[r],i},t)}function $3(e,t){if(typeof e!="object")return{};const i={},r=Object.keys(t);return Array.isArray(e)?r.forEach((d,f)=>{f<e.length&&(i[d]=!0)}):r.forEach(d=>{e[d]!=null&&(i[d]=!0)}),i}function fx({values:e,breakpoints:t,base:i}){const r=i||$3(e,t),d=Object.keys(r);if(d.length===0)return e;let f;return d.reduce((v,h,s)=>(Array.isArray(e)?(v[h]=e[s]!=null?e[s]:e[f],f=s):typeof e=="object"?(v[h]=e[h]!=null?e[h]:e[f],f=h):v[h]=e,v),{})}function t_(e,t,i=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&i){const r=`vars.${t}`.split(".").reduce((d,f)=>d&&d[f]?d[f]:null,e);if(r!=null)return r}return t.split(".").reduce((r,d)=>r&&r[d]!=null?r[d]:null,e)}function px(e,t,i,r=i){let d;return typeof e=="function"?d=e(i):Array.isArray(e)?d=e[i]||r:d=t_(e,i)||r,t&&(d=t(d,r,e)),d}function nc(e){const{prop:t,cssProperty:i=e.prop,themeKey:r,transform:d}=e,f=v=>{if(v[t]==null)return null;const h=v[t],s=v.theme,U=t_(s,r)||{};return Rd(v,h,V=>{let q=px(U,d,V);return V===q&&typeof V=="string"&&(q=px(U,d,`${t}${V==="default"?"":qi(V)}`,V)),i===!1?q:{[i]:q}})};return f.propTypes={},f.filterProps=[t],f}function j3(e){const t={};return i=>(t[i]===void 0&&(t[i]=e(i)),t[i])}const H3={m:"margin",p:"padding"},V3={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},NM={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},G3=j3(e=>{if(e.length>2)if(NM[e])e=NM[e];else return[e];const[t,i]=e.split(""),r=H3[t],d=V3[i]||"";return Array.isArray(d)?d.map(f=>r+f):[r+d]}),iC=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],rC=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...iC,...rC];function Ry(e,t,i,r){var d;const f=(d=t_(e,t,!1))!=null?d:i;return typeof f=="number"?v=>typeof v=="string"?v:f*v:Array.isArray(f)?v=>typeof v=="string"?v:f[v]:typeof f=="function"?f:()=>{}}function QM(e){return Ry(e,"spacing",8)}function Oy(e,t){if(typeof t=="string"||t==null)return t;const i=Math.abs(t),r=e(i);return t>=0?r:typeof r=="number"?-r:`-${r}`}function W3(e,t){return i=>e.reduce((r,d)=>(r[d]=Oy(t,i),r),{})}function K3(e,t,i,r){if(t.indexOf(i)===-1)return null;const d=G3(i),f=W3(d,r),v=e[i];return Rd(e,v,f)}function $M(e,t){const i=QM(e.theme);return Object.keys(e).map(r=>K3(e,t,r,i)).reduce(zy,{})}function zl(e){return $M(e,iC)}zl.propTypes={},zl.filterProps=iC;function Rl(e){return $M(e,rC)}Rl.propTypes={},Rl.filterProps=rC;function Z3(e=8){if(e.mui)return e;const t=QM({spacing:e}),i=(...r)=>(r.length===0?[1]:r).map(f=>{const v=t(f);return typeof v=="number"?`${v}px`:v}).join(" ");return i.mui=!0,i}function mx(...e){const t=e.reduce((r,d)=>(d.filterProps.forEach(f=>{r[f]=d}),r),{}),i=r=>Object.keys(r).reduce((d,f)=>t[f]?zy(d,t[f](r)):d,{});return i.propTypes={},i.filterProps=e.reduce((r,d)=>r.concat(d.filterProps),[]),i}function Od(e){return typeof e!="number"?e:`${e}px solid`}function Nd(e,t){return nc({prop:e,themeKey:"borders",transform:t})}const q3=Nd("border",Od),X3=Nd("borderTop",Od),Y3=Nd("borderRight",Od),J3=Nd("borderBottom",Od),eN=Nd("borderLeft",Od),tN=Nd("borderColor"),nN=Nd("borderTopColor"),iN=Nd("borderRightColor"),rN=Nd("borderBottomColor"),oN=Nd("borderLeftColor"),sN=Nd("outline",Od),aN=Nd("outlineColor"),gx=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Ry(e.theme,"shape.borderRadius",4),i=r=>({borderRadius:Oy(t,r)});return Rd(e,e.borderRadius,i)}return null};gx.propTypes={},gx.filterProps=["borderRadius"],mx(q3,X3,Y3,J3,eN,tN,nN,iN,rN,oN,gx,sN,aN);const _x=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Ry(e.theme,"spacing",8),i=r=>({gap:Oy(t,r)});return Rd(e,e.gap,i)}return null};_x.propTypes={},_x.filterProps=["gap"];const yx=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Ry(e.theme,"spacing",8),i=r=>({columnGap:Oy(t,r)});return Rd(e,e.columnGap,i)}return null};yx.propTypes={},yx.filterProps=["columnGap"];const vx=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Ry(e.theme,"spacing",8),i=r=>({rowGap:Oy(t,r)});return Rd(e,e.rowGap,i)}return null};vx.propTypes={},vx.filterProps=["rowGap"];const lN=nc({prop:"gridColumn"}),cN=nc({prop:"gridRow"}),uN=nc({prop:"gridAutoFlow"}),hN=nc({prop:"gridAutoColumns"}),dN=nc({prop:"gridAutoRows"}),AN=nc({prop:"gridTemplateColumns"}),fN=nc({prop:"gridTemplateRows"}),pN=nc({prop:"gridTemplateAreas"}),mN=nc({prop:"gridArea"});mx(_x,yx,vx,lN,cN,uN,hN,dN,AN,fN,pN,mN);function n_(e,t){return t==="grey"?t:e}const gN=nc({prop:"color",themeKey:"palette",transform:n_}),_N=nc({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:n_}),yN=nc({prop:"backgroundColor",themeKey:"palette",transform:n_});mx(gN,_N,yN);function hd(e){return e<=1&&e!==0?`${e*100}%`:e}const vN=nc({prop:"width",transform:hd}),oC=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=i=>{var r,d;const f=((r=e.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[i])||nC[i];return f?((d=e.theme)==null||(d=d.breakpoints)==null?void 0:d.unit)!=="px"?{maxWidth:`${f}${e.theme.breakpoints.unit}`}:{maxWidth:f}:{maxWidth:hd(i)}};return Rd(e,e.maxWidth,t)}return null};oC.filterProps=["maxWidth"];const xN=nc({prop:"minWidth",transform:hd}),bN=nc({prop:"height",transform:hd}),wN=nc({prop:"maxHeight",transform:hd}),CN=nc({prop:"minHeight",transform:hd});nc({prop:"size",cssProperty:"width",transform:hd}),nc({prop:"size",cssProperty:"height",transform:hd});const BN=nc({prop:"boxSizing"});mx(vN,oC,xN,bN,wN,CN,BN);const xx={border:{themeKey:"borders",transform:Od},borderTop:{themeKey:"borders",transform:Od},borderRight:{themeKey:"borders",transform:Od},borderBottom:{themeKey:"borders",transform:Od},borderLeft:{themeKey:"borders",transform:Od},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Od},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:gx},color:{themeKey:"palette",transform:n_},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:n_},backgroundColor:{themeKey:"palette",transform:n_},p:{style:Rl},pt:{style:Rl},pr:{style:Rl},pb:{style:Rl},pl:{style:Rl},px:{style:Rl},py:{style:Rl},padding:{style:Rl},paddingTop:{style:Rl},paddingRight:{style:Rl},paddingBottom:{style:Rl},paddingLeft:{style:Rl},paddingX:{style:Rl},paddingY:{style:Rl},paddingInline:{style:Rl},paddingInlineStart:{style:Rl},paddingInlineEnd:{style:Rl},paddingBlock:{style:Rl},paddingBlockStart:{style:Rl},paddingBlockEnd:{style:Rl},m:{style:zl},mt:{style:zl},mr:{style:zl},mb:{style:zl},ml:{style:zl},mx:{style:zl},my:{style:zl},margin:{style:zl},marginTop:{style:zl},marginRight:{style:zl},marginBottom:{style:zl},marginLeft:{style:zl},marginX:{style:zl},marginY:{style:zl},marginInline:{style:zl},marginInlineStart:{style:zl},marginInlineEnd:{style:zl},marginBlock:{style:zl},marginBlockStart:{style:zl},marginBlockEnd:{style:zl},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:_x},rowGap:{style:vx},columnGap:{style:yx},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:hd},maxWidth:{style:oC},minWidth:{transform:hd},height:{transform:hd},maxHeight:{transform:hd},minHeight:{transform:hd},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function TN(...e){const t=e.reduce((r,d)=>r.concat(Object.keys(d)),[]),i=new Set(t);return e.every(r=>i.size===Object.keys(r).length)}function EN(e,t){return typeof e=="function"?e(t):e}function SN(){function e(i,r,d,f){const v={[i]:r,theme:d},h=f[i];if(!h)return{[i]:r};const{cssProperty:s=i,themeKey:U,transform:$,style:V}=h;if(r==null)return null;if(U==="typography"&&r==="inherit")return{[i]:r};const q=t_(d,U)||{};return V?V(v):Rd(v,r,he=>{let Ae=px(q,$,he);return he===Ae&&typeof he=="string"&&(Ae=px(q,$,`${i}${he==="default"?"":qi(he)}`,he)),s===!1?Ae:{[s]:Ae}})}function t(i){var r;const{sx:d,theme:f={}}=i||{};if(!d)return null;const v=(r=f.unstable_sxConfig)!=null?r:xx;function h(s){let U=s;if(typeof s=="function")U=s(f);else if(typeof s!="object")return s;if(!U)return null;const $=N3(f.breakpoints),V=Object.keys($);let q=$;return Object.keys(U).forEach(te=>{const he=EN(U[te],f);if(he!=null)if(typeof he=="object")if(v[te])q=zy(q,e(te,he,f,v));else{const Ae=Rd({theme:f},he,De=>({[te]:De}));TN(Ae,he)?q[te]=t({sx:he,theme:f}):q=zy(q,Ae)}else q=zy(q,e(te,he,f,v))}),Q3(V,q)}return Array.isArray(d)?d.map(h):h(d)}return t}const jM=SN();jM.filterProps=["sx"];const sC=jM,IN=["breakpoints","palette","spacing","shape"];function aC(e={},...t){const{breakpoints:i={},palette:r={},spacing:d,shape:f={}}=e,v=gr(e,IN),h=R3(i),s=Z3(d);let U=eh({breakpoints:h,direction:"ltr",components:{},palette:ct({mode:"light"},r),spacing:s,shape:ct({},O3,f)},v);return U=t.reduce(($,V)=>eh($,V),U),U.unstable_sxConfig=ct({},xx,v==null?void 0:v.unstable_sxConfig),U.unstable_sx=function(V){return sC({sx:V,theme:this})},U}function MN(e){return Object.keys(e).length===0}function lC(e=null){const t=nl(Ax);return!t||MN(t)?e:t}const LN=aC();function cC(e=LN){return lC(e)}function kN({styles:e,themeId:t,defaultTheme:i={}}){const r=cC(i),d=typeof e=="function"?e(t&&r[t]||r):e;return ze(P3,{styles:d})}const PN=["sx"],FN=e=>{var t,i;const r={systemProps:{},otherProps:{}},d=(t=e==null||(i=e.theme)==null?void 0:i.unstable_sxConfig)!=null?t:xx;return Object.keys(e).forEach(f=>{d[f]?r.systemProps[f]=e[f]:r.otherProps[f]=e[f]}),r};function HM(e){const{sx:t}=e,i=gr(e,PN),{systemProps:r,otherProps:d}=FN(i);let f;return Array.isArray(t)?f=[r,...t]:typeof t=="function"?f=(...v)=>{const h=t(...v);return zf(h)?ct({},r,h):r}:f=ct({},r,t),ct({},d,{sx:f})}const DN=["variant"];function VM(e){return e.length===0}function GM(e){const{variant:t}=e,i=gr(e,DN);let r=t||"";return Object.keys(i).sort().forEach(d=>{d==="color"?r+=VM(r)?e[d]:qi(e[d]):r+=`${VM(r)?d:qi(d)}${qi(e[d].toString())}`}),r}const UN=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function zN(e){return Object.keys(e).length===0}function RN(e){return typeof e=="string"&&e.charCodeAt(0)>96}const ON=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,bx=e=>{const t={};return e&&e.forEach(i=>{const r=GM(i.props);t[r]=i.style}),t},NN=(e,t)=>{let i=[];return t&&t.components&&t.components[e]&&t.components[e].variants&&(i=t.components[e].variants),bx(i)},wx=(e,t,i)=>{const{ownerState:r={}}=e,d=[];return i&&i.forEach(f=>{let v=!0;Object.keys(f.props).forEach(h=>{r[h]!==f.props[h]&&e[h]!==f.props[h]&&(v=!1)}),v&&d.push(t[GM(f.props)])}),d},QN=(e,t,i,r)=>{var d;const f=i==null||(d=i.components)==null||(d=d[r])==null?void 0:d.variants;return wx(e,t,f)};function Ny(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const $N=aC(),jN=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Cx({defaultTheme:e,theme:t,themeId:i}){return zN(t)?e:t[i]||t}function HN(e){return e?(t,i)=>i[e]:null}const WM=({styledArg:e,props:t,defaultTheme:i,themeId:r})=>{const d=e(ct({},t,{theme:Cx(ct({},t,{defaultTheme:i,themeId:r}))}));let f;if(d&&d.variants&&(f=d.variants,delete d.variants),f){const v=wx(t,bx(f),f);return[d,...v]}return d};function VN(e={}){const{themeId:t,defaultTheme:i=$N,rootShouldForwardProp:r=Ny,slotShouldForwardProp:d=Ny}=e,f=v=>sC(ct({},v,{theme:Cx(ct({},v,{defaultTheme:i,themeId:t}))}));return f.__mui_systemSx=!0,(v,h={})=>{D3(v,Ee=>Ee.filter(Fe=>!(Fe!=null&&Fe.__mui_systemSx)));const{name:s,slot:U,skipVariantsResolver:$,skipSx:V,overridesResolver:q=HN(jN(U))}=h,te=gr(h,UN),he=$!==void 0?$:U&&U!=="Root"&&U!=="root"||!1,Ae=V||!1;let De,ke=Ny;U==="Root"||U==="root"?ke=r:U?ke=d:RN(v)&&(ke=void 0);const xe=F3(v,ct({shouldForwardProp:ke,label:De},te)),Te=(Ee,...Fe)=>{const Se=Fe?Fe.map(Xe=>{if(typeof Xe=="function"&&Xe.__emotion_real!==Xe)return qt=>WM({styledArg:Xe,props:qt,defaultTheme:i,themeId:t});if(zf(Xe)){let qt=Xe,rn;return Xe&&Xe.variants&&(rn=Xe.variants,delete qt.variants,qt=Ut=>{let Kt=Xe;return wx(Ut,bx(rn),rn).forEach(Gt=>{Kt=eh(Kt,Gt)}),Kt}),qt}return Xe}):[];let nt=Ee;if(zf(Ee)){let Xe;Ee&&Ee.variants&&(Xe=Ee.variants,delete nt.variants,nt=qt=>{let rn=Ee;return wx(qt,bx(Xe),Xe).forEach(Kt=>{rn=eh(rn,Kt)}),rn})}else typeof Ee=="function"&&Ee.__emotion_real!==Ee&&(nt=Xe=>WM({styledArg:Ee,props:Xe,defaultTheme:i,themeId:t}));s&&q&&Se.push(Xe=>{const qt=Cx(ct({},Xe,{defaultTheme:i,themeId:t})),rn=ON(s,qt);if(rn){const Ut={};return Object.entries(rn).forEach(([Kt,On])=>{Ut[Kt]=typeof On=="function"?On(ct({},Xe,{theme:qt})):On}),q(Xe,Ut)}return null}),s&&!he&&Se.push(Xe=>{const qt=Cx(ct({},Xe,{defaultTheme:i,themeId:t}));return QN(Xe,NN(s,qt),qt,s)}),Ae||Se.push(f);const xt=Se.length-Fe.length;if(Array.isArray(Ee)&&xt>0){const Xe=new Array(xt).fill("");nt=[...Ee,...Xe],nt.raw=[...Ee.raw,...Xe]}const Bt=xe(nt,...Se);return v.muiName&&(Bt.muiName=v.muiName),Bt};return xe.withConfig&&(Te.withConfig=xe.withConfig),Te}}function GN(e){const{theme:t,name:i,props:r}=e;return!t||!t.components||!t.components[i]||!t.components[i].defaultProps?r:oM(t.components[i].defaultProps,r)}function WN({props:e,name:t,defaultTheme:i,themeId:r}){let d=cC(i);return r&&(d=d[r]||d),GN({theme:d,name:t,props:e})}function uC(e,t=0,i=1){return Math.min(Math.max(t,e),i)}function KN(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let i=e.match(t);return i&&i[0].length===1&&(i=i.map(r=>r+r)),i?`rgb${i.length===4?"a":""}(${i.map((r,d)=>d<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Lm(e){if(e.type)return e;if(e.charAt(0)==="#")return Lm(KN(e));const t=e.indexOf("("),i=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(i)===-1)throw new Error(_p(9,e));let r=e.substring(t+1,e.length-1),d;if(i==="color"){if(r=r.split(" "),d=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(d)===-1)throw new Error(_p(10,d))}else r=r.split(",");return r=r.map(f=>parseFloat(f)),{type:i,values:r,colorSpace:d}}function Bx(e){const{type:t,colorSpace:i}=e;let{values:r}=e;return t.indexOf("rgb")!==-1?r=r.map((d,f)=>f<3?parseInt(d,10):d):t.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.indexOf("color")!==-1?r=`${i} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function ZN(e){e=Lm(e);const{values:t}=e,i=t[0],r=t[1]/100,d=t[2]/100,f=r*Math.min(d,1-d),v=(U,$=(U+i/30)%12)=>d-f*Math.max(Math.min($-3,9-$,1),-1);let h="rgb";const s=[Math.round(v(0)*255),Math.round(v(8)*255),Math.round(v(4)*255)];return e.type==="hsla"&&(h+="a",s.push(t[3])),Bx({type:h,values:s})}function KM(e){e=Lm(e);let t=e.type==="hsl"||e.type==="hsla"?Lm(ZN(e)).values:e.values;return t=t.map(i=>(e.type!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function qN(e,t){const i=KM(e),r=KM(t);return(Math.max(i,r)+.05)/(Math.min(i,r)+.05)}function ho(e,t){return e=Lm(e),t=uC(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Bx(e)}function i_(e,t){if(e=Lm(e),t=uC(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let i=0;i<3;i+=1)e.values[i]*=1-t;return Bx(e)}function hC(e,t){if(e=Lm(e),t=uC(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;else if(e.type.indexOf("color")!==-1)for(let i=0;i<3;i+=1)e.values[i]+=(1-e.values[i])*t;return Bx(e)}const ZM=Sh(null);function dC(){return nl(ZM)}const qM=typeof Symbol=="function"&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";function XN(e,t){return typeof t=="function"?t(e):ct({},e,t)}function YN(e){const{children:t,theme:i}=e,r=dC(),d=tl(()=>{const f=r===null?i:XN(r,i);return f!=null&&(f[qM]=r!==null),f},[i,r]);return ze(ZM.Provider,{value:d,children:t})}const XM={};function YM(e,t,i,r=!1){return tl(()=>{const d=e&&t[e]||t;if(typeof i=="function"){const f=i(d),v=e?ct({},t,{[e]:f}):f;return r?()=>v:v}return e?ct({},t,{[e]:i}):ct({},t,i)},[e,t,i,r])}function JN(e){const{children:t,theme:i,themeId:r}=e,d=lC(XM),f=dC()||XM,v=YM(r,d,i),h=YM(r,f,i,!0);return ze(YN,{theme:h,children:ze(Ax.Provider,{value:v,children:t})})}function e5(e,t){return ct({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const r_={black:"#000",white:"#fff"},JM={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},km={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Pm={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Fm={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},vp={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Dm={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Rf={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},t5=["mode","contrastThreshold","tonalOffset"],eL={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:r_.white,default:r_.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},AC={text:{primary:r_.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:r_.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function tL(e,t,i,r){const d=r.light||r,f=r.dark||r*1.5;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:t==="light"?e.light=hC(e.main,d):t==="dark"&&(e.dark=i_(e.main,f)))}function n5(e="light"){return e==="dark"?{main:vp[200],light:vp[50],dark:vp[400]}:{main:vp[700],light:vp[400],dark:vp[800]}}function i5(e="light"){return e==="dark"?{main:km[200],light:km[50],dark:km[400]}:{main:km[500],light:km[300],dark:km[700]}}function r5(e="light"){return e==="dark"?{main:Pm[500],light:Pm[300],dark:Pm[700]}:{main:Pm[700],light:Pm[400],dark:Pm[800]}}function o5(e="light"){return e==="dark"?{main:Dm[400],light:Dm[300],dark:Dm[700]}:{main:Dm[700],light:Dm[500],dark:Dm[900]}}function s5(e="light"){return e==="dark"?{main:Rf[400],light:Rf[300],dark:Rf[700]}:{main:Rf[800],light:Rf[500],dark:Rf[900]}}function a5(e="light"){return e==="dark"?{main:Fm[400],light:Fm[300],dark:Fm[700]}:{main:"#ed6c02",light:Fm[500],dark:Fm[900]}}function l5(e){const{mode:t="light",contrastThreshold:i=3,tonalOffset:r=.2}=e,d=gr(e,t5),f=e.primary||n5(t),v=e.secondary||i5(t),h=e.error||r5(t),s=e.info||o5(t),U=e.success||s5(t),$=e.warning||a5(t);function V(Ae){return qN(Ae,AC.text.primary)>=i?AC.text.primary:eL.text.primary}const q=({color:Ae,name:De,mainShade:ke=500,lightShade:xe=300,darkShade:Te=700})=>{if(Ae=ct({},Ae),!Ae.main&&Ae[ke]&&(Ae.main=Ae[ke]),!Ae.hasOwnProperty("main"))throw new Error(_p(11,De?` (${De})`:"",ke));if(typeof Ae.main!="string")throw new Error(_p(12,De?` (${De})`:"",JSON.stringify(Ae.main)));return tL(Ae,"light",xe,r),tL(Ae,"dark",Te,r),Ae.contrastText||(Ae.contrastText=V(Ae.main)),Ae},te={dark:AC,light:eL};return eh(ct({common:ct({},r_),mode:t,primary:q({color:f,name:"primary"}),secondary:q({color:v,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:q({color:h,name:"error"}),warning:q({color:$,name:"warning"}),info:q({color:s,name:"info"}),success:q({color:U,name:"success"}),grey:JM,contrastThreshold:i,getContrastText:V,augmentColor:q,tonalOffset:r},te[t]),d)}const c5=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function u5(e){return Math.round(e*1e5)/1e5}const nL={textTransform:"uppercase"},iL='"Roboto", "Helvetica", "Arial", sans-serif';function h5(e,t){const i=typeof t=="function"?t(e):t,{fontFamily:r=iL,fontSize:d=14,fontWeightLight:f=300,fontWeightRegular:v=400,fontWeightMedium:h=500,fontWeightBold:s=700,htmlFontSize:U=16,allVariants:$,pxToRem:V}=i,q=gr(i,c5),te=d/14,he=V||(ke=>`${ke/U*te}rem`),Ae=(ke,xe,Te,Ee,Fe)=>ct({fontFamily:r,fontWeight:ke,fontSize:he(xe),lineHeight:Te},r===iL?{letterSpacing:`${u5(Ee/xe)}em`}:{},Fe,$),De={h1:Ae(f,96,1.167,-1.5),h2:Ae(f,60,1.2,-.5),h3:Ae(v,48,1.167,0),h4:Ae(v,34,1.235,.25),h5:Ae(v,24,1.334,0),h6:Ae(h,20,1.6,.15),subtitle1:Ae(v,16,1.75,.15),subtitle2:Ae(h,14,1.57,.1),body1:Ae(v,16,1.5,.15),body2:Ae(v,14,1.43,.15),button:Ae(h,14,1.75,.4,nL),caption:Ae(v,12,1.66,.4),overline:Ae(v,12,2.66,1,nL),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return eh(ct({htmlFontSize:U,pxToRem:he,fontFamily:r,fontSize:d,fontWeightLight:f,fontWeightRegular:v,fontWeightMedium:h,fontWeightBold:s},De),q,{clone:!1})}const d5=.2,A5=.14,f5=.12;function rl(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${d5})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${A5})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${f5})`].join(",")}const p5=["none",rl(0,2,1,-1,0,1,1,0,0,1,3,0),rl(0,3,1,-2,0,2,2,0,0,1,5,0),rl(0,3,3,-2,0,3,4,0,0,1,8,0),rl(0,2,4,-1,0,4,5,0,0,1,10,0),rl(0,3,5,-1,0,5,8,0,0,1,14,0),rl(0,3,5,-1,0,6,10,0,0,1,18,0),rl(0,4,5,-2,0,7,10,1,0,2,16,1),rl(0,5,5,-3,0,8,10,1,0,3,14,2),rl(0,5,6,-3,0,9,12,1,0,3,16,2),rl(0,6,6,-3,0,10,14,1,0,4,18,3),rl(0,6,7,-4,0,11,15,1,0,4,20,3),rl(0,7,8,-4,0,12,17,2,0,5,22,4),rl(0,7,8,-4,0,13,19,2,0,5,24,4),rl(0,7,9,-4,0,14,21,2,0,5,26,4),rl(0,8,9,-5,0,15,22,2,0,6,28,5),rl(0,8,10,-5,0,16,24,2,0,6,30,5),rl(0,8,11,-5,0,17,26,2,0,6,32,5),rl(0,9,11,-5,0,18,28,2,0,7,34,6),rl(0,9,12,-6,0,19,29,2,0,7,36,6),rl(0,10,13,-6,0,20,31,3,0,8,38,7),rl(0,10,13,-6,0,21,33,3,0,8,40,7),rl(0,10,14,-6,0,22,35,3,0,8,42,7),rl(0,11,14,-7,0,23,36,3,0,9,44,8),rl(0,11,15,-7,0,24,38,3,0,9,46,8)],m5=["duration","easing","delay"],g5={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},_5={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function rL(e){return`${Math.round(e)}ms`}function y5(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function v5(e){const t=ct({},g5,e.easing),i=ct({},_5,e.duration);return ct({getAutoHeightDuration:y5,create:(d=["all"],f={})=>{const{duration:v=i.standard,easing:h=t.easeInOut,delay:s=0}=f;return gr(f,m5),(Array.isArray(d)?d:[d]).map(U=>`${U} ${typeof v=="string"?v:rL(v)} ${h} ${typeof s=="string"?s:rL(s)}`).join(",")}},e,{easing:t,duration:i})}const x5={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},b5=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function fC(e={},...t){const{mixins:i={},palette:r={},transitions:d={},typography:f={}}=e,v=gr(e,b5);if(e.vars)throw new Error(_p(18));const h=l5(r),s=aC(e);let U=eh(s,{mixins:e5(s.breakpoints,i),palette:h,shadows:p5.slice(),typography:h5(h,f),transitions:v5(d),zIndex:ct({},x5)});return U=eh(U,v),U=t.reduce(($,V)=>eh($,V),U),U.unstable_sxConfig=ct({},xx,v==null?void 0:v.unstable_sxConfig),U.unstable_sx=function(V){return sC({sx:V,theme:this})},U}const Tx=fC(),o_="$$material",vA=e=>Ny(e)&&e!=="classes",w5=Ny,Fi=VN({themeId:o_,defaultTheme:Tx,rootShouldForwardProp:vA});function zs({props:e,name:t}){return WN({props:e,name:t,defaultTheme:Tx,themeId:o_})}function Qy(){const e=cC(Tx);return e[o_]||e}const oL=Sh();function C5(e){return Ls("MuiGrid",e)}const B5=[0,1,2,3,4,5,6,7,8,9,10],T5=["column-reverse","column","row-reverse","row"],E5=["nowrap","wrap-reverse","wrap"],$y=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],jy=bs("MuiGrid",["root","container","item","zeroMinWidth",...B5.map(e=>`spacing-xs-${e}`),...T5.map(e=>`direction-xs-${e}`),...E5.map(e=>`wrap-xs-${e}`),...$y.map(e=>`grid-xs-${e}`),...$y.map(e=>`grid-sm-${e}`),...$y.map(e=>`grid-md-${e}`),...$y.map(e=>`grid-lg-${e}`),...$y.map(e=>`grid-xl-${e}`)]),S5=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function s_(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function I5({theme:e,ownerState:t}){let i;return e.breakpoints.keys.reduce((r,d)=>{let f={};if(t[d]&&(i=t[d]),!i)return r;if(i===!0)f={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(i==="auto")f={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const v=fx({values:t.columns,breakpoints:e.breakpoints.values}),h=typeof v=="object"?v[d]:v;if(h==null)return r;const s=`${Math.round(i/h*1e8)/1e6}%`;let U={};if(t.container&&t.item&&t.columnSpacing!==0){const $=e.spacing(t.columnSpacing);if($!=="0px"){const V=`calc(${s} + ${s_($)})`;U={flexBasis:V,maxWidth:V}}}f=ct({flexBasis:s,flexGrow:0,maxWidth:s},U)}return e.breakpoints.values[d]===0?Object.assign(r,f):r[e.breakpoints.up(d)]=f,r},{})}function M5({theme:e,ownerState:t}){const i=fx({values:t.direction,breakpoints:e.breakpoints.values});return Rd({theme:e},i,r=>{const d={flexDirection:r};return r.indexOf("column")===0&&(d[`& > .${jy.item}`]={maxWidth:"none"}),d})}function sL({breakpoints:e,values:t}){let i="";Object.keys(t).forEach(d=>{i===""&&t[d]!==0&&(i=d)});const r=Object.keys(e).sort((d,f)=>e[d]-e[f]);return r.slice(0,r.indexOf(i))}function L5({theme:e,ownerState:t}){const{container:i,rowSpacing:r}=t;let d={};if(i&&r!==0){const f=fx({values:r,breakpoints:e.breakpoints.values});let v;typeof f=="object"&&(v=sL({breakpoints:e.breakpoints.values,values:f})),d=Rd({theme:e},f,(h,s)=>{var U;const $=e.spacing(h);return $!=="0px"?{marginTop:`-${s_($)}`,[`& > .${jy.item}`]:{paddingTop:s_($)}}:(U=v)!=null&&U.includes(s)?{}:{marginTop:0,[`& > .${jy.item}`]:{paddingTop:0}}})}return d}function k5({theme:e,ownerState:t}){const{container:i,columnSpacing:r}=t;let d={};if(i&&r!==0){const f=fx({values:r,breakpoints:e.breakpoints.values});let v;typeof f=="object"&&(v=sL({breakpoints:e.breakpoints.values,values:f})),d=Rd({theme:e},f,(h,s)=>{var U;const $=e.spacing(h);return $!=="0px"?{width:`calc(100% + ${s_($)})`,marginLeft:`-${s_($)}`,[`& > .${jy.item}`]:{paddingLeft:s_($)}}:(U=v)!=null&&U.includes(s)?{}:{width:"100%",marginLeft:0,[`& > .${jy.item}`]:{paddingLeft:0}}})}return d}function P5(e,t,i={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[i[`spacing-xs-${String(e)}`]];const r=[];return t.forEach(d=>{const f=e[d];Number(f)>0&&r.push(i[`spacing-${d}-${String(f)}`])}),r}const F5=Fi("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e,{container:r,direction:d,item:f,spacing:v,wrap:h,zeroMinWidth:s,breakpoints:U}=i;let $=[];r&&($=P5(v,U,t));const V=[];return U.forEach(q=>{const te=i[q];te&&V.push(t[`grid-${q}-${String(te)}`])}),[t.root,r&&t.container,f&&t.item,s&&t.zeroMinWidth,...$,d!=="row"&&t[`direction-xs-${String(d)}`],h!=="wrap"&&t[`wrap-xs-${String(h)}`],...V]}})(({ownerState:e})=>ct({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),M5,L5,k5,I5);function D5(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const i=[];return t.forEach(r=>{const d=e[r];if(Number(d)>0){const f=`spacing-${r}-${String(d)}`;i.push(f)}}),i}const U5=e=>{const{classes:t,container:i,direction:r,item:d,spacing:f,wrap:v,zeroMinWidth:h,breakpoints:s}=e;let U=[];i&&(U=D5(f,s));const $=[];s.forEach(q=>{const te=e[q];te&&$.push(`grid-${q}-${String(te)}`)});const V={root:["root",i&&"container",d&&"item",h&&"zeroMinWidth",...U,r!=="row"&&`direction-xs-${String(r)}`,v!=="wrap"&&`wrap-xs-${String(v)}`,...$]};return Us(V,C5,t)},xA=Yr(function(t,i){const r=zs({props:t,name:"MuiGrid"}),{breakpoints:d}=Qy(),f=HM(r),{className:v,columns:h,columnSpacing:s,component:U="div",container:$=!1,direction:V="row",item:q=!1,rowSpacing:te,spacing:he=0,wrap:Ae="wrap",zeroMinWidth:De=!1}=f,ke=gr(f,S5),xe=te||he,Te=s||he,Ee=nl(oL),Fe=$?h||12:Ee,Se={},nt=ct({},ke);d.keys.forEach(Xe=>{ke[Xe]!=null&&(Se[Xe]=ke[Xe],delete nt[Xe])});const xt=ct({},f,{columns:Fe,container:$,direction:V,item:q,rowSpacing:xe,columnSpacing:Te,wrap:Ae,zeroMinWidth:De,spacing:he},Se,{breakpoints:d.keys}),Bt=U5(xt);return ze(oL.Provider,{value:Fe,children:ze(F5,ct({ownerState:xt,className:$r(Bt.root,v),as:U,ref:i},nt))})}),z5={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},R5={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"},O5={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},aL={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4"},lL={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5"},N5=Object.freeze(Object.defineProperty({__proto__:null,amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},blue:vp,blueGrey:{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037"},common:r_,cyan:aL,deepOrange:{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"},deepPurple:R5,green:Rf,grey:JM,indigo:O5,lightBlue:Dm,lightGreen:{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00"},orange:Fm,pink:z5,purple:km,red:Pm,teal:lL,yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"}},Symbol.toStringTag,{value:"Module"})),Q5=["theme"];function $5(e){let{theme:t}=e,i=gr(e,Q5);const r=t[o_];return ze(JN,ct({},i,{themeId:r?o_:void 0,theme:r||t}))}const cL=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function j5(e){return Ls("MuiSvgIcon",e)}bs("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const H5=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],V5=e=>{const{color:t,fontSize:i,classes:r}=e,d={root:["root",t!=="inherit"&&`color${qi(t)}`,`fontSize${qi(i)}`]};return Us(d,j5,r)},G5=Fi("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.color!=="inherit"&&t[`color${qi(i.color)}`],t[`fontSize${qi(i.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var i,r,d,f,v,h,s,U,$,V,q,te,he;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(i=e.transitions)==null||(r=i.create)==null?void 0:r.call(i,"fill",{duration:(d=e.transitions)==null||(d=d.duration)==null?void 0:d.shorter}),fontSize:{inherit:"inherit",small:((f=e.typography)==null||(v=f.pxToRem)==null?void 0:v.call(f,20))||"1.25rem",medium:((h=e.typography)==null||(s=h.pxToRem)==null?void 0:s.call(h,24))||"1.5rem",large:((U=e.typography)==null||($=U.pxToRem)==null?void 0:$.call(U,35))||"2.1875rem"}[t.fontSize],color:(V=(q=(e.vars||e).palette)==null||(q=q[t.color])==null?void 0:q.main)!=null?V:{action:(te=(e.vars||e).palette)==null||(te=te.action)==null?void 0:te.active,disabled:(he=(e.vars||e).palette)==null||(he=he.action)==null?void 0:he.disabled,inherit:void 0}[t.color]}}),uL=Yr(function(t,i){const r=zs({props:t,name:"MuiSvgIcon"}),{children:d,className:f,color:v="inherit",component:h="svg",fontSize:s="medium",htmlColor:U,inheritViewBox:$=!1,titleAccess:V,viewBox:q="0 0 24 24"}=r,te=gr(r,H5),he=Ha(d)&&d.type==="svg",Ae=ct({},r,{color:v,component:h,fontSize:s,instanceFontSize:t.fontSize,inheritViewBox:$,viewBox:q,hasSvgAsChild:he}),De={};$||(De.viewBox=q);const ke=V5(Ae);return ze(G5,ct({as:h,className:$r(ke.root,f),focusable:"false",color:U,"aria-hidden":V?void 0:!0,role:V?"img":void 0,ref:i},De,te,he&&d.props,{ownerState:Ae,children:[he?d.props.children:d,V?ze("title",{children:V}):null]}))});uL.muiName="SvgIcon";const hL=uL;function bA(e,t){function i(r,d){return ze(hL,ct({"data-testid":`${t}Icon`,ref:d},r,{children:e}))}return i.muiName=hL.muiName,ZA(Yr(i))}const W5=Object.freeze(Object.defineProperty({__proto__:null,capitalize:qi,createChainedFunction:z1,createSvgIcon:bA,debounce:R1,deprecatedPropType:h4,isMuiElement:G0,ownerDocument:th,ownerWindow:yp,requirePropFactory:d4,setRef:Iy,unstable_ClassNameGenerator:{configure:e=>{aM.configure(e)}},unstable_useEnhancedEffect:yA,unstable_useId:My,unsupportedProp:f4,useControlled:Mm,useEventCallback:zd,useForkRef:Ul,useIsFocusVisible:K0},Symbol.toStringTag,{value:"Module"}));var ma={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pC=Symbol.for("react.element"),mC=Symbol.for("react.portal"),Ex=Symbol.for("react.fragment"),Sx=Symbol.for("react.strict_mode"),Ix=Symbol.for("react.profiler"),Mx=Symbol.for("react.provider"),Lx=Symbol.for("react.context"),K5=Symbol.for("react.server_context"),kx=Symbol.for("react.forward_ref"),Px=Symbol.for("react.suspense"),Fx=Symbol.for("react.suspense_list"),Dx=Symbol.for("react.memo"),Ux=Symbol.for("react.lazy"),Z5=Symbol.for("react.offscreen"),dL;dL=Symbol.for("react.module.reference");function Qd(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case pC:switch(e=e.type,e){case Ex:case Ix:case Sx:case Px:case Fx:return e;default:switch(e=e&&e.$$typeof,e){case K5:case Lx:case kx:case Ux:case Dx:case Mx:return e;default:return t}}case mC:return t}}}ma.ContextConsumer=Lx,ma.ContextProvider=Mx,ma.Element=pC,ma.ForwardRef=kx,ma.Fragment=Ex,ma.Lazy=Ux,ma.Memo=Dx,ma.Portal=mC,ma.Profiler=Ix,ma.StrictMode=Sx,ma.Suspense=Px,ma.SuspenseList=Fx,ma.isAsyncMode=function(){return!1},ma.isConcurrentMode=function(){return!1},ma.isContextConsumer=function(e){return Qd(e)===Lx},ma.isContextProvider=function(e){return Qd(e)===Mx},ma.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===pC},ma.isForwardRef=function(e){return Qd(e)===kx},ma.isFragment=function(e){return Qd(e)===Ex},ma.isLazy=function(e){return Qd(e)===Ux},ma.isMemo=function(e){return Qd(e)===Dx},ma.isPortal=function(e){return Qd(e)===mC},ma.isProfiler=function(e){return Qd(e)===Ix},ma.isStrictMode=function(e){return Qd(e)===Sx},ma.isSuspense=function(e){return Qd(e)===Px},ma.isSuspenseList=function(e){return Qd(e)===Fx},ma.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ex||e===Ix||e===Sx||e===Px||e===Fx||e===Z5||typeof e=="object"&&e!==null&&(e.$$typeof===Ux||e.$$typeof===Dx||e.$$typeof===Mx||e.$$typeof===Lx||e.$$typeof===kx||e.$$typeof===dL||e.getModuleId!==void 0)},ma.typeOf=Qd;function zx(e,t){return zx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,d){return r.__proto__=d,r},zx(e,t)}function Rx(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,zx(e,t)}const AL={disabled:!1},Ox=ka.createContext(null);var q5=function(t){return t.scrollTop},Hy="unmounted",Um="exited",zm="entering",a_="entered",gC="exiting",Of=function(e){Rx(t,e);function t(r,d){var f;f=e.call(this,r,d)||this;var v=d,h=v&&!v.isMounting?r.enter:r.appear,s;return f.appearStatus=null,r.in?h?(s=Um,f.appearStatus=zm):s=a_:r.unmountOnExit||r.mountOnEnter?s=Hy:s=Um,f.state={status:s},f.nextCallback=null,f}t.getDerivedStateFromProps=function(d,f){var v=d.in;return v&&f.status===Hy?{status:Um}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(d){var f=null;if(d!==this.props){var v=this.state.status;this.props.in?v!==zm&&v!==a_&&(f=zm):(v===zm||v===a_)&&(f=gC)}this.updateStatus(!1,f)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var d=this.props.timeout,f,v,h;return f=v=h=d,d!=null&&typeof d!="number"&&(f=d.exit,v=d.enter,h=d.appear!==void 0?d.appear:v),{exit:f,enter:v,appear:h}},i.updateStatus=function(d,f){if(d===void 0&&(d=!1),f!==null)if(this.cancelNextCallback(),f===zm){if(this.props.unmountOnExit||this.props.mountOnEnter){var v=this.props.nodeRef?this.props.nodeRef.current:ka.findDOMNode(this);v&&q5(v)}this.performEnter(d)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Um&&this.setState({status:Hy})},i.performEnter=function(d){var f=this,v=this.props.enter,h=this.context?this.context.isMounting:d,s=this.props.nodeRef?[h]:[ka.findDOMNode(this),h],U=s[0],$=s[1],V=this.getTimeouts(),q=h?V.appear:V.enter;if(!d&&!v||AL.disabled){this.safeSetState({status:a_},function(){f.props.onEntered(U)});return}this.props.onEnter(U,$),this.safeSetState({status:zm},function(){f.props.onEntering(U,$),f.onTransitionEnd(q,function(){f.safeSetState({status:a_},function(){f.props.onEntered(U,$)})})})},i.performExit=function(){var d=this,f=this.props.exit,v=this.getTimeouts(),h=this.props.nodeRef?void 0:ka.findDOMNode(this);if(!f||AL.disabled){this.safeSetState({status:Um},function(){d.props.onExited(h)});return}this.props.onExit(h),this.safeSetState({status:gC},function(){d.props.onExiting(h),d.onTransitionEnd(v.exit,function(){d.safeSetState({status:Um},function(){d.props.onExited(h)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(d,f){f=this.setNextCallback(f),this.setState(d,f)},i.setNextCallback=function(d){var f=this,v=!0;return this.nextCallback=function(h){v&&(v=!1,f.nextCallback=null,d(h))},this.nextCallback.cancel=function(){v=!1},this.nextCallback},i.onTransitionEnd=function(d,f){this.setNextCallback(f);var v=this.props.nodeRef?this.props.nodeRef.current:ka.findDOMNode(this),h=d==null&&!this.props.addEndListener;if(!v||h){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[v,this.nextCallback],U=s[0],$=s[1];this.props.addEndListener(U,$)}d!=null&&setTimeout(this.nextCallback,d)},i.render=function(){var d=this.state.status;if(d===Hy)return null;var f=this.props,v=f.children;f.in,f.mountOnEnter,f.unmountOnExit,f.appear,f.enter,f.exit,f.timeout,f.addEndListener,f.onEnter,f.onEntering,f.onEntered,f.onExit,f.onExiting,f.onExited,f.nodeRef;var h=gr(f,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ka.createElement(Ox.Provider,{value:null},typeof v=="function"?v(d,h):ka.cloneElement(ka.Children.only(v),h))},t}(ka.Component);Of.contextType=Ox,Of.propTypes={};function l_(){}Of.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:l_,onEntering:l_,onEntered:l_,onExit:l_,onExiting:l_,onExited:l_},Of.UNMOUNTED=Hy,Of.EXITED=Um,Of.ENTERING=zm,Of.ENTERED=a_,Of.EXITING=gC;const fL=Of;function tf(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _C(e,t){var i=function(f){return t&&Ha(f)?t(f):f},r=Object.create(null);return e&&mA.map(e,function(d){return d}).forEach(function(d){r[d.key]=i(d)}),r}function X5(e,t){e=e||{},t=t||{};function i($){return $ in t?t[$]:e[$]}var r=Object.create(null),d=[];for(var f in e)f in t?d.length&&(r[f]=d,d=[]):d.push(f);var v,h={};for(var s in t){if(r[s])for(v=0;v<r[s].length;v++){var U=r[s][v];h[r[s][v]]=i(U)}h[s]=i(s)}for(v=0;v<d.length;v++)h[d[v]]=i(d[v]);return h}function Rm(e,t,i){return i[t]!=null?i[t]:e.props[t]}function Y5(e,t){return _C(e.children,function(i){return pl(i,{onExited:t.bind(null,i),in:!0,appear:Rm(i,"appear",e),enter:Rm(i,"enter",e),exit:Rm(i,"exit",e)})})}function J5(e,t,i){var r=_C(e.children),d=X5(t,r);return Object.keys(d).forEach(function(f){var v=d[f];if(Ha(v)){var h=f in t,s=f in r,U=t[f],$=Ha(U)&&!U.props.in;s&&(!h||$)?d[f]=pl(v,{onExited:i.bind(null,v),in:!0,exit:Rm(v,"exit",e),enter:Rm(v,"enter",e)}):!s&&h&&!$?d[f]=pl(v,{in:!1}):s&&h&&Ha(U)&&(d[f]=pl(v,{onExited:i.bind(null,v),in:U.props.in,exit:Rm(v,"exit",e),enter:Rm(v,"enter",e)}))}}),d}var e2=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},t2={component:"div",childFactory:function(t){return t}},yC=function(e){Rx(t,e);function t(r,d){var f;f=e.call(this,r,d)||this;var v=f.handleExited.bind(tf(f));return f.state={contextValue:{isMounting:!0},handleExited:v,firstRender:!0},f}var i=t.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(d,f){var v=f.children,h=f.handleExited,s=f.firstRender;return{children:s?Y5(d,h):J5(d,v,h),firstRender:!1}},i.handleExited=function(d,f){var v=_C(this.props.children);d.key in v||(d.props.onExited&&d.props.onExited(f),this.mounted&&this.setState(function(h){var s=ct({},h.children);return delete s[d.key],{children:s}}))},i.render=function(){var d=this.props,f=d.component,v=d.childFactory,h=gr(d,["component","childFactory"]),s=this.state.contextValue,U=e2(this.state.children).map(v);return delete h.appear,delete h.enter,delete h.exit,f===null?ka.createElement(Ox.Provider,{value:s},U):ka.createElement(Ox.Provider,{value:s},ka.createElement(f,h,U))},t}(ka.Component);yC.propTypes={},yC.defaultProps=t2;const n2=yC,pL=e=>e.scrollTop;function Nx(e,t){var i,r;const{timeout:d,easing:f,style:v={}}=e;return{duration:(i=v.transitionDuration)!=null?i:typeof d=="number"?d:d[t.mode]||0,easing:(r=v.transitionTimingFunction)!=null?r:typeof f=="object"?f[t.mode]:f,delay:v.transitionDelay}}function i2(e){return Ls("MuiPaper",e)}bs("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const r2=["className","component","elevation","square","variant"],o2=e=>{const{square:t,elevation:i,variant:r,classes:d}=e,f={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${i}`]};return Us(f,i2,d)},s2=Fi("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],!i.square&&t.rounded,i.variant==="elevation"&&t[`elevation${i.elevation}`]]}})(({theme:e,ownerState:t})=>{var i;return ct({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&ct({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${ho("#fff",cL(t.elevation))}, ${ho("#fff",cL(t.elevation))})`},e.vars&&{backgroundImage:(i=e.vars.overlays)==null?void 0:i[t.elevation]}))}),Vy=Yr(function(t,i){const r=zs({props:t,name:"MuiPaper"}),{className:d,component:f="div",elevation:v=1,square:h=!1,variant:s="elevation"}=r,U=gr(r,r2),$=ct({},r,{component:f,elevation:v,square:h,variant:s}),V=o2($);return ze(s2,ct({as:f,ownerState:$,className:$r(V.root,d),ref:i},U))});function a2(e){const{className:t,classes:i,pulsate:r=!1,rippleX:d,rippleY:f,rippleSize:v,in:h,onExited:s,timeout:U}=e,[$,V]=ur(!1),q=$r(t,i.ripple,i.rippleVisible,r&&i.ripplePulsate),te={width:v,height:v,top:-(v/2)+f,left:-(v/2)+d},he=$r(i.child,$&&i.childLeaving,r&&i.childPulsate);return!h&&!$&&V(!0),$i(()=>{if(!h&&s!=null){const Ae=setTimeout(s,U);return()=>{clearTimeout(Ae)}}},[s,h,U]),ze("span",{className:q,style:te,children:ze("span",{className:he})})}const $d=bs("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),l2=["center","classes","className"];let Qx=e=>e,mL,gL,_L,yL;const vC=550,c2=80,u2=Uy(mL||(mL=Qx`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),h2=Uy(gL||(gL=Qx`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),d2=Uy(_L||(_L=Qx`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),A2=Fi("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),f2=Fi(a2,{name:"MuiTouchRipple",slot:"Ripple"})(yL||(yL=Qx`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),$d.rippleVisible,u2,vC,({theme:e})=>e.transitions.easing.easeInOut,$d.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,$d.child,$d.childLeaving,h2,vC,({theme:e})=>e.transitions.easing.easeInOut,$d.childPulsate,d2,({theme:e})=>e.transitions.easing.easeInOut),p2=Yr(function(t,i){const r=zs({props:t,name:"MuiTouchRipple"}),{center:d=!1,classes:f={},className:v}=r,h=gr(r,l2),[s,U]=ur([]),$=Pi(0),V=Pi(null);$i(()=>{V.current&&(V.current(),V.current=null)},[s]);const q=Pi(!1),te=Pi(0),he=Pi(null),Ae=Pi(null);$i(()=>()=>{te.current&&clearTimeout(te.current)},[]);const De=xs(Ee=>{const{pulsate:Fe,rippleX:Se,rippleY:nt,rippleSize:xt,cb:Bt}=Ee;U(Xe=>[...Xe,ze(f2,{classes:{ripple:$r(f.ripple,$d.ripple),rippleVisible:$r(f.rippleVisible,$d.rippleVisible),ripplePulsate:$r(f.ripplePulsate,$d.ripplePulsate),child:$r(f.child,$d.child),childLeaving:$r(f.childLeaving,$d.childLeaving),childPulsate:$r(f.childPulsate,$d.childPulsate)},timeout:vC,pulsate:Fe,rippleX:Se,rippleY:nt,rippleSize:xt},$.current)]),$.current+=1,V.current=Bt},[f]),ke=xs((Ee={},Fe={},Se=()=>{})=>{const{pulsate:nt=!1,center:xt=d||Fe.pulsate,fakeElement:Bt=!1}=Fe;if((Ee==null?void 0:Ee.type)==="mousedown"&&q.current){q.current=!1;return}(Ee==null?void 0:Ee.type)==="touchstart"&&(q.current=!0);const Xe=Bt?null:Ae.current,qt=Xe?Xe.getBoundingClientRect():{width:0,height:0,left:0,top:0};let rn,Ut,Kt;if(xt||Ee===void 0||Ee.clientX===0&&Ee.clientY===0||!Ee.clientX&&!Ee.touches)rn=Math.round(qt.width/2),Ut=Math.round(qt.height/2);else{const{clientX:On,clientY:Gt}=Ee.touches&&Ee.touches.length>0?Ee.touches[0]:Ee;rn=Math.round(On-qt.left),Ut=Math.round(Gt-qt.top)}if(xt)Kt=Math.sqrt((2*qt.width**2+qt.height**2)/3),Kt%2===0&&(Kt+=1);else{const On=Math.max(Math.abs((Xe?Xe.clientWidth:0)-rn),rn)*2+2,Gt=Math.max(Math.abs((Xe?Xe.clientHeight:0)-Ut),Ut)*2+2;Kt=Math.sqrt(On**2+Gt**2)}Ee!=null&&Ee.touches?he.current===null&&(he.current=()=>{De({pulsate:nt,rippleX:rn,rippleY:Ut,rippleSize:Kt,cb:Se})},te.current=setTimeout(()=>{he.current&&(he.current(),he.current=null)},c2)):De({pulsate:nt,rippleX:rn,rippleY:Ut,rippleSize:Kt,cb:Se})},[d,De]),xe=xs(()=>{ke({},{pulsate:!0})},[ke]),Te=xs((Ee,Fe)=>{if(clearTimeout(te.current),(Ee==null?void 0:Ee.type)==="touchend"&&he.current){he.current(),he.current=null,te.current=setTimeout(()=>{Te(Ee,Fe)});return}he.current=null,U(Se=>Se.length>0?Se.slice(1):Se),V.current=Fe},[]);return Ih(i,()=>({pulsate:xe,start:ke,stop:Te}),[xe,ke,Te]),ze(A2,ct({className:$r($d.root,f.root,v),ref:Ae},h,{children:ze(n2,{component:null,exit:!0,children:s})}))});function m2(e){return Ls("MuiButtonBase",e)}const g2=bs("MuiButtonBase",["root","disabled","focusVisible"]),_2=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],y2=e=>{const{disabled:t,focusVisible:i,focusVisibleClassName:r,classes:d}=e,v=Us({root:["root",t&&"disabled",i&&"focusVisible"]},m2,d);return i&&r&&(v.root+=` ${r}`),v},v2=Fi("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${g2.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),$x=Yr(function(t,i){const r=zs({props:t,name:"MuiButtonBase"}),{action:d,centerRipple:f=!1,children:v,className:h,component:s="button",disabled:U=!1,disableRipple:$=!1,disableTouchRipple:V=!1,focusRipple:q=!1,LinkComponent:te="a",onBlur:he,onClick:Ae,onContextMenu:De,onDragLeave:ke,onFocus:xe,onFocusVisible:Te,onKeyDown:Ee,onKeyUp:Fe,onMouseDown:Se,onMouseLeave:nt,onMouseUp:xt,onTouchEnd:Bt,onTouchMove:Xe,onTouchStart:qt,tabIndex:rn=0,TouchRippleProps:Ut,touchRippleRef:Kt,type:On}=r,Gt=gr(r,_2),Rn=Pi(null),mn=Pi(null),Cn=Ul(mn,Kt),{isFocusVisibleRef:Qt,onFocus:Xn,onBlur:Wn,ref:Bi}=K0(),[Bn,Hn]=ur(!1);U&&Bn&&Hn(!1),Ih(d,()=>({focusVisible:()=>{Hn(!0),Rn.current.focus()}}),[]);const[ei,tr]=ur(!1);$i(()=>{tr(!0)},[]);const ri=ei&&!$&&!U;$i(()=>{Bn&&q&&!$&&ei&&mn.current.pulsate()},[$,q,Bn,ei]);function zi(en,Fr,So=V){return zd(er=>(Fr&&Fr(er),!So&&mn.current&&mn.current[en](er),!0))}const Vr=zi("start",Se),sr=zi("stop",De),li=zi("stop",ke),Qi=zi("stop",xt),Ki=zi("stop",en=>{Bn&&en.preventDefault(),nt&&nt(en)}),ji=zi("start",qt),di=zi("stop",Bt),Ir=zi("stop",Xe),nr=zi("stop",en=>{Wn(en),Qt.current===!1&&Hn(!1),he&&he(en)},!1),Ri=zd(en=>{Rn.current||(Rn.current=en.currentTarget),Xn(en),Qt.current===!0&&(Hn(!0),Te&&Te(en)),xe&&xe(en)}),hr=()=>{const en=Rn.current;return s&&s!=="button"&&!(en.tagName==="A"&&en.href)},ir=Pi(!1),Ur=zd(en=>{q&&!ir.current&&Bn&&mn.current&&en.key===" "&&(ir.current=!0,mn.current.stop(en,()=>{mn.current.start(en)})),en.target===en.currentTarget&&hr()&&en.key===" "&&en.preventDefault(),Ee&&Ee(en),en.target===en.currentTarget&&hr()&&en.key==="Enter"&&!U&&(en.preventDefault(),Ae&&Ae(en))}),jr=zd(en=>{q&&en.key===" "&&mn.current&&Bn&&!en.defaultPrevented&&(ir.current=!1,mn.current.stop(en,()=>{mn.current.pulsate(en)})),Fe&&Fe(en),Ae&&en.target===en.currentTarget&&hr()&&en.key===" "&&!en.defaultPrevented&&Ae(en)});let pr=s;pr==="button"&&(Gt.href||Gt.to)&&(pr=te);const Zr={};pr==="button"?(Zr.type=On===void 0?"button":On,Zr.disabled=U):(!Gt.href&&!Gt.to&&(Zr.role="button"),U&&(Zr["aria-disabled"]=U));const Eo=Ul(i,Bi,Rn),Ao=ct({},r,{centerRipple:f,component:s,disabled:U,disableRipple:$,disableTouchRipple:V,focusRipple:q,tabIndex:rn,focusVisible:Bn}),$t=y2(Ao);return ze(v2,ct({as:pr,className:$r($t.root,h),ownerState:Ao,onBlur:nr,onClick:Ae,onContextMenu:sr,onFocus:Ri,onKeyDown:Ur,onKeyUp:jr,onMouseDown:Vr,onMouseLeave:Ki,onMouseUp:Qi,onDragLeave:li,onTouchEnd:di,onTouchMove:Ir,onTouchStart:ji,ref:Eo,tabIndex:U?-1:rn,type:On},Zr,Gt,{children:[v,ri?ze(p2,ct({ref:Cn,center:f},Ut)):null]}))});function x2(e){return Ls("MuiAlert",e)}const vL=bs("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function b2(e){return Ls("MuiIconButton",e)}const w2=bs("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),C2=["edge","children","className","color","disabled","disableFocusRipple","size"],B2=e=>{const{classes:t,disabled:i,color:r,edge:d,size:f}=e,v={root:["root",i&&"disabled",r!=="default"&&`color${qi(r)}`,d&&`edge${qi(d)}`,`size${qi(f)}`]};return Us(v,b2,t)},T2=Fi($x,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.color!=="default"&&t[`color${qi(i.color)}`],i.edge&&t[`edge${qi(i.edge)}`],t[`size${qi(i.size)}`]]}})(({theme:e,ownerState:t})=>ct({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ho(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var i;const r=(i=(e.vars||e).palette)==null?void 0:i[t.color];return ct({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&ct({color:r==null?void 0:r.main},!t.disableRipple&&{"&:hover":ct({},r&&{backgroundColor:e.vars?`rgba(${r.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ho(r.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${w2.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),jx=Yr(function(t,i){const r=zs({props:t,name:"MuiIconButton"}),{edge:d=!1,children:f,className:v,color:h="default",disabled:s=!1,disableFocusRipple:U=!1,size:$="medium"}=r,V=gr(r,C2),q=ct({},r,{edge:d,color:h,disabled:s,disableFocusRipple:U,size:$}),te=B2(q);return ze(T2,ct({className:$r(te.root,v),centerRipple:!0,focusRipple:!U,disabled:s,ref:i,ownerState:q},V,{children:f}))}),E2=bA(ze("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),S2=bA(ze("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),I2=bA(ze("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),M2=bA(ze("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),xL=bA(ze("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),L2=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],k2=e=>{const{variant:t,color:i,severity:r,classes:d}=e,f={root:["root",`${t}${qi(i||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return Us(f,x2,d)},P2=Fi(Vy,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`${i.variant}${qi(i.color||i.severity)}`]]}})(({theme:e,ownerState:t})=>{const i=e.palette.mode==="light"?i_:hC,r=e.palette.mode==="light"?hC:i_,d=t.color||t.severity;return ct({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},d&&t.variant==="standard"&&{color:e.vars?e.vars.palette.Alert[`${d}Color`]:i(e.palette[d].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${d}StandardBg`]:r(e.palette[d].light,.9),[`& .${vL.icon}`]:e.vars?{color:e.vars.palette.Alert[`${d}IconColor`]}:{color:e.palette[d].main}},d&&t.variant==="outlined"&&{color:e.vars?e.vars.palette.Alert[`${d}Color`]:i(e.palette[d].light,.6),border:`1px solid ${(e.vars||e).palette[d].light}`,[`& .${vL.icon}`]:e.vars?{color:e.vars.palette.Alert[`${d}IconColor`]}:{color:e.palette[d].main}},d&&t.variant==="filled"&&ct({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${d}FilledColor`],backgroundColor:e.vars.palette.Alert[`${d}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[d].dark:e.palette[d].main,color:e.palette.getContrastText(e.palette[d].main)}))}),F2=Fi("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),D2=Fi("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),bL=Fi("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),wL={success:ze(E2,{fontSize:"inherit"}),warning:ze(S2,{fontSize:"inherit"}),error:ze(I2,{fontSize:"inherit"}),info:ze(M2,{fontSize:"inherit"})},xC=Yr(function(t,i){var r,d,f,v,h,s;const U=zs({props:t,name:"MuiAlert"}),{action:$,children:V,className:q,closeText:te="Close",color:he,components:Ae={},componentsProps:De={},icon:ke,iconMapping:xe=wL,onClose:Te,role:Ee="alert",severity:Fe="success",slotProps:Se={},slots:nt={},variant:xt="standard"}=U,Bt=gr(U,L2),Xe=ct({},U,{color:he,severity:Fe,variant:xt}),qt=k2(Xe),rn=(r=(d=nt.closeButton)!=null?d:Ae.CloseButton)!=null?r:jx,Ut=(f=(v=nt.closeIcon)!=null?v:Ae.CloseIcon)!=null?f:xL,Kt=(h=Se.closeButton)!=null?h:De.closeButton,On=(s=Se.closeIcon)!=null?s:De.closeIcon;return ze(P2,ct({role:Ee,elevation:0,ownerState:Xe,className:$r(qt.root,q),ref:i},Bt,{children:[ke!==!1?ze(F2,{ownerState:Xe,className:qt.icon,children:ke||xe[Fe]||wL[Fe]}):null,ze(D2,{ownerState:Xe,className:qt.message,children:V}),$!=null?ze(bL,{ownerState:Xe,className:qt.action,children:$}):null,$==null&&Te?ze(bL,{ownerState:Xe,className:qt.action,children:ze(rn,ct({size:"small","aria-label":te,title:te,color:"inherit",onClick:Te},Kt,{children:ze(Ut,ct({fontSize:"small"},On))}))}):null]}))});function U2(e){return Ls("MuiTypography",e)}bs("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const z2=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],R2=e=>{const{align:t,gutterBottom:i,noWrap:r,paragraph:d,variant:f,classes:v}=e,h={root:["root",f,e.align!=="inherit"&&`align${qi(t)}`,i&&"gutterBottom",r&&"noWrap",d&&"paragraph"]};return Us(h,U2,v)},O2=Fi("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.variant&&t[i.variant],i.align!=="inherit"&&t[`align${qi(i.align)}`],i.noWrap&&t.noWrap,i.gutterBottom&&t.gutterBottom,i.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>ct({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),CL={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},N2={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Q2=e=>N2[e]||e,ml=Yr(function(t,i){const r=zs({props:t,name:"MuiTypography"}),d=Q2(r.color),f=HM(ct({},r,{color:d})),{align:v="inherit",className:h,component:s,gutterBottom:U=!1,noWrap:$=!1,paragraph:V=!1,variant:q="body1",variantMapping:te=CL}=f,he=gr(f,z2),Ae=ct({},f,{align:v,color:d,className:h,component:s,gutterBottom:U,noWrap:$,paragraph:V,variant:q,variantMapping:te}),De=s||(V?"p":te[q]||CL[q])||"span",ke=R2(Ae);return ze(O2,ct({as:De,ref:i,ownerState:Ae,className:$r(ke.root,h)},he))});function Hx(e){return typeof e=="string"}function Gy(e,t,i){return e===void 0||Hx(e)?t:ct({},t,{ownerState:ct({},t.ownerState,i)})}const $2=Sh({disableDefaultClasses:!1});function j2(e){const{disableDefaultClasses:t}=nl($2);return i=>t?"":e(i)}function BL(e,t=[]){if(e===void 0)return{};const i={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{i[r]=e[r]}),i}function H2(e,t,i){return typeof e=="function"?e(t,i):e}function TL(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(i=>!(i.match(/^on[A-Z]/)&&typeof e[i]=="function")).forEach(i=>{t[i]=e[i]}),t}function V2(e){const{getSlotProps:t,additionalProps:i,externalSlotProps:r,externalForwardedProps:d,className:f}=e;if(!t){const te=$r(i==null?void 0:i.className,f,d==null?void 0:d.className,r==null?void 0:r.className),he=ct({},i==null?void 0:i.style,d==null?void 0:d.style,r==null?void 0:r.style),Ae=ct({},i,d,r);return te.length>0&&(Ae.className=te),Object.keys(he).length>0&&(Ae.style=he),{props:Ae,internalRef:void 0}}const v=BL(ct({},d,r)),h=TL(r),s=TL(d),U=t(v),$=$r(U==null?void 0:U.className,i==null?void 0:i.className,f,d==null?void 0:d.className,r==null?void 0:r.className),V=ct({},U==null?void 0:U.style,i==null?void 0:i.style,d==null?void 0:d.style,r==null?void 0:r.style),q=ct({},U,i,s,h);return $.length>0&&(q.className=$),Object.keys(V).length>0&&(q.style=V),{props:q,internalRef:U.ref}}const G2=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Om(e){var t;const{elementType:i,externalSlotProps:r,ownerState:d,skipResolvingSlotProps:f=!1}=e,v=gr(e,G2),h=f?{}:H2(r,d),{props:s,internalRef:U}=V2(ct({},v,{externalSlotProps:h})),$=Ul(U,h==null?void 0:h.ref,(t=e.additionalProps)==null?void 0:t.ref);return Gy(i,ct({},s,{ref:$}),d)}const W2=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function K2(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function Z2(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let i=t(`[name="${e.name}"]:checked`);return i||(i=t(`[name="${e.name}"]`)),i!==e}function q2(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||Z2(e))}function X2(e){const t=[],i=[];return Array.from(e.querySelectorAll(W2)).forEach((r,d)=>{const f=K2(r);f===-1||!q2(r)||(f===0?t.push(r):i.push({documentOrder:d,tabIndex:f,node:r}))}),i.sort((r,d)=>r.tabIndex===d.tabIndex?r.documentOrder-d.documentOrder:r.tabIndex-d.tabIndex).map(r=>r.node).concat(t)}function Y2(){return!0}function J2(e){const{children:t,disableAutoFocus:i=!1,disableEnforceFocus:r=!1,disableRestoreFocus:d=!1,getTabbable:f=X2,isEnabled:v=Y2,open:h}=e,s=Pi(!1),U=Pi(null),$=Pi(null),V=Pi(null),q=Pi(null),te=Pi(!1),he=Pi(null),Ae=Ul(t.ref,he),De=Pi(null);$i(()=>{!h||!he.current||(te.current=!i)},[i,h]),$i(()=>{if(!h||!he.current)return;const Te=th(he.current);return he.current.contains(Te.activeElement)||(he.current.hasAttribute("tabIndex")||he.current.setAttribute("tabIndex","-1"),te.current&&he.current.focus()),()=>{d||(V.current&&V.current.focus&&(s.current=!0,V.current.focus()),V.current=null)}},[h]),$i(()=>{if(!h||!he.current)return;const Te=th(he.current),Ee=nt=>{De.current=nt,!(r||!v()||nt.key!=="Tab")&&Te.activeElement===he.current&&nt.shiftKey&&(s.current=!0,$.current&&$.current.focus())},Fe=()=>{const nt=he.current;if(nt===null)return;if(!Te.hasFocus()||!v()||s.current){s.current=!1;return}if(nt.contains(Te.activeElement)||r&&Te.activeElement!==U.current&&Te.activeElement!==$.current)return;if(Te.activeElement!==q.current)q.current=null;else if(q.current!==null)return;if(!te.current)return;let xt=[];if((Te.activeElement===U.current||Te.activeElement===$.current)&&(xt=f(he.current)),xt.length>0){var Bt,Xe;const qt=!!((Bt=De.current)!=null&&Bt.shiftKey&&((Xe=De.current)==null?void 0:Xe.key)==="Tab"),rn=xt[0],Ut=xt[xt.length-1];typeof rn!="string"&&typeof Ut!="string"&&(qt?Ut.focus():rn.focus())}else nt.focus()};Te.addEventListener("focusin",Fe),Te.addEventListener("keydown",Ee,!0);const Se=setInterval(()=>{Te.activeElement&&Te.activeElement.tagName==="BODY"&&Fe()},50);return()=>{clearInterval(Se),Te.removeEventListener("focusin",Fe),Te.removeEventListener("keydown",Ee,!0)}},[i,r,d,v,h,f]);const ke=Te=>{V.current===null&&(V.current=Te.relatedTarget),te.current=!0,q.current=Te.target;const Ee=t.props.onFocus;Ee&&Ee(Te)},xe=Te=>{V.current===null&&(V.current=Te.relatedTarget),te.current=!0};return ze(vs,{children:[ze("div",{tabIndex:h?0:-1,onFocus:xe,ref:U,"data-testid":"sentinelStart"}),pl(t,{ref:Ae,onFocus:ke}),ze("div",{tabIndex:h?0:-1,onFocus:xe,ref:$,"data-testid":"sentinelEnd"})]})}var qh="top",jd="bottom",Hd="right",Xh="left",bC="auto",Wy=[qh,jd,Hd,Xh],c_="start",Ky="end",eQ="clippingParents",EL="viewport",Zy="popper",tQ="reference",SL=Wy.reduce(function(e,t){return e.concat([t+"-"+c_,t+"-"+Ky])},[]),IL=[].concat(Wy,[bC]).reduce(function(e,t){return e.concat([t,t+"-"+c_,t+"-"+Ky])},[]),nQ="beforeRead",iQ="read",rQ="afterRead",oQ="beforeMain",sQ="main",aQ="afterMain",lQ="beforeWrite",cQ="write",uQ="afterWrite",hQ=[nQ,iQ,rQ,oQ,sQ,aQ,lQ,cQ,uQ];function nf(e){return e?(e.nodeName||"").toLowerCase():null}function dd(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Nm(e){var t=dd(e).Element;return e instanceof t||e instanceof Element}function Vd(e){var t=dd(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function wC(e){if(typeof ShadowRoot>"u")return!1;var t=dd(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function dQ(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},d=t.attributes[i]||{},f=t.elements[i];!Vd(f)||!nf(f)||(Object.assign(f.style,r),Object.keys(d).forEach(function(v){var h=d[v];h===!1?f.removeAttribute(v):f.setAttribute(v,h===!0?"":h)}))})}function AQ(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var d=t.elements[r],f=t.attributes[r]||{},v=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),h=v.reduce(function(s,U){return s[U]="",s},{});!Vd(d)||!nf(d)||(Object.assign(d.style,h),Object.keys(f).forEach(function(s){d.removeAttribute(s)}))})}}const fQ={name:"applyStyles",enabled:!0,phase:"write",fn:dQ,effect:AQ,requires:["computeStyles"]};function rf(e){return e.split("-")[0]}var Qm=Math.max,Vx=Math.min,u_=Math.round;function CC(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ML(){return!/^((?!chrome|android).)*safari/i.test(CC())}function h_(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r=e.getBoundingClientRect(),d=1,f=1;t&&Vd(e)&&(d=e.offsetWidth>0&&u_(r.width)/e.offsetWidth||1,f=e.offsetHeight>0&&u_(r.height)/e.offsetHeight||1);var v=Nm(e)?dd(e):window,h=v.visualViewport,s=!ML()&&i,U=(r.left+(s&&h?h.offsetLeft:0))/d,$=(r.top+(s&&h?h.offsetTop:0))/f,V=r.width/d,q=r.height/f;return{width:V,height:q,top:$,right:U+V,bottom:$+q,left:U,x:U,y:$}}function BC(e){var t=h_(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function LL(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&wC(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Nf(e){return dd(e).getComputedStyle(e)}function pQ(e){return["table","td","th"].indexOf(nf(e))>=0}function xp(e){return((Nm(e)?e.ownerDocument:e.document)||window.document).documentElement}function Gx(e){return nf(e)==="html"?e:e.assignedSlot||e.parentNode||(wC(e)?e.host:null)||xp(e)}function kL(e){return!Vd(e)||Nf(e).position==="fixed"?null:e.offsetParent}function mQ(e){var t=/firefox/i.test(CC()),i=/Trident/i.test(CC());if(i&&Vd(e)){var r=Nf(e);if(r.position==="fixed")return null}var d=Gx(e);for(wC(d)&&(d=d.host);Vd(d)&&["html","body"].indexOf(nf(d))<0;){var f=Nf(d);if(f.transform!=="none"||f.perspective!=="none"||f.contain==="paint"||["transform","perspective"].indexOf(f.willChange)!==-1||t&&f.willChange==="filter"||t&&f.filter&&f.filter!=="none")return d;d=d.parentNode}return null}function qy(e){for(var t=dd(e),i=kL(e);i&&pQ(i)&&Nf(i).position==="static";)i=kL(i);return i&&(nf(i)==="html"||nf(i)==="body"&&Nf(i).position==="static")?t:i||mQ(e)||t}function TC(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Xy(e,t,i){return Qm(e,Vx(t,i))}function gQ(e,t,i){var r=Xy(e,t,i);return r>i?i:r}function PL(){return{top:0,right:0,bottom:0,left:0}}function FL(e){return Object.assign({},PL(),e)}function DL(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}var _Q=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,FL(typeof t!="number"?t:DL(t,Wy))};function yQ(e){var t,i=e.state,r=e.name,d=e.options,f=i.elements.arrow,v=i.modifiersData.popperOffsets,h=rf(i.placement),s=TC(h),U=[Xh,Hd].indexOf(h)>=0,$=U?"height":"width";if(!(!f||!v)){var V=_Q(d.padding,i),q=BC(f),te=s==="y"?qh:Xh,he=s==="y"?jd:Hd,Ae=i.rects.reference[$]+i.rects.reference[s]-v[s]-i.rects.popper[$],De=v[s]-i.rects.reference[s],ke=qy(f),xe=ke?s==="y"?ke.clientHeight||0:ke.clientWidth||0:0,Te=Ae/2-De/2,Ee=V[te],Fe=xe-q[$]-V[he],Se=xe/2-q[$]/2+Te,nt=Xy(Ee,Se,Fe),xt=s;i.modifiersData[r]=(t={},t[xt]=nt,t.centerOffset=nt-Se,t)}}function vQ(e){var t=e.state,i=e.options,r=i.element,d=r===void 0?"[data-popper-arrow]":r;d!=null&&(typeof d=="string"&&(d=t.elements.popper.querySelector(d),!d)||LL(t.elements.popper,d)&&(t.elements.arrow=d))}const xQ={name:"arrow",enabled:!0,phase:"main",fn:yQ,effect:vQ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function d_(e){return e.split("-")[1]}var bQ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function wQ(e,t){var i=e.x,r=e.y,d=t.devicePixelRatio||1;return{x:u_(i*d)/d||0,y:u_(r*d)/d||0}}function UL(e){var t,i=e.popper,r=e.popperRect,d=e.placement,f=e.variation,v=e.offsets,h=e.position,s=e.gpuAcceleration,U=e.adaptive,$=e.roundOffsets,V=e.isFixed,q=v.x,te=q===void 0?0:q,he=v.y,Ae=he===void 0?0:he,De=typeof $=="function"?$({x:te,y:Ae}):{x:te,y:Ae};te=De.x,Ae=De.y;var ke=v.hasOwnProperty("x"),xe=v.hasOwnProperty("y"),Te=Xh,Ee=qh,Fe=window;if(U){var Se=qy(i),nt="clientHeight",xt="clientWidth";if(Se===dd(i)&&(Se=xp(i),Nf(Se).position!=="static"&&h==="absolute"&&(nt="scrollHeight",xt="scrollWidth")),Se=Se,d===qh||(d===Xh||d===Hd)&&f===Ky){Ee=jd;var Bt=V&&Se===Fe&&Fe.visualViewport?Fe.visualViewport.height:Se[nt];Ae-=Bt-r.height,Ae*=s?1:-1}if(d===Xh||(d===qh||d===jd)&&f===Ky){Te=Hd;var Xe=V&&Se===Fe&&Fe.visualViewport?Fe.visualViewport.width:Se[xt];te-=Xe-r.width,te*=s?1:-1}}var qt=Object.assign({position:h},U&&bQ),rn=$===!0?wQ({x:te,y:Ae},dd(i)):{x:te,y:Ae};if(te=rn.x,Ae=rn.y,s){var Ut;return Object.assign({},qt,(Ut={},Ut[Ee]=xe?"0":"",Ut[Te]=ke?"0":"",Ut.transform=(Fe.devicePixelRatio||1)<=1?"translate("+te+"px, "+Ae+"px)":"translate3d("+te+"px, "+Ae+"px, 0)",Ut))}return Object.assign({},qt,(t={},t[Ee]=xe?Ae+"px":"",t[Te]=ke?te+"px":"",t.transform="",t))}function CQ(e){var t=e.state,i=e.options,r=i.gpuAcceleration,d=r===void 0?!0:r,f=i.adaptive,v=f===void 0?!0:f,h=i.roundOffsets,s=h===void 0?!0:h,U={placement:rf(t.placement),variation:d_(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:d,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,UL(Object.assign({},U,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:v,roundOffsets:s})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,UL(Object.assign({},U,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const BQ={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:CQ,data:{}};var Wx={passive:!0};function TQ(e){var t=e.state,i=e.instance,r=e.options,d=r.scroll,f=d===void 0?!0:d,v=r.resize,h=v===void 0?!0:v,s=dd(t.elements.popper),U=[].concat(t.scrollParents.reference,t.scrollParents.popper);return f&&U.forEach(function($){$.addEventListener("scroll",i.update,Wx)}),h&&s.addEventListener("resize",i.update,Wx),function(){f&&U.forEach(function($){$.removeEventListener("scroll",i.update,Wx)}),h&&s.removeEventListener("resize",i.update,Wx)}}const EQ={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:TQ,data:{}};var SQ={left:"right",right:"left",bottom:"top",top:"bottom"};function Kx(e){return e.replace(/left|right|bottom|top/g,function(t){return SQ[t]})}var IQ={start:"end",end:"start"};function zL(e){return e.replace(/start|end/g,function(t){return IQ[t]})}function EC(e){var t=dd(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function SC(e){return h_(xp(e)).left+EC(e).scrollLeft}function MQ(e,t){var i=dd(e),r=xp(e),d=i.visualViewport,f=r.clientWidth,v=r.clientHeight,h=0,s=0;if(d){f=d.width,v=d.height;var U=ML();(U||!U&&t==="fixed")&&(h=d.offsetLeft,s=d.offsetTop)}return{width:f,height:v,x:h+SC(e),y:s}}function LQ(e){var t,i=xp(e),r=EC(e),d=(t=e.ownerDocument)==null?void 0:t.body,f=Qm(i.scrollWidth,i.clientWidth,d?d.scrollWidth:0,d?d.clientWidth:0),v=Qm(i.scrollHeight,i.clientHeight,d?d.scrollHeight:0,d?d.clientHeight:0),h=-r.scrollLeft+SC(e),s=-r.scrollTop;return Nf(d||i).direction==="rtl"&&(h+=Qm(i.clientWidth,d?d.clientWidth:0)-f),{width:f,height:v,x:h,y:s}}function IC(e){var t=Nf(e),i=t.overflow,r=t.overflowX,d=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+d+r)}function RL(e){return["html","body","#document"].indexOf(nf(e))>=0?e.ownerDocument.body:Vd(e)&&IC(e)?e:RL(Gx(e))}function Yy(e,t){var i;t===void 0&&(t=[]);var r=RL(e),d=r===((i=e.ownerDocument)==null?void 0:i.body),f=dd(r),v=d?[f].concat(f.visualViewport||[],IC(r)?r:[]):r,h=t.concat(v);return d?h:h.concat(Yy(Gx(v)))}function MC(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function kQ(e,t){var i=h_(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function OL(e,t,i){return t===EL?MC(MQ(e,i)):Nm(t)?kQ(t,i):MC(LQ(xp(e)))}function PQ(e){var t=Yy(Gx(e)),i=["absolute","fixed"].indexOf(Nf(e).position)>=0,r=i&&Vd(e)?qy(e):e;return Nm(r)?t.filter(function(d){return Nm(d)&&LL(d,r)&&nf(d)!=="body"}):[]}function FQ(e,t,i,r){var d=t==="clippingParents"?PQ(e):[].concat(t),f=[].concat(d,[i]),v=f[0],h=f.reduce(function(s,U){var $=OL(e,U,r);return s.top=Qm($.top,s.top),s.right=Vx($.right,s.right),s.bottom=Vx($.bottom,s.bottom),s.left=Qm($.left,s.left),s},OL(e,v,r));return h.width=h.right-h.left,h.height=h.bottom-h.top,h.x=h.left,h.y=h.top,h}function NL(e){var t=e.reference,i=e.element,r=e.placement,d=r?rf(r):null,f=r?d_(r):null,v=t.x+t.width/2-i.width/2,h=t.y+t.height/2-i.height/2,s;switch(d){case qh:s={x:v,y:t.y-i.height};break;case jd:s={x:v,y:t.y+t.height};break;case Hd:s={x:t.x+t.width,y:h};break;case Xh:s={x:t.x-i.width,y:h};break;default:s={x:t.x,y:t.y}}var U=d?TC(d):null;if(U!=null){var $=U==="y"?"height":"width";switch(f){case c_:s[U]=s[U]-(t[$]/2-i[$]/2);break;case Ky:s[U]=s[U]+(t[$]/2-i[$]/2);break}}return s}function Jy(e,t){t===void 0&&(t={});var i=t,r=i.placement,d=r===void 0?e.placement:r,f=i.strategy,v=f===void 0?e.strategy:f,h=i.boundary,s=h===void 0?eQ:h,U=i.rootBoundary,$=U===void 0?EL:U,V=i.elementContext,q=V===void 0?Zy:V,te=i.altBoundary,he=te===void 0?!1:te,Ae=i.padding,De=Ae===void 0?0:Ae,ke=FL(typeof De!="number"?De:DL(De,Wy)),xe=q===Zy?tQ:Zy,Te=e.rects.popper,Ee=e.elements[he?xe:q],Fe=FQ(Nm(Ee)?Ee:Ee.contextElement||xp(e.elements.popper),s,$,v),Se=h_(e.elements.reference),nt=NL({reference:Se,element:Te,strategy:"absolute",placement:d}),xt=MC(Object.assign({},Te,nt)),Bt=q===Zy?xt:Se,Xe={top:Fe.top-Bt.top+ke.top,bottom:Bt.bottom-Fe.bottom+ke.bottom,left:Fe.left-Bt.left+ke.left,right:Bt.right-Fe.right+ke.right},qt=e.modifiersData.offset;if(q===Zy&&qt){var rn=qt[d];Object.keys(Xe).forEach(function(Ut){var Kt=[Hd,jd].indexOf(Ut)>=0?1:-1,On=[qh,jd].indexOf(Ut)>=0?"y":"x";Xe[Ut]+=rn[On]*Kt})}return Xe}function DQ(e,t){t===void 0&&(t={});var i=t,r=i.placement,d=i.boundary,f=i.rootBoundary,v=i.padding,h=i.flipVariations,s=i.allowedAutoPlacements,U=s===void 0?IL:s,$=d_(r),V=$?h?SL:SL.filter(function(he){return d_(he)===$}):Wy,q=V.filter(function(he){return U.indexOf(he)>=0});q.length===0&&(q=V);var te=q.reduce(function(he,Ae){return he[Ae]=Jy(e,{placement:Ae,boundary:d,rootBoundary:f,padding:v})[rf(Ae)],he},{});return Object.keys(te).sort(function(he,Ae){return te[he]-te[Ae]})}function UQ(e){if(rf(e)===bC)return[];var t=Kx(e);return[zL(e),t,zL(t)]}function zQ(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var d=i.mainAxis,f=d===void 0?!0:d,v=i.altAxis,h=v===void 0?!0:v,s=i.fallbackPlacements,U=i.padding,$=i.boundary,V=i.rootBoundary,q=i.altBoundary,te=i.flipVariations,he=te===void 0?!0:te,Ae=i.allowedAutoPlacements,De=t.options.placement,ke=rf(De),xe=ke===De,Te=s||(xe||!he?[Kx(De)]:UQ(De)),Ee=[De].concat(Te).reduce(function(Bn,Hn){return Bn.concat(rf(Hn)===bC?DQ(t,{placement:Hn,boundary:$,rootBoundary:V,padding:U,flipVariations:he,allowedAutoPlacements:Ae}):Hn)},[]),Fe=t.rects.reference,Se=t.rects.popper,nt=new Map,xt=!0,Bt=Ee[0],Xe=0;Xe<Ee.length;Xe++){var qt=Ee[Xe],rn=rf(qt),Ut=d_(qt)===c_,Kt=[qh,jd].indexOf(rn)>=0,On=Kt?"width":"height",Gt=Jy(t,{placement:qt,boundary:$,rootBoundary:V,altBoundary:q,padding:U}),Rn=Kt?Ut?Hd:Xh:Ut?jd:qh;Fe[On]>Se[On]&&(Rn=Kx(Rn));var mn=Kx(Rn),Cn=[];if(f&&Cn.push(Gt[rn]<=0),h&&Cn.push(Gt[Rn]<=0,Gt[mn]<=0),Cn.every(function(Bn){return Bn})){Bt=qt,xt=!1;break}nt.set(qt,Cn)}if(xt)for(var Qt=he?3:1,Xn=function(Hn){var ei=Ee.find(function(tr){var ri=nt.get(tr);if(ri)return ri.slice(0,Hn).every(function(zi){return zi})});if(ei)return Bt=ei,"break"},Wn=Qt;Wn>0;Wn--){var Bi=Xn(Wn);if(Bi==="break")break}t.placement!==Bt&&(t.modifiersData[r]._skip=!0,t.placement=Bt,t.reset=!0)}}const RQ={name:"flip",enabled:!0,phase:"main",fn:zQ,requiresIfExists:["offset"],data:{_skip:!1}};function QL(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function $L(e){return[qh,Hd,jd,Xh].some(function(t){return e[t]>=0})}function OQ(e){var t=e.state,i=e.name,r=t.rects.reference,d=t.rects.popper,f=t.modifiersData.preventOverflow,v=Jy(t,{elementContext:"reference"}),h=Jy(t,{altBoundary:!0}),s=QL(v,r),U=QL(h,d,f),$=$L(s),V=$L(U);t.modifiersData[i]={referenceClippingOffsets:s,popperEscapeOffsets:U,isReferenceHidden:$,hasPopperEscaped:V},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":$,"data-popper-escaped":V})}const NQ={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:OQ};function QQ(e,t,i){var r=rf(e),d=[Xh,qh].indexOf(r)>=0?-1:1,f=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,v=f[0],h=f[1];return v=v||0,h=(h||0)*d,[Xh,Hd].indexOf(r)>=0?{x:h,y:v}:{x:v,y:h}}function $Q(e){var t=e.state,i=e.options,r=e.name,d=i.offset,f=d===void 0?[0,0]:d,v=IL.reduce(function($,V){return $[V]=QQ(V,t.rects,f),$},{}),h=v[t.placement],s=h.x,U=h.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=U),t.modifiersData[r]=v}const jQ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:$Q};function HQ(e){var t=e.state,i=e.name;t.modifiersData[i]=NL({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const VQ={name:"popperOffsets",enabled:!0,phase:"read",fn:HQ,data:{}};function GQ(e){return e==="x"?"y":"x"}function WQ(e){var t=e.state,i=e.options,r=e.name,d=i.mainAxis,f=d===void 0?!0:d,v=i.altAxis,h=v===void 0?!1:v,s=i.boundary,U=i.rootBoundary,$=i.altBoundary,V=i.padding,q=i.tether,te=q===void 0?!0:q,he=i.tetherOffset,Ae=he===void 0?0:he,De=Jy(t,{boundary:s,rootBoundary:U,padding:V,altBoundary:$}),ke=rf(t.placement),xe=d_(t.placement),Te=!xe,Ee=TC(ke),Fe=GQ(Ee),Se=t.modifiersData.popperOffsets,nt=t.rects.reference,xt=t.rects.popper,Bt=typeof Ae=="function"?Ae(Object.assign({},t.rects,{placement:t.placement})):Ae,Xe=typeof Bt=="number"?{mainAxis:Bt,altAxis:Bt}:Object.assign({mainAxis:0,altAxis:0},Bt),qt=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,rn={x:0,y:0};if(Se){if(f){var Ut,Kt=Ee==="y"?qh:Xh,On=Ee==="y"?jd:Hd,Gt=Ee==="y"?"height":"width",Rn=Se[Ee],mn=Rn+De[Kt],Cn=Rn-De[On],Qt=te?-xt[Gt]/2:0,Xn=xe===c_?nt[Gt]:xt[Gt],Wn=xe===c_?-xt[Gt]:-nt[Gt],Bi=t.elements.arrow,Bn=te&&Bi?BC(Bi):{width:0,height:0},Hn=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:PL(),ei=Hn[Kt],tr=Hn[On],ri=Xy(0,nt[Gt],Bn[Gt]),zi=Te?nt[Gt]/2-Qt-ri-ei-Xe.mainAxis:Xn-ri-ei-Xe.mainAxis,Vr=Te?-nt[Gt]/2+Qt+ri+tr+Xe.mainAxis:Wn+ri+tr+Xe.mainAxis,sr=t.elements.arrow&&qy(t.elements.arrow),li=sr?Ee==="y"?sr.clientTop||0:sr.clientLeft||0:0,Qi=(Ut=qt==null?void 0:qt[Ee])!=null?Ut:0,Ki=Rn+zi-Qi-li,ji=Rn+Vr-Qi,di=Xy(te?Vx(mn,Ki):mn,Rn,te?Qm(Cn,ji):Cn);Se[Ee]=di,rn[Ee]=di-Rn}if(h){var Ir,nr=Ee==="x"?qh:Xh,Ri=Ee==="x"?jd:Hd,hr=Se[Fe],ir=Fe==="y"?"height":"width",Ur=hr+De[nr],jr=hr-De[Ri],pr=[qh,Xh].indexOf(ke)!==-1,Zr=(Ir=qt==null?void 0:qt[Fe])!=null?Ir:0,Eo=pr?Ur:hr-nt[ir]-xt[ir]-Zr+Xe.altAxis,Ao=pr?hr+nt[ir]+xt[ir]-Zr-Xe.altAxis:jr,$t=te&&pr?gQ(Eo,hr,Ao):Xy(te?Eo:Ur,hr,te?Ao:jr);Se[Fe]=$t,rn[Fe]=$t-hr}t.modifiersData[r]=rn}}const KQ={name:"preventOverflow",enabled:!0,phase:"main",fn:WQ,requiresIfExists:["offset"]};function ZQ(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function qQ(e){return e===dd(e)||!Vd(e)?EC(e):ZQ(e)}function XQ(e){var t=e.getBoundingClientRect(),i=u_(t.width)/e.offsetWidth||1,r=u_(t.height)/e.offsetHeight||1;return i!==1||r!==1}function YQ(e,t,i){i===void 0&&(i=!1);var r=Vd(t),d=Vd(t)&&XQ(t),f=xp(t),v=h_(e,d,i),h={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(r||!r&&!i)&&((nf(t)!=="body"||IC(f))&&(h=qQ(t)),Vd(t)?(s=h_(t,!0),s.x+=t.clientLeft,s.y+=t.clientTop):f&&(s.x=SC(f))),{x:v.left+h.scrollLeft-s.x,y:v.top+h.scrollTop-s.y,width:v.width,height:v.height}}function JQ(e){var t=new Map,i=new Set,r=[];e.forEach(function(f){t.set(f.name,f)});function d(f){i.add(f.name);var v=[].concat(f.requires||[],f.requiresIfExists||[]);v.forEach(function(h){if(!i.has(h)){var s=t.get(h);s&&d(s)}}),r.push(f)}return e.forEach(function(f){i.has(f.name)||d(f)}),r}function e$(e){var t=JQ(e);return hQ.reduce(function(i,r){return i.concat(t.filter(function(d){return d.phase===r}))},[])}function t$(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function n$(e){var t=e.reduce(function(i,r){var d=i[r.name];return i[r.name]=d?Object.assign({},d,r,{options:Object.assign({},d.options,r.options),data:Object.assign({},d.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}var jL={placement:"bottom",modifiers:[],strategy:"absolute"};function HL(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function i$(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,d=t.defaultOptions,f=d===void 0?jL:d;return function(h,s,U){U===void 0&&(U=f);var $={placement:"bottom",orderedModifiers:[],options:Object.assign({},jL,f),modifiersData:{},elements:{reference:h,popper:s},attributes:{},styles:{}},V=[],q=!1,te={state:$,setOptions:function(ke){var xe=typeof ke=="function"?ke($.options):ke;Ae(),$.options=Object.assign({},f,$.options,xe),$.scrollParents={reference:Nm(h)?Yy(h):h.contextElement?Yy(h.contextElement):[],popper:Yy(s)};var Te=e$(n$([].concat(r,$.options.modifiers)));return $.orderedModifiers=Te.filter(function(Ee){return Ee.enabled}),he(),te.update()},forceUpdate:function(){if(!q){var ke=$.elements,xe=ke.reference,Te=ke.popper;if(HL(xe,Te)){$.rects={reference:YQ(xe,qy(Te),$.options.strategy==="fixed"),popper:BC(Te)},$.reset=!1,$.placement=$.options.placement,$.orderedModifiers.forEach(function(Xe){return $.modifiersData[Xe.name]=Object.assign({},Xe.data)});for(var Ee=0;Ee<$.orderedModifiers.length;Ee++){if($.reset===!0){$.reset=!1,Ee=-1;continue}var Fe=$.orderedModifiers[Ee],Se=Fe.fn,nt=Fe.options,xt=nt===void 0?{}:nt,Bt=Fe.name;typeof Se=="function"&&($=Se({state:$,options:xt,name:Bt,instance:te})||$)}}}},update:t$(function(){return new Promise(function(De){te.forceUpdate(),De($)})}),destroy:function(){Ae(),q=!0}};if(!HL(h,s))return te;te.setOptions(U).then(function(De){!q&&U.onFirstUpdate&&U.onFirstUpdate(De)});function he(){$.orderedModifiers.forEach(function(De){var ke=De.name,xe=De.options,Te=xe===void 0?{}:xe,Ee=De.effect;if(typeof Ee=="function"){var Fe=Ee({state:$,name:ke,instance:te,options:Te}),Se=function(){};V.push(Fe||Se)}})}function Ae(){V.forEach(function(De){return De()}),V=[]}return te}}var r$=[EQ,VQ,BQ,fQ,jQ,RQ,KQ,xQ,NQ],o$=i$({defaultModifiers:r$});function s$(e){return typeof e=="function"?e():e}const VL=Yr(function(t,i){const{children:r,container:d,disablePortal:f=!1}=t,[v,h]=ur(null),s=Ul(Ha(r)?r.ref:null,i);return yA(()=>{f||h(s$(d)||document.body)},[d,f]),yA(()=>{if(v&&!f)return Iy(i,v),()=>{Iy(i,null)}},[i,v,f]),f?Ha(r)?pl(r,{ref:s}):ze(vs,{children:r}):ze(vs,{children:v&&Wg(r,v)})});function a$(e){return Ls("MuiPopper",e)}bs("MuiPopper",["root"]);const l$=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],c$=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function u$(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function LC(e){return typeof e=="function"?e():e}function h$(e){return e.nodeType!==void 0}const d$=()=>Us({root:["root"]},j2(a$)),A$={},f$=Yr(function(t,i){var r;const{anchorEl:d,children:f,direction:v,disablePortal:h,modifiers:s,open:U,placement:$,popperOptions:V,popperRef:q,slotProps:te={},slots:he={},TransitionProps:Ae}=t,De=gr(t,l$),ke=Pi(null),xe=Ul(ke,i),Te=Pi(null),Ee=Ul(Te,q),Fe=Pi(Ee);yA(()=>{Fe.current=Ee},[Ee]),Ih(q,()=>Te.current,[]);const Se=u$($,v),[nt,xt]=ur(Se),[Bt,Xe]=ur(LC(d));$i(()=>{Te.current&&Te.current.forceUpdate()}),$i(()=>{d&&Xe(LC(d))},[d]),yA(()=>{if(!Bt||!U)return;const On=mn=>{xt(mn.placement)};let Gt=[{name:"preventOverflow",options:{altBoundary:h}},{name:"flip",options:{altBoundary:h}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:mn})=>{On(mn)}}];s!=null&&(Gt=Gt.concat(s)),V&&V.modifiers!=null&&(Gt=Gt.concat(V.modifiers));const Rn=o$(Bt,ke.current,ct({placement:Se},V,{modifiers:Gt}));return Fe.current(Rn),()=>{Rn.destroy(),Fe.current(null)}},[Bt,h,s,U,V,Se]);const qt={placement:nt};Ae!==null&&(qt.TransitionProps=Ae);const rn=d$(),Ut=(r=he.root)!=null?r:"div",Kt=Om({elementType:Ut,externalSlotProps:te.root,externalForwardedProps:De,additionalProps:{role:"tooltip",ref:xe},ownerState:t,className:rn.root});return ze(Ut,ct({},Kt,{children:typeof f=="function"?f(qt):f}))}),p$=Yr(function(t,i){const{anchorEl:r,children:d,container:f,direction:v="ltr",disablePortal:h=!1,keepMounted:s=!1,modifiers:U,open:$,placement:V="bottom",popperOptions:q=A$,popperRef:te,style:he,transition:Ae=!1,slotProps:De={},slots:ke={}}=t,xe=gr(t,c$),[Te,Ee]=ur(!0),Fe=()=>{Ee(!1)},Se=()=>{Ee(!0)};if(!s&&!$&&(!Ae||Te))return null;let nt;if(f)nt=f;else if(r){const Xe=LC(r);nt=Xe&&h$(Xe)?th(Xe).body:th(null).body}const xt=!$&&s&&(!Ae||Te)?"none":void 0,Bt=Ae?{in:$,onEnter:Fe,onExited:Se}:void 0;return ze(VL,{disablePortal:h,container:nt,children:ze(f$,ct({anchorEl:r,direction:v,disablePortal:h,modifiers:U,ref:i,open:Ae?!Te:$,placement:V,popperOptions:q,popperRef:te,slotProps:De,slots:ke},xe,{style:ct({position:"fixed",top:0,left:0,display:xt},he),TransitionProps:Bt,children:d}))})});function m$(e){const t=th(e);return t.body===e?yp(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function ev(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function GL(e){return parseInt(yp(e).getComputedStyle(e).paddingRight,10)||0}function g$(e){const i=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return i||r}function WL(e,t,i,r,d){const f=[t,i,...r];[].forEach.call(e.children,v=>{const h=f.indexOf(v)===-1,s=!g$(v);h&&s&&ev(v,d)})}function kC(e,t){let i=-1;return e.some((r,d)=>t(r)?(i=d,!0):!1),i}function _$(e,t){const i=[],r=e.container;if(!t.disableScrollLock){if(m$(r)){const v=rM(th(r));i.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${GL(r)+v}px`;const h=th(r).querySelectorAll(".mui-fixed");[].forEach.call(h,s=>{i.push({value:s.style.paddingRight,property:"padding-right",el:s}),s.style.paddingRight=`${GL(s)+v}px`})}let f;if(r.parentNode instanceof DocumentFragment)f=th(r).body;else{const v=r.parentElement,h=yp(r);f=(v==null?void 0:v.nodeName)==="HTML"&&h.getComputedStyle(v).overflowY==="scroll"?v:r}i.push({value:f.style.overflow,property:"overflow",el:f},{value:f.style.overflowX,property:"overflow-x",el:f},{value:f.style.overflowY,property:"overflow-y",el:f}),f.style.overflow="hidden"}return()=>{i.forEach(({value:f,el:v,property:h})=>{f?v.style.setProperty(h,f):v.style.removeProperty(h)})}}function y$(e){const t=[];return[].forEach.call(e.children,i=>{i.getAttribute("aria-hidden")==="true"&&t.push(i)}),t}class v${constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,i){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&ev(t.modalRef,!1);const d=y$(i);WL(i,t.mount,t.modalRef,d,!0);const f=kC(this.containers,v=>v.container===i);return f!==-1?(this.containers[f].modals.push(t),r):(this.containers.push({modals:[t],container:i,restore:null,hiddenSiblings:d}),r)}mount(t,i){const r=kC(this.containers,f=>f.modals.indexOf(t)!==-1),d=this.containers[r];d.restore||(d.restore=_$(d,i))}remove(t,i=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const d=kC(this.containers,v=>v.modals.indexOf(t)!==-1),f=this.containers[d];if(f.modals.splice(f.modals.indexOf(t),1),this.modals.splice(r,1),f.modals.length===0)f.restore&&f.restore(),t.modalRef&&ev(t.modalRef,i),WL(f.container,t.mount,t.modalRef,f.hiddenSiblings,!1),this.containers.splice(d,1);else{const v=f.modals[f.modals.length-1];v.modalRef&&ev(v.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function x$(e){return typeof e=="function"?e():e}function b$(e){return e?e.props.hasOwnProperty("in"):!1}const w$=new v$;function C$(e){const{container:t,disableEscapeKeyDown:i=!1,disableScrollLock:r=!1,manager:d=w$,closeAfterTransition:f=!1,onTransitionEnter:v,onTransitionExited:h,children:s,onClose:U,open:$,rootRef:V}=e,q=Pi({}),te=Pi(null),he=Pi(null),Ae=Ul(he,V),[De,ke]=ur(!$),xe=b$(s);let Te=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(Te=!1);const Ee=()=>th(te.current),Fe=()=>(q.current.modalRef=he.current,q.current.mount=te.current,q.current),Se=()=>{d.mount(Fe(),{disableScrollLock:r}),he.current&&(he.current.scrollTop=0)},nt=zd(()=>{const Gt=x$(t)||Ee().body;d.add(Fe(),Gt),he.current&&Se()}),xt=xs(()=>d.isTopModal(Fe()),[d]),Bt=zd(Gt=>{te.current=Gt,Gt&&($&&xt()?Se():he.current&&ev(he.current,Te))}),Xe=xs(()=>{d.remove(Fe(),Te)},[Te,d]);$i(()=>()=>{Xe()},[Xe]),$i(()=>{$?nt():(!xe||!f)&&Xe()},[$,Xe,xe,f,nt]);const qt=Gt=>Rn=>{var mn;(mn=Gt.onKeyDown)==null||mn.call(Gt,Rn),!(Rn.key!=="Escape"||Rn.which===229||!xt())&&(i||(Rn.stopPropagation(),U&&U(Rn,"escapeKeyDown")))},rn=Gt=>Rn=>{var mn;(mn=Gt.onClick)==null||mn.call(Gt,Rn),Rn.target===Rn.currentTarget&&U&&U(Rn,"backdropClick")};return{getRootProps:(Gt={})=>{const Rn=BL(e);delete Rn.onTransitionEnter,delete Rn.onTransitionExited;const mn=ct({},Rn,Gt);return ct({role:"presentation"},mn,{onKeyDown:qt(mn),ref:Ae})},getBackdropProps:(Gt={})=>{const Rn=Gt;return ct({"aria-hidden":!0},Rn,{onClick:rn(Rn),open:$})},getTransitionProps:()=>{const Gt=()=>{ke(!1),v&&v()},Rn=()=>{ke(!0),h&&h(),f&&Xe()};return{onEnter:z1(Gt,s==null?void 0:s.props.onEnter),onExited:z1(Rn,s==null?void 0:s.props.onExited)}},rootRef:Ae,portalRef:Bt,isTopModal:xt,exited:De,hasTransition:xe}}const B$=["onChange","maxRows","minRows","style","value"];function Zx(e){return parseInt(e,10)||0}const T$={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function KL(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const E$=Yr(function(t,i){const{onChange:r,maxRows:d,minRows:f=1,style:v,value:h}=t,s=gr(t,B$),{current:U}=Pi(h!=null),$=Pi(null),V=Ul(i,$),q=Pi(null),te=Pi(0),[he,Ae]=ur({outerHeightStyle:0}),De=xs(()=>{const Ee=$.current,Se=yp(Ee).getComputedStyle(Ee);if(Se.width==="0px")return{outerHeightStyle:0};const nt=q.current;nt.style.width=Se.width,nt.value=Ee.value||t.placeholder||"x",nt.value.slice(-1)===`
`&&(nt.value+=" ");const xt=Se.boxSizing,Bt=Zx(Se.paddingBottom)+Zx(Se.paddingTop),Xe=Zx(Se.borderBottomWidth)+Zx(Se.borderTopWidth),qt=nt.scrollHeight;nt.value="x";const rn=nt.scrollHeight;let Ut=qt;f&&(Ut=Math.max(Number(f)*rn,Ut)),d&&(Ut=Math.min(Number(d)*rn,Ut)),Ut=Math.max(Ut,rn);const Kt=Ut+(xt==="border-box"?Bt+Xe:0),On=Math.abs(Ut-qt)<=1;return{outerHeightStyle:Kt,overflow:On}},[d,f,t.placeholder]),ke=(Ee,Fe)=>{const{outerHeightStyle:Se,overflow:nt}=Fe;return te.current<20&&(Se>0&&Math.abs((Ee.outerHeightStyle||0)-Se)>1||Ee.overflow!==nt)?(te.current+=1,{overflow:nt,outerHeightStyle:Se}):Ee},xe=xs(()=>{const Ee=De();KL(Ee)||Ae(Fe=>ke(Fe,Ee))},[De]);return yA(()=>{const Ee=()=>{const qt=De();KL(qt)||h1(()=>{Ae(rn=>ke(rn,qt))})},Fe=()=>{te.current=0,Ee()};let Se;const nt=R1(Fe),xt=$.current,Bt=yp(xt);Bt.addEventListener("resize",nt);let Xe;return typeof ResizeObserver<"u"&&(Xe=new ResizeObserver(Fe),Xe.observe(xt)),()=>{nt.clear(),cancelAnimationFrame(Se),Bt.removeEventListener("resize",nt),Xe&&Xe.disconnect()}},[De]),yA(()=>{xe()}),$i(()=>{te.current=0},[h]),ze(vs,{children:[ze("textarea",ct({value:h,onChange:Ee=>{te.current=0,U||xe(),r&&r(Ee)},ref:V,rows:f,style:ct({height:he.outerHeightStyle,overflow:he.overflow?"hidden":void 0},v)},s)),ze("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:q,tabIndex:-1,style:ct({},T$.shadow,v,{paddingTop:0,paddingBottom:0})})]})});function ZL(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function S$(e={}){const{ignoreAccents:t=!0,ignoreCase:i=!0,limit:r,matchFrom:d="any",stringify:f,trim:v=!1}=e;return(h,{inputValue:s,getOptionLabel:U})=>{let $=v?s.trim():s;i&&($=$.toLowerCase()),t&&($=ZL($));const V=$?h.filter(q=>{let te=(f||U)(q);return i&&(te=te.toLowerCase()),t&&(te=ZL(te)),d==="start"?te.indexOf($)===0:te.indexOf($)>-1}):h;return typeof r=="number"?V.slice(0,r):V}}function PC(e,t){for(let i=0;i<e.length;i+=1)if(t(e[i]))return i;return-1}const I$=S$(),qL=5,M$=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function L$(e){const{unstable_isActiveElementInListbox:t=M$,unstable_classNamePrefix:i="Mui",autoComplete:r=!1,autoHighlight:d=!1,autoSelect:f=!1,blurOnSelect:v=!1,clearOnBlur:h=!e.freeSolo,clearOnEscape:s=!1,componentName:U="useAutocomplete",defaultValue:$=e.multiple?[]:null,disableClearable:V=!1,disableCloseOnSelect:q=!1,disabled:te,disabledItemsFocusable:he=!1,disableListWrap:Ae=!1,filterOptions:De=I$,filterSelectedOptions:ke=!1,freeSolo:xe=!1,getOptionDisabled:Te,getOptionKey:Ee,getOptionLabel:Fe=qe=>{var Oe;return(Oe=qe.label)!=null?Oe:qe},groupBy:Se,handleHomeEndKeys:nt=!e.freeSolo,id:xt,includeInputInList:Bt=!1,inputValue:Xe,isOptionEqualToValue:qt=(qe,Oe)=>qe===Oe,multiple:rn=!1,onChange:Ut,onClose:Kt,onHighlightChange:On,onInputChange:Gt,onOpen:Rn,open:mn,openOnFocus:Cn=!1,options:Qt,readOnly:Xn=!1,selectOnFocus:Wn=!e.freeSolo,value:Bi}=e,Bn=My(xt);let Hn=Fe;Hn=qe=>{const Oe=Fe(qe);return typeof Oe!="string"?String(Oe):Oe};const ei=Pi(!1),tr=Pi(!0),ri=Pi(null),zi=Pi(null),[Vr,sr]=ur(null),[li,Qi]=ur(-1),Ki=d?0:-1,ji=Pi(Ki),[di,Ir]=Mm({controlled:Bi,default:$,name:U}),[nr,Ri]=Mm({controlled:Xe,default:"",name:U,state:"inputValue"}),[hr,ir]=ur(!1),Ur=xs((qe,Oe)=>{if(!(rn?di.length<Oe.length:Oe!==null)&&!h)return;let mt;if(rn)mt="";else if(Oe==null)mt="";else{const Jt=Hn(Oe);mt=typeof Jt=="string"?Jt:""}nr!==mt&&(Ri(mt),Gt&&Gt(qe,mt,"reset"))},[Hn,nr,rn,Gt,Ri,h,di]),[jr,pr]=Mm({controlled:mn,default:!1,name:U,state:"open"}),[Zr,Eo]=ur(!0),Ao=!rn&&di!=null&&nr===Hn(di),$t=jr&&!Xn,en=$t?De(Qt.filter(qe=>!(ke&&(rn?di:[di]).some(Oe=>Oe!==null&&qt(qe,Oe)))),{inputValue:Ao&&Zr?"":nr,getOptionLabel:Hn}):[],Fr=x4({filteredOptions:en,value:di,inputValue:nr});$i(()=>{const qe=di!==Fr.value;hr&&!qe||xe&&!qe||Ur(null,di)},[di,Ur,hr,Fr.value,xe]);const So=jr&&en.length>0&&!Xn,er=zd(qe=>{qe===-1?ri.current.focus():Vr.querySelector(`[data-tag-index="${qe}"]`).focus()});$i(()=>{rn&&li>di.length-1&&(Qi(-1),er(-1))},[di,rn,li,er]);function xi(qe,Oe){if(!zi.current||qe<0||qe>=en.length)return-1;let Je=qe;for(;;){const mt=zi.current.querySelector(`[data-option-index="${Je}"]`),Jt=he?!1:!mt||mt.disabled||mt.getAttribute("aria-disabled")==="true";if(mt&&mt.hasAttribute("tabindex")&&!Jt)return Je;if(Oe==="next"?Je=(Je+1)%en.length:Je=(Je-1+en.length)%en.length,Je===qe)return-1}}const Xi=zd(({event:qe,index:Oe,reason:Je="auto"})=>{if(ji.current=Oe,Oe===-1?ri.current.removeAttribute("aria-activedescendant"):ri.current.setAttribute("aria-activedescendant",`${Bn}-option-${Oe}`),On&&On(qe,Oe===-1?null:en[Oe],Je),!zi.current)return;const mt=zi.current.querySelector(`[role="option"].${i}-focused`);mt&&(mt.classList.remove(`${i}-focused`),mt.classList.remove(`${i}-focusVisible`));let Jt=zi.current;if(zi.current.getAttribute("role")!=="listbox"&&(Jt=zi.current.parentElement.querySelector('[role="listbox"]')),!Jt)return;if(Oe===-1){Jt.scrollTop=0;return}const Sn=zi.current.querySelector(`[data-option-index="${Oe}"]`);if(Sn&&(Sn.classList.add(`${i}-focused`),Je==="keyboard"&&Sn.classList.add(`${i}-focusVisible`),Jt.scrollHeight>Jt.clientHeight&&Je!=="mouse"&&Je!=="touch")){const an=Sn,gn=Jt.clientHeight+Jt.scrollTop,mi=an.offsetTop+an.offsetHeight;mi>gn?Jt.scrollTop=mi-Jt.clientHeight:an.offsetTop-an.offsetHeight*(Se?1.3:0)<Jt.scrollTop&&(Jt.scrollTop=an.offsetTop-an.offsetHeight*(Se?1.3:0))}}),Un=zd(({event:qe,diff:Oe,direction:Je="next",reason:mt="auto"})=>{if(!$t)return;const Sn=xi((()=>{const an=en.length-1;if(Oe==="reset")return Ki;if(Oe==="start")return 0;if(Oe==="end")return an;const gn=ji.current+Oe;return gn<0?gn===-1&&Bt?-1:Ae&&ji.current!==-1||Math.abs(Oe)>1?0:an:gn>an?gn===an+1&&Bt?-1:Ae||Math.abs(Oe)>1?an:0:gn})(),Je);if(Xi({index:Sn,reason:mt,event:qe}),r&&Oe!=="reset")if(Sn===-1)ri.current.value=nr;else{const an=Hn(en[Sn]);ri.current.value=an,an.toLowerCase().indexOf(nr.toLowerCase())===0&&nr.length>0&&ri.current.setSelectionRange(nr.length,an.length)}}),Oi=()=>{const qe=(Oe,Je)=>{const mt=Oe?Hn(Oe):"",Jt=Je?Hn(Je):"";return mt===Jt};if(ji.current!==-1&&Fr.filteredOptions&&Fr.filteredOptions.length!==en.length&&Fr.inputValue===nr&&(rn?di.length===Fr.value.length&&Fr.value.every((Oe,Je)=>Hn(di[Je])===Hn(Oe)):qe(Fr.value,di))){const Oe=Fr.filteredOptions[ji.current];if(Oe&&en.some(mt=>Hn(mt)===Hn(Oe)))return!0}return!1},bn=xs(()=>{if(!$t||Oi())return;const qe=rn?di[0]:di;if(en.length===0||qe==null){Un({diff:"reset"});return}if(zi.current){if(qe!=null){const Oe=en[ji.current];if(rn&&Oe&&PC(di,mt=>qt(Oe,mt))!==-1)return;const Je=PC(en,mt=>qt(mt,qe));Je===-1?Un({diff:"reset"}):Xi({index:Je});return}if(ji.current>=en.length-1){Xi({index:en.length-1});return}Xi({index:ji.current})}},[en.length,rn?!1:di,ke,Un,Xi,$t,nr,rn]),bi=zd(qe=>{Iy(zi,qe),qe&&bn()});$i(()=>{bn()},[bn]);const fi=qe=>{jr||(pr(!0),Eo(!0),Rn&&Rn(qe))},ot=(qe,Oe)=>{jr&&(pr(!1),Kt&&Kt(qe,Oe))},Ie=(qe,Oe,Je,mt)=>{if(rn){if(di.length===Oe.length&&di.every((Jt,Sn)=>Jt===Oe[Sn]))return}else if(di===Oe)return;Ut&&Ut(qe,Oe,Je,mt),Ir(Oe)},Ce=Pi(!1),st=(qe,Oe,Je="selectOption",mt="options")=>{let Jt=Je,Sn=Oe;if(rn){Sn=Array.isArray(di)?di.slice():[];const an=PC(Sn,gn=>qt(Oe,gn));an===-1?Sn.push(Oe):mt!=="freeSolo"&&(Sn.splice(an,1),Jt="removeOption")}Ur(qe,Sn),Ie(qe,Sn,Jt,{option:Oe}),!q&&(!qe||!qe.ctrlKey&&!qe.metaKey)&&ot(qe,Jt),(v===!0||v==="touch"&&Ce.current||v==="mouse"&&!Ce.current)&&ri.current.blur()};function ft(qe,Oe){if(qe===-1)return-1;let Je=qe;for(;;){if(Oe==="next"&&Je===di.length||Oe==="previous"&&Je===-1)return-1;const mt=Vr.querySelector(`[data-tag-index="${Je}"]`);if(!mt||!mt.hasAttribute("tabindex")||mt.disabled||mt.getAttribute("aria-disabled")==="true")Je+=Oe==="next"?1:-1;else return Je}}const kt=(qe,Oe)=>{if(!rn)return;nr===""&&ot(qe,"toggleInput");let Je=li;li===-1?nr===""&&Oe==="previous"&&(Je=di.length-1):(Je+=Oe==="next"?1:-1,Je<0&&(Je=0),Je===di.length&&(Je=-1)),Je=ft(Je,Oe),Qi(Je),er(Je)},zt=qe=>{ei.current=!0,Ri(""),Gt&&Gt(qe,"","clear"),Ie(qe,rn?[]:null,"clear")},Rt=qe=>Oe=>{if(qe.onKeyDown&&qe.onKeyDown(Oe),!Oe.defaultMuiPrevented&&(li!==-1&&["ArrowLeft","ArrowRight"].indexOf(Oe.key)===-1&&(Qi(-1),er(-1)),Oe.which!==229))switch(Oe.key){case"Home":$t&&nt&&(Oe.preventDefault(),Un({diff:"start",direction:"next",reason:"keyboard",event:Oe}));break;case"End":$t&&nt&&(Oe.preventDefault(),Un({diff:"end",direction:"previous",reason:"keyboard",event:Oe}));break;case"PageUp":Oe.preventDefault(),Un({diff:-qL,direction:"previous",reason:"keyboard",event:Oe}),fi(Oe);break;case"PageDown":Oe.preventDefault(),Un({diff:qL,direction:"next",reason:"keyboard",event:Oe}),fi(Oe);break;case"ArrowDown":Oe.preventDefault(),Un({diff:1,direction:"next",reason:"keyboard",event:Oe}),fi(Oe);break;case"ArrowUp":Oe.preventDefault(),Un({diff:-1,direction:"previous",reason:"keyboard",event:Oe}),fi(Oe);break;case"ArrowLeft":kt(Oe,"previous");break;case"ArrowRight":kt(Oe,"next");break;case"Enter":if(ji.current!==-1&&$t){const Je=en[ji.current],mt=Te?Te(Je):!1;if(Oe.preventDefault(),mt)return;st(Oe,Je,"selectOption"),r&&ri.current.setSelectionRange(ri.current.value.length,ri.current.value.length)}else xe&&nr!==""&&Ao===!1&&(rn&&Oe.preventDefault(),st(Oe,nr,"createOption","freeSolo"));break;case"Escape":$t?(Oe.preventDefault(),Oe.stopPropagation(),ot(Oe,"escape")):s&&(nr!==""||rn&&di.length>0)&&(Oe.preventDefault(),Oe.stopPropagation(),zt(Oe));break;case"Backspace":if(rn&&!Xn&&nr===""&&di.length>0){const Je=li===-1?di.length-1:li,mt=di.slice();mt.splice(Je,1),Ie(Oe,mt,"removeOption",{option:di[Je]})}break;case"Delete":if(rn&&!Xn&&nr===""&&di.length>0&&li!==-1){const Je=li,mt=di.slice();mt.splice(Je,1),Ie(Oe,mt,"removeOption",{option:di[Je]})}break}},yt=qe=>{ir(!0),Cn&&!ei.current&&fi(qe)},Xt=qe=>{if(t(zi)){ri.current.focus();return}ir(!1),tr.current=!0,ei.current=!1,f&&ji.current!==-1&&$t?st(qe,en[ji.current],"blur"):f&&xe&&nr!==""?st(qe,nr,"blur","freeSolo"):h&&Ur(qe,di),ot(qe,"blur")},Tn=qe=>{const Oe=qe.target.value;nr!==Oe&&(Ri(Oe),Eo(!1),Gt&&Gt(qe,Oe,"input")),Oe===""?!V&&!rn&&Ie(qe,null,"clear"):fi(qe)},Fn=qe=>{const Oe=Number(qe.currentTarget.getAttribute("data-option-index"));ji.current!==Oe&&Xi({event:qe,index:Oe,reason:"mouse"})},zn=qe=>{Xi({event:qe,index:Number(qe.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Ce.current=!0},rr=qe=>{const Oe=Number(qe.currentTarget.getAttribute("data-option-index"));st(qe,en[Oe],"selectOption"),Ce.current=!1},Zi=qe=>Oe=>{const Je=di.slice();Je.splice(qe,1),Ie(Oe,Je,"removeOption",{option:di[qe]})},Pe=qe=>{jr?ot(qe,"toggleInput"):fi(qe)},pe=qe=>{qe.currentTarget.contains(qe.target)&&qe.target.getAttribute("id")!==Bn&&qe.preventDefault()},we=qe=>{qe.currentTarget.contains(qe.target)&&(ri.current.focus(),Wn&&tr.current&&ri.current.selectionEnd-ri.current.selectionStart===0&&ri.current.select(),tr.current=!1)},je=qe=>{!te&&(nr===""||!jr)&&Pe(qe)};let Ke=xe&&nr.length>0;Ke=Ke||(rn?di.length>0:di!==null);let _t=en;return Se&&(_t=en.reduce((qe,Oe,Je)=>{const mt=Se(Oe);return qe.length>0&&qe[qe.length-1].group===mt?qe[qe.length-1].options.push(Oe):qe.push({key:Je,index:Je,group:mt,options:[Oe]}),qe},[])),te&&hr&&Xt(),{getRootProps:(qe={})=>ct({"aria-owns":So?`${Bn}-listbox`:null},qe,{onKeyDown:Rt(qe),onMouseDown:pe,onClick:we}),getInputLabelProps:()=>({id:`${Bn}-label`,htmlFor:Bn}),getInputProps:()=>({id:Bn,value:nr,onBlur:Xt,onFocus:yt,onChange:Tn,onMouseDown:je,"aria-activedescendant":$t?"":null,"aria-autocomplete":r?"both":"list","aria-controls":So?`${Bn}-listbox`:void 0,"aria-expanded":So,autoComplete:"off",ref:ri,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:te}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:zt}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Pe}),getTagProps:({index:qe})=>ct({key:qe,"data-tag-index":qe,tabIndex:-1},!Xn&&{onDelete:Zi(qe)}),getListboxProps:()=>({role:"listbox",id:`${Bn}-listbox`,"aria-labelledby":`${Bn}-label`,ref:bi,onMouseDown:qe=>{qe.preventDefault()}}),getOptionProps:({index:qe,option:Oe})=>{var Je;const mt=(rn?di:[di]).some(Sn=>Sn!=null&&qt(Oe,Sn)),Jt=Te?Te(Oe):!1;return{key:(Je=Ee==null?void 0:Ee(Oe))!=null?Je:Hn(Oe),tabIndex:-1,role:"option",id:`${Bn}-option-${qe}`,onMouseMove:Fn,onClick:rr,onTouchStart:zn,"data-option-index":qe,"aria-disabled":Jt,"aria-selected":mt}},id:Bn,inputValue:nr,value:di,dirty:Ke,expanded:$t&&Vr,popupOpen:$t,focused:hr||li!==-1,anchorEl:Vr,setAnchorEl:sr,focusedTag:li,groupedOptions:_t}}const k$=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],P$=Fi(p$,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),qx=Yr(function(t,i){var r;const d=lC(),f=zs({props:t,name:"MuiPopper"}),{anchorEl:v,component:h,components:s,componentsProps:U,container:$,disablePortal:V,keepMounted:q,modifiers:te,open:he,placement:Ae,popperOptions:De,popperRef:ke,transition:xe,slots:Te,slotProps:Ee}=f,Fe=gr(f,k$),Se=(r=Te==null?void 0:Te.root)!=null?r:s==null?void 0:s.Root,nt=ct({anchorEl:v,container:$,disablePortal:V,keepMounted:q,modifiers:te,open:he,placement:Ae,popperOptions:De,popperRef:ke,transition:xe},Fe);return ze(P$,ct({as:h,direction:d==null?void 0:d.direction,slots:{root:Se},slotProps:Ee??U},nt,{ref:i}))});function F$(e){return Ls("MuiListSubheader",e)}bs("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const D$=["className","color","component","disableGutters","disableSticky","inset"],U$=e=>{const{classes:t,color:i,disableGutters:r,inset:d,disableSticky:f}=e,v={root:["root",i!=="default"&&`color${qi(i)}`,!r&&"gutters",d&&"inset",!f&&"sticky"]};return Us(v,F$,t)},z$=Fi("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.color!=="default"&&t[`color${qi(i.color)}`],!i.disableGutters&&t.gutters,i.inset&&t.inset,!i.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>ct({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),XL=Yr(function(t,i){const r=zs({props:t,name:"MuiListSubheader"}),{className:d,color:f="default",component:v="li",disableGutters:h=!1,disableSticky:s=!1,inset:U=!1}=r,$=gr(r,D$),V=ct({},r,{color:f,component:v,disableGutters:h,disableSticky:s,inset:U}),q=U$(V);return ze(z$,ct({as:v,className:$r(q.root,d),ref:i,ownerState:V},$))});XL.muiSkipListHighlight=!0;const YL=XL,R$=bA(ze("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function O$(e){return Ls("MuiChip",e)}const Rs=bs("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),N$=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Q$=e=>{const{classes:t,disabled:i,size:r,color:d,iconColor:f,onDelete:v,clickable:h,variant:s}=e,U={root:["root",s,i&&"disabled",`size${qi(r)}`,`color${qi(d)}`,h&&"clickable",h&&`clickableColor${qi(d)}`,v&&"deletable",v&&`deletableColor${qi(d)}`,`${s}${qi(d)}`],label:["label",`label${qi(r)}`],avatar:["avatar",`avatar${qi(r)}`,`avatarColor${qi(d)}`],icon:["icon",`icon${qi(r)}`,`iconColor${qi(f)}`],deleteIcon:["deleteIcon",`deleteIcon${qi(r)}`,`deleteIconColor${qi(d)}`,`deleteIcon${qi(s)}Color${qi(d)}`]};return Us(U,O$,t)},$$=Fi("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e,{color:r,iconColor:d,clickable:f,onDelete:v,size:h,variant:s}=i;return[{[`& .${Rs.avatar}`]:t.avatar},{[`& .${Rs.avatar}`]:t[`avatar${qi(h)}`]},{[`& .${Rs.avatar}`]:t[`avatarColor${qi(r)}`]},{[`& .${Rs.icon}`]:t.icon},{[`& .${Rs.icon}`]:t[`icon${qi(h)}`]},{[`& .${Rs.icon}`]:t[`iconColor${qi(d)}`]},{[`& .${Rs.deleteIcon}`]:t.deleteIcon},{[`& .${Rs.deleteIcon}`]:t[`deleteIcon${qi(h)}`]},{[`& .${Rs.deleteIcon}`]:t[`deleteIconColor${qi(r)}`]},{[`& .${Rs.deleteIcon}`]:t[`deleteIcon${qi(s)}Color${qi(r)}`]},t.root,t[`size${qi(h)}`],t[`color${qi(r)}`],f&&t.clickable,f&&r!=="default"&&t[`clickableColor${qi(r)})`],v&&t.deletable,v&&r!=="default"&&t[`deletableColor${qi(r)}`],t[s],t[`${s}${qi(r)}`]]}})(({theme:e,ownerState:t})=>{const i=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return ct({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Rs.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Rs.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:i,fontSize:e.typography.pxToRem(12)},[`& .${Rs.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Rs.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Rs.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Rs.icon}`]:ct({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&ct({color:e.vars?e.vars.palette.Chip.defaultIconColor:i},t.color!=="default"&&{color:"inherit"})),[`& .${Rs.deleteIcon}`]:ct({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:ho(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:ho(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:ho(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${Rs.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ho(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${Rs.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>ct({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ho(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Rs.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ho(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${Rs.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>ct({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Rs.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Rs.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Rs.avatar}`]:{marginLeft:4},[`& .${Rs.avatarSmall}`]:{marginLeft:2},[`& .${Rs.icon}`]:{marginLeft:4},[`& .${Rs.iconSmall}`]:{marginLeft:2},[`& .${Rs.deleteIcon}`]:{marginRight:5},[`& .${Rs.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:ho(e.palette[t.color].main,.7)}`,[`&.${Rs.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ho(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${Rs.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:ho(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${Rs.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:ho(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),j$=Fi("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:i}=e,{size:r}=i;return[t.label,t[`label${qi(r)}`]]}})(({ownerState:e})=>ct({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.variant==="outlined"&&{paddingLeft:11,paddingRight:11},e.size==="small"&&{paddingLeft:8,paddingRight:8},e.size==="small"&&e.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function JL(e){return e.key==="Backspace"||e.key==="Delete"}const H$=Yr(function(t,i){const r=zs({props:t,name:"MuiChip"}),{avatar:d,className:f,clickable:v,color:h="default",component:s,deleteIcon:U,disabled:$=!1,icon:V,label:q,onClick:te,onDelete:he,onKeyDown:Ae,onKeyUp:De,size:ke="medium",variant:xe="filled",tabIndex:Te,skipFocusWhenDisabled:Ee=!1}=r,Fe=gr(r,N$),Se=Pi(null),nt=Ul(Se,i),xt=Cn=>{Cn.stopPropagation(),he&&he(Cn)},Bt=Cn=>{Cn.currentTarget===Cn.target&&JL(Cn)&&Cn.preventDefault(),Ae&&Ae(Cn)},Xe=Cn=>{Cn.currentTarget===Cn.target&&(he&&JL(Cn)?he(Cn):Cn.key==="Escape"&&Se.current&&Se.current.blur()),De&&De(Cn)},qt=v!==!1&&te?!0:v,rn=qt||he?$x:s||"div",Ut=ct({},r,{component:rn,disabled:$,size:ke,color:h,iconColor:Ha(V)&&V.props.color||h,onDelete:!!he,clickable:qt,variant:xe}),Kt=Q$(Ut),On=rn===$x?ct({component:s||"div",focusVisibleClassName:Kt.focusVisible},he&&{disableRipple:!0}):{};let Gt=null;he&&(Gt=U&&Ha(U)?pl(U,{className:$r(U.props.className,Kt.deleteIcon),onClick:xt}):ze(R$,{className:$r(Kt.deleteIcon),onClick:xt}));let Rn=null;d&&Ha(d)&&(Rn=pl(d,{className:$r(Kt.avatar,d.props.className)}));let mn=null;return V&&Ha(V)&&(mn=pl(V,{className:$r(Kt.icon,V.props.className)})),ze($$,ct({as:rn,className:$r(Kt.root,f),disabled:qt&&$?!0:void 0,onClick:te,onKeyDown:Bt,onKeyUp:Xe,ref:nt,tabIndex:Ee&&$?-1:Te,ownerState:Ut},On,Fe,{children:[Rn||mn,ze(j$,{className:$r(Kt.label),ownerState:Ut,children:q}),Gt]}))});function A_({props:e,states:t,muiFormControl:i}){return t.reduce((r,d)=>(r[d]=e[d],i&&typeof e[d]>"u"&&(r[d]=i[d]),r),{})}const FC=Sh(void 0);function f_(){return nl(FC)}function V$(e){return ze(kN,ct({},e,{defaultTheme:Tx,themeId:o_}))}function ek(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Xx(e,t=!1){return e&&(ek(e.value)&&e.value!==""||t&&ek(e.defaultValue)&&e.defaultValue!=="")}function G$(e){return e.startAdornment}function W$(e){return Ls("MuiInputBase",e)}const Ad=bs("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),K$=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Yx=(e,t)=>{const{ownerState:i}=e;return[t.root,i.formControl&&t.formControl,i.startAdornment&&t.adornedStart,i.endAdornment&&t.adornedEnd,i.error&&t.error,i.size==="small"&&t.sizeSmall,i.multiline&&t.multiline,i.color&&t[`color${qi(i.color)}`],i.fullWidth&&t.fullWidth,i.hiddenLabel&&t.hiddenLabel]},Jx=(e,t)=>{const{ownerState:i}=e;return[t.input,i.size==="small"&&t.inputSizeSmall,i.multiline&&t.inputMultiline,i.type==="search"&&t.inputTypeSearch,i.startAdornment&&t.inputAdornedStart,i.endAdornment&&t.inputAdornedEnd,i.hiddenLabel&&t.inputHiddenLabel]},Z$=e=>{const{classes:t,color:i,disabled:r,error:d,endAdornment:f,focused:v,formControl:h,fullWidth:s,hiddenLabel:U,multiline:$,readOnly:V,size:q,startAdornment:te,type:he}=e,Ae={root:["root",`color${qi(i)}`,r&&"disabled",d&&"error",s&&"fullWidth",v&&"focused",h&&"formControl",q&&q!=="medium"&&`size${qi(q)}`,$&&"multiline",te&&"adornedStart",f&&"adornedEnd",U&&"hiddenLabel",V&&"readOnly"],input:["input",r&&"disabled",he==="search"&&"inputTypeSearch",$&&"inputMultiline",q==="small"&&"inputSizeSmall",U&&"inputHiddenLabel",te&&"inputAdornedStart",f&&"inputAdornedEnd",V&&"readOnly"]};return Us(Ae,W$,t)},eb=Fi("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Yx})(({theme:e,ownerState:t})=>ct({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Ad.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&ct({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),tb=Fi("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Jx})(({theme:e,ownerState:t})=>{const i=e.palette.mode==="light",r=ct({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),d={opacity:"0 !important"},f=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return ct({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Ad.formControl} &`]:{"&::-webkit-input-placeholder":d,"&::-moz-placeholder":d,"&:-ms-input-placeholder":d,"&::-ms-input-placeholder":d,"&:focus::-webkit-input-placeholder":f,"&:focus::-moz-placeholder":f,"&:focus:-ms-input-placeholder":f,"&:focus::-ms-input-placeholder":f},[`&.${Ad.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),q$=ze(V$,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),DC=Yr(function(t,i){var r;const d=zs({props:t,name:"MuiInputBase"}),{"aria-describedby":f,autoComplete:v,autoFocus:h,className:s,components:U={},componentsProps:$={},defaultValue:V,disabled:q,disableInjectingGlobalStyles:te,endAdornment:he,fullWidth:Ae=!1,id:De,inputComponent:ke="input",inputProps:xe={},inputRef:Te,maxRows:Ee,minRows:Fe,multiline:Se=!1,name:nt,onBlur:xt,onChange:Bt,onClick:Xe,onFocus:qt,onKeyDown:rn,onKeyUp:Ut,placeholder:Kt,readOnly:On,renderSuffix:Gt,rows:Rn,slotProps:mn={},slots:Cn={},startAdornment:Qt,type:Xn="text",value:Wn}=d,Bi=gr(d,K$),Bn=xe.value!=null?xe.value:Wn,{current:Hn}=Pi(Bn!=null),ei=Pi(),tr=xs($t=>{},[]),ri=Ul(ei,Te,xe.ref,tr),[zi,Vr]=ur(!1),sr=f_(),li=A_({props:d,muiFormControl:sr,states:["color","disabled","error","hiddenLabel","size","required","filled"]});li.focused=sr?sr.focused:zi,$i(()=>{!sr&&q&&zi&&(Vr(!1),xt&&xt())},[sr,q,zi,xt]);const Qi=sr&&sr.onFilled,Ki=sr&&sr.onEmpty,ji=xs($t=>{Xx($t)?Qi&&Qi():Ki&&Ki()},[Qi,Ki]);yA(()=>{Hn&&ji({value:Bn})},[Bn,ji,Hn]);const di=$t=>{if(li.disabled){$t.stopPropagation();return}qt&&qt($t),xe.onFocus&&xe.onFocus($t),sr&&sr.onFocus?sr.onFocus($t):Vr(!0)},Ir=$t=>{xt&&xt($t),xe.onBlur&&xe.onBlur($t),sr&&sr.onBlur?sr.onBlur($t):Vr(!1)},nr=($t,...en)=>{if(!Hn){const Fr=$t.target||ei.current;if(Fr==null)throw new Error(_p(1));ji({value:Fr.value})}xe.onChange&&xe.onChange($t,...en),Bt&&Bt($t,...en)};$i(()=>{ji(ei.current)},[]);const Ri=$t=>{ei.current&&$t.currentTarget===$t.target&&ei.current.focus(),Xe&&Xe($t)};let hr=ke,ir=xe;Se&&hr==="input"&&(Rn?ir=ct({type:void 0,minRows:Rn,maxRows:Rn},ir):ir=ct({type:void 0,maxRows:Ee,minRows:Fe},ir),hr=E$);const Ur=$t=>{ji($t.animationName==="mui-auto-fill-cancel"?ei.current:{value:"x"})};$i(()=>{sr&&sr.setAdornedStart(!!Qt)},[sr,Qt]);const jr=ct({},d,{color:li.color||"primary",disabled:li.disabled,endAdornment:he,error:li.error,focused:li.focused,formControl:sr,fullWidth:Ae,hiddenLabel:li.hiddenLabel,multiline:Se,size:li.size,startAdornment:Qt,type:Xn}),pr=Z$(jr),Zr=Cn.root||U.Root||eb,Eo=mn.root||$.root||{},Ao=Cn.input||U.Input||tb;return ir=ct({},ir,(r=mn.input)!=null?r:$.input),ze(vs,{children:[!te&&q$,ze(Zr,ct({},Eo,!Hx(Zr)&&{ownerState:ct({},jr,Eo.ownerState)},{ref:i,onClick:Ri},Bi,{className:$r(pr.root,Eo.className,s,On&&"MuiInputBase-readOnly"),children:[Qt,ze(FC.Provider,{value:null,children:ze(Ao,ct({ownerState:jr,"aria-invalid":li.error,"aria-describedby":f,autoComplete:v,autoFocus:h,defaultValue:V,disabled:li.disabled,id:De,onAnimationStart:Ur,name:nt,placeholder:Kt,readOnly:On,required:li.required,rows:Rn,value:Bn,onKeyDown:rn,onKeyUp:Ut,type:Xn},ir,!Hx(Ao)&&{as:hr,ownerState:ct({},jr,ir.ownerState)},{ref:ri,className:$r(pr.input,ir.className,On&&"MuiInputBase-readOnly"),onBlur:Ir,onChange:nr,onFocus:di}))}),he,Gt?Gt(ct({},li,{startAdornment:Qt})):null]}))]})});function X$(e){return Ls("MuiInput",e)}const bp=ct({},Ad,bs("MuiInput",["root","underline","input"]));function Y$(e){return Ls("MuiOutlinedInput",e)}const of=ct({},Ad,bs("MuiOutlinedInput",["root","notchedOutline","input"]));function J$(e){return Ls("MuiFilledInput",e)}const fd=ct({},Ad,bs("MuiFilledInput",["root","underline","input"])),tk=bA(ze("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function ej(e){return Ls("MuiAutocomplete",e)}const us=bs("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var nk,ik;const tj=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],nj=["ref"],ij=["key"],rj=e=>{const{classes:t,disablePortal:i,expanded:r,focused:d,fullWidth:f,hasClearIcon:v,hasPopupIcon:h,inputFocused:s,popupOpen:U,size:$}=e,V={root:["root",r&&"expanded",d&&"focused",f&&"fullWidth",v&&"hasClearIcon",h&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",s&&"inputFocused"],tag:["tag",`tagSize${qi($)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",U&&"popupIndicatorOpen"],popper:["popper",i&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return Us(V,ej,t)},oj=Fi("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e,{fullWidth:r,hasClearIcon:d,hasPopupIcon:f,inputFocused:v,size:h}=i;return[{[`& .${us.tag}`]:t.tag},{[`& .${us.tag}`]:t[`tagSize${qi(h)}`]},{[`& .${us.inputRoot}`]:t.inputRoot},{[`& .${us.input}`]:t.input},{[`& .${us.input}`]:v&&t.inputFocused},t.root,r&&t.fullWidth,f&&t.hasPopupIcon,d&&t.hasClearIcon]}})(({ownerState:e})=>ct({[`&.${us.focused} .${us.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${us.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${us.tag}`]:ct({margin:3,maxWidth:"calc(100% - 6px)"},e.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${us.inputRoot}`]:{flexWrap:"wrap",[`.${us.hasPopupIcon}&, .${us.hasClearIcon}&`]:{paddingRight:30},[`.${us.hasPopupIcon}.${us.hasClearIcon}&`]:{paddingRight:56},[`& .${us.input}`]:{width:0,minWidth:30}},[`& .${bp.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${bp.root}.${Ad.sizeSmall}`]:{[`& .${bp.input}`]:{padding:"2px 4px 3px 0"}},[`& .${of.root}`]:{padding:9,[`.${us.hasPopupIcon}&, .${us.hasClearIcon}&`]:{paddingRight:39},[`.${us.hasPopupIcon}.${us.hasClearIcon}&`]:{paddingRight:65},[`& .${us.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${us.endAdornment}`]:{right:9}},[`& .${of.root}.${Ad.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${us.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${fd.root}`]:{paddingTop:19,paddingLeft:8,[`.${us.hasPopupIcon}&, .${us.hasClearIcon}&`]:{paddingRight:39},[`.${us.hasPopupIcon}.${us.hasClearIcon}&`]:{paddingRight:65},[`& .${fd.input}`]:{padding:"7px 4px"},[`& .${us.endAdornment}`]:{right:9}},[`& .${fd.root}.${Ad.sizeSmall}`]:{paddingBottom:1,[`& .${fd.input}`]:{padding:"2.5px 4px"}},[`& .${Ad.hiddenLabel}`]:{paddingTop:8},[`& .${fd.root}.${Ad.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${us.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${fd.root}.${Ad.hiddenLabel}.${Ad.sizeSmall}`]:{[`& .${us.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${us.input}`]:ct({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})})),sj=Fi("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),aj=Fi(jx,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),lj=Fi(jx,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>ct({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})(({ownerState:e})=>ct({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"})),cj=Fi(qx,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[{[`& .${us.option}`]:t.option},t.popper,i.disablePortal&&t.popperDisablePortal]}})(({theme:e,ownerState:t})=>ct({zIndex:(e.vars||e).zIndex.modal},t.disablePortal&&{position:"absolute"})),uj=Fi(Vy,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>ct({},e.typography.body1,{overflow:"auto"})),hj=Fi("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),dj=Fi("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),Aj=Fi("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${us.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${us.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${us.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ho(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${us.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ho(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${us.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ho(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),fj=Fi(YL,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),pj=Fi("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${us.option}`]:{paddingLeft:24}}),rk=Yr(function(t,i){var r,d,f,v;const h=zs({props:t,name:"MuiAutocomplete"}),{autoComplete:s=!1,autoHighlight:U=!1,autoSelect:$=!1,blurOnSelect:V=!1,ChipProps:q,className:te,clearIcon:he=nk||(nk=ze(xL,{fontSize:"small"})),clearOnBlur:Ae=!h.freeSolo,clearOnEscape:De=!1,clearText:ke="Clear",closeText:xe="Close",componentsProps:Te={},defaultValue:Ee=h.multiple?[]:null,disableClearable:Fe=!1,disableCloseOnSelect:Se=!1,disabled:nt=!1,disabledItemsFocusable:xt=!1,disableListWrap:Bt=!1,disablePortal:Xe=!1,filterSelectedOptions:qt=!1,forcePopupIcon:rn="auto",freeSolo:Ut=!1,fullWidth:Kt=!1,getLimitTagsText:On=Oe=>`+${Oe}`,getOptionLabel:Gt,groupBy:Rn,handleHomeEndKeys:mn=!h.freeSolo,includeInputInList:Cn=!1,limitTags:Qt=-1,ListboxComponent:Xn="ul",ListboxProps:Wn,loading:Bi=!1,loadingText:Bn="Loading…",multiple:Hn=!1,noOptionsText:ei="No options",openOnFocus:tr=!1,openText:ri="Open",PaperComponent:zi=Vy,PopperComponent:Vr=qx,popupIcon:sr=ik||(ik=ze(tk,{})),readOnly:li=!1,renderGroup:Qi,renderInput:Ki,renderOption:ji,renderTags:di,selectOnFocus:Ir=!h.freeSolo,size:nr="medium",slotProps:Ri={}}=h,hr=gr(h,tj),{getRootProps:ir,getInputProps:Ur,getInputLabelProps:jr,getPopupIndicatorProps:pr,getClearProps:Zr,getTagProps:Eo,getListboxProps:Ao,getOptionProps:$t,value:en,dirty:Fr,expanded:So,id:er,popupOpen:xi,focused:Xi,focusedTag:Un,anchorEl:Oi,setAnchorEl:bn,inputValue:bi,groupedOptions:fi}=L$(ct({},h,{componentName:"Autocomplete"})),ot=!Fe&&!nt&&Fr&&!li,Ie=(!Ut||rn===!0)&&rn!==!1,{onMouseDown:Ce}=Ur(),{ref:st}=Wn??{},ft=Ao(),{ref:kt}=ft,zt=gr(ft,nj),Rt=Ul(kt,st),Xt=Gt||(Oe=>{var Je;return(Je=Oe.label)!=null?Je:Oe}),Tn=ct({},h,{disablePortal:Xe,expanded:So,focused:Xi,fullWidth:Kt,getOptionLabel:Xt,hasClearIcon:ot,hasPopupIcon:Ie,inputFocused:Un===-1,popupOpen:xi,size:nr}),Fn=rj(Tn);let zn;if(Hn&&en.length>0){const Oe=Je=>ct({className:Fn.tag,disabled:nt},Eo(Je));di?zn=di(en,Oe,Tn):zn=en.map((Je,mt)=>ze(H$,ct({label:Xt(Je),size:nr},Oe({index:mt}),q)))}if(Qt>-1&&Array.isArray(zn)){const Oe=zn.length-Qt;!Xi&&Oe>0&&(zn=zn.splice(0,Qt),zn.push(ze("span",{className:Fn.tag,children:On(Oe)},zn.length)))}const Zi=Qi||(Oe=>ze("li",{children:[ze(fj,{className:Fn.groupLabel,ownerState:Tn,component:"div",children:Oe.group}),ze(pj,{className:Fn.groupUl,ownerState:Tn,children:Oe.children})]},Oe.key)),pe=ji||((Oe,Je)=>{const{key:mt}=Oe,Jt=gr(Oe,ij);return ze("li",ct({},Jt,{children:Xt(Je)}),mt)}),we=(Oe,Je)=>{const mt=$t({option:Oe,index:Je});return pe(ct({},mt,{className:Fn.option}),Oe,{selected:mt["aria-selected"],index:Je,inputValue:bi},Tn)},je=(r=Ri.clearIndicator)!=null?r:Te.clearIndicator,Ke=(d=Ri.paper)!=null?d:Te.paper,_t=(f=Ri.popper)!=null?f:Te.popper,qe=(v=Ri.popupIndicator)!=null?v:Te.popupIndicator;return ze(vs,{children:[ze(oj,ct({ref:i,className:$r(Fn.root,te),ownerState:Tn},ir(hr),{children:Ki({id:er,disabled:nt,fullWidth:!0,size:nr==="small"?"small":void 0,InputLabelProps:jr(),InputProps:ct({ref:bn,className:Fn.inputRoot,startAdornment:zn,onClick:Oe=>{Oe.target===Oe.currentTarget&&Ce(Oe)}},(ot||Ie)&&{endAdornment:ze(sj,{className:Fn.endAdornment,ownerState:Tn,children:[ot?ze(aj,ct({},Zr(),{"aria-label":ke,title:ke,ownerState:Tn},je,{className:$r(Fn.clearIndicator,je==null?void 0:je.className),children:he})):null,Ie?ze(lj,ct({},pr(),{disabled:nt,"aria-label":xi?xe:ri,title:xi?xe:ri,ownerState:Tn},qe,{className:$r(Fn.popupIndicator,qe==null?void 0:qe.className),children:sr})):null]})}),inputProps:ct({className:Fn.input,disabled:nt,readOnly:li},Ur())})})),Oi?ze(cj,ct({as:Vr,disablePortal:Xe,style:{width:Oi?Oi.clientWidth:null},ownerState:Tn,role:"presentation",anchorEl:Oi,open:xi},_t,{className:$r(Fn.popper,_t==null?void 0:_t.className),children:ze(uj,ct({ownerState:Tn,as:zi},Ke,{className:$r(Fn.paper,Ke==null?void 0:Ke.className),children:[Bi&&fi.length===0?ze(hj,{className:Fn.loading,ownerState:Tn,children:Bn}):null,fi.length===0&&!Ut&&!Bi?ze(dj,{className:Fn.noOptions,ownerState:Tn,role:"presentation",onMouseDown:Oe=>{Oe.preventDefault()},children:ei}):null,fi.length>0?ze(Aj,ct({as:Xn,className:Fn.listbox,ownerState:Tn},zt,Wn,{ref:Rt,children:fi.map((Oe,Je)=>Rn?Zi({key:Oe.key,group:Oe.group,children:Oe.options.map((mt,Jt)=>we(mt,Oe.index+Jt))}):we(Oe,Je))})):null]}))})):null]})}),mj=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],gj={entering:{opacity:1},entered:{opacity:1}},_j=Yr(function(t,i){const r=Qy(),d={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:f,appear:v=!0,children:h,easing:s,in:U,onEnter:$,onEntered:V,onEntering:q,onExit:te,onExited:he,onExiting:Ae,style:De,timeout:ke=d,TransitionComponent:xe=fL}=t,Te=gr(t,mj),Ee=Pi(null),Fe=Ul(Ee,h.ref,i),Se=Kt=>On=>{if(Kt){const Gt=Ee.current;On===void 0?Kt(Gt):Kt(Gt,On)}},nt=Se(q),xt=Se((Kt,On)=>{pL(Kt);const Gt=Nx({style:De,timeout:ke,easing:s},{mode:"enter"});Kt.style.webkitTransition=r.transitions.create("opacity",Gt),Kt.style.transition=r.transitions.create("opacity",Gt),$&&$(Kt,On)}),Bt=Se(V),Xe=Se(Ae),qt=Se(Kt=>{const On=Nx({style:De,timeout:ke,easing:s},{mode:"exit"});Kt.style.webkitTransition=r.transitions.create("opacity",On),Kt.style.transition=r.transitions.create("opacity",On),te&&te(Kt)}),rn=Se(he);return ze(xe,ct({appear:v,in:U,nodeRef:Ee,onEnter:xt,onEntered:Bt,onEntering:nt,onExit:qt,onExited:rn,onExiting:Xe,addEndListener:Kt=>{f&&f(Ee.current,Kt)},timeout:ke},Te,{children:(Kt,On)=>pl(h,ct({style:ct({opacity:0,visibility:Kt==="exited"&&!U?"hidden":void 0},gj[Kt],De,h.props.style),ref:Fe},On))}))});function yj(e){return Ls("MuiBackdrop",e)}bs("MuiBackdrop",["root","invisible"]);const vj=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],xj=e=>{const{classes:t,invisible:i}=e;return Us({root:["root",i&&"invisible"]},yj,t)},bj=Fi("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.invisible&&t.invisible]}})(({ownerState:e})=>ct({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),wj=Yr(function(t,i){var r,d,f;const v=zs({props:t,name:"MuiBackdrop"}),{children:h,className:s,component:U="div",components:$={},componentsProps:V={},invisible:q=!1,open:te,slotProps:he={},slots:Ae={},TransitionComponent:De=_j,transitionDuration:ke}=v,xe=gr(v,vj),Te=ct({},v,{component:U,invisible:q}),Ee=xj(Te),Fe=(r=he.root)!=null?r:V.root;return ze(De,ct({in:te,timeout:ke},xe,{children:ze(bj,ct({"aria-hidden":!0},Fe,{as:(d=(f=Ae.root)!=null?f:$.Root)!=null?d:U,className:$r(Ee.root,s,Fe==null?void 0:Fe.className),ownerState:ct({},Te,Fe==null?void 0:Fe.ownerState),classes:Ee,ref:i,children:h}))}))});function Cj(e){return Ls("MuiCircularProgress",e)}bs("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Bj=["className","color","disableShrink","size","style","thickness","value","variant"];let nb=e=>e,ok,sk,ak,lk;const wp=44,Tj=Uy(ok||(ok=nb`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Ej=Uy(sk||(sk=nb`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Sj=e=>{const{classes:t,variant:i,color:r,disableShrink:d}=e,f={root:["root",i,`color${qi(r)}`],svg:["svg"],circle:["circle",`circle${qi(i)}`,d&&"circleDisableShrink"]};return Us(f,Cj,t)},Ij=Fi("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`color${qi(i.color)}`]]}})(({ownerState:e,theme:t})=>ct({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&J1(ak||(ak=nb`
      animation: ${0} 1.4s linear infinite;
    `),Tj)),Mj=Fi("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Lj=Fi("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.circle,t[`circle${qi(i.variant)}`],i.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>ct({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&J1(lk||(lk=nb`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Ej)),tv=Yr(function(t,i){const r=zs({props:t,name:"MuiCircularProgress"}),{className:d,color:f="primary",disableShrink:v=!1,size:h=40,style:s,thickness:U=3.6,value:$=0,variant:V="indeterminate"}=r,q=gr(r,Bj),te=ct({},r,{color:f,disableShrink:v,size:h,thickness:U,value:$,variant:V}),he=Sj(te),Ae={},De={},ke={};if(V==="determinate"){const xe=2*Math.PI*((wp-U)/2);Ae.strokeDasharray=xe.toFixed(3),ke["aria-valuenow"]=Math.round($),Ae.strokeDashoffset=`${((100-$)/100*xe).toFixed(3)}px`,De.transform="rotate(-90deg)"}return ze(Ij,ct({className:$r(he.root,d),style:ct({width:h,height:h},De,s),ownerState:te,ref:i,role:"progressbar"},ke,q,{children:ze(Mj,{className:he.svg,ownerState:te,viewBox:`${wp/2} ${wp/2} ${wp} ${wp}`,children:ze(Lj,{className:he.circle,style:Ae,ownerState:te,cx:wp,cy:wp,r:(wp-U)/2,fill:"none",strokeWidth:U})})}))});function kj(e){return Ls("MuiModal",e)}bs("MuiModal",["root","hidden","backdrop"]);const Pj=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],Fj=e=>{const{open:t,exited:i,classes:r}=e;return Us({root:["root",!t&&i&&"hidden"],backdrop:["backdrop"]},kj,r)},Dj=Fi("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,!i.open&&i.exited&&t.hidden]}})(({theme:e,ownerState:t})=>ct({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),Uj=Fi(wj,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),zj=Yr(function(t,i){var r,d,f,v,h,s;const U=zs({name:"MuiModal",props:t}),{BackdropComponent:$=Uj,BackdropProps:V,className:q,closeAfterTransition:te=!1,children:he,container:Ae,component:De,components:ke={},componentsProps:xe={},disableAutoFocus:Te=!1,disableEnforceFocus:Ee=!1,disableEscapeKeyDown:Fe=!1,disablePortal:Se=!1,disableRestoreFocus:nt=!1,disableScrollLock:xt=!1,hideBackdrop:Bt=!1,keepMounted:Xe=!1,onBackdropClick:qt,open:rn,slotProps:Ut,slots:Kt}=U,On=gr(U,Pj),Gt=ct({},U,{closeAfterTransition:te,disableAutoFocus:Te,disableEnforceFocus:Ee,disableEscapeKeyDown:Fe,disablePortal:Se,disableRestoreFocus:nt,disableScrollLock:xt,hideBackdrop:Bt,keepMounted:Xe}),{getRootProps:Rn,getBackdropProps:mn,getTransitionProps:Cn,portalRef:Qt,isTopModal:Xn,exited:Wn,hasTransition:Bi}=C$(ct({},Gt,{rootRef:i})),Bn=ct({},Gt,{exited:Wn}),Hn=Fj(Bn),ei={};if(he.props.tabIndex===void 0&&(ei.tabIndex="-1"),Bi){const{onEnter:Qi,onExited:Ki}=Cn();ei.onEnter=Qi,ei.onExited=Ki}const tr=(r=(d=Kt==null?void 0:Kt.root)!=null?d:ke.Root)!=null?r:Dj,ri=(f=(v=Kt==null?void 0:Kt.backdrop)!=null?v:ke.Backdrop)!=null?f:$,zi=(h=Ut==null?void 0:Ut.root)!=null?h:xe.root,Vr=(s=Ut==null?void 0:Ut.backdrop)!=null?s:xe.backdrop,sr=Om({elementType:tr,externalSlotProps:zi,externalForwardedProps:On,getSlotProps:Rn,additionalProps:{ref:i,as:De},ownerState:Bn,className:$r(q,zi==null?void 0:zi.className,Hn==null?void 0:Hn.root,!Bn.open&&Bn.exited&&(Hn==null?void 0:Hn.hidden))}),li=Om({elementType:ri,externalSlotProps:Vr,additionalProps:V,getSlotProps:Qi=>mn(ct({},Qi,{onClick:Ki=>{qt&&qt(Ki),Qi!=null&&Qi.onClick&&Qi.onClick(Ki)}})),className:$r(Vr==null?void 0:Vr.className,V==null?void 0:V.className,Hn==null?void 0:Hn.backdrop),ownerState:Bn});return!Xe&&!rn&&(!Bi||Wn)?null:ze(VL,{ref:Qt,container:Ae,disablePortal:Se,children:ze(tr,ct({},sr,{children:[!Bt&&$?ze(ri,ct({},li)):null,ze(J2,{disableEnforceFocus:Ee,disableAutoFocus:Te,disableRestoreFocus:nt,isEnabled:Xn,open:rn,children:pl(he,ei)})]}))})}),ck=bs("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Rj=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Oj=e=>{const{classes:t,disableUnderline:i}=e,d=Us({root:["root",!i&&"underline"],input:["input"]},J$,t);return ct({},t,d)},Nj=Fi(eb,{shouldForwardProp:e=>vA(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[...Yx(e,t),!i.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var i;const r=e.palette.mode==="light",d=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",f=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",v=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",h=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return ct({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:f,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:v,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:f}},[`&.${fd.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:f},[`&.${fd.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:h}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(i=(e.vars||e).palette[t.color||"primary"])==null?void 0:i.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${fd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${fd.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:d}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${fd.disabled}, .${fd.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${fd.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&ct({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9}))}),Qj=Fi(tb,{name:"MuiFilledInput",slot:"Input",overridesResolver:Jx})(({theme:e,ownerState:t})=>ct({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),uk=Yr(function(t,i){var r,d,f,v;const h=zs({props:t,name:"MuiFilledInput"}),{components:s={},componentsProps:U,fullWidth:$=!1,inputComponent:V="input",multiline:q=!1,slotProps:te,slots:he={},type:Ae="text"}=h,De=gr(h,Rj),ke=ct({},h,{fullWidth:$,inputComponent:V,multiline:q,type:Ae}),xe=Oj(h),Te={root:{ownerState:ke},input:{ownerState:ke}},Ee=te??U?eh(Te,te??U):Te,Fe=(r=(d=he.root)!=null?d:s.Root)!=null?r:Nj,Se=(f=(v=he.input)!=null?v:s.Input)!=null?f:Qj;return ze(DC,ct({slots:{root:Fe,input:Se},componentsProps:Ee,fullWidth:$,inputComponent:V,multiline:q,ref:i,type:Ae},De,{classes:xe}))});uk.muiName="Input";const hk=uk;function $j(e){return Ls("MuiFormControl",e)}bs("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const jj=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Hj=e=>{const{classes:t,margin:i,fullWidth:r}=e,d={root:["root",i!=="none"&&`margin${qi(i)}`,r&&"fullWidth"]};return Us(d,$j,t)},Vj=Fi("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>ct({},t.root,t[`margin${qi(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>ct({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),dk=Yr(function(t,i){const r=zs({props:t,name:"MuiFormControl"}),{children:d,className:f,color:v="primary",component:h="div",disabled:s=!1,error:U=!1,focused:$,fullWidth:V=!1,hiddenLabel:q=!1,margin:te="none",required:he=!1,size:Ae="medium",variant:De="outlined"}=r,ke=gr(r,jj),xe=ct({},r,{color:v,component:h,disabled:s,error:U,fullWidth:V,hiddenLabel:q,margin:te,required:he,size:Ae,variant:De}),Te=Hj(xe),[Ee,Fe]=ur(()=>{let Ut=!1;return d&&mA.forEach(d,Kt=>{if(!G0(Kt,["Input","Select"]))return;const On=G0(Kt,["Select"])?Kt.props.input:Kt;On&&G$(On.props)&&(Ut=!0)}),Ut}),[Se,nt]=ur(()=>{let Ut=!1;return d&&mA.forEach(d,Kt=>{G0(Kt,["Input","Select"])&&(Xx(Kt.props,!0)||Xx(Kt.props.inputProps,!0))&&(Ut=!0)}),Ut}),[xt,Bt]=ur(!1);s&&xt&&Bt(!1);const Xe=$!==void 0&&!s?$:xt;let qt;const rn=tl(()=>({adornedStart:Ee,setAdornedStart:Fe,color:v,disabled:s,error:U,filled:Se,focused:Xe,fullWidth:V,hiddenLabel:q,size:Ae,onBlur:()=>{Bt(!1)},onEmpty:()=>{nt(!1)},onFilled:()=>{nt(!0)},onFocus:()=>{Bt(!0)},registerEffect:qt,required:he,variant:De}),[Ee,v,s,U,Se,Xe,V,q,qt,he,Ae,De]);return ze(FC.Provider,{value:rn,children:ze(Vj,ct({as:h,ownerState:xe,className:$r(Te.root,f),ref:i},ke,{children:d}))})});function Gj(e){return Ls("MuiFormHelperText",e)}const Ak=bs("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var fk;const Wj=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Kj=e=>{const{classes:t,contained:i,size:r,disabled:d,error:f,filled:v,focused:h,required:s}=e,U={root:["root",d&&"disabled",f&&"error",r&&`size${qi(r)}`,i&&"contained",h&&"focused",v&&"filled",s&&"required"]};return Us(U,Gj,t)},Zj=Fi("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.size&&t[`size${qi(i.size)}`],i.contained&&t.contained,i.filled&&t.filled]}})(({theme:e,ownerState:t})=>ct({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Ak.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Ak.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),qj=Yr(function(t,i){const r=zs({props:t,name:"MuiFormHelperText"}),{children:d,className:f,component:v="p"}=r,h=gr(r,Wj),s=f_(),U=A_({props:r,muiFormControl:s,states:["variant","size","disabled","error","filled","focused","required"]}),$=ct({},r,{component:v,contained:U.variant==="filled"||U.variant==="outlined",variant:U.variant,size:U.size,disabled:U.disabled,error:U.error,filled:U.filled,focused:U.focused,required:U.required}),V=Kj($);return ze(Zj,ct({as:v,ownerState:$,className:$r(V.root,f),ref:i},h,{children:d===" "?fk||(fk=ze("span",{className:"notranslate",children:"​"})):d}))});function Xj(e){return Ls("MuiFormLabel",e)}const nv=bs("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Yj=["children","className","color","component","disabled","error","filled","focused","required"],Jj=e=>{const{classes:t,color:i,focused:r,disabled:d,error:f,filled:v,required:h}=e,s={root:["root",`color${qi(i)}`,d&&"disabled",f&&"error",v&&"filled",r&&"focused",h&&"required"],asterisk:["asterisk",f&&"error"]};return Us(s,Xj,t)},eH=Fi("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>ct({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>ct({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${nv.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${nv.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${nv.error}`]:{color:(e.vars||e).palette.error.main}})),tH=Fi("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${nv.error}`]:{color:(e.vars||e).palette.error.main}})),nH=Yr(function(t,i){const r=zs({props:t,name:"MuiFormLabel"}),{children:d,className:f,component:v="label"}=r,h=gr(r,Yj),s=f_(),U=A_({props:r,muiFormControl:s,states:["color","required","focused","disabled","error","filled"]}),$=ct({},r,{color:U.color||"primary",component:v,disabled:U.disabled,error:U.error,filled:U.filled,focused:U.focused,required:U.required}),V=Jj($);return ze(eH,ct({as:v,ownerState:$,className:$r(V.root,f),ref:i},h,{children:[d,U.required&&ze(tH,{ownerState:$,"aria-hidden":!0,className:V.asterisk,children:[" ","*"]})]}))}),iH=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function UC(e){return`scale(${e}, ${e**2})`}const rH={entering:{opacity:1,transform:UC(1)},entered:{opacity:1,transform:"none"}},zC=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),pk=Yr(function(t,i){const{addEndListener:r,appear:d=!0,children:f,easing:v,in:h,onEnter:s,onEntered:U,onEntering:$,onExit:V,onExited:q,onExiting:te,style:he,timeout:Ae="auto",TransitionComponent:De=fL}=t,ke=gr(t,iH),xe=Pi(),Te=Pi(),Ee=Qy(),Fe=Pi(null),Se=Ul(Fe,f.ref,i),nt=On=>Gt=>{if(On){const Rn=Fe.current;Gt===void 0?On(Rn):On(Rn,Gt)}},xt=nt($),Bt=nt((On,Gt)=>{pL(On);const{duration:Rn,delay:mn,easing:Cn}=Nx({style:he,timeout:Ae,easing:v},{mode:"enter"});let Qt;Ae==="auto"?(Qt=Ee.transitions.getAutoHeightDuration(On.clientHeight),Te.current=Qt):Qt=Rn,On.style.transition=[Ee.transitions.create("opacity",{duration:Qt,delay:mn}),Ee.transitions.create("transform",{duration:zC?Qt:Qt*.666,delay:mn,easing:Cn})].join(","),s&&s(On,Gt)}),Xe=nt(U),qt=nt(te),rn=nt(On=>{const{duration:Gt,delay:Rn,easing:mn}=Nx({style:he,timeout:Ae,easing:v},{mode:"exit"});let Cn;Ae==="auto"?(Cn=Ee.transitions.getAutoHeightDuration(On.clientHeight),Te.current=Cn):Cn=Gt,On.style.transition=[Ee.transitions.create("opacity",{duration:Cn,delay:Rn}),Ee.transitions.create("transform",{duration:zC?Cn:Cn*.666,delay:zC?Rn:Rn||Cn*.333,easing:mn})].join(","),On.style.opacity=0,On.style.transform=UC(.75),V&&V(On)}),Ut=nt(q),Kt=On=>{Ae==="auto"&&(xe.current=setTimeout(On,Te.current||0)),r&&r(Fe.current,On)};return $i(()=>()=>{clearTimeout(xe.current)},[]),ze(De,ct({appear:d,in:h,nodeRef:Fe,onEnter:Bt,onEntered:Xe,onEntering:xt,onExit:rn,onExited:Ut,onExiting:qt,addEndListener:Kt,timeout:Ae==="auto"?null:Ae},ke,{children:(On,Gt)=>pl(f,ct({style:ct({opacity:0,transform:UC(.75),visibility:On==="exited"&&!h?"hidden":void 0},rH[On],he,f.props.style),ref:Se},Gt))}))});pk.muiSupportAuto=!0;const RC=pk,oH=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],sH=e=>{const{classes:t,disableUnderline:i}=e,d=Us({root:["root",!i&&"underline"],input:["input"]},X$,t);return ct({},t,d)},aH=Fi(eb,{shouldForwardProp:e=>vA(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[...Yx(e,t),!i.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),ct({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${bp.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${bp.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${bp.disabled}, .${bp.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${bp.disabled}:before`]:{borderBottomStyle:"dotted"}})}),lH=Fi(tb,{name:"MuiInput",slot:"Input",overridesResolver:Jx})({}),mk=Yr(function(t,i){var r,d,f,v;const h=zs({props:t,name:"MuiInput"}),{disableUnderline:s,components:U={},componentsProps:$,fullWidth:V=!1,inputComponent:q="input",multiline:te=!1,slotProps:he,slots:Ae={},type:De="text"}=h,ke=gr(h,oH),xe=sH(h),Ee={root:{ownerState:{disableUnderline:s}}},Fe=he??$?eh(he??$,Ee):Ee,Se=(r=(d=Ae.root)!=null?d:U.Root)!=null?r:aH,nt=(f=(v=Ae.input)!=null?v:U.Input)!=null?f:lH;return ze(DC,ct({slots:{root:Se,input:nt},slotProps:Fe,fullWidth:V,inputComponent:q,multiline:te,ref:i,type:De},ke,{classes:xe}))});mk.muiName="Input";const gk=mk;function cH(e){return Ls("MuiInputLabel",e)}bs("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const uH=["disableAnimation","margin","shrink","variant","className"],hH=e=>{const{classes:t,formControl:i,size:r,shrink:d,disableAnimation:f,variant:v,required:h}=e,s={root:["root",i&&"formControl",!f&&"animated",d&&"shrink",r&&r!=="normal"&&`size${qi(r)}`,v],asterisk:[h&&"asterisk"]},U=Us(s,cH,t);return ct({},t,U)},dH=Fi(nH,{shouldForwardProp:e=>vA(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[{[`& .${nv.asterisk}`]:t.asterisk},t.root,i.formControl&&t.formControl,i.size==="small"&&t.sizeSmall,i.shrink&&t.shrink,!i.disableAnimation&&t.animated,i.focused&&t.focused,t[i.variant]]}})(({theme:e,ownerState:t})=>ct({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&ct({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&ct({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&ct({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),_k=Yr(function(t,i){const r=zs({name:"MuiInputLabel",props:t}),{disableAnimation:d=!1,shrink:f,className:v}=r,h=gr(r,uH),s=f_();let U=f;typeof U>"u"&&s&&(U=s.filled||s.focused||s.adornedStart);const $=A_({props:r,muiFormControl:s,states:["size","variant","required","focused"]}),V=ct({},r,{disableAnimation:d,formControl:s,shrink:U,size:$.size,variant:$.variant,required:$.required,focused:$.focused}),q=hH(V);return ze(dH,ct({"data-shrink":U,ownerState:V,ref:i,className:$r(q.root,v)},h,{classes:q}))});function AH(e){return Ls("MuiLink",e)}const fH=bs("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),yk={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},pH=e=>yk[e]||e,mH=({theme:e,ownerState:t})=>{const i=pH(t.color),r=t_(e,`palette.${i}`,!1)||t.color,d=t_(e,`palette.${i}Channel`);return"vars"in e&&d?`rgba(${d} / 0.4)`:ho(r,.4)},gH=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],_H=e=>{const{classes:t,component:i,focusVisible:r,underline:d}=e,f={root:["root",`underline${qi(d)}`,i==="button"&&"button",r&&"focusVisible"]};return Us(f,AH,t)},yH=Fi(ml,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[`underline${qi(i.underline)}`],i.component==="button"&&t.button]}})(({theme:e,ownerState:t})=>ct({},t.underline==="none"&&{textDecoration:"none"},t.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},t.underline==="always"&&ct({textDecoration:"underline"},t.color!=="inherit"&&{textDecorationColor:mH({theme:e,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),t.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${fH.focusVisible}`]:{outline:"auto"}})),OC=Yr(function(t,i){const r=zs({props:t,name:"MuiLink"}),{className:d,color:f="primary",component:v="a",onBlur:h,onFocus:s,TypographyClasses:U,underline:$="always",variant:V="inherit",sx:q}=r,te=gr(r,gH),{isFocusVisibleRef:he,onBlur:Ae,onFocus:De,ref:ke}=K0(),[xe,Te]=ur(!1),Ee=Ul(i,ke),Fe=Bt=>{Ae(Bt),he.current===!1&&Te(!1),h&&h(Bt)},Se=Bt=>{De(Bt),he.current===!0&&Te(!0),s&&s(Bt)},nt=ct({},r,{color:f,component:v,focusVisible:xe,underline:$,variant:V}),xt=_H(nt);return ze(yH,ct({color:f,className:$r(xt.root,d),classes:U,component:v,onBlur:Fe,onFocus:Se,ref:Ee,ownerState:nt,variant:V,sx:[...Object.keys(yk).includes(f)?[]:[{color:f}],...Array.isArray(q)?q:[q]]},te))}),ib=Sh({});function vH(e){return Ls("MuiList",e)}bs("MuiList",["root","padding","dense","subheader"]);const xH=["children","className","component","dense","disablePadding","subheader"],bH=e=>{const{classes:t,disablePadding:i,dense:r,subheader:d}=e;return Us({root:["root",!i&&"padding",r&&"dense",d&&"subheader"]},vH,t)},wH=Fi("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,!i.disablePadding&&t.padding,i.dense&&t.dense,i.subheader&&t.subheader]}})(({ownerState:e})=>ct({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),CH=Yr(function(t,i){const r=zs({props:t,name:"MuiList"}),{children:d,className:f,component:v="ul",dense:h=!1,disablePadding:s=!1,subheader:U}=r,$=gr(r,xH),V=tl(()=>({dense:h}),[h]),q=ct({},r,{component:v,dense:h,disablePadding:s}),te=bH(q);return ze(ib.Provider,{value:V,children:ze(wH,ct({as:v,className:$r(te.root,f),ref:i,ownerState:q},$,{children:[U,d]}))})});function BH(e){return Ls("MuiListItemIcon",e)}const vk=bs("MuiListItemIcon",["root","alignItemsFlexStart"]),TH=["className"],EH=e=>{const{alignItems:t,classes:i}=e;return Us({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},BH,i)},SH=Fi("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({theme:e,ownerState:t})=>ct({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},t.alignItems==="flex-start"&&{marginTop:8})),p_=Yr(function(t,i){const r=zs({props:t,name:"MuiListItemIcon"}),{className:d}=r,f=gr(r,TH),v=nl(ib),h=ct({},r,{alignItems:v.alignItems}),s=EH(h);return ze(SH,ct({className:$r(s.root,d),ownerState:h,ref:i},f))}),xk=bs("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),IH=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function NC(e,t,i){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:i?null:e.firstChild}function bk(e,t,i){return e===t?i?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:i?null:e.lastChild}function wk(e,t){if(t===void 0)return!0;let i=e.innerText;return i===void 0&&(i=e.textContent),i=i.trim().toLowerCase(),i.length===0?!1:t.repeating?i[0]===t.keys[0]:i.indexOf(t.keys.join(""))===0}function iv(e,t,i,r,d,f){let v=!1,h=d(e,t,t?i:!1);for(;h;){if(h===e.firstChild){if(v)return!1;v=!0}const s=r?!1:h.disabled||h.getAttribute("aria-disabled")==="true";if(!h.hasAttribute("tabindex")||!wk(h,f)||s)h=d(e,h,i);else return h.focus(),!0}return!1}const MH=Yr(function(t,i){const{actions:r,autoFocus:d=!1,autoFocusItem:f=!1,children:v,className:h,disabledItemsFocusable:s=!1,disableListWrap:U=!1,onKeyDown:$,variant:V="selectedMenu"}=t,q=gr(t,IH),te=Pi(null),he=Pi({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});yA(()=>{d&&te.current.focus()},[d]),Ih(r,()=>({adjustStyleForScrollbar:(Te,Ee)=>{const Fe=!te.current.style.width;if(Te.clientHeight<te.current.clientHeight&&Fe){const Se=`${rM(th(Te))}px`;te.current.style[Ee.direction==="rtl"?"paddingLeft":"paddingRight"]=Se,te.current.style.width=`calc(100% + ${Se})`}return te.current}}),[]);const Ae=Te=>{const Ee=te.current,Fe=Te.key,Se=th(Ee).activeElement;if(Fe==="ArrowDown")Te.preventDefault(),iv(Ee,Se,U,s,NC);else if(Fe==="ArrowUp")Te.preventDefault(),iv(Ee,Se,U,s,bk);else if(Fe==="Home")Te.preventDefault(),iv(Ee,null,U,s,NC);else if(Fe==="End")Te.preventDefault(),iv(Ee,null,U,s,bk);else if(Fe.length===1){const nt=he.current,xt=Fe.toLowerCase(),Bt=performance.now();nt.keys.length>0&&(Bt-nt.lastTime>500?(nt.keys=[],nt.repeating=!0,nt.previousKeyMatched=!0):nt.repeating&&xt!==nt.keys[0]&&(nt.repeating=!1)),nt.lastTime=Bt,nt.keys.push(xt);const Xe=Se&&!nt.repeating&&wk(Se,nt);nt.previousKeyMatched&&(Xe||iv(Ee,Se,!1,s,NC,nt))?Te.preventDefault():nt.previousKeyMatched=!1}$&&$(Te)},De=Ul(te,i);let ke=-1;mA.forEach(v,(Te,Ee)=>{if(!Ha(Te)){ke===Ee&&(ke+=1,ke>=v.length&&(ke=-1));return}Te.props.disabled||(V==="selectedMenu"&&Te.props.selected||ke===-1)&&(ke=Ee),ke===Ee&&(Te.props.disabled||Te.props.muiSkipListHighlight||Te.type.muiSkipListHighlight)&&(ke+=1,ke>=v.length&&(ke=-1))});const xe=mA.map(v,(Te,Ee)=>{if(Ee===ke){const Fe={};return f&&(Fe.autoFocus=!0),Te.props.tabIndex===void 0&&V==="selectedMenu"&&(Fe.tabIndex=0),pl(Te,Fe)}return Te});return ze(CH,ct({role:"menu",ref:De,className:h,onKeyDown:Ae,tabIndex:d?0:-1},q,{children:xe}))});function LH(e){return Ls("MuiPopover",e)}bs("MuiPopover",["root","paper"]);const kH=["onEntering"],PH=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],FH=["slotProps"];function Ck(e,t){let i=0;return typeof t=="number"?i=t:t==="center"?i=e.height/2:t==="bottom"&&(i=e.height),i}function Bk(e,t){let i=0;return typeof t=="number"?i=t:t==="center"?i=e.width/2:t==="right"&&(i=e.width),i}function Tk(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function QC(e){return typeof e=="function"?e():e}const DH=e=>{const{classes:t}=e;return Us({root:["root"],paper:["paper"]},LH,t)},UH=Fi(zj,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Ek=Fi(Vy,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),zH=Yr(function(t,i){var r,d,f;const v=zs({props:t,name:"MuiPopover"}),{action:h,anchorEl:s,anchorOrigin:U={vertical:"top",horizontal:"left"},anchorPosition:$,anchorReference:V="anchorEl",children:q,className:te,container:he,elevation:Ae=8,marginThreshold:De=16,open:ke,PaperProps:xe={},slots:Te,slotProps:Ee,transformOrigin:Fe={vertical:"top",horizontal:"left"},TransitionComponent:Se=RC,transitionDuration:nt="auto",TransitionProps:{onEntering:xt}={},disableScrollLock:Bt=!1}=v,Xe=gr(v.TransitionProps,kH),qt=gr(v,PH),rn=(r=Ee==null?void 0:Ee.paper)!=null?r:xe,Ut=Pi(),Kt=Ul(Ut,rn.ref),On=ct({},v,{anchorOrigin:U,anchorReference:V,elevation:Ae,marginThreshold:De,externalPaperSlotProps:rn,transformOrigin:Fe,TransitionComponent:Se,transitionDuration:nt,TransitionProps:Xe}),Gt=DH(On),Rn=xs(()=>{if(V==="anchorPosition")return $;const Qi=QC(s),ji=(Qi&&Qi.nodeType===1?Qi:th(Ut.current).body).getBoundingClientRect();return{top:ji.top+Ck(ji,U.vertical),left:ji.left+Bk(ji,U.horizontal)}},[s,U.horizontal,U.vertical,$,V]),mn=xs(Qi=>({vertical:Ck(Qi,Fe.vertical),horizontal:Bk(Qi,Fe.horizontal)}),[Fe.horizontal,Fe.vertical]),Cn=xs(Qi=>{const Ki={width:Qi.offsetWidth,height:Qi.offsetHeight},ji=mn(Ki);if(V==="none")return{top:null,left:null,transformOrigin:Tk(ji)};const di=Rn();let Ir=di.top-ji.vertical,nr=di.left-ji.horizontal;const Ri=Ir+Ki.height,hr=nr+Ki.width,ir=yp(QC(s)),Ur=ir.innerHeight-De,jr=ir.innerWidth-De;if(De!==null&&Ir<De){const pr=Ir-De;Ir-=pr,ji.vertical+=pr}else if(De!==null&&Ri>Ur){const pr=Ri-Ur;Ir-=pr,ji.vertical+=pr}if(De!==null&&nr<De){const pr=nr-De;nr-=pr,ji.horizontal+=pr}else if(hr>jr){const pr=hr-jr;nr-=pr,ji.horizontal+=pr}return{top:`${Math.round(Ir)}px`,left:`${Math.round(nr)}px`,transformOrigin:Tk(ji)}},[s,V,Rn,mn,De]),[Qt,Xn]=ur(ke),Wn=xs(()=>{const Qi=Ut.current;if(!Qi)return;const Ki=Cn(Qi);Ki.top!==null&&(Qi.style.top=Ki.top),Ki.left!==null&&(Qi.style.left=Ki.left),Qi.style.transformOrigin=Ki.transformOrigin,Xn(!0)},[Cn]);$i(()=>(Bt&&window.addEventListener("scroll",Wn),()=>window.removeEventListener("scroll",Wn)),[s,Bt,Wn]);const Bi=(Qi,Ki)=>{xt&&xt(Qi,Ki),Wn()},Bn=()=>{Xn(!1)};$i(()=>{ke&&Wn()}),Ih(h,()=>ke?{updatePosition:()=>{Wn()}}:null,[ke,Wn]),$i(()=>{if(!ke)return;const Qi=R1(()=>{Wn()}),Ki=yp(s);return Ki.addEventListener("resize",Qi),()=>{Qi.clear(),Ki.removeEventListener("resize",Qi)}},[s,ke,Wn]);let Hn=nt;nt==="auto"&&!Se.muiSupportAuto&&(Hn=void 0);const ei=he||(s?th(QC(s)).body:void 0),tr=(d=Te==null?void 0:Te.root)!=null?d:UH,ri=(f=Te==null?void 0:Te.paper)!=null?f:Ek,zi=Om({elementType:ri,externalSlotProps:ct({},rn,{style:Qt?rn.style:ct({},rn.style,{opacity:0})}),additionalProps:{elevation:Ae,ref:Kt},ownerState:On,className:$r(Gt.paper,rn==null?void 0:rn.className)}),Vr=Om({elementType:tr,externalSlotProps:(Ee==null?void 0:Ee.root)||{},externalForwardedProps:qt,additionalProps:{ref:i,slotProps:{backdrop:{invisible:!0}},container:ei,open:ke},ownerState:On,className:$r(Gt.root,te)}),{slotProps:sr}=Vr,li=gr(Vr,FH);return ze(tr,ct({},li,!Hx(tr)&&{slotProps:sr,disableScrollLock:Bt},{children:ze(Se,ct({appear:!0,in:ke,onEntering:Bi,onExited:Bn,timeout:Hn},Xe,{children:ze(ri,ct({},zi,{children:q}))}))}))});function RH(e){return Ls("MuiMenu",e)}bs("MuiMenu",["root","paper","list"]);const OH=["onEntering"],NH=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],QH={vertical:"top",horizontal:"right"},$H={vertical:"top",horizontal:"left"},jH=e=>{const{classes:t}=e;return Us({root:["root"],paper:["paper"],list:["list"]},RH,t)},HH=Fi(zH,{shouldForwardProp:e=>vA(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),VH=Fi(Ek,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),GH=Fi(MH,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Sk=Yr(function(t,i){var r,d;const f=zs({props:t,name:"MuiMenu"}),{autoFocus:v=!0,children:h,className:s,disableAutoFocusItem:U=!1,MenuListProps:$={},onClose:V,open:q,PaperProps:te={},PopoverClasses:he,transitionDuration:Ae="auto",TransitionProps:{onEntering:De}={},variant:ke="selectedMenu",slots:xe={},slotProps:Te={}}=f,Ee=gr(f.TransitionProps,OH),Fe=gr(f,NH),Se=Qy(),nt=Se.direction==="rtl",xt=ct({},f,{autoFocus:v,disableAutoFocusItem:U,MenuListProps:$,onEntering:De,PaperProps:te,transitionDuration:Ae,TransitionProps:Ee,variant:ke}),Bt=jH(xt),Xe=v&&!U&&q,qt=Pi(null),rn=(Cn,Qt)=>{qt.current&&qt.current.adjustStyleForScrollbar(Cn,Se),De&&De(Cn,Qt)},Ut=Cn=>{Cn.key==="Tab"&&(Cn.preventDefault(),V&&V(Cn,"tabKeyDown"))};let Kt=-1;mA.map(h,(Cn,Qt)=>{Ha(Cn)&&(Cn.props.disabled||(ke==="selectedMenu"&&Cn.props.selected||Kt===-1)&&(Kt=Qt))});const On=(r=xe.paper)!=null?r:VH,Gt=(d=Te.paper)!=null?d:te,Rn=Om({elementType:xe.root,externalSlotProps:Te.root,ownerState:xt,className:[Bt.root,s]}),mn=Om({elementType:On,externalSlotProps:Gt,ownerState:xt,className:Bt.paper});return ze(HH,ct({onClose:V,anchorOrigin:{vertical:"bottom",horizontal:nt?"right":"left"},transformOrigin:nt?QH:$H,slots:{paper:On,root:xe.root},slotProps:{root:Rn,paper:mn},open:q,ref:i,transitionDuration:Ae,TransitionProps:ct({onEntering:rn},Ee),ownerState:xt},Fe,{classes:he,children:ze(GH,ct({onKeyDown:Ut,actions:qt,autoFocus:v&&(Kt===-1||U),autoFocusItem:Xe,variant:ke},$,{className:$r(Bt.list,$.className),children:h}))}))});function WH(e){return Ls("MuiMenuItem",e)}const rv=bs("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),KH=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],ZH=(e,t)=>{const{ownerState:i}=e;return[t.root,i.dense&&t.dense,i.divider&&t.divider,!i.disableGutters&&t.gutters]},qH=e=>{const{disabled:t,dense:i,divider:r,disableGutters:d,selected:f,classes:v}=e,s=Us({root:["root",i&&"dense",t&&"disabled",!d&&"gutters",r&&"divider",f&&"selected"]},WH,v);return ct({},v,s)},XH=Fi($x,{shouldForwardProp:e=>vA(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:ZH})(({theme:e,ownerState:t})=>ct({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${rv.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ho(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${rv.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ho(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${rv.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ho(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ho(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${rv.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${rv.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${ck.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${ck.inset}`]:{marginLeft:52},[`& .${xk.root}`]:{marginTop:0,marginBottom:0},[`& .${xk.inset}`]:{paddingLeft:36},[`& .${vk.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&ct({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${vk.root} svg`]:{fontSize:"1.25rem"}}))),Qf=Yr(function(t,i){const r=zs({props:t,name:"MuiMenuItem"}),{autoFocus:d=!1,component:f="li",dense:v=!1,divider:h=!1,disableGutters:s=!1,focusVisibleClassName:U,role:$="menuitem",tabIndex:V,className:q}=r,te=gr(r,KH),he=nl(ib),Ae=tl(()=>({dense:v||he.dense||!1,disableGutters:s}),[he.dense,v,s]),De=Pi(null);yA(()=>{d&&De.current&&De.current.focus()},[d]);const ke=ct({},r,{dense:Ae.dense,divider:h,disableGutters:s}),xe=qH(r),Te=Ul(De,i);let Ee;return r.disabled||(Ee=V!==void 0?V:-1),ze(ib.Provider,{value:Ae,children:ze(XH,ct({ref:Te,role:$,tabIndex:Ee,component:f,focusVisibleClassName:$r(xe.focusVisible,U),className:$r(xe.root,q)},te,{ownerState:ke,classes:xe}))})});function YH(e){return Ls("MuiNativeSelect",e)}const $C=bs("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),JH=["className","disabled","error","IconComponent","inputRef","variant"],e6=e=>{const{classes:t,variant:i,disabled:r,multiple:d,open:f,error:v}=e,h={select:["select",i,r&&"disabled",d&&"multiple",v&&"error"],icon:["icon",`icon${qi(i)}`,f&&"iconOpen",r&&"disabled"]};return Us(h,YH,t)},Ik=({ownerState:e,theme:t})=>ct({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":ct({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${$C.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),t6=Fi("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:vA,overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.select,t[i.variant],i.error&&t.error,{[`&.${$C.multiple}`]:t.multiple}]}})(Ik),Mk=({ownerState:e,theme:t})=>ct({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${$C.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),n6=Fi("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.icon,i.variant&&t[`icon${qi(i.variant)}`],i.open&&t.iconOpen]}})(Mk),i6=Yr(function(t,i){const{className:r,disabled:d,error:f,IconComponent:v,inputRef:h,variant:s="standard"}=t,U=gr(t,JH),$=ct({},t,{disabled:d,variant:s,error:f}),V=e6($);return ze(vs,{children:[ze(t6,ct({ownerState:$,className:$r(V.select,r),disabled:d,ref:h||i},U)),t.multiple?null:ze(n6,{as:v,ownerState:$,className:V.icon})]})});var Lk;const r6=["children","classes","className","label","notched"],o6=Fi("fieldset",{shouldForwardProp:vA})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),s6=Fi("legend",{shouldForwardProp:vA})(({ownerState:e,theme:t})=>ct({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&ct({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function a6(e){const{className:t,label:i,notched:r}=e,d=gr(e,r6),f=i!=null&&i!=="",v=ct({},e,{notched:r,withLabel:f});return ze(o6,ct({"aria-hidden":!0,className:t,ownerState:v},d,{children:ze(s6,{ownerState:v,children:f?ze("span",{children:i}):Lk||(Lk=ze("span",{className:"notranslate",children:"​"}))})}))}const l6=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],c6=e=>{const{classes:t}=e,r=Us({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Y$,t);return ct({},t,r)},u6=Fi(eb,{shouldForwardProp:e=>vA(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Yx})(({theme:e,ownerState:t})=>{const i=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return ct({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${of.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${of.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:i}},[`&.${of.focused} .${of.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${of.error} .${of.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${of.disabled} .${of.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&ct({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),h6=Fi(a6,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),d6=Fi(tb,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Jx})(({theme:e,ownerState:t})=>ct({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),kk=Yr(function(t,i){var r,d,f,v,h;const s=zs({props:t,name:"MuiOutlinedInput"}),{components:U={},fullWidth:$=!1,inputComponent:V="input",label:q,multiline:te=!1,notched:he,slots:Ae={},type:De="text"}=s,ke=gr(s,l6),xe=c6(s),Te=f_(),Ee=A_({props:s,muiFormControl:Te,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),Fe=ct({},s,{color:Ee.color||"primary",disabled:Ee.disabled,error:Ee.error,focused:Ee.focused,formControl:Te,fullWidth:$,hiddenLabel:Ee.hiddenLabel,multiline:te,size:Ee.size,type:De}),Se=(r=(d=Ae.root)!=null?d:U.Root)!=null?r:u6,nt=(f=(v=Ae.input)!=null?v:U.Input)!=null?f:d6;return ze(DC,ct({slots:{root:Se,input:nt},renderSuffix:xt=>ze(h6,{ownerState:Fe,className:xe.notchedOutline,label:q!=null&&q!==""&&Ee.required?h||(h=ze(vs,{children:[q," ","*"]})):q,notched:typeof he<"u"?he:!!(xt.startAdornment||xt.filled||xt.focused)}),fullWidth:$,inputComponent:V,multiline:te,ref:i,type:De},ke,{classes:ct({},xe,{notchedOutline:null})}))});kk.muiName="Input";const Pk=kk;function A6(e){return Ls("MuiSelect",e)}const ov=bs("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Fk;const f6=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],p6=Fi("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[{[`&.${ov.select}`]:t.select},{[`&.${ov.select}`]:t[i.variant]},{[`&.${ov.error}`]:t.error},{[`&.${ov.multiple}`]:t.multiple}]}})(Ik,{[`&.${ov.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),m6=Fi("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.icon,i.variant&&t[`icon${qi(i.variant)}`],i.open&&t.iconOpen]}})(Mk),g6=Fi("input",{shouldForwardProp:e=>w5(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Dk(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function _6(e){return e==null||typeof e=="string"&&!e.trim()}const y6=e=>{const{classes:t,variant:i,disabled:r,multiple:d,open:f,error:v}=e,h={select:["select",i,r&&"disabled",d&&"multiple",v&&"error"],icon:["icon",`icon${qi(i)}`,f&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Us(h,A6,t)},v6=Yr(function(t,i){var r;const{"aria-describedby":d,"aria-label":f,autoFocus:v,autoWidth:h,children:s,className:U,defaultOpen:$,defaultValue:V,disabled:q,displayEmpty:te,error:he=!1,IconComponent:Ae,inputRef:De,labelId:ke,MenuProps:xe={},multiple:Te,name:Ee,onBlur:Fe,onChange:Se,onClose:nt,onFocus:xt,onOpen:Bt,open:Xe,readOnly:qt,renderValue:rn,SelectDisplayProps:Ut={},tabIndex:Kt,value:On,variant:Gt="standard"}=t,Rn=gr(t,f6),[mn,Cn]=Mm({controlled:On,default:V,name:"Select"}),[Qt,Xn]=Mm({controlled:Xe,default:$,name:"Select"}),Wn=Pi(null),Bi=Pi(null),[Bn,Hn]=ur(null),{current:ei}=Pi(Xe!=null),[tr,ri]=ur(),zi=Ul(i,De),Vr=xs(xi=>{Bi.current=xi,xi&&Hn(xi)},[]),sr=Bn==null?void 0:Bn.parentNode;Ih(zi,()=>({focus:()=>{Bi.current.focus()},node:Wn.current,value:mn}),[mn]),$i(()=>{$&&Qt&&Bn&&!ei&&(ri(h?null:sr.clientWidth),Bi.current.focus())},[Bn,h]),$i(()=>{v&&Bi.current.focus()},[v]),$i(()=>{if(!ke)return;const xi=th(Bi.current).getElementById(ke);if(xi){const Xi=()=>{getSelection().isCollapsed&&Bi.current.focus()};return xi.addEventListener("click",Xi),()=>{xi.removeEventListener("click",Xi)}}},[ke]);const li=(xi,Xi)=>{xi?Bt&&Bt(Xi):nt&&nt(Xi),ei||(ri(h?null:sr.clientWidth),Xn(xi))},Qi=xi=>{xi.button===0&&(xi.preventDefault(),Bi.current.focus(),li(!0,xi))},Ki=xi=>{li(!1,xi)},ji=mA.toArray(s),di=xi=>{const Xi=ji.find(Un=>Un.props.value===xi.target.value);Xi!==void 0&&(Cn(Xi.props.value),Se&&Se(xi,Xi))},Ir=xi=>Xi=>{let Un;if(Xi.currentTarget.hasAttribute("tabindex")){if(Te){Un=Array.isArray(mn)?mn.slice():[];const Oi=mn.indexOf(xi.props.value);Oi===-1?Un.push(xi.props.value):Un.splice(Oi,1)}else Un=xi.props.value;if(xi.props.onClick&&xi.props.onClick(Xi),mn!==Un&&(Cn(Un),Se)){const Oi=Xi.nativeEvent||Xi,bn=new Oi.constructor(Oi.type,Oi);Object.defineProperty(bn,"target",{writable:!0,value:{value:Un,name:Ee}}),Se(bn,xi)}Te||li(!1,Xi)}},nr=xi=>{qt||[" ","ArrowUp","ArrowDown","Enter"].indexOf(xi.key)!==-1&&(xi.preventDefault(),li(!0,xi))},Ri=Bn!==null&&Qt,hr=xi=>{!Ri&&Fe&&(Object.defineProperty(xi,"target",{writable:!0,value:{value:mn,name:Ee}}),Fe(xi))};delete Rn["aria-invalid"];let ir,Ur;const jr=[];let pr=!1;(Xx({value:mn})||te)&&(rn?ir=rn(mn):pr=!0);const Zr=ji.map(xi=>{if(!Ha(xi))return null;let Xi;if(Te){if(!Array.isArray(mn))throw new Error(_p(2));Xi=mn.some(Un=>Dk(Un,xi.props.value)),Xi&&pr&&jr.push(xi.props.children)}else Xi=Dk(mn,xi.props.value),Xi&&pr&&(Ur=xi.props.children);return pl(xi,{"aria-selected":Xi?"true":"false",onClick:Ir(xi),onKeyUp:Un=>{Un.key===" "&&Un.preventDefault(),xi.props.onKeyUp&&xi.props.onKeyUp(Un)},role:"option",selected:Xi,value:void 0,"data-value":xi.props.value})});pr&&(Te?jr.length===0?ir=null:ir=jr.reduce((xi,Xi,Un)=>(xi.push(Xi),Un<jr.length-1&&xi.push(", "),xi),[]):ir=Ur);let Eo=tr;!h&&ei&&Bn&&(Eo=sr.clientWidth);let Ao;typeof Kt<"u"?Ao=Kt:Ao=q?null:0;const $t=Ut.id||(Ee?`mui-component-select-${Ee}`:void 0),en=ct({},t,{variant:Gt,value:mn,open:Ri,error:he}),Fr=y6(en),So=ct({},xe.PaperProps,(r=xe.slotProps)==null?void 0:r.paper),er=My();return ze(vs,{children:[ze(p6,ct({ref:Vr,tabIndex:Ao,role:"combobox","aria-controls":er,"aria-disabled":q?"true":void 0,"aria-expanded":Ri?"true":"false","aria-haspopup":"listbox","aria-label":f,"aria-labelledby":[ke,$t].filter(Boolean).join(" ")||void 0,"aria-describedby":d,onKeyDown:nr,onMouseDown:q||qt?null:Qi,onBlur:hr,onFocus:xt},Ut,{ownerState:en,className:$r(Ut.className,Fr.select,U),id:$t,children:_6(ir)?Fk||(Fk=ze("span",{className:"notranslate",children:"​"})):ir})),ze(g6,ct({"aria-invalid":he,value:Array.isArray(mn)?mn.join(","):mn,name:Ee,ref:Wn,"aria-hidden":!0,onChange:di,tabIndex:-1,disabled:q,className:Fr.nativeInput,autoFocus:v,ownerState:en},Rn)),ze(m6,{as:Ae,className:Fr.icon,ownerState:en}),ze(Sk,ct({id:`menu-${Ee||""}`,anchorEl:sr,open:Ri,onClose:Ki,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},xe,{MenuListProps:ct({"aria-labelledby":ke,role:"listbox","aria-multiselectable":Te?"true":void 0,disableListWrap:!0,id:er},xe.MenuListProps),slotProps:ct({},xe.slotProps,{paper:ct({},So,{style:ct({minWidth:Eo},So!=null?So.style:null)})}),children:Zr}))]})}),x6=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],b6=["root"],w6=e=>{const{classes:t}=e;return t},jC={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>vA(e)&&e!=="variant",slot:"Root"},C6=Fi(gk,jC)(""),B6=Fi(Pk,jC)(""),T6=Fi(hk,jC)(""),Uk=Yr(function(t,i){const r=zs({name:"MuiSelect",props:t}),{autoWidth:d=!1,children:f,classes:v={},className:h,defaultOpen:s=!1,displayEmpty:U=!1,IconComponent:$=tk,id:V,input:q,inputProps:te,label:he,labelId:Ae,MenuProps:De,multiple:ke=!1,native:xe=!1,onClose:Te,onOpen:Ee,open:Fe,renderValue:Se,SelectDisplayProps:nt,variant:xt="outlined"}=r,Bt=gr(r,x6),Xe=xe?i6:v6,qt=f_(),rn=A_({props:r,muiFormControl:qt,states:["variant","error"]}),Ut=rn.variant||xt,Kt=ct({},r,{variant:Ut,classes:v}),On=w6(Kt),Gt=gr(On,b6),Rn=q||{standard:ze(C6,{ownerState:Kt}),outlined:ze(B6,{label:he,ownerState:Kt}),filled:ze(T6,{ownerState:Kt})}[Ut],mn=Ul(i,Rn.ref);return ze(vs,{children:pl(Rn,ct({inputComponent:Xe,inputProps:ct({children:f,error:rn.error,IconComponent:$,variant:Ut,type:void 0,multiple:ke},xe?{id:V}:{autoWidth:d,defaultOpen:s,displayEmpty:U,labelId:Ae,MenuProps:De,onClose:Te,onOpen:Ee,open:Fe,renderValue:Se,SelectDisplayProps:ct({id:V},nt)},te,{classes:te?eh(Gt,te.classes):Gt},q?q.props.inputProps:{})},ke&&xe&&Ut==="outlined"?{notched:!0}:{},{ref:mn,className:$r(Rn.props.className,h,On.root)},!q&&{variant:Ut},Bt))})});Uk.muiName="Select";const HC=Uk;function E6(e){return Ls("MuiTooltip",e)}const Cp=bs("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),S6=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function I6(e){return Math.round(e*1e5)/1e5}const M6=e=>{const{classes:t,disableInteractive:i,arrow:r,touch:d,placement:f}=e,v={popper:["popper",!i&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",d&&"touch",`tooltipPlacement${qi(f.split("-")[0])}`],arrow:["arrow"]};return Us(v,E6,t)},L6=Fi(qx,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.popper,!i.disableInteractive&&t.popperInteractive,i.arrow&&t.popperArrow,!i.open&&t.popperClose]}})(({theme:e,ownerState:t,open:i})=>ct({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!t.disableInteractive&&{pointerEvents:"auto"},!i&&{pointerEvents:"none"},t.arrow&&{[`&[data-popper-placement*="bottom"] .${Cp.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Cp.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Cp.arrow}`]:ct({},t.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Cp.arrow}`]:ct({},t.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),k6=Fi("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.tooltip,i.touch&&t.touch,i.arrow&&t.tooltipArrow,t[`tooltipPlacement${qi(i.placement.split("-")[0])}`]]}})(({theme:e,ownerState:t})=>ct({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:ho(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},t.arrow&&{position:"relative",margin:0},t.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${I6(16/14)}em`,fontWeight:e.typography.fontWeightRegular},{[`.${Cp.popper}[data-popper-placement*="left"] &`]:ct({transformOrigin:"right center"},t.isRtl?ct({marginLeft:"14px"},t.touch&&{marginLeft:"24px"}):ct({marginRight:"14px"},t.touch&&{marginRight:"24px"})),[`.${Cp.popper}[data-popper-placement*="right"] &`]:ct({transformOrigin:"left center"},t.isRtl?ct({marginRight:"14px"},t.touch&&{marginRight:"24px"}):ct({marginLeft:"14px"},t.touch&&{marginLeft:"24px"})),[`.${Cp.popper}[data-popper-placement*="top"] &`]:ct({transformOrigin:"center bottom",marginBottom:"14px"},t.touch&&{marginBottom:"24px"}),[`.${Cp.popper}[data-popper-placement*="bottom"] &`]:ct({transformOrigin:"center top",marginTop:"14px"},t.touch&&{marginTop:"24px"})})),P6=Fi("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:ho(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let rb=!1,VC=null,sv={x:0,y:0};function ob(e,t){return i=>{t&&t(i),e(i)}}const zk=Yr(function(t,i){var r,d,f,v,h,s,U,$,V,q,te,he,Ae,De,ke,xe,Te,Ee,Fe;const Se=zs({props:t,name:"MuiTooltip"}),{arrow:nt=!1,children:xt,components:Bt={},componentsProps:Xe={},describeChild:qt=!1,disableFocusListener:rn=!1,disableHoverListener:Ut=!1,disableInteractive:Kt=!1,disableTouchListener:On=!1,enterDelay:Gt=100,enterNextDelay:Rn=0,enterTouchDelay:mn=700,followCursor:Cn=!1,id:Qt,leaveDelay:Xn=0,leaveTouchDelay:Wn=1500,onClose:Bi,onOpen:Bn,open:Hn,placement:ei="bottom",PopperComponent:tr,PopperProps:ri={},slotProps:zi={},slots:Vr={},title:sr,TransitionComponent:li=RC,TransitionProps:Qi}=Se,Ki=gr(Se,S6),ji=Ha(xt)?xt:ze("span",{children:xt}),di=Qy(),Ir=di.direction==="rtl",[nr,Ri]=ur(),[hr,ir]=ur(null),Ur=Pi(!1),jr=Kt||Cn,pr=Pi(),Zr=Pi(),Eo=Pi(),Ao=Pi(),[$t,en]=Mm({controlled:Hn,default:!1,name:"Tooltip",state:"open"});let Fr=$t;const So=My(Qt),er=Pi(),xi=xs(()=>{er.current!==void 0&&(document.body.style.WebkitUserSelect=er.current,er.current=void 0),clearTimeout(Ao.current)},[]);$i(()=>()=>{clearTimeout(pr.current),clearTimeout(Zr.current),clearTimeout(Eo.current),xi()},[xi]);const Xi=gn=>{clearTimeout(VC),rb=!0,en(!0),Bn&&!Fr&&Bn(gn)},Un=zd(gn=>{clearTimeout(VC),VC=setTimeout(()=>{rb=!1},800+Xn),en(!1),Bi&&Fr&&Bi(gn),clearTimeout(pr.current),pr.current=setTimeout(()=>{Ur.current=!1},di.transitions.duration.shortest)}),Oi=gn=>{Ur.current&&gn.type!=="touchstart"||(nr&&nr.removeAttribute("title"),clearTimeout(Zr.current),clearTimeout(Eo.current),Gt||rb&&Rn?Zr.current=setTimeout(()=>{Xi(gn)},rb?Rn:Gt):Xi(gn))},bn=gn=>{clearTimeout(Zr.current),clearTimeout(Eo.current),Eo.current=setTimeout(()=>{Un(gn)},Xn)},{isFocusVisibleRef:bi,onBlur:fi,onFocus:ot,ref:Ie}=K0(),[,Ce]=ur(!1),st=gn=>{fi(gn),bi.current===!1&&(Ce(!1),bn(gn))},ft=gn=>{nr||Ri(gn.currentTarget),ot(gn),bi.current===!0&&(Ce(!0),Oi(gn))},kt=gn=>{Ur.current=!0;const mi=ji.props;mi.onTouchStart&&mi.onTouchStart(gn)},zt=Oi,Rt=bn,yt=gn=>{kt(gn),clearTimeout(Eo.current),clearTimeout(pr.current),xi(),er.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ao.current=setTimeout(()=>{document.body.style.WebkitUserSelect=er.current,Oi(gn)},mn)},Xt=gn=>{ji.props.onTouchEnd&&ji.props.onTouchEnd(gn),xi(),clearTimeout(Eo.current),Eo.current=setTimeout(()=>{Un(gn)},Wn)};$i(()=>{if(!Fr)return;function gn(mi){(mi.key==="Escape"||mi.key==="Esc")&&Un(mi)}return document.addEventListener("keydown",gn),()=>{document.removeEventListener("keydown",gn)}},[Un,Fr]);const Tn=Ul(ji.ref,Ie,Ri,i);!sr&&sr!==0&&(Fr=!1);const Fn=Pi(),zn=gn=>{const mi=ji.props;mi.onMouseMove&&mi.onMouseMove(gn),sv={x:gn.clientX,y:gn.clientY},Fn.current&&Fn.current.update()},rr={},Zi=typeof sr=="string";qt?(rr.title=!Fr&&Zi&&!Ut?sr:null,rr["aria-describedby"]=Fr?So:null):(rr["aria-label"]=Zi?sr:null,rr["aria-labelledby"]=Fr&&!Zi?So:null);const Pe=ct({},rr,Ki,ji.props,{className:$r(Ki.className,ji.props.className),onTouchStart:kt,ref:Tn},Cn?{onMouseMove:zn}:{}),pe={};On||(Pe.onTouchStart=yt,Pe.onTouchEnd=Xt),Ut||(Pe.onMouseOver=ob(zt,Pe.onMouseOver),Pe.onMouseLeave=ob(Rt,Pe.onMouseLeave),jr||(pe.onMouseOver=zt,pe.onMouseLeave=Rt)),rn||(Pe.onFocus=ob(ft,Pe.onFocus),Pe.onBlur=ob(st,Pe.onBlur),jr||(pe.onFocus=ft,pe.onBlur=st));const we=tl(()=>{var gn;let mi=[{name:"arrow",enabled:!!hr,options:{element:hr,padding:4}}];return(gn=ri.popperOptions)!=null&&gn.modifiers&&(mi=mi.concat(ri.popperOptions.modifiers)),ct({},ri.popperOptions,{modifiers:mi})},[hr,ri]),je=ct({},Se,{isRtl:Ir,arrow:nt,disableInteractive:jr,placement:ei,PopperComponentProp:tr,touch:Ur.current}),Ke=M6(je),_t=(r=(d=Vr.popper)!=null?d:Bt.Popper)!=null?r:L6,qe=(f=(v=(h=Vr.transition)!=null?h:Bt.Transition)!=null?v:li)!=null?f:RC,Oe=(s=(U=Vr.tooltip)!=null?U:Bt.Tooltip)!=null?s:k6,Je=($=(V=Vr.arrow)!=null?V:Bt.Arrow)!=null?$:P6,mt=Gy(_t,ct({},ri,(q=zi.popper)!=null?q:Xe.popper,{className:$r(Ke.popper,ri==null?void 0:ri.className,(te=(he=zi.popper)!=null?he:Xe.popper)==null?void 0:te.className)}),je),Jt=Gy(qe,ct({},Qi,(Ae=zi.transition)!=null?Ae:Xe.transition),je),Sn=Gy(Oe,ct({},(De=zi.tooltip)!=null?De:Xe.tooltip,{className:$r(Ke.tooltip,(ke=(xe=zi.tooltip)!=null?xe:Xe.tooltip)==null?void 0:ke.className)}),je),an=Gy(Je,ct({},(Te=zi.arrow)!=null?Te:Xe.arrow,{className:$r(Ke.arrow,(Ee=(Fe=zi.arrow)!=null?Fe:Xe.arrow)==null?void 0:Ee.className)}),je);return ze(vs,{children:[pl(ji,Pe),ze(_t,ct({as:tr??qx,placement:ei,anchorEl:Cn?{getBoundingClientRect:()=>({top:sv.y,left:sv.x,right:sv.x,bottom:sv.y,width:0,height:0})}:nr,popperRef:Fn,open:nr?Fr:!1,id:So,transition:!0},pe,mt,{popperOptions:we,children:({TransitionProps:gn})=>ze(qe,ct({timeout:di.transitions.duration.shorter},gn,Jt,{children:ze(Oe,ct({},Sn,{children:[sr,nt?ze(Je,ct({},an,{ref:ir})):null]}))}))}))]})});function F6(e){return Ls("MuiTextField",e)}bs("MuiTextField",["root"]);const D6=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],U6={standard:gk,filled:hk,outlined:Pk},z6=e=>{const{classes:t}=e;return Us({root:["root"]},F6,t)},R6=Fi(dk,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Rk=Yr(function(t,i){const r=zs({props:t,name:"MuiTextField"}),{autoComplete:d,autoFocus:f=!1,children:v,className:h,color:s="primary",defaultValue:U,disabled:$=!1,error:V=!1,FormHelperTextProps:q,fullWidth:te=!1,helperText:he,id:Ae,InputLabelProps:De,inputProps:ke,InputProps:xe,inputRef:Te,label:Ee,maxRows:Fe,minRows:Se,multiline:nt=!1,name:xt,onBlur:Bt,onChange:Xe,onFocus:qt,placeholder:rn,required:Ut=!1,rows:Kt,select:On=!1,SelectProps:Gt,type:Rn,value:mn,variant:Cn="outlined"}=r,Qt=gr(r,D6),Xn=ct({},r,{autoFocus:f,color:s,disabled:$,error:V,fullWidth:te,multiline:nt,required:Ut,select:On,variant:Cn}),Wn=z6(Xn),Bi={};Cn==="outlined"&&(De&&typeof De.shrink<"u"&&(Bi.notched=De.shrink),Bi.label=Ee),On&&((!Gt||!Gt.native)&&(Bi.id=void 0),Bi["aria-describedby"]=void 0);const Bn=My(Ae),Hn=he&&Bn?`${Bn}-helper-text`:void 0,ei=Ee&&Bn?`${Bn}-label`:void 0,tr=U6[Cn],ri=ze(tr,ct({"aria-describedby":Hn,autoComplete:d,autoFocus:f,defaultValue:U,fullWidth:te,multiline:nt,name:xt,rows:Kt,maxRows:Fe,minRows:Se,type:Rn,value:mn,id:Bn,inputRef:Te,onBlur:Bt,onChange:Xe,onFocus:qt,placeholder:rn,inputProps:ke},Bi,xe));return ze(R6,ct({className:$r(Wn.root,h),disabled:$,error:V,fullWidth:te,ref:i,required:Ut,color:s,variant:Cn,ownerState:Xn},Qt,{children:[Ee!=null&&Ee!==""&&ze(_k,ct({htmlFor:Bn,id:ei},De,{children:Ee})),On?ze(HC,ct({"aria-describedby":Hn,id:Bn,labelId:ei,value:mn,input:ri},Gt,{children:v})):ri,he&&ze(qj,ct({id:Hn},q,{children:he}))]}))}),O6=Fi(xA)(({theme:e})=>({position:"relative",marginTop:e.spacing(1),borderRadius:e.shape.borderRadius,padding:e.spacing(2),fontFamily:e.typography.fontFamily,[e.breakpoints.down("md")]:{padding:0},boxSizing:"border-box","& *":{boxSizing:"border-box"},"& .filterContainer":{marginBottom:e.spacing(1),"& div:not(:nth-of-type(2)):not(.MuiChip-root):not(.MuiInputBase-root)":{marginRight:e.spacing(1)}}})),N6=({children:e,id:t,className:i,gridRef:r})=>ze(O6,{container:!0,className:`${i??""} `,spacing:3,alignItems:"center",id:t,ref:r,children:e});var GC={},Ok={exports:{}};(function(e){function t(i){return i&&i.__esModule?i:{default:i}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Ok);var WC=Ok.exports,KC={};const Q6=s1(W5);var Nk;function ZC(){return Nk||(Nk=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=Q6}(KC)),KC}const qC=s1(M3);var $6=WC;Object.defineProperty(GC,"__esModule",{value:!0});var Qk=GC.default=void 0,j6=$6(ZC()),H6=qC,V6=(0,j6.default)((0,H6.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}),"Code");Qk=GC.default=V6;var XC={},G6=WC;Object.defineProperty(XC,"__esModule",{value:!0});var m_=XC.default=void 0,W6=G6(ZC()),K6=qC,Z6=(0,W6.default)((0,K6.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");m_=XC.default=Z6;/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var YC=function(e,t){return YC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(i[d]=r[d])},YC(e,t)};function wA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");YC(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var JC=function(){return JC=Object.assign||function(t){for(var i,r=1,d=arguments.length;r<d;r++){i=arguments[r];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(t[f]=i[f])}return t},JC.apply(this,arguments)};function Mh(e,t,i,r){function d(f){return f instanceof i?f:new i(function(v){v(f)})}return new(i||(i=Promise))(function(f,v){function h($){try{U(r.next($))}catch(V){v(V)}}function s($){try{U(r.throw($))}catch(V){v(V)}}function U($){$.done?f($.value):d($.value).then(h,s)}U((r=r.apply(e,t||[])).next())})}function ih(e,t){var i={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},r,d,f,v;return v={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function h(U){return function($){return s([U,$])}}function s(U){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,d&&(f=U[0]&2?d.return:U[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,U[1])).done)return f;switch(d=0,f&&(U=[U[0]&2,f.value]),U[0]){case 0:case 1:f=U;break;case 4:return i.label++,{value:U[1],done:!1};case 5:i.label++,d=U[1],U=[0];continue;case 7:U=i.ops.pop(),i.trys.pop();continue;default:if(f=i.trys,!(f=f.length>0&&f[f.length-1])&&(U[0]===6||U[0]===2)){i=0;continue}if(U[0]===3&&(!f||U[1]>f[0]&&U[1]<f[3])){i.label=U[1];break}if(U[0]===6&&i.label<f[1]){i.label=f[1],f=U;break}if(f&&i.label<f[2]){i.label=f[2],i.ops.push(U);break}f[2]&&i.ops.pop(),i.trys.pop();continue}U=t.call(e,i)}catch($){U=[6,$],d=0}finally{r=f=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}}function sb(e,t,i){if(i||arguments.length===2)for(var r=0,d=t.length,f;r<d;r++)(f||!(r in t))&&(f||(f=Array.prototype.slice.call(t,0,r)),f[r]=t[r]);return e.concat(f||t)}for(var $f=function(){function e(t,i,r,d){this.left=t,this.top=i,this.width=r,this.height=d}return e.prototype.add=function(t,i,r,d){return new e(this.left+t,this.top+i,this.width+r,this.height+d)},e.fromClientRect=function(t,i){return new e(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height)},e.fromDOMRectList=function(t,i){var r=Array.from(i).find(function(d){return d.width!==0});return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),ab=function(e,t){return $f.fromClientRect(e,t.getBoundingClientRect())},q6=function(e){var t=e.body,i=e.documentElement;if(!t||!i)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,i.scrollWidth),Math.max(t.offsetWidth,i.offsetWidth),Math.max(t.clientWidth,i.clientWidth)),d=Math.max(Math.max(t.scrollHeight,i.scrollHeight),Math.max(t.offsetHeight,i.offsetHeight),Math.max(t.clientHeight,i.clientHeight));return new $f(0,0,r,d)},lb=function(e){for(var t=[],i=0,r=e.length;i<r;){var d=e.charCodeAt(i++);if(d>=55296&&d<=56319&&i<r){var f=e.charCodeAt(i++);(f&64512)===56320?t.push(((d&1023)<<10)+(f&1023)+65536):(t.push(d),i--)}else t.push(d)}return t},ic=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var r=[],d=-1,f="";++d<i;){var v=e[d];v<=65535?r.push(v):(v-=65536,r.push((v>>10)+55296,v%1024+56320)),(d+1===i||r.length>16384)&&(f+=String.fromCharCode.apply(String,r),r.length=0)}return f},$k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X6=typeof Uint8Array>"u"?[]:new Uint8Array(256),cb=0;cb<$k.length;cb++)X6[$k.charCodeAt(cb)]=cb;for(var jk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",av=typeof Uint8Array>"u"?[]:new Uint8Array(256),ub=0;ub<jk.length;ub++)av[jk.charCodeAt(ub)]=ub;for(var Y6=function(e){var t=e.length*.75,i=e.length,r,d=0,f,v,h,s;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var U=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),$=Array.isArray(U)?U:new Uint8Array(U);for(r=0;r<i;r+=4)f=av[e.charCodeAt(r)],v=av[e.charCodeAt(r+1)],h=av[e.charCodeAt(r+2)],s=av[e.charCodeAt(r+3)],$[d++]=f<<2|v>>4,$[d++]=(v&15)<<4|h>>2,$[d++]=(h&3)<<6|s&63;return U},J6=function(e){for(var t=e.length,i=[],r=0;r<t;r+=2)i.push(e[r+1]<<8|e[r]);return i},eV=function(e){for(var t=e.length,i=[],r=0;r<t;r+=4)i.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return i},$m=5,eB=11,tB=2,tV=eB-$m,Hk=65536>>$m,nV=1<<$m,nB=nV-1,iV=1024>>$m,rV=Hk+iV,oV=rV,sV=32,aV=oV+sV,lV=65536>>eB,cV=1<<tV,uV=cV-1,Vk=function(e,t,i){return e.slice?e.slice(t,i):new Uint16Array(Array.prototype.slice.call(e,t,i))},hV=function(e,t,i){return e.slice?e.slice(t,i):new Uint32Array(Array.prototype.slice.call(e,t,i))},dV=function(e,t){var i=Y6(e),r=Array.isArray(i)?eV(i):new Uint32Array(i),d=Array.isArray(i)?J6(i):new Uint16Array(i),f=24,v=Vk(d,f/2,r[4]/2),h=r[5]===2?Vk(d,(f+r[4])/2):hV(r,Math.ceil((f+r[4])/4));return new AV(r[0],r[1],r[2],r[3],v,h)},AV=function(){function e(t,i,r,d,f,v){this.initialValue=t,this.errorValue=i,this.highStart=r,this.highValueIndex=d,this.index=f,this.data=v}return e.prototype.get=function(t){var i;if(t>=0){if(t<55296||t>56319&&t<=65535)return i=this.index[t>>$m],i=(i<<tB)+(t&nB),this.data[i];if(t<=65535)return i=this.index[Hk+(t-55296>>$m)],i=(i<<tB)+(t&nB),this.data[i];if(t<this.highStart)return i=aV-lV+(t>>eB),i=this.index[i],i+=t>>$m&uV,i=this.index[i],i=(i<<tB)+(t&nB),this.data[i];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Gk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fV=typeof Uint8Array>"u"?[]:new Uint8Array(256),hb=0;hb<Gk.length;hb++)fV[Gk.charCodeAt(hb)]=hb;var pV="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Wk=50,mV=1,Kk=2,Zk=3,gV=4,_V=5,qk=7,Xk=8,Yk=9,Bp=10,iB=11,Jk=12,rB=13,yV=14,lv=15,oB=16,db=17,cv=18,vV=19,eP=20,sB=21,uv=22,aB=23,g_=24,pd=25,hv=26,dv=27,__=28,xV=29,jm=30,bV=31,Ab=32,fb=33,lB=34,cB=35,uB=36,Av=37,hB=38,pb=39,mb=40,dB=41,tP=42,wV=43,CV=[9001,65288],nP="!",As="×",gb="÷",AB=dV(pV),jf=[jm,uB],fB=[mV,Kk,Zk,_V],iP=[Bp,Xk],rP=[dv,hv],BV=fB.concat(iP),oP=[hB,pb,mb,lB,cB],TV=[lv,rB],EV=function(e,t){t===void 0&&(t="strict");var i=[],r=[],d=[];return e.forEach(function(f,v){var h=AB.get(f);if(h>Wk?(d.push(!0),h-=Wk):d.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(f)!==-1)return r.push(v),i.push(oB);if(h===gV||h===iB){if(v===0)return r.push(v),i.push(jm);var s=i[v-1];return BV.indexOf(s)===-1?(r.push(r[v-1]),i.push(s)):(r.push(v),i.push(jm))}if(r.push(v),h===bV)return i.push(t==="strict"?sB:Av);if(h===tP||h===xV)return i.push(jm);if(h===wV)return f>=131072&&f<=196605||f>=196608&&f<=262141?i.push(Av):i.push(jm);i.push(h)}),[r,i,d]},pB=function(e,t,i,r){var d=r[i];if(Array.isArray(e)?e.indexOf(d)!==-1:e===d)for(var f=i;f<=r.length;){f++;var v=r[f];if(v===t)return!0;if(v!==Bp)break}if(d===Bp)for(var f=i;f>0;){f--;var h=r[f];if(Array.isArray(e)?e.indexOf(h)!==-1:e===h)for(var s=i;s<=r.length;){s++;var v=r[s];if(v===t)return!0;if(v!==Bp)break}if(h!==Bp)break}return!1},sP=function(e,t){for(var i=e;i>=0;){var r=t[i];if(r===Bp)i--;else return r}return 0},SV=function(e,t,i,r,d){if(i[r]===0)return As;var f=r-1;if(Array.isArray(d)&&d[f]===!0)return As;var v=f-1,h=f+1,s=t[f],U=v>=0?t[v]:0,$=t[h];if(s===Kk&&$===Zk)return As;if(fB.indexOf(s)!==-1)return nP;if(fB.indexOf($)!==-1||iP.indexOf($)!==-1)return As;if(sP(f,t)===Xk)return gb;if(AB.get(e[f])===iB||(s===Ab||s===fb)&&AB.get(e[h])===iB||s===qk||$===qk||s===Yk||[Bp,rB,lv].indexOf(s)===-1&&$===Yk||[db,cv,vV,g_,__].indexOf($)!==-1||sP(f,t)===uv||pB(aB,uv,f,t)||pB([db,cv],sB,f,t)||pB(Jk,Jk,f,t))return As;if(s===Bp)return gb;if(s===aB||$===aB)return As;if($===oB||s===oB)return gb;if([rB,lv,sB].indexOf($)!==-1||s===yV||U===uB&&TV.indexOf(s)!==-1||s===__&&$===uB||$===eP||jf.indexOf($)!==-1&&s===pd||jf.indexOf(s)!==-1&&$===pd||s===dv&&[Av,Ab,fb].indexOf($)!==-1||[Av,Ab,fb].indexOf(s)!==-1&&$===hv||jf.indexOf(s)!==-1&&rP.indexOf($)!==-1||rP.indexOf(s)!==-1&&jf.indexOf($)!==-1||[dv,hv].indexOf(s)!==-1&&($===pd||[uv,lv].indexOf($)!==-1&&t[h+1]===pd)||[uv,lv].indexOf(s)!==-1&&$===pd||s===pd&&[pd,__,g_].indexOf($)!==-1)return As;if([pd,__,g_,db,cv].indexOf($)!==-1)for(var V=f;V>=0;){var q=t[V];if(q===pd)return As;if([__,g_].indexOf(q)!==-1)V--;else break}if([dv,hv].indexOf($)!==-1)for(var V=[db,cv].indexOf(s)!==-1?v:f;V>=0;){var q=t[V];if(q===pd)return As;if([__,g_].indexOf(q)!==-1)V--;else break}if(hB===s&&[hB,pb,lB,cB].indexOf($)!==-1||[pb,lB].indexOf(s)!==-1&&[pb,mb].indexOf($)!==-1||[mb,cB].indexOf(s)!==-1&&$===mb||oP.indexOf(s)!==-1&&[eP,hv].indexOf($)!==-1||oP.indexOf($)!==-1&&s===dv||jf.indexOf(s)!==-1&&jf.indexOf($)!==-1||s===g_&&jf.indexOf($)!==-1||jf.concat(pd).indexOf(s)!==-1&&$===uv&&CV.indexOf(e[h])===-1||jf.concat(pd).indexOf($)!==-1&&s===cv)return As;if(s===dB&&$===dB){for(var te=i[f],he=1;te>0&&(te--,t[te]===dB);)he++;if(he%2!==0)return As}return s===Ab&&$===fb?As:gb},IV=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var i=EV(e,t.lineBreak),r=i[0],d=i[1],f=i[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(d=d.map(function(h){return[pd,jm,tP].indexOf(h)!==-1?Av:h}));var v=t.wordBreak==="keep-all"?f.map(function(h,s){return h&&e[s]>=19968&&e[s]<=40959}):void 0;return[r,d,v]},MV=function(){function e(t,i,r,d){this.codePoints=t,this.required=i===nP,this.start=r,this.end=d}return e.prototype.slice=function(){return ic.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),LV=function(e,t){var i=lb(e),r=IV(i,t),d=r[0],f=r[1],v=r[2],h=i.length,s=0,U=0;return{next:function(){if(U>=h)return{done:!0,value:null};for(var $=As;U<h&&($=SV(i,f,d,++U,v))===As;);if($!==As||U===h){var V=new MV(i,$,s,U);return s=U,{value:V,done:!1}}return{done:!0,value:null}}}},kV=1,PV=2,fv=4,aP=8,_b=10,lP=47,pv=92,FV=9,DV=32,yb=34,mv=61,UV=35,zV=36,RV=37,vb=39,xb=40,gv=41,OV=95,Yh=45,NV=33,QV=60,$V=62,jV=64,HV=91,VV=93,GV=61,WV=123,bb=63,KV=125,cP=124,ZV=126,qV=128,uP=65533,mB=42,Hm=43,XV=44,YV=58,JV=59,_v=46,eG=0,tG=8,nG=11,iG=14,rG=31,oG=127,sf=-1,hP=48,dP=97,AP=101,sG=102,aG=117,lG=122,fP=65,pP=69,mP=70,cG=85,uG=90,rh=function(e){return e>=hP&&e<=57},hG=function(e){return e>=55296&&e<=57343},y_=function(e){return rh(e)||e>=fP&&e<=mP||e>=dP&&e<=sG},dG=function(e){return e>=dP&&e<=lG},AG=function(e){return e>=fP&&e<=uG},fG=function(e){return dG(e)||AG(e)},pG=function(e){return e>=qV},wb=function(e){return e===_b||e===FV||e===DV},Cb=function(e){return fG(e)||pG(e)||e===OV},gP=function(e){return Cb(e)||rh(e)||e===Yh},mG=function(e){return e>=eG&&e<=tG||e===nG||e>=iG&&e<=rG||e===oG},Tp=function(e,t){return e!==pv?!1:t!==_b},Bb=function(e,t,i){return e===Yh?Cb(t)||Tp(t,i):Cb(e)?!0:!!(e===pv&&Tp(e,t))},gB=function(e,t,i){return e===Hm||e===Yh?rh(t)?!0:t===_v&&rh(i):rh(e===_v?t:e)},gG=function(e){var t=0,i=1;(e[t]===Hm||e[t]===Yh)&&(e[t]===Yh&&(i=-1),t++);for(var r=[];rh(e[t]);)r.push(e[t++]);var d=r.length?parseInt(ic.apply(void 0,r),10):0;e[t]===_v&&t++;for(var f=[];rh(e[t]);)f.push(e[t++]);var v=f.length,h=v?parseInt(ic.apply(void 0,f),10):0;(e[t]===pP||e[t]===AP)&&t++;var s=1;(e[t]===Hm||e[t]===Yh)&&(e[t]===Yh&&(s=-1),t++);for(var U=[];rh(e[t]);)U.push(e[t++]);var $=U.length?parseInt(ic.apply(void 0,U),10):0;return i*(d+h*Math.pow(10,-v))*Math.pow(10,s*$)},_G={type:2},yG={type:3},vG={type:4},xG={type:13},bG={type:8},wG={type:21},CG={type:9},BG={type:10},TG={type:11},EG={type:12},SG={type:14},Tb={type:23},IG={type:1},MG={type:25},LG={type:24},kG={type:26},PG={type:27},FG={type:28},DG={type:29},UG={type:31},_B={type:32},_P=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(lb(t))},e.prototype.read=function(){for(var t=[],i=this.consumeToken();i!==_B;)t.push(i),i=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case yb:return this.consumeStringToken(yb);case UV:var i=this.peekCodePoint(0),r=this.peekCodePoint(1),d=this.peekCodePoint(2);if(gP(i)||Tp(r,d)){var f=Bb(i,r,d)?PV:kV,v=this.consumeName();return{type:5,value:v,flags:f}}break;case zV:if(this.peekCodePoint(0)===mv)return this.consumeCodePoint(),xG;break;case vb:return this.consumeStringToken(vb);case xb:return _G;case gv:return yG;case mB:if(this.peekCodePoint(0)===mv)return this.consumeCodePoint(),SG;break;case Hm:if(gB(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case XV:return vG;case Yh:var h=t,s=this.peekCodePoint(0),U=this.peekCodePoint(1);if(gB(h,s,U))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Bb(h,s,U))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(s===Yh&&U===$V)return this.consumeCodePoint(),this.consumeCodePoint(),LG;break;case _v:if(gB(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case lP:if(this.peekCodePoint(0)===mB)for(this.consumeCodePoint();;){var $=this.consumeCodePoint();if($===mB&&($=this.consumeCodePoint(),$===lP))return this.consumeToken();if($===sf)return this.consumeToken()}break;case YV:return kG;case JV:return PG;case QV:if(this.peekCodePoint(0)===NV&&this.peekCodePoint(1)===Yh&&this.peekCodePoint(2)===Yh)return this.consumeCodePoint(),this.consumeCodePoint(),MG;break;case jV:var V=this.peekCodePoint(0),q=this.peekCodePoint(1),te=this.peekCodePoint(2);if(Bb(V,q,te)){var v=this.consumeName();return{type:7,value:v}}break;case HV:return FG;case pv:if(Tp(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case VV:return DG;case GV:if(this.peekCodePoint(0)===mv)return this.consumeCodePoint(),bG;break;case WV:return TG;case KV:return EG;case aG:case cG:var he=this.peekCodePoint(0),Ae=this.peekCodePoint(1);return he===Hm&&(y_(Ae)||Ae===bb)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case cP:if(this.peekCodePoint(0)===mv)return this.consumeCodePoint(),CG;if(this.peekCodePoint(0)===cP)return this.consumeCodePoint(),wG;break;case ZV:if(this.peekCodePoint(0)===mv)return this.consumeCodePoint(),BG;break;case sf:return _B}return wb(t)?(this.consumeWhiteSpace(),UG):rh(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):Cb(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:ic(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],i=this.consumeCodePoint();y_(i)&&t.length<6;)t.push(i),i=this.consumeCodePoint();for(var r=!1;i===bb&&t.length<6;)t.push(i),i=this.consumeCodePoint(),r=!0;if(r){var d=parseInt(ic.apply(void 0,t.map(function(s){return s===bb?hP:s})),16),f=parseInt(ic.apply(void 0,t.map(function(s){return s===bb?mP:s})),16);return{type:30,start:d,end:f}}var v=parseInt(ic.apply(void 0,t),16);if(this.peekCodePoint(0)===Yh&&y_(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var h=[];y_(i)&&h.length<6;)h.push(i),i=this.consumeCodePoint();var f=parseInt(ic.apply(void 0,h),16);return{type:30,start:v,end:f}}else return{type:30,start:v,end:v}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===xb?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===xb?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===sf)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===vb||i===yb){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===sf||this.peekCodePoint(0)===gv)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Tb)}for(;;){var d=this.consumeCodePoint();if(d===sf||d===gv)return{type:22,value:ic.apply(void 0,t)};if(wb(d))return this.consumeWhiteSpace(),this.peekCodePoint(0)===sf||this.peekCodePoint(0)===gv?(this.consumeCodePoint(),{type:22,value:ic.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Tb);if(d===yb||d===vb||d===xb||mG(d))return this.consumeBadUrlRemnants(),Tb;if(d===pv)if(Tp(d,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Tb;else t.push(d)}},e.prototype.consumeWhiteSpace=function(){for(;wb(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===gv||t===sf)return;Tp(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var i=5e4,r="";t>0;){var d=Math.min(i,t);r+=ic.apply(void 0,this._value.splice(0,d)),t-=d}return this._value.shift(),r},e.prototype.consumeStringToken=function(t){var i="",r=0;do{var d=this._value[r];if(d===sf||d===void 0||d===t)return i+=this.consumeStringSlice(r),{type:0,value:i};if(d===_b)return this._value.splice(0,r),IG;if(d===pv){var f=this._value[r+1];f!==sf&&f!==void 0&&(f===_b?(i+=this.consumeStringSlice(r),r=-1,this._value.shift()):Tp(d,f)&&(i+=this.consumeStringSlice(r),i+=ic(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},e.prototype.consumeNumber=function(){var t=[],i=fv,r=this.peekCodePoint(0);for((r===Hm||r===Yh)&&t.push(this.consumeCodePoint());rh(this.peekCodePoint(0));)t.push(this.consumeCodePoint());r=this.peekCodePoint(0);var d=this.peekCodePoint(1);if(r===_v&&rh(d))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),i=aP;rh(this.peekCodePoint(0));)t.push(this.consumeCodePoint());r=this.peekCodePoint(0),d=this.peekCodePoint(1);var f=this.peekCodePoint(2);if((r===pP||r===AP)&&((d===Hm||d===Yh)&&rh(f)||rh(d)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),i=aP;rh(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[gG(t),i]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),i=t[0],r=t[1],d=this.peekCodePoint(0),f=this.peekCodePoint(1),v=this.peekCodePoint(2);if(Bb(d,f,v)){var h=this.consumeName();return{type:15,number:i,flags:r,unit:h}}return d===RV?(this.consumeCodePoint(),{type:16,number:i,flags:r}):{type:17,number:i,flags:r}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(y_(t)){for(var i=ic(t);y_(this.peekCodePoint(0))&&i.length<6;)i+=ic(this.consumeCodePoint());wb(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(i,16);return r===0||hG(r)||r>1114111?uP:r}return t===sf?uP:t},e.prototype.consumeName=function(){for(var t="";;){var i=this.consumeCodePoint();if(gP(i))t+=ic(i);else if(Tp(i,this.peekCodePoint(0)))t+=ic(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),t}},e}(),yP=function(){function e(t){this._tokens=t}return e.create=function(t){var i=new _P;return i.write(t),new e(i.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var i=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var i=this.consumeComponentValue();if(i.type===32)return t;t.push(i),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var i={type:t,values:[]},r=this.consumeToken();;){if(r.type===32||RG(r,t))return i;this.reconsumeToken(r),i.values.push(this.consumeComponentValue()),r=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var i={name:t.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return i;this.reconsumeToken(r),i.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?_B:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),yv=function(e){return e.type===15},v_=function(e){return e.type===17},ga=function(e){return e.type===20},zG=function(e){return e.type===0},yB=function(e,t){return ga(e)&&e.value===t},vP=function(e){return e.type!==31},x_=function(e){return e.type!==31&&e.type!==4},af=function(e){var t=[],i=[];return e.forEach(function(r){if(r.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(i),i=[];return}r.type!==31&&i.push(r)}),i.length&&t.push(i),t},RG=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Ep=function(e){return e.type===17||e.type===15},vc=function(e){return e.type===16||Ep(e)},xP=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Fu={type:17,number:0,flags:fv},vB={type:16,number:50,flags:fv},Sp={type:16,number:100,flags:fv},vv=function(e,t,i){var r=e[0],d=e[1];return[Pa(r,t),Pa(typeof d<"u"?d:r,i)]},Pa=function(e,t){if(e.type===16)return e.number/100*t;if(yv(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},bP="deg",wP="grad",CP="rad",BP="turn",Eb={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case bP:return Math.PI*t.number/180;case wP:return Math.PI/200*t.number;case CP:return t.number;case BP:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},TP=function(e){return e.type===15&&(e.unit===bP||e.unit===wP||e.unit===CP||e.unit===BP)},EP=function(e){var t=e.filter(ga).map(function(i){return i.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Fu,Fu];case"to top":case"bottom":return Gd(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Fu,Sp];case"to right":case"left":return Gd(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Sp,Sp];case"to bottom":case"top":return Gd(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Sp,Fu];case"to left":case"right":return Gd(270)}return 0},Gd=function(e){return Math.PI*e/180},Ip={name:"color",parse:function(e,t){if(t.type===18){var i=OG[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return i(e,t.values)}if(t.type===5){if(t.value.length===3){var r=t.value.substring(0,1),d=t.value.substring(1,2),f=t.value.substring(2,3);return Lp(parseInt(r+r,16),parseInt(d+d,16),parseInt(f+f,16),1)}if(t.value.length===4){var r=t.value.substring(0,1),d=t.value.substring(1,2),f=t.value.substring(2,3),v=t.value.substring(3,4);return Lp(parseInt(r+r,16),parseInt(d+d,16),parseInt(f+f,16),parseInt(v+v,16)/255)}if(t.value.length===6){var r=t.value.substring(0,2),d=t.value.substring(2,4),f=t.value.substring(4,6);return Lp(parseInt(r,16),parseInt(d,16),parseInt(f,16),1)}if(t.value.length===8){var r=t.value.substring(0,2),d=t.value.substring(2,4),f=t.value.substring(4,6),v=t.value.substring(6,8);return Lp(parseInt(r,16),parseInt(d,16),parseInt(f,16),parseInt(v,16)/255)}}if(t.type===20){var h=Hf[t.value.toUpperCase()];if(typeof h<"u")return h}return Hf.TRANSPARENT}},Mp=function(e){return(255&e)===0},Au=function(e){var t=255&e,i=255&e>>8,r=255&e>>16,d=255&e>>24;return t<255?"rgba("+d+","+r+","+i+","+t/255+")":"rgb("+d+","+r+","+i+")"},Lp=function(e,t,i,r){return(e<<24|t<<16|i<<8|Math.round(r*255)<<0)>>>0},SP=function(e,t){if(e.type===17)return e.number;if(e.type===16){var i=t===3?1:255;return t===3?e.number/100*i:Math.round(e.number/100*i)}return 0},IP=function(e,t){var i=t.filter(x_);if(i.length===3){var r=i.map(SP),d=r[0],f=r[1],v=r[2];return Lp(d,f,v,1)}if(i.length===4){var h=i.map(SP),d=h[0],f=h[1],v=h[2],s=h[3];return Lp(d,f,v,s)}return 0};function xB(e,t,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(t-e)*i*6+e:i<1/2?t:i<2/3?(t-e)*6*(2/3-i)+e:e}var MP=function(e,t){var i=t.filter(x_),r=i[0],d=i[1],f=i[2],v=i[3],h=(r.type===17?Gd(r.number):Eb.parse(e,r))/(Math.PI*2),s=vc(d)?d.number/100:0,U=vc(f)?f.number/100:0,$=typeof v<"u"&&vc(v)?Pa(v,1):1;if(s===0)return Lp(U*255,U*255,U*255,1);var V=U<=.5?U*(s+1):U+s-U*s,q=U*2-V,te=xB(q,V,h+1/3),he=xB(q,V,h),Ae=xB(q,V,h-1/3);return Lp(te*255,he*255,Ae*255,$)},OG={hsl:MP,hsla:MP,rgb:IP,rgba:IP},xv=function(e,t){return Ip.parse(e,yP.create(t).parseComponentValue())},Hf={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},NG={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(i){if(ga(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},QG={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Sb=function(e,t){var i=Ip.parse(e,t[0]),r=t[1];return r&&vc(r)?{color:i,stop:r}:{color:i,stop:null}},LP=function(e,t){var i=e[0],r=e[e.length-1];i.stop===null&&(i.stop=Fu),r.stop===null&&(r.stop=Sp);for(var d=[],f=0,v=0;v<e.length;v++){var h=e[v].stop;if(h!==null){var s=Pa(h,t);s>f?d.push(s):d.push(f),f=s}else d.push(null)}for(var U=null,v=0;v<d.length;v++){var $=d[v];if($===null)U===null&&(U=v);else if(U!==null){for(var V=v-U,q=d[U-1],te=($-q)/(V+1),he=1;he<=V;he++)d[U+he-1]=te*he;U=null}}return e.map(function(Ae,De){var ke=Ae.color;return{color:ke,stop:Math.max(Math.min(1,d[De]/t),0)}})},$G=function(e,t,i){var r=t/2,d=i/2,f=Pa(e[0],t)-r,v=d-Pa(e[1],i);return(Math.atan2(v,f)+Math.PI*2)%(Math.PI*2)},jG=function(e,t,i){var r=typeof e=="number"?e:$G(e,t,i),d=Math.abs(t*Math.sin(r))+Math.abs(i*Math.cos(r)),f=t/2,v=i/2,h=d/2,s=Math.sin(r-Math.PI/2)*h,U=Math.cos(r-Math.PI/2)*h;return[d,f-U,f+U,v-s,v+s]},CA=function(e,t){return Math.sqrt(e*e+t*t)},kP=function(e,t,i,r,d){var f=[[0,0],[0,t],[e,0],[e,t]];return f.reduce(function(v,h){var s=h[0],U=h[1],$=CA(i-s,r-U);return(d?$<v.optimumDistance:$>v.optimumDistance)?{optimumCorner:h,optimumDistance:$}:v},{optimumDistance:d?1/0:-1/0,optimumCorner:null}).optimumCorner},HG=function(e,t,i,r,d){var f=0,v=0;switch(e.size){case 0:e.shape===0?f=v=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(i),Math.abs(i-d)):e.shape===1&&(f=Math.min(Math.abs(t),Math.abs(t-r)),v=Math.min(Math.abs(i),Math.abs(i-d)));break;case 2:if(e.shape===0)f=v=Math.min(CA(t,i),CA(t,i-d),CA(t-r,i),CA(t-r,i-d));else if(e.shape===1){var h=Math.min(Math.abs(i),Math.abs(i-d))/Math.min(Math.abs(t),Math.abs(t-r)),s=kP(r,d,t,i,!0),U=s[0],$=s[1];f=CA(U-t,($-i)/h),v=h*f}break;case 1:e.shape===0?f=v=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(i),Math.abs(i-d)):e.shape===1&&(f=Math.max(Math.abs(t),Math.abs(t-r)),v=Math.max(Math.abs(i),Math.abs(i-d)));break;case 3:if(e.shape===0)f=v=Math.max(CA(t,i),CA(t,i-d),CA(t-r,i),CA(t-r,i-d));else if(e.shape===1){var h=Math.max(Math.abs(i),Math.abs(i-d))/Math.max(Math.abs(t),Math.abs(t-r)),V=kP(r,d,t,i,!1),U=V[0],$=V[1];f=CA(U-t,($-i)/h),v=h*f}break}return Array.isArray(e.size)&&(f=Pa(e.size[0],r),v=e.size.length===2?Pa(e.size[1],d):f),[f,v]},VG=function(e,t){var i=Gd(180),r=[];return af(t).forEach(function(d,f){if(f===0){var v=d[0];if(v.type===20&&v.value==="to"){i=EP(d);return}else if(TP(v)){i=Eb.parse(e,v);return}}var h=Sb(e,d);r.push(h)}),{angle:i,stops:r,type:1}},Ib=function(e,t){var i=Gd(180),r=[];return af(t).forEach(function(d,f){if(f===0){var v=d[0];if(v.type===20&&["top","left","right","bottom"].indexOf(v.value)!==-1){i=EP(d);return}else if(TP(v)){i=(Eb.parse(e,v)+Gd(270))%Gd(360);return}}var h=Sb(e,d);r.push(h)}),{angle:i,stops:r,type:1}},GG=function(e,t){var i=Gd(180),r=[],d=1,f=0,v=3,h=[];return af(t).forEach(function(s,U){var $=s[0];if(U===0){if(ga($)&&$.value==="linear"){d=1;return}else if(ga($)&&$.value==="radial"){d=2;return}}if($.type===18){if($.name==="from"){var V=Ip.parse(e,$.values[0]);r.push({stop:Fu,color:V})}else if($.name==="to"){var V=Ip.parse(e,$.values[0]);r.push({stop:Sp,color:V})}else if($.name==="color-stop"){var q=$.values.filter(x_);if(q.length===2){var V=Ip.parse(e,q[1]),te=q[0];v_(te)&&r.push({stop:{type:16,number:te.number*100,flags:te.flags},color:V})}}}}),d===1?{angle:(i+Gd(180))%Gd(360),stops:r,type:d}:{size:v,shape:f,stops:r,position:h,type:d}},PP="closest-side",FP="farthest-side",DP="closest-corner",UP="farthest-corner",zP="circle",RP="ellipse",OP="cover",NP="contain",WG=function(e,t){var i=0,r=3,d=[],f=[];return af(t).forEach(function(v,h){var s=!0;if(h===0){var U=!1;s=v.reduce(function(V,q){if(U)if(ga(q))switch(q.value){case"center":return f.push(vB),V;case"top":case"left":return f.push(Fu),V;case"right":case"bottom":return f.push(Sp),V}else(vc(q)||Ep(q))&&f.push(q);else if(ga(q))switch(q.value){case zP:return i=0,!1;case RP:return i=1,!1;case"at":return U=!0,!1;case PP:return r=0,!1;case OP:case FP:return r=1,!1;case NP:case DP:return r=2,!1;case UP:return r=3,!1}else if(Ep(q)||vc(q))return Array.isArray(r)||(r=[]),r.push(q),!1;return V},s)}if(s){var $=Sb(e,v);d.push($)}}),{size:r,shape:i,stops:d,position:f,type:2}},Mb=function(e,t){var i=0,r=3,d=[],f=[];return af(t).forEach(function(v,h){var s=!0;if(h===0?s=v.reduce(function($,V){if(ga(V))switch(V.value){case"center":return f.push(vB),!1;case"top":case"left":return f.push(Fu),!1;case"right":case"bottom":return f.push(Sp),!1}else if(vc(V)||Ep(V))return f.push(V),!1;return $},s):h===1&&(s=v.reduce(function($,V){if(ga(V))switch(V.value){case zP:return i=0,!1;case RP:return i=1,!1;case NP:case PP:return r=0,!1;case FP:return r=1,!1;case DP:return r=2,!1;case OP:case UP:return r=3,!1}else if(Ep(V)||vc(V))return Array.isArray(r)||(r=[]),r.push(V),!1;return $},s)),s){var U=Sb(e,v);d.push(U)}}),{size:r,shape:i,stops:d,position:f,type:2}},KG=function(e){return e.type===1},ZG=function(e){return e.type===2},bB={name:"image",parse:function(e,t){if(t.type===22){var i={url:t.value,type:0};return e.cache.addImage(t.value),i}if(t.type===18){var r=QP[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function qG(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!QP[e.name])}var QP={"linear-gradient":VG,"-moz-linear-gradient":Ib,"-ms-linear-gradient":Ib,"-o-linear-gradient":Ib,"-webkit-linear-gradient":Ib,"radial-gradient":WG,"-moz-radial-gradient":Mb,"-ms-radial-gradient":Mb,"-o-radial-gradient":Mb,"-webkit-radial-gradient":Mb,"-webkit-gradient":GG},XG={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var i=t[0];return i.type===20&&i.value==="none"?[]:t.filter(function(r){return x_(r)&&qG(r)}).map(function(r){return bB.parse(e,r)})}},YG={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(i){if(ga(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},JG={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return af(t).map(function(i){return i.filter(vc)}).map(xP)}},e8={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return af(t).map(function(i){return i.filter(ga).map(function(r){return r.value}).join(" ")}).map(t8)}},t8=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},b_;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(b_||(b_={}));var n8={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return af(t).map(function(i){return i.filter(i8)})}},i8=function(e){return ga(e)||vc(e)},Lb=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},r8=Lb("top"),o8=Lb("right"),s8=Lb("bottom"),a8=Lb("left"),kb=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,i){return xP(i.filter(vc))}}},l8=kb("top-left"),c8=kb("top-right"),u8=kb("bottom-right"),h8=kb("bottom-left"),Pb=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},d8=Pb("top"),A8=Pb("right"),f8=Pb("bottom"),p8=Pb("left"),Fb=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,i){return yv(i)?i.number:0}}},m8=Fb("top"),g8=Fb("right"),_8=Fb("bottom"),y8=Fb("left"),v8={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},x8={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},b8={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(ga).reduce(function(i,r){return i|w8(r.value)},0)}},w8=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},C8={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},B8={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},Db;(function(e){e.NORMAL="normal",e.STRICT="strict"})(Db||(Db={}));var T8={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return Db.STRICT;case"normal":default:return Db.NORMAL}}},E8={name:"line-height",initialValue:"normal",prefix:!1,type:4},$P=function(e,t){return ga(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:vc(e)?Pa(e,t):t},S8={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:bB.parse(e,t)}},I8={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},wB={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Ub=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},M8=Ub("top"),L8=Ub("right"),k8=Ub("bottom"),P8=Ub("left"),F8={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(ga).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},D8={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},zb=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},U8=zb("top"),z8=zb("right"),R8=zb("bottom"),O8=zb("left"),N8={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Q8={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},$8={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&yB(t[0],"none")?[]:af(t).map(function(i){for(var r={color:Hf.TRANSPARENT,offsetX:Fu,offsetY:Fu,blur:Fu},d=0,f=0;f<i.length;f++){var v=i[f];Ep(v)?(d===0?r.offsetX=v:d===1?r.offsetY=v:r.blur=v,d++):r.color=Ip.parse(e,v)}return r})}},j8={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},H8={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var i=W8[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return i(t.values)}return null}},V8=function(e){var t=e.filter(function(i){return i.type===17}).map(function(i){return i.number});return t.length===6?t:null},G8=function(e){var t=e.filter(function(s){return s.type===17}).map(function(s){return s.number}),i=t[0],r=t[1];t[2],t[3];var d=t[4],f=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var v=t[12],h=t[13];return t[14],t[15],t.length===16?[i,r,d,f,v,h]:null},W8={matrix:V8,matrix3d:G8},jP={type:16,number:50,flags:fv},K8=[jP,jP],Z8={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var i=t.filter(vc);return i.length!==2?K8:[i[0],i[1]]}},q8={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},bv;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(bv||(bv={}));for(var X8={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return bv.BREAK_ALL;case"keep-all":return bv.KEEP_ALL;case"normal":default:return bv.NORMAL}}},Y8={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(v_(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},HP={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},J8={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return v_(t)?t.number:1}},eW={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},tW={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(ga).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},nW={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var i=[],r=[];return t.forEach(function(d){switch(d.type){case 20:case 0:i.push(d.value);break;case 17:i.push(d.number.toString());break;case 4:r.push(i.join(" ")),i.length=0;break}}),i.length&&r.push(i.join(" ")),r.map(function(d){return d.indexOf(" ")===-1?d:"'"+d+"'"})}},iW={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},rW={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(v_(t))return t.number;if(ga(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},oW={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(ga).map(function(i){return i.value})}},sW={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Nc=function(e,t){return(e&t)!==0},aW={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var i=t[0];return i.type===20&&i.value==="none"?[]:t}},lW={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var i=t[0];if(i.type===20&&i.value==="none")return null;for(var r=[],d=t.filter(vP),f=0;f<d.length;f++){var v=d[f],h=d[f+1];if(v.type===20){var s=h&&v_(h)?h.number:1;r.push({counter:v.value,increment:s})}}return r}},cW={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var i=[],r=t.filter(vP),d=0;d<r.length;d++){var f=r[d],v=r[d+1];if(ga(f)&&f.value!=="none"){var h=v&&v_(v)?v.number:0;i.push({counter:f.value,reset:h})}}return i}},uW={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(yv).map(function(i){return HP.parse(e,i)})}},hW={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var i=t[0];if(i.type===20&&i.value==="none")return null;var r=[],d=t.filter(zG);if(d.length%2!==0)return null;for(var f=0;f<d.length;f+=2){var v=d[f].value,h=d[f+1].value;r.push({open:v,close:h})}return r}},VP=function(e,t,i){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?i?r.open:r.close:""},dW={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&yB(t[0],"none")?[]:af(t).map(function(i){for(var r={color:255,offsetX:Fu,offsetY:Fu,blur:Fu,spread:Fu,inset:!1},d=0,f=0;f<i.length;f++){var v=i[f];yB(v,"inset")?r.inset=!0:Ep(v)?(d===0?r.offsetX=v:d===1?r.offsetY=v:d===2?r.blur=v:r.spread=v,d++):r.color=Ip.parse(e,v)}return r})}},AW={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var i=[0,1,2],r=[];return t.filter(ga).forEach(function(d){switch(d.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),i.forEach(function(d){r.indexOf(d)===-1&&r.push(d)}),r}},fW={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},pW={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return yv(t)?t.number:0}},mW=function(){function e(t,i){var r,d;this.animationDuration=fr(t,uW,i.animationDuration),this.backgroundClip=fr(t,NG,i.backgroundClip),this.backgroundColor=fr(t,QG,i.backgroundColor),this.backgroundImage=fr(t,XG,i.backgroundImage),this.backgroundOrigin=fr(t,YG,i.backgroundOrigin),this.backgroundPosition=fr(t,JG,i.backgroundPosition),this.backgroundRepeat=fr(t,e8,i.backgroundRepeat),this.backgroundSize=fr(t,n8,i.backgroundSize),this.borderTopColor=fr(t,r8,i.borderTopColor),this.borderRightColor=fr(t,o8,i.borderRightColor),this.borderBottomColor=fr(t,s8,i.borderBottomColor),this.borderLeftColor=fr(t,a8,i.borderLeftColor),this.borderTopLeftRadius=fr(t,l8,i.borderTopLeftRadius),this.borderTopRightRadius=fr(t,c8,i.borderTopRightRadius),this.borderBottomRightRadius=fr(t,u8,i.borderBottomRightRadius),this.borderBottomLeftRadius=fr(t,h8,i.borderBottomLeftRadius),this.borderTopStyle=fr(t,d8,i.borderTopStyle),this.borderRightStyle=fr(t,A8,i.borderRightStyle),this.borderBottomStyle=fr(t,f8,i.borderBottomStyle),this.borderLeftStyle=fr(t,p8,i.borderLeftStyle),this.borderTopWidth=fr(t,m8,i.borderTopWidth),this.borderRightWidth=fr(t,g8,i.borderRightWidth),this.borderBottomWidth=fr(t,_8,i.borderBottomWidth),this.borderLeftWidth=fr(t,y8,i.borderLeftWidth),this.boxShadow=fr(t,dW,i.boxShadow),this.color=fr(t,v8,i.color),this.direction=fr(t,x8,i.direction),this.display=fr(t,b8,i.display),this.float=fr(t,C8,i.cssFloat),this.fontFamily=fr(t,nW,i.fontFamily),this.fontSize=fr(t,iW,i.fontSize),this.fontStyle=fr(t,sW,i.fontStyle),this.fontVariant=fr(t,oW,i.fontVariant),this.fontWeight=fr(t,rW,i.fontWeight),this.letterSpacing=fr(t,B8,i.letterSpacing),this.lineBreak=fr(t,T8,i.lineBreak),this.lineHeight=fr(t,E8,i.lineHeight),this.listStyleImage=fr(t,S8,i.listStyleImage),this.listStylePosition=fr(t,I8,i.listStylePosition),this.listStyleType=fr(t,wB,i.listStyleType),this.marginTop=fr(t,M8,i.marginTop),this.marginRight=fr(t,L8,i.marginRight),this.marginBottom=fr(t,k8,i.marginBottom),this.marginLeft=fr(t,P8,i.marginLeft),this.opacity=fr(t,J8,i.opacity);var f=fr(t,F8,i.overflow);this.overflowX=f[0],this.overflowY=f[f.length>1?1:0],this.overflowWrap=fr(t,D8,i.overflowWrap),this.paddingTop=fr(t,U8,i.paddingTop),this.paddingRight=fr(t,z8,i.paddingRight),this.paddingBottom=fr(t,R8,i.paddingBottom),this.paddingLeft=fr(t,O8,i.paddingLeft),this.paintOrder=fr(t,AW,i.paintOrder),this.position=fr(t,Q8,i.position),this.textAlign=fr(t,N8,i.textAlign),this.textDecorationColor=fr(t,eW,(r=i.textDecorationColor)!==null&&r!==void 0?r:i.color),this.textDecorationLine=fr(t,tW,(d=i.textDecorationLine)!==null&&d!==void 0?d:i.textDecoration),this.textShadow=fr(t,$8,i.textShadow),this.textTransform=fr(t,j8,i.textTransform),this.transform=fr(t,H8,i.transform),this.transformOrigin=fr(t,Z8,i.transformOrigin),this.visibility=fr(t,q8,i.visibility),this.webkitTextStrokeColor=fr(t,fW,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=fr(t,pW,i.webkitTextStrokeWidth),this.wordBreak=fr(t,X8,i.wordBreak),this.zIndex=fr(t,Y8,i.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Mp(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Nc(this.display,4)||Nc(this.display,33554432)||Nc(this.display,268435456)||Nc(this.display,536870912)||Nc(this.display,67108864)||Nc(this.display,134217728)},e}(),gW=function(){function e(t,i){this.content=fr(t,aW,i.content),this.quotes=fr(t,hW,i.quotes)}return e}(),GP=function(){function e(t,i){this.counterIncrement=fr(t,lW,i.counterIncrement),this.counterReset=fr(t,cW,i.counterReset)}return e}(),fr=function(e,t,i){var r=new _P,d=i!==null&&typeof i<"u"?i.toString():t.initialValue;r.write(d);var f=new yP(r.read());switch(t.type){case 2:var v=f.parseComponentValue();return t.parse(e,ga(v)?v.value:t.initialValue);case 0:return t.parse(e,f.parseComponentValue());case 1:return t.parse(e,f.parseComponentValues());case 4:return f.parseComponentValue();case 3:switch(t.format){case"angle":return Eb.parse(e,f.parseComponentValue());case"color":return Ip.parse(e,f.parseComponentValue());case"image":return bB.parse(e,f.parseComponentValue());case"length":var h=f.parseComponentValue();return Ep(h)?h:Fu;case"length-percentage":var s=f.parseComponentValue();return vc(s)?s:Fu;case"time":return HP.parse(e,f.parseComponentValue())}break}},_W="data-html2canvas-debug",yW=function(e){var t=e.getAttribute(_W);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},CB=function(e,t){var i=yW(e);return i===1||t===i},lf=function(){function e(t,i){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,CB(i,3))debugger;this.styles=new mW(t,window.getComputedStyle(i,null)),RB(i)&&(this.styles.animationDuration.some(function(r){return r>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=ab(this.context,i),CB(i,4)&&(this.flags|=16)}return e}(),vW="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",WP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wv=typeof Uint8Array>"u"?[]:new Uint8Array(256),Rb=0;Rb<WP.length;Rb++)wv[WP.charCodeAt(Rb)]=Rb;for(var xW=function(e){var t=e.length*.75,i=e.length,r,d=0,f,v,h,s;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var U=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),$=Array.isArray(U)?U:new Uint8Array(U);for(r=0;r<i;r+=4)f=wv[e.charCodeAt(r)],v=wv[e.charCodeAt(r+1)],h=wv[e.charCodeAt(r+2)],s=wv[e.charCodeAt(r+3)],$[d++]=f<<2|v>>4,$[d++]=(v&15)<<4|h>>2,$[d++]=(h&3)<<6|s&63;return U},bW=function(e){for(var t=e.length,i=[],r=0;r<t;r+=2)i.push(e[r+1]<<8|e[r]);return i},wW=function(e){for(var t=e.length,i=[],r=0;r<t;r+=4)i.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return i},Vm=5,BB=11,TB=2,CW=BB-Vm,KP=65536>>Vm,BW=1<<Vm,EB=BW-1,TW=1024>>Vm,EW=KP+TW,SW=EW,IW=32,MW=SW+IW,LW=65536>>BB,kW=1<<CW,PW=kW-1,ZP=function(e,t,i){return e.slice?e.slice(t,i):new Uint16Array(Array.prototype.slice.call(e,t,i))},FW=function(e,t,i){return e.slice?e.slice(t,i):new Uint32Array(Array.prototype.slice.call(e,t,i))},DW=function(e,t){var i=xW(e),r=Array.isArray(i)?wW(i):new Uint32Array(i),d=Array.isArray(i)?bW(i):new Uint16Array(i),f=24,v=ZP(d,f/2,r[4]/2),h=r[5]===2?ZP(d,(f+r[4])/2):FW(r,Math.ceil((f+r[4])/4));return new UW(r[0],r[1],r[2],r[3],v,h)},UW=function(){function e(t,i,r,d,f,v){this.initialValue=t,this.errorValue=i,this.highStart=r,this.highValueIndex=d,this.index=f,this.data=v}return e.prototype.get=function(t){var i;if(t>=0){if(t<55296||t>56319&&t<=65535)return i=this.index[t>>Vm],i=(i<<TB)+(t&EB),this.data[i];if(t<=65535)return i=this.index[KP+(t-55296>>Vm)],i=(i<<TB)+(t&EB),this.data[i];if(t<this.highStart)return i=MW-LW+(t>>BB),i=this.index[i],i+=t>>Vm&PW,i=this.index[i],i=(i<<TB)+(t&EB),this.data[i];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),qP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zW=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ob=0;Ob<qP.length;Ob++)zW[qP.charCodeAt(Ob)]=Ob;var RW=1,SB=2,IB=3,XP=4,YP=5,OW=7,JP=8,MB=9,LB=10,eF=11,tF=12,nF=13,iF=14,kB=15,NW=function(e){for(var t=[],i=0,r=e.length;i<r;){var d=e.charCodeAt(i++);if(d>=55296&&d<=56319&&i<r){var f=e.charCodeAt(i++);(f&64512)===56320?t.push(((d&1023)<<10)+(f&1023)+65536):(t.push(d),i--)}else t.push(d)}return t},QW=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var r=[],d=-1,f="";++d<i;){var v=e[d];v<=65535?r.push(v):(v-=65536,r.push((v>>10)+55296,v%1024+56320)),(d+1===i||r.length>16384)&&(f+=String.fromCharCode.apply(String,r),r.length=0)}return f},$W=DW(vW),Wd="×",PB="÷",jW=function(e){return $W.get(e)},HW=function(e,t,i){var r=i-2,d=t[r],f=t[i-1],v=t[i];if(f===SB&&v===IB)return Wd;if(f===SB||f===IB||f===XP||v===SB||v===IB||v===XP)return PB;if(f===JP&&[JP,MB,eF,tF].indexOf(v)!==-1||(f===eF||f===MB)&&(v===MB||v===LB)||(f===tF||f===LB)&&v===LB||v===nF||v===YP||v===OW||f===RW)return Wd;if(f===nF&&v===iF){for(;d===YP;)d=t[--r];if(d===iF)return Wd}if(f===kB&&v===kB){for(var h=0;d===kB;)h++,d=t[--r];if(h%2===0)return Wd}return PB},VW=function(e){var t=NW(e),i=t.length,r=0,d=0,f=t.map(jW);return{next:function(){if(r>=i)return{done:!0,value:null};for(var v=Wd;r<i&&(v=HW(t,f,++r))===Wd;);if(v!==Wd||r===i){var h=QW.apply(null,t.slice(d,r));return d=r,{value:h,done:!1}}return{done:!0,value:null}}}},GW=function(e){for(var t=VW(e),i=[],r;!(r=t.next()).done;)r.value&&i.push(r.value.slice());return i},WW=function(e){var t=123;if(e.createRange){var i=e.createRange();if(i.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),i.selectNode(r);var d=i.getBoundingClientRect(),f=Math.round(d.height);if(e.body.removeChild(r),f===t)return!0}}return!1},KW=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var i=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=t.firstChild,d=lb(r.data).map(function(s){return ic(s)}),f=0,v={},h=d.every(function(s,U){i.setStart(r,f),i.setEnd(r,f+s.length);var $=i.getBoundingClientRect();f+=s.length;var V=$.x>v.x||$.y>v.y;return v=$,U===0?!0:V});return e.body.removeChild(t),h},ZW=function(){return typeof new Image().crossOrigin<"u"},qW=function(){return typeof new XMLHttpRequest().responseType=="string"},XW=function(e){var t=new Image,i=e.createElement("canvas"),r=i.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),i.toDataURL()}catch{return!1}return!0},rF=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},YW=function(e){var t=e.createElement("canvas"),i=100;t.width=i,t.height=i;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,i,i);var d=new Image,f=t.toDataURL();d.src=f;var v=FB(i,i,0,0,d);return r.fillStyle="red",r.fillRect(0,0,i,i),oF(v).then(function(h){r.drawImage(h,0,0);var s=r.getImageData(0,0,i,i).data;r.fillStyle="red",r.fillRect(0,0,i,i);var U=e.createElement("div");return U.style.backgroundImage="url("+f+")",U.style.height=i+"px",rF(s)?oF(FB(i,i,0,0,U)):Promise.reject(!1)}).then(function(h){return r.drawImage(h,0,0),rF(r.getImageData(0,0,i,i).data)}).catch(function(){return!1})},FB=function(e,t,i,r,d){var f="http://www.w3.org/2000/svg",v=document.createElementNS(f,"svg"),h=document.createElementNS(f,"foreignObject");return v.setAttributeNS(null,"width",e.toString()),v.setAttributeNS(null,"height",t.toString()),h.setAttributeNS(null,"width","100%"),h.setAttributeNS(null,"height","100%"),h.setAttributeNS(null,"x",i.toString()),h.setAttributeNS(null,"y",r.toString()),h.setAttributeNS(null,"externalResourcesRequired","true"),v.appendChild(h),h.appendChild(d),v},oF=function(e){return new Promise(function(t,i){var r=new Image;r.onload=function(){return t(r)},r.onerror=i,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Du={get SUPPORT_RANGE_BOUNDS(){var e=WW(document);return Object.defineProperty(Du,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Du.SUPPORT_RANGE_BOUNDS&&KW(document);return Object.defineProperty(Du,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=XW(document);return Object.defineProperty(Du,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?YW(document):Promise.resolve(!1);return Object.defineProperty(Du,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=ZW();return Object.defineProperty(Du,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=qW();return Object.defineProperty(Du,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Du,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Du,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Cv=function(){function e(t,i){this.text=t,this.bounds=i}return e}(),JW=function(e,t,i,r){var d=nK(t,i),f=[],v=0;return d.forEach(function(h){if(i.textDecorationLine.length||h.trim().length>0)if(Du.SUPPORT_RANGE_BOUNDS){var s=sF(r,v,h.length).getClientRects();if(s.length>1){var U=DB(h),$=0;U.forEach(function(q){f.push(new Cv(q,$f.fromDOMRectList(e,sF(r,$+v,q.length).getClientRects()))),$+=q.length})}else f.push(new Cv(h,$f.fromDOMRectList(e,s)))}else{var V=r.splitText(h.length);f.push(new Cv(h,eK(e,r))),r=V}else Du.SUPPORT_RANGE_BOUNDS||(r=r.splitText(h.length));v+=h.length}),f},eK=function(e,t){var i=t.ownerDocument;if(i){var r=i.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var d=t.parentNode;if(d){d.replaceChild(r,t);var f=ab(e,r);return r.firstChild&&d.replaceChild(r.firstChild,r),f}}return $f.EMPTY},sF=function(e,t,i){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var d=r.createRange();return d.setStart(e,t),d.setEnd(e,t+i),d},DB=function(e){if(Du.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(i){return i.segment})}return GW(e)},tK=function(e,t){if(Du.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(e)).map(function(r){return r.segment})}return rK(e,t)},nK=function(e,t){return t.letterSpacing!==0?DB(e):tK(e,t)},iK=[32,160,4961,65792,65793,4153,4241],rK=function(e,t){for(var i=LV(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),r=[],d,f=function(){if(d.value){var v=d.value.slice(),h=lb(v),s="";h.forEach(function(U){iK.indexOf(U)===-1?s+=ic(U):(s.length&&r.push(s),r.push(ic(U)),s="")}),s.length&&r.push(s)}};!(d=i.next()).done;)f();return r},oK=function(){function e(t,i,r){this.text=sK(i.data,r.textTransform),this.textBounds=JW(t,this.text,r,i)}return e}(),sK=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(aK,lK);case 2:return e.toUpperCase();default:return e}},aK=/(^|\s|:|-|\(|\))([a-z])/g,lK=function(e,t,i){return e.length>0?t+i.toUpperCase():e},aF=function(e){wA(t,e);function t(i,r){var d=e.call(this,i,r)||this;return d.src=r.currentSrc||r.src,d.intrinsicWidth=r.naturalWidth,d.intrinsicHeight=r.naturalHeight,d.context.cache.addImage(d.src),d}return t}(lf),lF=function(e){wA(t,e);function t(i,r){var d=e.call(this,i,r)||this;return d.canvas=r,d.intrinsicWidth=r.width,d.intrinsicHeight=r.height,d}return t}(lf),cF=function(e){wA(t,e);function t(i,r){var d=e.call(this,i,r)||this,f=new XMLSerializer,v=ab(i,r);return r.setAttribute("width",v.width+"px"),r.setAttribute("height",v.height+"px"),d.svg="data:image/svg+xml,"+encodeURIComponent(f.serializeToString(r)),d.intrinsicWidth=r.width.baseVal.value,d.intrinsicHeight=r.height.baseVal.value,d.context.cache.addImage(d.svg),d}return t}(lf),uF=function(e){wA(t,e);function t(i,r){var d=e.call(this,i,r)||this;return d.value=r.value,d}return t}(lf),UB=function(e){wA(t,e);function t(i,r){var d=e.call(this,i,r)||this;return d.start=r.start,d.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,d}return t}(lf),cK=[{type:15,flags:0,unit:"px",number:3}],uK=[{type:16,flags:0,number:50}],hK=function(e){return e.width>e.height?new $f(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new $f(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},dK=function(e){var t=e.type===AK?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},Nb="checkbox",Qb="radio",AK="password",hF=707406591,zB=function(e){wA(t,e);function t(i,r){var d=e.call(this,i,r)||this;switch(d.type=r.type.toLowerCase(),d.checked=r.checked,d.value=dK(r),(d.type===Nb||d.type===Qb)&&(d.styles.backgroundColor=3739148031,d.styles.borderTopColor=d.styles.borderRightColor=d.styles.borderBottomColor=d.styles.borderLeftColor=2779096575,d.styles.borderTopWidth=d.styles.borderRightWidth=d.styles.borderBottomWidth=d.styles.borderLeftWidth=1,d.styles.borderTopStyle=d.styles.borderRightStyle=d.styles.borderBottomStyle=d.styles.borderLeftStyle=1,d.styles.backgroundClip=[0],d.styles.backgroundOrigin=[0],d.bounds=hK(d.bounds)),d.type){case Nb:d.styles.borderTopRightRadius=d.styles.borderTopLeftRadius=d.styles.borderBottomRightRadius=d.styles.borderBottomLeftRadius=cK;break;case Qb:d.styles.borderTopRightRadius=d.styles.borderTopLeftRadius=d.styles.borderBottomRightRadius=d.styles.borderBottomLeftRadius=uK;break}return d}return t}(lf),dF=function(e){wA(t,e);function t(i,r){var d=e.call(this,i,r)||this,f=r.options[r.selectedIndex||0];return d.value=f&&f.text||"",d}return t}(lf),AF=function(e){wA(t,e);function t(i,r){var d=e.call(this,i,r)||this;return d.value=r.value,d}return t}(lf),fF=function(e){wA(t,e);function t(i,r){var d=e.call(this,i,r)||this;d.src=r.src,d.width=parseInt(r.width,10)||0,d.height=parseInt(r.height,10)||0,d.backgroundColor=d.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){d.tree=mF(i,r.contentWindow.document.documentElement);var f=r.contentWindow.document.documentElement?xv(i,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Hf.TRANSPARENT,v=r.contentWindow.document.body?xv(i,getComputedStyle(r.contentWindow.document.body).backgroundColor):Hf.TRANSPARENT;d.backgroundColor=Mp(f)?Mp(v)?d.styles.backgroundColor:v:f}}catch{}return d}return t}(lf),fK=["OL","UL","MENU"],$b=function(e,t,i,r){for(var d=t.firstChild,f=void 0;d;d=f)if(f=d.nextSibling,gF(d)&&d.data.trim().length>0)i.textNodes.push(new oK(e,d,i.styles));else if(w_(d))if(wF(d)&&d.assignedNodes)d.assignedNodes().forEach(function(h){return $b(e,h,i,r)});else{var v=pF(e,d);v.styles.isVisible()&&(pK(d,v,r)?v.flags|=4:mK(v.styles)&&(v.flags|=2),fK.indexOf(d.tagName)!==-1&&(v.flags|=8),i.elements.push(v),d.slot,d.shadowRoot?$b(e,d.shadowRoot,v,r):!Hb(d)&&!_F(d)&&!Vb(d)&&$b(e,d,v,r))}},pF=function(e,t){return NB(t)?new aF(e,t):yF(t)?new lF(e,t):_F(t)?new cF(e,t):gK(t)?new uF(e,t):_K(t)?new UB(e,t):yK(t)?new zB(e,t):Vb(t)?new dF(e,t):Hb(t)?new AF(e,t):xF(t)?new fF(e,t):new lf(e,t)},mF=function(e,t){var i=pF(e,t);return i.flags|=4,$b(e,t,i,i),i},pK=function(e,t,i){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||OB(e)&&i.styles.isTransparent()},mK=function(e){return e.isPositioned()||e.isFloating()},gF=function(e){return e.nodeType===Node.TEXT_NODE},w_=function(e){return e.nodeType===Node.ELEMENT_NODE},RB=function(e){return w_(e)&&typeof e.style<"u"&&!jb(e)},jb=function(e){return typeof e.className=="object"},gK=function(e){return e.tagName==="LI"},_K=function(e){return e.tagName==="OL"},yK=function(e){return e.tagName==="INPUT"},vK=function(e){return e.tagName==="HTML"},_F=function(e){return e.tagName==="svg"},OB=function(e){return e.tagName==="BODY"},yF=function(e){return e.tagName==="CANVAS"},vF=function(e){return e.tagName==="VIDEO"},NB=function(e){return e.tagName==="IMG"},xF=function(e){return e.tagName==="IFRAME"},bF=function(e){return e.tagName==="STYLE"},xK=function(e){return e.tagName==="SCRIPT"},Hb=function(e){return e.tagName==="TEXTAREA"},Vb=function(e){return e.tagName==="SELECT"},wF=function(e){return e.tagName==="SLOT"},CF=function(e){return e.tagName.indexOf("-")>0},bK=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var i=this.counters[t];return i&&i.length?i[i.length-1]:1},e.prototype.getCounterValues=function(t){var i=this.counters[t];return i||[]},e.prototype.pop=function(t){var i=this;t.forEach(function(r){return i.counters[r].pop()})},e.prototype.parse=function(t){var i=this,r=t.counterIncrement,d=t.counterReset,f=!0;r!==null&&r.forEach(function(h){var s=i.counters[h.counter];s&&h.increment!==0&&(f=!1,s.length||s.push(1),s[Math.max(0,s.length-1)]+=h.increment)});var v=[];return f&&d.forEach(function(h){var s=i.counters[h.counter];v.push(h.counter),s||(s=i.counters[h.counter]=[]),s.push(h.reset)}),v},e}(),BF={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},TF={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},wK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},CK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},C_=function(e,t,i,r,d,f){return e<t||e>i?Tv(e,d,f.length>0):r.integers.reduce(function(v,h,s){for(;e>=h;)e-=h,v+=r.values[s];return v},"")+f},EF=function(e,t,i,r){var d="";do i||e--,d=r(e)+d,e/=t;while(e*t>=t);return d},rc=function(e,t,i,r,d){var f=i-t+1;return(e<0?"-":"")+(EF(Math.abs(e),f,r,function(v){return ic(Math.floor(v%f)+t)})+d)},Gm=function(e,t,i){i===void 0&&(i=". ");var r=t.length;return EF(Math.abs(e),r,!1,function(d){return t[Math.floor(d%r)]})+i},B_=1,kp=2,Pp=4,Bv=8,Vf=function(e,t,i,r,d,f){if(e<-9999||e>9999)return Tv(e,4,d.length>0);var v=Math.abs(e),h=d;if(v===0)return t[0]+h;for(var s=0;v>0&&s<=4;s++){var U=v%10;U===0&&Nc(f,B_)&&h!==""?h=t[U]+h:U>1||U===1&&s===0||U===1&&s===1&&Nc(f,kp)||U===1&&s===1&&Nc(f,Pp)&&e>100||U===1&&s>1&&Nc(f,Bv)?h=t[U]+(s>0?i[s-1]:"")+h:U===1&&s>0&&(h=i[s-1]+h),v=Math.floor(v/10)}return(e<0?r:"")+h},SF="十百千萬",IF="拾佰仟萬",MF="マイナス",QB="마이너스",Tv=function(e,t,i){var r=i?". ":"",d=i?"、":"",f=i?", ":"",v=i?" ":"";switch(t){case 0:return"•"+v;case 1:return"◦"+v;case 2:return"◾"+v;case 5:var h=rc(e,48,57,!0,r);return h.length<4?"0"+h:h;case 4:return Gm(e,"〇一二三四五六七八九",d);case 6:return C_(e,1,3999,BF,3,r).toLowerCase();case 7:return C_(e,1,3999,BF,3,r);case 8:return rc(e,945,969,!1,r);case 9:return rc(e,97,122,!1,r);case 10:return rc(e,65,90,!1,r);case 11:return rc(e,1632,1641,!0,r);case 12:case 49:return C_(e,1,9999,TF,3,r);case 35:return C_(e,1,9999,TF,3,r).toLowerCase();case 13:return rc(e,2534,2543,!0,r);case 14:case 30:return rc(e,6112,6121,!0,r);case 15:return Gm(e,"子丑寅卯辰巳午未申酉戌亥",d);case 16:return Gm(e,"甲乙丙丁戊己庚辛壬癸",d);case 17:case 48:return Vf(e,"零一二三四五六七八九",SF,"負",d,kp|Pp|Bv);case 47:return Vf(e,"零壹貳參肆伍陸柒捌玖",IF,"負",d,B_|kp|Pp|Bv);case 42:return Vf(e,"零一二三四五六七八九",SF,"负",d,kp|Pp|Bv);case 41:return Vf(e,"零壹贰叁肆伍陆柒捌玖",IF,"负",d,B_|kp|Pp|Bv);case 26:return Vf(e,"〇一二三四五六七八九","十百千万",MF,d,0);case 25:return Vf(e,"零壱弐参四伍六七八九","拾百千万",MF,d,B_|kp|Pp);case 31:return Vf(e,"영일이삼사오육칠팔구","십백천만",QB,f,B_|kp|Pp);case 33:return Vf(e,"零一二三四五六七八九","十百千萬",QB,f,0);case 32:return Vf(e,"零壹貳參四五六七八九","拾百千",QB,f,B_|kp|Pp);case 18:return rc(e,2406,2415,!0,r);case 20:return C_(e,1,19999,CK,3,r);case 21:return rc(e,2790,2799,!0,r);case 22:return rc(e,2662,2671,!0,r);case 22:return C_(e,1,10999,wK,3,r);case 23:return Gm(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Gm(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return rc(e,3302,3311,!0,r);case 28:return Gm(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",d);case 29:return Gm(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",d);case 34:return rc(e,3792,3801,!0,r);case 37:return rc(e,6160,6169,!0,r);case 38:return rc(e,4160,4169,!0,r);case 39:return rc(e,2918,2927,!0,r);case 40:return rc(e,1776,1785,!0,r);case 43:return rc(e,3046,3055,!0,r);case 44:return rc(e,3174,3183,!0,r);case 45:return rc(e,3664,3673,!0,r);case 46:return rc(e,3872,3881,!0,r);case 3:default:return rc(e,48,57,!0,r)}},LF="data-html2canvas-ignore",kF=function(){function e(t,i,r){if(this.context=t,this.options=r,this.scrolledElements=[],this.referenceElement=i,this.counters=new bK,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,i){var r=this,d=BK(t,i);if(!d.contentWindow)return Promise.reject("Unable to find iframe window");var f=t.defaultView.pageXOffset,v=t.defaultView.pageYOffset,h=d.contentWindow,s=h.document,U=SK(d).then(function(){return Mh(r,void 0,void 0,function(){var $,V;return ih(this,function(q){switch(q.label){case 0:return this.scrolledElements.forEach(kK),h&&(h.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(h.scrollY!==i.top||h.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(h.scrollX-i.left,h.scrollY-i.top,0,0))),$=this.options.onclone,V=this.clonedReferenceElement,typeof V>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:s.fonts&&s.fonts.ready?[4,s.fonts.ready]:[3,2];case 1:q.sent(),q.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,EK(s)]:[3,4];case 3:q.sent(),q.label=4;case 4:return typeof $=="function"?[2,Promise.resolve().then(function(){return $(s,V)}).then(function(){return d})]:[2,d]}})})});return s.open(),s.write(MK(document.doctype)+"<html></html>"),LK(this.referenceElement.ownerDocument,f,v),s.replaceChild(s.adoptNode(this.documentElement),s.documentElement),s.close(),U},e.prototype.createElementClone=function(t){if(CB(t,2))debugger;if(yF(t))return this.createCanvasClone(t);if(vF(t))return this.createVideoClone(t);if(bF(t))return this.createStyleClone(t);var i=t.cloneNode(!1);return NB(i)&&(NB(t)&&t.currentSrc&&t.currentSrc!==t.src&&(i.src=t.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),CF(i)?this.createCustomElementClone(i):i},e.prototype.createCustomElementClone=function(t){var i=document.createElement("html2canvascustomelement");return $B(t.style,i),i},e.prototype.createStyleClone=function(t){try{var i=t.sheet;if(i&&i.cssRules){var r=[].slice.call(i.cssRules,0).reduce(function(f,v){return v&&typeof v.cssText=="string"?f+v.cssText:f},""),d=t.cloneNode(!1);return d.textContent=r,d}}catch(f){if(this.context.logger.error("Unable to access cssRules property",f),f.name!=="SecurityError")throw f}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var i;if(this.options.inlineImages&&t.ownerDocument){var r=t.ownerDocument.createElement("img");try{return r.src=t.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var d=t.cloneNode(!1);try{d.width=t.width,d.height=t.height;var f=t.getContext("2d"),v=d.getContext("2d");if(v)if(!this.options.allowTaint&&f)v.putImageData(f.getImageData(0,0,t.width,t.height),0,0);else{var h=(i=t.getContext("webgl2"))!==null&&i!==void 0?i:t.getContext("webgl");if(h){var s=h.getContextAttributes();(s==null?void 0:s.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}v.drawImage(t,0,0)}return d}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return d},e.prototype.createVideoClone=function(t){var i=t.ownerDocument.createElement("canvas");i.width=t.offsetWidth,i.height=t.offsetHeight;var r=i.getContext("2d");try{return r&&(r.drawImage(t,0,0,i.width,i.height),this.options.allowTaint||r.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var d=t.ownerDocument.createElement("canvas");return d.width=t.offsetWidth,d.height=t.offsetHeight,d},e.prototype.appendChildNode=function(t,i,r){(!w_(i)||!xK(i)&&!i.hasAttribute(LF)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!w_(i)||!bF(i))&&t.appendChild(this.cloneNode(i,r))},e.prototype.cloneChildNodes=function(t,i,r){for(var d=this,f=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;f;f=f.nextSibling)if(w_(f)&&wF(f)&&typeof f.assignedNodes=="function"){var v=f.assignedNodes();v.length&&v.forEach(function(h){return d.appendChildNode(i,h,r)})}else this.appendChildNode(i,f,r)},e.prototype.cloneNode=function(t,i){if(gF(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var r=t.ownerDocument.defaultView;if(r&&w_(t)&&(RB(t)||jb(t))){var d=this.createElementClone(t);d.style.transitionProperty="none";var f=r.getComputedStyle(t),v=r.getComputedStyle(t,":before"),h=r.getComputedStyle(t,":after");this.referenceElement===t&&RB(d)&&(this.clonedReferenceElement=d),OB(d)&&DK(d);var s=this.counters.parse(new GP(this.context,f)),U=this.resolvePseudoContent(t,d,v,Ev.BEFORE);CF(t)&&(i=!0),vF(t)||this.cloneChildNodes(t,d,i),U&&d.insertBefore(U,d.firstChild);var $=this.resolvePseudoContent(t,d,h,Ev.AFTER);return $&&d.appendChild($),this.counters.pop(s),(f&&(this.options.copyStyles||jb(t))&&!xF(t)||i)&&$B(f,d),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([d,t.scrollLeft,t.scrollTop]),(Hb(t)||Vb(t))&&(Hb(d)||Vb(d))&&(d.value=t.value),d}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,i,r,d){var f=this;if(r){var v=r.content,h=i.ownerDocument;if(!(!h||!v||v==="none"||v==="-moz-alt-content"||r.display==="none")){this.counters.parse(new GP(this.context,r));var s=new gW(this.context,r),U=h.createElement("html2canvaspseudoelement");$B(r,U),s.content.forEach(function(V){if(V.type===0)U.appendChild(h.createTextNode(V.value));else if(V.type===22){var q=h.createElement("img");q.src=V.value,q.style.opacity="1",U.appendChild(q)}else if(V.type===18){if(V.name==="attr"){var te=V.values.filter(ga);te.length&&U.appendChild(h.createTextNode(t.getAttribute(te[0].value)||""))}else if(V.name==="counter"){var he=V.values.filter(x_),Ae=he[0],De=he[1];if(Ae&&ga(Ae)){var ke=f.counters.getCounterValue(Ae.value),xe=De&&ga(De)?wB.parse(f.context,De.value):3;U.appendChild(h.createTextNode(Tv(ke,xe,!1)))}}else if(V.name==="counters"){var Te=V.values.filter(x_),Ae=Te[0],Ee=Te[1],De=Te[2];if(Ae&&ga(Ae)){var Fe=f.counters.getCounterValues(Ae.value),Se=De&&ga(De)?wB.parse(f.context,De.value):3,nt=Ee&&Ee.type===0?Ee.value:"",xt=Fe.map(function(qt){return Tv(qt,Se,!1)}).join(nt);U.appendChild(h.createTextNode(xt))}}}else if(V.type===20)switch(V.value){case"open-quote":U.appendChild(h.createTextNode(VP(s.quotes,f.quoteDepth++,!0)));break;case"close-quote":U.appendChild(h.createTextNode(VP(s.quotes,--f.quoteDepth,!1)));break;default:U.appendChild(h.createTextNode(V.value))}}),U.className=jB+" "+HB;var $=d===Ev.BEFORE?" "+jB:" "+HB;return jb(i)?i.className.baseValue+=$:i.className+=$,U}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),Ev;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Ev||(Ev={}));var BK=function(e,t){var i=e.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=t.width.toString(),i.height=t.height.toString(),i.scrolling="no",i.setAttribute(LF,"true"),e.body.appendChild(i),i},TK=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},EK=function(e){return Promise.all([].slice.call(e.images,0).map(TK))},SK=function(e){return new Promise(function(t,i){var r=e.contentWindow;if(!r)return i("No window assigned for iframe");var d=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var f=setInterval(function(){d.body.childNodes.length>0&&d.readyState==="complete"&&(clearInterval(f),t(e))},50)}})},IK=["all","d","content"],$B=function(e,t){for(var i=e.length-1;i>=0;i--){var r=e.item(i);IK.indexOf(r)===-1&&t.style.setProperty(r,e.getPropertyValue(r))}return t},MK=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},LK=function(e,t,i){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||i!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,i)},kK=function(e){var t=e[0],i=e[1],r=e[2];t.scrollLeft=i,t.scrollTop=r},PK=":before",FK=":after",jB="___html2canvas___pseudoelement_before",HB="___html2canvas___pseudoelement_after",PF=`{
    content: "" !important;
    display: none !important;
}`,DK=function(e){UK(e,"."+jB+PK+PF+`
         .`+HB+FK+PF)},UK=function(e,t){var i=e.ownerDocument;if(i){var r=i.createElement("style");r.textContent=t,e.appendChild(r)}},FF=function(){function e(){}return e.getOrigin=function(t){var i=e._link;return i?(i.href=t,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),zK=function(){function e(t,i){this.context=t,this._options=i,this._cache={}}return e.prototype.addImage=function(t){var i=Promise.resolve();return this.has(t)||(GB(t)||QK(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),i},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Mh(this,void 0,void 0,function(){var i,r,d,f,v=this;return ih(this,function(h){switch(h.label){case 0:return i=FF.isSameOrigin(t),r=!VB(t)&&this._options.useCORS===!0&&Du.SUPPORT_CORS_IMAGES&&!i,d=!VB(t)&&!i&&!GB(t)&&typeof this._options.proxy=="string"&&Du.SUPPORT_CORS_XHR&&!r,!i&&this._options.allowTaint===!1&&!VB(t)&&!GB(t)&&!d&&!r?[2]:(f=t,d?[4,this.proxy(f)]:[3,2]);case 1:f=h.sent(),h.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(s,U){var $=new Image;$.onload=function(){return s($)},$.onerror=U,($K(f)||r)&&($.crossOrigin="anonymous"),$.src=f,$.complete===!0&&setTimeout(function(){return s($)},500),v._options.imageTimeout>0&&setTimeout(function(){return U("Timed out ("+v._options.imageTimeout+"ms) loading image")},v._options.imageTimeout)})];case 3:return[2,h.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var i=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var d=t.substring(0,256);return new Promise(function(f,v){var h=Du.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(s.status===200)if(h==="text")f(s.response);else{var V=new FileReader;V.addEventListener("load",function(){return f(V.result)},!1),V.addEventListener("error",function(q){return v(q)},!1),V.readAsDataURL(s.response)}else v("Failed to proxy resource "+d+" with status code "+s.status)},s.onerror=v;var U=r.indexOf("?")>-1?"&":"?";if(s.open("GET",""+r+U+"url="+encodeURIComponent(t)+"&responseType="+h),h!=="text"&&s instanceof XMLHttpRequest&&(s.responseType=h),i._options.imageTimeout){var $=i._options.imageTimeout;s.timeout=$,s.ontimeout=function(){return v("Timed out ("+$+"ms) proxying "+d)}}s.send()})},e}(),RK=/^data:image\/svg\+xml/i,OK=/^data:image\/.*;base64,/i,NK=/^data:image\/.*/i,QK=function(e){return Du.SUPPORT_SVG_DRAWING||!jK(e)},VB=function(e){return NK.test(e)},$K=function(e){return OK.test(e)},GB=function(e){return e.substr(0,4)==="blob"},jK=function(e){return e.substr(-3).toLowerCase()==="svg"||RK.test(e)},lr=function(){function e(t,i){this.type=0,this.x=t,this.y=i}return e.prototype.add=function(t,i){return new e(this.x+t,this.y+i)},e}(),T_=function(e,t,i){return new lr(e.x+(t.x-e.x)*i,e.y+(t.y-e.y)*i)},Gb=function(){function e(t,i,r,d){this.type=1,this.start=t,this.startControl=i,this.endControl=r,this.end=d}return e.prototype.subdivide=function(t,i){var r=T_(this.start,this.startControl,t),d=T_(this.startControl,this.endControl,t),f=T_(this.endControl,this.end,t),v=T_(r,d,t),h=T_(d,f,t),s=T_(v,h,t);return i?new e(this.start,r,v,s):new e(s,h,f,this.end)},e.prototype.add=function(t,i){return new e(this.start.add(t,i),this.startControl.add(t,i),this.endControl.add(t,i),this.end.add(t,i))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Kd=function(e){return e.type===1},HK=function(){function e(t){var i=t.styles,r=t.bounds,d=vv(i.borderTopLeftRadius,r.width,r.height),f=d[0],v=d[1],h=vv(i.borderTopRightRadius,r.width,r.height),s=h[0],U=h[1],$=vv(i.borderBottomRightRadius,r.width,r.height),V=$[0],q=$[1],te=vv(i.borderBottomLeftRadius,r.width,r.height),he=te[0],Ae=te[1],De=[];De.push((f+s)/r.width),De.push((he+V)/r.width),De.push((v+Ae)/r.height),De.push((U+q)/r.height);var ke=Math.max.apply(Math,De);ke>1&&(f/=ke,v/=ke,s/=ke,U/=ke,V/=ke,q/=ke,he/=ke,Ae/=ke);var xe=r.width-s,Te=r.height-q,Ee=r.width-V,Fe=r.height-Ae,Se=i.borderTopWidth,nt=i.borderRightWidth,xt=i.borderBottomWidth,Bt=i.borderLeftWidth,Xe=Pa(i.paddingTop,t.bounds.width),qt=Pa(i.paddingRight,t.bounds.width),rn=Pa(i.paddingBottom,t.bounds.width),Ut=Pa(i.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=f>0||v>0?ol(r.left+Bt/3,r.top+Se/3,f-Bt/3,v-Se/3,na.TOP_LEFT):new lr(r.left+Bt/3,r.top+Se/3),this.topRightBorderDoubleOuterBox=f>0||v>0?ol(r.left+xe,r.top+Se/3,s-nt/3,U-Se/3,na.TOP_RIGHT):new lr(r.left+r.width-nt/3,r.top+Se/3),this.bottomRightBorderDoubleOuterBox=V>0||q>0?ol(r.left+Ee,r.top+Te,V-nt/3,q-xt/3,na.BOTTOM_RIGHT):new lr(r.left+r.width-nt/3,r.top+r.height-xt/3),this.bottomLeftBorderDoubleOuterBox=he>0||Ae>0?ol(r.left+Bt/3,r.top+Fe,he-Bt/3,Ae-xt/3,na.BOTTOM_LEFT):new lr(r.left+Bt/3,r.top+r.height-xt/3),this.topLeftBorderDoubleInnerBox=f>0||v>0?ol(r.left+Bt*2/3,r.top+Se*2/3,f-Bt*2/3,v-Se*2/3,na.TOP_LEFT):new lr(r.left+Bt*2/3,r.top+Se*2/3),this.topRightBorderDoubleInnerBox=f>0||v>0?ol(r.left+xe,r.top+Se*2/3,s-nt*2/3,U-Se*2/3,na.TOP_RIGHT):new lr(r.left+r.width-nt*2/3,r.top+Se*2/3),this.bottomRightBorderDoubleInnerBox=V>0||q>0?ol(r.left+Ee,r.top+Te,V-nt*2/3,q-xt*2/3,na.BOTTOM_RIGHT):new lr(r.left+r.width-nt*2/3,r.top+r.height-xt*2/3),this.bottomLeftBorderDoubleInnerBox=he>0||Ae>0?ol(r.left+Bt*2/3,r.top+Fe,he-Bt*2/3,Ae-xt*2/3,na.BOTTOM_LEFT):new lr(r.left+Bt*2/3,r.top+r.height-xt*2/3),this.topLeftBorderStroke=f>0||v>0?ol(r.left+Bt/2,r.top+Se/2,f-Bt/2,v-Se/2,na.TOP_LEFT):new lr(r.left+Bt/2,r.top+Se/2),this.topRightBorderStroke=f>0||v>0?ol(r.left+xe,r.top+Se/2,s-nt/2,U-Se/2,na.TOP_RIGHT):new lr(r.left+r.width-nt/2,r.top+Se/2),this.bottomRightBorderStroke=V>0||q>0?ol(r.left+Ee,r.top+Te,V-nt/2,q-xt/2,na.BOTTOM_RIGHT):new lr(r.left+r.width-nt/2,r.top+r.height-xt/2),this.bottomLeftBorderStroke=he>0||Ae>0?ol(r.left+Bt/2,r.top+Fe,he-Bt/2,Ae-xt/2,na.BOTTOM_LEFT):new lr(r.left+Bt/2,r.top+r.height-xt/2),this.topLeftBorderBox=f>0||v>0?ol(r.left,r.top,f,v,na.TOP_LEFT):new lr(r.left,r.top),this.topRightBorderBox=s>0||U>0?ol(r.left+xe,r.top,s,U,na.TOP_RIGHT):new lr(r.left+r.width,r.top),this.bottomRightBorderBox=V>0||q>0?ol(r.left+Ee,r.top+Te,V,q,na.BOTTOM_RIGHT):new lr(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=he>0||Ae>0?ol(r.left,r.top+Fe,he,Ae,na.BOTTOM_LEFT):new lr(r.left,r.top+r.height),this.topLeftPaddingBox=f>0||v>0?ol(r.left+Bt,r.top+Se,Math.max(0,f-Bt),Math.max(0,v-Se),na.TOP_LEFT):new lr(r.left+Bt,r.top+Se),this.topRightPaddingBox=s>0||U>0?ol(r.left+Math.min(xe,r.width-nt),r.top+Se,xe>r.width+nt?0:Math.max(0,s-nt),Math.max(0,U-Se),na.TOP_RIGHT):new lr(r.left+r.width-nt,r.top+Se),this.bottomRightPaddingBox=V>0||q>0?ol(r.left+Math.min(Ee,r.width-Bt),r.top+Math.min(Te,r.height-xt),Math.max(0,V-nt),Math.max(0,q-xt),na.BOTTOM_RIGHT):new lr(r.left+r.width-nt,r.top+r.height-xt),this.bottomLeftPaddingBox=he>0||Ae>0?ol(r.left+Bt,r.top+Math.min(Fe,r.height-xt),Math.max(0,he-Bt),Math.max(0,Ae-xt),na.BOTTOM_LEFT):new lr(r.left+Bt,r.top+r.height-xt),this.topLeftContentBox=f>0||v>0?ol(r.left+Bt+Ut,r.top+Se+Xe,Math.max(0,f-(Bt+Ut)),Math.max(0,v-(Se+Xe)),na.TOP_LEFT):new lr(r.left+Bt+Ut,r.top+Se+Xe),this.topRightContentBox=s>0||U>0?ol(r.left+Math.min(xe,r.width+Bt+Ut),r.top+Se+Xe,xe>r.width+Bt+Ut?0:s-Bt+Ut,U-(Se+Xe),na.TOP_RIGHT):new lr(r.left+r.width-(nt+qt),r.top+Se+Xe),this.bottomRightContentBox=V>0||q>0?ol(r.left+Math.min(Ee,r.width-(Bt+Ut)),r.top+Math.min(Te,r.height+Se+Xe),Math.max(0,V-(nt+qt)),q-(xt+rn),na.BOTTOM_RIGHT):new lr(r.left+r.width-(nt+qt),r.top+r.height-(xt+rn)),this.bottomLeftContentBox=he>0||Ae>0?ol(r.left+Bt+Ut,r.top+Fe,Math.max(0,he-(Bt+Ut)),Ae-(xt+rn),na.BOTTOM_LEFT):new lr(r.left+Bt+Ut,r.top+r.height-(xt+rn))}return e}(),na;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(na||(na={}));var ol=function(e,t,i,r,d){var f=4*((Math.sqrt(2)-1)/3),v=i*f,h=r*f,s=e+i,U=t+r;switch(d){case na.TOP_LEFT:return new Gb(new lr(e,U),new lr(e,U-h),new lr(s-v,t),new lr(s,t));case na.TOP_RIGHT:return new Gb(new lr(e,t),new lr(e+v,t),new lr(s,U-h),new lr(s,U));case na.BOTTOM_RIGHT:return new Gb(new lr(s,t),new lr(s,t+h),new lr(e+v,U),new lr(e,U));case na.BOTTOM_LEFT:default:return new Gb(new lr(s,U),new lr(s-v,U),new lr(e,t+h),new lr(e,t))}},Wb=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},VK=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Kb=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},GK=function(){function e(t,i,r){this.offsetX=t,this.offsetY=i,this.matrix=r,this.type=0,this.target=6}return e}(),Zb=function(){function e(t,i){this.path=t,this.target=i,this.type=1}return e}(),WK=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),KK=function(e){return e.type===0},DF=function(e){return e.type===1},ZK=function(e){return e.type===2},UF=function(e,t){return e.length===t.length?e.some(function(i,r){return i===t[r]}):!1},qK=function(e,t,i,r,d){return e.map(function(f,v){switch(v){case 0:return f.add(t,i);case 1:return f.add(t+r,i);case 2:return f.add(t+r,i+d);case 3:return f.add(t,i+d)}return f})},zF=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),RF=function(){function e(t,i){if(this.container=t,this.parent=i,this.effects=[],this.curves=new HK(this.container),this.container.styles.opacity<1&&this.effects.push(new WK(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,d=this.container.bounds.top+this.container.styles.transformOrigin[1].number,f=this.container.styles.transform;this.effects.push(new GK(r,d,f))}if(this.container.styles.overflowX!==0){var v=Wb(this.curves),h=Kb(this.curves);UF(v,h)?this.effects.push(new Zb(v,6)):(this.effects.push(new Zb(v,2)),this.effects.push(new Zb(h,4)))}}return e.prototype.getEffects=function(t){for(var i=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,d=this.effects.slice(0);r;){var f=r.effects.filter(function(s){return!DF(s)});if(i||r.container.styles.position!==0||!r.parent){if(d.unshift.apply(d,f),i=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var v=Wb(r.curves),h=Kb(r.curves);UF(v,h)||d.unshift(new Zb(h,6))}}else d.unshift.apply(d,f);r=r.parent}return d.filter(function(s){return Nc(s.target,t)})},e}(),WB=function(e,t,i,r){e.container.elements.forEach(function(d){var f=Nc(d.flags,4),v=Nc(d.flags,2),h=new RF(d,e);Nc(d.styles.display,2048)&&r.push(h);var s=Nc(d.flags,8)?[]:r;if(f||v){var U=f||d.styles.isPositioned()?i:t,$=new zF(h);if(d.styles.isPositioned()||d.styles.opacity<1||d.styles.isTransformed()){var V=d.styles.zIndex.order;if(V<0){var q=0;U.negativeZIndex.some(function(he,Ae){return V>he.element.container.styles.zIndex.order?(q=Ae,!1):q>0}),U.negativeZIndex.splice(q,0,$)}else if(V>0){var te=0;U.positiveZIndex.some(function(he,Ae){return V>=he.element.container.styles.zIndex.order?(te=Ae+1,!1):te>0}),U.positiveZIndex.splice(te,0,$)}else U.zeroOrAutoZIndexOrTransformedOrOpacity.push($)}else d.styles.isFloating()?U.nonPositionedFloats.push($):U.nonPositionedInlineLevel.push($);WB(h,$,f?$:i,s)}else d.styles.isInlineLevel()?t.inlineLevel.push(h):t.nonInlineLevel.push(h),WB(h,t,i,s);Nc(d.flags,8)&&OF(d,s)})},OF=function(e,t){for(var i=e instanceof UB?e.start:1,r=e instanceof UB?e.reversed:!1,d=0;d<t.length;d++){var f=t[d];f.container instanceof uF&&typeof f.container.value=="number"&&f.container.value!==0&&(i=f.container.value),f.listValue=Tv(i,f.container.styles.listStyleType,!0),i+=r?-1:1}},XK=function(e){var t=new RF(e,null),i=new zF(t),r=[];return WB(t,i,i,r),OF(t.container,r),i},NF=function(e,t){switch(t){case 0:return Zd(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Zd(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Zd(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Zd(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},YK=function(e,t){switch(t){case 0:return Zd(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Zd(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Zd(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Zd(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},JK=function(e,t){switch(t){case 0:return Zd(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Zd(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Zd(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Zd(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},eZ=function(e,t){switch(t){case 0:return qb(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return qb(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return qb(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return qb(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},qb=function(e,t){var i=[];return Kd(e)?i.push(e.subdivide(.5,!1)):i.push(e),Kd(t)?i.push(t.subdivide(.5,!0)):i.push(t),i},Zd=function(e,t,i,r){var d=[];return Kd(e)?d.push(e.subdivide(.5,!1)):d.push(e),Kd(i)?d.push(i.subdivide(.5,!0)):d.push(i),Kd(r)?d.push(r.subdivide(.5,!0).reverse()):d.push(r),Kd(t)?d.push(t.subdivide(.5,!1).reverse()):d.push(t),d},QF=function(e){var t=e.bounds,i=e.styles;return t.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},Xb=function(e){var t=e.styles,i=e.bounds,r=Pa(t.paddingLeft,i.width),d=Pa(t.paddingRight,i.width),f=Pa(t.paddingTop,i.width),v=Pa(t.paddingBottom,i.width);return i.add(r+t.borderLeftWidth,f+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+d),-(t.borderTopWidth+t.borderBottomWidth+f+v))},tZ=function(e,t){return e===0?t.bounds:e===2?Xb(t):QF(t)},nZ=function(e,t){return e===0?t.bounds:e===2?Xb(t):QF(t)},KB=function(e,t,i){var r=tZ(S_(e.styles.backgroundOrigin,t),e),d=nZ(S_(e.styles.backgroundClip,t),e),f=iZ(S_(e.styles.backgroundSize,t),i,r),v=f[0],h=f[1],s=vv(S_(e.styles.backgroundPosition,t),r.width-v,r.height-h),U=rZ(S_(e.styles.backgroundRepeat,t),s,f,r,d),$=Math.round(r.left+s[0]),V=Math.round(r.top+s[1]);return[U,$,V,v,h]},E_=function(e){return ga(e)&&e.value===b_.AUTO},Yb=function(e){return typeof e=="number"},iZ=function(e,t,i){var r=t[0],d=t[1],f=t[2],v=e[0],h=e[1];if(!v)return[0,0];if(vc(v)&&h&&vc(h))return[Pa(v,i.width),Pa(h,i.height)];var s=Yb(f);if(ga(v)&&(v.value===b_.CONTAIN||v.value===b_.COVER)){if(Yb(f)){var U=i.width/i.height;return U<f!=(v.value===b_.COVER)?[i.width,i.width/f]:[i.height*f,i.height]}return[i.width,i.height]}var $=Yb(r),V=Yb(d),q=$||V;if(E_(v)&&(!h||E_(h))){if($&&V)return[r,d];if(!s&&!q)return[i.width,i.height];if(q&&s){var te=$?r:d*f,he=V?d:r/f;return[te,he]}var Ae=$?r:i.width,De=V?d:i.height;return[Ae,De]}if(s){var ke=0,xe=0;return vc(v)?ke=Pa(v,i.width):vc(h)&&(xe=Pa(h,i.height)),E_(v)?ke=xe*f:(!h||E_(h))&&(xe=ke/f),[ke,xe]}var Te=null,Ee=null;if(vc(v)?Te=Pa(v,i.width):h&&vc(h)&&(Ee=Pa(h,i.height)),Te!==null&&(!h||E_(h))&&(Ee=$&&V?Te/r*d:i.height),Ee!==null&&E_(v)&&(Te=$&&V?Ee/d*r:i.width),Te!==null&&Ee!==null)return[Te,Ee];throw new Error("Unable to calculate background-size for element")},S_=function(e,t){var i=e[t];return typeof i>"u"?e[0]:i},rZ=function(e,t,i,r,d){var f=t[0],v=t[1],h=i[0],s=i[1];switch(e){case 2:return[new lr(Math.round(r.left),Math.round(r.top+v)),new lr(Math.round(r.left+r.width),Math.round(r.top+v)),new lr(Math.round(r.left+r.width),Math.round(s+r.top+v)),new lr(Math.round(r.left),Math.round(s+r.top+v))];case 3:return[new lr(Math.round(r.left+f),Math.round(r.top)),new lr(Math.round(r.left+f+h),Math.round(r.top)),new lr(Math.round(r.left+f+h),Math.round(r.height+r.top)),new lr(Math.round(r.left+f),Math.round(r.height+r.top))];case 1:return[new lr(Math.round(r.left+f),Math.round(r.top+v)),new lr(Math.round(r.left+f+h),Math.round(r.top+v)),new lr(Math.round(r.left+f+h),Math.round(r.top+v+s)),new lr(Math.round(r.left+f),Math.round(r.top+v+s))];default:return[new lr(Math.round(d.left),Math.round(d.top)),new lr(Math.round(d.left+d.width),Math.round(d.top)),new lr(Math.round(d.left+d.width),Math.round(d.height+d.top)),new lr(Math.round(d.left),Math.round(d.height+d.top))]}},oZ="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",$F="Hidden Text",sZ=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,i){var r=this._document.createElement("div"),d=this._document.createElement("img"),f=this._document.createElement("span"),v=this._document.body;r.style.visibility="hidden",r.style.fontFamily=t,r.style.fontSize=i,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",v.appendChild(r),d.src=oZ,d.width=1,d.height=1,d.style.margin="0",d.style.padding="0",d.style.verticalAlign="baseline",f.style.fontFamily=t,f.style.fontSize=i,f.style.margin="0",f.style.padding="0",f.appendChild(this._document.createTextNode($F)),r.appendChild(f),r.appendChild(d);var h=d.offsetTop-f.offsetTop+2;r.removeChild(f),r.appendChild(this._document.createTextNode($F)),r.style.lineHeight="normal",d.style.verticalAlign="super";var s=d.offsetTop-r.offsetTop+2;return v.removeChild(r),{baseline:h,middle:s}},e.prototype.getMetrics=function(t,i){var r=t+" "+i;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(t,i)),this._data[r]},e}(),jF=function(){function e(t,i){this.context=t,this.options=i}return e}(),aZ=1e4,lZ=function(e){wA(t,e);function t(i,r){var d=e.call(this,i,r)||this;return d._activeEffects=[],d.canvas=r.canvas?r.canvas:document.createElement("canvas"),d.ctx=d.canvas.getContext("2d"),r.canvas||(d.canvas.width=Math.floor(r.width*r.scale),d.canvas.height=Math.floor(r.height*r.scale),d.canvas.style.width=r.width+"px",d.canvas.style.height=r.height+"px"),d.fontMetrics=new sZ(document),d.ctx.scale(d.options.scale,d.options.scale),d.ctx.translate(-r.x,-r.y),d.ctx.textBaseline="bottom",d._activeEffects=[],d.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),d}return t.prototype.applyEffects=function(i){for(var r=this;this._activeEffects.length;)this.popEffect();i.forEach(function(d){return r.applyEffect(d)})},t.prototype.applyEffect=function(i){this.ctx.save(),ZK(i)&&(this.ctx.globalAlpha=i.opacity),KK(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),DF(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(i){return Mh(this,void 0,void 0,function(){var r;return ih(this,function(d){switch(d.label){case 0:return r=i.element.container.styles,r.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:d.sent(),d.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(i){return Mh(this,void 0,void 0,function(){return ih(this,function(r){switch(r.label){case 0:if(Nc(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(i)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(i,r,d){var f=this;if(r===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+d);else{var v=DB(i.text);v.reduce(function(h,s){return f.ctx.fillText(s,h,i.bounds.top+d),h+f.ctx.measureText(s).width},i.bounds.left)}},t.prototype.createFontStyle=function(i){var r=i.fontVariant.filter(function(v){return v==="normal"||v==="small-caps"}).join(""),d=AZ(i.fontFamily).join(", "),f=yv(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,r,i.fontWeight,f,d].join(" "),d,f]},t.prototype.renderTextNode=function(i,r){return Mh(this,void 0,void 0,function(){var d,f,v,h,s,U,$,V,q=this;return ih(this,function(te){return d=this.createFontStyle(r),f=d[0],v=d[1],h=d[2],this.ctx.font=f,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=this.fontMetrics.getMetrics(v,h),U=s.baseline,$=s.middle,V=r.paintOrder,i.textBounds.forEach(function(he){V.forEach(function(Ae){switch(Ae){case 0:q.ctx.fillStyle=Au(r.color),q.renderTextWithLetterSpacing(he,r.letterSpacing,U);var De=r.textShadow;De.length&&he.text.trim().length&&(De.slice(0).reverse().forEach(function(ke){q.ctx.shadowColor=Au(ke.color),q.ctx.shadowOffsetX=ke.offsetX.number*q.options.scale,q.ctx.shadowOffsetY=ke.offsetY.number*q.options.scale,q.ctx.shadowBlur=ke.blur.number,q.renderTextWithLetterSpacing(he,r.letterSpacing,U)}),q.ctx.shadowColor="",q.ctx.shadowOffsetX=0,q.ctx.shadowOffsetY=0,q.ctx.shadowBlur=0),r.textDecorationLine.length&&(q.ctx.fillStyle=Au(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(ke){switch(ke){case 1:q.ctx.fillRect(he.bounds.left,Math.round(he.bounds.top+U),he.bounds.width,1);break;case 2:q.ctx.fillRect(he.bounds.left,Math.round(he.bounds.top),he.bounds.width,1);break;case 3:q.ctx.fillRect(he.bounds.left,Math.ceil(he.bounds.top+$),he.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&he.text.trim().length&&(q.ctx.strokeStyle=Au(r.webkitTextStrokeColor),q.ctx.lineWidth=r.webkitTextStrokeWidth,q.ctx.lineJoin=window.chrome?"miter":"round",q.ctx.strokeText(he.text,he.bounds.left,he.bounds.top+U)),q.ctx.strokeStyle="",q.ctx.lineWidth=0,q.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(i,r,d){if(d&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var f=Xb(i),v=Kb(r);this.path(v),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(d,0,0,i.intrinsicWidth,i.intrinsicHeight,f.left,f.top,f.width,f.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(i){return Mh(this,void 0,void 0,function(){var r,d,f,v,h,s,xe,xe,U,$,V,q,Ee,te,he,Fe,Ae,De,ke,xe,Te,Ee,Fe;return ih(this,function(Se){switch(Se.label){case 0:this.applyEffects(i.getEffects(4)),r=i.container,d=i.curves,f=r.styles,v=0,h=r.textNodes,Se.label=1;case 1:return v<h.length?(s=h[v],[4,this.renderTextNode(s,f)]):[3,4];case 2:Se.sent(),Se.label=3;case 3:return v++,[3,1];case 4:if(!(r instanceof aF))return[3,8];Se.label=5;case 5:return Se.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return xe=Se.sent(),this.renderReplacedElement(r,d,xe),[3,8];case 7:return Se.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof lF&&this.renderReplacedElement(r,d,r.canvas),!(r instanceof cF))return[3,12];Se.label=9;case 9:return Se.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return xe=Se.sent(),this.renderReplacedElement(r,d,xe),[3,12];case 11:return Se.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof fF&&r.tree?(U=new t(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,U.render(r.tree)]):[3,14];case 13:$=Se.sent(),r.width&&r.height&&this.ctx.drawImage($,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),Se.label=14;case 14:if(r instanceof zB&&(V=Math.min(r.bounds.width,r.bounds.height),r.type===Nb?r.checked&&(this.ctx.save(),this.path([new lr(r.bounds.left+V*.39363,r.bounds.top+V*.79),new lr(r.bounds.left+V*.16,r.bounds.top+V*.5549),new lr(r.bounds.left+V*.27347,r.bounds.top+V*.44071),new lr(r.bounds.left+V*.39694,r.bounds.top+V*.5649),new lr(r.bounds.left+V*.72983,r.bounds.top+V*.23),new lr(r.bounds.left+V*.84,r.bounds.top+V*.34085),new lr(r.bounds.left+V*.39363,r.bounds.top+V*.79)]),this.ctx.fillStyle=Au(hF),this.ctx.fill(),this.ctx.restore()):r.type===Qb&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+V/2,r.bounds.top+V/2,V/4,0,Math.PI*2,!0),this.ctx.fillStyle=Au(hF),this.ctx.fill(),this.ctx.restore())),cZ(r)&&r.value.length){switch(q=this.createFontStyle(f),Ee=q[0],te=q[1],he=this.fontMetrics.getMetrics(Ee,te).baseline,this.ctx.font=Ee,this.ctx.fillStyle=Au(f.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=hZ(r.styles.textAlign),Fe=Xb(r),Ae=0,r.styles.textAlign){case 1:Ae+=Fe.width/2;break;case 2:Ae+=Fe.width;break}De=Fe.add(Ae,0,0,-Fe.height/2+1),this.ctx.save(),this.path([new lr(Fe.left,Fe.top),new lr(Fe.left+Fe.width,Fe.top),new lr(Fe.left+Fe.width,Fe.top+Fe.height),new lr(Fe.left,Fe.top+Fe.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Cv(r.value,De),f.letterSpacing,he),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Nc(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(ke=r.styles.listStyleImage,ke.type!==0)return[3,18];xe=void 0,Te=ke.url,Se.label=15;case 15:return Se.trys.push([15,17,,18]),[4,this.context.cache.match(Te)];case 16:return xe=Se.sent(),this.ctx.drawImage(xe,r.bounds.left-(xe.width+10),r.bounds.top),[3,18];case 17:return Se.sent(),this.context.logger.error("Error loading list-style-image "+Te),[3,18];case 18:return[3,20];case 19:i.listValue&&r.styles.listStyleType!==-1&&(Ee=this.createFontStyle(f)[0],this.ctx.font=Ee,this.ctx.fillStyle=Au(f.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Fe=new $f(r.bounds.left,r.bounds.top+Pa(r.styles.paddingTop,r.bounds.width),r.bounds.width,$P(f.lineHeight,f.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Cv(i.listValue,Fe),f.letterSpacing,$P(f.lineHeight,f.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Se.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(i){return Mh(this,void 0,void 0,function(){var r,d,ke,f,v,ke,h,s,ke,U,$,ke,V,q,ke,te,he,ke,Ae,De,ke;return ih(this,function(xe){switch(xe.label){case 0:if(Nc(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:xe.sent(),r=0,d=i.negativeZIndex,xe.label=2;case 2:return r<d.length?(ke=d[r],[4,this.renderStack(ke)]):[3,5];case 3:xe.sent(),xe.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:xe.sent(),f=0,v=i.nonInlineLevel,xe.label=7;case 7:return f<v.length?(ke=v[f],[4,this.renderNode(ke)]):[3,10];case 8:xe.sent(),xe.label=9;case 9:return f++,[3,7];case 10:h=0,s=i.nonPositionedFloats,xe.label=11;case 11:return h<s.length?(ke=s[h],[4,this.renderStack(ke)]):[3,14];case 12:xe.sent(),xe.label=13;case 13:return h++,[3,11];case 14:U=0,$=i.nonPositionedInlineLevel,xe.label=15;case 15:return U<$.length?(ke=$[U],[4,this.renderStack(ke)]):[3,18];case 16:xe.sent(),xe.label=17;case 17:return U++,[3,15];case 18:V=0,q=i.inlineLevel,xe.label=19;case 19:return V<q.length?(ke=q[V],[4,this.renderNode(ke)]):[3,22];case 20:xe.sent(),xe.label=21;case 21:return V++,[3,19];case 22:te=0,he=i.zeroOrAutoZIndexOrTransformedOrOpacity,xe.label=23;case 23:return te<he.length?(ke=he[te],[4,this.renderStack(ke)]):[3,26];case 24:xe.sent(),xe.label=25;case 25:return te++,[3,23];case 26:Ae=0,De=i.positiveZIndex,xe.label=27;case 27:return Ae<De.length?(ke=De[Ae],[4,this.renderStack(ke)]):[3,30];case 28:xe.sent(),xe.label=29;case 29:return Ae++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},t.prototype.formatPath=function(i){var r=this;i.forEach(function(d,f){var v=Kd(d)?d.start:d;f===0?r.ctx.moveTo(v.x,v.y):r.ctx.lineTo(v.x,v.y),Kd(d)&&r.ctx.bezierCurveTo(d.startControl.x,d.startControl.y,d.endControl.x,d.endControl.y,d.end.x,d.end.y)})},t.prototype.renderRepeat=function(i,r,d,f){this.path(i),this.ctx.fillStyle=r,this.ctx.translate(d,f),this.ctx.fill(),this.ctx.translate(-d,-f)},t.prototype.resizeImage=function(i,r,d){var f;if(i.width===r&&i.height===d)return i;var v=(f=this.canvas.ownerDocument)!==null&&f!==void 0?f:document,h=v.createElement("canvas");h.width=Math.max(1,r),h.height=Math.max(1,d);var s=h.getContext("2d");return s.drawImage(i,0,0,i.width,i.height,0,0,r,d),h},t.prototype.renderBackgroundImage=function(i){return Mh(this,void 0,void 0,function(){var r,d,f,v,h,s;return ih(this,function(U){switch(U.label){case 0:r=i.styles.backgroundImage.length-1,d=function($){var V,q,te,Xe,Gt,Rn,Ut,Kt,xt,he,Xe,Gt,Rn,Ut,Kt,Ae,De,ke,xe,Te,Ee,Fe,Se,nt,xt,Bt,Xe,qt,rn,Ut,Kt,On,Gt,Rn,mn,Cn,Qt,Xn,Wn,Bi,Bn,Hn;return ih(this,function(ei){switch(ei.label){case 0:if($.type!==0)return[3,5];V=void 0,q=$.url,ei.label=1;case 1:return ei.trys.push([1,3,,4]),[4,f.context.cache.match(q)];case 2:return V=ei.sent(),[3,4];case 3:return ei.sent(),f.context.logger.error("Error loading background-image "+q),[3,4];case 4:return V&&(te=KB(i,r,[V.width,V.height,V.width/V.height]),Xe=te[0],Gt=te[1],Rn=te[2],Ut=te[3],Kt=te[4],xt=f.ctx.createPattern(f.resizeImage(V,Ut,Kt),"repeat"),f.renderRepeat(Xe,xt,Gt,Rn)),[3,6];case 5:KG($)?(he=KB(i,r,[null,null,null]),Xe=he[0],Gt=he[1],Rn=he[2],Ut=he[3],Kt=he[4],Ae=jG($.angle,Ut,Kt),De=Ae[0],ke=Ae[1],xe=Ae[2],Te=Ae[3],Ee=Ae[4],Fe=document.createElement("canvas"),Fe.width=Ut,Fe.height=Kt,Se=Fe.getContext("2d"),nt=Se.createLinearGradient(ke,Te,xe,Ee),LP($.stops,De).forEach(function(tr){return nt.addColorStop(tr.stop,Au(tr.color))}),Se.fillStyle=nt,Se.fillRect(0,0,Ut,Kt),Ut>0&&Kt>0&&(xt=f.ctx.createPattern(Fe,"repeat"),f.renderRepeat(Xe,xt,Gt,Rn))):ZG($)&&(Bt=KB(i,r,[null,null,null]),Xe=Bt[0],qt=Bt[1],rn=Bt[2],Ut=Bt[3],Kt=Bt[4],On=$.position.length===0?[vB]:$.position,Gt=Pa(On[0],Ut),Rn=Pa(On[On.length-1],Kt),mn=HG($,Gt,Rn,Ut,Kt),Cn=mn[0],Qt=mn[1],Cn>0&&Qt>0&&(Xn=f.ctx.createRadialGradient(qt+Gt,rn+Rn,0,qt+Gt,rn+Rn,Cn),LP($.stops,Cn*2).forEach(function(tr){return Xn.addColorStop(tr.stop,Au(tr.color))}),f.path(Xe),f.ctx.fillStyle=Xn,Cn!==Qt?(Wn=i.bounds.left+.5*i.bounds.width,Bi=i.bounds.top+.5*i.bounds.height,Bn=Qt/Cn,Hn=1/Bn,f.ctx.save(),f.ctx.translate(Wn,Bi),f.ctx.transform(1,0,0,Bn,0,0),f.ctx.translate(-Wn,-Bi),f.ctx.fillRect(qt,Hn*(rn-Bi)+Bi,Ut,Kt*Hn),f.ctx.restore()):f.ctx.fill())),ei.label=6;case 6:return r--,[2]}})},f=this,v=0,h=i.styles.backgroundImage.slice(0).reverse(),U.label=1;case 1:return v<h.length?(s=h[v],[5,d(s)]):[3,4];case 2:U.sent(),U.label=3;case 3:return v++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(i,r,d){return Mh(this,void 0,void 0,function(){return ih(this,function(f){return this.path(NF(d,r)),this.ctx.fillStyle=Au(i),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(i,r,d,f){return Mh(this,void 0,void 0,function(){var v,h;return ih(this,function(s){switch(s.label){case 0:return r<3?[4,this.renderSolidBorder(i,d,f)]:[3,2];case 1:return s.sent(),[2];case 2:return v=YK(f,d),this.path(v),this.ctx.fillStyle=Au(i),this.ctx.fill(),h=JK(f,d),this.path(h),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(i){return Mh(this,void 0,void 0,function(){var r,d,f,v,h,s,U,$,V=this;return ih(this,function(q){switch(q.label){case 0:return this.applyEffects(i.getEffects(2)),r=i.container.styles,d=!Mp(r.backgroundColor)||r.backgroundImage.length,f=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],v=uZ(S_(r.backgroundClip,0),i.curves),d||r.boxShadow.length?(this.ctx.save(),this.path(v),this.ctx.clip(),Mp(r.backgroundColor)||(this.ctx.fillStyle=Au(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:q.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(te){V.ctx.save();var he=Wb(i.curves),Ae=te.inset?0:aZ,De=qK(he,-Ae+(te.inset?1:-1)*te.spread.number,(te.inset?1:-1)*te.spread.number,te.spread.number*(te.inset?-2:2),te.spread.number*(te.inset?-2:2));te.inset?(V.path(he),V.ctx.clip(),V.mask(De)):(V.mask(he),V.ctx.clip(),V.path(De)),V.ctx.shadowOffsetX=te.offsetX.number+Ae,V.ctx.shadowOffsetY=te.offsetY.number,V.ctx.shadowColor=Au(te.color),V.ctx.shadowBlur=te.blur.number,V.ctx.fillStyle=te.inset?Au(te.color):"rgba(0,0,0,1)",V.ctx.fill(),V.ctx.restore()}),q.label=2;case 2:h=0,s=0,U=f,q.label=3;case 3:return s<U.length?($=U[s],$.style!==0&&!Mp($.color)&&$.width>0?$.style!==2?[3,5]:[4,this.renderDashedDottedBorder($.color,$.width,h,i.curves,2)]:[3,11]):[3,13];case 4:return q.sent(),[3,11];case 5:return $.style!==3?[3,7]:[4,this.renderDashedDottedBorder($.color,$.width,h,i.curves,3)];case 6:return q.sent(),[3,11];case 7:return $.style!==4?[3,9]:[4,this.renderDoubleBorder($.color,$.width,h,i.curves)];case 8:return q.sent(),[3,11];case 9:return[4,this.renderSolidBorder($.color,h,i.curves)];case 10:q.sent(),q.label=11;case 11:h++,q.label=12;case 12:return s++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(i,r,d,f,v){return Mh(this,void 0,void 0,function(){var h,s,U,$,V,q,te,he,Ae,De,ke,xe,Te,Ee,Fe,Se,Fe,Se;return ih(this,function(nt){return this.ctx.save(),h=eZ(f,d),s=NF(f,d),v===2&&(this.path(s),this.ctx.clip()),Kd(s[0])?(U=s[0].start.x,$=s[0].start.y):(U=s[0].x,$=s[0].y),Kd(s[1])?(V=s[1].end.x,q=s[1].end.y):(V=s[1].x,q=s[1].y),d===0||d===2?te=Math.abs(U-V):te=Math.abs($-q),this.ctx.beginPath(),v===3?this.formatPath(h):this.formatPath(s.slice(0,2)),he=r<3?r*3:r*2,Ae=r<3?r*2:r,v===3&&(he=r,Ae=r),De=!0,te<=he*2?De=!1:te<=he*2+Ae?(ke=te/(2*he+Ae),he*=ke,Ae*=ke):(xe=Math.floor((te+Ae)/(he+Ae)),Te=(te-xe*he)/(xe-1),Ee=(te-(xe+1)*he)/xe,Ae=Ee<=0||Math.abs(Ae-Te)<Math.abs(Ae-Ee)?Te:Ee),De&&(v===3?this.ctx.setLineDash([0,he+Ae]):this.ctx.setLineDash([he,Ae])),v===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Au(i),this.ctx.stroke(),this.ctx.setLineDash([]),v===2&&(Kd(s[0])&&(Fe=s[3],Se=s[0],this.ctx.beginPath(),this.formatPath([new lr(Fe.end.x,Fe.end.y),new lr(Se.start.x,Se.start.y)]),this.ctx.stroke()),Kd(s[1])&&(Fe=s[1],Se=s[2],this.ctx.beginPath(),this.formatPath([new lr(Fe.end.x,Fe.end.y),new lr(Se.start.x,Se.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(i){return Mh(this,void 0,void 0,function(){var r;return ih(this,function(d){switch(d.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Au(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=XK(i),[4,this.renderStack(r)];case 1:return d.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(jF),cZ=function(e){return e instanceof AF||e instanceof dF?!0:e instanceof zB&&e.type!==Qb&&e.type!==Nb},uZ=function(e,t){switch(e){case 0:return Wb(t);case 2:return VK(t);case 1:default:return Kb(t)}},hZ=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},dZ=["-apple-system","system-ui"],AZ=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return dZ.indexOf(t)===-1}):e},fZ=function(e){wA(t,e);function t(i,r){var d=e.call(this,i,r)||this;return d.canvas=r.canvas?r.canvas:document.createElement("canvas"),d.ctx=d.canvas.getContext("2d"),d.options=r,d.canvas.width=Math.floor(r.width*r.scale),d.canvas.height=Math.floor(r.height*r.scale),d.canvas.style.width=r.width+"px",d.canvas.style.height=r.height+"px",d.ctx.scale(d.options.scale,d.options.scale),d.ctx.translate(-r.x,-r.y),d.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),d}return t.prototype.render=function(i){return Mh(this,void 0,void 0,function(){var r,d;return ih(this,function(f){switch(f.label){case 0:return r=FB(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,pZ(r)];case 1:return d=f.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Au(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(d,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(jF),pZ=function(e){return new Promise(function(t,i){var r=new Image;r.onload=function(){t(r)},r.onerror=i,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},mZ=function(){function e(t){var i=t.id,r=t.enabled;this.id=i,this.enabled=r,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,sb([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,sb([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,sb([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,sb([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),gZ=function(){function e(t,i){var r;this.windowBounds=i,this.instanceName="#"+e.instanceCount++,this.logger=new mZ({id:this.instanceName,enabled:t.logging}),this.cache=(r=t.cache)!==null&&r!==void 0?r:new zK(this,t)}return e.instanceCount=1,e}(),_Z=function(e,t){return t===void 0&&(t={}),yZ(e,t)};typeof window<"u"&&FF.setContext(window);var yZ=function(e,t){return Mh(void 0,void 0,void 0,function(){var i,r,d,f,v,h,s,U,$,V,q,te,he,Ae,De,ke,xe,Te,Ee,Fe,nt,Se,nt,xt,Bt,Xe,qt,rn,Ut,Kt,On,Gt,Rn,mn,Cn,Qt,Xn,Wn,Bi,Bn;return ih(this,function(Hn){switch(Hn.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=e.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(r=i.defaultView,!r)throw new Error("Document is not attached to a Window");return d={allowTaint:(xt=t.allowTaint)!==null&&xt!==void 0?xt:!1,imageTimeout:(Bt=t.imageTimeout)!==null&&Bt!==void 0?Bt:15e3,proxy:t.proxy,useCORS:(Xe=t.useCORS)!==null&&Xe!==void 0?Xe:!1},f=JC({logging:(qt=t.logging)!==null&&qt!==void 0?qt:!0,cache:t.cache},d),v={windowWidth:(rn=t.windowWidth)!==null&&rn!==void 0?rn:r.innerWidth,windowHeight:(Ut=t.windowHeight)!==null&&Ut!==void 0?Ut:r.innerHeight,scrollX:(Kt=t.scrollX)!==null&&Kt!==void 0?Kt:r.pageXOffset,scrollY:(On=t.scrollY)!==null&&On!==void 0?On:r.pageYOffset},h=new $f(v.scrollX,v.scrollY,v.windowWidth,v.windowHeight),s=new gZ(f,h),U=(Gt=t.foreignObjectRendering)!==null&&Gt!==void 0?Gt:!1,$={allowTaint:(Rn=t.allowTaint)!==null&&Rn!==void 0?Rn:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:U,copyStyles:U},s.logger.debug("Starting document clone with size "+h.width+"x"+h.height+" scrolled to "+-h.left+","+-h.top),V=new kF(s,e,$),q=V.clonedReferenceElement,q?[4,V.toIFrame(i,h)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return te=Hn.sent(),he=OB(q)||vK(q)?q6(q.ownerDocument):ab(s,q),Ae=he.width,De=he.height,ke=he.left,xe=he.top,Te=vZ(s,q,t.backgroundColor),Ee={canvas:t.canvas,backgroundColor:Te,scale:(Cn=(mn=t.scale)!==null&&mn!==void 0?mn:r.devicePixelRatio)!==null&&Cn!==void 0?Cn:1,x:((Qt=t.x)!==null&&Qt!==void 0?Qt:0)+ke,y:((Xn=t.y)!==null&&Xn!==void 0?Xn:0)+xe,width:(Wn=t.width)!==null&&Wn!==void 0?Wn:Math.ceil(Ae),height:(Bi=t.height)!==null&&Bi!==void 0?Bi:Math.ceil(De)},U?(s.logger.debug("Document cloned, using foreign object rendering"),nt=new fZ(s,Ee),[4,nt.render(q)]):[3,3];case 2:return Fe=Hn.sent(),[3,5];case 3:return s.logger.debug("Document cloned, element located at "+ke+","+xe+" with size "+Ae+"x"+De+" using computed rendering"),s.logger.debug("Starting DOM parsing"),Se=mF(s,q),Te===Se.styles.backgroundColor&&(Se.styles.backgroundColor=Hf.TRANSPARENT),s.logger.debug("Starting renderer for element at "+Ee.x+","+Ee.y+" with size "+Ee.width+"x"+Ee.height),nt=new lZ(s,Ee),[4,nt.render(Se)];case 4:Fe=Hn.sent(),Hn.label=5;case 5:return(!((Bn=t.removeContainer)!==null&&Bn!==void 0)||Bn)&&(kF.destroy(te)||s.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),s.logger.debug("Finished rendering"),[2,Fe]}})})},vZ=function(e,t,i){var r=t.ownerDocument,d=r.documentElement?xv(e,getComputedStyle(r.documentElement).backgroundColor):Hf.TRANSPARENT,f=r.body?xv(e,getComputedStyle(r.body).backgroundColor):Hf.TRANSPARENT,v=typeof i=="string"?xv(e,i):i===null?Hf.TRANSPARENT:4294967295;return t===r.documentElement?Mp(d)?Mp(f)?v:f:d:v};function xZ({chartId:e,fileName:t,title:i}){const r=f=>f.split(" ").join("_"),d=()=>{const f=document.querySelector(`#${e}`);if(f){const v=f.getBoundingClientRect().width,h=f.getBoundingClientRect().height;_Z(f,{width:v,height:h+80,scrollX:0,scrollY:-window.scrollY,scale:.9,onclone:s=>{const U=s.querySelector(`#${e}`);if(U){U.querySelectorAll("svg").forEach(te=>{te.setAttribute("width",`${te.getBoundingClientRect().width-10}`),te.setAttribute("height",`${te.getBoundingClientRect().height}`)}),U.removeAttribute("style");const V=document.createElement("div");V.setAttribute("style","display:flex"),V.append(...U==null?void 0:U.childNodes);const q=document.createElement("h2");q.innerText=i??"",U==null||U.appendChild(q),U==null||U.appendChild(V),U==null||U.setAttribute("style","padding: 5px")}}}).then(s=>{const U=document.createElement("a");U.href=s.toDataURL("image/png"),U.download=r(t),U.click()})}};return ze(Qf,{color:"primary","aria-label":"Export",onClick:()=>d(),children:[ze(p_,{children:ze(m_,{})}),"As Image"]})}var ZB={},bZ=WC;Object.defineProperty(ZB,"__esModule",{value:!0});var HF=ZB.default=void 0,wZ=bZ(ZC()),CZ=qC,BZ=(0,wZ.default)((0,CZ.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");HF=ZB.default=BZ;const TZ=Fi("div")(({theme:e})=>({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1200,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none","& .modal":{minHeight:"700px",marginLeft:"120%",overflowY:"scroll",pointerEvents:"auto",background:e.palette.secondary.light,width:"83%",borderBottomLeftRadius:".75rem",borderTopLeftRadius:".75rem",boxShadow:e.shadows[2],padding:e.spacing(3),transition:".5s","&.entered":{marginLeft:"10%"},"& code":{backgroundColor:e.palette.secondary.main,padding:e.spacing(1),display:"inline-block"}},"& .collapse":{pointerEvents:"auto",cursor:"pointer",marginBottom:e.spacing(2),"& svg":{marginRight:e.spacing(1),verticalAlign:"middle",fontSize:"1rem"}}})),EZ=Fi("div")(()=>({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:400,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"})),SZ=({open:e,handleClose:t,children:i})=>{const[r,d]=ur("");return $i(()=>{if(e){const f=setTimeout(()=>{d("entered")},5);return()=>{clearTimeout(f)}}else d("")},[e]),e?ze(vs,{children:[ze(TZ,{children:ze("div",{className:`modal ${r}`,children:[ze(ml,{variant:"body2",className:"collapse",onClick:t,children:[ze(HF,{}),"Tap to collapse"]}),i]})}),ze(EZ,{onClick:t})]}):null};function IZ({fileName:e,chartId:t,workspace:i,scale:r}){const[d,f]=ur(!1),v=s=>s.split(" ").join("_"),h=xs(async()=>{var s,U,$,V;try{f(!0);let q="";Array.isArray(t)?q+=t.map(Ee=>{var Fe;return(Fe=document.querySelector(`#${Ee}`))==null?void 0:Fe.innerHTML}).join(""):q+=(s=document.querySelector(`#${t}`))==null?void 0:s.innerHTML;const te=`<html>
        <head>
          ${((U=document.querySelector("head"))==null?void 0:U.innerHTML)??""}
          <style>
            .MuiGrid-root {
              max-height: inherit !important;
            }

            .MuiGrid-container {
              page-break-inside: avoid;
            }

            body, table, th, td {
              font-size: 12px;
              transform: scale(${r||1}); /* Adjust the scale factor as needed */
              transform-origin: top left
            }

            h3 {
              margin: 30px 0 20px !important;
            }

          </style>
        </head>
        <body>
          <div style="display: flex; align-items: center; margin-bottom: 20px">
            <img src="/logos/logo_undg.png" alt="UN Development Goals" class="makeStyles-undgLogo-9" width="170"/>
            <img style="margin-right: 20px" src="/logos/uninfo-logo-small.png" alt="UN Info" class="makeStyles-undgLogo-9" width="100"/>
          </div>
          <h2>${i&&i.name?i.name:""}</h2>
          <div class="scale-down">
            ${q}
          </div>
        </body>
      </html>`,he={test:il.NODE_ENV!=="production",document_content:te,type:"pdf",user_credentials:"nrLagE31tGeS198le0pQ",prince_options:{baseurl:"https://dco-uninfo-data-portal-staging.dev.devqube.io"}},De=await(await fetch("https://docraptor.com/docs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)})).blob(),ke=new Blob([De]),xe=window.URL.createObjectURL(ke),Te=document.createElement("a");Te.href=xe,Te.setAttribute("download",`${v(e??"downloaded-report")}.pdf`),document.body.appendChild(Te),Te.click(),($=Te.parentNode)==null||$.removeChild(Te),window.URL.revokeObjectURL(De),f(!1),(V=window==null?void 0:window.gtag)==null||V.call(window,"event",`downloaded_${(e==null?void 0:e.split("-")[0].toLowerCase())??"report"}_pdf`)}catch(q){console.error(q)}},[t,e]);return ze(Qf,{color:"primary","aria-label":"Export",onClick:()=>h(),children:[ze(p_,{children:[!d&&ze(m_,{}),d&&ze(tv,{thickness:4,size:20})]}),"As PDF"]})}function oh(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(i).filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),r.forEach(function(d){U0(e,d,i[d])})}return e}function Sv(e,t){if(t&&(Ju(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tf(e)}function I_(e){return I_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},I_(e)}function Jb(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zx(e,t)}var MZ={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,i){console&&console[t]&&console[t].apply(console,i)}},LZ=function(){function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};qA(this,e),this.init(t,i)}return Fd(e,[{key:"init",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=i||MZ,this.options=r,this.debug=r.debug}},{key:"setDebug",value:function(i){this.debug=i}},{key:"log",value:function(){for(var i=arguments.length,r=new Array(i),d=0;d<i;d++)r[d]=arguments[d];return this.forward(r,"log","",!0)}},{key:"warn",value:function(){for(var i=arguments.length,r=new Array(i),d=0;d<i;d++)r[d]=arguments[d];return this.forward(r,"warn","",!0)}},{key:"error",value:function(){for(var i=arguments.length,r=new Array(i),d=0;d<i;d++)r[d]=arguments[d];return this.forward(r,"error","")}},{key:"deprecate",value:function(){for(var i=arguments.length,r=new Array(i),d=0;d<i;d++)r[d]=arguments[d];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(i,r,d,f){return f&&!this.debug?null:(typeof i[0]=="string"&&(i[0]="".concat(d).concat(this.prefix," ").concat(i[0])),this.logger[r](i))}},{key:"create",value:function(i){return new e(this.logger,oh({},{prefix:"".concat(this.prefix,":").concat(i,":")},this.options))}}]),e}(),Gf=new LZ,Fp=function(){function e(){qA(this,e),this.observers={}}return Fd(e,[{key:"on",value:function(i,r){var d=this;return i.split(" ").forEach(function(f){d.observers[f]=d.observers[f]||[],d.observers[f].push(r)}),this}},{key:"off",value:function(i,r){if(this.observers[i]){if(!r){delete this.observers[i];return}this.observers[i]=this.observers[i].filter(function(d){return d!==r})}}},{key:"emit",value:function(i){for(var r=arguments.length,d=new Array(r>1?r-1:0),f=1;f<r;f++)d[f-1]=arguments[f];if(this.observers[i]){var v=[].concat(this.observers[i]);v.forEach(function(s){s.apply(void 0,d)})}if(this.observers["*"]){var h=[].concat(this.observers["*"]);h.forEach(function(s){s.apply(s,[i].concat(d))})}}}]),e}();function Iv(){var e,t,i=new Promise(function(r,d){e=r,t=d});return i.resolve=e,i.reject=t,i}function VF(e){return e==null?"":""+e}function kZ(e,t,i){e.forEach(function(r){t[r]&&(i[r]=t[r])})}function qB(e,t,i){function r(h){return h&&h.indexOf("###")>-1?h.replace(/###/g,"."):h}function d(){return!e||typeof e=="string"}for(var f=typeof t!="string"?[].concat(t):t.split(".");f.length>1;){if(d())return{};var v=r(f.shift());!e[v]&&i&&(e[v]=new i),Object.prototype.hasOwnProperty.call(e,v)?e=e[v]:e={}}return d()?{}:{obj:e,k:r(f.shift())}}function GF(e,t,i){var r=qB(e,t,Object),d=r.obj,f=r.k;d[f]=i}function PZ(e,t,i,r){var d=qB(e,t,Object),f=d.obj,v=d.k;f[v]=f[v]||[],r&&(f[v]=f[v].concat(i)),r||f[v].push(i)}function ew(e,t){var i=qB(e,t),r=i.obj,d=i.k;if(r)return r[d]}function WF(e,t,i){var r=ew(e,i);return r!==void 0?r:ew(t,i)}function KF(e,t,i){for(var r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?typeof e[r]=="string"||e[r]instanceof String||typeof t[r]=="string"||t[r]instanceof String?i&&(e[r]=t[r]):KF(e[r],t[r],i):e[r]=t[r]);return e}function M_(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var FZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function DZ(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,function(t){return FZ[t]}):e}var tw=typeof window<"u"&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,UZ=function(e){Jb(t,e);function t(i){var r,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return qA(this,t),r=Sv(this,I_(t).call(this)),tw&&Fp.call(tf(r)),r.data=i||{},r.options=d,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r}return Fd(t,[{key:"addNamespaces",value:function(r){this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}},{key:"removeNamespaces",value:function(r){var d=this.options.ns.indexOf(r);d>-1&&this.options.ns.splice(d,1)}},{key:"getResource",value:function(r,d,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},h=v.keySeparator!==void 0?v.keySeparator:this.options.keySeparator,s=[r,d];return f&&typeof f!="string"&&(s=s.concat(f)),f&&typeof f=="string"&&(s=s.concat(h?f.split(h):f)),r.indexOf(".")>-1&&(s=r.split(".")),ew(this.data,s)}},{key:"addResource",value:function(r,d,f,v){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},s=this.options.keySeparator;s===void 0&&(s=".");var U=[r,d];f&&(U=U.concat(s?f.split(s):f)),r.indexOf(".")>-1&&(U=r.split("."),v=d,d=U[1]),this.addNamespaces(d),GF(this.data,U,v),h.silent||this.emit("added",r,d,f,v)}},{key:"addResources",value:function(r,d,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var h in f)(typeof f[h]=="string"||Object.prototype.toString.apply(f[h])==="[object Array]")&&this.addResource(r,d,h,f[h],{silent:!0});v.silent||this.emit("added",r,d,f)}},{key:"addResourceBundle",value:function(r,d,f,v,h){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},U=[r,d];r.indexOf(".")>-1&&(U=r.split("."),v=f,f=d,d=U[1]),this.addNamespaces(d);var $=ew(this.data,U)||{};v?KF($,f,h):$=oh({},$,f),GF(this.data,U,$),s.silent||this.emit("added",r,d,f)}},{key:"removeResourceBundle",value:function(r,d){this.hasResourceBundle(r,d)&&delete this.data[r][d],this.removeNamespaces(d),this.emit("removed",r,d)}},{key:"hasResourceBundle",value:function(r,d){return this.getResource(r,d)!==void 0}},{key:"getResourceBundle",value:function(r,d){return d||(d=this.options.defaultNS),this.options.compatibilityAPI==="v1"?oh({},{},this.getResource(r,d)):this.getResource(r,d)}},{key:"getDataByLanguage",value:function(r){return this.data[r]}},{key:"toJSON",value:function(){return this.data}}]),t}(Fp),ZF={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,i,r,d,f){var v=this;return t.forEach(function(h){v.processors[h]&&(i=v.processors[h].process(i,r,d,f))}),i}},qF={},XF=function(e){Jb(t,e);function t(i){var r,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return qA(this,t),r=Sv(this,I_(t).call(this)),tw&&Fp.call(tf(r)),kZ(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i,tf(r)),r.options=d,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.logger=Gf.create("translator"),r}return Fd(t,[{key:"changeLanguage",value:function(r){r&&(this.language=r)}},{key:"exists",value:function(r){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},f=this.resolve(r,d);return f&&f.res!==void 0}},{key:"extractFromKey",value:function(r,d){var f=d.nsSeparator!==void 0?d.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");var v=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,h=d.ns||this.options.defaultNS;if(f&&r.indexOf(f)>-1){var s=r.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:r,namespaces:h};var U=r.split(f);(f!==v||f===v&&this.options.ns.indexOf(U[0])>-1)&&(h=U.shift()),r=U.join(v)}return typeof h=="string"&&(h=[h]),{key:r,namespaces:h}}},{key:"translate",value:function(r,d,f){var v=this;if(Ju(d)!=="object"&&this.options.overloadTranslationOptionHandler&&(d=this.options.overloadTranslationOptionHandler(arguments)),d||(d={}),r==null)return"";Array.isArray(r)||(r=[String(r)]);var h=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,s=this.extractFromKey(r[r.length-1],d),U=s.key,$=s.namespaces,V=$[$.length-1],q=d.lng||this.language,te=d.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(q&&q.toLowerCase()==="cimode"){if(te){var he=d.nsSeparator||this.options.nsSeparator;return V+he+U}return U}var Ae=this.resolve(r,d),De=Ae&&Ae.res,ke=Ae&&Ae.usedKey||U,xe=Ae&&Ae.exactUsedKey||U,Te=Object.prototype.toString.apply(De),Ee=["[object Number]","[object Function]","[object RegExp]"],Fe=d.joinArrays!==void 0?d.joinArrays:this.options.joinArrays,Se=!this.i18nFormat||this.i18nFormat.handleAsObject,nt=typeof De!="string"&&typeof De!="boolean"&&typeof De!="number";if(Se&&De&&nt&&Ee.indexOf(Te)<0&&!(typeof Fe=="string"&&Te==="[object Array]")){if(!d.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(ke,De,d):"key '".concat(U," (").concat(this.language,")' returned an object instead of string.");if(h){var xt=Te==="[object Array]",Bt=xt?[]:{},Xe=xt?xe:ke;for(var qt in De)if(Object.prototype.hasOwnProperty.call(De,qt)){var rn="".concat(Xe).concat(h).concat(qt);Bt[qt]=this.translate(rn,oh({},d,{joinArrays:!1,ns:$})),Bt[qt]===rn&&(Bt[qt]=De[qt])}De=Bt}}else if(Se&&typeof Fe=="string"&&Te==="[object Array]")De=De.join(Fe),De&&(De=this.extendTranslation(De,r,d,f));else{var Ut=!1,Kt=!1,On=d.count!==void 0&&typeof d.count!="string",Gt=t.hasDefaultValue(d),Rn=On?this.pluralResolver.getSuffix(q,d.count):"",mn=d["defaultValue".concat(Rn)]||d.defaultValue;!this.isValidLookup(De)&&Gt&&(Ut=!0,De=mn),this.isValidLookup(De)||(Kt=!0,De=U);var Cn=Gt&&mn!==De&&this.options.updateMissing;if(Kt||Ut||Cn){if(this.logger.log(Cn?"updateKey":"missingKey",q,V,U,Cn?mn:De),h){var Qt=this.resolve(U,oh({},d,{keySeparator:!1}));Qt&&Qt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Xn=[],Wn=this.languageUtils.getFallbackCodes(this.options.fallbackLng,d.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Wn&&Wn[0])for(var Bi=0;Bi<Wn.length;Bi++)Xn.push(Wn[Bi]);else this.options.saveMissingTo==="all"?Xn=this.languageUtils.toResolveHierarchy(d.lng||this.language):Xn.push(d.lng||this.language);var Bn=function(ei,tr,ri){v.options.missingKeyHandler?v.options.missingKeyHandler(ei,V,tr,Cn?ri:De,Cn,d):v.backendConnector&&v.backendConnector.saveMissing&&v.backendConnector.saveMissing(ei,V,tr,Cn?ri:De,Cn,d),v.emit("missingKey",ei,V,tr,De)};this.options.saveMissing&&(this.options.saveMissingPlurals&&On?Xn.forEach(function(Hn){v.pluralResolver.getSuffixes(Hn).forEach(function(ei){Bn([Hn],U+ei,d["defaultValue".concat(ei)]||mn)})}):Bn(Xn,U,mn))}De=this.extendTranslation(De,r,d,Ae,f),Kt&&De===U&&this.options.appendNamespaceToMissingKey&&(De="".concat(V,":").concat(U)),Kt&&this.options.parseMissingKeyHandler&&(De=this.options.parseMissingKeyHandler(De))}return De}},{key:"extendTranslation",value:function(r,d,f,v,h){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)r=this.i18nFormat.parse(r,f,v.usedLng,v.usedNS,v.usedKey,{resolved:v});else if(!f.skipInterpolation){f.interpolation&&this.interpolator.init(oh({},f,{interpolation:oh({},this.options.interpolation,f.interpolation)}));var U=f.interpolation&&f.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,$;if(U){var V=r.match(this.interpolator.nestingRegexp);$=V&&V.length}var q=f.replace&&typeof f.replace!="string"?f.replace:f;if(this.options.interpolation.defaultVariables&&(q=oh({},this.options.interpolation.defaultVariables,q)),r=this.interpolator.interpolate(r,q,f.lng||this.language,f),U){var te=r.match(this.interpolator.nestingRegexp),he=te&&te.length;$<he&&(f.nest=!1)}f.nest!==!1&&(r=this.interpolator.nest(r,function(){for(var ke=arguments.length,xe=new Array(ke),Te=0;Te<ke;Te++)xe[Te]=arguments[Te];return h&&h[0]===xe[0]&&!f.context?(s.logger.warn("It seems you are nesting recursively key: ".concat(xe[0]," in key: ").concat(d[0])),null):s.translate.apply(s,xe.concat([d]))},f)),f.interpolation&&this.interpolator.reset()}var Ae=f.postProcess||this.options.postProcess,De=typeof Ae=="string"?[Ae]:Ae;return r!=null&&De&&De.length&&f.applyPostProcessor!==!1&&(r=ZF.handle(De,r,d,this.options&&this.options.postProcessPassResolved?oh({i18nResolved:v},f):f,this)),r}},{key:"resolve",value:function(r){var d=this,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v,h,s,U,$;return typeof r=="string"&&(r=[r]),r.forEach(function(V){if(!d.isValidLookup(v)){var q=d.extractFromKey(V,f),te=q.key;h=te;var he=q.namespaces;d.options.fallbackNS&&(he=he.concat(d.options.fallbackNS));var Ae=f.count!==void 0&&typeof f.count!="string",De=f.context!==void 0&&typeof f.context=="string"&&f.context!=="",ke=f.lngs?f.lngs:d.languageUtils.toResolveHierarchy(f.lng||d.language,f.fallbackLng);he.forEach(function(xe){d.isValidLookup(v)||($=xe,!qF["".concat(ke[0],"-").concat(xe)]&&d.utils&&d.utils.hasLoadedNamespace&&!d.utils.hasLoadedNamespace($)&&(qF["".concat(ke[0],"-").concat(xe)]=!0,d.logger.warn('key "'.concat(h,'" for languages "').concat(ke.join(", "),`" won't get resolved as namespace "`).concat($,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),ke.forEach(function(Te){if(!d.isValidLookup(v)){U=Te;var Ee=te,Fe=[Ee];if(d.i18nFormat&&d.i18nFormat.addLookupKeys)d.i18nFormat.addLookupKeys(Fe,te,Te,xe,f);else{var Se;Ae&&(Se=d.pluralResolver.getSuffix(Te,f.count)),Ae&&De&&Fe.push(Ee+Se),De&&Fe.push(Ee+="".concat(d.options.contextSeparator).concat(f.context)),Ae&&Fe.push(Ee+=Se)}for(var nt;nt=Fe.pop();)d.isValidLookup(v)||(s=nt,v=d.getResource(Te,xe,nt,f))}}))})}}),{res:v,usedKey:h,exactUsedKey:s,usedLng:U,usedNS:$}}},{key:"isValidLookup",value:function(r){return r!==void 0&&!(!this.options.returnNull&&r===null)&&!(!this.options.returnEmptyString&&r==="")}},{key:"getResource",value:function(r,d,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(r,d,f,v):this.resourceStore.getResource(r,d,f,v)}}],[{key:"hasDefaultValue",value:function(r){var d="defaultValue";for(var f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&d===f.substring(0,d.length)&&r[f]!==void 0)return!0;return!1}}]),t}(Fp);function XB(e){return e.charAt(0).toUpperCase()+e.slice(1)}var zZ=function(){function e(t){qA(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Gf.create("languageUtils")}return Fd(e,[{key:"getScriptPartFromCode",value:function(i){if(!i||i.indexOf("-")<0)return null;var r=i.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}},{key:"getLanguagePartFromCode",value:function(i){if(!i||i.indexOf("-")<0)return i;var r=i.split("-");return this.formatLanguageCode(r[0])}},{key:"formatLanguageCode",value:function(i){if(typeof i=="string"&&i.indexOf("-")>-1){var r=["hans","hant","latn","cyrl","cans","mong","arab"],d=i.split("-");return this.options.lowerCaseLng?d=d.map(function(f){return f.toLowerCase()}):d.length===2?(d[0]=d[0].toLowerCase(),d[1]=d[1].toUpperCase(),r.indexOf(d[1].toLowerCase())>-1&&(d[1]=XB(d[1].toLowerCase()))):d.length===3&&(d[0]=d[0].toLowerCase(),d[1].length===2&&(d[1]=d[1].toUpperCase()),d[0]!=="sgn"&&d[2].length===2&&(d[2]=d[2].toUpperCase()),r.indexOf(d[1].toLowerCase())>-1&&(d[1]=XB(d[1].toLowerCase())),r.indexOf(d[2].toLowerCase())>-1&&(d[2]=XB(d[2].toLowerCase()))),d.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?i.toLowerCase():i}},{key:"isWhitelisted",value:function(i){return this.logger.deprecate("languageUtils.isWhitelisted",`function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it's usage asap.`),this.isSupportedCode(i)}},{key:"isSupportedCode",value:function(i){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(i=this.getLanguagePartFromCode(i)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(i)>-1}},{key:"getBestMatchFromCodes",value:function(i){var r=this;if(!i)return null;var d;return i.forEach(function(f){if(!d){var v=r.formatLanguageCode(f);(!r.options.supportedLngs||r.isSupportedCode(v))&&(d=v)}}),!d&&this.options.supportedLngs&&i.forEach(function(f){if(!d){var v=r.getLanguagePartFromCode(f);if(r.isSupportedCode(v))return d=v;d=r.options.supportedLngs.find(function(h){if(h.indexOf(v)===0)return h})}}),d||(d=this.getFallbackCodes(this.options.fallbackLng)[0]),d}},{key:"getFallbackCodes",value:function(i,r){if(!i)return[];if(typeof i=="function"&&(i=i(r)),typeof i=="string"&&(i=[i]),Object.prototype.toString.apply(i)==="[object Array]")return i;if(!r)return i.default||[];var d=i[r];return d||(d=i[this.getScriptPartFromCode(r)]),d||(d=i[this.formatLanguageCode(r)]),d||(d=i[this.getLanguagePartFromCode(r)]),d||(d=i.default),d||[]}},{key:"toResolveHierarchy",value:function(i,r){var d=this,f=this.getFallbackCodes(r||this.options.fallbackLng||[],i),v=[],h=function(U){U&&(d.isSupportedCode(U)?v.push(U):d.logger.warn("rejecting language code not found in supportedLngs: ".concat(U)))};return typeof i=="string"&&i.indexOf("-")>-1?(this.options.load!=="languageOnly"&&h(this.formatLanguageCode(i)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&h(this.getScriptPartFromCode(i)),this.options.load!=="currentOnly"&&h(this.getLanguagePartFromCode(i))):typeof i=="string"&&h(this.formatLanguageCode(i)),f.forEach(function(s){v.indexOf(s)<0&&h(d.formatLanguageCode(s))}),v}}]),e}(),RZ=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],OZ={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};function NZ(){var e={};return RZ.forEach(function(t){t.lngs.forEach(function(i){e[i]={numbers:t.nr,plurals:OZ[t.fc]}})}),e}var QZ=function(){function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};qA(this,e),this.languageUtils=t,this.options=i,this.logger=Gf.create("pluralResolver"),this.rules=NZ()}return Fd(e,[{key:"addRule",value:function(i,r){this.rules[i]=r}},{key:"getRule",value:function(i){return this.rules[i]||this.rules[this.languageUtils.getLanguagePartFromCode(i)]}},{key:"needsPlural",value:function(i){var r=this.getRule(i);return r&&r.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(i,r){return this.getSuffixes(i).map(function(d){return r+d})}},{key:"getSuffixes",value:function(i){var r=this,d=this.getRule(i);return d?d.numbers.map(function(f){return r.getSuffix(i,f)}):[]}},{key:"getSuffix",value:function(i,r){var d=this,f=this.getRule(i);if(f){var v=f.noAbs?f.plurals(r):f.plurals(Math.abs(r)),h=f.numbers[v];this.options.simplifyPluralSuffix&&f.numbers.length===2&&f.numbers[0]===1&&(h===2?h="plural":h===1&&(h=""));var s=function(){return d.options.prepend&&h.toString()?d.options.prepend+h.toString():h.toString()};return this.options.compatibilityJSON==="v1"?h===1?"":typeof h=="number"?"_plural_".concat(h.toString()):s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&f.numbers.length===2&&f.numbers[0]===1?s():this.options.prepend&&v.toString()?this.options.prepend+v.toString():v.toString()}return this.logger.warn("no plural rule found for: ".concat(i)),""}}]),e}(),$Z=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qA(this,e),this.logger=Gf.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(i){return i},this.init(t)}return Fd(e,[{key:"init",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i.interpolation||(i.interpolation={escapeValue:!0});var r=i.interpolation;this.escape=r.escape!==void 0?r.escape:DZ,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?M_(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?M_(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?M_(r.nestingPrefix):r.nestingPrefixEscaped||M_("$t("),this.nestingSuffix=r.nestingSuffix?M_(r.nestingSuffix):r.nestingSuffixEscaped||M_(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var i="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(i,"g");var r="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(r,"g");var d="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(d,"g")}},{key:"interpolate",value:function(i,r,d,f){var v=this,h,s,U,$=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function V(De){return De.replace(/\$/g,"$$$$")}var q=function(ke){if(ke.indexOf(v.formatSeparator)<0){var xe=WF(r,$,ke);return v.alwaysFormat?v.format(xe,void 0,d):xe}var Te=ke.split(v.formatSeparator),Ee=Te.shift().trim(),Fe=Te.join(v.formatSeparator).trim();return v.format(WF(r,$,Ee),Fe,d,f)};this.resetRegExp();var te=f&&f.missingInterpolationHandler||this.options.missingInterpolationHandler,he=f&&f.interpolation&&f.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,Ae=[{regex:this.regexpUnescape,safeValue:function(ke){return V(ke)}},{regex:this.regexp,safeValue:function(ke){return v.escapeValue?V(v.escape(ke)):V(ke)}}];return Ae.forEach(function(De){for(U=0;h=De.regex.exec(i);){if(s=q(h[1].trim()),s===void 0)if(typeof te=="function"){var ke=te(i,h,f);s=typeof ke=="string"?ke:""}else if(he){s=h[0];continue}else v.logger.warn("missed to pass in variable ".concat(h[1]," for interpolating ").concat(i)),s="";else typeof s!="string"&&!v.useRawValueToEscape&&(s=VF(s));if(i=i.replace(h[0],De.safeValue(s)),De.regex.lastIndex=0,U++,U>=v.maxReplaces)break}}),i}},{key:"nest",value:function(i,r){var d=this,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},v,h,s=oh({},f);s.applyPostProcessor=!1,delete s.defaultValue;function U(te,he){var Ae=this.nestingOptionsSeparator;if(te.indexOf(Ae)<0)return te;var De=te.split(new RegExp("".concat(Ae,"[ ]*{"))),ke="{".concat(De[1]);te=De[0],ke=this.interpolate(ke,s),ke=ke.replace(/'/g,'"');try{s=JSON.parse(ke),he&&(s=oh({},he,s))}catch(xe){return this.logger.warn("failed parsing options string in nesting for key ".concat(te),xe),"".concat(te).concat(Ae).concat(ke)}return delete s.defaultValue,te}for(;v=this.nestingRegexp.exec(i);){var $=[],V=!1;if(v[0].includes(this.formatSeparator)&&!/{.*}/.test(v[1])){var q=v[1].split(this.formatSeparator).map(function(te){return te.trim()});v[1]=q.shift(),$=q,V=!0}if(h=r(U.call(this,v[1].trim(),s),s),h&&v[0]===i&&typeof h!="string")return h;typeof h!="string"&&(h=VF(h)),h||(this.logger.warn("missed to resolve ".concat(v[1]," for nesting ").concat(i)),h=""),V&&(h=$.reduce(function(te,he){return d.format(te,he,f.lng,f)},h.trim())),i=i.replace(v[0],h),this.regexp.lastIndex=0}return i}}]),e}();function jZ(e,t){for(var i=e.indexOf(t);i!==-1;)e.splice(i,1),i=e.indexOf(t)}var HZ=function(e){Jb(t,e);function t(i,r,d){var f,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return qA(this,t),f=Sv(this,I_(t).call(this)),tw&&Fp.call(tf(f)),f.backend=i,f.store=r,f.services=d,f.languageUtils=d.languageUtils,f.options=v,f.logger=Gf.create("backendConnector"),f.state={},f.queue=[],f.backend&&f.backend.init&&f.backend.init(d,v.backend,v),f}return Fd(t,[{key:"queueLoad",value:function(r,d,f,v){var h=this,s=[],U=[],$=[],V=[];return r.forEach(function(q){var te=!0;d.forEach(function(he){var Ae="".concat(q,"|").concat(he);!f.reload&&h.store.hasResourceBundle(q,he)?h.state[Ae]=2:h.state[Ae]<0||(h.state[Ae]===1?U.indexOf(Ae)<0&&U.push(Ae):(h.state[Ae]=1,te=!1,U.indexOf(Ae)<0&&U.push(Ae),s.indexOf(Ae)<0&&s.push(Ae),V.indexOf(he)<0&&V.push(he)))}),te||$.push(q)}),(s.length||U.length)&&this.queue.push({pending:U,loaded:{},errors:[],callback:v}),{toLoad:s,pending:U,toLoadLanguages:$,toLoadNamespaces:V}}},{key:"loaded",value:function(r,d,f){var v=r.split("|"),h=v[0],s=v[1];d&&this.emit("failedLoading",h,s,d),f&&this.store.addResourceBundle(h,s,f),this.state[r]=d?-1:2;var U={};this.queue.forEach(function($){PZ($.loaded,[h],s),jZ($.pending,r),d&&$.errors.push(d),$.pending.length===0&&!$.done&&(Object.keys($.loaded).forEach(function(V){U[V]||(U[V]=[]),$.loaded[V].length&&$.loaded[V].forEach(function(q){U[V].indexOf(q)<0&&U[V].push(q)})}),$.done=!0,$.errors.length?$.callback($.errors):$.callback())}),this.emit("loaded",U),this.queue=this.queue.filter(function($){return!$.done})}},{key:"read",value:function(r,d,f){var v=this,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:350,U=arguments.length>5?arguments[5]:void 0;return r.length?this.backend[f](r,d,function($,V){if($&&V&&h<5){setTimeout(function(){v.read.call(v,r,d,f,h+1,s*2,U)},s);return}U($,V)}):U(null,{})}},{key:"prepareLoading",value:function(r,d){var f=this,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),h&&h();typeof r=="string"&&(r=this.languageUtils.toResolveHierarchy(r)),typeof d=="string"&&(d=[d]);var s=this.queueLoad(r,d,v,h);if(!s.toLoad.length)return s.pending.length||h(),null;s.toLoad.forEach(function(U){f.loadOne(U)})}},{key:"load",value:function(r,d,f){this.prepareLoading(r,d,{},f)}},{key:"reload",value:function(r,d,f){this.prepareLoading(r,d,{reload:!0},f)}},{key:"loadOne",value:function(r){var d=this,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",v=r.split("|"),h=v[0],s=v[1];this.read(h,s,"read",void 0,void 0,function(U,$){U&&d.logger.warn("".concat(f,"loading namespace ").concat(s," for language ").concat(h," failed"),U),!U&&$&&d.logger.log("".concat(f,"loaded namespace ").concat(s," for language ").concat(h),$),d.loaded(r,U,$)})}},{key:"saveMissing",value:function(r,d,f,v,h){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(d)){this.logger.warn('did not save key "'.concat(f,'" as the namespace "').concat(d,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}f==null||f===""||(this.backend&&this.backend.create&&this.backend.create(r,d,f,v,null,oh({},s,{isUpdate:h})),!(!r||!r[0])&&this.store.addResource(r[0],d,f,v))}}]),t}(Fp);function VZ(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var i={};if(Ju(t[1])==="object"&&(i=t[1]),typeof t[1]=="string"&&(i.defaultValue=t[1]),typeof t[2]=="string"&&(i.tDescription=t[2]),Ju(t[2])==="object"||Ju(t[3])==="object"){var r=t[3]||t[2];Object.keys(r).forEach(function(d){i[d]=r[d]})}return i},interpolation:{escapeValue:!0,format:function(t,i,r,d){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function YF(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function nw(){}var GZ=function(e){Jb(t,e);function t(){var i,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;if(qA(this,t),i=Sv(this,I_(t).call(this)),tw&&Fp.call(tf(i)),i.options=YF(r),i.services={},i.logger=Gf,i.modules={external:[]},d&&!i.isInitialized&&!r.isClone){if(!i.options.initImmediate)return i.init(r,d),Sv(i,tf(i));setTimeout(function(){i.init(r,d)},0)}return i}return Fd(t,[{key:"init",value:function(){var r=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1?arguments[1]:void 0;typeof d=="function"&&(f=d,d={}),d.whitelist&&!d.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),d.nonExplicitWhitelist&&!d.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=oh({},VZ(),this.options,YF(d)),this.format=this.options.interpolation.format,f||(f=nw);function v(he){return he?typeof he=="function"?new he:he:null}if(!this.options.isClone){this.modules.logger?Gf.init(v(this.modules.logger),this.options):Gf.init(null,this.options);var h=new zZ(this.options);this.store=new UZ(this.options.resources,this.options);var s=this.services;s.logger=Gf,s.resourceStore=this.store,s.languageUtils=h,s.pluralResolver=new QZ(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),s.interpolator=new $Z(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new HZ(v(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",function(he){for(var Ae=arguments.length,De=new Array(Ae>1?Ae-1:0),ke=1;ke<Ae;ke++)De[ke-1]=arguments[ke];r.emit.apply(r,[he].concat(De))}),this.modules.languageDetector&&(s.languageDetector=v(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=v(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new XF(this.services,this.options),this.translator.on("*",function(he){for(var Ae=arguments.length,De=new Array(Ae>1?Ae-1:0),ke=1;ke<Ae;ke++)De[ke-1]=arguments[ke];r.emit.apply(r,[he].concat(De))}),this.modules.external.forEach(function(he){he.init&&he.init(r)})}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var U=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);U.length>0&&U[0]!=="dev"&&(this.options.lng=U[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var $=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];$.forEach(function(he){r[he]=function(){var Ae;return(Ae=r.store)[he].apply(Ae,arguments)}});var V=["addResource","addResources","addResourceBundle","removeResourceBundle"];V.forEach(function(he){r[he]=function(){var Ae;return(Ae=r.store)[he].apply(Ae,arguments),r}});var q=Iv(),te=function(){var Ae=function(ke,xe){r.isInitialized&&r.logger.warn("init: i18next is already initialized. You should call init just once!"),r.isInitialized=!0,r.options.isClone||r.logger.log("initialized",r.options),r.emit("initialized",r.options),q.resolve(xe),f(ke,xe)};if(r.languages&&r.options.compatibilityAPI!=="v1"&&!r.isInitialized)return Ae(null,r.t.bind(r));r.changeLanguage(r.options.lng,Ae)};return this.options.resources||!this.options.initImmediate?te():setTimeout(te,0),q}},{key:"loadResources",value:function(r){var d=this,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nw,v=f,h=typeof r=="string"?r:this.language;if(typeof r=="function"&&(v=r),!this.options.resources||this.options.partialBundledLanguages){if(h&&h.toLowerCase()==="cimode")return v();var s=[],U=function(q){if(q){var te=d.services.languageUtils.toResolveHierarchy(q);te.forEach(function(he){s.indexOf(he)<0&&s.push(he)})}};if(h)U(h);else{var $=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);$.forEach(function(V){return U(V)})}this.options.preload&&this.options.preload.forEach(function(V){return U(V)}),this.services.backendConnector.load(s,this.options.ns,v)}else v(null)}},{key:"reloadResources",value:function(r,d,f){var v=Iv();return r||(r=this.languages),d||(d=this.options.ns),f||(f=nw),this.services.backendConnector.reload(r,d,function(h){v.resolve(),f(h)}),v}},{key:"use",value:function(r){if(!r)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!r.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return r.type==="backend"&&(this.modules.backend=r),(r.type==="logger"||r.log&&r.warn&&r.error)&&(this.modules.logger=r),r.type==="languageDetector"&&(this.modules.languageDetector=r),r.type==="i18nFormat"&&(this.modules.i18nFormat=r),r.type==="postProcessor"&&ZF.addPostProcessor(r),r.type==="3rdParty"&&this.modules.external.push(r),this}},{key:"changeLanguage",value:function(r,d){var f=this;this.isLanguageChangingTo=r;var v=Iv();this.emit("languageChanging",r);var h=function($,V){V?(f.language=V,f.languages=f.services.languageUtils.toResolveHierarchy(V),f.translator.changeLanguage(V),f.isLanguageChangingTo=void 0,f.emit("languageChanged",V),f.logger.log("languageChanged",V)):f.isLanguageChangingTo=void 0,v.resolve(function(){return f.t.apply(f,arguments)}),d&&d($,function(){return f.t.apply(f,arguments)})},s=function($){var V=typeof $=="string"?$:f.services.languageUtils.getBestMatchFromCodes($);V&&(f.language||(f.language=V,f.languages=f.services.languageUtils.toResolveHierarchy(V)),f.translator.language||f.translator.changeLanguage(V),f.services.languageDetector&&f.services.languageDetector.cacheUserLanguage(V)),f.loadResources(V,function(q){h(q,V)})};return!r&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!r&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(s):s(r),v}},{key:"getFixedT",value:function(r,d){var f=this,v=function h(s,U){var $;if(Ju(U)!=="object"){for(var V=arguments.length,q=new Array(V>2?V-2:0),te=2;te<V;te++)q[te-2]=arguments[te];$=f.options.overloadTranslationOptionHandler([s,U].concat(q))}else $=oh({},U);return $.lng=$.lng||h.lng,$.lngs=$.lngs||h.lngs,$.ns=$.ns||h.ns,f.t(s,$)};return typeof r=="string"?v.lng=r:v.lngs=r,v.ns=d,v}},{key:"t",value:function(){var r;return this.translator&&(r=this.translator).translate.apply(r,arguments)}},{key:"exists",value:function(){var r;return this.translator&&(r=this.translator).exists.apply(r,arguments)}},{key:"setDefaultNamespace",value:function(r){this.options.defaultNS=r}},{key:"hasLoadedNamespace",value:function(r){var d=this,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var v=this.languages[0],h=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(v.toLowerCase()==="cimode")return!0;var U=function(q,te){var he=d.services.backendConnector.state["".concat(q,"|").concat(te)];return he===-1||he===2};if(f.precheck){var $=f.precheck(this,U);if($!==void 0)return $}return!!(this.hasResourceBundle(v,r)||!this.services.backendConnector.backend||U(v,r)&&(!h||U(s,r)))}},{key:"loadNamespaces",value:function(r,d){var f=this,v=Iv();return this.options.ns?(typeof r=="string"&&(r=[r]),r.forEach(function(h){f.options.ns.indexOf(h)<0&&f.options.ns.push(h)}),this.loadResources(function(h){v.resolve(),d&&d(h)}),v):(d&&d(),Promise.resolve())}},{key:"loadLanguages",value:function(r,d){var f=Iv();typeof r=="string"&&(r=[r]);var v=this.options.preload||[],h=r.filter(function(s){return v.indexOf(s)<0});return h.length?(this.options.preload=v.concat(h),this.loadResources(function(s){f.resolve(),d&&d(s)}),f):(d&&d(),Promise.resolve())}},{key:"dir",value:function(r){if(r||(r=this.languages&&this.languages.length>0?this.languages[0]:this.language),!r)return"rtl";var d=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return d.indexOf(this.services.languageUtils.getLanguagePartFromCode(r))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;return new t(r,d)}},{key:"cloneInstance",value:function(){var r=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nw,v=oh({},this.options,d,{isClone:!0}),h=new t(v),s=["store","services","language"];return s.forEach(function(U){h[U]=r[U]}),h.services=oh({},this.services),h.services.utils={hasLoadedNamespace:h.hasLoadedNamespace.bind(h)},h.translator=new XF(h.services,h.options),h.translator.on("*",function(U){for(var $=arguments.length,V=new Array($>1?$-1:0),q=1;q<$;q++)V[q-1]=arguments[q];h.emit.apply(h,[U].concat(V))}),h.init(v,f),h.translator.options=h.options,h.translator.backendConnector.services.utils={hasLoadedNamespace:h.hasLoadedNamespace.bind(h)},h}}]),t}(Fp),JF=new GZ;const WZ={en:{translation:{numbers:{k:"{{value}}k",m:"{{value}}m",b:"{{value}}bn.",thousand:"{{value}} thousand",million:"{{value}} million",billion:"{{value}} billion"},homePage:{title:"Welcome to the UNSDG data portal",subTitle:"This beta version of the UN Sustainable Development Group Data Portal showcases information on UN teams’ work for the Sustainable Development Goals in 162 countries and territories. The data is drawn from UN INFO, a digital platform used by UN Country teams to boost transparency and accountability for development coordination, managed by the UN Development Coordination Office (DCO). While the datasets are not yet complete for all countries, DCO is working with all UN country teams to address data gaps and to ensure that the information is kept up to date.",totalAvailableFund:"Total available resources",totalRequiredFund:"Total required resources",totalExpenditureFund:"Total expenditure resources",coverage:"% coverage of required resources",unsdcfInDesign:"Cooperation Framework in design",underImplementation:"Under implementation",designCfForTheFirstTime:"Under implementation and designing a Cooperation Framework for the first time",designNewCf:"Under implementation and designing a new Cooperation Framework",legacyUndaf:"Legacy UNDAF",disclaimer:"Funding data refers to the global available and required resources for UN Development Assistance Frameworks and Cooperation Frameworks.",publishedJwps:"UNCTs with JWPs on UNINFO",footnote1:"UNDAF - United Nations Development Assistance Framework",footnote2:"Cooperation Framework in design -  The country is in the process of developing a new programming instrument in line with the 2019 Cooperation Framework guidance.",footnote3:"Cooperation Framework under implementation  - The country is implementing a programming instrument which has been designed utilizing the 2019 Cooperation Framework guidance.",footnote4:"References to Kosovo on this website shall be understood to be in the context of Security Council Resolution 1244 (1999)",globalOverview:{title:"Global Overview",subTitleForRolloutStatus:"The map below displays information on country-level UN collective programming for the countries covered by the Resident Coordinator system. This includes the new UN Sustainable Development Cooperation Frameworks that have been rolled out since 2019, as well as a few older-generation UN Development Assistance Frameworks (UNDAFs). Summary information about specific countries is available through the country filter or by clicking on the map. (In-depth information on the UNCT and its work – programming, funding, efficiencies, and key documents - can be accessed via the “Countries” menu option at the top of the page)",subTitleForUNCTs:"This map displays the countries that have uploaded and published its Cooperation Framework on UNINFO.  Click on the mini pie charts to view more details about the funding data for that country",firstTab:"Cooperation Framework Rollout Status",secondTab:"UNCTs on UNINFO"},sdgsByFundingRequirements:{title:"Where is the money going?"},chartDisclaimer:"Powered by data from UNSDG members via UN INFO",keyDocuments:{title:"Key Documents"}},country:{title:"Country",unctOverview:"UNCT Overview",programming:"Programming",funding:"Funding",efficiency:"Efficiency",documents:"Documents"},publishedDate:"Published Date",sustainableDevelopmentGoals:"Sustainable Development Goals",geography:"Geography",implementingPartners:"Implementation Partners",contributingPartners:"Contributing Partners",strategicPriorities:"Strategic Priorities",outcomes:"Outcomes",outputs:"Outputs",strategicPrioritiesOutcomes:{subTitle:"The UNDAF/Cooperation Framework has the following strategic priorities and their corresponding outcomes."},year:"Year",allYears:"All years",noFilter:"No Filter",noOptions:"No options",loading:"Loading...",investingPartners:"Investing Partners",availableResources:"Total Available Resources",requiredResources:"Required Resources",notEnoughData:"Not enough data for this section",noDataAvailableForThisSection:"No data available for this section",noDataAvailableForThisRequest:"No data available for this request",notEnoughDataForGraph:"Data is not available for this chart",noAvailableDataForGraphFilters:"No data available for the selected filter options",name:"Name",email:"Email",title:"Title",agency:"Agency",physicalPresence:"Physical presence",jobTitle:"Job title",representativeName:"Representative Name",unAgency:"Entities",documentType:"Document Type",startDate:"Start date",endDate:"End date",download:"Download",groupingBy:"Grouping by",organizationType:"Organization Type","Country Overview":"Country Overview","Data Portal":"Data Portal",Global:"Global","All Countries":"All countries",unctComposition:{title:"UNCT Composition and Signatories",titleKosovo:"Kosovo Team Composition",unctMember:"UNCT member",physicalPresence:"Physical presence of Entities in the UNCT",present:"Present",nonPresent:"Non Present",ccaParticipation:"Agencies Participating in CCA",signedCF:"Entities are signatories to",agencyParticipationInCCADevelopment:"Participation in CCA development/update",participated:"Participated in CCA",notParticipated:"Did not participate",signatory:"Signatory"},documents:{title:"Documents",categories:"Categories",notFound:"No document found for this request",selectFilters:{title:"Select from the following filter options and then click the 'search' button to retrieve a list of documents.",one:"To view and download all documents from one country, choose a country and leave the other filter options blank.",two:"To view and download the same document from all countries, choose a document type and leave the other filter options blank.",three:"To view and download one document from one country, use both the country and document type fields."},search:"Search",clearFilters:"Clear all filters"},countryKeyInformation:{programmingStatus:"Programming cycle status",coverageRequiredResources:"Coverage of required resources",myffRequiredResources:"Multi-Year Funding Framework's required resources*",currentCycleAvailableResources:"Joint Work Plan's available resources",currentCycleRequiredResources:"Joint Work Plan's required resources",programmingDocType:"Programming document type",currentProgrammationDocument:"Current programming document published on UNINFO",numAgenciesSignedUNDAF:"Number of agencies who have signed up to UNDAF/CF",requiredResources:"Total required resources",availableResources:"Total available resources",percentCoverage:"% coverage of required resources",cfRolloutStatus:"CF rollout status",isJWPonUNINFO:"Is JWP on UNINFO?",countryKeyInformation:"Key Information",currentPublishedFramework:"Current published framework on UNINFO",JWPNotPublished:"JWP not currently published on UNINFO",planPublishDisclaimer:"Current published JWP on UNINFO",dataNotAvailable:"funding data not available",figureFromLastAnnualSurvey:"Figure from last annual survey",disclaimer:"The funding data above is provided from the country’s programming document (UNDAF/Cooperation Framework) uploaded in the UNINFO platform by UN country teams with the support of UNDCO. The data are being continuously validated and updated, in this beta version.",myffDisclaimer:"* The Multiyear Funding Framework (MYFF) is a financial planning tool which presents the overall picture of the financial resources required to deliver the entire UNSDCF programme cycle. While the MYFF is a requirement for all UNSDCF, some UNCTs are still in the process of developing a MYFF and resources required and available for their annual Joint Work Plans are used in lieu until then."},trackingTheProgressPieChart:{title:"Tracking the progress of UN programmatic interventions",sdg:"Sustainable Development Goal",organization:"UN Entity",subTitle:"This chart shows the number of different UN programmatic interventions planned per {{entity}}. For each segment of the pie, the popout shows our progress to date in implementing these programmatic interventions. ‘In progress’ means that an programmatic intervention is either in the pipeline or in implementation; ‘Completed’ means that an programmatic intervention is finalised or closed; ‘on hold’ means that an programmatic intervention has been suspended or cancelled. {{note}}",note:"Note that for each UN entity, only programmatic interventions that have a financial value associated with the UN Entity are counted.  Programmatic interventions linked to the UN Entity but with no financial value are not counted.",activities:"{{ sum }} programmatic interventions ({{avg}}%)",sidebarTitle:"{{totalActivities}} programmatic interventions in Joint Workplan"},howMuchWeNeedBarChart:{title:"How much we need, how much we have: The UN funding gap by {{entity}} in {{countryName}}",subTitle:"This visual represents the funding gap of the UN's contribution in country by SDG. It does not represent the total funding gap for the achievement of each SDG in the country.",entitySubTitle:"This visual represents the funding gap by UN Entity in country, based on agreements with national partners in implementing the UNDAF/Cooperation Framework. Only the top UN entities based on required resources are displayed below, and the total required and available funds are derived from those entities that are shown.",coverage:"{{value}}% coverage of required resources",percentCoverage:"{{value}}% coverage",requiredResources:"{{value}} required resources",availableResources:"{{value}} available resources",popupRequired:"${{value}} <strong>required resources</strong>",popupAvailable:"${{value}} <strong>available resources</strong>",popupCoversage:"{{value}}% <strong>coverage</strong>",keyTotalRequired:"Total Required Resources",keyAvailableResources:"Available Resources (in USD millions)",yAxis:"Y Axis",sdg:"Sustainable Development Goal",organization:"UN Entity"},resourceMobilization:{title:"Required, Available, and Expenditure per result",subTitle:"Resources required, available and expenditure by strategic priority, outcome or output.",popupExpenditure:"${{value}} <strong>expenditure</strong>",keyAvailableResources:"Total Available Resources",keyExpenditure:"Total Expenditure (in USD millions)"},requiredAvailableExpenditureBarChart:{title:"Required Resources, Available Resources and Expenditure values by Agency",subTitle:"The available vs required resources (funding) per strategic priority and outcome in a specified country.",popupExpenditure:"${{value}} <strong>expenditure</strong>"},whereIsGanttChart:{title:"Roadmap for the next programming cycle"},whereIsTheMoneyGoingTreeMap:{title:"Where is the money going? How the UN contributes to the SDGs",subTitle:"The graphic below provides a visual representation of available resource allocations that are contributing to SDGs, as selected by each UN entity in the Joint Work Plan. Where a sub-output contributes to multiple SDGs, the available funding is divided equally across the SDGs Goals (based on the tagged SDG targets).",allocationsTitle:"Where is the money going? Available resources by UN entities",allocationsSubtitle:"The graphic below provides a visual representation of resource allocations dedicated to each UN entity, based on the available resources in joint workplan. Only the top {{value}} UN entities based on available resources are displayed below.",comingFromTitle:"Where is the money coming? Available resources from contributing partners",comingFromSubtitle:"The below graphic illustrates available resources from each contributing partner, based on the available resources in joint workplan. Only the top {{value}} contributing partners are displayed below.",comingFromParentTitle:"Where is the money coming? Available resources from parent contributing partners",comingFromParentSubtitle:"The below graphic illustrates available resources from each parent contributing partner, based on the available resources in joint workplan. Only the top {{value}} parent contributing partners are displayed below.",availableResources:"Available Resources ${{ value }}",topAvailableResources:"Available resources from top {{ organizations }} organizations ${{ value }}",availableNumber:"<strong>Available</strong>: ${{availableRounded}}",ofTotal:"{{value}}% of total",noFilter:"No Filter",strategicPriorities:"Strategic Priorities",noResults:"No results for selected filters",sdg:"SDG Goal",organization:"UN Entity"},notLinkedSdgDisclamer:{needAvailable:"These figures exclude an additional ${{availableResources}} of programmes available resources that are currently not yet attributed to a particular SDG on UNINFO.",needRequired:"Required resources not attributed to a particular SDG are ${{requiredResources}}"},howTheUnIsSupporting:{title:"The Sustainable Development Goals",subTitle:"The UN’s work is tagged to the following SDGs:",noDataAvailable:"No data available for this section"},whereWeWorkMap:{title:"Where we work: The UN’s programmatic interventions",subTitle:"The UN is implementing {{keyActivities}} Programmatic interventions during the ongoing programme cycle. The map below displays <strong>the number of programmatic interventions* per location</strong> (note that an programmatic intervention may be linked to more than one location). Using the filters below, click on the number on the map to get a summary description of the various programmatic interventions.",activities:"{{count}} programmatic intervention",activities_plural:"{{count}} programmatic interventions",locationsAdminLevel1:"Locations (admin level 1)",nationallyImplemented:"These programmatic interventions are nationally implemented",multicountryImplemented:"These programmatic interventions cover multiple countries",nonSpecificLocations:"These programmatic interventions are not tied to a specific administrative level within the workspace",agency:"Agency",investingPartners:"Investing Partners",implementingPartners:"Implementation Partners",sdgs:"Sustainable Development Goal",noFilter:"No Filter",activityDisclaimer:"*Programmatic interventions are also commonly referred to as 'sub-outputs', see the JWP Guidance tip sheet 2019 definition"},genderHumanRightsContributionLevel:{title:"Thematic Marker Overview",subTitle:"The Human Rights Marker, Gender Equality Marker, and Sustaining Peace Marker are used by the UN Team to demonstrate how development programming in the UNSDCF Joint Workplan support these thematic sectors. Each sub-output in the joint workplan is measured on a 0-3 scale on its contribution to the corresponding marker. Click <1>HERE</1> to review our guidance for applying markers to UNSDCF Joint Workplan. These visuals display the number of programmatic interventions with the different scales per marker.",marker0:"Marker 0",marker1:"Marker 1",marker2:"Marker 2",marker3:"Marker 3",noLinkedMarker:"No marker"},fundingByMarker:{title:"Funding by Marker",subTitle:"The Human Rights Marker, Gender Equality Marker, and Sustaining Peace Marker are used by the UN Team to demonstrate how development programming in the UNSDCF Joint Workplan support these thematic sectors. Each sub-output in the joint workplan is measured on a 0-3 scale on its contribution to the corresponding marker. Click <1>HERE</1> to review our guidance for applying markers to UNSDCF Joint Workplan. These visuals display funding per scales per marker.",marker0:"Marker 0",marker1:"Marker 1",marker2:"Marker 2",marker3:"Marker 3",noLinkedMarker:"No marker",markerType:"Marker Type",fundingType:"Funding Type"},requiredAvailableExpenditurePerYear:{title:"Required, Available, and Expenditure per Year",subTitle:"Resources available, required, and expended in this country.",keyAvailableResources:"Available Resources",keyRemainingAvailableResources:"Remaining Available Resources",keyExpenditureResources:"Total Expenditure",totalAvailableResources:"Total Available Resources"},linkingInvestments:{middle:"Middle",end:"End",unassigned:"Not Specified",title:"Leveraging UN investments to advance the Sustainable Development Goals",disclaimer:"This chart displays the top 20 contributors in the left side. It excludes some contributing partners and agencies due to data visualization limitations. For more details, please download the UN team's joint workplan from the <1>the Data Explorer</1>",subTitle:"This graphic shows how UN funding is contributing to the work of different agencies and partners to advance the Sustainable Development Goals (SDGs). The width of the lines represents the relative amount of resources being contributed.",hoverNodeLink:"$USD {{value}}",parentContributingPartner:"Parent contributing partner",contributingPartner:"Contributing partner"},deliveryRate:{title:"Delivery rate in {{countryName}}",subTitle:"Resources expended and available in this country."},markerContributionByOutcome:{title:"Marker contribution by results",subTitle:"Displaying marker contributions by results. This visual displays the number of programmatic interventions with marker scales by strategic priority, outcome or output.",significantObject:"Significant objective",principleObjective:"Principal objective",significantContribution:"Significant contribution",principleContribution:"Principal contribution",humanRights:"Human rights",genderMarker:"Gender marker"},markerContributionBySDG:{title:"Marker contribution by SDG",subTitle:"Number of programmatic interventions by SDG. This visual displays the number of programmatic interventions with marker scales by SDG."},numberOfActivitiesPerAgency:{title:"Number of Programmatic interventions per Agency",subTitle:"Programmatic interventions are grouped by 'In progress', 'Completed', or 'On hold'.   ‘In progress’ means that an programmatic intervention is either in the pipeline or in implementation; 'Completed' means that an programmatic intervention is finalised or closed; ‘on hold’ means that an programmatic intervention has been suspended or cancelled.",inProgress:"In progress",completed:"Completed",onHold:"On hold"},numberOfActivitiesPerBeneficiary:{title:"Number of Programmatic Interventions Targeting LNOB Groups",subTitle:"There are 20 global standard Leave No One Behind (LNOB) groups identified and targeted through various programmatic interventions at the country level. The UN Team also has the option to identify 'others', allowing them to include groups not explicitly specified in the 20 standard groups. Certain UN Teams have identified custom beneficiaries that are not showcased below. For more details, please download the UN team's joint workplan from <1>the Data Explorer</1>.",noBeneficaries:"No specific beneficiaries identified"},dataExplorer:{title:"Data Explorer",cooperationFramework:"Cooperation Framework",imsLogIn:"Please log in to see IMS reports",activityReport:{title:"Sub-Output report",chooseFilters:"Choose a country and a plan to view its Sub-Output report"},agencyReport:{countriesInWhichUNEntityParticipatesJointProgrammes:"Countries in which UN Entity participates in Joint Programmes",percentOfCountriesParticipate:"% of countries in which UN Entity participates",countriesParticipatingInUNDAF:"Countries in which UN Entity participates in UNDAF/Cooperation Framework",totalCountOfCountriesWithUNDAF:"Total count of countries with UNDAF/Cooperation Framework",totalCountOfCountriesWithJointProgramme:"Total count of countries with Joint programmes",jointProgrammingDetails:"Joint programming details"},countryFactsheet:{title:"Country Profiles",noReportsForWorkspace:"The selected workspace and year does not have any IMS reports associated with it",noPublishedSurvey:"The associated IMS survey has not been published yet"},disabilityGenderReports:{title:"Disability & Gender Reports",noReportsForWorkspace:"The selected workspace and year does not have any IMS reports associated with it",noPublishedSurvey:"The associated IMS survey has not been published yet"},indicatorReport:{indicatorSummary:"Indicator summary",totalNumberOfIndicators:"Total number of indicators",numberOfIndicatorsMissingBaselines:"Number of indicators missing baselines"},contacts:{presence:"Has physical presence",responsibilities:"Responsibilities",uncgLead:"UNCG Lead",headOfRCO:"Head of RCO",headOfRCOKosovo:"Head of Development Coordination Office",organization:"Organization",headOfOffice:"Is head of office / Main contact"}},preparationOfCcaReport:"Preparation of CCA Report",designOfTheCooperationFramework:"Design of the CF launched",prioritizationDraftResultsFramework:"CF Prioritization Process",narrativeCooperationFramework:"CF outcomes and outputs agreed, and draft CF developed",preparationOfTheReviewOfUnctConfiguration:"UNCT Configuration Exercise conducted",signatureOfTheCooperationFramework:"Signature of the Cooperation Framework",preparationOfFundingFramework:"Preparation of Multiyear Funding Framework",preparationOfUnResourcesMobilizationStrategy:"Preparation of UN resources mobilization strategy",preparationOfUnCountryProgrammingInstruments:"Preparation of UN country programming instruments",numberOfImplmentingPartnersWithEachUNEntityWithinAPlan:"Number of Implementation Partners with each UN Entity Within a Plan",establishmentOfCooperationFrameworkGovernanceAndManagementStructures:"Establishment of CF governance and management structures",preparationOfJointWorkPlans:"Preparation of joint work plans in UNINFO ",conductOfEvaluation:"Conduct of Evaluation of current UNDAF/CF",draftCooperationFrameworkValidatedWithGovernmentAndPartners:"Draft CF validated with government and partners ",mapDisclaimer:"The designations employed and the presentation of material on this map do not imply the expression of any opinion whatsoever on the part of the Secretariat of the United Nations concerning the legal status of any country, territory, city or area or its authorities, or concerning the delimitation of its frontiers or boundaries.",roadmapReport:{title:"CF Roadmap Dashboard"},countrySnapshot:{title:"UNCT snapshot",surveyYear:"IMS Survey Year",cooperationFramework:{title:"UNDAF / Cooperation Framework",noResults:"The current year doesn't have a published plan yet. Choose a previous year to view its plan.",noImsResults:"The current year doesn't have a published survey yet. Choose a previous year to view its survey.",dateOfSignature:"Date of signature",startDate:"Start Date",endDate:"End Date",totalPlannedBudget:"Total planned budget of UNDAF/Cooperation Framework (Currency USD)",annualFunding:"Annual funding framework in UN INFO ?",annualJointWorkPlan:"Annual Joint Work Plan for UNDAF/CF ?",monitoredOnUninfo:"JWP monitored and reported on UNINFO ?"},businessOperation:{title:"Business Operation"},jointProgrammes:{title:"Joint Programmes",total:"Total number of joint programmes",name:"Joint Programme name",thematicAreas:"Sector/Thematic areas of the Joint Programme",fund:"Were the funds for the Joint Programme expended in the last year?",modality:"Which modality?",entitiesParticipation:"Participating UN Entities",budget:"Budget $"},partnership:{title:"Partnership",externalCategories:"What external partnership categories does the UN have beyond national government ministries",unctIfis:"How does the UNCT engage with IFIs"},resultGroups:{title:"Result Groups",nameOfGroup:"Name of group",coChairs:"List of Chairs or Co-chairs",jwpOnUninfo:"JWP on UNINFO",jwpSignedGovernment:"JWP signed by government",rgGroupMeets:"The RG group meets at least every two months",jwpDeveloped:"Joint Work Plan (JWP) developed",jwpJointEndorsed:"JWP endorsed by the Joint National-UN Steering Committee ",jwpUnctEndorsed:"JWP endorsed by UNCT members",howManyTimesDidTheResultsGroupMeetInThePastYear:"How many times did the Results Group meet in the past year?"},generalInformation:{title:"General Information",residentCoordinator:"Resident Coordinator, HC",developmentCoordinator:"Development Coordinator, HC",headOfRco:"Head of RCO",headOfRcoKosovo:"Head of Development Coordination Office",name:"Name",email:"Email",jobTitle:"Job Title"},humanRightsAndGender:{title:"Human Rights and Gender",averageRating:"Average scorecard rating",scorecards:"Scorecards",genderScorecard:"Gender Scorecard",sexualExploitationPrevention:"Sexual Exploitation Prevention",disabilityScorecard:"Disability Scorecard",youthScorecard:"Youth Scorecard",scorecardPercent:"{{value}}%",indicatorTotal:"{{ has }} out of {{ totalIndicators }} indicators"}},comparisonCharts:{title:"Gender and Disability Scorecards",disability:{title:"Progress on Disability Inclusion Scorecard​ % of indicators by status​"},gender:{title:"Progress on Gender Scorecard​ % of indicators by status​"}},dataAccessSwitcher:{title:"Admin UI Data Toggle",infoAlert:"These filters will affect the data for all charts and reports on the site"},report:{noMarkerName:"Note: The row with no marker name is for the sub-outputs that have not been linked to any specific marker"},commonPremisesReport:{about:"This is your access point to global, United Nations Premises information, providing up-to-date intelligence on UN presence,  looking at rental and operational costs, number of personnel, office size, location, and more. The information is sourced from United Nations Entities on the ground, which are leveraging the shared information for a strategic and efficient planning towards space for their accommodation needs."},bosReport:{about:"This section showcases efficiency gains deriving from common services identified in the Business Operations Strategies of United Nations entities at the country level across the world. Explore insights on high-impact common services, participating entities and resulting efficiency gains to optimize your business operations and further enable more UN-wide cooperation at the country level."}}},fr:{translation:{"No Poverty":"Pas de pauvreté ","Zero Hunger":"Faim « zéro »","Good Health and Well-being":"Bonne santé et bien-être","Quality Education":"Education de qualité","Gender Equality":"Egalité entre les sexes","Clean Water and Sanitation":"Eau propre et assainissement","Affordable and Clean Energy":"Energie propre et d'un coût abordable","Decent Jobs and Economic Growth":"Travail décent et croissance économique","Industry, Innovation and Infrastructure":"Industrie, innovation et infrastructure","Reduced Inequalities":"Inégalités réduites","Sustainable Cities and Communities":"Villes et communautés durables","Responsible Consumption and Production":"Consommation et productions responsables","Climate Action":"Mesures relatives à la lutte contre les changements climatiques","Life Below Water":"Vie aquatique","Life on Land":"Vie terrestre","Peace and Justice - Strong Institutions":"Paix, justice et institutions efficaces","Partnerships for the Goals":"Partenariats pour la réalisation des objectifs",sustainableDevelopmentGoals:"Objectifs de développement durable",geography:"Zone géographique",implementingPartners:"Partenaires d'exécution",contributingPartners:"Partenaires financiers",investingPartners:"Partenaires d'investissement",noFilter:"Aucun Filtre",strategicPriorities:"Priorité stratégique",year:"Année",allYears:"Toutes les années",trackingTheProgressPieChart:{title:"Suivre le progrès des activités de l'ONU dans le pays",subTitle:"Ce graphique montre le nombre d'activités différentes de l'ONU planifiées par objectif de développement durable. Le tableau ci-dessous montre, pour chaque segment de la tarte, l'état d'avancement de la mise en œuvre de ces activités. «En cours» signifie qu’une activité est en cours de réalisation ou en cours d’exécution, tandis que «en attente» signifie qu’une activité a été suspendue ou annulée.",activities:"{{ sum }} activités ({{avg}}%)"},howMuchWeNeedBarChart:{title:"De combien avons-nous besoin ? De combien disposons-nous ? Le déficit de financement des Nations Unies par objectif de développement durable dans le pays, {{countryName}}.",subTitle:"Ceci représente le déficit de financement des Nations Unies par ODD dans le pays, en fonction des accords avec les partenaires nationaux. Cela ne représente pas le déficit de financement total pour la mise en oeuvre de chaque ODD.",percentCoverage:"{{value}}% coverage",requiredResources:"{{value}} ressources requises",availableResources:"{{value}} ressources disponibles"},whereIsTheMoneyGoingTreeMap:{title:"Où va l'argent ? Comment l'ONU contribue-t-elle à la mise en œuvre des objectifs de développement durable dans le pays ?",subTitle:"Ce graphique montre, pour une année donnée, comment l’ONU répartit ses ressources sur les différents objectifs de développement durable au niveau du pays.",availableResources:"Ressources requises ${{ value }}",availableNumber:"<strong>Disponible</strong> ${{availableRounded}}",ofTotal:"{{value}}% du total",strategicPriorities:"Priorité Stratégique",noResults:"Aucun résultat pour la sélection faite"},whereWeWorkMap:{title:"Où intervenons-nous ? Les activités clés de l'ONU.",subTitle:"L'ONU met en œuvre {{keyActivities}} activités clés dans: {{location}}",activities:"{{count}} activité",activities_plural:"{{count}} activités",agency:"Agences",investingPartners:"Partenaires d'investissement",implementingPartners:"Partenaires d'exécution",sdgs:"Objectif de développement durable"},linkingInvestments:{title:"Liens entre investissements, partenaires et objectifs de développement durable",subTitle:"Ce graphique montre comment les investissements contribuent à financer l'action des différents partenaires et organismes pour faire progresser la réalisation des objectifs de développement durable au niveau du pays. La largeur des lignes représente le montant relatif des ressources apportées. Vous pouvez utiliser les filtres pour visualiser les zones géographiques, les objectifs de développement durable, les entités de l’ONU et les partenaires d’exécution nationaux vers lesquels sont orientés ces investissements.",middle:"Centre",end:"En dernier",hoverNodeLink:"$USD {{value}}",footer:"La mention ‘Not specified’ (Non spécifié) fait référence aux ressources consacrées à des activités qui n'ont pas été reliées à des points de données tels que des partenaires financiers, des ODD, des entités, ou des partenaires d'exécution.",disclaimer:"Le tableau ci-dessus présente les 20 premiers partenaires financiers par contribution financière et les 20 premiers partenaires d'exécution par budget total des sous-résultats associés. Tous les autres partenaires sont regroupés respectivement sous 'Autres partenaires financiers' ou 'Autres partenaires d'exécution'. Pour voir tous les partenaires, veuillez extraire le 'Plan de travail conjoint' de la section 'Explorateur de données'."},howTheUnIsSupporting:{title:"Les objectifs de développement durable dans {{countryName}}",subTitle:"Les objectifs de développement durable (ODD), également appelés objectifs globaux, constituent un appel universel à l'action visant à éliminer la pauvreté, à protéger la planète et à garantir à tous les peuples la paix et la prospérité. Ce sont aussi les objectifs de l'ONU dans {{countryName}}"}}},vi:{translation:{"No Poverty":"Xóa nghèo","Zero Hunger":"Không còn nạn đói","Good Health and Well-being":"Sức khỏe và có cuộc sống tốt","Quality Education":"Giáo dục có chất lượng","Gender Equality":"Bình đẳng giới","Clean Water and Sanitation":"Nước sạch và vệ sinh","Affordable and Clean Energy":"Năng lượng sạch với giá thành hợp lý","Decent Jobs and Economic Growth":"Công việc tốt và tăng trưởng kinh tế","Industry, Innovation and Infrastructure":"Công nghiệp, sáng tạo và phát triển hạ tầng","Reduced Inequalities":"Giảm bất bình đẳng","Sustainable Cities and Communities":"Các thành phố và cộng đồng bền vững","Responsible Consumption and Production":"Tiêu thụ và sản xuất có trách nhiệm","Climate Action":"Hành động về khí hậu","Life Below Water":"Tài nguyên và môi trường biển","Life on Land":"Tài nguyên và môi trường trên đất liền","Peace and Justice - Strong Institutions":"Hòa bình, công lý và các thể chế mạnh mẽ","Partnerships for the Goals":"Quan hệ đối tác vì các mục tiêu",trackingTheProgressPieChart:{title:"Theo dõi tiến trình hoạt động của Liên Hợp Quốc ở trong nước",subTitle:"Biểu đồ này cho thấy số lượng các hoạt động khác nhau của Liên Hợp Quốc được lên kế hoạch cho mỗi Mục tiêu phát triển bền vững. Đối với mỗi phân khúc của chiếc bánh, bảng bên dưới cho thấy sự tiến bộ của chúng tôi cho đến nay trong việc thực hiện các hoạt động này. Trong tiến trình, có nghĩa là một hoạt động đang trong quá trình thực hiện hoặc đang được triển khai, trong khi ‘giữ lại có nghĩa là một hoạt động đã bị đình chỉ hoặc hủy bỏ."},howMuchWeNeedBarChart:{title:"Chúng ta cần bao nhiêu, chúng ta có bao nhiêu: Khoảng cách tài trợ của Liên Hợp Quốc theo mục tiêu phát triển bền vững ở trong nước {{countryName}}",subTitle:"Hình ảnh này thể hiện khoảng cách tài trợ của SDG về đóng góp của Liên Hợp Quốc tại quốc gia, dựa trên các thỏa thuận với các đối tác quốc gia. Nó không đại diện cho khoảng cách tài trợ cho thành tích của mỗi SDG.",coverage:"coverage of required resources",requiredResources:"{{value}} Tổng tài nguyên cần thiết",availableResources:"{{value}} Tài nguyên có sẵn"},whereIsTheMoneyGoingTreeMap:{subTitle:"Đồ họa này cho thấy cách LHQ phân bổ chi tiêu cho từng Mục tiêu Phát triển Bền vững ở Quốc gia, trong các năm khác nhau.",title:"Tiền đi đâu mất rồi? Làm thế nào Liên Hợp Quốc tài trợ cho các mục tiêu phát triển bền vững ở trong nước",availableResources:"Tài nguyên có sẵn ${{ value }}",availableNumber:"Tài nguyên có sẵn: ${{availableRounded}}"},howTheUnIsSupporting:{title:"Các Mục tiêu Phát triển Bền vững tại Việt Nam",subTitle:"Các Mục tiêu Phát triển Bền vững kêu gọi hành động toàn cầu nhằm xóa đói giảm nghèo, bảo vệ môi trường và khí hậu trái đất và đảm bảo mọi người ở khắp mọi nơi có thể tận hưởng hòa bình và thịnh vượng. Đây là những mục tiêu mà Liên Hợp Quốc đang thực hiện ở Việt Nam."},whereWeWorkMap:{title:"Nơi chúng tôi làm việc: Các hoạt động chính của UN UN trong nước",subTitle:"Liên Hợp Quốc đang triển khai {{keyActivities}} Các hoạt động chính trên các địa điểm {{locations}} tại Việt Nam",activities:"{{count}} Tổng số hoạt động",activities_plural:"{{count}} Tổng số hoạt động",agency:"Cơ quan",investingPartners:"Đối tác đầu tư",implementingPartners:"Đối tác triển khai",sdgs:"Mục tiêu phát triển bền vững"},linkingInvestments:{title:"Liên kết đầu tư, đối tác và các mục tiêu phát triển bền vững trong nước",subTitle:"Đồ họa này cho thấy các khoản đầu tư đang đóng góp cho công việc của các cơ quan và đối tác khác nhau như thế nào để thúc đẩy các Mục tiêu Phát triển Bền vững ở Quốc gia. Độ rộng của các đường biểu thị số lượng tài nguyên tương đối được đóng góp. Bạn có thể chơi với các bộ lọc để xem các khoản đầu tư được nhắm mục tiêu đến các khu vực địa lý khác nhau, Mục tiêu phát triển bền vững, các cơ quan của Liên hợp quốc và các đối tác triển khai quốc gia.",disclaimer:"Sơ đồ trên thể hiện 20 Đối tác Đóng góp hàng đầu xếp theo mức đóng góp tài chính và 20 Đối tác Thực hiện hàng đầu xếp theo tổng ngân sách liên quan tới kết quả thực hiện. Tất cả các đối tác khác được đưa vào các nhóm Các Đối tác khác' hoặc 'Các Đối tác Thực hiện khác'. Để xem tất cả các đối tác, trích xuất Kế hoạch Thực hiện chung trong mục Tìm hiểu Các số liệu.",hoverNodeLink:"$USD {{value}}"}}},ar:{translation:{numbers:{k:"k{{value}}",m:"m{{value}}",b:"b{{value}}"},"No Poverty":"القضاء على الفقر ","Zero Hunger":"القضاء التام على الجوع","Good Health and Well-being":"الصحة الجيدة والرفاه","Quality Education":"التعليم الجيد","Gender Equality":"المساواة بين الجنسين","Clean Water and Sanitation":"المياه النظيفة والنظافة الصحية","Affordable and Clean Energy":"طاقة نظيفة وبأسعار معقولة","Decent Jobs and Economic Growth":"العمل اللائق ونمو الاقتصاد","Industry, Innovation and Infrastructure":"الصناعة والابتكار والهياكل الأساسية","Reduced Inequalities":"الحد من أوجه عدم المساواة","Sustainable Cities and Communities":"مدن ومجتمعات محلية مستدامة","Responsible Consumption and Production":"الاستهلاك والإنتاج المسؤولان","Climate Action":"العمل المناخي","Life Below Water":"الحياة تحت الماء","Life on Land":"الحياة في البر","Peace and Justice - Strong Institutions":"السلام والعدل والمؤسسات القوية","Partnerships for the Goals":"عقد الشراكات لتحقيق الأهداف",sustainableDevelopmentGoals:"أهداف التنمية المستدامة",geography:"المنطقة الجغرافية",implementingPartners:"الشركاء المنفذون",contributingPartners:"الشركاء المساهمون",investingPartners:"شركاء الاستثمار",availableResources:"Total Available Resources",requiredResources:"Required Resources",notEnoughData:"Not enough data",noDataAvailableForThisSection:"No data available for this section",notEnoughDataForGraph:"Data is not available for this chart",name:"Name",email:"Email",title:"Title",year:"العام",allYears:"كل الأعوام",strategicPriorities:"الأولويات الاستراتيجية",noFilter:"لا مرشحات",agency:"الوكالة",trackingTheProgressPieChart:{title:"تتبع التقدم المحرز في أنشطة الأمم المتحدة في البلد",subTitle:"يوضح هذا الرسم البياني عدد أنشطة الأمم المتحدة المختلفة المخطط لها حسب هدف التنمية المستدامة. ويُظهر الجدول الموجود أدناه، لكل جزء من الدائرة، التقدم الذي أحرزناه حتى الآن في تنفيذ هذه الأنشطة. 'في طور الإنجاز' يعني أن النشاط إما بصدد الإنجاز أو قيد التنفيذ ، بينما يعني 'قيد الانتظار' أنه قد تم تعليق النشاط أو إلغاؤه."},howMuchWeNeedBarChart:{title:"كم نحتاج ، وعلى كم تحصلنا: فجوة تمويل الأمم المتحدة حسب أهدف التنمية المستدامة في البلد",subTitle:"تبين هذه الصورة فجوة تمويل الأمم المتحدة لهدف التنمية المستدامة في البلد ، بناءً على الاتفاقات مع الشركاء الوطنيين، ولا تعبر عن إجمالي فجوة التمويل لتحقيق كل هدف من أهداف التنمية المستدامة "},whereIsTheMoneyGoingTreeMap:{title:"أين تُصرف الأموال؟ كيف تساهم الأمم المتحدة في تنفيذ أهداف التنمية المستدامة في البلد؟",subTitle:"يوضح هذا الرسم البياني كيف تخصص الأمم المتحدة الموارد لكل هدف من أهداف التنمية المستدامة في البلد لسنوات مختلفة.",availableResources:"{{value}}$ الموارد المتوفرة ",availableNumber:"${{availableRounded}} <strong>الموارد المتوفرة</strong>"},whereWeWorkMap:{title:"أين نعمل",subTitle:"تقوم الأمم المتحدد بتنفيذ {{keyActivities}} أنشطة رئيسية في {{location}} موقع في البلد",activities:"{{count}} العدد الإجمالي للأنشطة",activities_plural:"{{count}} العدد الإجمالي للأنشطة"},linkingInvestments:{title:"الربط بين الاستثمارات والشركاء وأهداف التنمية المستدامة في البلد",subTitle:"يوضح هذا الرسم البياني كيف تساهم الاستثمارات في عمل الوكالات والشركاء المختلفين للنهوض بأهداف التنمية المستدامة في البلد. يمثل عرض الخطوط الحجم النسبي للموارد التي يتم المساهمة بها. يمكنك استخدام المرشحات لترى كيف يتم توجيه الاستثمارات نحو مناطق جغرافية مختلفة وأهداف التنمية المستدامة ووكالات الأمم المتحدة وشركاء التنفيذ الوطنيين.",middle:"الوسط",end:"الأخير",footer:"يشير مصطلح 'غير محدد' إلى الموارد المخصصة للأنشطة التي لم يتم ربطها بالنقاط البيانية مثل الشركاء المساهمين، أهداف التنمية المستدامة، الوكالات والشركاء التنفيذيين.",disclaimer:'يعرض الرسم البياني أعلاه أفضل 20 شريكًا مساهمًا بحسب مساهماتهم المالية وأفضل 20 شريكًا منفذاً بحسب الميزانية الإجمالية للمخرجات الفرعية ذات الصلة. يتم تصنيف جميع الشركاء الآخرين تباعًا ضمن خانة "الشركاء المساهمين الآخرين" أو "الشركاء المنفذين الآخرين". للاطلاع على قائمة الشركاء كافة، قم باستخراج خطة العمل المشتركة من القسم المخصص لاستكشاف البيانات.'},howTheUnIsSupporting:{title:"هدف التنمية المستدامة",subTitle:'يشير مصطلح "غير محدد" إلى الموارد المخصصة للأنشطة التي لم يتم ربطها بالنقاط البيانية مثل الشركاء المساهمين، أهداف التنمية المستدامة، الوكالات والشركاء التنفيذيين.'}}},es:{translation:{"No Poverty":"Fin de la pobreza","Zero Hunger":"Hambre cero","Good Health and Well-being":"Salud y bienestar","Quality Education":"Educación de calidad","Gender Equality":"Igualdad de género","Clean Water and Sanitation":"Agua limpia y saneamiento","Affordable and Clean Energy":"Energía asequible y no contaminante","Decent Jobs and Economic Growth":"Trabajo decente y crecimiento económico","Industry, Innovation and Infrastructure":"Industria, innovación e infraestructuras","Reduced Inequalities":"Reducción de las desigualdades","Sustainable Cities and Communities":"Ciudades y comunidades sostenibles","Responsible Consumption and Production":"Producción y consumo responsables","Climate Action":"Acción por el clima","Life Below Water":"Vida submarina","Life on Land":"Vida de ecosistemas terrestres","Peace and Justice - Strong Institutions":"Paz, justicia e instituciones sólidas","Partnerships for the Goals":"Alianzas para lograr los objetivos",sustainableDevelopmentGoals:"Objetivos de desarrollo sostenible",geography:"Geografía",implementingPartners:"Asociados en la ejecución",contributingPartners:"Asociado en la financiación",investingPartners:"Asociados inversionistas",strategicPriorities:"Prioridades estratégicas",noFilter:"Mostrar todos los resultados",year:"Año",allYears:"Todos los años disponibles",agency:"Entidad",trackingTheProgressPieChart:{title:"Seguimiento del progreso de las actividades de la ONU en el país",subTitle:"Este gráfico muestra el número de actividades diferentes planeadas por la ONU por objetivo de desarrollo sostenible. Para cada segmento, la tabla de abajo muestra nuestro progreso hasta la fecha en cuanto a la implementación de estas actividades. 'En progreso' significa que la actividad está en curso a realizarse o en la etapa de implementación, mientras que 'en espera' significa que una actividad se ha suspendido o cancelado.",activities:"{{ sum }} actividades ({{avg}}%)",sidebarTitle:"{{totalActivities}} actividades en Joint Workplan"},howMuchWeNeedBarChart:{title:"Cuánto necesitamos, cuánto tenemos: El déficit de financiación de la ONU por Objetivo de Desarrollo Sostenible en {{countryName}}",subTitle:"Este visual representa la brecha de financiamiento de la ONU por ODS dentro del país, en base a los actores nacionales. No representa la brecha de financiamiento total para el logro de cada ODS.",noDataAvailable:"No data available for this section",coverage:"coverage of required resources",percentCoverage:"{{value}}% coverage",requiredResources:"{{value}} Recursos requeridos",availableResources:"{{value}} Recursos disponibles",keyTotalRequired:"Recursos requeridos",keyAvailableResources:"Recursos disponibles (en USD millones)"},whereIsTheMoneyGoingTreeMap:{title:"¿A dónde va el dinero? ¿Cómo contribuye la ONU a los Objetivos de Desarrollo Sostenible en el país?",subTitle:"Este gráfico muestra cómo la ONU asigna los recursos para cada Objetivo de Desarrollo Sostenible en el país, para años diferentes.",availableResources:"Recursos disponibles ${{ value }}",availableNumber:"<strong>disponibles</strong>: ${{availableRounded}}",ofTotal:"{{value}}% of total"},whereWeWorkMap:{title:"Dónde trabajamos: las principales actividades en el país",subTitle:"La ONU está implementando {{keyActivities}} de actividades claves {{location}} ",activities:"{{count}} actividade",activities_plural:"{{count}} actividades",agency:"Agencias",investingPartners:"Socio inversionista",implementingPartners:"Socio ejecutador",sdgs:"Objetivo de Desarrollo Sostenible"},linkingInvestments:{title:"Vinculación de las inversiones, los asociados y los Objetivos de Desarrollo Sostenible en el país",subTitle:"Este gráfico muestra cómo las inversiones están contribuyendo al trabajo de diferentes entidades y asociados para avanzar en los Objetivos de Desarrollo Sostenible en el país. El ancho de las líneas representa la cantidad relativa de recursos aportados. Usted puede usar los filtros para ver cómo las inversiones se dirigen a diferentes ubicaciones geográficas, Objetivos de Desarrollo Sostenible, entidades de la ONU y asociados en la ejecución a nivel nacional.",middle:"Medio",end:"Fin",hoverNodeLink:"$USD {{value}}",footer:"‘No especificado' hace referencia a los recursos, destinados a las actividades, los cuales no han sido vinculados a datos específicos como los relativos a los asociados en la financiación, los ODS, las agencias, o los asociados en la ejecución.",disclaimer:"El gráfico anterior muestra los 20 principales Socios Contribuyentes por contribución financiera y los 20 principales Socios Implementadores por presupuesto total de subproductos asociados. Todos los socios adicionales se agrupan en 'Otros socios contribuyentes' u 'Otros socios implementadores', respectivamente. Para ver todos los socios, ver el Plan de Trabajo Conjunto de la sección Explorador de Datos."},howTheUnIsSupporting:{title:"Los Objetivos de Desarrollo Sostenible en {{countryName}}"}}},lo:{translation:{"No Poverty":"ລຶບລ້າງຄວາມທຸກຍາກ","Zero Hunger":"ລຶບລ້າງຄວາມອຶດຫິວ","Good Health and Well-being":"ມີສຸຂະພາບ & ຊີວິດການເປັນຢູ່ທີ່ດີ","Quality Education":"ມີການສຶກສາທີ່ມີຄຸນນະພາບ","Gender Equality":"ມີຄວາມສະເໝີພາບລະຫວ່າງຍິງ-ຊາຍ","Clean Water and Sanitation":"ມີນໍ້າສະອາດ & ສຸຂະອະນາໄມ","Affordable and Clean Energy":"ມີພະລັງງານທີ່ສະອາດ & ທຸກຄົນສາມາດເຂົ້າເຖິງ","Decent Jobs and Economic Growth":"ມີວຽກເຮັດງານທຳທີ່ມີຄຸນຄ່າ & ເສດຖະກິດມີການເຕີບໂຕ","Industry, Innovation and Infrastructure":"ສົ່ງເສີມການຫັນເປັນອຸດສາຫະກຳ, ການປະດິດສ້າງ & ສ້າງພື້ນຖານໂຄງລ່າງທີ່ເຂັ້ມແຂງ","Reduced Inequalities":"ຫຼຸດຜ່ອນຄວາມບໍ່ສະເໝີພາບ","Sustainable Cities and Communities":"ສ້າງຕົວເມືອງ & ຊຸມຊົນໃຫ້ມີຄວາມຍືນຍົງ","Responsible Consumption and Production":"ສົ່ງເສີມການອຸປະໂພກບໍລິໂພກ & ການຜະລິດຢ່າງມີຄວາມຮັບຜິດຊອບ","Climate Action":"ມີແຜນການຮັບມືກັບການປ່ຽນແປງຂອງດິນຟ້າອາກາດ","Life Below Water":"ອະນຸລັກ ແລະ ນໍາໃຊ້ສິ່ງທີ່ມີຊີວິດໃນນໍ້າແບບຍືນຍົງ","Life on Land":"ອະນຸລັກ ແລະ ນຳໃຊ້ສິ່ງທີ່ມີຊີວິດເທິງໜ້າດິນແບບຍືນຍົງ","Peace and Justice - Strong Institutions":"ມີສັນຕິພາບ, ຄວາມຍຸຕິທຳ & ສະຖາບັນທີ່ເຂັ້ມແຂງ","Partnerships for the Goals":"ເປັນຄູ່ຮ່ວມມືເພື່ອເປົ້າໝາຍການພັດທະນາແບບຍືນຍົງ",trackingTheProgressPieChart:{title:"ການ​ຕິດ​ຕາມ​ຄວາມ​ຄືບ​ໜ້າ​ຂອງ​ກິດ​ຈະ​ກຳ​ຂອງ ອົງ​ການ ສ​ປ​ຊ ໃນ​ປະ​ເທດ",subTitle:"​ເສັ້ນ​ສະ​ແດງນີ້ ສະ​ແດງ​ໃຫ້​ເຫັນ​ເຖິງ​ແຜນ​ກິດ​ຈະ​ກຳ​ຕ່າງໆ​ຂອງ ອົງ​ການ ສ​ປ​ຊ​ ຕໍ່​​ເປົ້າ​ໝາຍ​ການ​ພັດ​ທະ​ນາ​ແບບ​ຍືນ​ຍົງ. ສຳ​ລັບ​ແຕ່​ລະ​ພາກ​ສ່ວນ, ຕາ​ຕະ​ລາງ​ທີ່​ຢູ່​ກ້ອງສະ​ແດງ​ໃຫ້​ເຖິງ​ຄວາມ​ຄືບ​ໜ້າ​ຂອງ​ພວກ​ເຮົາມາ​ຮອດ​ປະ​ຈຸ​ບັນ​ໃນ​ການ​ຈັດ​ຕັ້ງ​ປະ​ຕິ​ບັດ​ບັນ​ດາ​ກິດ​ຈະ​ກຳ​ເຫຼົ່າ​ນີ້. ‘ກຳ​ລັງ​ດຳ​ເນີນ​ການ’ ​ໝາຍ​ຄວາມ​ວ່າ ກິດ​ຈະ​ກຳ ກຳ​ລັງ​ຢູ່​ໃນ​ຂັ້ນ​ດຳ​ເນີນ​ການ ຫຼື​ ກຳ​ລັງ​ຈັດ​ຕັ້ງ​ປະ​ຕິ​ບັດ ໃນ​ຂະ​ນະ​ທີ່ ‘​ໂຈະ’ ໝາຍ​ຄວາມ​ວ່າ ກິດ​ຈະ​ກຳຖືກ​ໂຈະ ຫຼື ຍົກ​ເລີກ."},howMuchWeNeedBarChart:{title:"ພວກ​ເຮົາ​ຕ້ອ​ງ​ການ​ຫຼາຍ​ປານ​ໃດ ແລະ ພວກ​ເຮົາ​ມີ​ຫຼາຍ​ປານ​ໃດ​: ຊ່ອງ​ຫວ່າງ​ດ້ານ​ການ​ສະ​ໜອງ​ທຶນ​ຂອງ​ອົງ​ການ ສ​ປ​ຊ ໃສ່​ໃນ​ເປົ້າ​ໝາຍ​ການ​ພັດ​ທະ​ນາ​ແບບ​ຍືນ​ຍົງ ຢູ່​ໃນ​ປະ​ເທດ: ສ​ປ​ປ ລາວ",subTitle:"ຮູບ​ພາບນີ້​ສະ​ແດງ​ໃຫ້​ເຫັນ​ເຖິງ​ຊ່ອງ​ຫວ່າງ​ດ້ານ​ການ​ສະ​ໜອງ​ທຶນ​ຕໍ່ ປ​ພຍ ທີ່ອົງ​ການ ສ​ປ​ຊ ​ໄດ້​ປະ​ກອບ​ສ່ວນ​ ໂດຍ​ອີງ​ໃສ່​ການ​ຕົກ​ລົງ​ເຫັນ​ດີ​ກັບ​ຄູ່​ຮ່ວມມື​ລະ​ດັບ​ຊາດ​​ ແລະ ບໍ່​ໄດ້​ສະ​ແດງ​ເຖິງ​ຊ່ອງ​ຫວ່າງ​ດ້ານ​ສະ​ໜອງ​ທຶນ​ທັງ​ໝົດ ເພື່ອ​ໃຫ້​ບັນ​ລຸ​ ປ​ພຍ ແຕ່​ລະ​ເປົ້າ​ໝາຍ."},whereIsTheMoneyGoingTreeMap:{subTitle:"ຮູບເສັ້ນສະແດງນີ້ີ້ ສະແດງໃຫ້ເຫັນວ່າ ອົງການ ສປຊ ມີການຈັດສັນຊັບພະຍາກອນຂອງອົງການ ເຂົ້າໃນແຕ່ລະເປົ້າໝາຍການພັດທະນາແບບຍືນຍົງ ໃນ ສປປ ລາວ ໃນແຕ່ລະປີຄືແນວໃດ.",title:"​ງົບ​ປະ​ມານ​ຖືກ​ໃຊ້​ໄປ​ໃນ​ພາກ​ສ່ວນ​ໃດ​ແດ່? ອົງ​ການ​ສະ​ຫະ​ປະ​ຊາ​ຊາດ ສະ​ໜອງ​ທຶນ​ສຳ​ລັບ​ການ​ຈັ​ດ​ຕັ້ງ​ປະ​ຕິ​ບັດ​ເປົ້າ​ໝາຍ​ການ​ພັດ​ທະ​ນາ​ແບບ​ຍືນ​ຍົງ ຢູ່​​ພາຍໃນ​ປະ​ເທດ​ຄື​ແນວ​ໃດ",availableResources:"ແຫຼ່ງຂໍ້ມູນທີ່ມີຢູ່ ${{ value }}",availableNumber:"ແຫຼ່ງຂໍ້ມູນທີ່ມີຢູ່ ${{availableRounded}}"},whereWeWorkMap:{title:"ພວກ​ເຮົາ​ເຮັດ​ວຽກ​ຢູ່​ໃສ​: ກິດ​ຈະ​ກຳ​ທີ່​ສຳ​ຄັນ​ຂອງ ອົງ​ການ ສ​ປ​ຊ ໃນ​ປະ​ເທດ",subTitle:"ອົງການ ສປຊ ກຳລັງຈັດຕັ້ງປະຕິບັດກິດຈະກຳ {{keyActivities}} ກິດຈະກຳທີ່ສຳຄັນ ຢູ່ໃນ {{locations}} ແຫ່ງ ໃນ ສປປ ລາວ",activities:"{{count}} ກິດຈະກຳທັງໝົດ",activities_plural:"{{count}} ກິດຈະກຳທັງໝົດ",investingPartners:"ຄູ່ຮ່ວມລົງທືນ",implementingPartners:"ຄູ່ຮ່ວມງານໃນການຈັດຕັ້ງປະຕິບັດ",sdgs:"ເປົ້າໝາຍການພັດທະນາແບບຍືນຍົງ"},linkingInvestments:{title:"ການ​ເຊື່ອມ​ໂຍງ​ກັນ​ລະ​ຫວ່າງ​ການ​ລົງ​ທຶນ, ຄູ່​ຮ່ວມ​ມື ແລະ ເປົ້າ​ໝາຍ​ການ​ພັດ​ທະ​ນາ​ແບບ​ຍືນ​ຍົງ ​ຢູ່ໃນ ປະ​ເທດ",subTitle:"​ເສັ້ນ​ສະ​ແດງນີ້ ສະ​ແດງ​ໃຫ້​ເຫັນ​ເຖິງ ການ​ລົງ​ທຶນ​ປະ​ກອບ​ສ່ວນ​ແນວ​ໃດ ​ຕໍ່​ກັບ​ວຽກ​ງານຂອງ​ອົງ​ການ ແລະ ຄູ່​ຮ່ວມ​ມື​ຕ່າງໆ ເພື່ອ​ສ້າງ​ຄວາມ​ກ້າວ​ໜ້າ​ຂອງ​ການ​ຈັດ​ຕັ້ງ​ປະ​ຕິ​ບັດ​ເປົ້າ​ໝາ​ຍ​ການ​ພັດ​ທະ​ນາ​ແບບ​ຍືນ​ຍົງ ຢູ່​ໃນ​ປະ​ເທດ. ຄວາມກວ້າງ​ຂອງ​ເສັ້ນສະ​ແດງ​ໃຫ້​ເຫັນ​ເຖິງ ​ຈຳ​ນວນຊັບ​ພະ​ຍາ​ກອນ​ທີ່​ໄດ້​ຮັບ​ການ​ປະ​ກອບ​ສ່ວນ. ທ່ານ​ສາ​ມາດ​ໃຊ້​ຕົວ​ກັ່ນ​ກອງ ເພື່ອ​ເບິ່ງວ່າ​ການ​ລົ​ງ​ທຶນ ​ປະ​ກອບ​ສ່ວນ​ໃສ່​ການ​ພັດ​ທະ​ນາ​ໃນ​ຂົງ​ເຂດ​ໃດ, ເປົ້າ​ໝາຍ​ການ​ພັດ​ທະ​ນາ​ແບບ​ຍືນ​ຍົງ​ເປົ້າ​ໝາຍ​ໃດ, ອົງ​ການ ສ​ປ​ຊ ໃດ ແລະ ຄູ່​ຮ່​ວມ​ມື​ໃນ​ການ​ຈັດ​ຕັ້ງ​ປະ​ຕິ​ບັດ​ໂຄງ​ການໃດ.",disclaimer:"ແຜນວາດຂ້າງເທິງນີ້ໄດ້ສະແດງໃຫ້ເຫັນເຖິງບັນດາຄູ່ຮ່ວມປະກອບສ່ວນ 20 ອັນດັບທຳອິດຕາມການປະກອບສ່ວນດ້ານການເງິນ ແລະ ຄູ່ຮ່ວມຈັດຕັ້ງປະຕິບັດ 20 ອັນດັບທຳອິດຕາມງົບປະມານທັງໝົດຂອງ ໝາກຜົນຍ່ອຍ ທີ່ກ່ຽວຂ້ອງ. ຄູ່ຮ່ວມມືທັງໝົດທີ່ຢູ່ນອກເໜືອຈາກນີ້ແມ່ນໄດ້ຖືກຈັດເຂົ້າພາຍໃຕ້ກຸ່ມ ‘ຄູ່ຮ່ວມປະກອບສ່ວນອື່ນໆ’ ຫຼື ‘ຄູ່ຮ່ວມຈັດຕັ້ງປະຕິບັດອື່ນໆ,’ ຕາມລຳດັບ. ເພື່ອເບິ່ງລາຍຊື່ຄູ່ຮ່ວມມືທັງໝົດ, ໃຫ້ດຶງເອົາ Joint Workplan ອອກຈາກພາກສ່ວນ Data Explorer."}}},pt:{translation:{"No Poverty":"Erradicação da pobreza","Zero Hunger":"Fome zero e agricultura sustentável","Good Health and Well-being":"Saúde e Bem-Estar","Quality Education":"Educação de qualidade","Gender Equality":"Igualdade de género","Clean Water and Sanitation":"Água potável e saneamento","Affordable and Clean Energy":"Energia limpa e acessível","Decent Jobs and Economic Growth":"Trabalho decente e crescimento económico","Industry, Innovation and Infrastructure":"Indústria, inovação e infraestrutura","Reduced Inequalities":"Redução das desigualdades","Sustainable Cities and Communities":"Cidades e comunidades sustentáveis","Responsible Consumption and Production":"Consumo e produção responsáveis","Climate Action":"Ação contra a mudança global do clima","Life Below Water":"Vida na água","Life on Land":"Vida terrestre","Peace and Justice - Strong Institutions":"Paz, justiça e instituições eficazes","Partnerships for the Goals":"Parcerias e meios de implementação",trackingTheProgressPieChart:{title:"Acompanhamento do progresso das atividades das Nações Unidas no país",subTitle:"Este gráfico mostra o número de diferentes atividades das Nações Unidas planeadas por Objetivo de Desenvolvimento Sustentável. Para cada segmento, a tabela abaixo mostra o nosso progresso até o presente momento na implementação dessas atividades. 'Em progresso' significa que a atividade está no pipeline ou em curso, enquanto que 'em espera' significa que a atividade foi suspensa ou cancelada."},howMuchWeNeedBarChart:{title:"Quanto precisamos, Quanto temos: a lacuna de financiamento das Nações Unidas por Objetivo de Desenvolvimento Sustentável no {{countryName}}",subTitle:"Esta imagem representa a lacuna de financiamento das Nações Unidas por ODS no país, com base em acordos com parceiros nacionais. Não representa a lacuna total de financiamento para a realização de cada ODS.",coverage:"coverage of required resources",requiredResources:"{{value}} Resursos Necessários",availableResources:"{{value}} Recursos Disponíveis"},whereIsTheMoneyGoingTreeMap:{subTitle:"Este gráfico mostra como as Nações Unidas usam seus recursos para os Objetivos de Desenvolvimento Sustentável, por diferentes anos.",title:"Onde são investidos os recursos? Como a Nações Unidas financiam os Objetivos de Desenvolvimento Sustentável no país",availableResources:"Recursos Disponíveis ${{ value }}",availableNumber:"<strong>Recursos Disponíveis</strong>: ${{availableRounded}}"},whereWeWorkMap:{title:"Onde trabalhamos: as principais atividades das Nações Unidas no país",subTitle:"A Nações Unidas estão a implementar {{keyActivities}} atividades-chave em {{locations}} localidades ",activities:"{{count}} atividades",activities_plural:"{{count}} atividades",agency:"Agências",investingPartners:"Parceiros de Desenvolvimento e Investimento",implementingPartners:"Parceiros de Implementação",sdgs:"Objetivo de Desenvolvimento Sustentável"},linkingInvestments:{title:"Como se vinculam os Investimentos, os Parceiros e os Objetivos de Desenvolvimento Sustentável no país",subTitle:"Este gráfico mostra como os investimentos contribuem para o trabalho de diferentes agências e parceiros para o avanço dos Objetivos de Desenvolvimento Sustentável no país. A largura das linhas representam a quantidade relativa de recursos contribuídos. Pode usar os filtros para ver como os investimentos são direcionados para diferentes áreas geográficas, Objetivos de Desenvolvimento Sustentável, agências das Nações Unidas e parceiros nacionais de implementação.",disclaimer:"O gráfico acima mostra os 20 principais parceiros financiadores por contribuição financeira e os 20 principais parceiros de implemntação por orçamento total de subprodutos associados. Todos os parceiros adicionais são agrupados em 'Outros Parceiros Contribuintes' ou 'Outros Parceiros de Implementação', respectivamente. Para ver todos os parceiros, baixe o Plano de Trabalho Conjunto da secção Data Explorer."},howTheUnIsSupporting:{title:"Os Objetivos de Desenvolvimento Sustentável em {{countryName}}",subTitle:"Os Objetivos de Desenvolvimento Sustentável são um apelo global à ação para acabar com a pobreza, proteger o meio ambiente e o clima e garantir que as pessoas, em todos os lugares, possam desfrutar de paz e de prosperidade. Estes são os objetivos para os quais as Nações Unidas estão a contribuir a fim de que possamos atingir a Agenda 2030 em {{countryName}}"}}},ru:{translation:{"No Poverty":"Ликвидация нищеты","Zero Hunger":"Ликвидация голода","Good Health and Well-being":"Хорошее здоровье и благополучие","Quality Education":"Качественное образование","Gender Equality":"Гендерное равенство","Clean Water and Sanitation":"Чистая вода и санитария","Affordable and Clean Energy":"Недорогостоящая и чистая энергия","Decent Jobs and Economic Growth":"Достойная работа и экономический рост","Industry, Innovation and Infrastructure":"Индустриализация, инновации и инфроструктура","Reduced Inequalities":"Уменьшение неравенства","Sustainable Cities and Communities":"Устойчивые города и населенные пункты","Responsible Consumption and Production":"Ответственное потребление и производство","Climate Action":"Борьба с изменением климата","Life Below Water":"Сохранение морских экосистем","Life on Land":"Сохранение экосистем суши","Peace and Justice - Strong Institutions":"Мир, правосудие и эффективные институты","Partnerships for the Goals":"Партнерство в интересах устойчивого развития",sustainableDevelopmentGoals:"Цели устойчивого развития",geography:"География",implementingPartners:"Партнеры-исполнители",contributingPartners:"Партнеры по финансированию",investingPartners:"Инвестиционные партнеры",notEnoughData:"Not enough data",trackingTheProgressPieChart:{title:"Отслеживание прогресса деятельности ООН в стране",subTitle:"На этой диаграмме показано количество различных мероприятий ООН, запланированных для достижения цели в области устойчивого развития. Таблица ниже показывает наш прогресс в реализации этих мероприятий. «Выполняется» означает, что действие находится в процессе или находится в процессе реализации, а «в ожидании» означает, что действие было приостановлено или отменено."},howMuchWeNeedBarChart:{title:"Сколько нам нужно, сколько у нас есть: пробелы в финансировании ООН по Целям устойчивого развития",subTitle:"Это изображение отражает дефицит финансирования ООН по ЦУР  в стране на основе соглашений с национальными партнерами. Он не представляет общий дефицит финансирования для достижения каждой ЦУР."},whereIsTheMoneyGoingTreeMap:{title:"Куда направлены средства. Как ООН финансирует Цели устойчивого развития в стране",subTitle:"На этом графике показано ежегодное распределение ресурсов ООН в стране отдельно для каждой из Целей устойчивого развития",availableResources:"Доступные ресурсы ${{ value }}",availableNumber:"<strong>Доступные</strong>  ${{availableRounded}}"},whereWeWorkMap:{title:"Где мы работаем: основные направления деятельности ООН",subTitle:"ООН осуществляет {{keyActivities}} ключевых мероприятий в {{location}}",activities:"{{count}} мероприятия",activities_plural:"{{count}} мероприятия",agency:"Агентства",investingPartners:"Партнеры-инвесторы",implementingPartners:"Партнеры по реализации",sdgs:"Цели устойчивого развития"},linkingInvestments:{title:"Как связаны между собой инвестиции, партнеры и ЦУР в стране",subTitle:"График ниже показывает, как инвестиции способствуют продуктивной работе агентств и партнеров по продвижению Целей устойчивого развития в стране. Ширина линий отражает относительный объем инвестиций. Используйте фильтры, чтобы посмотреть, как именно инвестиции распределены между различными географическими районами, Целями устойчивого развития, агентствами ООН и национальными партнерами по реализации.",middle:"Середина",end:"Окончание",footer:"Системное сообщение ‘Not specified’ («Не указано») относится данным о ресурсах, отведенным на проведение деятельности по достижению ЦУР, которые не были привязаны к точкам данных, таким как партнеры по финансированию, ЦУР, агентства, и партнеры-исполнители.",disclaimer:"На диаграмме выше представлены 20 ведущих партнеров по финанcированию и 20 ведущих партнеров-исполнителей согласно общему бюджету соответствующих суб-результатов. Все остальные партнеры перечислены в разделах «Остальные партнеры по финансированию» (Other Contributing Partners) и «Остальные партнеры-исполнители» (Other Implementing Partners) соответственно. Полный список партнеров можно найти в совместном рабочем плане, находящемся в разделе Data Explorer.",hoverNodeLink:"$USD {{value}}"}}},tk:{translation:{"No Poverty":"Garyplygy aradan aýyrmak","Zero Hunger":"Açlygy ýok etmek","Good Health and Well-being":"Sagdyn durmuş we abadançylyk","Quality Education":"Ýokary hilli bilim","Gender Equality":"Gender deňligi","Clean Water and Sanitation":"Arassa suw we arassaçylyk","Affordable and Clean Energy":"Elýeterli we arassa energiýa","Decent Jobs and Economic Growth":"Mynasyp işleri üpjün etmek ykdysady ösüş","Industry, Innovation and Infrastructure":"Senagatlaşdyrma, Innowasiýalar we Infrastruktura","Reduced Inequalities":"Deňsizligiň azaldylmagy","Sustainable Cities and Communities":"Durnukly şäherler we Ilatly ýerler","Responsible Consumption and Production":"Jogapkär çilikli sarp edişlik we önümçilik","Climate Action":"Howa üýtgemegine garşy göreş","Life Below Water":"Deňziň ekologik ulgamyny gorap saklamak","Life on Land":"Gury ýer ekologik ulgamyny gorap saklamak","Peace and Justice - Strong Institutions":"Parahatçylyk, adalatlylyk we netijeli edaralar","Partnerships for the Goals":"Durnukly ösüş babatynda hyzmatdaşlyk",trackingTheProgressPieChart:{title:"BMG-yň ýürtdaky işleriniň üstünliklerini yzarlamak",subTitle:"Bu diagrammada BMG-y tarapyndan Durnukly ösüşiň maksatlaryna ýetmekde BMG-niň meýilleşdiren dürli çäreleriniň sany görkezilen. Aşakdaky jetwel bu çäreleri amala aşyrmakda biziň üstünliklerimizi görkezýär. 'Ýerine ýetirilýär' diýmegi, bu işiň gidişini ýa-da amala aşyrylýandygyny, 'garaşylýar' diýmegi bolsa, bu işiň togtadylandygyny ýa-da ýatyrylandygyny aňladýar."},howMuchWeNeedBarChart:{title:"Bize näçe gerek, bizde näçe bar: BMG-y tarapyndan Türkmenistanda Durnukly ösüşiň maksatlaryny maliýeleşdirmekdäki kemçilikleri {{countryName}}",subTitle:"Bu milli hyzmatdaşlar bilen ylalaşyklaryň esasynda BMG-y tarapyndan ýurtda Durnukly ösüşiň maksatlaryny maliýeleşdirmekdäki defisiti görkezýär",coverage:"coverage of required resources",requiredResources:"{{value}} serişdeleriň ählisi",availableResources:"{{value}} Elýeterli serişdeler"},whereIsTheMoneyGoingTreeMap:{subTitle:"Maliýe serişdeleri nirä gidýär? Nädip BMG-y ýurtda durnukly ösüşiň maksatlaryny maliýeleşdirýär",title:"Dürli ýyllarda durnukly osüşiñ her bir maksady üçin BMG-nyñ öz serişdelerini paýlaýşy bu çyzgyda görkezilýär.",availableResources:"Elýeterli serişdeler ${{ value }}",availableNumber:"Elýeterli serişdeler : ${{availableRounded}}"},whereWeWorkMap:{title:"Biz nirede zähmet çekýäris",subTitle:"BMG-y Türkmenistanda {{keyActivities}} wajyp çäreleri {{location}} amala aşyrýar",activities:"{{count}} Ähli çäreler",activities_plural:"{{count}} Ähli çäreler",agency:"Agentlikler",investingPartners:"Maliýeleşdirmek boýunça hyzmatdaşlar",implementingPartners:"Ýerine ýetirmek boýunça hyzmatdaşlar",sdgs:"Durnukly ösüş maksatlary"},linkingInvestments:{title:"Türkmenistanda Durnukly ösüş babatynda maýa goýumlarynyň, hyzmatdaşlaryň we maksatlaryň jebisleşdirilmegi",subTitle:"Bu tertipnama ýurtda Durnukly ösüşiň maksatlaryny amala aşyrmakda dürli edaralaryň we hyzmatdaşlaryň işine maýa goýumlarynyň edýän ýardamy görkezilen. Çyzyklaryň ini girizilýän serişdeleriň degişli mukdaryny görkezýär. Siz maýa goýumlarynyň feofrafiki taýdan paýlanandygyny, Durnukly ösüş maksatlaryny, BMG-niň agentliklerini we milli hyzmatdaşlaryny  görmek maksady bilen, filtirleri geçirip bilersiňiz.",disclaimer:"Ýokardaky diagrammada maliýe taýdan goşant goşýan esasy 20 Gatnaşyjy-hyzmatdaşlaryň we degişli Aralyk netijeleriň umumy býudjeti boýunça esasy 20  Ýerine ýetiriji hyzmatdaşlaryň ady görkezilýär. Ähli beýleki hyzmatdaşlar 'Beýleki goşant goşýan hyzmatdaşlar' ýa-da 'Beýleki ýerine ýetiriji hyzmatdaşlar’ toparlara degişlidir. Ähli hyzmatdaşlary görmek üçin Maglumat Gözlegi bölüminden Bilelikdäki iş meýilnamany ýükläp alyň.",hoverNodeLink:"$USD {{value}}"},howTheUnIsSupporting:{title:"Durnukly ösüşüň maksatlary Türkmenistanda",subTitle:"Durnukly Ösüş Maksatlary global derejede garyplygy ýok edip, ýer ýüzüniň daşky gurşawyny gorap we ähli ýerde adamlaryň parahatçylykda we abadançylykda ýaşamagyny üpjün etmek üçin işleri geçirmäge çagyrýar. Bu bolsa BMG-nyň Türkmenistandaky maksatlary bolup durýar. "}}},zh:{translation:{"No Poverty":"无贫穷","Zero Hunger":"零饥饿","Good Health and Well-being":"良好的健康与福祉","Quality Education":"优质教育","Gender Equality":"性别平等","Clean Water and Sanitation":"清洁饮水和卫生设施","Affordable and Clean Energy":"经济适用的健康能源","Decent Jobs and Economic Growth":"体面工作和经济增长","Industry, Innovation and Infrastructure":"产业、创新和基础设施","Reduced Inequalities":"减少不平等","Sustainable Cities and Communities":"可持续城市和社区","Responsible Consumption and Production":"负责任消费和生产","Climate Action":"气候行动","Life Below Water":"水下生物","Life on Land":"陆地生物","Peace and Justice - Strong Institutions":"和平、正义与强大机构","Partnerships for the Goals":"促进目标实现的伙伴关系",sustainableDevelopmentGoals:"可持续发展目标",geography:"所在地",implementingPartners:"执行伙伴",contributingPartners:"捐助伙伴 ",investingPartners:"投資夥伴",year:"年度",allYears:"全部",strategicPriorities:"战略重点",noFilter:"未选择",agency:"机构",whereIsTheMoneyGoingTreeMap:{subTitle:"此图显示了联合国在不同年份为国家的每一个可持续发展目标分配资源的方式。",title:"资金去向？联合国如何帮助该国实现可持续发展目标？"},whereWeWorkMap:{title:"我们的工作地点",subTitle:"联合国在{{location}}落实{{keyActivities}}项关键倡议。",agency:"机构",investingPartners:"投资伙伴",implementingPartners:"执行伙伴",sdgs:"可持续发展目标",noFilter:"没有过滤器"},linkingInvestments:{middle:"中部",end:"右部",unassigned:"Not Specified",title:"将投资、合作伙伴和国家的可持续发展目标联系起来",disclaimer:"以上图表为资金贡献排前二十位的资助伙伴及相关子成果总预算量排前二十位的执行伙伴。所有其他伙伴分别归入 '其他资助伙伴”或“其他执行伙伴'类别。请参考'数据浏览器'中的'联合工作计划' 查看所有合作伙伴。",subTitle:"本图显示了投资促进不同机构和合作伙伴推动国家实现可持续发展目标的方式。线条的宽度代表了所贡献的资源的相对规模。用户可以使用筛选功能，查看投资不同的地理区域、可持续发展目标、联合国机构和国家执行伙伴的投资情况",hoverNodeLink:"$USD {{value}}"}}},sq:{translation:{"No Poverty":"Pa Varfëri","Zero Hunger":"Zero Uri","Good Health and Well-being":"Shëndet dhe Mirëqënie","Quality Education":"Arsim Cilësor","Gender Equality":"Barazi Gjinore","Clean Water and Sanitation":"Ujë i Pastër dhe Kanalizime","Affordable and Clean Energy":"Energji e Pastër dhe e Përballueshme","Decent Jobs and Economic Growth":"Punë Dinjitoze dhe Rritje Ekonomike","Industry, Innovation and Infrastructure":"Industri, Novacion dhe Infrastrukturë","Reduced Inequalities":"Zvogëlimi i Pabarazive","Sustainable Cities and Communities":"Qytete dhe Komunitete të Qëndrueshëm","Responsible Consumption and Production":"Konsum dhe Prodhim i Përgjegjshëm","Climate Action":"Veprim për Klimën","Life Below Water":"Jeta nën Ujë","Life on Land":"Jeta në Steré","Peace and Justice - Strong Institutions":"Paqe dhe Drejtësi, Institucione të Forta","Partnerships for the Goals":"Partneritet për Objektivat",publishedDate:"Data e Botimit",sustainableDevelopmentGoals:"Objektivat e Zhvillimit të Qëndrueshëm",geography:"Gjeografia",implementingPartners:"Partnerët Zbatues",contributingPartners:"Partnerët Kontribues",strategicPriorities:"Përparësitë Strategjike",year:"Viti",allYears:"Të Gjithë Vitet",noFilter:"Pa Filtra",investingPartners:"Partnerët Investues",availableResources:"Fonde të Disponueshme",requiredResources:"Fonde të Nevojshme",notEnoughData:"Nuk ka të dhëna të mjaftueshme për këtë përzgjedhje",noDataAvailableForThisSection:"Nuk ka të dhëna për këtë përzgjedhje",notEnoughDataForGraph:"Nuk ka të dhëna të mjaftueshme për këtë grafik",trackingTheProgressPieChart:{title:"Gjurmimi i Ecurisë së Aktiviteteve të OKB-së në",subTitle:'Ky grafik tregon numrin e veprimtarive të ndryshme të OKB-së të planifikuara sipas secilit Objektiv të Zhvillimit të Qëndrueshëm. Në secilën pjesëz të rrethit, teksti që shfaqet tregon ecurinë e derisotshme në zbatimin e këtyre veprimtarive. "Në vijim" do të thotë që një veprimtari është ose në plan zbatimi ose në zbatim, ndërsa "në pritje do të thotë që një veprimtari është pezulluar ose anuluar.',activities:"{{ sum }} aktivitetet ({{avg}}%)",sidebarTitle:"{{totalActivities}} aktivitetet në Planin e Përbashkët"},howMuchWeNeedBarChart:{title:"Sa Kemi Nevojë, Sa Kemi në Dispozicion: Hendeku i financimit sipas secilit Objektiv të Zhvillimit të Qëndrueshëm",subTitle:"Kjo figurë përfaqëson hendekun e financimit të kontributit të OKB-së në vend, sipas OZhQ-ve, bazuar në marrëveshjet me partnerët kombëtarë. Ai nuk përfaqëson hendekun total të financimit për arritjen e secilit OZhQ-ë.",coverage:"{{value}}% mbulimi i fondeve të nevojshme",percentCoverage:"{{value}}% mbulimi",requiredResources:"{{value}} fonde të nevojshme",availableResources:"{{value}} fonde të disponueshme",popupRequired:"${{value}} <strong>fonde të disponueshme</strong>",popupAvailable:"${{value}} <strong>fonde të disponueshme</strong>",popupCoversage:"{{value}}% <strong>mbulimi</strong>",keyTotalRequired:"Totali i Fondeve të Nevojshme",keyAvailableResources:"Fonde të Disponueshme (në milion USD)",yAxis:"Aksi Y"},whereIsTheMoneyGoingTreeMap:{subTitle:"Kjo grafikë tregon shpërndarjen e fondeve të OKB-së për secilin nga Objektivat e Zhvillimit të Qëndrueshëm në Shqipëri, për vite të ndryshme.",title:"Ku po alokohen fondet? Si kontribuon OKB-ja në Objektivat e Zhvillimit të Qëndrueshëm në",availableResources:"Fonde të Disponueshme ${{ value }}",availableNumber:"<strong>Të Disponueshme</strong>: ${{availableRounded}}",ofTotal:"{{value}}% e totalit",noFilter:"Pa Filtrim",strategicPriorities:"Përparësitë Strategjike",noResults:"Nuk ka rezultate për filtrat e përzgjedhur"},howTheUnIsSupporting:{title:"Objektivat e Zhvillimit të Qëndrueshëm në",subTitle:"Objektivat e Zhvillimit të Qëndrueshëm janë një thirrje globale për veprim për t'i dhënë fund varfërisë, për të mbrojtur mjedisin dhe klimën në tokë dhe për të garantuar që njerëzit kudo ku janë të mund të gëzojnë paqe dhe përparim. Këto janë objektivat për të cilat OKB po punon në",noDataAvailable:"Nuk ka të dhëna të disponueshme për këtë përzgjedhje"},whereWeWorkMap:{title:"Ku punojmë",subTitle:"OKB po zbaton {{keyActivities}} Aktivitete thelbësore në të gjithë {{location}}",activities:"{{count}} aktivitetet",activities_plural:"{{count}} {{count}} aktivitete",locationsAdminLevel1:"Vendndodhje (admin level 1)",nonSpecificLocations:"Këto aktivitete nuk janë të lidhura me një nivel të caktuar administrativ të punës",agency:"Agjenci",investingPartners:"Partnerë Investues",implementingPartners:"Partnerë Zbatues",sdgs:"Objektiv i Zhvillimit të Qëndrueshëm",noFilter:"Pa filtrim"},linkingInvestments:{middle:"E mesme",end:"Fund",unassigned:"Të paspecifikuara",title:"Lidhja e Investimeve, Partnerëve dhe Objektivave të Zhvillimit të Qëndrueshëm në",footer:"'Të paspecifikuara' i referohet fondeve të aktiviteteve të cilat nuk kanë qenë të lidhura me rubrika të të dhënave si p.sh. partnerët kontribues, OZhQ-të, agjencitë, partnerët zbatues.",disclaimer:"Grafiku i mësipërm tregon 20 Partnerët Kontribuues më të mëdhenj sipas kontributit financiar dhe 20 Partnerët Zbatues më të mëdhenj sipas buxhetit total të Nën-Produkteve të lidhura. Të gjithë partnerët e tjerë janë grupuar përkatësisht nën 'Partnerë të Tjerë Kontribuues' ose 'Partnerë të Tjerë Zbatues'. Për të parë të gjithë partnerët, shikoni 'Planet e përbashkëta të Punës' tek seksioni Eksplorimi i të Dhënave.",subTitle:"Ky grafik tregon se si investimet po kontribuojnë në punën e agjencive dhe partnerëve të ndryshëm për të çuar përpara Objektivat e Zhvillimit të Qëndrueshëm në vend. Gjerësia e vijave përfaqëson sasinë relative të fondeve që jepen si kontribut. Ju mund të përdorni filtrat për të parë shtrirjen e investimeve në zona të ndryshme gjeografike, të përzgjidhni të dhëna të renditura sipas Objektivave të Zhvillimit të Qëndrueshëm, agjencive të ndryshme të OKB-së dhe partnerëve zbatues kombëtarë.",hoverNodeLink:"$USD {{value}}"}}},am:{translation:{"No Poverty":"Աղքատության վերացում","Zero Hunger":"Սովի վերացում","Good Health and Well-being":"Ամուր առողջություն և բարեկեցություն","Quality Education":"Որակյալ կրթություն","Gender Equality":"Գենդերային հավասարություն","Clean Water and Sanitation":"Մաքուր ջուր և սանիտարական պայմաններ","Affordable and Clean Energy":"Մատչելի և մաքուր էներգիա","Decent Jobs and Economic Growth":"Արժանապատիվ աշխատանք և տնտեսական աճ","Industry, Innovation and Infrastructure":"Արդյունաբերություն, նորարարություն և ենթակառուցվածքներ","Reduced Inequalities":"Անհավասարությունների կրճատում","Sustainable Cities and Communities":"Կայուն քաղաքներ և համայնքներ","Responsible Consumption and Production":"Պատասխանատու սպառում և արտադրություն","Climate Action":"Գործողություն հանուն կլիմայի","Life Below Water":"Կյանքը ջրի տակ","Life on Land":"Կյանքը ցամաքում","Peace and Justice - Strong Institutions":"Խաղաղություն, արդարություն և ամուր հաստատություններ","Partnerships for the Goals":"Գործընկերություններ հանուն նպատակների",publishedDate:"Հրապարակման ամսաթիվը",sustainableDevelopmentGoals:"Կայուն զարգացման նպատակներ",geography:"Աշխարհագրություն",implementingPartners:"Ծրագրերի իրականացման գործընկերներ",contributingPartners:"Ծրագրերի իրականացմանն աջակցող գործընկերներ",strategicPriorities:"Ռազմավարական առաջնահերթություններ",year:"Տարի",allYears:"Բոլոր տարիները",noFilter:"Առանց ֆիլտրի",investingPartners:"Ներդնում կատարող գործընկերներ",availableResources:"Հասանելի ռեսուրսներ",requiredResources:"Անհրաժեշտ ռեսուրսներ",notEnoughData:"Այս բաժնի համար բավարար տվյալներ չկան",noDataAvailableForThisSection:"Այս բաժնի համար տվյալներ չկան",notEnoughDataForGraph:"Այս գծապատկերի համար տվյալներ չկան",trackingTheProgressPieChart:{title:"Հետևելով ՄԱԿ-ի գործունեության առաջընթացին",subTitle:"Այս գծապատկերը ցույց է տալիս ՄԱԿ-ի կողմից արվող տարբեր միջոցառումների քանակը, որոնք նախատեսված են յուրաքանչյուր Կայուն զարգացման նպատակի համար: Շրջանաձև աղյուսակի յուրաքանչյուր հատվածի համար բացվող պատուհանը ցույց է տալիս մեր առաջընթացը մինչ օրս այս գործողությունների իրականացման հարցում: «Ընթացքի մեջ» նշանակում է, որ գործողությունը կա՛մ ընթացիկ ծրագրի մեջ է, կա՛մ իրագործման փուլում է, մինչդեռ «սպասման մեջ» նշանակում է, որ գործողությունը կասեցվել կամ չեղարկվել է:",activities:"{{ sum }} գործողություններ ({{avg}}%)",sidebarTitle:"{{totalActivities}} Համատեղ աշխատանքային ծրագրում ներառված գործողություններ"},howMuchWeNeedBarChart:{title:"Որքան է մեզ պետք, և որքան ունենք․ ՄԱԿ-ի ֆինանսավորման բացն ըստ Կայուն զարգացման նպատակի",subTitle:"Այս պատկերը ներկայացնում է երկրում ՄԱԿ-ի կողմից ներդրումների ֆինանսավորման բացը յուրաքանչյուր ԿԶՆ-ի համար՝  հիմնված ազգային գործընկերների հետ համաձայնագրերի վրա: Այն չի ներկայացնում ընդհանուր ֆինանսավորման բացը յուրաքանչյուր ԿԶՆ-ին հասնելու համար։",coverage:"{{value}}% պահանջվող ռեսուրսների ծածկույթ",percentCoverage:"{{value}}% ծածկույթ",requiredResources:"{{value}} անհրաժեշտ ռեսուրսներ",availableResources:"{{value}} հասանելի ռեսուրսներ",popupRequired:"${{value}} <strong>անհրաժեշտ ռեսուրսներ</strong>",popupAvailable:"${{value}} <strong>հասանելի ռեսուրսներ</strong>",popupCoversage:"{{value}}% <strong>ծածկույթ</strong>",keyTotalRequired:"Անհրաժեշտ ռեսուրսների ընդհանուր ծավալը",keyAvailableResources:"Հասանելի ռեսուրսներ (ԱՄՆ դոլարով)",yAxis:"Y Առանցք"},whereIsTheMoneyGoingTreeMap:{subTitle:"Այս գծանկարը ցույց է տալիս, թե ինչպես է ՄԱԿ-ը տարբեր տարիների ընթացքում երկրում ռեսուրսներ հատկացնում  Կայուն զարգացման նպատակներից յուրաքանչյուրի համար:",title:"Ինչպե՞ս են բաշխվում գումարները։  Ինչպե՞ս է ՄԱԿ-ը նպաստում Կայուն զարգացման նպատակների իրագործմանը",availableResources:"Հասանելի ռեսուրսներ ${{ value }}",availableNumber:"<strong>Հասանելի</strong>: ${{availableRounded}}",ofTotal:"Ընդհանուր թվի {{value}}%",noFilter:"Առանց ֆիլտրի",strategicPriorities:"Ռազմավարական առաջնահերթություններ",noResults:"Ընտրված ֆիլտրների համար արդյունքներ չկան"},howTheUnIsSupporting:{title:"Կայուն զարգացման նպատակները",subTitle:"Կայուն զարգացման նպատակները համաշխարհային կոչ են՝ վերացնելու աղքատությունը, պաշտպանելու շրջակա միջավայրը և կլիման, ինչպես նաև՝ ապահովելու, որ աշխարհում բոլոր մարդիկ ապրեն խաղաղ և բարեկեցիկ կյանքով։ Ստորև ներկայացված են այն նպատակները, որոնց ուղղությամբ ՄԱԿ-ի թիմն աշխատում է՝",noDataAvailable:"Այս բաժնի համար տվյալներ չկան"},whereWeWorkMap:{title:"Որտեղ ենք մենք աշխատում",subTitle:"ՄԱԿ-ն իրականացնում է հիմնական {{keyActivities}} գործողություններ ամբողջ {{location}}",activities:"{{count}} գործողություն",activities_plural:"{{count}} գործողություններ",locationsAdminLevel1:"Վայրեր (admin level 1)",nonSpecificLocations:"Այս գործողությունները կապված չեն աշխատանքային տարածքի որոշակի վարչական մակարդակի հետ",agency:"Գործակալություն",investingPartners:"Ներդրում կատարող գործընկերներ",implementingPartners:"Ծրագրերի իրականացման գործընկերներ",sdgs:"Կայուն զարգացման նպատակներ",noFilter:"Առանց ֆիլտրի"},linkingInvestments:{middle:"Կենտրոն",end:"Ավարտ",unassigned:"Նշված չէ",title:"Փոխկապակցելով ներդրումները, գործընկերներին և Կայուն զարգացման նպատակները",footer:"Նշված չէ՝ վերաբերում է գործողության ռեսուրսներին, որոնք կապված չեն այնպիսի տվյալների հետ, ինչպիսիք են ծրագրերի իրականացմանն աջակցող գործընկերները, ԿԶՆ-ները, Գործակալությունները, Ծրագրերի իրականացման գործընկերները:",disclaimer:"Վերոնշյալ գծապատկերում ներկայացված են ծրագրերի իրականացմանն աջակցող լավագույն 20 գործընկերները՝ ըստ ֆինանսական ներդրումների, և  ծրագրերի իրականացման 20 լավագույն գործընկերները՝ ըստ ընդհանուր բյուջեի հարակից ենթամասերի: Բոլոր լրացուցիչ գործընկերները խմբավորված են համապատասխանաբար «Ծրագրերի իրականացմանն աջակցող այլ գործընկերներ» կամ «Ծրագրերի իրականացման այլ գործընկերներ» կարգի ներքո: Բոլոր գործընկերներին դիտարկելու համար Տվյալների որոնում բաժնից ընտրեք Համատեղ աշխատանքային պլանը:",subTitle:"Այս գծանկարը ցույց է տալիս, թե ինչպես են ներդրումները նպաստում տարբեր գործակալությունների և գործընկերների աշխատանքին՝ երկրում Կայուն զարգացման նպատակներն առաջ մղելու համար: Գծերի լայնությունը ներկայացնում է տրամադրվող ռեսուրսների հարաբերական քանակը: Դուք կարող եք կիրառել ֆիլտրները՝ տեսնելու, թե ինչպես են ներդրումներն ուղղվում  տարբեր աշխարհագրական տարածքներին, Կայուն զարգացման նպատակներին, ՄԱԿ-ի գործակալություններին և ծրագրերի իրականացման ազգային գործընկերներին:",hoverNodeLink:"ԱՄՆ դոլար  {{value}}"}}},be:{translation:{"No Poverty":"Ліквідацыя галечы","Zero Hunger":"Ліквідацыя голаду","Good Health and Well-being":"Добрае здароўе і дабрабыт","Quality Education":"Якасная адукацыя","Gender Equality":"Гендэрная роўнасць","Clean Water and Sanitation":"Чыстая вада і санітарыя","Affordable and Clean Energy":"Даступная і чыстая энергія","Decent Jobs and Economic Growth":"Годная праца і эканамічны рост","Industry, Innovation and Infrastructure":"Індустрыялізацыя , інавацыі ды інфраструктура","Reduced Inequalities":"Памяншэнне няроўнасці","Sustainable Cities and Communities":"Устойлівыя гарады і населенныя пункты","Responsible Consumption and Production":"Адказныя спажыванне і вытворчасць","Climate Action":"Барацьба са змяненнем клімату","Life Below Water":"Захаванне марскіх экасістэмаў","Life on Land":"Захаванне экасістэмаў сушы","Peace and Justice - Strong Institutions":"Мір, правасуддзе і эфектыўныя інстытуты","Partnerships for the Goals":"Партнёрства ў інтарэсах устойлівага развіцця",publishedDate:"Дата публікацыі ",sustainableDevelopmentGoals:"Мэты ўстойлівага развіцця",geography:"Геаграфія",implementingPartners:"Партнёры па рэалізацыі ",contributingPartners:"Партнёры, якія дапамагаюць унёскам ",strategicPriorities:"Стратэгічныя прыярытэты",year:"Год",allYears:"Усе гады",noFilter:"Без фільтра",investingPartners:"Партнёры-інвестары",availableResources:"Існуючыя рэсурсы",requiredResources:"Патрэбныя рэсурсы",notEnoughData:"Недастатковыя даныя для гэтага раздзела",noDataAvailableForThisSection:"Адсутнічаюць даныя для гэтага раздзела",notEnoughDataForGraph:"Адсутнічаюць даныя для гэтай дыяграмы",trackingTheProgressPieChart:{title:"Адсочванне ходу выканання дзейнасці ААН у",subTitle:"Гэта дыяграма паказвае колькасць розных мерапрыемстваў ААН, запланаваных у адпаведнасці з Мэтай устойлівага развіцця. У кожным сектары дыяграмы ўсплывальнае акно паказвае дасягнуты прагрэс у рэалізацыі гэтых мерапрыемстваў. «У працэсе» азначае, што дзейнасць чакае рэалізацыі,  або знаходзіцца ў стадыі рэалізацыі, а «прыпынена» азначае, што выкананне дзейнасці было прыпынена або адменена.",activities:"{{ sum }} мерапрыемствы ({{avg}}%)",sidebarTitle:"{{totalActivities}} мерапрыемствы ў Сумесным плане працы"},howMuchWeNeedBarChart:{title:"Колькі нам трэба, колькі мы маем: недахоп фінансавання ААН па Мэтах устойлівага развіцця ў",subTitle:"Гэта ілюстрацыя паказвае дэфіцыт фінансавання па МУР у рамках унёску ААН у краіне у адпаведнасці з пагадненнямі з нацыянальнымі партнёрамі. Яна не адлюстроўвае агульны дэфіцыт фінансавання для дасягнення кожнай ЦУР.",coverage:"{{value}}% пакрыцця патрэбных рэсурсаў",percentCoverage:"{{value}}% пакрыцця",requiredResources:"{{value}} патрэбныя рэсурсы",availableResources:"{{value}} існуючыя рэсурсы",popupRequired:"${{value}} <strong>патрэбныя рэсурсы</strong>",popupAvailable:"${{value}} <strong>існуючыя рэсурсы</strong>",popupCoversage:"{{value}}% <strong>пакрыцця</strong>",keyTotalRequired:"Агульная колькасць патрэбных рэсурсаў",keyAvailableResources:"Існуючыя рэсурсы (у млн. долл. ЗША)",yAxis:"Y Axis"},whereIsTheMoneyGoingTreeMap:{subTitle:"Гэта дыяграма паказвае, як ААН размяркоўвала рэсурсы па кожнай з Мэтаў устойлівага развіцця ў краінеКраіне ў розныя гады.",title:"Куды ідуць грошы? Як ААН уносіць свой уклад у дасягненне Мэтаў устойлівага развіцця ў",availableResources:"Існуючыя рэсурсы ${{ value }}",availableNumber:"<strong>Існуючыя</strong>: ${{availableRounded}}",ofTotal:"{{value}}% ад агульнай колькасці",noFilter:"Без фільтра",strategicPriorities:"Стратэгічныя прыярытэты",noResults:"Няма вынікаў для выбраных фільтраў"},howTheUnIsSupporting:{title:"Мэты ўстойлівага развіцця ў",subTitle:"Мэты ўстойлівага развіцця - гэта глабальны заклік да дзеяння, накіраваны на ліквідацыю галечы, абарону навакольнага асяроддзя і клімату Зямлі, а таксама на забеспячэнне таго, каб людзі паўсюль маглі жыць у міры і дабрабыце. Гэта мэты, над якімі працуе ААН у",noDataAvailable:"Адсутнічаюць даныя для гэтага раздзела"},whereWeWorkMap:{title:"Дзе мы працуем",subTitle:"ААН рэалізуе {{keyActivities}} асноўныя віды дзейнасці ў {{location}}",activities:"{{count}} мерапрыемства",activities_plural:"{{count}} мерапрыемствы",locationsAdminLevel1:"Месцазнаходжанне (admin level 1)",nonSpecificLocations:"Гэтыя мерапрыемствы не прывязаныя да канкрэтнага адміністрацыйнага ўзроўню ў працоўнай зоне",agency:"Агенцтва",investingPartners:"Партнёры, якія дапамагаюць унёскам",implementingPartners:"Партнёры па рэалізацыі",sdgs:"Мэты ўстойлівага развіцця",noFilter:"Без фільтра"},linkingInvestments:{middle:"Сярэдзіна",end:"Канец",unassigned:"Не паказана",title:"Звязванне інвестыцый, партнёраў і мэтаў устойлівага развіцця ў",footer:"'Не паказана' адносіцца да рэсурсаў дзейнасці, якія не звязаны з такімі дадзенымі, як партнёры, МУР, агенцтвы, партнёры па рэалізацыі.",disclaimer:"На дыяграме адлюстраваны 20 буйнейшых партнёраў, якія дапамагаюць унёскам, а таксама 20 партнёраў па рэалізацыі згодна агульнаму бюджэту звязаных падрэзультатаў. Усе дадатковыя партнёры згрупаваныя у спісы 'Партнёры, якія дапамагаюць унёскам' і 'Партнёры па рэалізацыі' адпаведна. Каб прагледзець усіх партнёраў, загрузіце Сумесны план працы з раздзелу Праваднік даных.",subTitle:"Гэта дыяграма паказвае, як інвестыцыі садзейнічаюць працы розных арганізацый і партнёраў у галіне дасягнення Мэтаў устойлівага развіцця ў краіне. Шырыня ліній абазначае адносную колькасць рэсурсаў, якія ўносяцца. Вы можаце пагуляць з фільтрамі, каб убачыць, як інвестыцыі накіроўваюцца ў розныя рэгіёны, на розныя мэты ўстойлівага развіцця, агенцтва ААН і нацыянальных партнёраў па рэалізацыі.",hoverNodeLink:"$USD {{value}}"}}},tg:{translation:{"No Poverty":"Барҳам додани камбизоатӣ","Zero Hunger":"Маҳви гуруснагӣ","Good Health and Well-being":"Саломатӣ ва некӯаҳволӣ","Quality Education":"Таҳсилоти босифат","Gender Equality":"Баробарии гендерӣ","Clean Water and Sanitation":"Оби тоза ва беҳдошт","Affordable and Clean Energy":"Нерӯи дастрас ва тоза","Decent Jobs and Economic Growth":"Шуғли сазовор ва рушди иқтисодӣ ","Industry, Innovation and Infrastructure":"Саноатикунонӣ, инноватсия ва инфрасохтор","Reduced Inequalities":"Коҳиши нобаробарӣ","Sustainable Cities and Communities":"Шаҳру маҳалҳои устуворm","Responsible Consumption and Production":"Истеъмолу истеҳсоли оқилона","Climate Action":"Мубориза бо тағйирёбии иқлим","Life Below Water":"Нигаҳдории экосистемаҳои обӣ","Life on Land":"Нигаҳдории экосистемаҳои заминӣ","Peace and Justice - Strong Institutions":"Ҷомеаи осоишта ва дастрасӣ ба адолат","Partnerships for the Goals":"Ҳамкорӣ барои рушди устувор",publishedDate:"Санаи нашр",sustainableDevelopmentGoals:"Ҳадафҳои Рушди Устувор",geography:"Макон",implementingPartners:"Шарикони иҷрокунанда",contributingPartners:"Шарикони саҳмгузор",strategicPriorities:"Афзалиятҳои стратегӣ",year:"Сол",allYears:"Ҳамаи солҳо",noFilter:"Филтр дастрас нест",investingPartners:"Шарикони саҳмгузор",availableResources:"Захираҳои дастрас",requiredResources:"Захираҳои лозима",notEnoughData:"Барои ин бахш маълумот кофӣ нест",noDataAvailableForThisSection:"Барои ин бахш маълумот дастрас нест",notEnoughDataForGraph:"Барои ин ҷадвал маълумот дастрас нест",trackingTheProgressPieChart:{title:"Пайгирии пешрафти фаъолияти СММ дар {{countryName}}",subTitle:"Ин ҷадвал шумораи чорабиниҳои гуногуни СММ-ро, ки барои ҳар як Ҳадафи Рушди Устувор ба нақша гирифта шудаанд, нишон медиҳад. Барои ҳар як қисми диаграмма, пешрафти мо то имрӯз дар татбиқи ин фаъолиятҳо инъикос мегардад. Индикатори 'ҷараён дорад' маънои онро дорад, ки фаъолият дар марҳилаи омодагӣ ва ё амалӣ аст. Индикатори 'дар интизорӣ аст' маънои онро дорад, ки фаъолият боздошта шудааст ё бекор карда шудааст.",activities:"{{ sum }} фаъолият ({{avg}}%)",sidebarTitle:"{{totalActivities}} фаъолият дар нақшаи кории якҷоя"},howMuchWeNeedBarChart:{title:"Чӣ миқдор ба мо лозим аст, чӣ миқдор дастрас аст: Норасоии маблағгузории СММ аз рӯи Ҳадафи рушди устувор дар {{countryName}}",subTitle:"Ин ҷадвал фарқияти маблағгузории ҲРУ барои саҳми СММ дар кишварро дар асоси созишномаҳо бо шарикони миллӣ ифода мекунад. Он холигии умумии маблағгузориро барои ноил шудан ба ҳар як ҲРУ ифода намекунад.",coverage:"{{value}}% фарогирии захираҳои зарурӣ",percentCoverage:"{{value}}% фарогирӣ",requiredResources:"{{value}} захираҳои лозима",availableResources:"{{value}} захираҳои дастрас",popupRequired:"${{value}} <strong>захираҳои лозима</strong>",popupAvailable:"${{value}} <strong>захираҳои дастрас</strong>",popupCoversage:"{{value}}% <strong>фарогирӣ</strong>",keyTotalRequired:"Маҷмӯи захираҳои зарурӣ",keyAvailableResources:"Захираҳои дастрас (бо миллион доллари ИМА)",yAxis:"Меҳвари Y"},whereIsTheMoneyGoingTreeMap:{subTitle:"Ин ҷадвал нишон медиҳад, ки чӣ гуна СММ захираҳоро барои ҳар як Ҳадафҳои Рушди Устувор дар кишвар барои солҳои гуногун сафарбар мекунад.",title:"Маблағ ба куҷо сарф мешавад? Чӣ гуна СММ ба ноилшавӣ ба Ҳадафҳои Рушди Устувор саҳм мегузорад {{countryName}}",availableResources:"Захираҳои дастрас ${{ value }}",availableNumber:"<strong>Дастрас мебошад</strong>: ${{availableRounded}}",ofTotal:"{{value}}% ҳачми умумӣ",noFilter:"Филтр дастнорас аст",strategicPriorities:"Афзалиятҳои стратегӣ",noResults:"Натиҷаҳо дар ин ҷода дастнорасанд"},howTheUnIsSupporting:{title:"Ҳадафҳои Рушди Устувор дар {{countryName}}",subTitle:"Ҳадафҳои Рушди Устувор даъвати умумиҷаҳоние барои хотима гузоштан ба камбизоатӣ, ҳифзи муҳити зист ва иқлими замин ва кафолат додани он, ки одамон дар ҳама ҷо аз сулҳу шукуфоӣ бархурдоранд мебошанд. Онҳо ҳадафҳоеянд, ки СММ рӯи онҳо дар {{countryName}} фаъолият мебарад",noDataAvailable:"Барои ин бахш маълумот дастрас нест"},whereWeWorkMap:{title:"Макони фаъолият",subTitle:"СММ {{keyActivities}} дар {{location}} иҷро менамояд",activities:"{{count}} фаъолият",activities_plural:"{{count}} {{count}} фаъолиятҳо",locationsAdminLevel1:"Макон (admin level 1)",nonSpecificLocations:"Ин фаъолиятҳо ба сатҳи мушаххаси маъмурӣ алоқаманд нестанд",agency:"Оҷонсӣ",investingPartners:"Шарикони сармоягузор",implementingPartners:"Шарикони иҷрокунанда",sdgs:"Ҳадафи Рушди Устувор",noFilter:"Филтр надорад"},linkingInvestments:{middle:"Мобайн",end:"Анҷом",unassigned:"Муайян карда нашудааст",title:"Пайваст кардани сармоягузорӣ, шарикон ва ҳадафҳои рушди устувор дар {{countryName}}",footer:"'Муайян нашудааст' ба захираҳои фаъолияте дахл дорад, ки ба нишондиҳандаҳо, аз қабили шарикони саҳмгузор, ҲРУ, агентиҳо, шарикони иҷрокунанда алоқаманд нестанд.",subTitle:"Ин ҷадвал саҳми сармоягузорӣ ба фаъолияти оҷонсиҳо ва шарикони гуногун барои пешбурди Ҳадафҳои Рушди Устувор дар кишвар нишон медиҳад. Паҳнои сатрҳо миқдори нисбии захираҳои саҳмшударо ифода мекунад. Шумо метавонед равонашавии сармоягузориҳоро аз рӯи минтақаҳои ҷуғрофӣ, ҳадафҳои алоҳидаи ҲРУ, оҷонсиҳои СММ ва шарикони милли бубинед.",hoverNodeLink:"$Доллари ИМА {{value}}"}}},sw:{translation:{"No Poverty":"Kutokomeza Umasikini","Zero Hunger":"Kutokomeza Njaa","Good Health and Well-being":"Afya Bora na Ustawi","Quality Education":"Elimu Bora","Gender Equality":"Usawa wa Kijinsia","Clean Water and Sanitation":"Maji safi na salama","Affordable and Clean Energy":"Nishati safi na nafuu","Decent Jobs and Economic Growth":"Kazi zenye staha na Ukuaji wa Uchumi","Industry, Innovation and Infrastructure":"Viwanda, Ubunifu na Miundombinu","Reduced Inequalities":"Kupunguza tofauti","Sustainable Cities and Communities":"Miji na Jamii salama","Responsible Consumption and Production":"Matumizi na Uzalishaji wenye staha","Climate Action":"Mabadiliko ya Tabia Nchi","Life Below Water":"Maisha Kwenye Maji","Life on Land":"Maisha Ardhini","Peace and Justice - Strong Institutions":"Amani, Haki na Taasisi Madhubuti","Partnerships for the Goals":"Ushirikiano kwa ajili ya Malengo",publishedDate:"Tarehe iliyochapishwa",sustainableDevelopmentGoals:"Malengo ya Maendeleo Endelevu",geography:"Jiografia",implementingPartners:"Wadau wanaotekeleza mipango yetu",contributingPartners:"Wadau wanaochangia",strategicPriorities:"Vioaumbele vya Kimkakati",year:"Mwaka",allYears:"Miaka yote",noFilter:"Hakuna chujio",investingPartners:"Wadau waliowekeza",availableResources:"Rasilmali zilizopo",requiredResources:"Rasilmali zinazohitajika",notEnoughData:"Hakuna data za kutosha kwa ajili ya hii sehemu",noDataAvailableForThisSection:"Hakuna Data kwa ajili ya sehemu hii",notEnoughDataForGraph:"Hakuna Data kwa ajili ya Chati hii",trackingTheProgressPieChart:{title:"Kufuatilia mchakato wa shughuli za Umoja wa Mataifa nchini {{countryName}}",subTitle:"Chati hii inaonyesha idadi ya shughuli mbalimbali za Umoja wa Mataifa zilizoandaliwa kwa kila mojawapo ya Malengo ya Maendeleo Endelevu. Kwa kila sehemu yenye kipengele. Ujumbe unaojitokeza unaonesha matokeo ya maendeleo hadi kufikia leo katika kutekeleza shughuli hizi. 'Yanayoendelea' inamaanisha shughuli ambazo aidha zipo kwenye mchakato au kwenye utekelezaji wa kati. 'Zilizoshikiliwa' maana yake ni shughuli zilizoghairishwa au kusitishwa.",activities:"{{ sum }} shughuli ({{avg}}%)",sidebarTitle:"{{totalActivities}} Shughuli zilizopo katika Mpango kazi wa pamoja"},howMuchWeNeedBarChart:{title:"Kiasi gani tunachohitaji, Kiaisi gani kilichopo: Pengo la ufadhili ndani ya Umoja wa Mataifa kwa ajili ya kila mojawapo ya Malengo ya Maendeleo Endelevu Nchini {{countryName}}",subTitle:"Mwonekano huu unawakilisha pengo la ufadhili wa Malengo ya Maendeleo Endelevu ya mchango wa Umoja wa Mataifa kwenye nchi, kwa kulingana na makubaliano na washirika wa kitaifa.  Haiwakilishi jumla ya pengo la ufadhili kwaajili ya mafanikio ya Malengo ya Maendeleo Endelevu.",coverage:"{{value}}% iliypkidhi kwa rasilimali zinazohitajika",percentCoverage:"{{value}}% Asilimia iliyokidhi",requiredResources:"{{value}} Rasilmali zinazohitajika",availableResources:"{{value}} Rasilmali zilizopo",popupRequired:"${{value}} <strong>Rasilmali zinazohitajika</strong>",popupAvailable:"${{value}} <strong>Rasilmali zilizopo</strong>",popupCoversage:"{{value}}% <strong>kiasi kilichokidhi </strong>",keyTotalRequired:"Jumla ya Rasilmali zinazohitajika",keyAvailableResources:"Rasilmali zilizopo(kwa mamilioni ya dola za Kimarekani)",yAxis:"Mhimili Y"},whereIsTheMoneyGoingTreeMap:{subTitle:"Mchoro huu unaonesha vile ambavyo Umoja wa Mataifa hugawa rasilmali kwenye kila moja ya Malengo ya Maendeleo Endelevu nchini katika miaka tofauti.",title:"Pesa zinaenda wapi? Jinsi Umoja wa Mataifa unavyochangia kufikiwa kwa Malengo ya Maendeleo Endelevu nchini {{countryName}}",availableResources:"Rasilmali zilizopo ${{ value }}",availableNumber:"<strong>Zilizopo</strong>: ${{availableRounded}}",ofTotal:"{{value}}% Asilimia ya Jumla Kuu",noFilter:"Hakuna chujio",strategicPriorities:"Vipaumbele vya Kimkakati",noResults:"Hakuna majibu ya maneno yaliyochujwa"},howTheUnIsSupporting:{title:"Malengo ya Maendeleo Endelevu nchini {{countryName}}",subTitle:"Malengo ya Maendeleo Endelevu ni wito wa kimataifa kwa lengo  la kutokomeza umaskini, kulinda hali ya hewa ya dunia na mazingira, na kuhakikisha watu popote walipo wanafurahia amani na ustawi. Haya ndiyo malengo ambayo Umoja wa Mataifa unayafanyia kazi nchini {{countryName}}",noDataAvailable:"Hakuna taarifa zilizotafitiwa zinazopatikana sehemu hii"},whereWeWorkMap:{title:"Mahali tunapofanyia kazi",subTitle:"Umoja wa Mataifa Unatekeleza {{keyActivities}} Shughuli Muhimu katika maeneo yote {{location}}",activities:"{{count}} shughuli ",activities_plural:"{{count}} {{count}} Shughuli zilishopo",locationsAdminLevel1:"Maeneo (admin level 1)",nonSpecificLocations:"Shughuli hizi hazijafungamana na ngazi yoyote ya utawala katika eneo la kufanyia kazi.",agency:"Shirika",investingPartners:"Washirika Wawekezaji",implementingPartners:"Washirika watekelezaji",sdgs:"Lengo la Maendeleo Endelevu",noFilter:"Hakuna Chujio"},linkingInvestments:{middle:"Katikati",end:"Mwisho",unassigned:"Haijaainishwa",title:"Kuunganisha Uwekezaji, Washirika na Malengo ya Maendeleo Endelevu kwenye {{countryName}}",footer:"Haijabainishwa inarejea shughuli  za kirasilimali ambazo hazijaunganishwa kwenye pointi za data kama vile washirika wachangiaji, Malengo ya Maendeleo Endelevu, mawakala, washirika katika utekelezaji.",subTitle:"Mchoro huu unaonyesha jinsi uwekezaji unavyochangia kwenye kazi za mawakala na washirika mbalimbali kwenye kuboresha Malengo ya Maendeleo Endelevu nchini. Upana wa mistari unawakilisha kiasi cha jumla cha rasilimali zilizochangiwa. Unaweza ukabonyeza vichungi kuona ni jinsi gani uwekezaji umelenga  maeneo tofautitofauti ya kijografia, Malengo ya Maendeleo Endelevu, Mashirika ya Umoja wa Mataifa na washirika wa utekelezaji kitaifa.",hoverNodeLink:"$USD {{value}}"}}},hbs:{translation:{"No Poverty":"Svijet bez siromaštva","Zero Hunger":"Svijet bez gladi","Good Health and Well-being":"Zdravlje i blagostanje","Quality Education":"Kvalitetno obrazovanje","Gender Equality":"Rodna ravnopravnost","Clean Water and Sanitation":"Čista voda i sanitarni uslovi","Affordable and Clean Energy":"Pristupačna energija iz čistih izvora","Decent Jobs and Economic Growth":"Dostojanstven rad i ekonomski rast","Industry, Innovation and Infrastructure":"Industrija, inovacije i infrastruktura","Reduced Inequalities":"Smanjene nejednakosti","Sustainable Cities and Communities":"Održivi gradovi i zajednice","Responsible Consumption and Production":"Odgovorna potrošnja i proizvodnja","Climate Action":"Očuvanje klime","Life Below Water":"Očuvanje vodenog svijeta","Life on Land":"Očuvanje života na zemlji","Peace and Justice - Strong Institutions":"Mir, pravda i snažne institucije","Partnerships for the Goals":"Partnerstvom do ciljeva",publishedDate:"Datum objave",sustainableDevelopmentGoals:"Ciljevi održivog razvoja",geography:"Geografija/lokacije",implementingPartners:"Partneri u implementaciji",contributingPartners:"Partneri koji doprinose ",strategicPriorities:"Strateški prioriteti",year:"Godina",allYears:"Sve godine",noFilter:"Bez filtera",investingPartners:"Investicijski partneri",availableResources:"Raspoloživi resursi",requiredResources:"Potrebni resursi",notEnoughData:"Nema dovoljno podataka za ovaj dio",noDataAvailableForThisSection:"Nema raspoloživih podataka za ovaj dio",notEnoughDataForGraph:"Podaci nisu na raspolaganju za ovaj grafikon",trackingTheProgressPieChart:{title:"Praćenje napretka u aktivnostima UN-a u {{countryName}}",subTitle:'Na ovom grafikonu je prikazan broj različitih aktivnosti UN-a, planiranih za svaki Cilj održivog razvoja. Za svaki dio kružnog grafikona "iskakanje" pokazuje napredak koji smo postigli do danas u provedbi tih aktivnosti. "U toku" znači da je aktivnosti ili planirana ili se trenutno implementira,a "na čekanju" znači da je aktivnost suspendovana ili otkazana.',activities:"{{ sum }} aktivnosti ({{avg}}%)",sidebarTitle:"{{totalActivities}} aktivnosti u Zajedničkom radnom planu"},howMuchWeNeedBarChart:{title:"Koliko nam je potrebno, koliko imamo: financijski jaz UN-a prema svakom od Ciljeva održivog razvoja u {{countryName}}",subTitle:"Vizual prikazuje financijski jaz prema Cilju održivog razvoja nasuprot doprinosu UN-a u zemlji, na osnovu sporazuma s domaćim partnerima. Vizual ne pokazuje ukupni financijski jaz za postizanje svakog Cilja održivog razvoja.",coverage:"{{value}}% pokrivenosti potrebnim resursima",percentCoverage:"{{value}}% pokrivenosti",requiredResources:"{{value}} potrebni resursi",availableResources:"{{value}} raspoloživi resursi",popupRequired:"${{value}} <strong>potrebni resursi</strong>",popupAvailable:"${{value}} <strong>raspoloživi resursi</strong>",popupCoversage:"{{value}}% <strong>pokrivenost</strong>",keyTotalRequired:"Ukupni potrebni resursi",keyAvailableResources:"Raspoloživi resursi (u milionima USD)",yAxis:"Osa Y"},whereIsTheMoneyGoingTreeMap:{subTitle:"Na ovom grafikonu je prikazan način na koji UN dodjeljuje resurse za svaki Cilj održivog razvoja u zemlji, prema različitim godinama.",title:"Gdje novac ide? Kako UN doprinosi Ciljevima održivog razvoja u {{countryName}}",availableResources:"Raspoloživi resursi ${{ value }}",availableNumber:"<strong>Raspoloživo</strong>: ${{availableRounded}}",ofTotal:"{{value}}% od ukupnog iznosa",noFilter:"Bez filtera",strategicPriorities:"Strateški prioriteti",noResults:"Nema rezultata za odabrane filtere"},howTheUnIsSupporting:{title:"Cilj održivog razvoja u {{countryName}}",subTitle:"Ciljevi održivog razvoja su globalni poziv na djelovanje u pravcu okončanja siromaštva, zaštite okoliša i klime na našoj planeti i pružanja mogućnosti uživanja mira i prosperiteta svim ljudima, svuda u svijetu. To su ciljevi na kojima radi UN u {{countryName}}",noDataAvailable:"Nema podataka za ovaj dio"},whereWeWorkMap:{title:"Gdje radimo",subTitle:"UN provodi {{keyActivities}} ključne aktivnosti širom {{location}}",activities:"{{count}} aktivnost",activities_plural:"{{count}} {{count}} aktivnosti",locationsAdminLevel1:"Lokacije (admin level 1)",nonSpecificLocations:"Ove aktivnosti nisu povezane ni sa jednim posebnim administrativnim nivoom unutar radnog prostora",agency:"Agencija",investingPartners:"Partneri u investiranju",implementingPartners:"Partneri u implementaciji",sdgs:"Ciljevi održivog razvoja",noFilter:"Bez filtera"},linkingInvestments:{middle:"Srednji",end:"Kraj",unassigned:"Nije određeno",title:"Povezivanje investicija, partnera i ciljeva održivog razvoja u {{countryName}}",footer:"'Nije određeno' se odnosi na resurse unutar aktivnosti koji nisu povezani s podacima kao što su: doprinoseći partneri, ciljevi održivog razvoja, agencije, partneri u implementaciji.",subTitle:"Na ovom grafikonu je prikazano kako investicije doprinose radu različitih agencija i partnera na unapređenju realizacije ciljeva održivog razvoja u zemlji. Širina linija predstavlja relativan iznos kontribucija. Korištenjem filtera možete vidjeti kako su investicije usmjerene na različita područja, ciljeve održivog razvoja, agencije UN-a i domaće partnere u implementaciji.",hoverNodeLink:"$USD {{value}}"}}},tr:{translation:{"No Poverty":"Yoksulluğa Son","Zero Hunger":"Açlığa Son","Good Health and Well-being":"Sağlık ve Kaliteli Yaşam","Quality Education":"Nitelikli Eğitim","Gender Equality":"Toplumsal Cinsiyet Eşitliği","Clean Water and Sanitation":"Temiz Su ve Sanitasyon","Affordable and Clean Energy":"Erişilebilir ve Temiz Enerji","Decent Jobs and Economic Growth":"İnsan Yakışır İş ve Ekonomik Büyüme","Industry, Innovation and Infrastructure":"Sanayi, Yenilikçilik ve Altyapı","Reduced Inequalities":"Eşitsizliklerin Azaltılması","Sustainable Cities and Communities":"Sürdürülebilir Şehirler ve Topluluklar","Responsible Consumption and Production":"Sorumlu Üretim ve Tüketim","Climate Action":"İklim Eylemi","Life Below Water":"Sudaki Yaşam","Life on Land":"Karasal Yaşam","Peace and Justice - Strong Institutions":"Barış, Adalet ve Güçlü Kurumlar","Partnerships for the Goals":"Amaçlar için Ortaklıklar",publishedDate:"Yayınlanma Tarihi",sustainableDevelopmentGoals:"Sürdürülebilir Kalkınma Amaçları",geography:"Coğrafya",implementingPartners:"Uygulama Ortakları",contributingPartners:"Kaynak Sağlayan Ortaklar",strategicPriorities:"Stratejik Öncelikler",year:"Yıl",allYears:"Tüm Yıllar",noFilter:"Filtresiz",investingPartners:"Yatırımcı Ortaklar",availableResources:"Mevcut Kaynaklar",requiredResources:"Gerekli Kaynaklar",notEnoughData:"Bu bölüm için yeterli veri yok",noDataAvailableForThisSection:"Bu bölüm için veri yok",notEnoughDataForGraph:"Bu grafik için veri yok",trackingTheProgressPieChart:{title:"{{countryName}}'de BM Faaliyetlerinin İlerlemesinin İzlenmesi",subTitle:"Bu grafik, her bir Sürdürülebilir Kalkınma Amacı için planlanan farklı BM aktivitelerinin sayısını göstermektedir. Dairenin her bir dilimi bu faaliyetler ile ilgili ilerlememizi gösterir. 'Devam ediyor', bir faaliyetin yapılmak üzere sırada veya uygulamada olduğu anlamına gelirken, 'beklemede', bir faaliyetin askıya alındığı veya iptal edildiği anlamına gelir.",activities:"{{ sum }} aktiviteler ({{avg}}%)",sidebarTitle:"{{totalActivities}} Ortak İş Planındaki aktiviteler"},howMuchWeNeedBarChart:{title:"Ne kadara ihtiyacımız var, Elimizde ne var: {{countryName}}'de her bir Sürdürülebilir Kalkınma Amacı için BM fonlama açığı",subTitle:"Bu görsel ulusal ortaklarla yapılan anlaşmalara göre her bir SKA için ülkedeki BM katkısı fonlama açığını gösteriyor. Görsel her bir SKA'ya ulaşmak için toplam fonlama açığını göstermiyor.",coverage:"Gerekli kaynakların kapsamı %{{value}}",percentCoverage:"Kapsam %{{value}}",requiredResources:"Gerekli kaynaklar {{value}}",availableResources:"Mevcut kaynaklar {{value}}",popupRequired:"<strong>gerekli kaynak</strong> ${{value}}",popupAvailable:"<strong>mevcut kaynak</strong> ${{value}}",popupCoversage:"<strong>kapsam</strong> %{{value}}",keyTotalRequired:"Gerekli Toplam Kaynake",keyAvailableResources:"Mevcut Kaynaklar (ABD Milyon Doları)",yAxis:"Y Ekseni"},whereIsTheMoneyGoingTreeMap:{subTitle:"Bu grafik BM'nin her bir Sürdürülebilir Kalkınma Amacı için ülkede farklı yıllarda kaynakları nasıl tahsis ettiğini gösteriyor.",title:"Para nereye gidiyor? BM {{countryName}}'de Sürdürülebilir Kalkınma Amaçlarına nasıl katkı sağlıyor?",availableResources:"Mevcut Kaynaklar ${{ value }}",availableNumber:"<strong>Mevcut</strong>: ${{availableRounded}}",ofTotal:"Toplamın %{{value}}'i",noFilter:"Filtresiz",strategicPriorities:"Stratejik Öncelikler",noResults:"Seçilen filtreler için sonuç yok"},howTheUnIsSupporting:{title:"{{countryName}}'de Sürdürülebilir Kalkınma Amaçları",subTitle:"Sürdürülebilir Kalkınma Amaçları, yoksulluğu sona erdirmek, çevreyi ve iklimi korumak ve insanların her yerde barış ve refah içinde yaşayabilmesini sağlamak için küresel bir eylem çağrısıdır.  BM {{countryName}}'de bu amaçları için çalışıyor.",noDataAvailable:"Bu bölüm için veri yok"},whereWeWorkMap:{title:"Nerede çalışıyoruz?",subTitle:"BM {{keyActivities}}'i uyguluyor. {{location}} boyunca Başlıca Aktiviteler",activities:"{{count}} aktivite",activities_plural:"{{count}} {{count}} aktiviteler",locationsAdminLevel1:"Lokasyonlar (admin level 1)",nonSpecificLocations:"Bu aktiviteler, çalışma alanı içinde belirli bir yönetim düzeyine bağlı değildir.",agency:"Kuruluş",investingPartners:"Yatırımcı Ortaklar",implementingPartners:"Uygulama Ortakları",sdgs:"Sürdürülebilir Kalkınma Amacı",noFilter:"Pa filtrim"},linkingInvestments:{middle:"Orta",end:"Son",unassigned:"Belirtilmemiş",title:"{{countryName}}'de yatırımlar, ortaklar ve Sürdürülebilir Kalkınma Amaçlarını ilişkilendirmek",footer:"'Belirtilmemiş' ibaresi katkı sağalayan ortaklar, SKA'lar, BM Kuruluşları ve Uygulama Ortakları gibi veri noktalarına bağlanmamış aktivite kaynaklarına işaret eder.",subTitle:"Bu grafik, yatırımların, ülkede Sürdürülebilir Kalkınma Amaçlarını ilerletmek için farklı kurum ve ortakların çalışmalarına nasıl katkıda bulunduğunu göstermektedir. Çizgilerin genişliği, katkıda bulunulan kaynakların göreceli miktarını temsil eder. Yatırımların farklı coğrafi alanlara, Sürdürülebilir Kalkınma Amaçlarına, BM kuruluşlarına ve ulusal uygulama ortaklarına nasıl ilişkilendiğini görmek için filtreleri kullanabilirsiniz.",hoverNodeLink:"{{value}} ABD Doları"}}},ur:{translation:{"No Poverty":"غربت کاخاتمہ","Zero Hunger":" بھوک کاخاتمہ","Good Health and Well-being":"بہترصحت اور آسودہ زندگی","Quality Education":"معیاری تعلیم","Gender Equality":"صنفی مساوات","Clean Water and Sanitation":"صاف پانی اور صفائی","Affordable and Clean Energy":"باکفایت اور صاف توانائی","Decent Jobs and Economic Growth":"معقول روزگار اور معاشی نمو","Industry, Innovation and Infrastructure":"صنعت، جدت پسندی اور انفراسٹرکچر","Reduced Inequalities":"عدم مساوات میں کمی","Sustainable Cities and Communities":"پائیدار شہر اور آبادیاں","Responsible Consumption and Production":"ذمہ دارانہ تصرف اور پیداوار","Climate Action":"موسمیاتی تبدیلی سے متعلق اقدام","Life Below Water":"زیر آب حیات","Life on Land":"زمین پر زندگی","Peace and Justice - Strong Institutions":"امن، انصاف اور مضبوط ادارے","Partnerships for the Goals":"مقاصد کے لیے شراکت داری",publishedDate:"اشاعت کی تاریخ",sustainableDevelopmentGoals:"پائیدار ترقی کے عالمی مقاصد",geography:"جغرافیہ",implementingPartners:"عملدرآمد کرنے والے شراکت دار",contributingPartners:"تعاون کرنے والے شراکت دار",strategicPriorities:"سٹریٹجک ترجیحات",year:"سال",allYears:"تمام سال",noFilter:"کوئی فلٹر نہیں",investingPartners:"سرمایہ کاری کرنے والے شراکت دار",availableResources:"دستیاب وسائل",requiredResources:"مطلوبہ وسائل",notEnoughData:"اس سیکشن کے لیے ڈیٹا ناکافی",noDataAvailableForThisSection:"اس سیکشن کے لیے کوئی ڈیٹا دستیاب نہیں",notEnoughDataForGraph:"اس چارٹ کے لیے ڈیٹا دستیاب نہیں",trackingTheProgressPieChart:{title:"اقوام متحدہ کی ({{countryName}}) میں سرگرمیوں کی پیش رفت کا جائزہ لینا",subTitle:"یہ چارٹ پائیدار ترقیاتی  مقصد کے مطابق اقوام متحدہ کی مختلف سرگرمیوں کی تعداد کو ظاہر کرتا ہے۔ پائی چارٹ کے ہر حصے کے لیے پاپ آؤٹ مذکورہ سرگرمیوں پر آج تک ہونے والے عملدرآمد کے حوالے سے  ہماری  پیش رفت کو ظاہر کرتا ہے۔ 'زیر عمل ' کا مطلب ہے کہ کوئی سرگرمی یا تو پائپ لائن میں ہے یا عملدرآمد کے مرحلے میں ہے، جبکہ 'اون ہولڈ' کا مطلب ہے کہ کوئی سرگرمی معطل یا منسوخ کر دی گئی ہو۔",activities:"({{avg}} فیصد) سرگرمیاں{{sum}}",sidebarTitle:"کام کے مشترکہ منصوبہ میں {{totalActivities}}  سرگرمیاں"},howMuchWeNeedBarChart:{title:"ہمیں کتنی ضرورت ہے، ہمارے پاس کتنا ہے: میں پائیدار ترقیاتی مقاصد کےتحت اقوام متحدہ کی فنڈنگ میں کمی",subTitle:"یہ تصویر قومی شراکت داروں کے ساتھ معاہدوں کی بنیاد پر ملک میں اقوام متحدہ کے تعاون کے SDG کے ذریعے فنڈنگ ​​کے فرق کو ظاہر کرتی ہے۔ یہ ہرایک  SDG کے حصول کے لیے فنڈنگ ​​کے کل فرق کو ظاہر نہیں کرتی ہے۔",coverage:" <strong> مطلوبہ وسائل کی فیصد کوریج فیصد {{value}}</strong> ",percentCoverage:"<strong>  فیصد کوریج  {{value}}</strong> ",requiredResources:"<strong> مطلوبہ وسائل {{value}}</strong>",availableResources:"<strong> دستیاب وسائل {{value}}</strong>",popupRequired:"<strong> $ {{value}} مطلوبہ وسائل </strong>",popupAvailable:"<strong> ${{value}} دستیاب وسائل  </strong>",popupCoversage:" <strong>{{value}}%   کوریج  </strong>",keyTotalRequired:"کل مطلوبہ وسائل",keyAvailableResources:"دستیاب وسائل (ملین ڈالر میں)",yAxis:"y محور"},whereIsTheMoneyGoingTreeMap:{subTitle:"یہ گرافک دکھاتا ہے کہ کس طرح اقوام متحدہ مختلف سالوں کے دوران  ملک میں پائیدار ترقیاتی مقاصد کے ایک مقصد  کے لیے وسائل مختص کرتا ہے۔",title:"پیسے  کہاں خرچ کیے جارہے ہیں؟ اقوام متحدہ پائیدار ترقیاتی مقاصد میں کیسے مالی تعاون کرتا ہے",availableResources:"<strong> دستیاب وسائل {{ value }} ڈالر</strong>",availableNumber:"<strong>  مطلوبہ </strong>: ${{availableRounded}}",ofTotal:"کل کا {{value}} فیصد",noFilter:"کوئی فلٹر نہیں",strategicPriorities:"سٹریٹجک ترجیحات",noResults:"منتخب شدہ  فلٹرز کا کوئی نتیجہ نہیں"},notLinkedSdgDisclamer:{needAvailable:"یہ اعداد و شمار دستیاب وسائل کے پروگراموں کے   اضافی ${{availableResources}} کو نکال دیتے ہیں جو فی الوقت UNINFO کے کسی خاص SDG سے منسوب نہیں ہوتے ۔",needRequired:"مطلوبہ وسائل کسی خاص SDG سے منسوب نہیں ہوتے، وہ ${{requiredResources}} ہیں۔"},howTheUnIsSupporting:{title:"پائیدار ترقیاتی مقاصد {{countryName}} میں",subTitle:"پائیدار ترقیاتی مقاصد غربت کے خاتمے، زمین کے ماحول اور آب و ہوا کے تحفظ کے لیے اقدام کرنے کا مطالبہ کرتے ہیں اور اس بات کو یقینی بناتے ہیں کہ دنیا کے تمام  لوگ امن اور خوشحالی سے لطف اندوز ہو سکیں۔ یہ وہ مقاصد ہیں جن پر اقوام متحدہ {{countryName}} میں کام کر رہا ہے۔",noDataAvailable:"اس سیکشن کے لیے ڈیٹا دستیاب نہیں"},whereWeWorkMap:{title:" ہم کہاں  کام کرتے ہیں",subTitle:"اقوام متحدہ {{keyActivities}} بنیادی سرگرمیوں پرعملدرآمد کررہا ہے {{location}}",activities:"<strong> سرگرمی {{count}} </strong>",activities_plural:"<strong>سرگرمیاں {{count}} </strong>",locationsAdminLevel1:"مقامات",nationallyImplemented:"ان سرگرمیوں پر قومی سطح پر عملدرآمد کیا جاتا ہے۔",nonSpecificLocations:"یہ سرگرمیاں کام کی جگہ کے اندر کسی مخصوص انتظامی سطح سے منسلک نہیں ہیں۔",agency:"ایجنسی/ادارہ",investingPartners:"سرمایہ کاری کرنے والے شراکت دار",implementingPartners:"عملدرآمد کرنے والے شراکت دار",sdgs:"پائیدار ترقیاتی مقصد",noFilter:"کوئی فلٹر نہیں"},linkingInvestments:{middle:"وسط",end:"اختتام",unassigned:"متعین نہیں",title:"پائیدار ترقیاتی مقاصد کو آگے بڑھانے کے لیے اقوام متحدہ کی سرمایہ کاریوں سے فائدہ اٹھانا",footer:"' متعین نہیں' سے مراد سرگرمی کے وہ وسائل ہیں جو ڈیٹا پوائنٹس سے منسلک نہیں ہیں جیسے مالی تعاون کرنے والے شراکت دار، SDGs، ایجنسیاں،عملدرآمد کرنے والے شراکت دار۔",disclaimer:"مندرجہ بالا چارٹ آپریشن فریم ورک/UNDAF کے مشترکہ ورک پلان میں مالی تعاون کے حوالے  سے  سرفہرست 20 مالی تعاون کرنے والے شراکت داروں  اور منسلکہ  ذیلی آوٹپٹس کے کل بجٹ کے لحاظ سے سب سے اولین  20 عملدرآمد کرنے والے شراکت داروں کو ظاہر کرتا ہے۔ تمام اضافی شراکت داروں کی 'دیگر تعاون کرنے والے شراکت داروں ' یا 'دیگر عملدرآمد  کرنے والے شراکت داروں ' کے تحت گروپ بندی  کی جاتی ہے۔ (تمام شراکت داروں کو دیکھنے کے لیے، پورٹل کے 'ڈیٹا ایکسپلورر' سیکشن سے مشترکہ ورک پلان نکالیں۔)",subTitle:" یہ گرافک دکھاتا ہے کہ ملک میں پائیدار ترقیاتی مقاصد کو آگے بڑھانے کے لیے سرمایہ کاریاں  مختلف ایجنسیوں اور شراکت داروں کے کام میں کس طرح تعاون کر رہی ہیں۔ لائنوں کی چوڑائی وسائل کی متعلقہ رقم کو ظاہر  کرتی ہے۔ آپ یہ دیکھنے کے لیے فلٹرز کاجائزہ لے سکتے ہیں کہ سرمایہ کاریاں مختلف جغرافیائی علاقوں، پائیدار ترقیاتی مقاصد، اقوام متحدہ کی ایجنسیوں اور عملدرآمد کرنے والے قومی شراکت داروں کو کس طرح ہدف بتاتی ہیں۔",hoverNodeLink:"ڈالر {{value}}"}}},me:{translation:{"No Poverty":"Svijet bez siromaštva","Zero Hunger":"Svijet bez gladi","Good Health and Well-being":"Dobro zdravlje i blagostanje","Quality Education":"Kvalitetno obrazovanje","Gender Equality":"Rodna ravnopravnost","Clean Water and Sanitation":"Čista voda i sanitarni uslovi","Affordable and Clean Energy":"Dostupna i obnovljiva energija","Decent Jobs and Economic Growth":"Dostojanstven rad i ekonomski rast","Industry, Innovation and Infrastructure":"Industrija, inovacije i infrastruktura","Reduced Inequalities":"Smanjenje nejednakosti","Sustainable Cities and Communities":"Održivi gradovi i zajednice","Responsible Consumption and Production":"Odgovorna potrošnja i proizvodnja","Climate Action":"Klimatska akcija","Life Below Water":"Život pod vodom","Life on Land":"Život na kopnu","Peace and Justice - Strong Institutions":"Mir, pravda i snažne institucije","Partnerships for the Goals":"Partnerstvo za ciljeve",publishedDate:"Datum objave",sustainableDevelopmentGoals:"Ciljevi održivog razvoja",geography:"Geografija",implementingPartners:"Partneri u implementaciji",contributingPartners:"Partneri u implementaciji",strategicPriorities:"Strateški prioriteti",year:"Godina",allYears:"Sve godine",noFilter:"Bez filtera",investingPartners:"Investicioni partneri",availableResources:"Raspoloživa sredstva",requiredResources:"Neophodna sredstva",notEnoughData:"U ovoj sekciji nema dovoljno podataka",noDataAvailableForThisSection:"U ovoj sekciji nema raspoloživih podataka",notEnoughDataForGraph:"Za ovaj grafik podaci nema raspoloživih podataka",trackingTheProgressPieChart:{title:"Praćenje progresa aktivnosti UN",subTitle:"Ovaj grafikon prikazuje broj različitih aktivnosti UN planiranih po Cilju održivog razvoja. Za svaki segment grafika, pop-up prozor pokazuje naš dosadašnji napredak u sprovođenju ovih aktivnosti. „U toku“ znači da je aktivnost ili u pripremi ili u implementaciji, dok „na čekanju“ znači da je aktivnost suspendovana ili otkazana.",activities:"({{avg}}% ) aktivnosti {{sum}}",sidebarTitle:"{{totalActivities}} aktivnosti u zajedničkom planu"},howMuchWeNeedBarChart:{title:"Koliko nam treba, koliko imamo: Nedostajuća sredstva UN po Ciljevima održivog razvoja.",subTitle:"Ovaj vizuelni prikaz predstavlja nedostatajuća sredstva po SDG iz doprinosa UN na osnovu sporazuma sa nacionalnim partnerima za implementaciju Okvira za saradnju UN. (Ne predstavlja ukupan nedostatak u finansiranju za postizanje svakog cilja održivog razvoja u zemlji.)",coverage:"{{value}}% pokrivenost potrebnih resursa",percentCoverage:"{{value}}% pokrivenost",requiredResources:"{{value}} potrebna sredstva",availableResources:"{{value}} raspoloživa sredstva",popupRequired:"${{value}} <strong>potrebna sredstva</strong>",popupAvailable:"${{value}} <strong>raspoloživa sredstva</strong>",popupCoversage:"{{value}}% <strong>pokrivenost</strong>",keyTotalRequired:"Ukupna potrebna sredstva",keyAvailableResources:"Raspoloživa sredstva (u milionima USD)",yAxis:"Y osa"},whereIsTheMoneyGoingTreeMap:{title:"Gdje ide novac? Kako UN doprinose ostvarivanju Ciljeva održivog razvoja?",subTitle:"Ovaj grafikon pokazuje kako UN opredjeljuju sredstva za svaki od Ciljeva održivog razvoja za različite godine.",availableResources:"Raspoloživa sredstva ${{ value }}",availableNumber:"<strong>Raspoloživo</strong>: ${{availableRounded}}",ofTotal:"{{value}}% ukupne vrijednosti",noFilter:"Bez filtera",strategicPriorities:"Strateški prioriteti",noResults:"Nema rezultata za odabrane filtere"},notLinkedSdgDisclamer:{needAvailable:"Ove brojke isključuju dodatne ${{availableResources}} programa dostupnih sredstava koji još nisu pripisani konkretnom Cilju održivog razvoja u bazi UN INFO.",needRequired:"Potrebni resursi koji se ne pripisuju odreženom Cilju održivog razvoja su ${{requiredResources}}"},howTheUnIsSupporting:{title:"Ciljevi održivog razvoja",subTitle:"Ciljevi održivog razvoja su globalni poziv na akciju za okončanje siromaštva, zaštitu životne sredine i klime na Zemlji i obezbjeđivanje da ljudi svuda mogu da žive u miru i prosperitetu. Ovo su ciljevi na kojima rade Ujedinjene nacije",noDataAvailable:"Nema dostupnih podataka za ovu oblast"},whereWeWorkMap:{title:"Gdje radimo: Ključne aktivnosti UN",subTitle:"UN sprovode {{keyActivities}} ključnih aktivnosti tokom tekućeg programskog ciklusa. Koristeći filtere u nastavku, kliknite na broj na mapi da biste dobili sažet opis različitih aktivnosti.",activities:"{{count}} aktivnost",activities_plural:"{{count}} aktivnosti",locationsAdminLevel1:"Lokacije",nationallyImplemented:"Ove aktivnosti sprovode se na nacionalnom nivou.",nonSpecificLocations:"Ove aktivnosti nisu vezane za određeni administrativni nivo u okviru radnog prostora",agency:"Agencija",investingPartners:"Investicioni partneri",implementingPartners:"Implementacioni partneri",sdgs:"Cilj održivog razvoja",noFilter:"Bez filtera"},linkingInvestments:{middle:"Sredina",end:"Kraj",unassigned:"Nije precizirano",title:"Korišćenje investicija UN za unapređenje ostvarivanja Ciljeva održivog razvoja",footer:"„Nije navedeno“ se odnosi na aktivnosti koje nisu označene različitim filterima.",disclaimer:"Gornji grafikon prikazuje 20 partnera sa najvećim finansijskim doprinosom i 20 najboljih implementacionih partnera prema ukupnom budžetu povezanih podrezultata u Zajedničkom planu rada Okvira saradnje UN. Svi dodatni partneri su grupisani pod „Drugi partneri koji doprinose“ ili „Ostali partneri za implementaciju“. (Da biste vidjeli sve partnere, izdvojite Zajednički plan rada iz odeljka „Data Explorer“ na portalu.)",subTitle:"Ovaj grafikon pokazuje kako finansiranje UN doprinosi radu različitih agencija i partnera na unapređenju Ciljeva održivog razvoja. Širina linija predstavlja relativni obim dodijeljenih sredstava. Filteri pomažu da se vidi kako su investicije usmjerene na različite SDG, agencije UN i nacionalne partnere za implementaciju.",hoverNodeLink:"${{value}}"}}},nl:{translation:{"No Poverty":"Geen Armoede","Zero Hunger":"Geen Honger","Good Health and Well-being":"Goede Gezondheid en Welzijn","Quality Education":"Kwaliteitsonderwijs","Gender Equality":"Gendergelijkheid","Clean Water and Sanitation":"Schoon Water en Sanitair","Affordable and Clean Energy":"Betaalbare en Duurzame Energie","Decent Jobs and Economic Growth":"Waardig Werk en Economische Groei","Industry, Innovation and Infrastructure":"Industrie, Innovatie en Infrastructuur","Reduced Inequalities":"Ongelijkheden Verminderen","Sustainable Cities and Communities":"Duurzame Steden en Gemeenschappen","Responsible Consumption and Production":"Verantwoorde Consumptie en Productie","Climate Action":"Klimaatactie","Life Below Water":"Leven in het Water","Life on Land":"Leven op het Land","Peace and Justice - Strong Institutions":"Vrede Justitie en Sterke Publieke Diensten","Partnerships for the Goals":"Partnerschap om de Doelen te Bereiken",publishedDate:"Publicatie Datum",sustainableDevelopmentGoals:"Duurzame Ontwikkelingsdoelen",geography:"Geografie",implementingPartners:"Implementerende partners",contributingPartners:"Bijdragende partners",strategicPriorities:"Strategische Prioriteiten",year:"Jaar",allYears:"Alle Jaren",noFilter:"Geen Filter",investingPartners:"Investerende Partners",availableResources:"Beschikbare Middelen",requiredResources:"Vereiste Middelen",notEnoughData:"Niet genoeg gegevens voor deze sectie",groupingBy:"Groeperen per",noDataAvailableForThisSection:"Geen gegevens beschikbaar voor deze sectie",notEnoughDataForGraph:"Geen gegevens beschikbaar voor deze grafiek",trackingTheProgressPieChart:{title:"De voortgang van VN-activiteiten volgen",subTitle:"Deze grafiek toont het aantal verschillende geplande VN-activiteiten per duurzame ontwikkelingsdoel. Voor elk segment van de cirkel toont de pop-out onze voortgang tot nu toe bij het implementeren van deze activiteiten. 'In uitvoering' betekent dat een activiteit in de pijplijn zit of in uitvoering is, terwijl 'on hold' betekent dat een activiteit is opgeschort of geannuleerd.",activities:"({{avg}}% ) activiteiten {{sum}}",sidebarTitle:"{{totalActivities}} activiteiten in Gezamenlijk Werkplan"},howMuchWeNeedBarChart:{title:"Hoeveel we nodig hebben, hoeveel we hebben: Het financieringstekort van de VN per SDG",subTitle:"Deze afbeelding toont het financieringstekort per SDG van de bijdrage van de VN op basis van overeenkomsten met nationale partners bij de uitvoering van het UNDAF/samenwerkingskader. (Het geeft niet het totale financieringstekort weer voor de verwezenlijking van elke SDG in het land).",coverage:"{{value}}% dekking van vereiste middelen",percentCoverage:"{{value}}% dekking",requiredResources:"{{value}} vereiste middelen",availableResources:"{{value}} beschikbare middelen",popupRequired:"${{value}} <strong>vereiste middelen</strong>",popupAvailable:"${{value}} <strong>beschikbare middelen</strong>",popupCoversage:"{{value}}% <strong>dekking</strong>",keyTotalRequired:"Totaal vereeiste middelen",keyAvailableResources:"Beschikbare middelen (in miljoenen USD)",yAxis:"Y As"},whereIsTheMoneyGoingTreeMap:{title:"Waar gaat het geld naartoe? How the UN contributes to the SDGs",subTitle:"Deze grafiek laat zien hoe de VN middelen toewijst aan elk van de Duurzame Ontwikkelingsdoelen voor verschillende jaren.",availableResources:"Beschikbare Middelen ${{value}}",availableNumber:"<strong>Beschikbaar</strong>: ${{availableRounded}}",ofTotal:"{{value}}% van het totaal",noFilter:"Geen filter",strategicPriorities:"Strategische prioriteiten",noResults:"Geen resultaten voor geselecteerd filters"},notLinkedSdgDisclamer:{needAvailable:"Deze cijfers zijn exclusief een extra ${{availableResources}} van beschikbare programma's die momenteel nog niet zijn toegewezen aan een bepaalde SDG op UNINFO.",needRequired:"Benodigde middelen die niet zijn toegewezen aan een bepaalde SDG zijn ${requiredResources}}."},howTheUnIsSupporting:{title:"De Duurzame Ontwikkelingsdoelen",subTitle:"De Duurzame Ontwikkelingsdoelen zijn een wereldwijde oproep tot actie om armoede te beëindigen, het milieu en het klimaat van de aarde te beschermen en ervoor te zorgen dat mensen overal vrede en welvaart kunnen genieten. Dit zijn de doelen waar de VN aan werkt",noDataAvailable:"Geen gegevens beschikbaar voor deze sectie"},whereWeWorkMap:{title:"Waar we werken: De belangrijkste activiteiten van de VN",subTitle:"De VN voert {{keyActivities}} Kernactiviteiten uit tijdens de lopende programmacyclus. Met behulp van de onderstaande filters kunt u op het nummer op de kaart klikken voor een beknopte beschrijving van de verschillende activiteiten.",activities:"{{count}} activiteit",activities_plural:"{{count}} activiteiten",locationsAdminLevel1:"Locaties (beheersniveau 1)",nationallyImplemented:"Deze activiteiten worden nationaal uitgevoerd",nonSpecificLocations:"Deze activiteiten zijn niet gebonden aan een specifiek bestuursniveau binnen de werkruimte",agency:"Agentschap",investingPartners:"Investerende partners",implementingPartners:"Uitvoerende partners",sdgs:"Duurzame Ontwikkelingsdoel",noFilter:"Geen filter"},linkingInvestments:{middle:"Midden",end:"Einde",unassigned:"Niet gespecificeerd",title:"VN-investeringen inzetten om de Duurzame Ontwikkelingsdoelen te bevorderen",footer:"Niet gespecificeerd' verwijst naar activiteiten die niet aan de verschillende filters zijn gekoppeld.",disclaimer:'De bovenstaande grafiek toont de 20 belangrijkste bijdragende partners naar financiële bijdrage en de 20 belangrijkste uitvoerende partners naar totale begroting van de bijbehorende sub-outputs in het gezamenlijk werkplan van het samenwerkingskader/UNDAF. Alle andere partners zijn gegroepeerd onder "Andere bijdragende partners" of "Andere uitvoeringspartners". (Om alle partners te zien, haalt u het gezamenlijk werkplan uit het gedeelte "Gegevensverkenner" van het portaal).',subTitle:"Deze grafiek laat zien hoe VN-financieringen bijdragen aan het werk van verschillende agentschappen en partners om de Sustainable Development Goals (SDG's) vooruit te helpen. De breedte van de lijnen staat voor de relatieve hoeveelheid middelen die wordt bijgedragen. Filters helpen om te zien hoe de investeringen zijn gericht op verschillende SDG's, VN-organisaties en nationale uitvoeringspartners.",hoverNodeLink:"$ USD{{value}}"}}},bn:{translation:{"No Poverty":"দারিদ্র বিমোচন","Zero Hunger":"ক্ষুধার সমস্যা বিমোচন","Good Health and Well-being":"সুস্বাস্থ্য ও সামগ্রিক কল্যাণ","Quality Education":"মানসম্মত শিক্ষা","Gender Equality":"জেন্ডার সমতা","Clean Water and Sanitation":"বিশুদ্ধ, সুপেয় পানি ও পয়ঃনিষ্কাশন ","Affordable and Clean Energy":"সাশ্রয়ী ও পরিচ্ছন্ন জ্বালানি","Decent Jobs and Economic Growth":"সম্মানজনক কাজ ও অর্থনৈতিক প্রবৃদ্ধি","Industry, Innovation and Infrastructure":"শিল্প, উদ্ভাবন ও অবকাঠামো","Reduced Inequalities":"বৈষম্য হ্রাস ","Sustainable Cities and Communities":"টেকসই নগরায়ন ও সমাজ","Responsible Consumption and Production":"দায়িত্বশীল উৎপাদন ও সদ্ব্যবহার ","Climate Action":"জলবায়ু বিষয়ক পদক্ষেপ","Life Below Water":"জলজ জীবন","Life on Land":"স্থলজ জীবন","Peace and Justice - Strong Institutions":"শান্তি ও ন্যায়বিচার - শক্তিশালী প্রাতিষ্ঠানিক ব্যবস্থা","Partnerships for the Goals":"লক্ষ্যমাত্রা অর্জনে অংশীদারিত্ব",numbers:{k:"{{value}}কে",m:"{{value}}এম",b:"{{value}}বিএন",thousand:"{{value}} হাজার",million:"{{value}} মিলিয়ন",billion:"{{value}} বিলিয়ন"},homePage:{title:"ইউএনএসডিজি ডাটা পোর্টালে স্বাগতম",subTitle:"জাতিসংঘের টেকসই উন্নয়ন গ্রুপ ডেটা পোর্টালের এই বেটা সংস্করণ ১৬২টি দেশ ও অঞ্চলে টেকসই উন্নয়ন লক্ষ্যমাত্রা অর্জনে, জাতিসংঘ দলের কাজের তথ্য প্রদর্শন করে। এর তথ্য নেওয়া হয়েছে উন্নয়ন সমন্বয়ের জন্য স্বচ্ছতা ও জবাবদিহিতা বাড়াতে, ইউএন কান্ট্রি টিমের ব্যবহার করা ডিজিটাল প্ল্যাটফর্ম ইউএন ইনফো (আইএনএফও) থেকে, যার ব্যবস্থাপনার দায়িত্বে আছে জাতিসংঘ উন্নয়ন সমন্বয় অফিস (ডিসিও)। যদিও তথ্যের সেটগুলো সব দেশের ক্ষেত্রে এখনও সম্পূর্ণ হয়নি, তবে তথ্যের এই শূন্যতা পূরণে এবং তথ্যগুলো যাতে হালনাগাদ থাকে তা নিশ্চিত করতে ডিসিও জাতিসংঘের সব দেশভিত্তিক দলের সঙ্গে কাজ করছে।",totalAvailableFund:"মোট বিদ্যমান তহবিল",totalRequiredFund:"মোট প্রয়োজনীয় তহবিল",totalExpenditureFund:"মোট ব্যয় হওয়া অর্থ",coverage:"% প্রয়োজনীয় সম্পদের পরিমাণ",unsdcfInDesign:"নকশায় সহযোগিতা কাঠামো",unsdcfUnderImplementation:"বাস্তবায়নাধীন সহযোগিতা কাঠামো",legacyUndaf:"ইউএনডিএফের উত্তরাধিকার",disclaimer:"তহবিলজনিত তথ্য: জাতিসংঘের উন্নয়ন সহায়তা কাঠামো ও সহযোগিতা কাঠামোর জন্য বৈশ্বিকভাবে বিদ্যমান ও প্রয়োজনীয় সম্পদকে নির্দেশ করে।",publishedJwps:"ইউএন ইনফো বিষয়ে জেডব্লিউপিএস-সহ ইউএনসিটিএস",footnote1:"ইউএনডিএএফ - জাতিসংঘ উন্নয়ন সহায়তা কাঠামো",footnote2:"নকশায় সহযোগিতা কাঠামো - দেশটি ২০১৯ সালের সহযোগিতা কাঠামো নির্দেশিকা অনুসারে একটি নতুন কর্মসূচি তৈরির প্রক্রিয়ায় রয়েছে।",footnote3:"বাস্তবায়নাধীন সহযোগিতা কাঠামো - দেশটি একটি কর্মসূচি বাস্তবায়ন করছে যার নকশা প্রণয়ন করা হয়েছে ২০১৯ সালের সহযোগিতা কাঠামো নির্দেশিকা ব্যবহার করে।",globalOverview:{title:"বৈশ্বিক পর্যালোচনা",subTitleForRolloutStatus:'নিচের মানচিত্রটি আবাসিক সমন্বয় ব্যবস্থার আওতাভুক্ত দেশগুলোর জন্য দেশ-পর্যায়ে জাতিসংঘের যৌথ কর্মসূচির তথ্য প্রদর্শন করে। এর মধ্যে রয়েছে নতুন জাতিসংঘ টেকসই উন্নয়ন সহযোগিতা কাঠামো, যা ২০১৯ সালে চালু হয়েছে, সেইসঙ্গে পুরনো প্রজন্মের কিছু জাতিসংঘ উন্নয়ন সহায়তা কাঠামো (ইউএনডিএএফএস)। নির্দিষ্ট দেশ সম্পর্কে সংক্ষিপ্ত তথ্য দেশভিত্তিক পর্যালোচনা বা মানচিত্রে ক্লিক করে পাওয়া যায়। (ইউএনসিটি ও এর কাজ–  কর্মসূচি প্রণয়ন, তহবিল সংগ্রহ, দক্ষতা অর্জন ও গুরুত্বপূর্ণ নথি - সম্পর্কে বিস্তারিত পেজের একেবারে ওপরে "দেশ" মেনু অপশনের মাধ্যমে দেখা যেতে পারে)',subTitleForUNCTs:"এই মানচিত্রটি সেই দেশগুলোকে প্রদর্শন করে, যারা ইউএন ইনফোতে সহযোগিতার কাঠামো আপলোড ও প্রকাশ করেছে। সেই দেশের তহবিল সম্পর্কিত তথ্য সম্পর্কে আরও বিশদ দেখতে মিনি পাই চার্টে ক্লিক করুন।",firstTab:"সহযোগিতা কাঠামো উন্মোচনের অবস্থা",secondTab:"ইউএন ইনফো বিষয়ে ইউএনসিটিএস"},sdgsByFundingRequirements:{title:"অর্থ কোথায় যাচ্ছে?"},chartDisclaimer:"ইউএন আইএনএফও-এর মাধ্যমে ইউএনএসডিজি সদস্যদের তথ্য দিয়ে চালিত",keyDocuments:{title:"গুরুত্বপূর্ণ নথিসমূহ"}},country:{title:"দেশ",unctOverview:"ইউএনসিটি পর্যালোচনা",programming:"কর্মসূচি",funding:"তহবিল",efficiency:"দক্ষতা",documents:"নথিপত্র"},publishedDate:"প্রকাশের তারিখ",sustainableDevelopmentGoals:"টেকসই উন্নয়ন লক্ষ্যমাত্রা",geography:"ভৌগলিক অবস্থান",implementingPartners:"বাস্তবায়ন অংশীদার",contributingPartners:"অবদানকারী অংশীদার",strategicPriorities:"কৌশলগত অগ্রাধিকারসমূহ",strategicPrioritiesOutcomes:{subTitle:"ইউএনডেএএফ/সহযোগিতা কাঠামোর নিম্নোক্ত কৌশলগত অগ্রাধিকারসমূহ রয়েছে"},year:"বছর",allYears:"সব বছর",noFilter:"কোনো ফিল্টার নেই",noOptions:"কোনো অপশন নেই",loading:"লোডিং...",investingPartners:"বিনিয়োগকারী অংশীদার",availableResources:"বিদ্যমান সম্পদ",requiredResources:"প্রয়োজনীয় সম্পদ",notEnoughData:"এই শাখার জন্য পর্যাপ্ত তথ্য নেই",noDataAvailableForThisSection:"এই শাখার জন্য কোনো তথ্য নেই",notEnoughDataForGraph:"এই চার্টের জন্য তথ্য নেই",noDataAvailableForThisRequest:"এই অনুরোধের ক্ষেত্রে কোনো তথ্য পাওয়া যায়নি",name:"নাম",email:"ইমেইল",title:"শিরোনাম",agency:"সংস্থা",physicalPresence:"প্রত্যক্ষ উপস্থিতি",jobTitle:"কাজের শিরোনাম",representativeName:"প্রতিনিধির নাম",unAgency:"জাতিসংঘ সংস্থা",documentType:"নথির ধরন",startDate:"শুরুর তারিখ",endDate:"শেষের তারিখ",download:"ডাউনলোড",groupingBy:"শ্রেণিবিন্যাসের ভিত্তি",organizationType:"প্রতিষ্ঠানের ধরন","Country Overview":"দেশ পর্যালোচনা","Data Portal":"ডাটা পোর্টাল",Global:"বৈশ্বিক","All Countries":"সব দেশ",unctComposition:{title:"ইউএনসিটি গঠন",physicalPresence:"জাতিসংঘ সংস্থাগুলোর প্রত্যক্ষ উপস্থিতি",present:"উপস্থিত",nonPresent:"অনুপস্থিত",ccaParticipation:"সিসিএ-তে অংশগ্রহণকারী সংস্থাগুলো",signedCF:"চলমান কর্মসূচি পর্যন্ত স্বাক্ষর করা সংস্থাসমূহ",agencyParticipationInCCADevelopment:"সিসিএ উন্নয়ন/হালনাগাদ কার্যক্রমে অংশগ্রহণ",participated:"সিসিএতে অংশ নিয়েছিল",notParticipated:"অংশগ্রহণ করেনি",signatory:"সিএফে স্বাক্ষরকারী"},documents:{title:"নথিসমূহ",categories:"ক্যাটাগরিসমূহ",notFound:"এই অনুরোধের জন্য কোনো নথি পাওয়া যায়নি",selectFilters:{title:"নিম্নলিখিত ফিল্টার অপশন থেকে নির্বাচন করুন এবং তারপর নথিগুলোর একটি তালিকা পেতে 'অনুসন্ধান' বোতামে ক্লিক করুন।",one:"একটি দেশের সব নথি দেখতে ও ডাউনলোড করতে দেশটি বাছাই করুন এবং অন্য ফিল্টার অপশনগুলো ফাঁকা রাখুন।",two:"সব দেশের একই ধরনের নথি দেখতে ও ডাউনলোড করতে নথির একটি ধরন বাছাই করুন এবং অন্য ফিল্টার অপশনগুলো ফাঁকা রাখুন৷",three:"একটি দেশের একটি নথি দেখতে ও ডাউনলোড করতে দেশ ও নথির ধরন উভয় ঘরই ব্যবহার করুন।"},search:"অনুসন্ধান",clearFilters:"সব ফিল্টার মুছে ফেলুন"},countryKeyInformation:{programmingStatus:"প্রোগ্রামিং চক্রের অবস্থা",coverageRequiredResources:"প্রয়োজনীয় সম্পদের আওতা",currentCycleAvailableResources:"বর্তমান যৌথ কর্ম পরিকল্পনার অধীনে উপলব্ধ সম্পদ/অর্থ",currentCycleRequiredResources:"বর্তমান যৌথ কর্মপরিকল্পনার অধীনে প্রয়োজনীয় সম্পদ/অর্থ",programmingDocType:"প্রোগ্রামিং নথির ধরন",currentProgrammationDocument:"ইউএনআইএনএফওতে প্রকাশিত বর্তমান প্রোগ্রামিং ডকুমেন্ট",numAgenciesSignedUNDAF:"ইউএনডিএফ/সিএ পর্যন্ত স্বাক্ষরকারী সংস্থার সংখ্যা",requiredResources:"মোট প্রয়োজনীয় সম্পদসমূহ",availableResources:"মোট বিদ্যমান সম্পদসমূহ",percentCoverage:"প্রয়োজনীয় সম্পদের আওতা %",cfRolloutStatus:"সিএফ প্রকাশের অবস্থা",isJWPonUNINFO:"ইউএনআইএনএফও-তে কি জেডব্লিউপি আছে?",countryKeyInformation:"গুরুত্বপূর্ণ তথ্য",currentPublishedFramework:"ইউএনআইএনএফও বিষয়ে প্রকাশিত কাঠামো",JWPNotPublished:"ইউএন ইনফো বিষয়ে প্রকাশ না হওয়া জেডব্লিউপি",planPublishDisclaimer:"ইউএন ইনফোতে প্রকাশিত জেডব্লিউপি",dataNotAvailable:"অর্থায়নের তথ্য নেই",figureFromLastAnnualSurvey:"গত বার্ষিক জরিপ থেকে পাওয়া চিত্র",myffDisclaimer:"* মাল্টিইয়ার ফান্ডিং ফ্রেমওয়ার্ক (MYFF) হল একটি আর্থিক পরিকল্পনা ব্যবস্থা। এটি আর্থিক সংস্থানগুলির সামগ্রিক চিত্র উপস্থাপন করে, যা সমগ্র ইউএনএসডিসিএফ প্রোগ্রাম প্রদানের জন্য প্রয়োজনীয়। যদিও এটি সমগ্র ইউএনএসডিসিএফ-এর জন্য প্রয়োজনীয়, কিছু দেশের ব্যবস্থাপনা/সিস্টেম এখনও একটি MYFF তৈরি করছে; তাদের বার্ষিক যৌথ কাজের পরিকল্পনার জন্য প্রয়োজনীয় এবং উপলব্ধ সংস্থান ততক্ষণ পর্যন্ত বিকল্পভাবে ব্যবহার করা হয়।",disclaimer:"অর্থায়ন সম্পর্কিত ওপরের তথ্য সরবরাহ করা হয়েছে ইউএনডিসিওর সহায়তায় ইউএন কান্ট্রি টিমের ইউএন ইনফো প্ল্যাটফর্মে আপলোড করা দেশের কর্মসূচি প্রণয়ন সংক্রান্ত নথি (ইউএনডিএএফ/সহযোগিতা কাঠামো) থেকে। এই বেটা সংস্করণে ডেটা ক্রমাগত যাচাই ও হালনাগাদ করা হচ্ছে।"},countryKeyInformation_myffRequiredResources:"একাধিক বছরের তহবিল কাঠামোর অধীনে প্রয়োজনীয় অর্থসংস্থান",trackingTheProgressPieChart:{title:"আমাদের অগ্রগতি দেখুন",sdg:"টেকসই উন্নয়ন লক্ষ্যমাত্রা",organization:"জাতিসংঘের স্বতন্ত্র সংস্থা",subTitle:"এই চার্টটি প্রতি {{entity}}-এর জন্য পরিকল্পিত জাতিসংঘের বিভিন্ন কার্যক্রমের সংখ্যা তুলে ধরে। পাইয়ের প্রতিটি অংশের জন্য প্রদর্শিত তথ্য এই কার্যক্রমগুলো বাস্তবায়নে এখন পর্যন্ত আমাদের অগ্রগতি তুলে ধরে। 'কাজ চলমান' মানে হলো একটি কার্যক্রম হয় প্রক্রিয়াধীন বা বাস্তবায়নের মধ্যে রয়েছে। অন্যদিকে 'স্থগিত' মানে একটি কার্যক্রম স্থগিত বা বাতিল করা হয়েছে। {{note}}",note:"উল্লেখ্য যে, জাতিসংঘের প্রতিটি স্বতন্ত্র সংস্থার ক্ষেত্রে সেই সংস্থার সঙ্গে সম্পর্কিত শুধু সেসব কার্যক্রমই বিবেচনায় নেওয়া হয়,যেগুলোর আর্থিক মূল্য আছে। আর্থিক মূল্য না থাকা জাতিসংঘ সংস্থার সঙ্গে যুক্ত কার্যক্রম বিবেচনা করা হয় না।",activities:"{{ sum }} কার্যক্রমসমূহ ({{avg}}%)",sidebarTitle:"{{totalActivities}} যৌথ কর্মপরিকল্পনায় কার্যক্রমসমূহ"},howMuchWeNeedBarChart:{title:`আমাদের অর্থায়নে কত ঘাটতি রয়েছে?  
 {{entity}} এর মধ্যে {{countryName}}`,subTitle:"এই চিত্রটি ইউএনডিএএফ/সহযোগিতা কাঠামো বাস্তবায়নে, জাতীয় অংশীদারদের সঙ্গে চুক্তির ভিত্তিতে রাষ্ট্র পর্যায়ে জাতিসংঘের অবদানের ক্ষেত্র্",entitySubTitle:"এই চিত্র ইউএনডিএএফ/সহযোগিতা কাঠামো বাস্তবায়নে জাতীয় অংশীদারদের সঙ্গে চুক্তির ভিত্তিতে দেশে জাতিসংঘ সংস্থার অর্থায়নের ঘাটতি তুলে ধরে।",coverage:"{{value}} প্রয়োজনীয় সম্পদসমূহের আওতা %",percentCoverage:"{{value}} আওতা %",requiredResources:"{{value}} প্রয়োজনীয় সম্পদসমূহ ",availableResources:"{{value}} বিদ্যমান সম্পদসমূহ",popupRequired:"${{value}} <strong>প্রয়োজনীয় সম্পদসমূহ</strong>",popupAvailable:"${{value}} <strong>বিদ্যমান সম্পদসমূহ</strong>",popupCoversage:"{{value}}% <strong>আওতা</strong>",keyTotalRequired:"মোট প্রয়োজনীয় সম্পদসমূহ",keyAvailableResources:"বিদ্যমান সম্পদসমূহ (মিলিয়ন ডলারে)",yAxis:"ওয়াই অক্ষ",sdg:"টেকসই উন্নয়ন লক্ষ্যমাত্রা",organization:"জাতিসংঘ সংস্থা"},resourceMobilization:{title:"সম্পদ একত্রিতকরণ",subTitle:"এই দেশে বিদ্যমান, প্রয়োজনীয় ও একত্রিত করা সম্পদ",popupExpenditure:"${{value}} <strong>ব্যয়</strong>",keyAvailableResources:"বিদ্যমান সম্পদসমূহ",keyExpenditure:"ব্যয় (মিলিয়ন ডলারে)"},requiredAvailableExpenditureBarChart:{title:"এজেন্সি মূল্যায়িত প্রয়োজনীয় সম্পদ, বিদ্যমান সম্পদ ও ব্যয়ের পরিমাণ",subTitle:`একটি নির্দিষ্ট দেশে কৌশলগত অগ্রাধিকার ও ফলাফলের জন্য
বিদ্যমান বনাম প্রয়োজনীয় সম্পদের পরিমাণ (তহবিল)।`,popupExpenditure:"${{value}} <strong>ব্যয়</strong>"},whereIsGanttChart:{title:"পরবর্তী প্রোগ্রামিং চক্রের জন্য পথরেখা"},whereIsTheMoneyGoingTreeMap:{allocationsTitle:"প্রতিটি জাতিসংঘ সংস্থায় বরাদ্দ দেওয়া সম্পদের পরিমাণ",comingFromTitle:"অর্থ আসছে কোথা থেকে?",title:"জাতিসংঘ কীভাবে এসডিজি তহবিলে অবদান রাখে?",subTitle:"নিচের গ্রাফিক উপস্থাপনাটি সহযোগিতা কাঠামোতে বিদ্যমান সম্পদের ওপর ভিত্তি করে প্রতিটি এসডিজি লক্ষ্যের জন্য বরাদ্দ হওয়া সম্পদকে চিত্রিত করে।",allocationsSubtitle:"নিচের গ্রাফিক উপস্থাপনাটি ইউএনডিএএফসমূহ ও সহযোগিতা কাঠামোতে বিদ্যমান সম্পদের ওপর ভিত্তি করে প্রতিটি জাতিসংঘ সংস্থায় বরাদ্দ সম্পদকে চিত্রিত করে।",comingFromSubtitle:"নিচের গ্রাফিক উপস্থাপনাটি ইউএনডিএএফসমূহ ও সহযোগিতা কাঠামোতে বিদ্যমান সম্পদের ওপর ভিত্তি করে প্রত্যেক উন্নয়ন সহযোগীর কাছ থেকে পাওয়া সম্পদকে চিত্রিত করে।",availableResources:"বিদ্যমান সম্পদসমূহ ${{ value }}",availableNumber:"<strong>বিদ্যমান</strong>: ${{availableRounded}}",ofTotal:"{{value}} মোটের %",noFilter:"ফিল্টার নেই",strategicPriorities:"কৌশলগত অগ্রাধিকারসমূহ",noResults:"নির্বাচিত ফিল্টারের জন্য কিছু পাওয়া যায়নি",sdg:"এসডিজি লক্ষ্যমাত্রা",organization:"জাতিসংঘ সংস্থা "},notLinkedSdgDisclamer:{needAvailable:"এই চিত্রগুলো কর্মসূচির বিদ্যমান সম্পদের অতিরিক্ত ${{availableResources}} বাদ দিয়েছে, যা ইউএন ইনফোতে একটি নির্দিষ্ট এসডিজিতে ভূমিকা রাখেনি।",needRequired:"একটি নির্দিষ্ট এসডিজিতে ভূমিকা না রাখা বিদ্যমান সম্পদসমূহ হচ্ছে ${{requiredResources}}"},howTheUnIsSupporting:{title:"টেকসই উন্নয়ন লক্ষ্যমাত্রাসমূহ",subTitle:"নিম্নলিখিত এসডিজি লক্ষ্যের সঙ্গে সংযুক্ত জাতিসংঘের কাজ",noDataAvailable:"এই শাখার জন্য কোনো তথ্য পাওয়া যায়নি"},whereWeWorkMap:{title:"আমরা যেখানে কাজ করি: জাতিসংঘের মূল কার্যক্রমগুলো",subTitle:"চলমান প্রোগ্রাম চক্রে জাতিসংঘ {{keyActivities}} গুরুত্বপূর্ণ কার্যক্রম বাস্তবায়ন করছে। নিচের মানচিত্রটি <strong>প্রতিটি স্থান ভেদে কার্যক্রমের* সংখ্যা</strong>  প্রদর্শন করে (উল্লেখ্য যে, একটি কার্যক্রম একের অধিক স্থানে যুক্ত থাকতে পারে)। নিচের ফিল্টার ব্যবহার করে, বিভিন্ন কার্যক্রমের সংক্ষিপ্ত বর্ণনা পেতে মানচিত্রে থাকা সংখ্যার ওপর ক্লিক করুন।",activities:"{{count}} কার্যক্রমসমূহ",activities_plural:"{{count}} কার্যক্রমসমূহ",locationsAdminLevel1:"স্থান (প্রশাসক পর্যায় ১)",nationallyImplemented:"এই কার্যক্রমগুলো জাতীয়ভাবে বাস্তবায়িত হয়",multicountryImplemented:"এসব কার্যক্রমের আওতায় রয়েছে একাধিক দেশ",nonSpecificLocations:"এই কার্যক্রমগুলো কর্মক্ষেত্রের ভেতরে কোনো সুনির্দিষ্ট প্রশাসনিক পর্যায়ের সঙ্গে যুক্ত নয়",agency:"সংস্থা",investingPartners:"বিনিয়োগ অংশীদার",implementingPartners:"বাস্তবায়নকারী অংশীদার",sdgs:"টেকসই উন্নয়ন লক্ষ্যমাত্রা",noFilter:"ফিল্টার নেই",activityDisclaimer:"*কার্যক্রমগুলোকে সাধারণত 'সাব-আউটপুট' হিসেবেও উল্লেখ করা হয়, জেডব্লিউপি নির্দেশিকা শিট ২০১৯ সংজ্ঞা দেখুন"},genderHumanRightsContributionLevel:{title:"বিষয়ভিত্তিক মার্কার পর্যালোচনা",subTitle:"ইউএনএসডিসিএফ যৌথ কর্মপরিকল্পনায় উন্নয়ন কর্মসূচি কীভাবে এই বিষয়ভিত্তিক খাতগুলোকে সহায়তা দেয় তা তুলে ধরতে, ইউএন কান্ট্রি টিম মানবাধিকার মার্কার ও জেন্ডার সমতা মার্কার ব্যবহার করে। যৌথ কর্মপরিকল্পনার প্রতিটি সাব-আউটপুট সংশ্লিষ্ট মার্কার, তার অবদান ০-৩ স্কেলে পরিমাপ করা হয়। ইউএনএসডিসিএফ যৌথ কর্মপরিকল্পনায় জেন্ডার সমতা মার্কার ও মানবাধিকার মার্কার প্রয়োগ করার জন্য আমাদের নির্দেশিকা পর্যালোচনা করতে <1>এখানে</1> ক্লিক করুন",marker0:"মার্কার ০",marker1:"মার্কার ১",marker2:"মার্কার ২",marker3:"মার্কার ৩",noLinkedMarker:"কোন মার্কার নেই"},requiredAvailableExpenditurePerYear:{title:"প্রতি বছর প্রয়োজনীয় ও বিদ্যমান সম্পদ ও ব্যয়ের পরিমাণ",subTitle:"এই দেশে বিদ্যমান, প্রয়োজনীয় ও একত্রিত করা সম্পদসমূহ।",keyAvailableResources:"বিদ্যমান সম্পদ",keyRemainingAvailableResources:"অবশিষ্ট উপলব্ধ সম্পদ/অর্থ",keyExpenditureResources:"মোট ব্যয়",totalAvailableResources:"বিদ্যমান মোট সম্পদ"},linkingInvestments:{middle:"মধ্য পর্যায়",end:"শেষ",unassigned:"উল্লেখ নেই",title:"টেকসই উন্নয়ন লক্ষ্য মাত্রার অর্জনে জাতিসংঘের বিনিয়োগ",disclaimer:"এই চার্টে শীর্ষ ২০ অবদানকারীকে দেখানো হয়। ডেটা ভিজ্যুয়ালাইজেশনে সীমাবদ্ধতার কারণে এটি কিছু অবদানকারী ও বাস্তবায়নকারী অংশীদারকে বাদ দেয়। আরও বিস্তারিত বিবরণের জন্য অনুগ্রহ করে<1>ডেটা এক্সপ্লোরার</1>থেকে জাতিসংঘ দলের যৌথ কর্মপরিকল্পনা ডাউনলোড করুন",subTitle:"এই গ্রাফিকটি দেখায় কীভাবে জাতিসংঘের অর্থায়ন বিভিন্ন সংস্থা ও অংশীদারদের টেকসই উন্নয়ন লক্ষ্যমাত্রাগুলো (এসডিজিএস) এগিয়ে নেওয়ার কাজে অবদান রাখছে। লাইনের প্রস্থ অনুদান প্রদান করা সম্পদের আপেক্ষিক পরিমাণের প্রতিনিধিত্ব করে। বিভিন্ন এসডিজি, জাতিসংঘ সংস্থা ও জাতীয় বাস্তবায়নকারী অংশীদারদের লক্ষ্য করে কীভাবে বিনিয়োগ করা হয়েছে তা দেখতে ফিল্টার সাহায্য করে।",hoverNodeLink:"$USD {{value}}"},deliveryRate:{title:"এর মধ্যে বিতরণ হার {{countryName}}",subTitle:"এই দেশে বৃদ্ধি পাওয়া ও বিদ্যমান সম্পদের পরিমাণ।"},markerContributionByOutcome:{title:"ফলাফলের মাধ্যমে চিহ্নিতকারী অবদান",subTitle:"ফলাফলের মাধ্যমে চিহ্নিতকারী অবদানের প্রদর্শনী",significantObject:"তাৎপর্যপূর্ণ উদ্দেশ্য",principleObjective:"মূল উদ্দেশ্য",significantContribution:"উল্লেখযোগ্য অবদান",principleContribution:"মূল অবদান",humanRights:"মানবাধিকার",genderMarker:"জেন্ডার চিহ্নিতকারী"},markerContributionBySDG:{title:"এসডিজির মাধ্যমে চিহ্নিত অবদান",subTitle:"এসডিজির মাধ্যমে কার্যক্রমের সংখ্যা"},dataExplorer:{title:"ডেটা এক্সপ্লোরার",cooperationFramework:"সহযোগিতার কাঠামো",imsLogIn:"আইএমএস প্রতিবেদন দেখতে লগ ইন করুন",activityReport:{title:"সাব-আউটপুট রিপোর্ট",chooseFilters:"একটি দেশ ও তার সাব-আউটপুট রিপোর্ট দেখতে একটি পরিকল্পনা বাছাই করুন।"},agencyReport:{countriesInWhichUNEntityParticipatesJointProgrammes:"যেসব দেশে জাতিসংঘ সংস্থা যৌথ কর্মসূচিতে অংশগ্রহণ করে",percentOfCountriesParticipate:"জাতিসংঘ সংস্থা অংশগ্রহণ করে এমন দেশের %",countriesParticipatingInUNDAF:"যেসব দেশে জাতিসংঘ সংস্থা ইউএনডিএএফ/সহযোগিতা কাঠামোতে অংশগ্রহণ করে",totalCountOfCountriesWithUNDAF:"ইউএনডিএফ/সহযোগিতা কাঠামো গ্রহণ করা মোট দেশের সংখ্যা",totalCountOfCountriesWithJointProgramme:"যৌথ কর্মসূচি গ্রহণ করা মোট দেশের সংখ্যা",jointProgrammingDetails:"যৌথ কর্মসূচি প্রণয়নের বিস্তারিত"},countryFactsheet:{title:"দেশ পরিচিতি",noReportsForWorkspace:"নির্বাচিত কর্মক্ষেত্র ও বছরের সঙ্গে সম্পর্কিত কোনো আইএমএস প্রতিবেদন নেই",noPublishedSurvey:"সংশ্লিষ্ট আইএমএস জরিপ এখনও প্রকাশিত হয়নি"},disabilityGenderReports:{title:"अपांगता और लिंग रिपोर्ट्स",noReportsForWorkspace:"নির্বাচিত কর্মক্ষেত্র ও বছরের সঙ্গে সম্পর্কিত কোনো আইএমএস প্রতিবেদন নেই",noPublishedSurvey:"সংশ্লিষ্ট আইএমএস জরিপ এখনও প্রকাশিত হয়নি"},indicatorReport:{indicatorSummary:"নির্দেশক সারাংশ",totalNumberOfIndicators:"নির্দেশকের মোট সংখ্যা",numberOfIndicatorsMissingBaselines:"ভিত্তিরেখা না থাকা নির্দেশকের সংখ্যা"},contacts:{presence:"শারীরিক উপস্থিতি আছে",responsibilities:"দায়বদ্ধতা",uncgLead:"ইউএনসিজি লিড",headOfRCO:"আরসিও'র প্রধান",organization:"প্রতিষ্ঠান",headOfOffice:"দপ্তরের প্রধান/যোগাযোগের প্রধান ব্যক্তি"}},preparationOfCcaReport:"সিসিএ প্রতিবেদনের প্রস্তুতি",designOfTheCooperationFramework:"চালু হওয়া সিএফের নকশা",prioritizationDraftResultsFramework:"সিএফকে অগ্রাধিকার দেওয়ার প্রক্রিয়া",narrativeCooperationFramework:"সিএফের পরিণাম ও ফলাফল সম্মত এবং খসড়া সিএফ তৈরি করা হয়েছে",preparationOfTheReviewOfUnctConfiguration:"ইউএনসিটি কনফিগারেশন অনুশীলন পরিচালিত হয়েছে",signatureOfTheCooperationFramework:"সহযোগিতা কাঠামোর স্বাক্ষর",preparationOfFundingFramework:"বহুস্তরীয় অর্থায়ন কাঠামোর প্রস্তুতি",preparationOfUnResourcesMobilizationStrategy:"জাতিসংঘের সম্পদ একত্রিকরণ কৌশলের প্রস্তুতি",preparationOfUnCountryProgrammingInstruments:"রাষ্ট্র পর্যায়ে জাতিসংঘ কর্মসূচির প্রস্তুতি",establishmentOfCooperationFrameworkGovernanceAndManagementStructures:"সিএফ গভর্নেন্স এবং ব্যবস্থাপনা কাঠামো প্রতিষ্ঠা",preparationOfJointWorkPlans:"ইউএনআইএনএফও-তে যৌথ কর্মপরিকল্পনার প্রস্তুতি",conductOfEvaluation:"চলমান ইউএনডিএএফ/সিএফ এর মূল্যায়ন করা",draftCooperationFrameworkValidatedWithGovernmentAndPartners:"সরকার ও অংশীদারদের অনুমোদিত খসড়া সিএফ",mapDisclaimer:"এই মানচিত্রে যুক্ত উপাধি ও উপকরণের উপস্থাপনা কোনো দেশ, অঞ্চল, শহর বা এলাকা বা এর কর্তৃপক্ষের আইনগত অবস্থা, বা এর সীমান্ত বা সীমানা নির্ধারণের বিষয়ে জাতিসংঘ সচিবালয়ের পক্ষ থেকে যে কোনো মতামতের অভিব্যক্তিকে বোঝায় না।",countrySnapshot:{title:"ইউএনসিটি স্ন্যাপশট",surveyYear:"আইএমএস জরিপের বছর",cooperationFramework:{noResults:"চলতি বছরের এখনো কোনো প্রকাশিত পরিকল্পনা নেই। আগের কোনো এক বছরের পরিকল্পনা দেখতে ওই বছরটি বাছাই করুন।",noImsResults:"চলতি বছরের এখনো প্রকাশিত কোনো জরিপ নেই। আগের কোনো এক বছরের সমীক্ষা দেখতে বছরটি বাছাই করুন।",dateOfSignature:"স্বাক্ষরের তারিখ",startDate:"শুরুর তারিখ",endDate:"শেষের তারিখ",totalPlannedBudget:"ইউএনডিএএফ/সহযোগিতা কাঠামোর মোট পরিকল্পিত বাজেট (মার্কিন ডলারে)",annualFunding:"ইউএন আইএনএফও-তে বার্ষিক তহবিল কাঠামো?",annualJointWorkPlan:"ইউএনডিএএফ/সিএফ-এর জন্য বার্ষিক যৌথ কর্মপরিকল্পনা?",monitoredOnUninfo:"ইউএনআইএনএফও বিষয় জেডব্লিউপি পর্যবেক্ষণ ও প্রতিবেদন দেওয়া হয়েছে?"},businessOperation:{title:"ব্যবসায়িক কার্যক্রম"},jointProgrammes:{title:"যৌথ কর্মসূচিসমূহ",total:"যৌথ কর্মসূচির মোট সংখ্যা",name:"যৌথ কর্মসূচির নাম",fund:"যৌথ কর্মসূচির জন্য তহবিল কি গত বছরে ব্যয় করা হয়েছিল?",modality:"কোন ধরন?",entitiesParticipation:"জাতিসংঘ সংস্থায় অংশগ্রহণ",budget:"বাজেট $"},partnership:{title:"অংশীদারিত্ব",externalCategories:"জাতীয় সরকারের মন্ত্রণালয়ের বাইরে জাতিসংঘের কোন বহিরাগত অংশীদারিত্ব বিভাগ রয়েছে",unctIfis:"ইউএনসিটি কীভাবে আইএফআইসমূহের সঙ্গে সম্পৃক্ত হয়"},resultGroups:{title:"রেজাল্ট গ্রুপ",nameOfGroup:"গ্রুপের নাম",jwpOnUninfo:"ইউএনআইএনএফও বিষয়ক ডব্লিউপি",jwpSignedGovernment:"সরকার  স্বাক্ষরিত জেডব্লিউপি",rgGroupMeets:"আরজি গ্রুপ অন্তত প্রতি দুই মাস পর বৈঠক করে",jwpDeveloped:"যৌথ কর্ম পরিকল্পনা (জেডব্লিউপি) তৈরি করা হয়েছে",jwpJointEndorsed:"যৌথ জাতীয়-জাতিসংঘ পর্যায়ের স্টিয়ারিং কমিটি অনুমোদিত জেডব্লিউপি",jwpUnctEndorsed:"ইউএনসিটি সদস্যদের অনুমোদিত জেডব্লিউপি ",howManyTimesDidTheResultsGroupMeetInThePastYear:"গত বছরে রেজাল্ট গ্রুপ কতবার মিলিত হয়েছে?"},generalInformation:{title:"সাধারণ তথ্য",residentCoordinator:"আবাসিক সমন্বয়কারী, এইচসি",headOfRco:"আরসিওর প্রধান",name:"নাম",email:"ইমেইল",jobTitle:"চাকরির শিরোনাম"},humanRightsAndGender:{title:"মানবাধিকার ও লিঙ্গ",averageRating:" স্কোরকার্ডের গড় রেটিং",scorecards:"স্কোরকার্ডসমূহ",genderScorecard:"জেন্ডার স্কোরকার্ড",sexualExploitationPrevention:"যৌন নিপীড়ন প্রতিরোধ",disabilityScorecard:"অক্ষমতা স্কোরকার্ড",youthScorecard:"যুব স্কোরকার্ড",scorecardPercent:"{{value}}%",indicatorTotal:"{{ has }} এর মধ্যে {{ totalIndicators }} নির্দেশকগুলো"}},numberOfActivitiesPerAgency:{title:"প্রতিটি সংস্থার জন্য কার্যক্রমের সংখ্যা",subTitle:`ক্রিয়াকলাপগুলিকে 'চলমান', 'সম্পূর্ণ', বা 'স্থগিত' দ্বারা চিহ্নিত করা হয়।
'চলমান' মানে একটি কার্যকলাপ পাইপলাইনে বা বাস্তবায়নের মধ্যে রয়েছে;
'সম্পূর্ণ' মানে একটি কার্যকলাপ চূড়ান্ত বা বন্ধ;
'স্থগিত' মানে হল একটি কার্যকলাপ স্থগিত বা বাতিল করা হয়েছে।
কার্যক্রমের সংখ্যা অনুসারে শুধুমাত্র শীর্ষ পনেরটি সংস্থা দেখানো হয়েছে।`,inProgress:"চলমান",completed:"সম্পূর্ণ",onHold:"স্থগিত"}}}};JF.use(dR).init({lng:"en",fallbackLng:"en",resources:WZ,interpolation:{escapeValue:!1}});const YB={i18n:JF};var KZ={value:()=>{}};function eD(){for(var e=0,t=arguments.length,i={},r;e<t;++e){if(!(r=arguments[e]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new iw(i)}function iw(e){this._=e}function ZZ(e,t){return e.trim().split(/^|\s+/).map(function(i){var r="",d=i.indexOf(".");if(d>=0&&(r=i.slice(d+1),i=i.slice(0,d)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:r}})}iw.prototype=eD.prototype={constructor:iw,on:function(e,t){var i=this._,r=ZZ(e+"",i),d,f=-1,v=r.length;if(arguments.length<2){for(;++f<v;)if((d=(e=r[f]).type)&&(d=qZ(i[d],e.name)))return d;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++f<v;)if(d=(e=r[f]).type)i[d]=tD(i[d],e.name,t);else if(t==null)for(d in i)i[d]=tD(i[d],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new iw(e)},call:function(e,t){if((d=arguments.length-2)>0)for(var i=new Array(d),r=0,d,f;r<d;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(f=this._[e],r=0,d=f.length;r<d;++r)f[r].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],d=0,f=r.length;d<f;++d)r[d].value.apply(t,i)}};function qZ(e,t){for(var i=0,r=e.length,d;i<r;++i)if((d=e[i]).name===t)return d.value}function tD(e,t,i){for(var r=0,d=e.length;r<d;++r)if(e[r].name===t){e[r]=KZ,e=e.slice(0,r).concat(e.slice(r+1));break}return i!=null&&e.push({name:t,value:i}),e}var JB="http://www.w3.org/1999/xhtml";const nD={svg:"http://www.w3.org/2000/svg",xhtml:JB,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rw(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),nD.hasOwnProperty(t)?{space:nD[t],local:e}:e}function XZ(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===JB&&t.documentElement.namespaceURI===JB?t.createElement(e):t.createElementNS(i,e)}}function YZ(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function iD(e){var t=rw(e);return(t.local?YZ:XZ)(t)}function JZ(){}function eT(e){return e==null?JZ:function(){return this.querySelector(e)}}function eq(e){typeof e!="function"&&(e=eT(e));for(var t=this._groups,i=t.length,r=new Array(i),d=0;d<i;++d)for(var f=t[d],v=f.length,h=r[d]=new Array(v),s,U,$=0;$<v;++$)(s=f[$])&&(U=e.call(s,s.__data__,$,f))&&("__data__"in s&&(U.__data__=s.__data__),h[$]=U);return new qd(r,this._parents)}function rD(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tq(){return[]}function oD(e){return e==null?tq:function(){return this.querySelectorAll(e)}}function nq(e){return function(){var t=e.apply(this,arguments);return t==null?[]:rD(t)}}function iq(e){typeof e=="function"?e=nq(e):e=oD(e);for(var t=this._groups,i=t.length,r=[],d=[],f=0;f<i;++f)for(var v=t[f],h=v.length,s,U=0;U<h;++U)(s=v[U])&&(r.push(e.call(s,s.__data__,U,v)),d.push(s));return new qd(r,d)}function sD(e){return function(){return this.matches(e)}}function aD(e){return function(t){return t.matches(e)}}var rq=Array.prototype.find;function oq(e){return function(){return rq.call(this.children,e)}}function sq(){return this.firstElementChild}function aq(e){return this.select(e==null?sq:oq(typeof e=="function"?e:aD(e)))}var lq=Array.prototype.filter;function cq(){return this.children}function uq(e){return function(){return lq.call(this.children,e)}}function hq(e){return this.selectAll(e==null?cq:uq(typeof e=="function"?e:aD(e)))}function dq(e){typeof e!="function"&&(e=sD(e));for(var t=this._groups,i=t.length,r=new Array(i),d=0;d<i;++d)for(var f=t[d],v=f.length,h=r[d]=[],s,U=0;U<v;++U)(s=f[U])&&e.call(s,s.__data__,U,f)&&h.push(s);return new qd(r,this._parents)}function lD(e){return new Array(e.length)}function Aq(){return new qd(this._enter||this._groups.map(lD),this._parents)}function ow(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ow.prototype={constructor:ow,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function fq(e){return function(){return e}}function pq(e,t,i,r,d,f){for(var v=0,h,s=t.length,U=f.length;v<U;++v)(h=t[v])?(h.__data__=f[v],r[v]=h):i[v]=new ow(e,f[v]);for(;v<s;++v)(h=t[v])&&(d[v]=h)}function mq(e,t,i,r,d,f,v){var h,s,U=new Map,$=t.length,V=f.length,q=new Array($),te;for(h=0;h<$;++h)(s=t[h])&&(q[h]=te=v.call(s,s.__data__,h,t)+"",U.has(te)?d[h]=s:U.set(te,s));for(h=0;h<V;++h)te=v.call(e,f[h],h,f)+"",(s=U.get(te))?(r[h]=s,s.__data__=f[h],U.delete(te)):i[h]=new ow(e,f[h]);for(h=0;h<$;++h)(s=t[h])&&U.get(q[h])===s&&(d[h]=s)}function gq(e){return e.__data__}function _q(e,t){if(!arguments.length)return Array.from(this,gq);var i=t?mq:pq,r=this._parents,d=this._groups;typeof e!="function"&&(e=fq(e));for(var f=d.length,v=new Array(f),h=new Array(f),s=new Array(f),U=0;U<f;++U){var $=r[U],V=d[U],q=V.length,te=rD(e.call($,$&&$.__data__,U,r)),he=te.length,Ae=h[U]=new Array(he),De=v[U]=new Array(he),ke=s[U]=new Array(q);i($,V,Ae,De,ke,te,t);for(var xe=0,Te=0,Ee,Fe;xe<he;++xe)if(Ee=Ae[xe]){for(xe>=Te&&(Te=xe+1);!(Fe=De[Te])&&++Te<he;);Ee._next=Fe||null}}return v=new qd(v,r),v._enter=h,v._exit=s,v}function yq(){return new qd(this._exit||this._groups.map(lD),this._parents)}function vq(e,t,i){var r=this.enter(),d=this,f=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(d=t(d)),i==null?f.remove():i(f),r&&d?r.merge(d).order():d}function xq(e){if(!(e instanceof qd))throw new Error("invalid merge");for(var t=this._groups,i=e._groups,r=t.length,d=i.length,f=Math.min(r,d),v=new Array(r),h=0;h<f;++h)for(var s=t[h],U=i[h],$=s.length,V=v[h]=new Array($),q,te=0;te<$;++te)(q=s[te]||U[te])&&(V[te]=q);for(;h<r;++h)v[h]=t[h];return new qd(v,this._parents)}function bq(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var r=e[t],d=r.length-1,f=r[d],v;--d>=0;)(v=r[d])&&(f&&v.compareDocumentPosition(f)^4&&f.parentNode.insertBefore(v,f),f=v);return this}function wq(e){e||(e=Cq);function t(V,q){return V&&q?e(V.__data__,q.__data__):!V-!q}for(var i=this._groups,r=i.length,d=new Array(r),f=0;f<r;++f){for(var v=i[f],h=v.length,s=d[f]=new Array(h),U,$=0;$<h;++$)(U=v[$])&&(s[$]=U);s.sort(t)}return new qd(d,this._parents).order()}function Cq(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Bq(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Tq(){return Array.from(this)}function Eq(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],d=0,f=r.length;d<f;++d){var v=r[d];if(v)return v}return null}function Sq(){let e=0;for(const t of this)++e;return e}function Iq(){return!this.node()}function Mq(e){for(var t=this._groups,i=0,r=t.length;i<r;++i)for(var d=t[i],f=0,v=d.length,h;f<v;++f)(h=d[f])&&e.call(h,h.__data__,f,d);return this}function Lq(e){return function(){this.removeAttribute(e)}}function kq(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Pq(e,t){return function(){this.setAttribute(e,t)}}function Fq(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Dq(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function Uq(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function zq(e,t){var i=rw(e);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((t==null?i.local?kq:Lq:typeof t=="function"?i.local?Uq:Dq:i.local?Fq:Pq)(i,t))}function cD(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Rq(e){return function(){this.style.removeProperty(e)}}function Oq(e,t,i){return function(){this.style.setProperty(e,t,i)}}function Nq(e,t,i){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,i)}}function Qq(e,t,i){return arguments.length>1?this.each((t==null?Rq:typeof t=="function"?Nq:Oq)(e,t,i??"")):L_(this.node(),e)}function L_(e,t){return e.style.getPropertyValue(t)||cD(e).getComputedStyle(e,null).getPropertyValue(t)}function $q(e){return function(){delete this[e]}}function jq(e,t){return function(){this[e]=t}}function Hq(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function Vq(e,t){return arguments.length>1?this.each((t==null?$q:typeof t=="function"?Hq:jq)(e,t)):this.node()[e]}function uD(e){return e.trim().split(/^|\s+/)}function tT(e){return e.classList||new hD(e)}function hD(e){this._node=e,this._names=uD(e.getAttribute("class")||"")}hD.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function dD(e,t){for(var i=tT(e),r=-1,d=t.length;++r<d;)i.add(t[r])}function AD(e,t){for(var i=tT(e),r=-1,d=t.length;++r<d;)i.remove(t[r])}function Gq(e){return function(){dD(this,e)}}function Wq(e){return function(){AD(this,e)}}function Kq(e,t){return function(){(t.apply(this,arguments)?dD:AD)(this,e)}}function Zq(e,t){var i=uD(e+"");if(arguments.length<2){for(var r=tT(this.node()),d=-1,f=i.length;++d<f;)if(!r.contains(i[d]))return!1;return!0}return this.each((typeof t=="function"?Kq:t?Gq:Wq)(i,t))}function qq(){this.textContent=""}function Xq(e){return function(){this.textContent=e}}function Yq(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Jq(e){return arguments.length?this.each(e==null?qq:(typeof e=="function"?Yq:Xq)(e)):this.node().textContent}function e9(){this.innerHTML=""}function t9(e){return function(){this.innerHTML=e}}function n9(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function i9(e){return arguments.length?this.each(e==null?e9:(typeof e=="function"?n9:t9)(e)):this.node().innerHTML}function r9(){this.nextSibling&&this.parentNode.appendChild(this)}function o9(){return this.each(r9)}function s9(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function a9(){return this.each(s9)}function l9(e){var t=typeof e=="function"?e:iD(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function c9(){return null}function u9(e,t){var i=typeof e=="function"?e:iD(e),r=t==null?c9:typeof t=="function"?t:eT(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)})}function h9(){var e=this.parentNode;e&&e.removeChild(this)}function d9(){return this.each(h9)}function A9(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function f9(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function p9(e){return this.select(e?f9:A9)}function m9(e){return arguments.length?this.property("__data__",e):this.node().__data__}function g9(e){return function(t){e.call(this,t,this.__data__)}}function _9(e){return e.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");return r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),{type:t,name:i}})}function y9(e){return function(){var t=this.__on;if(t){for(var i=0,r=-1,d=t.length,f;i<d;++i)f=t[i],(!e.type||f.type===e.type)&&f.name===e.name?this.removeEventListener(f.type,f.listener,f.options):t[++r]=f;++r?t.length=r:delete this.__on}}}function v9(e,t,i){return function(){var r=this.__on,d,f=g9(t);if(r){for(var v=0,h=r.length;v<h;++v)if((d=r[v]).type===e.type&&d.name===e.name){this.removeEventListener(d.type,d.listener,d.options),this.addEventListener(d.type,d.listener=f,d.options=i),d.value=t;return}}this.addEventListener(e.type,f,i),d={type:e.type,name:e.name,value:t,listener:f,options:i},r?r.push(d):this.__on=[d]}}function x9(e,t,i){var r=_9(e+""),d,f=r.length,v;if(arguments.length<2){var h=this.node().__on;if(h){for(var s=0,U=h.length,$;s<U;++s)for(d=0,$=h[s];d<f;++d)if((v=r[d]).type===$.type&&v.name===$.name)return $.value}return}for(h=t?v9:y9,d=0;d<f;++d)this.each(h(r[d],t,i));return this}function fD(e,t,i){var r=cD(e),d=r.CustomEvent;typeof d=="function"?d=new d(t,i):(d=r.document.createEvent("Event"),i?(d.initEvent(t,i.bubbles,i.cancelable),d.detail=i.detail):d.initEvent(t,!1,!1)),e.dispatchEvent(d)}function b9(e,t){return function(){return fD(this,e,t)}}function w9(e,t){return function(){return fD(this,e,t.apply(this,arguments))}}function C9(e,t){return this.each((typeof t=="function"?w9:b9)(e,t))}function*B9(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],d=0,f=r.length,v;d<f;++d)(v=r[d])&&(yield v)}var T9=[null];function qd(e,t){this._groups=e,this._parents=t}function Mv(){return new qd([[document.documentElement]],T9)}function E9(){return this}qd.prototype=Mv.prototype={constructor:qd,select:eq,selectAll:iq,selectChild:aq,selectChildren:hq,filter:dq,data:_q,enter:Aq,exit:yq,join:vq,merge:xq,selection:E9,order:bq,sort:wq,call:Bq,nodes:Tq,node:Eq,size:Sq,empty:Iq,each:Mq,attr:zq,style:Qq,property:Vq,classed:Zq,text:Jq,html:i9,raise:o9,lower:a9,append:l9,insert:u9,remove:d9,clone:p9,datum:m9,on:x9,dispatch:C9,[Symbol.iterator]:B9};function nT(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function pD(e,t){var i=Object.create(e.prototype);for(var r in t)i[r]=t[r];return i}function Lv(){}var kv=.7,sw=1/kv,k_="\\s*([+-]?\\d+)\\s*",Pv="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",cf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",S9=/^#([0-9a-f]{3,8})$/,I9=new RegExp("^rgb\\("+[k_,k_,k_]+"\\)$"),M9=new RegExp("^rgb\\("+[cf,cf,cf]+"\\)$"),L9=new RegExp("^rgba\\("+[k_,k_,k_,Pv]+"\\)$"),k9=new RegExp("^rgba\\("+[cf,cf,cf,Pv]+"\\)$"),P9=new RegExp("^hsl\\("+[Pv,cf,cf]+"\\)$"),F9=new RegExp("^hsla\\("+[Pv,cf,cf,Pv]+"\\)$"),mD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nT(Lv,Fv,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:gD,formatHex:gD,formatHsl:D9,formatRgb:_D,toString:_D});function gD(){return this.rgb().formatHex()}function D9(){return wD(this).formatHsl()}function _D(){return this.rgb().formatRgb()}function Fv(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=S9.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?yD(t):i===3?new md(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?aw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?aw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=I9.exec(e))?new md(t[1],t[2],t[3],1):(t=M9.exec(e))?new md(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=L9.exec(e))?aw(t[1],t[2],t[3],t[4]):(t=k9.exec(e))?aw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=P9.exec(e))?bD(t[1],t[2]/100,t[3]/100,1):(t=F9.exec(e))?bD(t[1],t[2]/100,t[3]/100,t[4]):mD.hasOwnProperty(e)?yD(mD[e]):e==="transparent"?new md(NaN,NaN,NaN,0):null}function yD(e){return new md(e>>16&255,e>>8&255,e&255,1)}function aw(e,t,i,r){return r<=0&&(e=t=i=NaN),new md(e,t,i,r)}function U9(e){return e instanceof Lv||(e=Fv(e)),e?(e=e.rgb(),new md(e.r,e.g,e.b,e.opacity)):new md}function iT(e,t,i,r){return arguments.length===1?U9(e):new md(e,t,i,r??1)}function md(e,t,i,r){this.r=+e,this.g=+t,this.b=+i,this.opacity=+r}nT(md,iT,pD(Lv,{brighter:function(e){return e=e==null?sw:Math.pow(sw,e),new md(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?kv:Math.pow(kv,e),new md(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vD,formatHex:vD,formatRgb:xD,toString:xD}));function vD(){return"#"+rT(this.r)+rT(this.g)+rT(this.b)}function xD(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function rT(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function bD(e,t,i,r){return r<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new uf(e,t,i,r)}function wD(e){if(e instanceof uf)return new uf(e.h,e.s,e.l,e.opacity);if(e instanceof Lv||(e=Fv(e)),!e)return new uf;if(e instanceof uf)return e;e=e.rgb();var t=e.r/255,i=e.g/255,r=e.b/255,d=Math.min(t,i,r),f=Math.max(t,i,r),v=NaN,h=f-d,s=(f+d)/2;return h?(t===f?v=(i-r)/h+(i<r)*6:i===f?v=(r-t)/h+2:v=(t-i)/h+4,h/=s<.5?f+d:2-f-d,v*=60):h=s>0&&s<1?0:v,new uf(v,h,s,e.opacity)}function z9(e,t,i,r){return arguments.length===1?wD(e):new uf(e,t,i,r??1)}function uf(e,t,i,r){this.h=+e,this.s=+t,this.l=+i,this.opacity=+r}nT(uf,z9,pD(Lv,{brighter:function(e){return e=e==null?sw:Math.pow(sw,e),new uf(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?kv:Math.pow(kv,e),new uf(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*t,d=2*i-r;return new md(oT(e>=240?e-240:e+120,d,r),oT(e,d,r),oT(e<120?e+240:e-120,d,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function oT(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const CD=e=>()=>e;function R9(e,t){return function(i){return e+i*t}}function O9(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(r){return Math.pow(e+r*t,i)}}function N9(e){return(e=+e)==1?BD:function(t,i){return i-t?O9(t,i,e):CD(isNaN(t)?i:t)}}function BD(e,t){var i=t-e;return i?R9(e,i):CD(isNaN(e)?t:e)}const TD=function e(t){var i=N9(t);function r(d,f){var v=i((d=iT(d)).r,(f=iT(f)).r),h=i(d.g,f.g),s=i(d.b,f.b),U=BD(d.opacity,f.opacity);return function($){return d.r=v($),d.g=h($),d.b=s($),d.opacity=U($),d+""}}return r.gamma=e,r}(1);function Dp(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}var sT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aT=new RegExp(sT.source,"g");function Q9(e){return function(){return e}}function $9(e){return function(t){return e(t)+""}}function j9(e,t){var i=sT.lastIndex=aT.lastIndex=0,r,d,f,v=-1,h=[],s=[];for(e=e+"",t=t+"";(r=sT.exec(e))&&(d=aT.exec(t));)(f=d.index)>i&&(f=t.slice(i,f),h[v]?h[v]+=f:h[++v]=f),(r=r[0])===(d=d[0])?h[v]?h[v]+=d:h[++v]=d:(h[++v]=null,s.push({i:v,x:Dp(r,d)})),i=aT.lastIndex;return i<t.length&&(f=t.slice(i),h[v]?h[v]+=f:h[++v]=f),h.length<2?s[0]?$9(s[0].x):Q9(t):(t=s.length,function(U){for(var $=0,V;$<t;++$)h[(V=s[$]).i]=V.x(U);return h.join("")})}var ED=180/Math.PI,lT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function SD(e,t,i,r,d,f){var v,h,s;return(v=Math.sqrt(e*e+t*t))&&(e/=v,t/=v),(s=e*i+t*r)&&(i-=e*s,r-=t*s),(h=Math.sqrt(i*i+r*r))&&(i/=h,r/=h,s/=h),e*r<t*i&&(e=-e,t=-t,s=-s,v=-v),{translateX:d,translateY:f,rotate:Math.atan2(t,e)*ED,skewX:Math.atan(s)*ED,scaleX:v,scaleY:h}}var lw;function H9(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?lT:SD(t.a,t.b,t.c,t.d,t.e,t.f)}function V9(e){return e==null||(lw||(lw=document.createElementNS("http://www.w3.org/2000/svg","g")),lw.setAttribute("transform",e),!(e=lw.transform.baseVal.consolidate()))?lT:(e=e.matrix,SD(e.a,e.b,e.c,e.d,e.e,e.f))}function ID(e,t,i,r){function d(U){return U.length?U.pop()+" ":""}function f(U,$,V,q,te,he){if(U!==V||$!==q){var Ae=te.push("translate(",null,t,null,i);he.push({i:Ae-4,x:Dp(U,V)},{i:Ae-2,x:Dp($,q)})}else(V||q)&&te.push("translate("+V+t+q+i)}function v(U,$,V,q){U!==$?(U-$>180?$+=360:$-U>180&&(U+=360),q.push({i:V.push(d(V)+"rotate(",null,r)-2,x:Dp(U,$)})):$&&V.push(d(V)+"rotate("+$+r)}function h(U,$,V,q){U!==$?q.push({i:V.push(d(V)+"skewX(",null,r)-2,x:Dp(U,$)}):$&&V.push(d(V)+"skewX("+$+r)}function s(U,$,V,q,te,he){if(U!==V||$!==q){var Ae=te.push(d(te)+"scale(",null,",",null,")");he.push({i:Ae-4,x:Dp(U,V)},{i:Ae-2,x:Dp($,q)})}else(V!==1||q!==1)&&te.push(d(te)+"scale("+V+","+q+")")}return function(U,$){var V=[],q=[];return U=e(U),$=e($),f(U.translateX,U.translateY,$.translateX,$.translateY,V,q),v(U.rotate,$.rotate,V,q),h(U.skewX,$.skewX,V,q),s(U.scaleX,U.scaleY,$.scaleX,$.scaleY,V,q),U=$=null,function(te){for(var he=-1,Ae=q.length,De;++he<Ae;)V[(De=q[he]).i]=De.x(te);return V.join("")}}}var G9=ID(H9,"px, ","px)","deg)"),W9=ID(V9,", ",")",")"),P_=0,Dv=0,Uv=0,MD=1e3,cw,zv,uw=0,Wm=0,hw=0,Rv=typeof performance=="object"&&performance.now?performance:Date,LD=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function cT(){return Wm||(LD(K9),Wm=Rv.now()+hw)}function K9(){Wm=0}function dw(){this._call=this._time=this._next=null}dw.prototype=kD.prototype={constructor:dw,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?cT():+i)+(t==null?0:+t),!this._next&&zv!==this&&(zv?zv._next=this:cw=this,zv=this),this._call=e,this._time=i,uT()},stop:function(){this._call&&(this._call=null,this._time=1/0,uT())}};function kD(e,t,i){var r=new dw;return r.restart(e,t,i),r}function Z9(){cT(),++P_;for(var e=cw,t;e;)(t=Wm-e._time)>=0&&e._call.call(null,t),e=e._next;--P_}function PD(){Wm=(uw=Rv.now())+hw,P_=Dv=0;try{Z9()}finally{P_=0,X9(),Wm=0}}function q9(){var e=Rv.now(),t=e-uw;t>MD&&(hw-=t,uw=e)}function X9(){for(var e,t=cw,i,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:cw=i);zv=e,uT(r)}function uT(e){if(!P_){Dv&&(Dv=clearTimeout(Dv));var t=e-Wm;t>24?(e<1/0&&(Dv=setTimeout(PD,e-Rv.now()-hw)),Uv&&(Uv=clearInterval(Uv))):(Uv||(uw=Rv.now(),Uv=setInterval(q9,MD)),P_=1,LD(PD))}}function FD(e,t,i){var r=new dw;return t=t==null?0:+t,r.restart(d=>{r.stop(),e(d+t)},t,i),r}var Y9=eD("start","end","cancel","interrupt"),J9=[],DD=0,UD=1,hT=2,Aw=3,zD=4,dT=5,fw=6;function pw(e,t,i,r,d,f){var v=e.__transition;if(!v)e.__transition={};else if(i in v)return;e7(e,i,{name:t,index:r,group:d,on:Y9,tween:J9,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:DD})}function AT(e,t){var i=BA(e,t);if(i.state>DD)throw new Error("too late; already scheduled");return i}function hf(e,t){var i=BA(e,t);if(i.state>Aw)throw new Error("too late; already running");return i}function BA(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function e7(e,t,i){var r=e.__transition,d;r[t]=i,i.timer=kD(f,0,i.time);function f(U){i.state=UD,i.timer.restart(v,i.delay,i.time),i.delay<=U&&v(U-i.delay)}function v(U){var $,V,q,te;if(i.state!==UD)return s();for($ in r)if(te=r[$],te.name===i.name){if(te.state===Aw)return FD(v);te.state===zD?(te.state=fw,te.timer.stop(),te.on.call("interrupt",e,e.__data__,te.index,te.group),delete r[$]):+$<t&&(te.state=fw,te.timer.stop(),te.on.call("cancel",e,e.__data__,te.index,te.group),delete r[$])}if(FD(function(){i.state===Aw&&(i.state=zD,i.timer.restart(h,i.delay,i.time),h(U))}),i.state=hT,i.on.call("start",e,e.__data__,i.index,i.group),i.state===hT){for(i.state=Aw,d=new Array(q=i.tween.length),$=0,V=-1;$<q;++$)(te=i.tween[$].value.call(e,e.__data__,i.index,i.group))&&(d[++V]=te);d.length=V+1}}function h(U){for(var $=U<i.duration?i.ease.call(null,U/i.duration):(i.timer.restart(s),i.state=dT,1),V=-1,q=d.length;++V<q;)d[V].call(e,$);i.state===dT&&(i.on.call("end",e,e.__data__,i.index,i.group),s())}function s(){i.state=fw,i.timer.stop(),delete r[t];for(var U in r)return;delete e.__transition}}function t7(e,t){var i=e.__transition,r,d,f=!0,v;if(i){t=t==null?null:t+"";for(v in i){if((r=i[v]).name!==t){f=!1;continue}d=r.state>hT&&r.state<dT,r.state=fw,r.timer.stop(),r.on.call(d?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete i[v]}f&&delete e.__transition}}function n7(e){return this.each(function(){t7(this,e)})}function i7(e,t){var i,r;return function(){var d=hf(this,e),f=d.tween;if(f!==i){r=i=f;for(var v=0,h=r.length;v<h;++v)if(r[v].name===t){r=r.slice(),r.splice(v,1);break}}d.tween=r}}function r7(e,t,i){var r,d;if(typeof i!="function")throw new Error;return function(){var f=hf(this,e),v=f.tween;if(v!==r){d=(r=v).slice();for(var h={name:t,value:i},s=0,U=d.length;s<U;++s)if(d[s].name===t){d[s]=h;break}s===U&&d.push(h)}f.tween=d}}function o7(e,t){var i=this._id;if(e+="",arguments.length<2){for(var r=BA(this.node(),i).tween,d=0,f=r.length,v;d<f;++d)if((v=r[d]).name===e)return v.value;return null}return this.each((t==null?i7:r7)(i,e,t))}function fT(e,t,i){var r=e._id;return e.each(function(){var d=hf(this,r);(d.value||(d.value={}))[t]=i.apply(this,arguments)}),function(d){return BA(d,r).value[t]}}function RD(e,t){var i;return(typeof t=="number"?Dp:t instanceof Fv?TD:(i=Fv(t))?(t=i,TD):j9)(e,t)}function s7(e){return function(){this.removeAttribute(e)}}function a7(e){return function(){this.removeAttributeNS(e.space,e.local)}}function l7(e,t,i){var r,d=i+"",f;return function(){var v=this.getAttribute(e);return v===d?null:v===r?f:f=t(r=v,i)}}function c7(e,t,i){var r,d=i+"",f;return function(){var v=this.getAttributeNS(e.space,e.local);return v===d?null:v===r?f:f=t(r=v,i)}}function u7(e,t,i){var r,d,f;return function(){var v,h=i(this),s;return h==null?void this.removeAttribute(e):(v=this.getAttribute(e),s=h+"",v===s?null:v===r&&s===d?f:(d=s,f=t(r=v,h)))}}function h7(e,t,i){var r,d,f;return function(){var v,h=i(this),s;return h==null?void this.removeAttributeNS(e.space,e.local):(v=this.getAttributeNS(e.space,e.local),s=h+"",v===s?null:v===r&&s===d?f:(d=s,f=t(r=v,h)))}}function d7(e,t){var i=rw(e),r=i==="transform"?W9:RD;return this.attrTween(e,typeof t=="function"?(i.local?h7:u7)(i,r,fT(this,"attr."+e,t)):t==null?(i.local?a7:s7)(i):(i.local?c7:l7)(i,r,t))}function A7(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function f7(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function p7(e,t){var i,r;function d(){var f=t.apply(this,arguments);return f!==r&&(i=(r=f)&&f7(e,f)),i}return d._value=t,d}function m7(e,t){var i,r;function d(){var f=t.apply(this,arguments);return f!==r&&(i=(r=f)&&A7(e,f)),i}return d._value=t,d}function g7(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var r=rw(e);return this.tween(i,(r.local?p7:m7)(r,t))}function _7(e,t){return function(){AT(this,e).delay=+t.apply(this,arguments)}}function y7(e,t){return t=+t,function(){AT(this,e).delay=t}}function v7(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_7:y7)(t,e)):BA(this.node(),t).delay}function x7(e,t){return function(){hf(this,e).duration=+t.apply(this,arguments)}}function b7(e,t){return t=+t,function(){hf(this,e).duration=t}}function w7(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?x7:b7)(t,e)):BA(this.node(),t).duration}function C7(e,t){if(typeof t!="function")throw new Error;return function(){hf(this,e).ease=t}}function B7(e){var t=this._id;return arguments.length?this.each(C7(t,e)):BA(this.node(),t).ease}function T7(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;hf(this,e).ease=i}}function E7(e){if(typeof e!="function")throw new Error;return this.each(T7(this._id,e))}function S7(e){typeof e!="function"&&(e=sD(e));for(var t=this._groups,i=t.length,r=new Array(i),d=0;d<i;++d)for(var f=t[d],v=f.length,h=r[d]=[],s,U=0;U<v;++U)(s=f[U])&&e.call(s,s.__data__,U,f)&&h.push(s);return new Wf(r,this._parents,this._name,this._id)}function I7(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,r=t.length,d=i.length,f=Math.min(r,d),v=new Array(r),h=0;h<f;++h)for(var s=t[h],U=i[h],$=s.length,V=v[h]=new Array($),q,te=0;te<$;++te)(q=s[te]||U[te])&&(V[te]=q);for(;h<r;++h)v[h]=t[h];return new Wf(v,this._parents,this._name,this._id)}function M7(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function L7(e,t,i){var r,d,f=M7(t)?AT:hf;return function(){var v=f(this,e),h=v.on;h!==r&&(d=(r=h).copy()).on(t,i),v.on=d}}function k7(e,t){var i=this._id;return arguments.length<2?BA(this.node(),i).on.on(e):this.each(L7(i,e,t))}function P7(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function F7(){return this.on("end.remove",P7(this._id))}function D7(e){var t=this._name,i=this._id;typeof e!="function"&&(e=eT(e));for(var r=this._groups,d=r.length,f=new Array(d),v=0;v<d;++v)for(var h=r[v],s=h.length,U=f[v]=new Array(s),$,V,q=0;q<s;++q)($=h[q])&&(V=e.call($,$.__data__,q,h))&&("__data__"in $&&(V.__data__=$.__data__),U[q]=V,pw(U[q],t,i,q,U,BA($,i)));return new Wf(f,this._parents,t,i)}function U7(e){var t=this._name,i=this._id;typeof e!="function"&&(e=oD(e));for(var r=this._groups,d=r.length,f=[],v=[],h=0;h<d;++h)for(var s=r[h],U=s.length,$,V=0;V<U;++V)if($=s[V]){for(var q=e.call($,$.__data__,V,s),te,he=BA($,i),Ae=0,De=q.length;Ae<De;++Ae)(te=q[Ae])&&pw(te,t,i,Ae,q,he);f.push(q),v.push($)}return new Wf(f,v,t,i)}var z7=Mv.prototype.constructor;function R7(){return new z7(this._groups,this._parents)}function O7(e,t){var i,r,d;return function(){var f=L_(this,e),v=(this.style.removeProperty(e),L_(this,e));return f===v?null:f===i&&v===r?d:d=t(i=f,r=v)}}function OD(e){return function(){this.style.removeProperty(e)}}function N7(e,t,i){var r,d=i+"",f;return function(){var v=L_(this,e);return v===d?null:v===r?f:f=t(r=v,i)}}function Q7(e,t,i){var r,d,f;return function(){var v=L_(this,e),h=i(this),s=h+"";return h==null&&(s=h=(this.style.removeProperty(e),L_(this,e))),v===s?null:v===r&&s===d?f:(d=s,f=t(r=v,h))}}function $7(e,t){var i,r,d,f="style."+t,v="end."+f,h;return function(){var s=hf(this,e),U=s.on,$=s.value[f]==null?h||(h=OD(t)):void 0;(U!==i||d!==$)&&(r=(i=U).copy()).on(v,d=$),s.on=r}}function j7(e,t,i){var r=(e+="")=="transform"?G9:RD;return t==null?this.styleTween(e,O7(e,r)).on("end.style."+e,OD(e)):typeof t=="function"?this.styleTween(e,Q7(e,r,fT(this,"style."+e,t))).each($7(this._id,e)):this.styleTween(e,N7(e,r,t),i).on("end.style."+e,null)}function H7(e,t,i){return function(r){this.style.setProperty(e,t.call(this,r),i)}}function V7(e,t,i){var r,d;function f(){var v=t.apply(this,arguments);return v!==d&&(r=(d=v)&&H7(e,v,i)),r}return f._value=t,f}function G7(e,t,i){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,V7(e,t,i??""))}function W7(e){return function(){this.textContent=e}}function K7(e){return function(){var t=e(this);this.textContent=t??""}}function Z7(e){return this.tween("text",typeof e=="function"?K7(fT(this,"text",e)):W7(e==null?"":e+""))}function q7(e){return function(t){this.textContent=e.call(this,t)}}function X7(e){var t,i;function r(){var d=e.apply(this,arguments);return d!==i&&(t=(i=d)&&q7(d)),t}return r._value=e,r}function Y7(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,X7(e))}function J7(){for(var e=this._name,t=this._id,i=ND(),r=this._groups,d=r.length,f=0;f<d;++f)for(var v=r[f],h=v.length,s,U=0;U<h;++U)if(s=v[U]){var $=BA(s,t);pw(s,e,i,U,v,{time:$.time+$.delay+$.duration,delay:0,duration:$.duration,ease:$.ease})}return new Wf(r,this._parents,e,i)}function eX(){var e,t,i=this,r=i._id,d=i.size();return new Promise(function(f,v){var h={value:v},s={value:function(){--d===0&&f()}};i.each(function(){var U=hf(this,r),$=U.on;$!==e&&(t=(e=$).copy(),t._.cancel.push(h),t._.interrupt.push(h),t._.end.push(s)),U.on=t}),d===0&&f()})}var tX=0;function Wf(e,t,i,r){this._groups=e,this._parents=t,this._name=i,this._id=r}function ND(){return++tX}var Km=Mv.prototype;Wf.prototype={constructor:Wf,select:D7,selectAll:U7,filter:S7,merge:I7,selection:R7,transition:J7,call:Km.call,nodes:Km.nodes,node:Km.node,size:Km.size,empty:Km.empty,each:Km.each,on:k7,attr:d7,attrTween:g7,style:j7,styleTween:G7,text:Z7,textTween:Y7,remove:F7,tween:o7,delay:v7,duration:w7,ease:B7,easeVarying:E7,end:eX,[Symbol.iterator]:Km[Symbol.iterator]};function nX(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var iX={time:null,delay:0,duration:250,ease:nX};function rX(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function oX(e){var t,i;e instanceof Wf?(t=e._id,e=e._name):(t=ND(),(i=iX).time=cT(),e=e==null?null:e+"");for(var r=this._groups,d=r.length,f=0;f<d;++f)for(var v=r[f],h=v.length,s,U=0;U<h;++U)(s=v[U])&&pw(s,e,t,U,v,i||rX(s,t));return new Wf(r,this._parents,e,t)}Mv.prototype.interrupt=n7,Mv.prototype.transition=oX;function Ov(e,t,i){this.k=e,this.x=t,this.y=i}Ov.prototype={constructor:Ov,scale:function(e){return e===1?this:new Ov(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ov(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Ov.prototype,Object.keys(N5).filter(e=>e!=="common"&&e!=="grey"&&e!=="blueGrey"),aL[500],lL[500],Rf[500],Rf[500],vp[500],Fm[500];const sX=(e,t,i="planEntityVersion.code")=>{const r=`${Kr.get(e,i)}`.replace(/_|-/g,".").replace(/[A-Z]*/g,"").split("."),d=`${Kr.get(t,i)}`.replace(/_|-/g,".").replace(/[A-Z]*/g,"").split(".");for(let f=0;f<r.length;f++)if(d[f]){if(r[f]!==d[f])return+r[f]-+d[f]}else return 1;return-1},QD=(e,t)=>Intl.NumberFormat(e,{maximumFractionDigits:1}).format(t),aX=[36],$D=e=>aX.includes(e),lX=e=>{const[t,i]=ur($D(e));return $i(()=>{i($D(e))},[e]),t},jD=e=>{const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},HD=(e,t)=>{const i=document.querySelectorAll(`table[id^=${e}]`);i.forEach(r=>{const d=i.length>1?r.id.replace(e,"").replace(/'\*|\/|:|\?|\[|\]/,""):r.id,f=jD(d).substr(0,30);t.push(`<table name="${f}">  
      <tr><td>
        <strong>${jD(d)}</strong>
      </td></tr>
      <tr><td></td></tr>
      ${r==null?void 0:r.innerHTML.replace(/&nbsp;/g,"").replace(/<hr(.*?)>/g,"").replace(/<br>/g,", ").replace(/colspan="2"/g,'colspan="1"').replace(/<table(.|[\s\S]*)<\/table><\/td>/gm,"</td><td>See in a separate sheet</td>")}</table>`)})};function cX({fileName:e,tableIds:t}){const[i,r]=ur(!1),d=v=>v.split(" ").join("_"),f=xs(async()=>{var v,h;try{r(!0);const s=[];if(Array.isArray(t)){s.push("<tables>");for(const Ae of t)HD(Ae,s);s.push("</tables>")}else HD(t,s);const U={test:!(il.NODE_ENV==="production"||il.NODE_ENV==="staging"),document_content:s.join(""),type:"xlsx",user_credentials:"nrLagE31tGeS198le0pQ",prince_options:{baseurl:"https://dco-uninfo-data-portal-staging.dev.devqube.io"}},V=await(await fetch("https://docraptor.com/docs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)})).blob(),q=new Blob([V]),te=window.URL.createObjectURL(q),he=document.createElement("a");he.href=te,he.setAttribute("download",`${d(e??"downloaded-report")}.xlsx`),document.body.appendChild(he),he.click(),(v=he.parentNode)==null||v.removeChild(he),window.URL.revokeObjectURL(V),r(!1),(h=window==null?void 0:window.gtag)==null||h.call(window,"event",`downloaded_${(e==null?void 0:e.split("-")[0].toLowerCase())??"report"}_xlsx`)}catch(s){console.error(s)}},[t,e]);return ze(Qf,{color:"primary","aria-label":"Export",onClick:()=>f(),children:[ze(p_,{children:[!i&&ze(m_,{}),i&&ze(tv,{size:20})]}),"As Excel"]})}const uX=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),VD=e=>Array.isArray(e)&&e.every(t=>typeof t=="object"&&!(t instanceof Array)),hX=e=>Array.isArray(e)&&e.every(t=>Array.isArray(t)),dX=e=>Array.from(e.map(t=>Object.keys(t)).reduce((t,i)=>new Set([...t,...i]),[])),AX=(e,t)=>{t=t||dX(e);let i=t,r=t;VD(t)&&(i=t.map(f=>f.label),r=t.map(f=>f.key));const d=e.map(f=>r.map(v=>fX(v,f)));return[i,...d]},fX=(e,t)=>{const i=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(r,d,f,v){const h=r[d];if(h==null)v.splice(1);else return h},t);return i===void 0?e in t?t[e]:"":i},pX=e=>typeof e>"u"||e===null?"":e,GD=(e,t=",",i='"')=>e.filter(r=>r).map(r=>r.map(d=>pX(d)).map(d=>`${i}${d}${i}`).join(t)).join(`
`),mX=(e,t,i,r)=>GD(t?[t,...e]:e,i,r),gX=(e,t,i,r)=>GD(AX(e,t),i,r),_X=(e,t,i,r)=>t?`${t.join(i)}
${e}`:e.replace(/"/g,'""'),WD=(e,t,i,r)=>{if(VD(e))return gX(e,t,i,r);if(hX(e))return mX(e,t,i,r);if(typeof e=="string")return _X(e,t,i);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},KD=(e,t,i,r,d)=>{const f=WD(e,i,r,d),v=uX()?"application/csv":"text/csv",h=new Blob([t?"\uFEFF":"",f],{type:v}),s=`data:${v};charset=utf-8,${t?"\uFEFF":""}${f}`,U=window.URL||window.webkitURL;return typeof U.createObjectURL>"u"?s:U.createObjectURL(h)},ZD={data:Ud.oneOfType([Ud.string,Ud.array,Ud.func]).isRequired,headers:Ud.array,target:Ud.string,separator:Ud.string,filename:Ud.string,uFEFF:Ud.bool,onClick:Ud.func,asyncOnClick:Ud.bool,enclosingCharacter:Ud.string},qD={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},yX={target:"_blank"};class XD extends ka.Component{constructor(t){super(t),this.state={}}buildURI(){return KD(...arguments)}componentDidMount(){const{data:t,headers:i,separator:r,enclosingCharacter:d,uFEFF:f,target:v,specs:h,replace:s}=this.props;this.state.page=window.open(this.buildURI(t,f,i,r,d),v,h,s)}getWindow(){return this.state.page}render(){return null}}I0(XD,"defaultProps",Object.assign(qD,yX)),I0(XD,"propTypes",ZD);const vX=(ww=class extends ka.Component{constructor(t){super(t),this.buildURI=this.buildURI.bind(this)}buildURI(){return KD(...arguments)}handleLegacy(t,i=!1){if(window.navigator.msSaveOrOpenBlob){t.preventDefault();const{data:r,headers:d,separator:f,filename:v,enclosingCharacter:h,uFEFF:s}=this.props,U=i&&typeof r=="function"?r():r;let $=new Blob([s?"\uFEFF":"",WD(U,d,f,h)]);return window.navigator.msSaveBlob($,v),!1}}handleAsyncClick(t){const i=r=>{if(r===!1){t.preventDefault();return}this.handleLegacy(t,!0)};this.props.onClick(t,i)}handleSyncClick(t){if(this.props.onClick(t)===!1){t.preventDefault();return}this.handleLegacy(t)}handleClick(){return t=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(t):this.handleSyncClick(t);this.handleLegacy(t)}}render(){const{data:t,headers:i,separator:r,filename:d,uFEFF:f,children:v,onClick:h,asyncOnClick:s,enclosingCharacter:U,...$}=this.props,q=typeof window>"u"?"":this.buildURI(t,f,i,r,U);return ka.createElement("a",{download:d,...$,ref:te=>this.link=te,target:"_self",href:q,onClick:this.handleClick()},v)}},I0(ww,"defaultProps",qD),I0(ww,"propTypes",ZD),ww),xX=({fileName:e,properties:t,title:i,gEvent:r})=>{const d=()=>new Date().toISOString().slice(0,10),f=t.columns;return ze(Qf,{color:"primary","aria-label":"Export-csv",children:[ze(p_,{children:ze(m_,{})}),ze(vs,{children:ze(vX,{headers:f,data:t.data,filename:`Export_${e}_${d()}.csv`,onClick:()=>{var v;r&&((v=window==null?void 0:window.gtag)==null||v.call(window,"event",r))},style:{textDecoration:"none",color:"var(--color-black)",fontWeight:400},children:i??"As CSV"})})]})};function bX({filters:e,fileName:t,gEvent:i}){const[r,d]=ur(!1),f=h=>h.split(" ").join("_"),v=xs(async()=>{var h,s;try{d(!0);let U;e.endpoint?U=await s4(e):U=await o4(e);const $=t??f("downloaded-report"),V=new Blob([U]),q=window.URL.createObjectURL(V),te=document.createElement("a");te.href=q,te.setAttribute("download",`${$}.xlsx`),document.body.appendChild(te),te.click(),(h=te.parentNode)==null||h.removeChild(te),window.URL.revokeObjectURL(U),d(!1),i&&((s=window==null?void 0:window.gtag)==null||s.call(window,"event",i))}catch(U){console.error(U)}},[e]);return ze(Qf,{color:"primary","aria-label":"Export",onClick:()=>v(),children:[ze(p_,{children:[!r&&ze(m_,{}),r&&ze(tv,{thickness:4,size:20})]}),"As Excel"]})}let TA=fC({typography:{h1:{fontSize:"2.7rem",fontWeight:"bold"},h2:{fontSize:"1.7rem",fontWeight:"bold"},h3:{fontSize:"1.5rem",fontWeight:"bold"},h4:{fontSize:"1.35rem"},body2:{fontFamily:["Roboto","Noto","Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},fontFamily:["Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),subtitle1:{fontWeight:"bold"},caption:{fontFamily:'"Oswald", sans-serif'}},palette:{tonalOffset:.2,primary:{main:"#009EDB"},secondary:{light:"#fff",main:"#f2f2f2"},warning:{main:"#173d57"},text:{disabled:"rgba(0, 0, 0, .2)"},orange:{main:"#F58220",light:"#f8a762",dark:"#c46819"},sdgs:{1:{main:"#EE3124"},2:{main:"#DBA63C"},3:{main:"#0DB14B"},4:{main:"#D22333"},5:{main:"#F04E37"},6:{main:"#44C8F5"},7:{main:"#FFC20E"},8:{main:"#A71D44"},9:{main:"#F58220"},10:{main:"#EE4095"},11:{main:"#FAA634"},12:{main:"#BB892C"},13:{main:"#387B46"},14:{main:"#00AEEF"},15:{main:"#8DC63F"},16:{main:"#006CB7"},17:{main:"#184B6E"}}}});TA=fC(TA,{components:{MuiLink:{defaultProps:{underline:"none"}},MuiTab:{styleOverrides:{root:{fontWeight:"bold",textTransform:"none",fontSize:TA.typography.subtitle1.fontSize}}},MuiTabs:{styleOverrides:{root:{borderBottom:`1px solid ${TA.palette.grey[300]}`},flexContainer:{justifyContent:"space-between"},indicator:{display:"flex",justifyContent:"center",height:5,backgroundColor:"transparent","&::before":{display:"inline-block",content:'""',maxWidth:50,borderTopRightRadius:"1rem",borderTopLeftRadius:"1rem",width:"100%",backgroundColor:TA.palette.primary.main}}}},MuiInputBase:{styleOverrides:{root:{minHeight:"100%"},input:{marginLeft:TA.spacing(1)}}},MuiOutlinedInput:{styleOverrides:{root:{borderRadius:"2rem"},input:{padding:"0 32px 0 0 !important",minHeight:"30px"}}},MuiAccordionSummary:{styleOverrides:{root:{backgroundColor:TA.palette.grey[200],color:TA.palette.primary.main,"& p":{fontWeight:"bold"},"& svg":{fill:TA.palette.secondary.light},"&.Mui-focused":{backgroundColor:TA.palette.primary.main}}}},MuiAccordionDetails:{styleOverrides:{root:{display:"block"}}}}});const Fa=TA,wX=bA(ze("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),CX=bA(ze("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),BX=bA(ze("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpen"),mw=Fi("code")(({theme:e})=>({whiteSpace:"pre-wrap",margin:e.spacing(2,0),direction:"ltr"})),TX=Fi(jx)(({theme:e})=>({color:e.palette.grey[500],backgroundColor:"transparent",transition:".5s","& svg":{},"&:hover":{color:e.palette.secondary.main,backgroundColor:e.palette.grey[500]}})),EX=({endpoint:e,widgetName:t,variables:i,exportProperties:r,additionalMenuItems:d})=>{const[f,v]=ur(null),h=he=>{v(he.currentTarget)},s=()=>{v(null)},[U,$]=ur(!1),V=()=>{s(),$(!0)},q=()=>{s(),$(!1)},te=t&&`<div id="uninfo-${r.chartId}">
  ${i?`<script type="application/json">${JSON.stringify(i)}<\/script>`:""}
  <script 
    async 
    data-mount-in="#uninfo-${r.chartId}" 
    src="${window.location.origin}/widget-${Kr.camelCase(t)}.js" ><\/script>
</div>`;return r.embed||r.image||r.pdf||r.excel||r.csv||d?ze(vs,{children:[ze(TX,{color:"secondary",onClick:h,edge:"end","aria-label":`share-${t??""}`,size:"large",style:{backgroundColor:Fa.palette.primary.main,color:"white"},children:ze(BX,{})}),ze(Sk,{id:`share-${t??""}`,anchorEl:f,keepMounted:!0,open:!!f,onClose:s,children:[(r==null?void 0:r.embed)&&r.chartId&&ze(Qf,{onClick:V,children:[ze(p_,{children:ze(Qk,{})}),"Embed Code"]}),(r==null?void 0:r.chartId)&&(r==null?void 0:r.image)&&t&&ze(xZ,{chartId:r.chartId,...r,fileName:r.fileName??t,title:r.imageTitle??t}),(r==null?void 0:r.pdf)&&(r==null?void 0:r.chartId)&&t&&ze(IZ,{fileName:r.fileName??t,chartId:r.chartId,workspace:r.workspace}),(r==null?void 0:r.excel)&&(r==null?void 0:r.tableIds)&&t&&ze(cX,{fileName:r.fileName??t,tableIds:r.tableIds}),(r==null?void 0:r.csv)&&(r==null?void 0:r.csvProperties)&&t&&ze(xX,{fileName:r.fileName??t,properties:r.csvProperties,gEvent:r.gEvent}),(r==null?void 0:r.excelFromAPI)&&ze(bX,{filters:r.excelFromAPI,fileName:r.fileName,gEvent:r.gEvent}),d]}),ze(SZ,{open:U,handleClose:q,children:ze("div",{children:[ze(ml,{variant:"h2",children:"Share widget"}),ze(ml,{variant:"h3",children:"API Endpoint"}),ze("code",{dir:"ltr",children:e}),ze("br",{}),ze("p",{children:["New to our API?"," ",ze("a",{href:`${il.API_URL}docs/`,children:"Read the Docs"})]}),t&&ze(vs,{children:[ze(ml,{component:"p",variant:"body1",children:[ze("p",{children:["First, add the following to your"," ",ze("code",{dir:"ltr",children:"<head>"})," html tag (or anywhere else in your page, just make sure it's before the widgets):",ze("br",{}),ze(mw,{children:`<script src=${window.location.origin}/config.js>`})]}),ze("p",{children:"Include the below snippet in your html to load this widget:"}),ze(mw,{children:te})]}),ze(ml,{component:"p",variant:"body1",children:["You can optionally specify the language for the component by passing the ",ze("strong",{children:"lang"})," option to it.",ze(mw,{children:`<script type="application/json">{ workspaceId: ${i!=null&&i.workspaceId&&typeof i.workspaceId=="number"?i.workspaceId:"<X>"}, lang: "fr" }<\/script>`})]}),ze(ml,{variant:"h4",children:"Notes"}),ze(ml,{variant:"subtitle1",children:"Passing props without JSON"}),ze(ml,{variant:"body1",component:"p",children:["You can also pass parameters on the container html element itself, example:",ze("br",{}),ze(mw,{children:`<div class="container" data-props-workspace-id="${i!=null&&i.workspaceId&&typeof i.workspaceId=="number"?i.workspaceId:"<X>"}">{...}</div>`}),ze("br",{}),"This might be useful for a CMS like Drupal where JSON gets borked."]}),ze(ml,{variant:"subtitle1",children:"Mounting somewhere else"}),ze(ml,{variant:"body1",component:"p",children:["Note that you can also set where the widget should mount by specifying ",ze("code",{dir:"ltr",children:"data-mount-in"})," in the script tag. This way you could load the scripts in the header tag and still have it appear in the right place.",ze("br",{})]})]})]})})]}):null},SX=Fi(xA)(({theme:e})=>({display:"flex",justifyContent:"space-between",alignContent:"flex-start",alignItems:"space-between","& .underline":{display:"flex",flexDirection:"column","&::after":{display:"inline-block",content:'""',width:"6rem",height:"1rem",marginTop:e.spacing(1),backgroundColor:e.palette.primary.main}},"& .sub-title":{margin:e.spacing(2,0,0)}})),IX=({url:e,title:t,widgetKey:i,titleVariant:r="h2",exportProperties:d,underline:f,variables:v,subTitle:h,disclaimer:s})=>ze(SX,{item:!0,xs:12,children:[ze(xA,{item:!0,xs:10,children:[t&&ze(ml,{variant:r,className:f?"underline":"",children:t}),h&&ze(ml,{variant:"body1",className:"sub-title",children:h}),s&&ze("small",{children:s})]}),d&&ze(xA,{item:!0,xs:2,style:{display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},children:ze(EX,{endpoint:e,widgetName:i??(typeof t=="string"?t:""),variables:v,exportProperties:{imageTitle:i??(typeof t=="string"?t:""),...d}})})]}),MX=Fi(xA)(()=>({borderBottomLeftRadius:"1rem",borderTopLeftRadius:"1rem",position:"relative",alignSelf:"stretch"})),LX=({children:e,className:t,xs:i=8,md:r,style:d,shaded:f,id:v,gridRef:h})=>ze(MX,{id:v,item:!0,style:{...d,...f?{backgroundColor:Fa.palette.grey[100],display:"flex",padding:Fa.spacing(2)}:{}},xs:i,md:r,className:`${t??""}`,ref:h,children:e}),kX=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function YD(e={}){const{disableGlobal:t=!1,productionPrefix:i="jss",seed:r=""}=e,d=r===""?"":`${r}-`;let f=0;const v=()=>(f+=1,f);return(h,s)=>{const U=s.options.name;if(U&&U.indexOf("Mui")===0&&!s.options.link&&!t){if(kX.indexOf(h.key)!==-1)return`Mui-${h.key}`;const $=`${d}${U}-${h.key}`;return!s.options.theme[qM]||r!==""?$:`${$}-${v()}`}return`${d}${i}${v()}`}}function PX(e){const{theme:t,name:i,props:r}=e;if(!t||!t.components||!t.components[i]||!t.components[i].defaultProps)return r;const d=ct({},r),f=t.components[i].defaultProps;let v;for(v in f)d[v]===void 0&&(d[v]=f[v]);return d}var JD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nv=(typeof window>"u"?"undefined":JD(window))==="object"&&(typeof document>"u"?"undefined":JD(document))==="object"&&document.nodeType===9,FX={}.constructor;function pT(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))return e.map(pT);if(e.constructor!==FX)return e;var t={};for(var i in e)t[i]=pT(e[i]);return t}function mT(e,t,i){e===void 0&&(e="unnamed");var r=i.jss,d=pT(t),f=r.plugins.onCreateRule(e,d,i);return f||(e[0],null)}var eU=function(t,i){for(var r="",d=0;d<t.length&&t[d]!=="!important";d++)r&&(r+=i),r+=t[d];return r},Zm=function(t){if(!Array.isArray(t))return t;var i="";if(Array.isArray(t[0]))for(var r=0;r<t.length&&t[r]!=="!important";r++)i&&(i+=", "),i+=eU(t[r]," ");else i=eU(t,", ");return t[t.length-1]==="!important"&&(i+=" !important"),i};function F_(e){return e&&e.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Qv(e,t){for(var i="",r=0;r<t;r++)i+="  ";return i+e}function $v(e,t,i){i===void 0&&(i={});var r="";if(!t)return r;var d=i,f=d.indent,v=f===void 0?0:f,h=t.fallbacks;i.format===!1&&(v=-1/0);var s=F_(i),U=s.linebreak,$=s.space;if(e&&v++,h)if(Array.isArray(h))for(var V=0;V<h.length;V++){var q=h[V];for(var te in q){var he=q[te];he!=null&&(r&&(r+=U),r+=Qv(te+":"+$+Zm(he)+";",v))}}else for(var Ae in h){var De=h[Ae];De!=null&&(r&&(r+=U),r+=Qv(Ae+":"+$+Zm(De)+";",v))}for(var ke in t){var xe=t[ke];xe!=null&&ke!=="fallbacks"&&(r&&(r+=U),r+=Qv(ke+":"+$+Zm(xe)+";",v))}return!r&&!i.allowEmpty||!e?r:(v--,r&&(r=""+U+r+U),Qv(""+e+$+"{"+r,v)+Qv("}",v))}var DX=/([[\].#*$><+~=|^:(),"'`\s])/g,tU=typeof CSS<"u"&&CSS.escape,gT=function(e){return tU?tU(e):e.replace(DX,"\\$1")},nU=function(){function e(i,r,d){this.type="style",this.isProcessed=!1;var f=d.sheet,v=d.Renderer;this.key=i,this.options=d,this.style=r,f?this.renderer=f.renderer:v&&(this.renderer=new v)}var t=e.prototype;return t.prop=function(r,d,f){if(d===void 0)return this.style[r];var v=f?f.force:!1;if(!v&&this.style[r]===d)return this;var h=d;(!f||f.process!==!1)&&(h=this.options.jss.plugins.onChangeValue(d,r,this));var s=h==null||h===!1,U=r in this.style;if(s&&!U&&!v)return this;var $=s&&U;if($?delete this.style[r]:this.style[r]=h,this.renderable&&this.renderer)return $?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,h),this;var V=this.options.sheet;return V&&V.attached,this},e}(),_T=function(e){Rx(t,e);function t(r,d,f){var v;v=e.call(this,r,d,f)||this;var h=f.selector,s=f.scoped,U=f.sheet,$=f.generateId;return h?v.selectorText=h:s!==!1&&(v.id=$(tf(tf(v)),U),v.selectorText="."+gT(v.id)),v}var i=t.prototype;return i.applyTo=function(d){var f=this.renderer;if(f){var v=this.toJSON();for(var h in v)f.setProperty(d,h,v[h])}return this},i.toJSON=function(){var d={};for(var f in this.style){var v=this.style[f];typeof v!="object"?d[f]=v:Array.isArray(v)&&(d[f]=Zm(v))}return d},i.toString=function(d){var f=this.options.sheet,v=f?f.options.link:!1,h=v?ct({},d,{allowEmpty:!0}):d;return $v(this.selectorText,this.style,h)},Fd(t,[{key:"selector",set:function(d){if(d!==this.selectorText){this.selectorText=d;var f=this.renderer,v=this.renderable;if(!(!v||!f)){var h=f.setSelector(v,d);h||f.replaceRule(v,this)}}},get:function(){return this.selectorText}}]),t}(nU),UX={onCreateRule:function(t,i,r){return t[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new _T(t,i,r)}},yT={indent:1,children:!0},zX=/@([\w-]+)/,RX=function(){function e(i,r,d){this.type="conditional",this.isProcessed=!1,this.key=i;var f=i.match(zX);this.at=f?f[1]:"unknown",this.query=d.name||"@"+this.at,this.options=d,this.rules=new gw(ct({},d,{parent:this}));for(var v in r)this.rules.add(v,r[v]);this.rules.process()}var t=e.prototype;return t.getRule=function(r){return this.rules.get(r)},t.indexOf=function(r){return this.rules.indexOf(r)},t.addRule=function(r,d,f){var v=this.rules.add(r,d,f);return v?(this.options.jss.plugins.onProcessRule(v),v):null},t.replaceRule=function(r,d,f){var v=this.rules.replace(r,d,f);return v&&this.options.jss.plugins.onProcessRule(v),v},t.toString=function(r){r===void 0&&(r=yT);var d=F_(r),f=d.linebreak;if(r.indent==null&&(r.indent=yT.indent),r.children==null&&(r.children=yT.children),r.children===!1)return this.query+" {}";var v=this.rules.toString(r);return v?this.query+" {"+f+v+f+"}":""},e}(),OX=/@container|@media|@supports\s+/,NX={onCreateRule:function(t,i,r){return OX.test(t)?new RX(t,i,r):null}},vT={indent:1,children:!0},QX=/@keyframes\s+([\w-]+)/,xT=function(){function e(i,r,d){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var f=i.match(QX);f&&f[1]?this.name=f[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=d;var v=d.scoped,h=d.sheet,s=d.generateId;this.id=v===!1?this.name:gT(s(this,h)),this.rules=new gw(ct({},d,{parent:this}));for(var U in r)this.rules.add(U,r[U],ct({},d,{parent:this}));this.rules.process()}var t=e.prototype;return t.toString=function(r){r===void 0&&(r=vT);var d=F_(r),f=d.linebreak;if(r.indent==null&&(r.indent=vT.indent),r.children==null&&(r.children=vT.children),r.children===!1)return this.at+" "+this.id+" {}";var v=this.rules.toString(r);return v&&(v=""+f+v+f),this.at+" "+this.id+" {"+v+"}"},e}(),$X=/@keyframes\s+/,jX=/\$([\w-]+)/g,bT=function(t,i){return typeof t=="string"?t.replace(jX,function(r,d){return d in i?i[d]:r}):t},iU=function(t,i,r){var d=t[i],f=bT(d,r);f!==d&&(t[i]=f)},HX={onCreateRule:function(t,i,r){return typeof t=="string"&&$X.test(t)?new xT(t,i,r):null},onProcessStyle:function(t,i,r){return i.type!=="style"||!r||("animation-name"in t&&iU(t,"animation-name",r.keyframes),"animation"in t&&iU(t,"animation",r.keyframes)),t},onChangeValue:function(t,i,r){var d=r.options.sheet;if(!d)return t;switch(i){case"animation":return bT(t,d.keyframes);case"animation-name":return bT(t,d.keyframes);default:return t}}},VX=function(e){Rx(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.toString=function(d){var f=this.options.sheet,v=f?f.options.link:!1,h=v?ct({},d,{allowEmpty:!0}):d;return $v(this.key,this.style,h)},t}(nU),GX={onCreateRule:function(t,i,r){return r.parent&&r.parent.type==="keyframes"?new VX(t,i,r):null}},WX=function(){function e(i,r,d){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=i,this.style=r,this.options=d}var t=e.prototype;return t.toString=function(r){var d=F_(r),f=d.linebreak;if(Array.isArray(this.style)){for(var v="",h=0;h<this.style.length;h++)v+=$v(this.at,this.style[h]),this.style[h+1]&&(v+=f);return v}return $v(this.at,this.style,r)},e}(),KX=/@font-face/,ZX={onCreateRule:function(t,i,r){return KX.test(t)?new WX(t,i,r):null}},qX=function(){function e(i,r,d){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=i,this.style=r,this.options=d}var t=e.prototype;return t.toString=function(r){return $v(this.key,this.style,r)},e}(),XX={onCreateRule:function(t,i,r){return t==="@viewport"||t==="@-ms-viewport"?new qX(t,i,r):null}},YX=function(){function e(i,r,d){this.type="simple",this.isProcessed=!1,this.key=i,this.value=r,this.options=d}var t=e.prototype;return t.toString=function(r){if(Array.isArray(this.value)){for(var d="",f=0;f<this.value.length;f++)d+=this.key+" "+this.value[f]+";",this.value[f+1]&&(d+=`
`);return d}return this.key+" "+this.value+";"},e}(),JX={"@charset":!0,"@import":!0,"@namespace":!0},eY={onCreateRule:function(t,i,r){return t in JX?new YX(t,i,r):null}},rU=[UX,NX,HX,GX,ZX,XX,eY],tY={process:!0},oU={force:!0,process:!0},gw=function(){function e(i){this.map={},this.raw={},this.index=[],this.counter=0,this.options=i,this.classes=i.classes,this.keyframes=i.keyframes}var t=e.prototype;return t.add=function(r,d,f){var v=this.options,h=v.parent,s=v.sheet,U=v.jss,$=v.Renderer,V=v.generateId,q=v.scoped,te=ct({classes:this.classes,parent:h,sheet:s,jss:U,Renderer:$,generateId:V,scoped:q,name:r,keyframes:this.keyframes,selector:void 0},f),he=r;r in this.raw&&(he=r+"-d"+this.counter++),this.raw[he]=d,he in this.classes&&(te.selector="."+gT(this.classes[he]));var Ae=mT(he,d,te);if(!Ae)return null;this.register(Ae);var De=te.index===void 0?this.index.length:te.index;return this.index.splice(De,0,Ae),Ae},t.replace=function(r,d,f){var v=this.get(r),h=this.index.indexOf(v);v&&this.remove(v);var s=f;return h!==-1&&(s=ct({},f,{index:h})),this.add(r,d,s)},t.get=function(r){return this.map[r]},t.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},t.indexOf=function(r){return this.index.indexOf(r)},t.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},t.register=function(r){this.map[r.key]=r,r instanceof _T?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof xT&&this.keyframes&&(this.keyframes[r.name]=r.id)},t.unregister=function(r){delete this.map[r.key],r instanceof _T?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof xT&&delete this.keyframes[r.name]},t.update=function(){var r,d,f;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],d=arguments.length<=1?void 0:arguments[1],f=arguments.length<=2?void 0:arguments[2]):(d=arguments.length<=0?void 0:arguments[0],f=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),d,f);else for(var v=0;v<this.index.length;v++)this.updateOne(this.index[v],d,f)},t.updateOne=function(r,d,f){f===void 0&&(f=tY);var v=this.options,h=v.jss.plugins,s=v.sheet;if(r.rules instanceof e){r.rules.update(d,f);return}var U=r.style;if(h.onUpdate(d,r,s,f),f.process&&U&&U!==r.style){h.onProcessStyle(r.style,r,s);for(var $ in r.style){var V=r.style[$],q=U[$];V!==q&&r.prop($,V,oU)}for(var te in U){var he=r.style[te],Ae=U[te];he==null&&he!==Ae&&r.prop(te,null,oU)}}},t.toString=function(r){for(var d="",f=this.options.sheet,v=f?f.options.link:!1,h=F_(r),s=h.linebreak,U=0;U<this.index.length;U++){var $=this.index[U],V=$.toString(r);!V&&!v||(d&&(d+=s),d+=V)}return d},e}(),sU=function(){function e(i,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=ct({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new gw(this.options);for(var d in i)this.rules.add(d,i[d]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(r,d,f){var v=this.queue;this.attached&&!v&&(this.queue=[]);var h=this.rules.add(r,d,f);return h?(this.options.jss.plugins.onProcessRule(h),this.attached?(this.deployed&&(v?v.push(h):(this.insertRule(h),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),h):(this.deployed=!1,h)):null},t.replaceRule=function(r,d,f){var v=this.rules.get(r);if(!v)return this.addRule(r,d,f);var h=this.rules.replace(r,d,f);return h&&this.options.jss.plugins.onProcessRule(h),this.attached?(this.deployed&&this.renderer&&(h?v.renderable&&this.renderer.replaceRule(v.renderable,h):this.renderer.deleteRule(v)),h):(this.deployed=!1,h)},t.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},t.addRules=function(r,d){var f=[];for(var v in r){var h=this.addRule(v,r[v],d);h&&f.push(h)}return f},t.getRule=function(r){return this.rules.get(r)},t.deleteRule=function(r){var d=typeof r=="object"?r:this.rules.get(r);return!d||this.attached&&!d.renderable?!1:(this.rules.remove(d),this.attached&&d.renderable&&this.renderer?this.renderer.deleteRule(d.renderable):!0)},t.indexOf=function(r){return this.rules.indexOf(r)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},t.updateOne=function(r,d,f){return this.rules.updateOne(r,d,f),this},t.toString=function(r){return this.rules.toString(r)},e}(),nY=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(r,d,f){for(var v=0;v<this.registry.onCreateRule.length;v++){var h=this.registry.onCreateRule[v](r,d,f);if(h)return h}return null},t.onProcessRule=function(r){if(!r.isProcessed){for(var d=r.options.sheet,f=0;f<this.registry.onProcessRule.length;f++)this.registry.onProcessRule[f](r,d);r.style&&this.onProcessStyle(r.style,r,d),r.isProcessed=!0}},t.onProcessStyle=function(r,d,f){for(var v=0;v<this.registry.onProcessStyle.length;v++)d.style=this.registry.onProcessStyle[v](d.style,d,f)},t.onProcessSheet=function(r){for(var d=0;d<this.registry.onProcessSheet.length;d++)this.registry.onProcessSheet[d](r)},t.onUpdate=function(r,d,f,v){for(var h=0;h<this.registry.onUpdate.length;h++)this.registry.onUpdate[h](r,d,f,v)},t.onChangeValue=function(r,d,f){for(var v=r,h=0;h<this.registry.onChangeValue.length;h++)v=this.registry.onChangeValue[h](v,d,f);return v},t.use=function(r,d){d===void 0&&(d={queue:"external"});var f=this.plugins[d.queue];f.indexOf(r)===-1&&(f.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(v,h){for(var s in h)s in v&&v[s].push(h[s]);return v},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),iY=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(r){var d=this.registry,f=r.options.index;if(d.indexOf(r)===-1){if(d.length===0||f>=this.index){d.push(r);return}for(var v=0;v<d.length;v++)if(d[v].options.index>f){d.splice(v,0,r);return}}},t.reset=function(){this.registry=[]},t.remove=function(r){var d=this.registry.indexOf(r);this.registry.splice(d,1)},t.toString=function(r){for(var d=r===void 0?{}:r,f=d.attached,v=gr(d,["attached"]),h=F_(v),s=h.linebreak,U="",$=0;$<this.registry.length;$++){var V=this.registry[$];f!=null&&V.attached!==f||(U&&(U+=s),U+=V.toString(v))}return U},Fd(e,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),e}(),jv=new iY,wT=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),CT="2f1acc6c3a606b082e5eef5e54414ffb";wT[CT]==null&&(wT[CT]=0);var aU=wT[CT]++,lU=function(t){t===void 0&&(t={});var i=0,r=function(f,v){i+=1;var h="",s="";return v&&(v.options.classNamePrefix&&(s=v.options.classNamePrefix),v.options.jss.id!=null&&(h=String(v.options.jss.id))),t.minify?""+(s||"c")+aU+h+i:s+f.key+"-"+aU+(h?"-"+h:"")+"-"+i};return r},cU=function(t){var i;return function(){return i||(i=t()),i}},rY=function(t,i){try{return t.attributeStyleMap?t.attributeStyleMap.get(i):t.style.getPropertyValue(i)}catch{return""}},oY=function(t,i,r){try{var d=r;if(Array.isArray(r)&&(d=Zm(r)),t.attributeStyleMap)t.attributeStyleMap.set(i,d);else{var f=d?d.indexOf("!important"):-1,v=f>-1?d.substr(0,f-1):d;t.style.setProperty(i,v,f>-1?"important":"")}}catch{return!1}return!0},sY=function(t,i){try{t.attributeStyleMap?t.attributeStyleMap.delete(i):t.style.removeProperty(i)}catch{}},aY=function(t,i){return t.selectorText=i,t.selectorText===i},uU=cU(function(){return document.querySelector("head")});function lY(e,t){for(var i=0;i<e.length;i++){var r=e[i];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}function cY(e,t){for(var i=e.length-1;i>=0;i--){var r=e[i];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}function uY(e){for(var t=uU(),i=0;i<t.childNodes.length;i++){var r=t.childNodes[i];if(r.nodeType===8&&r.nodeValue.trim()===e)return r}return null}function hY(e){var t=jv.registry;if(t.length>0){var i=lY(t,e);if(i&&i.renderer)return{parent:i.renderer.element.parentNode,node:i.renderer.element};if(i=cY(t,e),i&&i.renderer)return{parent:i.renderer.element.parentNode,node:i.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&typeof r=="string"){var d=uY(r);if(d)return{parent:d.parentNode,node:d.nextSibling}}return!1}function dY(e,t){var i=t.insertionPoint,r=hY(t);if(r!==!1&&r.parent){r.parent.insertBefore(e,r.node);return}if(i&&typeof i.nodeType=="number"){var d=i,f=d.parentNode;f&&f.insertBefore(e,d.nextSibling);return}uU().appendChild(e)}var AY=cU(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),hU=function(t,i,r){try{"insertRule"in t?t.insertRule(i,r):"appendRule"in t&&t.appendRule(i)}catch{return!1}return t.cssRules[r]},dU=function(t,i){var r=t.cssRules.length;return i===void 0||i>r?r:i},fY=function(){var t=document.createElement("style");return t.textContent=`
`,t},pY=function(){function e(i){this.getPropertyValue=rY,this.setProperty=oY,this.removeProperty=sY,this.setSelector=aY,this.hasInsertedRules=!1,this.cssRules=[],i&&jv.add(i),this.sheet=i;var r=this.sheet?this.sheet.options:{},d=r.media,f=r.meta,v=r.element;this.element=v||fY(),this.element.setAttribute("data-jss",""),d&&this.element.setAttribute("media",d),f&&this.element.setAttribute("data-meta",f);var h=AY();h&&this.element.setAttribute("nonce",h)}var t=e.prototype;return t.attach=function(){if(!(this.element.parentNode||!this.sheet)){dY(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},t.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},t.insertRules=function(r,d){for(var f=0;f<r.index.length;f++)this.insertRule(r.index[f],f,d)},t.insertRule=function(r,d,f){if(f===void 0&&(f=this.element.sheet),r.rules){var v=r,h=f;if(r.type==="conditional"||r.type==="keyframes"){var s=dU(f,d);if(h=hU(f,v.toString({children:!1}),s),h===!1)return!1;this.refCssRule(r,s,h)}return this.insertRules(v.rules,h),h}var U=r.toString();if(!U)return!1;var $=dU(f,d),V=hU(f,U,$);return V===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,$,V),V)},t.refCssRule=function(r,d,f){r.renderable=f,r.options.parent instanceof sU&&this.cssRules.splice(d,0,f)},t.deleteRule=function(r){var d=this.element.sheet,f=this.indexOf(r);return f===-1?!1:(d.deleteRule(f),this.cssRules.splice(f,1),!0)},t.indexOf=function(r){return this.cssRules.indexOf(r)},t.replaceRule=function(r,d){var f=this.indexOf(r);return f===-1?!1:(this.element.sheet.deleteRule(f),this.cssRules.splice(f,1),this.insertRule(d,f))},t.getRules=function(){return this.element.sheet.cssRules},e}(),mY=0,gY=function(){function e(i){this.id=mY++,this.version="10.10.0",this.plugins=new nY,this.options={id:{minify:!1},createGenerateId:lU,Renderer:Nv?pY:null,plugins:[]},this.generateId=lU({minify:!1});for(var r=0;r<rU.length;r++)this.plugins.use(rU[r],{queue:"internal"});this.setup(i)}var t=e.prototype;return t.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=ct({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},t.createStyleSheet=function(r,d){d===void 0&&(d={});var f=d,v=f.index;typeof v!="number"&&(v=jv.index===0?0:jv.index+1);var h=new sU(r,ct({},d,{jss:this,generateId:d.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:v}));return this.plugins.onProcessSheet(h),h},t.removeStyleSheet=function(r){return r.detach(),jv.remove(r),this},t.createRule=function(r,d,f){if(d===void 0&&(d={}),f===void 0&&(f={}),typeof r=="object")return this.createRule(void 0,r,d);var v=ct({},f,{name:r,jss:this,Renderer:this.options.Renderer});v.generateId||(v.generateId=this.generateId),v.classes||(v.classes={}),v.keyframes||(v.keyframes={});var h=mT(r,d,v);return h&&this.plugins.onProcessRule(h),h},t.use=function(){for(var r=this,d=arguments.length,f=new Array(d),v=0;v<d;v++)f[v]=arguments[v];return f.forEach(function(h){r.plugins.use(h)}),this},e}(),BT=function(t){return new gY(t)},TT=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function AU(e){var t=null;for(var i in e){var r=e[i],d=typeof r;if(d==="function")t||(t={}),t[i]=r;else if(d==="object"&&r!==null&&!Array.isArray(r)){var f=AU(r);f&&(t||(t={}),t[i]=f)}}return t}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */BT();var fU=Date.now(),ET="fnValues"+fU,ST="fnStyle"+ ++fU,_Y=function(){return{onCreateRule:function(i,r,d){if(typeof r!="function")return null;var f=mT(i,{},d);return f[ST]=r,f},onProcessStyle:function(i,r){if(ET in r||ST in r)return i;var d={};for(var f in i){var v=i[f];typeof v=="function"&&(delete i[f],d[f]=v)}return r[ET]=d,i},onUpdate:function(i,r,d,f){var v=r,h=v[ST];h&&(v.style=h(i)||{});var s=v[ET];if(s)for(var U in s)v.prop(U,s[U](i),f)}}};const yY=_Y;var Up="@global",IT="@global ",vY=function(){function e(i,r,d){this.type="global",this.at=Up,this.isProcessed=!1,this.key=i,this.options=d,this.rules=new gw(ct({},d,{parent:this}));for(var f in r)this.rules.add(f,r[f]);this.rules.process()}var t=e.prototype;return t.getRule=function(r){return this.rules.get(r)},t.addRule=function(r,d,f){var v=this.rules.add(r,d,f);return v&&this.options.jss.plugins.onProcessRule(v),v},t.replaceRule=function(r,d,f){var v=this.rules.replace(r,d,f);return v&&this.options.jss.plugins.onProcessRule(v),v},t.indexOf=function(r){return this.rules.indexOf(r)},t.toString=function(r){return this.rules.toString(r)},e}(),xY=function(){function e(i,r,d){this.type="global",this.at=Up,this.isProcessed=!1,this.key=i,this.options=d;var f=i.substr(IT.length);this.rule=d.jss.createRule(f,r,ct({},d,{parent:this}))}var t=e.prototype;return t.toString=function(r){return this.rule?this.rule.toString(r):""},e}(),bY=/\s*,\s*/g;function pU(e,t){for(var i=e.split(bY),r="",d=0;d<i.length;d++)r+=t+" "+i[d].trim(),i[d+1]&&(r+=", ");return r}function wY(e,t){var i=e.options,r=e.style,d=r?r[Up]:null;if(d){for(var f in d)t.addRule(f,d[f],ct({},i,{selector:pU(f,e.selector)}));delete r[Up]}}function CY(e,t){var i=e.options,r=e.style;for(var d in r)if(!(d[0]!=="@"||d.substr(0,Up.length)!==Up)){var f=pU(d.substr(Up.length),e.selector);t.addRule(f,r[d],ct({},i,{selector:f})),delete r[d]}}function BY(){function e(i,r,d){if(!i)return null;if(i===Up)return new vY(i,r,d);if(i[0]==="@"&&i.substr(0,IT.length)===IT)return new xY(i,r,d);var f=d.parent;return f&&(f.type==="global"||f.options.parent&&f.options.parent.type==="global")&&(d.scoped=!1),!d.selector&&d.scoped===!1&&(d.selector=i),null}function t(i,r){i.type!=="style"||!r||(wY(i,r),CY(i,r))}return{onCreateRule:e,onProcessRule:t}}var mU=/\s*,\s*/g,TY=/&/g,EY=/\$([\w-]+)/g;function SY(){function e(d,f){return function(v,h){var s=d.getRule(h)||f&&f.getRule(h);return s?s.selector:h}}function t(d,f){for(var v=f.split(mU),h=d.split(mU),s="",U=0;U<v.length;U++)for(var $=v[U],V=0;V<h.length;V++){var q=h[V];s&&(s+=", "),s+=q.indexOf("&")!==-1?q.replace(TY,$):$+" "+q}return s}function i(d,f,v){if(v)return ct({},v,{index:v.index+1});var h=d.options.nestingLevel;h=h===void 0?1:h+1;var s=ct({},d.options,{nestingLevel:h,index:f.indexOf(d)+1});return delete s.name,s}function r(d,f,v){if(f.type!=="style")return d;var h=f,s=h.options.parent,U,$;for(var V in d){var q=V.indexOf("&")!==-1,te=V[0]==="@";if(!(!q&&!te)){if(U=i(h,s,U),q){var he=t(V,h.selector);$||($=e(s,v)),he=he.replace(EY,$);var Ae=h.key+"-"+V;"replaceRule"in s?s.replaceRule(Ae,d[V],ct({},U,{selector:he})):s.addRule(Ae,d[V],ct({},U,{selector:he}))}else te&&s.addRule(V,{},U).addRule(h.key,d[V],{selector:h.selector});delete d[V]}}return d}return{onProcessStyle:r}}var IY=/[A-Z]/g,MY=/^ms-/,MT={};function LY(e){return"-"+e.toLowerCase()}function gU(e){if(MT.hasOwnProperty(e))return MT[e];var t=e.replace(IY,LY);return MT[e]=MY.test(t)?"-"+t:t}function _w(e){var t={};for(var i in e){var r=i.indexOf("--")===0?i:gU(i);t[r]=e[i]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(_w):t.fallbacks=_w(e.fallbacks)),t}function kY(){function e(i){if(Array.isArray(i)){for(var r=0;r<i.length;r++)i[r]=_w(i[r]);return i}return _w(i)}function t(i,r,d){if(r.indexOf("--")===0)return i;var f=gU(r);return r===f?i:(d.prop(f,i),null)}return{onProcessStyle:e,onChangeValue:t}}var Jn=TT&&CSS?CSS.px:"px",yw=TT&&CSS?CSS.ms:"ms",D_=TT&&CSS?CSS.percent:"%",PY={"animation-delay":yw,"animation-duration":yw,"background-position":Jn,"background-position-x":Jn,"background-position-y":Jn,"background-size":Jn,border:Jn,"border-bottom":Jn,"border-bottom-left-radius":Jn,"border-bottom-right-radius":Jn,"border-bottom-width":Jn,"border-left":Jn,"border-left-width":Jn,"border-radius":Jn,"border-right":Jn,"border-right-width":Jn,"border-top":Jn,"border-top-left-radius":Jn,"border-top-right-radius":Jn,"border-top-width":Jn,"border-width":Jn,"border-block":Jn,"border-block-end":Jn,"border-block-end-width":Jn,"border-block-start":Jn,"border-block-start-width":Jn,"border-block-width":Jn,"border-inline":Jn,"border-inline-end":Jn,"border-inline-end-width":Jn,"border-inline-start":Jn,"border-inline-start-width":Jn,"border-inline-width":Jn,"border-start-start-radius":Jn,"border-start-end-radius":Jn,"border-end-start-radius":Jn,"border-end-end-radius":Jn,margin:Jn,"margin-bottom":Jn,"margin-left":Jn,"margin-right":Jn,"margin-top":Jn,"margin-block":Jn,"margin-block-end":Jn,"margin-block-start":Jn,"margin-inline":Jn,"margin-inline-end":Jn,"margin-inline-start":Jn,padding:Jn,"padding-bottom":Jn,"padding-left":Jn,"padding-right":Jn,"padding-top":Jn,"padding-block":Jn,"padding-block-end":Jn,"padding-block-start":Jn,"padding-inline":Jn,"padding-inline-end":Jn,"padding-inline-start":Jn,"mask-position-x":Jn,"mask-position-y":Jn,"mask-size":Jn,height:Jn,width:Jn,"min-height":Jn,"max-height":Jn,"min-width":Jn,"max-width":Jn,bottom:Jn,left:Jn,top:Jn,right:Jn,inset:Jn,"inset-block":Jn,"inset-block-end":Jn,"inset-block-start":Jn,"inset-inline":Jn,"inset-inline-end":Jn,"inset-inline-start":Jn,"box-shadow":Jn,"text-shadow":Jn,"column-gap":Jn,"column-rule":Jn,"column-rule-width":Jn,"column-width":Jn,"font-size":Jn,"font-size-delta":Jn,"letter-spacing":Jn,"text-decoration-thickness":Jn,"text-indent":Jn,"text-stroke":Jn,"text-stroke-width":Jn,"word-spacing":Jn,motion:Jn,"motion-offset":Jn,outline:Jn,"outline-offset":Jn,"outline-width":Jn,perspective:Jn,"perspective-origin-x":D_,"perspective-origin-y":D_,"transform-origin":D_,"transform-origin-x":D_,"transform-origin-y":D_,"transform-origin-z":D_,"transition-delay":yw,"transition-duration":yw,"vertical-align":Jn,"flex-basis":Jn,"shape-margin":Jn,size:Jn,gap:Jn,grid:Jn,"grid-gap":Jn,"row-gap":Jn,"grid-row-gap":Jn,"grid-column-gap":Jn,"grid-template-rows":Jn,"grid-template-columns":Jn,"grid-auto-rows":Jn,"grid-auto-columns":Jn,"box-shadow-x":Jn,"box-shadow-y":Jn,"box-shadow-blur":Jn,"box-shadow-spread":Jn,"font-line-height":Jn,"text-shadow-x":Jn,"text-shadow-y":Jn,"text-shadow-blur":Jn};function _U(e){var t=/(-[a-z])/g,i=function(v){return v[1].toUpperCase()},r={};for(var d in e)r[d]=e[d],r[d.replace(t,i)]=e[d];return r}var FY=_U(PY);function Hv(e,t,i){if(t==null)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=Hv(e,t[r],i);else if(typeof t=="object")if(e==="fallbacks")for(var d in t)t[d]=Hv(d,t[d],i);else for(var f in t)t[f]=Hv(e+"-"+f,t[f],i);else if(typeof t=="number"&&isNaN(t)===!1){var v=i[e]||FY[e];return v&&!(t===0&&v===Jn)?typeof v=="function"?v(t).toString():""+t+v:t.toString()}return t}function DY(e){e===void 0&&(e={});var t=_U(e);function i(d,f){if(f.type!=="style")return d;for(var v in d)d[v]=Hv(v,d[v],t);return d}function r(d,f){return Hv(f,d,t)}return{onProcessStyle:i,onChangeValue:r}}function UY(e){if(Array.isArray(e))return y1(e)}function zY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OY(e){return UY(e)||zY(e)||lI(e)||RY()}var Vv="",LT="",yU="",vU="",NY=Nv&&"ontouchstart"in document.documentElement;if(Nv){var kT={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},QY=document.createElement("p"),PT=QY.style,$Y="Transform";for(var FT in kT)if(FT+$Y in PT){Vv=FT,LT=kT[FT];break}Vv==="Webkit"&&"msHyphens"in PT&&(Vv="ms",LT=kT.ms,vU="edge"),Vv==="Webkit"&&"-apple-trailing-word"in PT&&(yU="apple")}var jo={js:Vv,css:LT,vendor:yU,browser:vU,isTouch:NY};function jY(e){return e[1]==="-"||jo.js==="ms"?e:"@"+jo.css+"keyframes"+e.substr(10)}var HY={noPrefill:["appearance"],supportedProperty:function(t){return t!=="appearance"?!1:jo.js==="ms"?"-webkit-"+t:jo.css+t}},VY={noPrefill:["color-adjust"],supportedProperty:function(t){return t!=="color-adjust"?!1:jo.js==="Webkit"?jo.css+"print-"+t:t}},GY=/[-\s]+(.)?/g;function WY(e,t){return t?t.toUpperCase():""}function DT(e){return e.replace(GY,WY)}function zp(e){return DT("-"+e)}var KY={noPrefill:["mask"],supportedProperty:function(t,i){if(!/^mask/.test(t))return!1;if(jo.js==="Webkit"){var r="mask-image";if(DT(r)in i)return t;if(jo.js+zp(r)in i)return jo.css+t}return t}},ZY={noPrefill:["text-orientation"],supportedProperty:function(t){return t!=="text-orientation"?!1:jo.vendor==="apple"&&!jo.isTouch?jo.css+t:t}},qY={noPrefill:["transform"],supportedProperty:function(t,i,r){return t!=="transform"?!1:r.transform?t:jo.css+t}},XY={noPrefill:["transition"],supportedProperty:function(t,i,r){return t!=="transition"?!1:r.transition?t:jo.css+t}},YY={noPrefill:["writing-mode"],supportedProperty:function(t){return t!=="writing-mode"?!1:jo.js==="Webkit"||jo.js==="ms"&&jo.browser!=="edge"?jo.css+t:t}},JY={noPrefill:["user-select"],supportedProperty:function(t){return t!=="user-select"?!1:jo.js==="Moz"||jo.js==="ms"||jo.vendor==="apple"?jo.css+t:t}},eJ={supportedProperty:function(t,i){if(!/^break-/.test(t))return!1;if(jo.js==="Webkit"){var r="WebkitColumn"+zp(t);return r in i?jo.css+"column-"+t:!1}if(jo.js==="Moz"){var d="page"+zp(t);return d in i?"page-"+t:!1}return!1}},tJ={supportedProperty:function(t,i){if(!/^(border|margin|padding)-inline/.test(t))return!1;if(jo.js==="Moz")return t;var r=t.replace("-inline","");return jo.js+zp(r)in i?jo.css+r:!1}},nJ={supportedProperty:function(t,i){return DT(t)in i?t:!1}},iJ={supportedProperty:function(t,i){var r=zp(t);return t[0]==="-"||t[0]==="-"&&t[1]==="-"?t:jo.js+r in i?jo.css+t:jo.js!=="Webkit"&&"Webkit"+r in i?"-webkit-"+t:!1}},rJ={supportedProperty:function(t){return t.substring(0,11)!=="scroll-snap"?!1:jo.js==="ms"?""+jo.css+t:t}},oJ={supportedProperty:function(t){return t!=="overscroll-behavior"?!1:jo.js==="ms"?jo.css+"scroll-chaining":t}},sJ={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},aJ={supportedProperty:function(t,i){var r=sJ[t];return r&&jo.js+zp(r)in i?jo.css+r:!1}},xU={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},lJ=Object.keys(xU),cJ=function(t){return jo.css+t},uJ={supportedProperty:function(t,i,r){var d=r.multiple;if(lJ.indexOf(t)>-1){var f=xU[t];if(!Array.isArray(f))return jo.js+zp(f)in i?jo.css+f:!1;if(!d)return!1;for(var v=0;v<f.length;v++)if(!(jo.js+zp(f[0])in i))return!1;return f.map(cJ)}return!1}},bU=[HY,VY,KY,ZY,qY,XY,YY,JY,eJ,tJ,nJ,iJ,rJ,oJ,aJ,uJ],wU=bU.filter(function(e){return e.supportedProperty}).map(function(e){return e.supportedProperty}),hJ=bU.filter(function(e){return e.noPrefill}).reduce(function(e,t){return e.push.apply(e,OY(t.noPrefill)),e},[]),Gv,qm={};if(Nv){Gv=document.createElement("p");var UT=window.getComputedStyle(document.documentElement,"");for(var zT in UT)isNaN(zT)||(qm[UT[zT]]=UT[zT]);hJ.forEach(function(e){return delete qm[e]})}function RT(e,t){if(t===void 0&&(t={}),!Gv)return e;if(qm[e]!=null)return qm[e];(e==="transition"||e==="transform")&&(t[e]=e in Gv.style);for(var i=0;i<wU.length&&(qm[e]=wU[i](e,Gv.style,t),!qm[e]);i++);try{Gv.style[e]=""}catch{return!1}return qm[e]}var U_={},dJ={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},AJ=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Rp;function fJ(e,t,i){if(t==="var")return"var";if(t==="all")return"all";if(i==="all")return", all";var r=t?RT(t):", "+RT(i);return r||t||i}Nv&&(Rp=document.createElement("p"));function CU(e,t){var i=t;if(!Rp||e==="content")return t;if(typeof i!="string"||!isNaN(parseInt(i,10)))return i;var r=e+i;if(U_[r]!=null)return U_[r];try{Rp.style[e]=i}catch{return U_[r]=!1,!1}if(dJ[e])i=i.replace(AJ,fJ);else if(Rp.style[e]===""&&(i=jo.css+i,i==="-ms-flex"&&(Rp.style[e]="-ms-flexbox"),Rp.style[e]=i,Rp.style[e]===""))return U_[r]=!1,!1;return Rp.style[e]="",U_[r]=i,U_[r]}function pJ(){function e(d){if(d.type==="keyframes"){var f=d;f.at=jY(f.at)}}function t(d){for(var f in d){var v=d[f];if(f==="fallbacks"&&Array.isArray(v)){d[f]=v.map(t);continue}var h=!1,s=RT(f);s&&s!==f&&(h=!0);var U=!1,$=CU(s,Zm(v));$&&$!==v&&(U=!0),(h||U)&&(h&&delete d[f],d[s||f]=$||v)}return d}function i(d,f){return f.type!=="style"?d:t(d)}function r(d,f){return CU(f,Zm(d))||d}return{onProcessRule:e,onProcessStyle:i,onChangeValue:r}}function mJ(){var e=function(i,r){return i.length===r.length?i>r?1:-1:i.length-r.length};return{onProcessStyle:function(i,r){if(r.type!=="style")return i;for(var d={},f=Object.keys(i).sort(e),v=0;v<f.length;v++)d[f[v]]=i[f[v]];return d}}}function BU(){return{plugins:[yY(),BY(),SY(),kY(),DY(),typeof window>"u"?null:pJ(),mJ()]}}function TU(e={}){const{baseClasses:t,newClasses:i,Component:r}=e;if(!i)return t;const d=ct({},t);return Object.keys(i).forEach(f=>{i[f]&&(d[f]=`${t[f]} ${i[f]}`)}),d}const z_={set:(e,t,i,r)=>{let d=e.get(t);d||(d=new Map,e.set(t,d)),d.set(i,r)},get:(e,t,i)=>{const r=e.get(t);return r?r.get(i):void 0},delete:(e,t,i)=>{e.get(t).delete(i)}};function EU(){var e;const t=dC();return(e=t==null?void 0:t.$$material)!=null?e:t}const gJ=["children","injectFirst","disableGeneration"],_J=BT(BU()),yJ={disableGeneration:!1,generateClassName:YD(),jss:_J,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},OT=Sh(yJ);let vw;function vJ(e){const{children:t,injectFirst:i=!1,disableGeneration:r=!1}=e,d=gr(e,gJ),f=nl(OT),{generateClassName:v,jss:h,serverGenerateClassName:s,sheetsCache:U,sheetsManager:$,sheetsRegistry:V}=ct({},f,d),q=tl(()=>{const te={disableGeneration:r,generateClassName:v,jss:h,serverGenerateClassName:s,sheetsCache:U,sheetsManager:$,sheetsRegistry:V};if(!te.jss.options.insertionPoint&&i&&typeof window<"u"){if(!vw){const he=document.head;vw=document.createComment("mui-inject-first"),he.insertBefore(vw,he.firstChild)}te.jss=BT({plugins:BU().plugins,insertionPoint:vw})}return te},[i,r,v,h,s,U,$,V]);return ze(OT.Provider,{value:q,children:t})}let SU=-1e9;function xJ(){return SU+=1,SU}const bJ=["variant"];function IU(e){return e.length===0}function wJ(e){const{variant:t}=e,i=gr(e,bJ);let r=t||"";return Object.keys(i).sort().forEach(d=>{d==="color"?r+=IU(r)?e[d]:qi(e[d]):r+=`${IU(r)?d:qi(d)}${qi(e[d].toString())}`}),r}const CJ={};function BJ(e){const t=typeof e=="function";return{create:(i,r)=>{let d;try{d=t?e(i):e}catch(s){throw s}if(!r||!i.components||!i.components[r]||!i.components[r].styleOverrides&&!i.components[r].variants)return d;const f=i.components[r].styleOverrides||{},v=i.components[r].variants||[],h=ct({},d);return Object.keys(f).forEach(s=>{h[s]=eh(h[s]||{},f[s])}),v.forEach(s=>{const U=wJ(s.props);h[U]=eh(h[U]||{},s.style)}),h},options:{}}}const TJ=["name","classNamePrefix","Component","defaultTheme"];function EJ({state:e,stylesOptions:t},i,r){if(t.disableGeneration)return i||{};e.cacheClasses||(e.cacheClasses={value:null,lastProp:null,lastJSS:{}});let d=!1;return e.classes!==e.cacheClasses.lastJSS&&(e.cacheClasses.lastJSS=e.classes,d=!0),i!==e.cacheClasses.lastProp&&(e.cacheClasses.lastProp=i,d=!0),d&&(e.cacheClasses.value=TU({baseClasses:e.cacheClasses.lastJSS,newClasses:i,Component:r})),e.cacheClasses.value}function SJ({state:e,theme:t,stylesOptions:i,stylesCreator:r,name:d},f){if(i.disableGeneration)return;let v=z_.get(i.sheetsManager,r,t);v||(v={refs:0,staticSheet:null,dynamicStyles:null},z_.set(i.sheetsManager,r,t,v));const h=ct({},r.options,i,{theme:t,flip:typeof i.flip=="boolean"?i.flip:t.direction==="rtl"});h.generateId=h.serverGenerateClassName||h.generateClassName;const s=i.sheetsRegistry;if(v.refs===0){let U;i.sheetsCache&&(U=z_.get(i.sheetsCache,r,t));const $=r.create(t,d);U||(U=i.jss.createStyleSheet($,ct({link:!1},h)),U.attach(),i.sheetsCache&&z_.set(i.sheetsCache,r,t,U)),s&&s.add(U),v.staticSheet=U,v.dynamicStyles=AU($)}if(v.dynamicStyles){const U=i.jss.createStyleSheet(v.dynamicStyles,ct({link:!0},h));U.update(f),U.attach(),e.dynamicSheet=U,e.classes=TU({baseClasses:v.staticSheet.classes,newClasses:U.classes}),s&&s.add(U)}else e.classes=v.staticSheet.classes;v.refs+=1}function IJ({state:e},t){e.dynamicSheet&&e.dynamicSheet.update(t)}function MJ({state:e,theme:t,stylesOptions:i,stylesCreator:r}){if(i.disableGeneration)return;const d=z_.get(i.sheetsManager,r,t);d.refs-=1;const f=i.sheetsRegistry;d.refs===0&&(z_.delete(i.sheetsManager,r,t),i.jss.removeStyleSheet(d.staticSheet),f&&f.remove(d.staticSheet)),e.dynamicSheet&&(i.jss.removeStyleSheet(e.dynamicSheet),f&&f.remove(e.dynamicSheet))}function LJ(e,t){const i=Pi([]);let r;const d=tl(()=>({}),t);i.current!==d&&(i.current=d,r=e()),$i(()=>()=>{r&&r()},[d])}function Xm(e,t={}){const{name:i,classNamePrefix:r,Component:d,defaultTheme:f=CJ}=t,v=gr(t,TJ),h=BJ(e),s=i||r||"makeStyles";return h.options={index:xJ(),name:i,meta:s,classNamePrefix:s},($={})=>{const V=EU()||f,q=ct({},nl(OT),v),te=Pi(),he=Pi();return LJ(()=>{const De={name:i,state:{},stylesCreator:h,stylesOptions:q,theme:V};return SJ(De,$),he.current=!1,te.current=De,()=>{MJ(De)}},[V,h]),$i(()=>{he.current&&IJ(te.current,$),he.current=!0}),EJ(te.current,$.classes,d)}}const kJ=["defaultTheme","withTheme","name"],PJ=["classes"],NT=(e,t={})=>i=>{const{defaultTheme:r,withTheme:d=!1,name:f}=t,v=gr(t,kJ);let h=f;const s=Xm(e,ct({defaultTheme:r,Component:i,name:f||i.displayName,classNamePrefix:h},v)),U=Yr(function(V,q){const te=gr(V,PJ),he=s(ct({},i.defaultProps,V));let Ae,De=te;return(typeof f=="string"||d)&&(Ae=EU()||r,f&&(De=PX({theme:Ae,name:f,props:te})),d&&!De.theme&&(De.theme=Ae)),ze(i,ct({ref:q,classes:he},De))});return A3(U,i),U};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var xw=function(){return xw=Object.assign||function(t){for(var i,r=1,d=arguments.length;r<d;r++){i=arguments[r];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(t[f]=i[f])}return t},xw.apply(this,arguments)};function FJ(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,r=Object.getOwnPropertySymbols(e);d<r.length;d++)t.indexOf(r[d])<0&&Object.prototype.propertyIsEnumerable.call(e,r[d])&&(i[r[d]]=e[r[d]]);return i}Xm(function(e){return{root:{borderRadius:"2rem",padding:e.spacing(1,3),textTransform:"none",whiteSpace:"nowrap",maxHeight:"2.5rem","&:not(:first-child)":{marginLeft:e.spacing(2)}},label:{background:"red"},contained:{backgroundColor:function(t){var i;return(i=t.customPaletteColor)===null||i===void 0?void 0:i.main},"&:hover":{backgroundColor:function(t){var i;return!((i=t.customPaletteColor)===null||i===void 0)&&i.main?i_(t.customPaletteColor.main,.2):void 0}}},outlined:{borderColor:function(t){var i;return(i=t.customPaletteColor)===null||i===void 0?void 0:i.main},color:function(t){var i;return(i=t.customPaletteColor)===null||i===void 0?void 0:i.main}},text:{color:function(t){var i;return(i=t.customPaletteColor)===null||i===void 0?void 0:i.main}},fabProgress:{marginRight:e.spacing(1),zIndex:1,color:function(t){var i;return t.variant==="contained"?"white":(i=t.customPaletteColor)===null||i===void 0?void 0:i.main}},input:{display:"none"}}});var DJ=Xm(function(e){return{table:{width:"100%",border:"none",borderCollapse:"collapse","& tbody tr:nth-child(odd)":{background:e.palette.grey[200]},"& thead":{},"& th":{textAlign:"left",position:"sticky",boxShadow:`0px 2px 1px -1px rgba(0,0,0,0.2)
        ,0 0 0 rgba(0,0,0,0.14)
        ,0 0 0 rgba(0,0,0,0.12)`,top:"-12px",zIndex:2,backgroundColor:e.palette.secondary.light},"& td, & th":{padding:e.spacing(1,2)},"& td.strong":{fontWeight:"bold"},"& td.alignRight, & th.alignRight":{textAlign:"right"}}}}),MU=function(e){var t=e.children,i=e.className,r=e.style,d=e.id,f=DJ();return ka.createElement("table",{style:r,className:"".concat(i??""," ").concat(f.table),id:d},t)};Xm(function(){return{div:{display:"flex",justifyContent:"center",margin:"14rem 0",width:"100%"}}}),Xm(function(e){return{description:{flexGrow:1,textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center"},bottomMargin:{marginBottom:e.spacing(2)},title:{display:"flex",justifyContent:"space-between",alignItems:"center"},close:{cursor:"pointer",color:e.palette.grey[400],alignSelf:"flex-start"}}});var UJ=Xm(function(){return{div:{display:"flex",justifyContent:"center",margin:"14rem 0",width:"100%"}}}),zJ=function(e){var t=UJ();return ka.createElement("div",{className:t.div},ka.createElement(tv,xw({thickness:4},e)))},RJ=function(e){var t=e.label,i=e.variant,r=e.size,d=r===void 0?"small":r,f=FJ(e,["label","variant","size"]);return ka.createElement(Rk,xw({},f,{label:t,variant:i,size:d}))};ka.createElement(CX,{fontSize:"small"}),ka.createElement(wX,{fontSize:"small"}),NT({root:{lineHeight:1.5,fontSize:"1rem",backgroundColor:"var(--color-white)"}})(YL),NT(function(){return{root:{textAlign:"left",background:"white","& .MuiInputBase-root":{background:"transparent"},"& .MuiFilledInput-underline::before":{borderBottom:"none"}}}})(Rk),NT(function(){return{popupIndicator:{border:"1px solid var(--color-grey)",borderRadius:"100%",color:"var(--color-sdg-blue)"}}})(rk);const OJ=Fi("div")(({theme:e})=>({maxHeight:"300px",overflowY:"scroll",paddingRight:e.spacing(2),"& .popup":{background:"red"},"& .description":{padding:e.spacing(2,0)}})),NJ=Fi(ml)(({theme:e})=>({paddingBottom:e.spacing(1),color:e.palette.primary.main,fontWeight:"bold"})),QJ=(e,t)=>$0.divIcon({className:`marker-cluster-individual ${t===0?"adminLevel0":""}`,iconSize:$0.point(30,30,!0),html:`${e}`}),LU=({loc:e,activities:t,position:i,alertScope:r})=>{const{t:d}=ad(),f=[e.latitude,e.longitude];if(f[0]===null||f[1]===null||t.length===0)return null;const v=h=>h==="nationally"?d("whereWeWorkMap.nationallyImplemented"):h==="multicountry"?d("whereWeWorkMap.multicountryImplemented"):"";return ze(DR,{icon:QJ(t.length,e.adminLevel),position:i??f,children:ze(UR,{minWidth:500,children:[ze(NJ,{variant:"h4",children:e.name}),ze(ml,{variant:"subtitle2",children:d("whereWeWorkMap.activities",{count:t.length})}),r&&e.adminLevel===0&&ze(xC,{severity:"warning",children:ze(ml,{variant:"body2",children:v(r)})}),ze(OJ,{children:t.map(h=>{var Ae,De,ke,xe,Te,Ee,Fe;const s=Kr.sortBy(Kr.flatten(Kr.uniq((Ae=h.locations)==null?void 0:Ae.filter(Se=>Se.adminLevel===1).map(Se=>Se.name)))).join(", "),U=Kr.sortBy(Kr.flatten(Kr.uniq((De=h.locations)==null?void 0:De.filter(Se=>Se.adminLevel===2).map(Se=>Se.name)))).join(", "),$=Kr.sortBy(Kr.flatten(Kr.uniq((ke=h.locations)==null?void 0:ke.filter(Se=>Se.adminLevel===3).map(Se=>Se.name)))).join(", "),V=Kr.sortBy(Kr.flatten(Kr.uniq((xe=h.organizations)==null?void 0:xe.filter(Se=>{var nt;return((nt=Se.planEntityOrganization)==null?void 0:nt.type)==="agency"}).map(Se=>Se.name)))).join(", "),q=Kr.uniq(Kr.flatten((Te=h.planEntitySdgs)==null?void 0:Te.map((Se,nt)=>{var xt;return ze(zk,{title:Se.target.name,children:ze("span",{children:[Se.target.ref,nt<(((xt=h.planEntitySdgs)==null?void 0:xt.length)??0)-1&&", "]})},Se.id)}))),te=Kr.sortBy(Kr.flatten(Kr.uniq((Ee=h.organizations)==null?void 0:Ee.filter(Se=>{var nt;return((nt=Se.planEntityOrganization)==null?void 0:nt.type)==="implementingPartner"}).map(Se=>Se.name)))).join(", "),he=Kr.sortBy(Kr.flatten(Kr.uniq((Fe=h.organizations)==null?void 0:Fe.filter(Se=>{var nt;return((nt=Se.planEntityOrganization)==null?void 0:nt.type)==="contributingPartner"}).map(Se=>Se.name)))).join(", ");return ze(xA,{container:!0,children:[ze(xA,{item:!0,children:ze(ml,{variant:"body1",className:"description",children:[ze("strong",{children:h.planEntityVersion.name}),ze("br",{}),h.planEntityVersion.description]})}),ze(MU,{children:ze("tbody",{children:[s.length>0&&ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:d("whereWeWorkMap.locationsAdminLevel1")}),ze("td",{children:s})]}),U.length>0&&ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:d("Locations (admin level 2)")}),ze("td",{children:U})]}),$.length>0&&ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:d("Locations (admin level 3)")}),ze("td",{children:$})]}),ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:d("Agency")}),ze("td",{children:V})]}),ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:"SDG Goals"}),ze("td",{children:q})]}),ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:d("implementingPartners")}),ze("td",{children:te})]}),ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:d("contributingPartners")}),ze("td",{children:he})]}),ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:d("startDate")}),ze("td",{children:h.planEntityVersion.startDate})]}),ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:d("endDate")}),ze("td",{children:h.planEntityVersion.endDate})]})]})})]},h.id)})},"markerActivityContainer")]})},e.id)},kU=Fi("div")(({theme:e})=>({maxHeight:"300px",overflowY:"scroll",paddingRight:e.spacing(2),"& .popup":{background:"red"},"& .description":{padding:e.spacing(2,0)}})),$J=Fi(ml)(({theme:e})=>({paddingBottom:e.spacing(1),color:e.palette.primary.main,fontWeight:"bold"})),jJ=({loc:e,activities:t,alertScope:i})=>{const{t:r}=ad(),d=[e.latitude,e.longitude];if(d[0]===null||d[1]===null||t.length===0)return null;const f=$=>$==="nationally"?r("whereWeWorkMap.nationallyImplemented"):$==="multicountry"?r("whereWeWorkMap.multicountryImplemented"):"",v=$=>ze(vs,{children:$.map(V=>{var Te,Ee,Fe,Se,nt,xt,Bt;const q=Kr.sortBy(Kr.flatten(Kr.uniq((Te=V.locations)==null?void 0:Te.filter(Xe=>Xe.adminLevel===1).map(Xe=>Xe.name)))).join(", "),te=Kr.sortBy(Kr.flatten(Kr.uniq((Ee=V.locations)==null?void 0:Ee.filter(Xe=>Xe.adminLevel===2).map(Xe=>Xe.name)))).join(", "),he=Kr.sortBy(Kr.flatten(Kr.uniq((Fe=V.locations)==null?void 0:Fe.filter(Xe=>Xe.adminLevel===3).map(Xe=>Xe.name)))).join(", "),Ae=Kr.sortBy(Kr.flatten(Kr.uniq((Se=V.organizations)==null?void 0:Se.filter(Xe=>{var qt;return((qt=Xe.planEntityOrganization)==null?void 0:qt.type)==="agency"}).map(Xe=>Xe.name)))).join(", "),De=Kr.uniq(Kr.flatten((nt=V.planEntitySdgs)==null?void 0:nt.map((Xe,qt)=>{var rn;return ze(zk,{title:Xe.target.name,children:ze("span",{children:[Xe.target.ref,qt<(((rn=V.planEntitySdgs)==null?void 0:rn.length)??0)-1&&", "]})},Xe.id)}))),ke=Kr.sortBy(Kr.flatten(Kr.uniq((xt=V.organizations)==null?void 0:xt.filter(Xe=>{var qt;return((qt=Xe.planEntityOrganization)==null?void 0:qt.type)==="implementingPartner"}).map(Xe=>Xe.name)))).join(", "),xe=Kr.sortBy(Kr.flatten(Kr.uniq((Bt=V.organizations)==null?void 0:Bt.filter(Xe=>{var qt;return((qt=Xe.planEntityOrganization)==null?void 0:qt.type)==="contributingPartner"}).map(Xe=>Xe.name)))).join(", ");return ze(xA,{container:!0,children:[ze(xA,{item:!0,children:ze(ml,{variant:"body1",className:"description",children:[ze("strong",{children:V.planEntityVersion.name}),ze("br",{}),V.planEntityVersion.description]})}),ze(MU,{children:ze("tbody",{children:[q.length>0&&ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:r("whereWeWorkMap.locationsAdminLevel1")}),ze("td",{children:q})]}),te.length>0&&ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:r("Locations (admin level 2)")}),ze("td",{children:te})]}),he.length>0&&ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:r("Locations (admin level 3)")}),ze("td",{children:he})]}),ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:r("Agency")}),ze("td",{children:Ae})]}),ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:"SDG Goals"}),ze("td",{children:De})]}),ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:r("implementingPartners")}),ze("td",{children:ke})]}),ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:r("contributingPartners")}),ze("td",{children:xe})]}),ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:r("startDate")}),ze("td",{children:V.planEntityVersion.startDate})]}),ze("tr",{children:[ze("td",{className:"strong",scope:"row",children:r("endDate")}),ze("td",{children:V.planEntityVersion.endDate})]})]})})]},V.id)})}),h=i==="nationally"&&t.some($=>{var q,te,he;return((q=$.locations)==null?void 0:q.find(Ae=>Ae.adminLevel===0))&&!((te=$.locations)!=null&&te.find(Ae=>Ae.adminLevel!==0))&&(((he=$.locations)==null?void 0:he.filter(Ae=>Ae.adminLevel===0).length)??0)>1});let s=t,U=t;return h&&(s=t.filter($=>{var V;return((V=$.locations)==null?void 0:V.length)===1}),U=t.filter($=>{var V;return(((V=$.locations)==null?void 0:V.length)??0)>1})),ze(Vy,{elevation:0,style:{minWidth:500},children:[ze($J,{variant:"h4",children:e.name}),ze(ml,{variant:"subtitle2",children:r("whereWeWorkMap.activities",{count:t.length})}),h&&ze(ml,{variant:"body2",children:["(",s.length," nationally,"," ",U.length," multicountry)"]}),i&&e.adminLevel===0&&s.length>0&&ze(xC,{severity:"warning",children:ze(ml,{variant:"body2",children:f(i)})}),ze(kU,{children:ze(vs,{children:v(h?s:t)})},"markerActivityContainer"),h&&ze(vs,{children:[i&&e.adminLevel===0&&ze(xC,{severity:"warning",children:ze(ml,{variant:"body2",children:f("multicountry")})}),ze(kU,{children:v(U)},"markerEtraActivityContainer")]})]})},HJ=({value:e,options:t,label:i,includeBlank:r=!1,blankLabel:d,onChange:f,style:v,forSdgs:h=!1,noBlankValue:s=!1,native:U=!0,loading:$=!1,disabled:V=!1})=>{const{t:q}=ad(),te=()=>{const Ae=t.find(ke=>ke.value===e),De=d||q("noFilter");return ze(HC,{displayEmpty:!0,labelId:i.replace(" ",""),value:e,onChange:ke=>f(ke.target.value),variant:"outlined",MenuProps:{PaperProps:{style:{maxWidth:"400px"}}},sx:{width:"300px",minHeight:"41px",display:"flex",alignItems:"center"},renderValue:()=>ze(Qf,{children:$?ze(vs,{children:"..."}):!e||!Ae?r?d:ze(vs,{children:["All ",q(i)," Types"]}):`${q(Ae==null?void 0:Ae.label)}`}),disabled:V,children:[!s&&ze(Qf,{value:"",children:De}),t.map(ke=>ze(Qf,{value:ke.value,children:h?`${ke.value} ${q(ke.label)}`:q(ke.label)},ke.label))]})},he=()=>ze(HC,{labelId:i.replace(" ",""),value:e,native:!0,onChange:Ae=>f(Ae.target.value),variant:"outlined",inputProps:{style:{maxWidth:"300px",minHeight:"41px"},name:i,id:i.replace(" ","")},MenuProps:{PaperProps:{style:{maxWidth:"300px"}}},disabled:V,children:[r&&ze("option",{"aria-label":"None",value:"",children:d||ze(vs,{children:["All ",i," Types"]})}),t.map(Ae=>ze("option",{value:Ae.value,children:q(Ae.label)},Ae.label))]});return ze(dk,{style:{minHeight:"100%",...v},children:[ze(_k,{id:i.replace(" ",""),shrink:!0,style:{transform:"translate(19px, -5.5px) scale(0.75)",backgroundColor:"white",zIndex:9,padding:"0 3px"},children:i}),U?he():te()]})},VJ=({onChange:e,workspaceId:t,native:i=!1,includeBlank:r=!0,startYear:d,endYear:f,defaultYear:v,defaultTimeframe:h,noBlankValue:s,styles:U})=>{const{t:$}=ad(),[V,q]=ur("0"),[te,he]=ur([]),[Ae,De]=ur(!0),ke=Pi(!0),xe=xs(async()=>{var Te;try{let Ee;if(t){const Xe=await t4({workspaceIds:[t],sort:[["planVersion.startDate","DESC"]],exclude:["assessments","planDocuments","planSubmissions","planSurveys","planTags","workspace"]});Xe&&(Ee=Xe.find(qt=>{var rn,Ut;return((rn=qt==null?void 0:qt.planType)==null?void 0:rn.short)==="UNDAF"||((Ut=qt==null?void 0:qt.planType)==null?void 0:Ut.short)==="CFR"}))}const Fe=Ee==null?void 0:Ee.entityPrototypes.find(Xe=>Xe.name==="indicator"&&Xe.properties.periodicity!=="endOfCycle"),Se=(Te=Fe==null?void 0:Fe.properties)==null?void 0:Te.periodicity,nt=await D1({type:Se||"yearly",...Ee?{planIds:[Ee.id]}:{}}),xt=new Date().getFullYear()+9,Bt=nt.results.map(Xe=>({label:Xe.startDate.split("-")[0],value:`${Xe.id}`})).filter(Xe=>Ee||f?!0:+Xe.label<xt).sort((Xe,qt)=>+Xe.label-+qt.label).filter(Xe=>(d?+Xe.label>=d:!0)&&(f?+Xe.label<=f:!0));he(Bt),v&&q((()=>{var rn,Ut,Kt;const qt=(rn=Bt.find(On=>+On.label===v))==null?void 0:rn.value;return qt||(ke.current=!1,+((Ut=Bt[Bt.length-1])==null?void 0:Ut.label)<v?Bt[Bt.length-1].value:+((Kt=Bt[0])==null?void 0:Kt.label)>v?Bt[0].value:"-1")})()),h&&q((()=>{var rn,Ut,Kt;const qt=(rn=Bt.find(On=>+On.value===h))==null?void 0:rn.value;return qt||(ke.current=!1,+((Ut=Bt[Bt.length-1])==null?void 0:Ut.label)<new Date().getFullYear()?Bt[Bt.length-1].value:+((Kt=Bt[0])==null?void 0:Kt.label)>new Date().getFullYear()?Bt[0].value:"-1")})()),De(!1)}catch(Ee){console.error(Ee)}},[t]);return $i(()=>{xe()},[xe]),$i(()=>{e&&!Ae&&(ke.current?ke.current=!1:e(V==="0"||V==="-1"?void 0:V))},[Ae,e,V]),ze(HJ,{style:U??{},value:V??"",options:te,includeBlank:r,native:i,blankLabel:$("allYears"),label:$("year"),onChange:Te=>q(Te),loading:Ae,noBlankValue:s})},GJ=()=>{const e=il.MAPPING_LIBRARY||x1,t=il.API_MAPBOX,i=il.MAPBOX_TOKEN,r=il.MAPBOX_MAPSTYLE,d=il.MAPTILER_MAPSTYLE,f={mapStyle:r,mapboxAccessToken:i},v={mapStyle:d},h={...String(e)===x1?f:String(e)===N0?v:{}};return{MAPPING_LIBRARY:e,MAPGL_CONFIG:h,API_MAPBOX:t}},WJ=e=>Kr.uniqBy(e.reduce((t,i)=>{const r=i.locations??[];return[...t,...r]},[]),"id"),Op=e=>t=>(e==null?void 0:e.includes(t.id))??!0,Ym=e=>t=>{var i;return e?((i=t.locations)==null?void 0:i.some(r=>(e==null?void 0:e.includes(r.id))??r))??!1:!0},QT=(e,t)=>{if(!t)return e;const i=e.locations;if(!i)return e;let r=[],d=i.filter(v=>t==null?void 0:t.includes(v.id));const f=v=>{const h=v.map(s=>s.id);return i.filter(s=>h.includes(s.parentId))};do r=[...r,...d],d=f(d);while(d.length);return{...e,locations:[...r]}},KJ=(e,t)=>t?e.map(i=>QT(i,t)):e,ZJ=e=>Kr.uniqBy(e.reduce((t,i)=>{var d;const r=((d=i.planEntitySdgs)==null?void 0:d.map(f=>f.target.sustainableDevelopmentGoal))??[];return[...t,...r]},[]),"id").map(t=>({value:t.id,label:`${t.short}`})).sort((t,i)=>t.value>i.value?1:-1),qJ=function(e,t){var h,s;const i=Kr.keyBy(t,"id"),r=[];let d=!1;(h=e.getAllChildMarkers)==null||h.call(e).forEach(U=>{var q,te,he,Ae,De,ke,xe,Te;const $=(he=(te=(q=U.options.children)==null?void 0:q.props)==null?void 0:te.children)==null?void 0:he.findIndex(Ee=>Ee.key==="markerActivityContainer"),V=$&&((Te=(xe=(ke=(De=(Ae=U.options.children)==null?void 0:Ae.props)==null?void 0:De.children)==null?void 0:ke[$])==null?void 0:xe.props)==null?void 0:Te.children);V&&r.push(...V.map(Ee=>{var Fe,Se;return!d&&((Fe=i[Ee.key].locations)==null?void 0:Fe.length)===1&&((Se=i[Ee.key].locations)==null?void 0:Se[0].adminLevel)===0&&(d=!0),Ee.key}))});const f=Array.from(new Set(r)).length,v=((s=e.getChildCount)==null?void 0:s.call(e))??0;return $0.divIcon({html:`<span>${f??""}</span>`,className:`marker-cluster-custom ${d?"adminLevel0":""}`,iconSize:$0.point(40+v,40+v,!0)})},R_=e=>e!=null&&e.latitude||e!=null&&e.longitude?`${e.latitude}, ${e.longitude}`:"",XJ=e=>e.reduce((t,i)=>{var d;const r=Kr.keyBy(i.locations,"id");return(d=i.locations)==null||d.forEach(f=>{var h,s;const v={};if(f.adminLevel===3){const U=t.find($=>$.adminLevel3===f.name);if(U!=null&&U.numberOfSuboutputs)U.numberOfSuboutputs+=1;else{v.adminLevel3=f.name,v.adminLevel3LatLon=R_(f);const $=r[f.parentId];v.adminLevel2=$==null?void 0:$.name,v.adminLevel2LatLon=R_($);const V=$?r[$.parentId]:void 0;v.adminLevel1=V==null?void 0:V.name,v.adminLevel1LatLon=R_(V),v.numberOfSuboutputs=1}}else if(f.adminLevel===2){if(!((h=i.locations)==null?void 0:h.find($=>$.parentId===f.id))){const $=t.find(V=>V.adminLevel2===f.name);if($!=null&&$.numberOfSuboutputs)$.numberOfSuboutputs+=1;else{v.adminLevel2=f.name,v.adminLevel2LatLon=R_(f);const V=r[f.parentId];v.adminLevel1=V==null?void 0:V.name,v.adminLevel1LatLon=R_(V),v.numberOfSuboutputs=1}}}else if(f.adminLevel===1&&!((s=i.locations)==null?void 0:s.find($=>$.parentId===f.id))){const $=t.find(V=>V.adminLevel1===f.name);$!=null&&$.numberOfSuboutputs?$.numberOfSuboutputs+=1:(v.adminLevel1=f==null?void 0:f.name,v.adminLevel1LatLon=R_(f),v.numberOfSuboutputs=1)}v.numberOfSuboutputs&&t.push(v)}),t},[]).sort((t,i)=>t.adminLevel2===i.adminLevel2?(t.adminLevel3??0)>(i.adminLevel3??0)?1:-1:t.adminLevel1===i.adminLevel1?(t.adminLevel2??0)>(i.adminLevel2??0)?1:-1:(t.adminLevel1??0)>(i.adminLevel1??0)?1:-1),PU=e=>{const t=Kr.groupBy(e,r=>`${r.latitude}-${r.longitude}`);return Kr.map(t,r=>{if(r.length===1)return r[0];{const d=Kr.clone(r[0]);for(let f=1;f<r.length;f++){const v=r[f];d.locationEntityIds=Kr.uniq([...d.locationEntityIds,...v.locationEntityIds])}return d.locationEntitiesCount=d.locationEntityIds.length,d}})},YJ=Fi(xA)(({theme:e})=>({"& .MuiFormControl-root":{marginTop:e.spacing(2)},"&   div:not(:last-child):not(.MuiChip-root)":{marginRight:e.spacing(1)}})),JJ=({children:e})=>ze(YJ,{item:!0,xs:12,children:ze(xA,{container:!0,children:e})}),eee=Fi("a")`
  position: absolute;
  display: block;
  height: 20px;
  width: 65px;
  left: 10px;
  bottom: 5px;
  text-indent: -9999px;
  z-index: 9999;
  overflow: hidden;

  background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgODAuNDcgMjAuMDIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDgwLjQ3IDIwLjAyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe29wYWNpdHk6MC42O2ZpbGw6I0ZGRkZGRjtlbmFibGUtYmFja2dyb3VuZDpuZXcgICAgO30uc3Qxe29wYWNpdHk6MC42O2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7fTwvc3R5bGU+PGc+PHBhdGggY2xhc3M9InN0MCIgZD0iTTc5LjI5LDEzLjYxYzAsMC4xMS0wLjA5LDAuMi0wLjIsMC4yaC0xLjUzYy0wLjEyLDAtMC4yMy0wLjA2LTAuMjktMC4xNmwtMS4zNy0yLjI4bC0xLjM3LDIuMjhjLTAuMDYsMC4xLTAuMTcsMC4xNi0wLjI5LDAuMTZoLTEuNTNjLTAuMDQsMC0wLjA4LTAuMDEtMC4xMS0wLjAzYy0wLjA5LTAuMDYtMC4xMi0wLjE4LTAuMDYtMC4yN2MwLDAsMCwwLDAsMGwyLjMxLTMuNWwtMi4yOC0zLjQ3Yy0wLjAyLTAuMDMtMC4wMy0wLjA3LTAuMDMtMC4xMWMwLTAuMTEsMC4wOS0wLjIsMC4yLTAuMmgxLjUzYzAuMTIsMCwwLjIzLDAuMDYsMC4yOSwwLjE2bDEuMzQsMi4yNWwxLjMzLTIuMjRjMC4wNi0wLjEsMC4xNy0wLjE2LDAuMjktMC4xNmgxLjUzYzAuMDQsMCwwLjA4LDAuMDEsMC4xMSwwLjAzYzAuMDksMC4wNiwwLjEyLDAuMTgsMC4wNiwwLjI3YzAsMCwwLDAsMCwwTDc2Ljk2LDEwbDIuMzEsMy41Qzc5LjI4LDEzLjUzLDc5LjI5LDEzLjU3LDc5LjI5LDEzLjYxeiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik02My4wOSw5LjE2Yy0wLjM3LTEuNzktMS44Ny0zLjEyLTMuNjYtMy4xMmMtMC45OCwwLTEuOTMsMC40LTIuNiwxLjEyVjMuMzdjMC0wLjEyLTAuMS0wLjIyLTAuMjItMC4yMmgtMS4zM2MtMC4xMiwwLTAuMjIsMC4xLTAuMjIsMC4yMnYxMC4yMWMwLDAuMTIsMC4xLDAuMjIsMC4yMiwwLjIyaDEuMzNjMC4xMiwwLDAuMjItMC4xLDAuMjItMC4yMnYtMC43YzAuNjgsMC43MSwxLjYyLDEuMTIsMi42LDEuMTJjMS43OSwwLDMuMjktMS4zNCwzLjY2LTMuMTNDNjMuMjEsMTAuMyw2My4yMSw5LjcyLDYzLjA5LDkuMTZMNjMuMDksOS4xNnogTTU5LjEyLDEyLjQxYy0xLjI2LDAtMi4yOC0xLjA2LTIuMy0yLjM2VjkuOTljMC4wMi0xLjMxLDEuMDQtMi4zNiwyLjMtMi4zNnMyLjMsMS4wNywyLjMsMi4zOVM2MC4zOSwxMi40MSw1OS4xMiwxMi40MXoiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjguMjYsNi4wNGMtMS44OS0wLjAxLTMuNTQsMS4yOS0zLjk2LDMuMTNjLTAuMTIsMC41Ni0wLjEyLDEuMTMsMCwxLjY5YzAuNDIsMS44NSwyLjA3LDMuMTYsMy45NywzLjE0YzIuMjQsMCw0LjA2LTEuNzgsNC4wNi0zLjk5UzcwLjUxLDYuMDQsNjguMjYsNi4wNHogTTY4LjI0LDEyLjQyYy0xLjI3LDAtMi4zLTEuMDctMi4zLTIuMzlzMS4wMy0yLjQsMi4zLTIuNHMyLjMsMS4wNywyLjMsMi4zOVM2OS41MSwxMi40MSw2OC4yNCwxMi40Mkw2OC4yNCwxMi40MnoiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNNTkuMTIsNy42M2MtMS4yNiwwLTIuMjgsMS4wNi0yLjMsMi4zNnYwLjA2YzAuMDIsMS4zMSwxLjA0LDIuMzYsMi4zLDIuMzZzMi4zLTEuMDcsMi4zLTIuMzlTNjAuMzksNy42Myw1OS4xMiw3LjYzeiBNNTkuMTIsMTEuMjNjLTAuNiwwLTEuMDktMC41My0xLjExLTEuMTlWMTBjMC4wMS0wLjY2LDAuNTEtMS4xOSwxLjExLTEuMTlzMS4xMSwwLjU0LDEuMTEsMS4yMVM1OS43NCwxMS4yMyw1OS4xMiwxMS4yM3oiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNNjguMjQsNy42M2MtMS4yNywwLTIuMywxLjA3LTIuMywyLjM5czEuMDMsMi4zOSwyLjMsMi4zOXMyLjMtMS4wNywyLjMtMi4zOVM2OS41MSw3LjYzLDY4LjI0LDcuNjN6IE02OC4yNCwxMS4yM2MtMC42MSwwLTEuMTEtMC41NC0xLjExLTEuMjFzMC41LTEuMiwxLjExLTEuMnMxLjExLDAuNTQsMS4xMSwxLjIxUzY4Ljg1LDExLjIzLDY4LjI0LDExLjIzeiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00My41Niw2LjI0aC0xLjMzYy0wLjEyLDAtMC4yMiwwLjEtMC4yMiwwLjIydjAuN2MtMC42OC0wLjcxLTEuNjItMS4xMi0yLjYtMS4xMmMtMi4wNywwLTMuNzUsMS43OC0zLjc1LDMuOTlzMS42OSwzLjk5LDMuNzUsMy45OWMwLjk5LDAsMS45My0wLjQxLDIuNi0xLjEzdjAuN2MwLDAuMTIsMC4xLDAuMjIsMC4yMiwwLjIyaDEuMzNjMC4xMiwwLDAuMjItMC4xLDAuMjItMC4yMlY2LjQ0YzAtMC4xMS0wLjA5LTAuMjEtMC4yMS0wLjIxQzQzLjU3LDYuMjQsNDMuNTcsNi4yNCw0My41Niw2LjI0eiBNNDIuMDIsMTAuMDVjLTAuMDEsMS4zMS0xLjA0LDIuMzYtMi4zLDIuMzZzLTIuMy0xLjA3LTIuMy0yLjM5czEuMDMtMi40LDIuMjktMi40YzEuMjcsMCwyLjI4LDEuMDYsMi4zLDIuMzZMNDIuMDIsMTAuMDV6Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTM5LjcyLDcuNjNjLTEuMjcsMC0yLjMsMS4wNy0yLjMsMi4zOXMxLjAzLDIuMzksMi4zLDIuMzlzMi4yOC0xLjA2LDIuMy0yLjM2VjkuOTlDNDIsOC42OCw0MC45OCw3LjYzLDM5LjcyLDcuNjN6IE0zOC42MiwxMC4wMmMwLTAuNjcsMC41LTEuMjEsMS4xMS0xLjIxYzAuNjEsMCwxLjA5LDAuNTMsMS4xMSwxLjE5djAuMDRjLTAuMDEsMC42NS0wLjUsMS4xOC0xLjExLDEuMThTMzguNjIsMTAuNjgsMzguNjIsMTAuMDJ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTQ5LjkxLDYuMDRjLTAuOTgsMC0xLjkzLDAuNC0yLjYsMS4xMlY2LjQ1YzAtMC4xMi0wLjEtMC4yMi0wLjIyLTAuMjJoLTEuMzNjLTAuMTIsMC0wLjIyLDAuMS0wLjIyLDAuMjJ2MTAuMjFjMCwwLjEyLDAuMSwwLjIyLDAuMjIsMC4yMmgxLjMzYzAuMTIsMCwwLjIyLTAuMSwwLjIyLTAuMjJ2LTMuNzhjMC42OCwwLjcxLDEuNjIsMS4xMiwyLjYxLDEuMTJjMi4wNywwLDMuNzUtMS43OCwzLjc1LTMuOTlTNTEuOTgsNi4wNCw0OS45MSw2LjA0eiBNNDkuNiwxMi40MmMtMS4yNiwwLTIuMjgtMS4wNi0yLjMtMi4zNlY5Ljk5YzAuMDItMS4zMSwxLjA0LTIuMzcsMi4yOS0yLjM3YzEuMjYsMCwyLjMsMS4wNywyLjMsMi4zOVM1MC44NiwxMi40MSw0OS42LDEyLjQyTDQ5LjYsMTIuNDJ6Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTQ5LjYsNy42M2MtMS4yNiwwLTIuMjgsMS4wNi0yLjMsMi4zNnYwLjA2YzAuMDIsMS4zMSwxLjA0LDIuMzYsMi4zLDIuMzZzMi4zLTEuMDcsMi4zLTIuMzlTNTAuODYsNy42Myw0OS42LDcuNjN6IE00OS42LDExLjIzYy0wLjYsMC0xLjA5LTAuNTMtMS4xMS0xLjE5VjEwQzQ4LjUsOS4zNCw0OSw4LjgxLDQ5LjYsOC44MWMwLjYsMCwxLjExLDAuNTUsMS4xMSwxLjIxUzUwLjIxLDExLjIzLDQ5LjYsMTEuMjN6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTM0LjM2LDEzLjU5YzAsMC4xMi0wLjEsMC4yMi0wLjIyLDAuMjJoLTEuMzRjLTAuMTIsMC0wLjIyLTAuMS0wLjIyLTAuMjJWOS4yNGMwLTAuOTMtMC43LTEuNjMtMS41NC0xLjYzYy0wLjc2LDAtMS4zOSwwLjY3LTEuNTEsMS41NGwwLjAxLDQuNDRjMCwwLjEyLTAuMSwwLjIyLTAuMjIsMC4yMmgtMS4zNGMtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY5LjI0YzAtMC45My0wLjctMS42My0xLjU0LTEuNjNjLTAuODEsMC0xLjQ3LDAuNzUtMS41MiwxLjcxdjQuMjdjMCwwLjEyLTAuMSwwLjIyLTAuMjIsMC4yMmgtMS4zM2MtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY2LjQ0YzAuMDEtMC4xMiwwLjEtMC4yMSwwLjIyLTAuMjFoMS4zM2MwLjEyLDAsMC4yMSwwLjEsMC4yMiwwLjIxdjAuNjNjMC40OC0wLjY1LDEuMjQtMS4wNCwyLjA2LTEuMDVoMC4wM2MxLjA0LDAsMS45OSwwLjU3LDIuNDgsMS40OGMwLjQzLTAuOSwxLjMzLTEuNDgsMi4zMi0xLjQ5YzEuNTQsMCwyLjc5LDEuMTksMi43NiwyLjY1TDM0LjM2LDEzLjU5eiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik04MC4zMiwxMi45N2wtMC4wNy0wLjEyTDc4LjM4LDEwbDEuODUtMi44MWMwLjQyLTAuNjQsMC4yNS0xLjQ5LTAuMzktMS45MmMtMC4wMS0wLjAxLTAuMDItMC4wMS0wLjAzLTAuMDJjLTAuMjItMC4xNC0wLjQ4LTAuMjEtMC43NC0wLjIxaC0xLjUzYy0wLjUzLDAtMS4wMywwLjI4LTEuMywwLjc0bC0wLjMyLDAuNTNsLTAuMzItMC41M2MtMC4yOC0wLjQ2LTAuNzctMC43NC0xLjMxLTAuNzRoLTEuNTNjLTAuNTcsMC0xLjA4LDAuMzUtMS4yOSwwLjg4Yy0yLjA5LTEuNTgtNS4wMy0xLjQtNi45MSwwLjQzYy0wLjMzLDAuMzItMC42MiwwLjY5LTAuODUsMS4wOWMtMC44NS0xLjU1LTIuNDUtMi42LTQuMjgtMi42Yy0wLjQ4LDAtMC45NiwwLjA3LTEuNDEsMC4yMlYzLjM3YzAtMC43OC0wLjYzLTEuNDEtMS40LTEuNDFoLTEuMzNjLTAuNzcsMC0xLjQsMC42My0xLjQsMS40djMuNTdjLTAuOS0xLjMtMi4zOC0yLjA4LTMuOTctMi4wOWMtMC43LDAtMS4zOSwwLjE1LTIuMDIsMC40NWMtMC4yMy0wLjE2LTAuNTEtMC4yNS0wLjgtMC4yNWgtMS4zM2MtMC40MywwLTAuODMsMC4yLTEuMSwwLjUzYy0wLjAyLTAuMDMtMC4wNC0wLjA1LTAuMDctMC4wOGMtMC4yNy0wLjI5LTAuNjUtMC40NS0xLjA0LTAuNDVoLTEuMzJjLTAuMjksMC0wLjU3LDAuMDktMC44LDAuMjVDNDAuOCw1LDQwLjEyLDQuODUsMzkuNDIsNC44NWMtMS43NCwwLTMuMjcsMC45NS00LjE2LDIuMzhjLTAuMTktMC40NC0wLjQ2LTAuODUtMC43OS0xLjE5Yy0wLjc2LTAuNzctMS44LTEuMTktMi44OC0xLjE5aC0wLjAxYy0wLjg1LDAuMDEtMS42NywwLjMxLTIuMzQsMC44NGMtMC43LTAuNTQtMS41Ni0wLjg0LTIuNDUtMC44NGgtMC4wM2MtMC4yOCwwLTAuNTUsMC4wMy0wLjgyLDAuMWMtMC4yNywwLjA2LTAuNTMsMC4xNS0wLjc4LDAuMjdjLTAuMi0wLjExLTAuNDMtMC4xNy0wLjY3LTAuMTdoLTEuMzNjLTAuNzgsMC0xLjQsMC42My0xLjQsMS40djcuMTRjMCwwLjc4LDAuNjMsMS40LDEuNCwxLjRoMS4zM2MwLjc4LDAsMS40MS0wLjYzLDEuNDEtMS40MWMwLDAsMCwwLDAsMFY5LjM1YzAuMDMtMC4zNCwwLjIyLTAuNTYsMC4zNC0wLjU2YzAuMTcsMCwwLjM2LDAuMTcsMC4zNiwwLjQ1djQuMzVjMCwwLjc4LDAuNjMsMS40LDEuNCwxLjRoMS4zNGMwLjc4LDAsMS40LTAuNjMsMS40LTEuNGwtMC4wMS00LjM1YzAuMDYtMC4zLDAuMjQtMC40NSwwLjMzLTAuNDVjMC4xNywwLDAuMzYsMC4xNywwLjM2LDAuNDV2NC4zNWMwLDAuNzgsMC42MywxLjQsMS40LDEuNGgxLjM0YzAuNzgsMCwxLjQtMC42MywxLjQtMS40di0wLjM2YzAuOTEsMS4yMywyLjM0LDEuOTYsMy44NywxLjk2YzAuNywwLDEuMzktMC4xNSwyLjAyLTAuNDVjMC4yMywwLjE2LDAuNTEsMC4yNSwwLjgsMC4yNWgxLjMyYzAuMjksMCwwLjU3LTAuMDksMC44LTAuMjV2MS45MWMwLDAuNzgsMC42MywxLjQsMS40LDEuNGgxLjMzYzAuNzgsMCwxLjQtMC42MywxLjQtMS40di0xLjY5YzAuNDYsMC4xNCwwLjk0LDAuMjIsMS40MiwwLjIxYzEuNjIsMCwzLjA3LTAuODMsMy45Ny0yLjF2MC41YzAsMC43OCwwLjYzLDEuNCwxLjQsMS40aDEuMzNjMC4yOSwwLDAuNTctMC4wOSwwLjgtMC4yNWMwLjYzLDAuMywxLjMyLDAuNDUsMi4wMiwwLjQ1YzEuODMsMCwzLjQzLTEuMDUsNC4yOC0yLjZjMS40NywyLjUyLDQuNzEsMy4zNiw3LjIyLDEuODljMC4xNy0wLjEsMC4zNC0wLjIxLDAuNS0wLjM0YzAuMjEsMC41MiwwLjcyLDAuODcsMS4yOSwwLjg2aDEuNTNjMC41MywwLDEuMDMtMC4yOCwxLjMtMC43NGwwLjM1LTAuNThsMC4zNSwwLjU4YzAuMjgsMC40NiwwLjc3LDAuNzQsMS4zMSwwLjc0aDEuNTJjMC43NywwLDEuMzktMC42MywxLjM4LTEuMzlDODAuNDcsMTMuMzgsODAuNDIsMTMuMTcsODAuMzIsMTIuOTdMODAuMzIsMTIuOTd6IE0zNC4xNSwxMy44MWgtMS4zNGMtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY5LjI0YzAtMC45My0wLjctMS42My0xLjU0LTEuNjNjLTAuNzYsMC0xLjM5LDAuNjctMS41MSwxLjU0bDAuMDEsNC40NGMwLDAuMTItMC4xLDAuMjItMC4yMiwwLjIyaC0xLjM0Yy0wLjEyLDAtMC4yMi0wLjEtMC4yMi0wLjIyVjkuMjRjMC0wLjkzLTAuNy0xLjYzLTEuNTQtMS42M2MtMC44MSwwLTEuNDcsMC43NS0xLjUyLDEuNzF2NC4yN2MwLDAuMTItMC4xLDAuMjItMC4yMiwwLjIyaC0xLjMzYy0wLjEyLDAtMC4yMi0wLjEtMC4yMi0wLjIyVjYuNDRjMC4wMS0wLjEyLDAuMS0wLjIxLDAuMjItMC4yMWgxLjMzYzAuMTIsMCwwLjIxLDAuMSwwLjIyLDAuMjF2MC42M2MwLjQ4LTAuNjUsMS4yNC0xLjA0LDIuMDYtMS4wNWgwLjAzYzEuMDQsMCwxLjk5LDAuNTcsMi40OCwxLjQ4YzAuNDMtMC45LDEuMzMtMS40OCwyLjMyLTEuNDljMS41NCwwLDIuNzksMS4xOSwyLjc2LDIuNjVsMC4wMSw0LjkxQzM0LjM3LDEzLjcsMzQuMjcsMTMuOCwzNC4xNSwxMy44MUMzNC4xNSwxMy44MSwzNC4xNSwxMy44MSwzNC4xNSwxMy44MXogTTQzLjc4LDEzLjU5YzAsMC4xMi0wLjEsMC4yMi0wLjIyLDAuMjJoLTEuMzNjLTAuMTIsMC0wLjIyLTAuMS0wLjIyLTAuMjJ2LTAuNzFDNDEuMzQsMTMuNiw0MC40LDE0LDM5LjQyLDE0Yy0yLjA3LDAtMy43NS0xLjc4LTMuNzUtMy45OXMxLjY5LTMuOTksMy43NS0zLjk5YzAuOTgsMCwxLjkyLDAuNDEsMi42LDEuMTJ2LTAuN2MwLTAuMTIsMC4xLTAuMjIsMC4yMi0wLjIyaDEuMzNjMC4xMS0wLjAxLDAuMjEsMC4wOCwwLjIyLDAuMmMwLDAuMDEsMCwwLjAxLDAsMC4wMlYxMy41OXogTTQ5LjkxLDE0Yy0wLjk4LDAtMS45Mi0wLjQxLTIuNi0xLjEydjMuNzhjMCwwLjEyLTAuMSwwLjIyLTAuMjIsMC4yMmgtMS4zM2MtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY2LjQ1YzAtMC4xMiwwLjEtMC4yMSwwLjIyLTAuMjFoMS4zM2MwLjEyLDAsMC4yMiwwLjEsMC4yMiwwLjIydjAuN2MwLjY4LTAuNzIsMS42Mi0xLjEyLDIuNi0xLjEyYzIuMDcsMCwzLjc1LDEuNzcsMy43NSwzLjk4UzUxLjk4LDE0LDQ5LjkxLDE0eiBNNjMuMDksMTAuODdDNjIuNzIsMTIuNjUsNjEuMjIsMTQsNTkuNDMsMTRjLTAuOTgsMC0xLjkyLTAuNDEtMi42LTEuMTJ2MC43YzAsMC4xMi0wLjEsMC4yMi0wLjIyLDAuMjJoLTEuMzNjLTAuMTIsMC0wLjIyLTAuMS0wLjIyLTAuMjJWMy4zN2MwLTAuMTIsMC4xLTAuMjIsMC4yMi0wLjIyaDEuMzNjMC4xMiwwLDAuMjIsMC4xLDAuMjIsMC4yMnYzLjc4YzAuNjgtMC43MSwxLjYyLTEuMTIsMi42LTEuMTFjMS43OSwwLDMuMjksMS4zMywzLjY2LDMuMTJDNjMuMjEsOS43Myw2My4yMSwxMC4zMSw2My4wOSwxMC44N0w2My4wOSwxMC44N0w2My4wOSwxMC44N3ogTTY4LjI2LDE0LjAxYy0xLjksMC4wMS0zLjU1LTEuMjktMy45Ny0zLjE0Yy0wLjEyLTAuNTYtMC4xMi0xLjEzLDAtMS42OWMwLjQyLTEuODUsMi4wNy0zLjE1LDMuOTctMy4xNGMyLjI1LDAsNC4wNiwxLjc4LDQuMDYsMy45OVM3MC41LDE0LjAxLDY4LjI2LDE0LjAxTDY4LjI2LDE0LjAxeiBNNzkuMDksMTMuODFoLTEuNTNjLTAuMTIsMC0wLjIzLTAuMDYtMC4yOS0wLjE2bC0xLjM3LTIuMjhsLTEuMzcsMi4yOGMtMC4wNiwwLjEtMC4xNywwLjE2LTAuMjksMC4xNmgtMS41M2MtMC4wNCwwLTAuMDgtMC4wMS0wLjExLTAuMDNjLTAuMDktMC4wNi0wLjEyLTAuMTgtMC4wNi0wLjI3YzAsMCwwLDAsMCwwbDIuMzEtMy41bC0yLjI4LTMuNDdjLTAuMDItMC4wMy0wLjAzLTAuMDctMC4wMy0wLjExYzAtMC4xMSwwLjA5LTAuMiwwLjItMC4yaDEuNTNjMC4xMiwwLDAuMjMsMC4wNiwwLjI5LDAuMTZsMS4zNCwyLjI1bDEuMzQtMi4yNWMwLjA2LTAuMSwwLjE3LTAuMTYsMC4yOS0wLjE2aDEuNTNjMC4wNCwwLDAuMDgsMC4wMSwwLjExLDAuMDNjMC4wOSwwLjA2LDAuMTIsMC4xOCwwLjA2LDAuMjdjMCwwLDAsMCwwLDBMNzYuOTYsMTBsMi4zMSwzLjVjMC4wMiwwLjAzLDAuMDMsMC4wNywwLjAzLDAuMTFDNzkuMjksMTMuNzIsNzkuMiwxMy44MSw3OS4wOSwxMy44MUM3OS4wOSwxMy44MSw3OS4wOSwxMy44MSw3OS4wOSwxMy44MUw3OS4wOSwxMy44MXoiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTAsMS4yMWMtNC44NywwLTguODEsMy45NS04LjgxLDguODFzMy45NSw4LjgxLDguODEsOC44MXM4LjgxLTMuOTUsOC44MS04LjgxQzE4LjgxLDUuMTUsMTQuODcsMS4yMSwxMCwxLjIxeiBNMTQuMTgsMTIuMTljLTEuODQsMS44NC00LjU1LDIuMi02LjM4LDIuMmMtMC42NywwLTEuMzQtMC4wNS0yLTAuMTVjMCwwLTAuOTctNS4zNywyLjA0LTguMzljMC43OS0wLjc5LDEuODYtMS4yMiwyLjk4LTEuMjJjMS4yMSwwLDIuMzcsMC40OSwzLjIzLDEuMzVDMTUuOCw3LjczLDE1Ljg1LDEwLjUsMTQuMTgsMTIuMTl6Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTEwLDAuMDJjLTUuNTIsMC0xMCw0LjQ4LTEwLDEwczQuNDgsMTAsMTAsMTBzMTAtNC40OCwxMC0xMEMxOS45OSw0LjUsMTUuNTIsMC4wMiwxMCwwLjAyeiBNMTAsMTguODNjLTQuODcsMC04LjgxLTMuOTUtOC44MS04LjgxUzUuMTMsMS4yLDEwLDEuMnM4LjgxLDMuOTUsOC44MSw4LjgxQzE4LjgxLDE0Ljg5LDE0Ljg3LDE4LjgzLDEwLDE4LjgzeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xNC4wNCw1Ljk4Yy0xLjc1LTEuNzUtNC41My0xLjgxLTYuMi0wLjE0QzQuODMsOC44Niw1LjgsMTQuMjMsNS44LDE0LjIzczUuMzcsMC45Nyw4LjM5LTIuMDRDMTUuODUsMTAuNSwxNS44LDcuNzMsMTQuMDQsNS45OHogTTExLjg4LDkuODdsLTAuODcsMS43OGwtMC44Ni0xLjc4TDguMzgsOS4wMWwxLjc3LTAuODZsMC44Ni0xLjc4bDAuODcsMS43OGwxLjc3LDAuODZMMTEuODgsOS44N3oiLz48cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjEzLjY1LDkuMDEgMTEuODgsOS44NyAxMS4wMSwxMS42NSAxMC4xNSw5Ljg3IDguMzgsOS4wMSAxMC4xNSw4LjE1IDExLjAxLDYuMzcgMTEuODgsOC4xNSAiLz48L2c+PC9zdmc+);
  background-repeat: no-repeat;
  background-position: 0 0;
  background-size: 65px 20px;
`,tee=e=>ze(eee,{href:"http://mapbox.com/about/maps",target:"_blank",...e,children:"Mapbox"}),nee=Fi("div")(()=>({position:"absolute",bottom:0,width:"100%",zIndex:999,fontSize:"0.7rem"})),iee=Fi("div")(()=>({background:"rgba(255, 255, 255, 0.7)"})),ree=()=>{const{t:e}=ad();return ze(nee,{children:[ze(tee,{style:{position:"relative"}}),ze(iee,{children:[e("mapDisclaimer"),"Map data ©"," ",ze(OC,{href:"https://www.openstreetmap.org/",children:"OpenStreetMap"})," ","contributors,"," ",ze(OC,{href:"https://creativecommons.org/licenses/by-sa/2.0/",children:"CC-BY-SA"}),", Imagery © ",ze(OC,{href:"https://www.mapbox.com/",children:"Mapbox"})]})]})};function oee(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var FU=oee,see=typeof hu=="object"&&hu&&hu.Object===Object&&hu,aee=see,lee=aee,cee=typeof self=="object"&&self&&self.Object===Object&&self,uee=lee||cee||Function("return this")(),DU=uee,hee=DU,dee=function(){return hee.Date.now()},Aee=dee,fee=/\s/;function pee(e){for(var t=e.length;t--&&fee.test(e.charAt(t)););return t}var mee=pee,gee=mee,_ee=/^\s+/;function yee(e){return e&&e.slice(0,gee(e)+1).replace(_ee,"")}var vee=yee,xee=DU,bee=xee.Symbol,UU=bee,zU=UU,RU=Object.prototype,wee=RU.hasOwnProperty,Cee=RU.toString,Wv=zU?zU.toStringTag:void 0;function Bee(e){var t=wee.call(e,Wv),i=e[Wv];try{e[Wv]=void 0;var r=!0}catch{}var d=Cee.call(e);return r&&(t?e[Wv]=i:delete e[Wv]),d}var Tee=Bee,Eee=Object.prototype,See=Eee.toString;function Iee(e){return See.call(e)}var Mee=Iee,OU=UU,Lee=Tee,kee=Mee,Pee="[object Null]",Fee="[object Undefined]",NU=OU?OU.toStringTag:void 0;function Dee(e){return e==null?e===void 0?Fee:Pee:NU&&NU in Object(e)?Lee(e):kee(e)}var Uee=Dee;function zee(e){return e!=null&&typeof e=="object"}var Ree=zee,Oee=Uee,Nee=Ree,Qee="[object Symbol]";function $ee(e){return typeof e=="symbol"||Nee(e)&&Oee(e)==Qee}var jee=$ee,Hee=vee,QU=FU,Vee=jee,$U=NaN,Gee=/^[-+]0x[0-9a-f]+$/i,Wee=/^0b[01]+$/i,Kee=/^0o[0-7]+$/i,Zee=parseInt;function qee(e){if(typeof e=="number")return e;if(Vee(e))return $U;if(QU(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=QU(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Hee(e);var i=Wee.test(e);return i||Kee.test(e)?Zee(e.slice(2),i?2:8):Gee.test(e)?$U:+e}var Xee=qee,Yee=FU,$T=Aee,jU=Xee,Jee="Expected a function",ete=Math.max,tte=Math.min;function nte(e,t,i){var r,d,f,v,h,s,U=0,$=!1,V=!1,q=!0;if(typeof e!="function")throw new TypeError(Jee);t=jU(t)||0,Yee(i)&&($=!!i.leading,V="maxWait"in i,f=V?ete(jU(i.maxWait)||0,t):f,q="trailing"in i?!!i.trailing:q);function te(Se){var nt=r,xt=d;return r=d=void 0,U=Se,v=e.apply(xt,nt),v}function he(Se){return U=Se,h=setTimeout(ke,t),$?te(Se):v}function Ae(Se){var nt=Se-s,xt=Se-U,Bt=t-nt;return V?tte(Bt,f-xt):Bt}function De(Se){var nt=Se-s,xt=Se-U;return s===void 0||nt>=t||nt<0||V&&xt>=f}function ke(){var Se=$T();if(De(Se))return xe(Se);h=setTimeout(ke,Ae(Se))}function xe(Se){return h=void 0,q&&r?te(Se):(r=d=void 0,v)}function Te(){h!==void 0&&clearTimeout(h),U=0,r=s=d=h=void 0}function Ee(){return h===void 0?v:xe($T())}function Fe(){var Se=$T(),nt=De(Se);if(r=arguments,d=this,s=Se,nt){if(h===void 0)return he(s);if(V)return clearTimeout(h),h=setTimeout(ke,t),te(s)}return h===void 0&&(h=setTimeout(ke,t)),v}return Fe.cancel=Te,Fe.flush=Ee,Fe}var ite=nte;const rte=Sm(ite),ote=Fi(rk)(({theme:e})=>({marginRight:e.spacing(2),color:e.palette.text.primary,minWidth:300,minHeight:41})),O_=({onChange:e,id:t,callback:i,label:r,placeholder:d,size:f="medium",style:v,value:h,getOptionLabel:s,loadOnOpen:U=!1,fullWidth:$=!1,variant:V="outlined",renderOption:q,multiple:te,noOptionsText:he,loading:Ae,showLoadingOnClose:De=!1,resetTextInput:ke})=>{const{t:xe}=ad(),[Te,Ee]=ur([]),[Fe,Se]=ur(!1),nt=rte(xs(async Ut=>{try{if(Ut||Ut===""){const Kt=await i(Ut);Ee(Kt)}}catch(Kt){console.error(Kt)}},[i]),400),xt=xs(async()=>{if(Xe(!0),U){Se(!0);const Ut=await i("");Ee(Ut),Se(!1)}},[i,U]);$i(()=>{h===null&&Ee([])},[h]);const[Bt,Xe]=ur(!1),[qt,rn]=ur(!!(te&&h&&Array.isArray(h)&&h.length||!te&&h));return $i(()=>{const Ut=!!(te&&h&&Array.isArray(h)&&h.length||!te&&h);rn(Ut)},[h,te,rn]),ze(ote,{noOptionsText:Fe||Ae?"Loading...":he||xe("noFilter"),id:t,fullWidth:$,onOpen:xt,onClose:()=>Xe(!1),multiple:te,options:Te,size:f,filterOptions:Ut=>Ut,isOptionEqualToValue:(Ut,Kt)=>Ut.id&&Ut.id===Kt.id||Ut.value&&Ut.value===Kt.value,onChange:(Ut,Kt)=>(rn(te?!!(Array.isArray(Kt)&&Kt.length):!!Kt),e?e(Ut,Kt):void 0),value:h,onInputChange:(Ut,Kt)=>{nt(Kt)},style:v,getOptionLabel:Ut=>s(Ut),renderInput:Ut=>{var Kt;return ze(RJ,{...Ut,label:r,placeholder:d,variant:V,size:"small",...ke?{inputProps:{...Ut.inputProps,value:""}}:{},InputProps:{...Ut.InputProps,endAdornment:ze(vs,{children:[(Fe||Ae)&&(Bt||De)&&ze("div",{...qt?{}:{style:{paddingRight:"2.25em"}},children:ze(tv,{color:"inherit",size:20})}),(Kt=Ut.InputProps)==null?void 0:Kt.endAdornment]})}})},renderOption:q})},ste=({countryIds:e,locationIds:t,setFilters:i})=>{const{t:r}=ad(),d=xs(async f=>{try{return(await U1({countryIds:e,q:f,exclude:["planEntities","premises","planEntityCells","country","parent","children"],adminLevels:[0]})).results.filter(s=>t?t.includes(s.id):s).sort((s,U)=>s.name.localeCompare(U.name))}catch(v){return console.error(v),[]}},[e]);return ze(O_,{multiple:!0,label:r("Location"),size:"small",callback:d,loadOnOpen:!0,id:"location-filter",getOptionLabel:f=>f.name,renderOption:(f,v)=>ze("li",{...f,children:ze("div",{children:v.name})}),onChange:(f,v)=>{i(h=>({...h,locationIds:v&&Array.isArray(v)&&v.length?v.map(s=>s.id):t||void 0}))}})},ate=({parentIds:e,resetToParentIds:t=!0,adminLevel:i=1,setFilters:r,resetTextInput:d})=>{const{t:f}=ad(),v=xs(async h=>{try{return(await U1({parentIds:e,q:h,exclude:["planEntities","premises","planEntityCells","country","parent","children"]})).results.sort(($,V)=>$.name.localeCompare(V.name))}catch(s){return console.error(s),[]}},[e]);return ze(O_,{multiple:!0,resetTextInput:d,label:f("Location"),size:"small",callback:v,loadOnOpen:!0,id:"location-filter",getOptionLabel:h=>h.name,renderOption:(h,s)=>ze("li",{...h,children:ze("div",{children:s.name})}),onChange:(h,s)=>{r(U=>({...U,selectedAdminLevel:s?i:i-1,locationIds:s&&Array.isArray(s)&&s.length?s.map($=>$.id):t?e:void 0}))}})},lte=()=>{const[e,t]=ur(!1),i=Xw(),r=Pi(null);return $i(()=>(!e&&i.current&&(r.current=new IntersectionObserver(([d])=>{var f;d.isIntersecting&&(t(!0),(f=r.current)==null||f.disconnect())}),r.current.observe(i.current)),()=>{var d;(d=r.current)==null||d.disconnect()}),[i,e]),{containerRef:i,isDisplayed:e}},cte=()=>ze("div",{style:{position:"absolute",bottom:0,left:0,marginBottom:"1.9rem"},children:ze("a",{href:"https://www.maptiler.com/",target:"_blank",rel:"noreferrer",children:ze("img",{src:"https://api.maptiler.com/resources/logo.svg",alt:"MapTiler",width:"80",height:"20"})})}),HU=({workspaceId:e,workspaceIds:t,planId:i,planIds:r,entityPrototypeId:d})=>{const[f,v]=ur([]),[h,s]=ur([]);return $i(()=>{(async()=>{try{if(e||t){const $=await V0({workspaceIds:e?[e]:[],...t?{workspaceIds:t}:{},...i?{planIds:[i]}:{},...r?{planIds:r}:{},entityPrototypeId:d,includeChildren:!0});v($),s($.map(V=>({value:V.id,label:V.planEntityVersion.name})))}}catch($){console.error($)}})()},[e,i,t,r]),{planEntitiesAsValueLabel:h,planEntities:f}},jT=(e,t)=>Kr.sortBy(Kr.uniqBy(e.reduce((i,r)=>{var f;const d=((f=r.organizations)==null?void 0:f.filter(v=>{var h;return((h=v.planEntityOrganization)==null?void 0:h.type)===t}))??[];return[...i,...d]},[]),"id").map(i=>({value:i.id,label:(i.abbreviation?`(${i.abbreviation}) `:"")+i.name})),"label"),ute=({workspaceId:e})=>{const[t,i]=ur([]),[r,d]=ur([]),[f,v]=ur([]);return $i(()=>{(async()=>{if(e){const s=await V0({workspaceIds:[e]}),U=jT(s,"agency");i(U);const $=jT(s,"contributingPartner");d($);const V=jT(s,"implementingPartner");v(V)}})()},[e]),{agencies:t,contributingPartners:r,implementingPartners:f}},VU=e=>({agency:"unAgencyIds",contributingPartner:"contributingPartnerIds",implementingPartner:"implementingPartnerIds"})[e],hte=e=>({agency:{contributingPartnerIds:void 0,implementingPartnerIds:void 0},contributingPartner:{unAgencyIds:void 0,implementingPartnerIds:void 0},implementingPartner:{unAgencyIds:void 0,contributingPartnerIds:void 0}})[e],HT=({workspaceId:e,setFilters:t,filters:i,options:r,label:d,type:f,resetOnChange:v=!1})=>{const{t:h}=ad(),{contributingPartners:s,agencies:U,implementingPartners:$}=ute({workspaceId:r?void 0:e}),V=tl(()=>r?r.map(te=>({...te,id:te.value})):f==="contributingPartner"?s.map(te=>({...te,id:te.value})):f==="agency"?U.map(te=>({...te,id:te.value})):f==="implementingPartner"?$.map(te=>({...te,id:te.value})):[],[f,s,U,$,r]),q=xs(async te=>{try{return V.filter(he=>!te||he.label.toLowerCase().includes(te.toLowerCase()))}catch(he){return console.error(he),[]}},[V]);return ze(O_,{value:V==null?void 0:V.filter(te=>((i==null?void 0:i[VU(f)])??[]).includes(te.value)),label:h(d),size:"small",callback:q,id:"parent-filter",loadOnOpen:!0,multiple:!0,getOptionLabel:te=>te.label,onChange:(te,he)=>{he&&Array.isArray(he)&&t(Ae=>({...Ae,[VU(f)]:he.map(De=>De.value),...v?hte(f):{}}))}})},dte=({setFilters:e,options:t})=>{const{t:i}=ad(),r=xs(async d=>{try{return t.map(f=>({...f,id:f.value})).filter(f=>!d||`${f.value} ${i(f.label)}`.toLowerCase().includes(d.toLowerCase()))}catch(f){return console.error(f),[]}},[t]);return ze(O_,{label:i("sustainableDevelopmentGoals"),callback:r,id:"status-filter",size:"small",loadOnOpen:!0,multiple:!0,getOptionLabel:d=>`${d.value} ${i(d.label)}`,onChange:(d,f)=>{f&&Array.isArray(f)&&e(v=>({...v,sdgGoalIds:f.map(h=>h.id)}))}})},Ate=e=>({sp:WI,outcome:XO,output:ZO})[e],fte=e=>({sp:"strategicPriorities",outcome:"outcomes",output:"outputs"})[e],GU=e=>({sp:"spIds",outcome:"outcomeIds",output:"outputIds"})[e],WU=({workspaceId:e,setFilters:t,filters:i,type:r})=>{const{t:d}=ad(),{planEntities:f}=HU({workspaceId:e,entityPrototypeId:Ate(r)}),v=tl(()=>f.map(s=>{var U;return{id:s.id,parentId:s.parentId,parentParentId:(U=s.parent)==null?void 0:U.parentId,value:s.id,label:s.planEntityVersion.name}}).filter(s=>!(r==="outcome"&&s.parentId&&i.spIds&&i.spIds.length&&!i.spIds.includes(s.parentId)||r==="output"&&(s.parentId&&i.outcomeIds&&i.outcomeIds.length&&!i.outcomeIds.includes(s.parentId)||s.parentParentId&&i.spIds&&i.spIds.length&&!i.spIds.includes(s.parentParentId)))),[f,i,r]),h=xs(async s=>{try{return v.filter(U=>!s||U.label.toLowerCase().includes(s.toLowerCase()))}catch(U){return console.error(U),[]}},[v]);return ze(O_,{value:v==null?void 0:v.filter(s=>((i==null?void 0:i[GU(r)])??[]).includes(s.value)),label:d(fte(r)),size:"small",callback:h,id:"parent-filter",loadOnOpen:!0,multiple:!0,getOptionLabel:s=>s.label,onChange:(s,U)=>{U&&Array.isArray(U)&&t($=>({...$,parentIds:U.map(V=>V.value),[GU(r)]:U.map(V=>V.value),...r==="sp"?{outcomeIds:void 0,outputIds:void 0}:{},...r==="outcome"?{outputIds:void 0}:{}}))}})},pte=({setFilters:e})=>{const{t}=ad(),i=xs(async r=>{try{return(await i4(r)).results.filter(f=>!r||f.dataitemVersion.name.toLowerCase().includes(r.toLowerCase()))}catch(d){return console.error(d),[]}},[]);return ze(O_,{label:t("Status"),size:"small",callback:i,id:"status-filter",loadOnOpen:!0,multiple:!0,getOptionLabel:r=>r.dataitemVersion.name,onChange:(r,d)=>{d&&Array.isArray(d)&&e(f=>({...f,dataitemIds:d.map(v=>v.id)}))}})},KU=e=>{const t=e.map(d=>d.longitude).filter(d=>typeof d=="number"),i=e.map(d=>d.latitude).filter(d=>typeof d=="number");return[[Math.min(...t),Math.min(...i)],[Math.max(...t),Math.max(...i)]]},mte=Fi(FR)(({theme:e})=>({"& .leaflet-popup-content p":{margin:"inherit"},"& .leaflet-popup-content":{marginRight:e.spacing(1)},"& .leaflet-popup-close-button":{border:`1px solid ${e.palette.grey[500]} !important`,width:"1.75rem !important",height:"1.6rem !important",color:`${e.palette.grey[500]} !important`,borderRadius:"100% !important",marginRight:"6px !important",marginTop:"6px !important",background:`${e.palette.grey[100]} !important`,padding:"4px !important"},"& .leaflet-marker-icon":{background:ho(e.palette.primary.light,.6),borderRadius:"100%",backgroundClip:"content-box !important",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",color:e.palette.secondary.main},"& .marker-cluster-custom":{background:ho(e.palette.primary.light,.9),borderRadius:"100%",border:`5px solid ${ho(e.palette.primary.light,.6)}`,"&.adminLevel0":{border:`5px solid ${ho(e.palette.orange.main,.6)}`}},"& .adminLevel0":{background:e.palette.orange.main}})),gte=Fi(yO)(({theme:e})=>({"& .marker-cluster-individual-adminLevel0":{background:i_(e.palette.primary.main,.2),backgroundColor:i_(e.palette.primary.main,.2)},"& .marker-cluster-custom":{background:ho(e.palette.primary.light,.9),borderRadius:"100%",border:`5px solid ${ho(e.palette.primary.light,.6)}`}})),VT=Fi(zJ)({"z-index":9999}),_te=`${Dd}/plan/public/entities/search`,yte=252,vte=[16.5,-71],{MAPPING_LIBRARY:N_,API_MAPBOX:xte,MAPGL_CONFIG:ZU}=GJ();N_===N0&&(ZU.mapLib=BO);const bw=6,qU=3,Kv=9,bte=7,wte=Xm(()=>({logo:{"& .mapboxgl-ctrl-logo":{marginBottom:"1.7rem !important"},"& .leaflet-control-attribution a:first-of-type":{display:"none"}}})),Cte=({centroid:e,locations:t,children:i,...r})=>{const d=kR();return $i(()=>{const f=gA.latLngBounds([]);f.extend(e);for(const v of t)v.latitude&&v.longitude&&f.extend([v.latitude,v.longitude]);d.fitBounds(f,{maxZoom:bte,padding:[10,10]})},[]),ze(RI,{...r,children:i})},Bte=({workspaceId:e,defaultFilters:t,defaultFilterSelections:i,hideFilters:r,hideShare:d})=>{var pr,Zr,Eo,Ao,$t,en,Fr,So,er,xi,Xi;const{t:f,i18n:v}=ad(),h=wte(),[s,U]=ur(!0),[$,V]=ur(!0),[q,te]=ur(!1),[he,Ae]=ur(void 0),[De,ke]=ur([]),[xe,Te]=ur(),[Ee,Fe]=ur(null),[Se,nt]=ur([]),[xt,Bt]=ur([]),[Xe,qt]=ur([]),{isDisplayed:rn,containerRef:Ut}=lte(),{state:Kt}=Uz(),{planAccessLevel:On,planOverrideId:Gt}=Kt,[Rn,mn]=ur([]),{planEntities:Cn}=HU({workspaceId:e,entityPrototypeId:WI}),[Qt,Xn]=ur({...t,...i,dataitemIds:void 0,parentIds:void 0}),[Wn,Bi]=ur(null),Bn=Pi(null),Hn=t==null?void 0:t.goalId,ei=t==null?void 0:t.locationIds,tr=lX(e),ri=Se.length>1&&((pr=Qt==null?void 0:Qt.locationIds)==null?void 0:pr.length)===1?Se.filter(Op(Qt.locationIds)).map(Un=>[Un.latitude,Un.longitude])[0]:he;$i(()=>{Bi(null)},[Qt]),$i(()=>{var Un,Oi,bn,bi,fi,ot;if(Wn&&(Bn!=null&&Bn.current)){const Ie=Wn.y,Ce=((Oi=(Un=Wn==null?void 0:Wn.feature)==null?void 0:Un.properties)==null?void 0:Oi.adminLevel)===0,st=300,zt=100+(Ce?50:0);let Rt=0;if(Ie>=st&&Ie<st+zt?Rt=zt:Ie>st-zt&&Ie<=st&&(Rt=-zt),Rt){const yt=(bn=Bn==null?void 0:Bn.current)==null?void 0:bn.getCenter(),Xt=(bi=Bn==null?void 0:Bn.current)==null?void 0:bi.project(yt),Tn=new DI.Point(Xt.x,Xt.y-Rt),Fn=(fi=Bn==null?void 0:Bn.current)==null?void 0:fi.unproject(Tn);(ot=Bn==null?void 0:Bn.current)==null||ot.setCenter(Fn)}}},[Wn]),$i(()=>{var Oi;let Un=null;if(Qt!=null&&Qt.locationIds){const bn=De.filter(bi=>bi.latitude&&bi.longitude).filter(Op(Qt==null?void 0:Qt.locationIds));Un=KU(bn)}xe&&((Oi=Bn==null?void 0:Bn.current)==null||Oi.fitBounds(Un??xe,{maxZoom:bw,padding:100}))},[xe,Qt]);const zi=()=>{var Un;xe&&((Un=Bn==null?void 0:Bn.current)==null||Un.fitBounds(xe,{maxZoom:bw,padding:100,duration:0}))};$i(()=>{(async()=>{var Oi;try{U(!0);const bn=await D1({type:"yearly"}),bi=await D1({type:"fiscalYear"});mn([...bn.results,...bi.results]);const fi=await e4(e);if(Fe(fi),fi.countries){const{results:ot}=await U1({countryIds:fi.countries.map(yt=>yt.id),adminLevels:[0],exclude:["children","planEntities","planEntityCells","premises","compounds"]}),Ie=ot.filter(Op(ei));nt(Ie);const Ce=Ie.filter(yt=>yt.latitude&&yt.longitude);if(fi.id===yte)Ae(vte);else if(Ce.length>1){const yt=Ce.map(Fn=>[Fn.latitude,Fn.longitude]),Tn=gA.latLngBounds(yt).getCenter();Ae([Tn.lat,Tn.lng])}else Ce.length&&Ae([Ce[0].latitude,Ce[0].longitude]);const st=[];(Oi=Qt.locationIds)!=null&&Oi.length&&st.push({"locations.id":Qt.locationIds});const ft=await V0({workspaceIds:[e],planEntityOptions:st});qt(ZJ(ft));const kt=WJ(KJ(ft.filter(Ym(Qt==null?void 0:Qt.locationIds)),ei));ke(kt);const zt=kt.filter(yt=>yt.longitude&&yt.latitude),Rt=KU(zt);Te(Rt)}}catch(bn){console.error("e",bn)}finally{U(!1),te(!0)}})()},[On,Gt,ei,Qt.locationIds,e]),$i(()=>{(async()=>{var Oi,bn,bi,fi,ot,Ie,Ce,st;if(Qt)try{V(!0);const ft=[];Qt.year&&(ft.push({"planEntityVersion.startDate":{$lte:`${Qt.year}-12-31`}}),ft.push({"planEntityVersion.endDate":{$gte:`${Qt.year}-01-01`}})),(Oi=Qt.unAgencyIds)!=null&&Oi.length&&ft.push({"agencies.id":Qt.unAgencyIds}),(bn=Qt.contributingPartnerIds)!=null&&bn.length&&ft.push({"contributingPartners.id":Qt.contributingPartnerIds}),(bi=Qt.implementingPartnerIds)!=null&&bi.length&&ft.push({"implementingPartners.id":Qt.implementingPartnerIds}),ei&&ft.push({"locations.id":ei}),Hn&&typeof+Hn=="number"?ft.push({"planEntitySdgs.goalId":[+Hn]}):(fi=Qt.sdgGoalIds)!=null&&fi.length&&ft.push({"planEntitySdgs.goalId":Qt.sdgGoalIds}),(ot=Qt.dataitemIds)!=null&&ot.length&&(ft.push({"dataitems.datasourceId":YO}),ft.push({"dataitems.id":Qt.dataitemIds}));let kt=await V0({workspaceIds:[e],planEntityOptions:ft});(Ie=Qt.parentIds)!=null&&Ie.length&&((Ce=Qt.spIds)!=null&&Ce.length||(st=Qt.outcomeIds)!=null&&st.length)&&(kt=kt.filter(zt=>{var Rt;if(!((Rt=zt.parent)!=null&&Rt.parentId))return!1;if(Qt.spIds&&Qt.spIds.length)return Cn.filter(Xt=>{var Tn;return((Tn=Qt.spIds)==null?void 0:Tn.indexOf(Xt.id))!==-1}).flatMap(Xt=>Xt.children.map(Tn=>Tn.id)).includes(zt.parent.parentId);if(Qt.outcomeIds&&Qt.outcomeIds.length)return Qt.outcomeIds.indexOf(zt.parent.parentId)!==-1})),Bt(kt.sort(sX))}catch(ft){console.error(ft)}finally{V(!1)}})()},[On,Qt,e,Hn,ei]);const Vr=xs(Un=>{let Oi=Un;if(Un){const bn=Rn.find(bi=>bi.id===+Un);bn&&(Oi=bn.startDate.split("-")[0])}Xn(bn=>({...bn,year:Oi?+Oi:void 0}))},[Rn]);if(typeof window>"u")return null;const sr=XJ(xt),li=Un=>{var bi,fi;const Oi=Un.features[0],bn=(bi=Oi==null?void 0:Oi.properties)==null?void 0:bi.cluster_id;if(bn)((fi=Bn==null?void 0:Bn.current)==null?void 0:fi.getSource("subLocations")).getClusterExpansionZoom(bn,(Ie,Ce)=>{var st;Ie||(st=Bn==null?void 0:Bn.current)==null||st.easeTo({center:Oi.geometry.coordinates,zoom:Ce,duration:500})});else{const{features:ot,point:{x:Ie,y:Ce},lngLat:st}=Un,ft=ot&&ot[0];Bi(ft&&{feature:ft,x:Ie,y:Ce,lngLat:st})}},Qi=De.filter(Un=>Un.longitude&&Un.latitude).filter(Op(Qt.locationIds)).map(Un=>{const Oi=xt.filter(Ym(Qt==null?void 0:Qt.locationIds)).filter(bn=>{var bi;return Un.adminLevel===0?!1:(bi=QT(bn,Qt==null?void 0:Qt.locationIds).locations)==null?void 0:bi.find(fi=>Un.id===fi.id)});return{...Un,locationEntityIds:Oi.map(bn=>bn.id),locationEntitiesCount:Oi.length}}).filter(Un=>Un.locationEntitiesCount),di={type:"FeatureCollection",features:PU(Qi).map(Un=>({type:"Feature",properties:{...Un},geometry:{type:"Point",coordinates:[Un.longitude,Un.latitude]}}))},Ir=De.filter(Un=>Un.longitude&&Un.latitude).filter(Op(Qt.locationIds)).map(Un=>{const Oi=xt.filter(Ym(Qt==null?void 0:Qt.locationIds)).filter(bn=>{var bi,fi,ot;return Un.adminLevel===0?((bi=bn.locations)==null?void 0:bi.find(Ce=>Ce.adminLevel===0))&&!((fi=bn.locations)!=null&&fi.find(Ce=>Ce.adminLevel!==0))&&((ot=bn.locations)==null?void 0:ot.find(Ce=>Un.id===Ce.id)):!1});return{...Un,locationEntityIds:Oi.map(bn=>bn.id),locationEntitiesCount:Oi.length}}).filter(Un=>Un.locationEntitiesCount),hr={type:"FeatureCollection",features:PU(Ir).map(Un=>({type:"Feature",properties:{...Un},geometry:{type:"Point",coordinates:[Un.longitude,Un.latitude]}}))};let ir=!1,Ur=null;if(Se.length>1&&ri){const Un=xt.filter(bn=>{var fi;return(((fi=bn.locations)==null?void 0:fi.filter(ot=>ot.adminLevel===0).length)??0)>1}).filter(Ym(Qt.locationIds)),Oi=(Zr=Qt==null?void 0:Qt.locationIds)!=null&&Zr.length?.5:0;Ur=(Eo=Se.filter(Op(Qt.locationIds)).slice(0,1).map((bn,bi)=>({type:"Feature",properties:{...bn,id:bi,name:(Ee==null?void 0:Ee.name)??"",locationEntityIds:Un.map(fi=>fi.id),locationEntitiesCount:Un.length},geometry:{type:"Point",coordinates:[ri[1]+Oi,ri[0]+Oi]}})))==null?void 0:Eo[0],ir=!(Qt!=null&&Qt.locationIds)||((Ao=Qt==null?void 0:Qt.locationIds)==null?void 0:Ao.length)>1}const jr=($t=Wn==null?void 0:Wn.feature)!=null&&$t.properties.locationEntityIds?JSON.parse((en=Wn==null?void 0:Wn.feature)==null?void 0:en.properties.locationEntityIds):[];return ze(N6,{gridRef:Ut,children:[ze("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.css"}),ze("link",{href:"https://api.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.css",rel:"stylesheet"}),ze(IX,{title:f("whereWeWorkMap.title",{countryName:Ee==null?void 0:Ee.name}),subTitle:ze(aI,{i18nKey:"whereWeWorkMap.subTitle",values:{keyActivities:QD(v.language,xt.filter(Ym(Qt==null?void 0:Qt.locationIds)).length)}}),disclaimer:ze(aI,{i18nKey:"whereWeWorkMap.activityDisclaimer",values:{keyActivities:QD(v.language,xt.filter(Ym(Qt==null?void 0:Qt.locationIds)).length)}}),url:_te,widgetKey:"whereWeWorkMap",exportProperties:d?void 0:{embed:!0,chartId:"whereWeWorkMap",csv:!0,csvProperties:{columns:[{label:"Admin level 1",key:"adminLevel1"},{label:"Admin level 1 Lat / Lon",key:"adminLevel1LatLon"},{label:"Admin level 2",key:"adminLevel2"},{label:"Admin level 2 Lat / Lon",key:"adminLevel2LatLon"},{label:"Admin level 3",key:"adminLevel3"},{label:"Admin level 3 Lat / Lon",key:"adminLevel3LatLon"},{label:"Number of suboutputs",key:"numberOfSuboutputs"}],data:sr}},variables:{workspaceId:e,defaultFilters:t,defaultFilterSelections:i}}),!r&&ze(JJ,{children:[e&&ze(VJ,{workspaceId:e,defaultYear:i==null?void 0:i.year,onChange:Vr}),Se.length>1&&ze(ste,{countryIds:(Ee==null?void 0:Ee.countries.map(Un=>Un.id))??[],setFilters:Xn,locationIds:t==null?void 0:t.locationIds}),tr&&ze(ate,{parentIds:Se.map(Un=>Un.id)??[],resetToParentIds:!!(t!=null&&t.locationIds),setFilters:Xn,adminLevel:1}),ze(WU,{type:"sp",filters:Qt,setFilters:Xn,workspaceId:e}),ze(WU,{type:"outcome",filters:Qt,setFilters:Xn,workspaceId:e}),ze(HT,{type:"contributingPartner",workspaceId:e,label:"contributingPartners",filters:Qt,setFilters:Xn}),ze(HT,{type:"agency",workspaceId:e,label:"whereWeWorkMap.agency",filters:Qt,setFilters:Xn}),ze(HT,{type:"implementingPartner",workspaceId:e,label:"implementingPartners",filters:Qt,setFilters:Xn}),ze(pte,{setFilters:Xn}),!Hn&&ze(dte,{options:Xe,setFilters:Xn})]}),(!rn||!q||s&&N_===uI)&&ze(VT,{}),rn&&q&&ze(LX,{xs:12,className:h.logo,children:[(N_===x1||N_===N0)&&(ri==null?void 0:ri[0])&&(ri==null?void 0:ri[1])&&ze(gte,{initialViewState:{longitude:ri==null?void 0:ri[1],latitude:ri==null?void 0:ri[0],zoom:bw},minZoom:qU,maxZoom:Kv+1,style:{width:"100%",height:600},interactiveLayerIds:Se.length>1?["unclustered-point","multicountry-point","clusters","country-unclustered-point","country-clusters"]:["unclustered-point","clusters","country-unclustered-point","country-clusters"],onClick:li,onLoad:zi,ref:Bn,attributionControl:!1,...ZU,children:[($||s)&&ze(VT,{}),ze(xO,{customAttribution:f("mapDisclaimer"),style:{fontSize:"0.7rem",lineHeight:"1rem"}}),N_===N0&&ze(cte,{}),ze(bO,{position:"top-left"}),ze(k1,{id:"subLocations",type:"geojson",data:di,cluster:!0,clusterMaxZoom:Kv,clusterRadius:50,clusterProperties:{hasAdmin0Level:["any",["==",["get","adminLevel"],0]],locationCount:["+",["get","locationEntitiesCount"]],locationIdCount:["+",["length",["get","locationEntityIds"]]],locationEntityIdArray:["concat",["concat",["get","locationEntityIds"],","]]}}),ze(k1,{id:"countryLocations",type:"geojson",data:hr,cluster:!0,clusterMaxZoom:Kv,clusterRadius:50,clusterProperties:{hasAdmin0Level:["any",["==",["get","adminLevel"],0]],locationCount:["+",["get","locationEntitiesCount"]],locationIdCount:["+",["length",["get","locationEntityIds"]]],locationEntityIdArray:["concat",["concat",["get","locationEntityIds"],","]]}}),Se.length>1&&ze(k1,{id:"multicountryMarker",type:"geojson",data:Ur,clusterMaxZoom:Kv}),ze(XA,{id:"clusters",type:"circle",source:"subLocations",filter:[">",["get","locationIdCount"],0],paint:{"circle-color":["case",["==",["get","hasAdmin0Level"],!0],ho(Fa.palette.primary.dark,1),ho(Fa.palette.primary.light,.9)],"circle-stroke-width":5,"circle-stroke-color":["case",["==",["get","hasAdmin0Level"],!0],ho(Fa.palette.primary.dark,.7),ho(Fa.palette.primary.light,.6)],"circle-radius":["step",["get","locationIdCount"],18,1e3,30,2500,40]}}),ze(XA,{id:"cluster-count",type:"symbol",source:"subLocations",filter:[">",["get","locationIdCount"],0],paint:{"text-color":"#ffffff"},layout:{"text-field":["number-format",["get","locationIdCount"],{"min-fraction-digits":0,"max-fraction-digits":0}],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),ze(XA,{id:"unclustered-point",type:"circle",source:"subLocations",filter:[">",["get","locationEntitiesCount"],0],paint:{"circle-color":["case",["==",["get","adminLevel"],0],ho(Fa.palette.orange.main,.9),ho(Fa.palette.primary.light,.6)],"circle-radius":15,"circle-stroke-width":1,"circle-stroke-color":["case",["==",["get","adminLevel"],0],ho(Fa.palette.orange.main,.9),ho(Fa.palette.primary.light,.6)]}}),ze(XA,{id:"unclustered-count",type:"symbol",source:"subLocations",filter:[">",["get","locationEntitiesCount"],0],paint:{"text-color":"#ffffff"},layout:{"text-field":["number-format",["get","locationEntitiesCount"],{"min-fraction-digits":0,"max-fraction-digits":0}],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),ze(XA,{id:"country-clusters",type:"circle",source:"countryLocations",filter:[">",["get","locationIdCount"],0],paint:{"circle-color":["case",["==",["get","hasAdmin0Level"],!0],ho(Fa.palette.orange.main,.9),ho(Fa.palette.primary.light,.9)],"circle-stroke-width":5,"circle-stroke-color":["case",["==",["get","hasAdmin0Level"],!0],ho(Fa.palette.orange.main,.6),ho(Fa.palette.primary.light,.6)],"circle-radius":["step",["get","locationIdCount"],23,1e3,30,2500,40]}}),ze(XA,{id:"country-cluster-count",type:"symbol",source:"countryLocations",filter:[">",["get","locationIdCount"],0],paint:{"text-color":"#ffffff"},layout:{"text-field":["number-format",["get","locationIdCount"],{"min-fraction-digits":0,"max-fraction-digits":0}],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),ze(XA,{id:"country-unclustered-point",type:"circle",source:"countryLocations",filter:[">",["get","locationEntitiesCount"],0],paint:{"circle-color":["case",["==",["get","adminLevel"],0],ho(Fa.palette.orange.main,.9),ho(Fa.palette.primary.light,.6)],"circle-radius":23,"circle-stroke-width":1,"circle-stroke-color":["case",["==",["get","adminLevel"],0],ho(Fa.palette.orange.main,.9),ho(Fa.palette.primary.light,.6)]}}),ze(XA,{id:"country-unclustered-count",type:"symbol",source:"countryLocations",filter:[">",["get","locationEntitiesCount"],0],paint:{"text-color":"#ffffff"},layout:{"text-field":["number-format",["get","locationEntitiesCount"],{"min-fraction-digits":0,"max-fraction-digits":0}],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),Se.length>1&&ir&&ze(XA,{id:"multicountry-point",type:"circle",source:"multicountryMarker",filter:[">",["get","locationEntitiesCount"],0],paint:{"circle-color":["case",["==",["get","adminLevel"],0],ho(Fa.palette.orange.main,.9),ho(Fa.palette.primary.light,.6)],"circle-radius":23,"circle-stroke-width":1,"circle-stroke-color":["case",["==",["get","adminLevel"],0],ho(Fa.palette.orange.main,.9),ho(Fa.palette.primary.light,.6)]}}),Se.length>1&&ir&&ze(XA,{id:"multicountry-count",type:"symbol",source:"multicountryMarker",filter:[">",["get","locationEntitiesCount"],0],paint:{"text-color":"#ffffff"},layout:{"text-field":["number-format",["get","locationEntitiesCount"],{"min-fraction-digits":0,"max-fraction-digits":0}],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),Wn&&ze(vO,{longitude:(Fr=Wn==null?void 0:Wn.lngLat)==null?void 0:Fr.lng,latitude:(So=Wn==null?void 0:Wn.lngLat)==null?void 0:So.lat,onClose:Un=>{Bi(null)},style:{minWidth:500},closeOnClick:!1,children:ze(jJ,{loc:(er=Wn==null?void 0:Wn.feature)==null?void 0:er.properties,alertScope:((xi=Wn==null?void 0:Wn.feature)==null?void 0:xi.source)==="multicountryMarker"?"multicountry":"nationally",activities:xt.filter(Un=>jr.includes(Un.id))},(Xi=Wn==null?void 0:Wn.feature)==null?void 0:Xi.properties.id)})]}),N_===uI&&!s&&(ri==null?void 0:ri[0])&&(ri==null?void 0:ri[1])&&ze(mte,{center:ri,zoom:bw,minZoom:qU,maxZoom:Kv,style:{height:"600px",overflow:"hidden"},scrollWheelZoom:!1,children:[$&&ze(VT,{}),ze(ree,{}),ze(zR,{url:xte}),!$&&ze(Cte,{centroid:ri,locations:De.filter(Un=>Un.latitude&&Un.longitude).filter(Op(Qt==null?void 0:Qt.locationIds)),iconCreateFunction:Un=>qJ(Un,xt),children:[De.length>0&&De.map(Un=>ze(LU,{loc:Un,alertScope:"nationally",activities:xt.filter(Ym(Qt==null?void 0:Qt.locationIds)).filter(Oi=>{var bn,bi,fi,ot;return Un.adminLevel===0?((bn=Oi.locations)==null?void 0:bn.find(Ce=>Ce.adminLevel===0))&&((bi=Oi.locations)==null?void 0:bi.length)===1&&((fi=Oi.locations)==null?void 0:fi.find(Ce=>Un.id===Ce.id)):(ot=QT(Oi,Qt==null?void 0:Qt.locationIds).locations)==null?void 0:ot.find(Ie=>Un.id===Ie.id)})},Un.id)),Se.length>1&&Se.filter(Op(Qt.locationIds)).slice(0,1).map((Un,Oi)=>ze(LU,{loc:{...Un,id:Oi,name:(Ee==null?void 0:Ee.name)??""},alertScope:"multicountry",position:ri,activities:xt.filter(bn=>{var fi;return(((fi=bn.locations)==null?void 0:fi.filter(ot=>ot.adminLevel===0).length)??0)>1})},Oi))]})]}),ze("small",{style:{display:"flex",alignItems:"center",marginTop:".25rem",marginLeft:".3rem"},children:[ze("div",{style:{borderRadius:"1rem",marginRight:".25rem",width:"1rem",height:"1rem",display:"inline-block",background:ho(Fa.palette.primary.main,.9)}})," ","Programmatic interventions tagged with detailed locations",ze("div",{style:{borderRadius:"1rem",width:"1rem",marginRight:".25rem",marginLeft:"0.5rem",height:"1rem",display:"inline-block",background:Fa.palette.orange.main}})," ","Programmatic interventions tagged at country level only"]})]})]})};var Tte=function(e){return e.replace(/-([a-z])/gi,function(t,i){return i.toUpperCase()})},Ete=function(){return document.currentScript||function(){var e=document.getElementsByTagName("script");return e[e.length-1]}()},Ste=function(e,t){t===void 0&&(t={});var i=e.attributes,r=Object.assign({},t);return Object.keys(i).forEach(function(d){if(i.hasOwnProperty(d)){var f=i[d].name;if(!f||typeof f!="string")return!1;var v=f.split(/(data-props?-)/).pop()||"";if(v=Tte(v),f!==v){var h=i[d].nodeValue;r[v]=h}}}),[].forEach.call(e.getElementsByTagName("script"),function(d){var f={};if(d.hasAttribute("type")){if(d.getAttribute("type")!=="text/props"&&d.getAttribute("type")!=="application/json")return;try{f=JSON.parse(d.innerHTML)}catch(v){throw new Error(v)}Object.assign(r,f)}}),r},Ite=function(e){var t=e.attributes,i=null;return Object.keys(t).forEach(function(r){if(t.hasOwnProperty(r)){var d=t[r].name;d==="data-mount-in"&&(i=t[r].nodeValue)}}),i},XU=function(e){var t=e.selector,i=e.inline,r=e.clientSpecified,d=[],f=Ete();if(i===!0){var v=f.parentNode;d.push(v)}return r===!0&&!t&&(t=Ite(f)),t&&[].forEach.call(document.querySelectorAll(t),function(h){d.push(h)}),d},Mte=function(e,t,i,r,d){t.forEach(function(f){var v=f;if(!v._habitat){v._habitat=!0;var h=Ste(f,d)||d;return r&&(v.innerHTML=""),Hg(Dl(e,h),v,i)}})},Lte=function(e){var t=e,i=null,r=function(d){d===void 0&&(d={});var f=d.selector;f===void 0&&(f=null);var v=d.inline;v===void 0&&(v=!1);var h=d.clean;h===void 0&&(h=!1);var s=d.clientSpecified;s===void 0&&(s=!1);var U=d.defaultProps;U===void 0&&(U={});var $=XU({selector:f,inline:v,clientSpecified:s}),V=function(){if($.length>0){var q=XU({selector:f,inline:v,clientSpecified:s});return Mte(t,q,i,h,U)}};V(),document.addEventListener("DOMContentLoaded",V),document.addEventListener("load",V)};return{render:r}};((e,t)=>{if(typeof window<"u"){const i=YD({productionPrefix:t}),d=Lte(f=>(YB.i18n.changeLanguage(f.lang??"en"),ze(L3,{injectFirst:!0,children:ze($5,{theme:Fa,children:[ze("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500"}),ze("link",{href:"https://fonts.googleapis.com/css2?family=Oswald:wght@200;300;400;500;600&display=swap",rel:"stylesheet"}),ze(vJ,{generateClassName:i,children:ze(BR,{i18n:YB.i18n,children:ze(e,{...f,dir:YB.i18n.dir()})})})]})})));return d.render({clientSpecified:!0}),d}})(Bte,"whereWeWorkMap")})();
